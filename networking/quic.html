<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Quic - My Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-0298451c.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-3ff3ea79.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">My Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="quic-protocol"><a class="header" href="#quic-protocol">QUIC Protocol</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p><strong>QUIC</strong> (Quick UDP Internet Connections) is a modern, UDP-based multiplexed and secure transport protocol designed to improve performance over TCP for connection-oriented web applications.</p>
<h3 id="key-facts"><a class="header" href="#key-facts">Key Facts</a></h3>
<ul>
<li><strong>Protocol Type</strong>: Transport Layer Protocol (Layer 4)</li>
<li><strong>Built On</strong>: UDP</li>
<li><strong>Standard</strong>: IETF RFC 9000 (May 2021)</li>
<li><strong>Original Developer</strong>: Google (2012)</li>
<li><strong>Default Port</strong>: 443 (same as HTTPS)</li>
<li><strong>Encryption</strong>: TLS 1.3 (mandatory, built-in)</li>
<li><strong>Primary Use</strong>: Foundation for HTTP/3</li>
</ul>
<h3 id="what-problem-does-quic-solve"><a class="header" href="#what-problem-does-quic-solve">What Problem Does QUIC Solve?</a></h3>
<p>Traditional web connections use TCP + TLS for secure communication. This combination has several limitations:</p>
<ol>
<li><strong>High Latency</strong>: Separate handshakes for TCP (3-way) and TLS (2-RTT) add connection overhead</li>
<li><strong>Head-of-Line Blocking</strong>: TCP treats data as a single ordered stream; lost packet blocks all data</li>
<li><strong>Connection Rigidity</strong>: TCP connections tied to IP addresses; network changes break connections</li>
<li><strong>Slow Evolution</strong>: TCP is kernel-level; updates require OS changes</li>
</ol>
<p>QUIC addresses all these issues by:</p>
<ul>
<li>Combining transport + encryption handshake (0-RTT/1-RTT)</li>
<li>Supporting multiple independent streams over single connection</li>
<li>Using connection IDs instead of IP tuples</li>
<li>Running in userspace for faster iteration</li>
</ul>
<h3 id="quic-in-the-protocol-stack"><a class="header" href="#quic-in-the-protocol-stack">QUIC in the Protocol Stack</a></h3>
<pre><code>┌─────────────────────────────────────┐
│      Application Layer              │
│         (HTTP/3, DNS)                │
├─────────────────────────────────────┤
│         QUIC Protocol                │
│  (Transport + TLS 1.3 integrated)    │
├─────────────────────────────────────┤
│              UDP                     │
├─────────────────────────────────────┤
│              IP                      │
├─────────────────────────────────────┤
│        Link Layer                    │
└─────────────────────────────────────┘
</code></pre>
<hr>
<h2 id="key-features"><a class="header" href="#key-features">Key Features</a></h2>
<h3 id="1-fast-connection-establishment"><a class="header" href="#1-fast-connection-establishment">1. Fast Connection Establishment</a></h3>
<p><strong>1-RTT Handshake</strong> (First Connection):</p>
<pre><code>Client                                Server
  |                                      |
  |------- Initial (ClientHello) ------&gt;|
  |                                      |
  |&lt;----- Handshake (ServerHello) ------|
  |       (Certificate, Finished)        |
  |                                      |
  |------- Handshake (Finished) -------&gt;|
  |                                      |
  |&lt;=== Application Data Exchange =====&gt;|
</code></pre>
<p><strong>0-RTT Resumption</strong> (Subsequent Connections):</p>
<pre><code>Client                                Server
  |                                      |
  |------- Initial + 0-RTT Data --------&gt;|
  |                                      |
  |&lt;------ Handshake (Finished) ---------|
  |&lt;------ Application Data -------------|
  |                                      |
  |&lt;=== Application Data Exchange =====&gt;|
</code></pre>
<p>Compare to TCP + TLS 1.3:</p>
<ul>
<li>TCP: 1-RTT (SYN, SYN-ACK, ACK)</li>
<li>TLS: 1-RTT minimum</li>
<li><strong>Total: 2-RTT minimum</strong> for TCP+TLS vs <strong>1-RTT</strong> for QUIC</li>
</ul>
<h3 id="2-built-in-encryption"><a class="header" href="#2-built-in-encryption">2. Built-in Encryption</a></h3>
<p>QUIC integrates TLS 1.3 directly into the protocol:</p>
<ul>
<li><strong>No plaintext QUIC</strong>: All packets except version negotiation are encrypted</li>
<li><strong>Header Protection</strong>: Even packet headers are partially encrypted</li>
<li><strong>Forward Secrecy</strong>: Keys rotated regularly</li>
<li><strong>0-RTT Security</strong>: Replay protection built-in</li>
</ul>
<p>Unlike TCP, you cannot have an unencrypted QUIC connection.</p>
<h3 id="3-multiplexing-without-head-of-line-blocking"><a class="header" href="#3-multiplexing-without-head-of-line-blocking">3. Multiplexing Without Head-of-Line Blocking</a></h3>
<p><strong>HTTP/2 over TCP</strong> (suffers from TCP head-of-line blocking):</p>
<pre><code>Stream 1: [Packet A] [Packet B] [X] [Packet D]
Stream 2: [Packet E] [Packet F] [Packet G]

If Packet C is lost, TCP blocks ALL streams
until it's retransmitted, even Stream 2 data.
</code></pre>
<p><strong>HTTP/3 over QUIC</strong> (stream independence):</p>
<pre><code>Stream 1: [Packet A] [Packet B] [X] [Packet D]
Stream 2: [Packet E] [Packet F] [Packet G]

If Packet C is lost, only Stream 1 is affected.
Stream 2 continues delivering data.
</code></pre>
<p>Each QUIC stream is independent:</p>
<ul>
<li>Lost packets only block their own stream</li>
<li>Other streams continue unaffected</li>
<li>Better performance on lossy networks</li>
</ul>
<h3 id="4-connection-migration"><a class="header" href="#4-connection-migration">4. Connection Migration</a></h3>
<p>QUIC connections identified by <strong>Connection ID</strong>, not IP tuple:</p>
<p><strong>TCP Connection</strong>: <code>(Source IP, Source Port, Dest IP, Dest Port)</code></p>
<ul>
<li>Change any element → connection breaks</li>
</ul>
<p><strong>QUIC Connection</strong>: <code>Connection ID</code> (64-bit unique identifier)</p>
<ul>
<li>IP address change → connection survives</li>
<li>Port change → connection survives</li>
<li>Switch WiFi to cellular → connection continues seamlessly</li>
</ul>
<p>Example scenario:</p>
<pre><code>1. Mobile client connects to server via WiFi
   Connection ID: 0x1234567890ABCDEF
   Client IP: 192.168.1.100

2. User walks outside, switches to cellular
   Same Connection ID: 0x1234567890ABCDEF
   New Client IP: 10.20.30.40

3. Connection continues without interruption
   Server recognizes same Connection ID
</code></pre>
<h3 id="5-improved-congestion-control"><a class="header" href="#5-improved-congestion-control">5. Improved Congestion Control</a></h3>
<p>QUIC provides better congestion control than TCP:</p>
<ul>
<li><strong>Monotonically Increasing Packet Numbers</strong>: No wraparound, easier loss detection</li>
<li><strong>Explicit ACK Delays</strong>: Know exactly how long peer held ACK</li>
<li><strong>More ACK Ranges</strong>: Can acknowledge non-contiguous ranges efficiently</li>
<li><strong>Probe Timeout (PTO)</strong>: Faster than TCP’s retransmission timeout</li>
<li><strong>Pluggable Algorithms</strong>: Easier to experiment with new algorithms</li>
</ul>
<p>Default algorithms:</p>
<ul>
<li><strong>NewReno</strong>: Similar to TCP NewReno</li>
<li><strong>CUBIC</strong>: Default in most implementations</li>
<li><strong>BBR</strong>: Google’s congestion control (used in some deployments)</li>
</ul>
<h3 id="6-stream-and-connection-flow-control"><a class="header" href="#6-stream-and-connection-flow-control">6. Stream and Connection Flow Control</a></h3>
<p>Two levels of flow control:</p>
<p><strong>Stream-level Flow Control</strong>:</p>
<pre><code>Client Stream 1: MAX_STREAM_DATA = 10MB
Client Stream 2: MAX_STREAM_DATA = 5MB
Client Stream 3: MAX_STREAM_DATA = 1MB
</code></pre>
<p><strong>Connection-level Flow Control</strong>:</p>
<pre><code>Total connection: MAX_DATA = 20MB
(Sum of all streams cannot exceed this)
</code></pre>
<p>This prevents:</p>
<ul>
<li>Single stream consuming all bandwidth</li>
<li>Memory exhaustion from too much buffered data</li>
<li>Receiver overwhelm</li>
</ul>
<hr>
<h2 id="quic-vs-tcp-comparison"><a class="header" href="#quic-vs-tcp-comparison">QUIC vs TCP Comparison</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>TCP</th><th>QUIC</th></tr>
</thead>
<tbody>
<tr><td><strong>Transport</strong></td><td>TCP (reliable, ordered)</td><td>UDP (unreliable) + QUIC reliability layer</td></tr>
<tr><td><strong>Connection Setup</strong></td><td>3-way handshake (1-RTT)</td><td>1-RTT or 0-RTT</td></tr>
<tr><td><strong>Encryption</strong></td><td>Optional (TLS layered on top)</td><td>Mandatory (TLS 1.3 integrated)</td></tr>
<tr><td><strong>Handshake</strong></td><td>Separate TCP + TLS handshakes</td><td>Combined transport + TLS handshake</td></tr>
<tr><td><strong>Head-of-Line Blocking</strong></td><td>Yes (stream level)</td><td>No (only within individual streams)</td></tr>
<tr><td><strong>Multiplexing</strong></td><td>No (requires HTTP/2)</td><td>Built-in, independent streams</td></tr>
<tr><td><strong>Connection Migration</strong></td><td>No (breaks on IP change)</td><td>Yes (connection ID based)</td></tr>
<tr><td><strong>Packet Numbers</strong></td><td>Sequence numbers (wrap around)</td><td>Monotonically increasing (never wrap)</td></tr>
<tr><td><strong>Loss Recovery</strong></td><td>Coarse retransmission timeout</td><td>Fine-grained PTO per packet number space</td></tr>
<tr><td><strong>Flow Control</strong></td><td>Connection-level only</td><td>Stream-level + connection-level</td></tr>
<tr><td><strong>Implementation</strong></td><td>Kernel space (OS level)</td><td>User space (application level)</td></tr>
<tr><td><strong>Evolution Speed</strong></td><td>Slow (requires OS updates)</td><td>Fast (library updates)</td></tr>
<tr><td><strong>NAT Traversal</strong></td><td>Built-in support</td><td>May have firewall issues</td></tr>
<tr><td><strong>Middlebox Support</strong></td><td>Excellent</td><td>Growing (UDP often allowed)</td></tr>
<tr><td><strong>Debugging</strong></td><td>Easy (plaintext before TLS)</td><td>Harder (always encrypted)</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="quic-vs-http2-over-tcp"><a class="header" href="#quic-vs-http2-over-tcp">QUIC vs HTTP/2 over TCP</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Aspect</th><th>HTTP/2 over TCP</th><th>HTTP/3 over QUIC</th></tr>
</thead>
<tbody>
<tr><td><strong>Transport Protocol</strong></td><td>TCP</td><td>UDP + QUIC</td></tr>
<tr><td><strong>Multiplexing</strong></td><td>Yes, but shares TCP stream</td><td>Yes, with independent streams</td></tr>
<tr><td><strong>Head-of-Line Blocking</strong></td><td>TCP level (affects all streams)</td><td>Only within individual streams</td></tr>
<tr><td><strong>Connection Setup Time</strong></td><td>2-3 RTT (TCP + TLS + HTTP)</td><td>0-1 RTT (QUIC + HTTP/3)</td></tr>
<tr><td><strong>Connection Migration</strong></td><td>No</td><td>Yes</td></tr>
<tr><td><strong>Encryption</strong></td><td>TLS 1.2/1.3 (optional)</td><td>TLS 1.3 (mandatory)</td></tr>
<tr><td><strong>Header Compression</strong></td><td>HPACK</td><td>QPACK (designed for reordering)</td></tr>
<tr><td><strong>Mobile Performance</strong></td><td>Poor (connection breaks)</td><td>Excellent (connection migration)</td></tr>
<tr><td><strong>Packet Loss Impact</strong></td><td>Blocks all streams</td><td>Blocks only affected stream</td></tr>
<tr><td><strong>Adoption</strong></td><td>~98% of websites</td><td>~8.7% of websites (growing)</td></tr>
</tbody>
</table>
</div>
<p><strong>Latency Comparison</strong>:</p>
<pre><code>HTTP/2 over TCP + TLS 1.3:
  TCP SYN:          ──────────────&gt;
  TCP SYN-ACK:      &lt;──────────────
  TCP ACK:          ──────────────&gt;      [1 RTT]
  TLS ClientHello:  ──────────────&gt;
  TLS ServerHello:  &lt;──────────────      [1 RTT]
  HTTP/2 Request:   ──────────────&gt;
  HTTP/2 Response:  &lt;──────────────      [1 RTT]
  Total: 3 RTT

HTTP/3 over QUIC (first connection):
  QUIC Initial:     ──────────────&gt;
  QUIC Handshake:   &lt;──────────────      [1 RTT]
  HTTP/3 Request:   ──────────────&gt;
  HTTP/3 Response:  &lt;──────────────      [1 RTT]
  Total: 2 RTT

HTTP/3 over QUIC (0-RTT resumption):
  QUIC Initial+Data:──────────────&gt;
  QUIC Response:    &lt;──────────────      [1 RTT]
  Total: 1 RTT (or 0-RTT for early data)
</code></pre>
<hr>
<h2 id="packet-format"><a class="header" href="#packet-format">Packet Format</a></h2>
<h3 id="long-header-format"><a class="header" href="#long-header-format">Long Header Format</a></h3>
<p>Used during connection establishment (Initial, 0-RTT, Handshake, Retry):</p>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1|1|T T|X X X X|                                               |
+-+-+-+-+-+-+-+-+                                               +
|                          Version (32)                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| DCID Len (8)  |                                               |
+-+-+-+-+-+-+-+-+                                               +
|               Destination Connection ID (0..160)            ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| SCID Len (8)  |                                               |
+-+-+-+-+-+-+-+-+                                               +
|                 Source Connection ID (0..160)               ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                  Type-Specific Payload (*)                  ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Header Form (1 bit): 1 = Long Header
Fixed Bit (1 bit): 1 (always set)
Long Packet Type (T T, 2 bits):
  00 = Initial
  01 = 0-RTT
  10 = Handshake
  11 = Retry
Type-Specific Bits (X X X X, 4 bits): Varies by packet type
Version (32 bits): QUIC version (0x00000001 for RFC 9000)
DCID Len (8 bits): Destination Connection ID length
Destination Connection ID (0-160 bits): Variable length
SCID Len (8 bits): Source Connection ID length
Source Connection ID (0-160 bits): Variable length
</code></pre>
<h3 id="short-header-format"><a class="header" href="#short-header-format">Short Header Format</a></h3>
<p>Used for application data after handshake completes:</p>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0|1|S|R|R|K|P P|                                               |
+-+-+-+-+-+-+-+-+                                               +
|               Destination Connection ID (*)                 ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                   Packet Number (8/16/24/32)                ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 Protected Payload (*)                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Header Form (1 bit): 0 = Short Header
Fixed Bit (1 bit): 1 (always set)
Spin Bit (S, 1 bit): Latency measurement
Reserved Bits (R R, 2 bits): Must be 0
Key Phase (K, 1 bit): Key update tracking
Packet Number Length (P P, 2 bits): PN field size
Destination Connection ID (*): Variable length (0-160 bits)
Packet Number (8-32 bits): Encrypted, variable length
Protected Payload (*): Encrypted application data and frames
</code></pre>
<h3 id="packet-types"><a class="header" href="#packet-types">Packet Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Type</th><th>Name</th><th>Long Header</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>Initial</strong></td><td>Yes</td><td>Yes</td><td>First packet from client; crypto handshake starts</td></tr>
<tr><td><strong>0-RTT</strong></td><td>Yes</td><td>Yes</td><td>Early application data (before handshake completes)</td></tr>
<tr><td><strong>Handshake</strong></td><td>Yes</td><td>Yes</td><td>Crypto handshake completion</td></tr>
<tr><td><strong>Retry</strong></td><td>Yes</td><td>Yes</td><td>Server requests client validation (address verification)</td></tr>
<tr><td><strong>Version Negotiation</strong></td><td>Yes</td><td>Special</td><td>Version mismatch; server offers alternatives</td></tr>
<tr><td><strong>1-RTT</strong></td><td>No</td><td>No</td><td>Application data after handshake (short header)</td></tr>
</tbody>
</table>
</div>
<hr>
<h2 id="connection-lifecycle"><a class="header" href="#connection-lifecycle">Connection Lifecycle</a></h2>
<h3 id="1-initial-connection-1-rtt"><a class="header" href="#1-initial-connection-1-rtt">1. Initial Connection (1-RTT)</a></h3>
<pre><code>Client                                         Server
  │                                              │
  │  ┌────────────────────────────────┐          │
  │  │ Generate Initial Keys          │          │
  │  │ Create Connection ID           │          │
  │  └────────────────────────────────┘          │
  │                                              │
  │────── Initial (CRYPTO frame) ──────────────&gt;│
  │       ClientHello (TLS)                      │
  │       QUIC Transport Parameters              │
  │                                              │
  │                         ┌────────────────────┤
  │                         │ Validate Client     │
  │                         │ Generate Server IDs │
  │                         │ Create Initial Keys │
  │                         └────────────────────┤
  │                                              │
  │&lt;────── Initial (ACK + CRYPTO) ───────────────│
  │        ACK of client Initial                 │
  │                                              │
  │&lt;────── Handshake (CRYPTO) ────────────────── │
  │        ServerHello (TLS)                     │
  │        EncryptedExtensions                   │
  │        Certificate                           │
  │        CertificateVerify                     │
  │        Finished                              │
  │        QUIC Transport Parameters             │
  │                                              │
  │  ┌────────────────────────────────┐          │
  │  │ Derive Handshake Keys          │          │
  │  │ Verify Server Certificate      │          │
  │  └────────────────────────────────┘          │
  │                                              │
  │────── Handshake (CRYPTO) ──────────────────&gt;│
  │       Finished (TLS)                         │
  │                                              │
  │  ┌────────────────────────────────┐          │
  │  │ Derive 1-RTT Keys              │          │
  │  │ Handshake Complete             │          │
  │  └────────────────────────────────┘          │
  │                                   ┌──────────┤
  │                                   │ Derive    │
  │                                   │ 1-RTT Keys│
  │                                   └──────────┤
  │                                              │
  │&lt;═══════ 1-RTT (Application Data) ═══════════&gt;│
  │         Short Header Packets                 │
  │                                              │
</code></pre>
<p><strong>Timeline</strong>: 1 RTT before application data can be sent</p>
<h3 id="2-0-rtt-resumption-subsequent-connection"><a class="header" href="#2-0-rtt-resumption-subsequent-connection">2. 0-RTT Resumption (Subsequent Connection)</a></h3>
<p>Client must have previously connected and cached:</p>
<ul>
<li>Session ticket</li>
<li>Transport parameters</li>
<li>Early data encryption keys</li>
</ul>
<pre><code>Client                                         Server
  │                                              │
  │  ┌────────────────────────────────┐          │
  │  │ Use Cached Session Ticket      │          │
  │  │ Derive 0-RTT Keys              │          │
  │  └────────────────────────────────┘          │
  │                                              │
  │────── Initial (CRYPTO) ─────────────────────&gt;│
  │       ClientHello + PSK                      │
  │       (includes session ticket)              │
  │                                              │
  │────── 0-RTT (Application Data) ─────────────&gt;│
  │       Early application data                 │
  │       (e.g., HTTP GET request)               │
  │                                              │
  │                         ┌────────────────────┤
  │                         │ Accept/Reject 0-RTT│
  │                         │ Derive 0-RTT Keys  │
  │                         └────────────────────┤
  │                                              │
  │&lt;────── Handshake (CRYPTO) ────────────────── │
  │        ServerHello + PSK confirmation        │
  │        Finished                              │
  │                                              │
  │&lt;────── 1-RTT (Application Data) ─────────────│
  │        Response to early data                │
  │                                              │
  │────── Handshake (CRYPTO) ──────────────────&gt;│
  │       Finished                               │
  │                                              │
  │&lt;═══════ 1-RTT (Application Data) ═══════════&gt;│
  │                                              │
</code></pre>
<p><strong>Timeline</strong>: 0 RTT for early data (but no server confirmation yet)</p>
<p><strong>0-RTT Limitations</strong>:</p>
<ul>
<li><strong>Not replay-safe</strong>: Early data could be replayed by attacker</li>
<li><strong>Use only for idempotent operations</strong>: GET requests OK, POST dangerous</li>
<li><strong>Server can reject</strong>: Must be prepared for 0-RTT rejection</li>
</ul>
<h3 id="3-connection-migration"><a class="header" href="#3-connection-migration">3. Connection Migration</a></h3>
<p>When client’s IP address or port changes:</p>
<pre><code>Client (WiFi)                                  Server
  │                                              │
  │&lt;═══════ Connection: CID 0xABCD ════════════&gt;│
  │         IP: 192.168.1.100:50000             │
  │                                              │
  │  [Network Change: WiFi → Cellular]          │
  │                                              │
Client (Cellular)                              Server
  │                                              │
  │────── Short Header (CID 0xABCD) ───────────&gt;│
  │       New Source: 10.20.30.40:60000         │
  │       PATH_CHALLENGE frame                  │
  │                                              │
  │                         ┌────────────────────┤
  │                         │ Validate new path  │
  │                         │ Keep CID 0xABCD    │
  │                         └────────────────────┤
  │                                              │
  │&lt;────── PATH_RESPONSE ──────────────────────│
  │        Confirms new path valid               │
  │                                              │
  │&lt;═══════ Connection continues ═══════════════&gt;│
  │         Same CID, new IP/port               │
  │                                              │
</code></pre>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Seamless WiFi ↔ cellular transitions</li>
<li>Mobile device moves between networks</li>
<li>No connection re-establishment needed</li>
<li>No application-level reconnection logic</li>
</ul>
<h3 id="4-connection-termination"><a class="header" href="#4-connection-termination">4. Connection Termination</a></h3>
<p><strong>Graceful Close</strong> (CONNECTION_CLOSE frame):</p>
<pre><code>Client                                         Server
  │                                              │
  │────── CONNECTION_CLOSE ────────────────────&gt;│
  │       Error Code: 0 (NO_ERROR)              │
  │       Reason: "Done with transfer"          │
  │                                              │
  │&lt;────── CONNECTION_CLOSE ─────────────────── │
  │        Acknowledges closure                  │
  │                                              │
  │  [Connection closed]                         │
  │                                              │
</code></pre>
<p><strong>Immediate Close</strong> (due to error):</p>
<pre><code>Client                                         Server
  │                                              │
  │────── Packet with error ────────────────────&gt;│
  │                                              │
  │&lt;────── CONNECTION_CLOSE ─────────────────── │
  │        Error Code: 0x01 (INTERNAL_ERROR)    │
  │        Reason: "Protocol violation"         │
  │                                              │
  │  [Connection aborted]                        │
  │                                              │
</code></pre>
<p><strong>Stateless Reset</strong> (server lost state):</p>
<p>When server can’t decrypt packet (lost state), sends stateless reset:</p>
<pre><code>  Unknown Packet ───────────────────&gt;
                 &lt;─────────────────── Stateless Reset
                                      (unpredictable token)
</code></pre>
<hr>
<h2 id="stream-management"><a class="header" href="#stream-management">Stream Management</a></h2>
<p>QUIC supports multiple independent streams over a single connection.</p>
<h3 id="stream-types"><a class="header" href="#stream-types">Stream Types</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Stream Type</th><th>Initiated By</th><th>Stream ID Pattern</th><th>Use Case</th></tr>
</thead>
<tbody>
<tr><td><strong>Client-Initiated Bidirectional</strong></td><td>Client</td><td>0x00, 0x04, 0x08, … (4n)</td><td>HTTP request/response</td></tr>
<tr><td><strong>Server-Initiated Bidirectional</strong></td><td>Server</td><td>0x01, 0x05, 0x09, … (4n+1)</td><td>Server push</td></tr>
<tr><td><strong>Client-Initiated Unidirectional</strong></td><td>Client</td><td>0x02, 0x06, 0x0A, … (4n+2)</td><td>Telemetry, logging</td></tr>
<tr><td><strong>Server-Initiated Unidirectional</strong></td><td>Server</td><td>0x03, 0x07, 0x0B, … (4n+3)</td><td>Server events</td></tr>
</tbody>
</table>
</div>
<h3 id="stream-states"><a class="header" href="#stream-states">Stream States</a></h3>
<pre><code>         ┌──────────────────────────┐
         │        Idle              │
         │  (stream not created)    │
         └──────────────────────────┘
                    │
         ┌──────────┴──────────┐
         │                     │
    Send/Recv Frame      Receive Frame
         │                     │
         ▼                     ▼
┌─────────────────┐   ┌─────────────────┐
│      Open       │   │   Recv Only     │
│  (bidirectional)│   │ (unidirectional)│
└─────────────────┘   └─────────────────┘
         │                     │
    Send FIN                Recv FIN
         │                     │
         ▼                     ▼
┌─────────────────┐   ┌─────────────────┐
│   Data Sent     │   │   Data Recvd    │
│  (waiting ACK)  │   │                 │
└─────────────────┘   └─────────────────┘
         │                     │
      Recv ACK               Reset
         │                     │
         ▼                     ▼
   ┌──────────────────────────┐
   │    Stream Closed         │
   └──────────────────────────┘
</code></pre>
<h3 id="creating-streams"><a class="header" href="#creating-streams">Creating Streams</a></h3>
<p>Streams created implicitly by sending data on new stream ID:</p>
<pre><code class="language-python"># Client opens bidirectional stream 0
stream_0 = connection.create_stream()  # ID = 0x00
stream_0.write(b"GET / HTTP/3.0\r\n")

# Client opens bidirectional stream 4
stream_4 = connection.create_stream()  # ID = 0x04
stream_4.write(b"GET /api HTTP/3.0\r\n")

# Server can open bidirectional stream 1
# (if client's MAX_STREAMS allows it)
</code></pre>
<p><strong>Flow Control Frames</strong>:</p>
<ul>
<li><code>MAX_STREAMS</code>: Limits number of concurrent streams</li>
<li><code>STREAMS_BLOCKED</code>: Peer indicates it wants more streams</li>
<li><code>STREAM_DATA_BLOCKED</code>: Stream blocked by flow control</li>
<li><code>MAX_STREAM_DATA</code>: Increase flow control limit for specific stream</li>
</ul>
<hr>
<h2 id="flow-control"><a class="header" href="#flow-control">Flow Control</a></h2>
<h3 id="two-level-flow-control"><a class="header" href="#two-level-flow-control">Two-Level Flow Control</a></h3>
<p><strong>1. Connection-level</strong> (aggregate across all streams):</p>
<pre><code>MAX_DATA = 10 MB

Stream 0: Uses 3 MB
Stream 4: Uses 2 MB
Stream 8: Uses 4 MB
Stream 12: Uses 1 MB
────────────────────
Total: 10 MB → Connection flow control limit reached
</code></pre>
<p><strong>2. Stream-level</strong> (per individual stream):</p>
<pre><code>Stream 0: MAX_STREAM_DATA = 5 MB

Currently sent: 4 MB
Can send more: 1 MB before blocked
</code></pre>
<h3 id="flow-control-frames"><a class="header" href="#flow-control-frames">Flow Control Frames</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Frame Type</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>MAX_DATA</code></td><td>Increase connection-level flow control limit</td></tr>
<tr><td><code>MAX_STREAM_DATA</code></td><td>Increase stream-level flow control limit</td></tr>
<tr><td><code>DATA_BLOCKED</code></td><td>Connection blocked by flow control</td></tr>
<tr><td><code>STREAM_DATA_BLOCKED</code></td><td>Stream blocked by flow control</td></tr>
</tbody>
</table>
</div>
<h3 id="flow-control-example"><a class="header" href="#flow-control-example">Flow Control Example</a></h3>
<pre><code>Client                                         Server
  │                                              │
  │────── STREAM frame (Stream 0, 4KB) ────────&gt;│
  │                                              │
  │────── STREAM frame (Stream 0, 4KB) ────────&gt;│
  │       Total sent: 8KB                        │
  │       MAX_STREAM_DATA: 10KB                  │
  │                                              │
  │────── STREAM frame (Stream 0, 4KB) ────────&gt;│
  │       Total sent: 12KB                       │
  │       → Exceeds MAX_STREAM_DATA!             │
  │                                              │
  │────── STREAM_DATA_BLOCKED (Stream 0) ──────&gt;│
  │       Indicates need for more credit         │
  │                                              │
  │&lt;────── MAX_STREAM_DATA (20KB) ───────────── │
  │        Increases limit                       │
  │                                              │
  │────── STREAM frame (Stream 0, 8KB) ────────&gt;│
  │       Now allowed (total 20KB)               │
  │                                              │
</code></pre>
<hr>
<h2 id="congestion-control"><a class="header" href="#congestion-control">Congestion Control</a></h2>
<h3 id="improvements-over-tcp"><a class="header" href="#improvements-over-tcp">Improvements Over TCP</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>TCP</th><th>QUIC</th></tr>
</thead>
<tbody>
<tr><td><strong>Packet Numbering</strong></td><td>Seq# wraps around</td><td>Monotonically increasing</td></tr>
<tr><td><strong>RTT Measurement</strong></td><td>Ambiguous retransmissions</td><td>Explicit ACK delays</td></tr>
<tr><td><strong>ACK Ranges</strong></td><td>Limited SACK blocks</td><td>Extensive ACK ranges</td></tr>
<tr><td><strong>Loss Detection</strong></td><td>Coarse timeouts</td><td>Fine-grained PTO</td></tr>
<tr><td><strong>Fast Retransmit</strong></td><td>3 duplicate ACKs</td><td>Packet number gaps</td></tr>
</tbody>
</table>
</div>
<h3 id="congestion-control-algorithms"><a class="header" href="#congestion-control-algorithms">Congestion Control Algorithms</a></h3>
<p>QUIC implementations commonly support:</p>
<p><strong>1. NewReno</strong> (RFC 6582):</p>
<ul>
<li>Simple, well-understood</li>
<li>Loss-based congestion control</li>
<li>Additive increase, multiplicative decrease (AIMD)</li>
</ul>
<p><strong>2. CUBIC</strong> (default in many implementations):</p>
<ul>
<li>Better for high-bandwidth, high-latency networks</li>
<li>Cubic window growth function</li>
<li>More aggressive than NewReno</li>
</ul>
<p><strong>3. BBR (Bottleneck Bandwidth and RTT)</strong>:</p>
<ul>
<li>Google’s algorithm</li>
<li>Model-based (not loss-based)</li>
<li>Optimizes for throughput and latency</li>
<li>Used in YouTube, Google services</li>
</ul>
<h3 id="congestion-window-states"><a class="header" href="#congestion-window-states">Congestion Window States</a></h3>
<pre><code>                 Slow Start
                     │
      ┌──────────────┴──────────────┐
      │ cwnd *= 2 each RTT          │
      │ (exponential growth)        │
      └──────────────┬──────────────┘
                     │
              Reach ssthresh or
              detect loss
                     │
                     ▼
              Congestion Avoidance
                     │
      ┌──────────────┴──────────────┐
      │ cwnd += 1 each RTT          │
      │ (linear growth)             │
      └──────────────┬──────────────┘
                     │
              Detect loss
                     │
                     ▼
              Fast Recovery
                     │
      ┌──────────────┴──────────────┐
      │ ssthresh = cwnd / 2         │
      │ cwnd = ssthresh             │
      │ Retransmit lost packets     │
      └──────────────┬──────────────┘
                     │
              Recovery complete
                     │
                     ▼
              Congestion Avoidance
</code></pre>
<h3 id="ack-frame-format"><a class="header" href="#ack-frame-format">ACK Frame Format</a></h3>
<p>QUIC ACK frames can efficiently acknowledge non-contiguous ranges:</p>
<pre><code>ACK Frame:
  Largest Acknowledged: 100
  ACK Delay: 5ms
  ACK Range Count: 3

  First ACK Range: 5  (packets 96-100)
  Gap: 2              (packets 93-95 missing)
  ACK Range: 10       (packets 83-92)
  Gap: 5              (packets 77-82 missing)
  ACK Range: 15       (packets 62-76)

Acknowledged packets: 62-76, 83-92, 96-100
Missing packets: 77-82, 93-95
</code></pre>
<p>This is more efficient than TCP’s SACK option.</p>
<hr>
<h2 id="loss-detection-and-recovery"><a class="header" href="#loss-detection-and-recovery">Loss Detection and Recovery</a></h2>
<h3 id="packet-number-spaces"><a class="header" href="#packet-number-spaces">Packet Number Spaces</a></h3>
<p>QUIC uses three separate packet number spaces to avoid ambiguity:</p>
<ol>
<li><strong>Initial</strong> packet number space</li>
<li><strong>Handshake</strong> packet number space</li>
<li><strong>Application Data</strong> (1-RTT) packet number space</li>
</ol>
<p>Each space has independent, monotonically increasing packet numbers.</p>
<h3 id="loss-detection-mechanisms"><a class="header" href="#loss-detection-mechanisms">Loss Detection Mechanisms</a></h3>
<p><strong>1. Packet Threshold</strong> (fast retransmit):</p>
<pre><code>Received packets: 10, 11, 12, 14, 15, 16

Packet 13 is missing and 3 packets (14, 15, 16)
received after it → Declare packet 13 lost
</code></pre>
<p><strong>2. Time Threshold</strong> (timeout):</p>
<pre><code>Packet sent at time T
No ACK received
Current time &gt; T + (smoothed_RTT * 9/8)
→ Declare packet lost
</code></pre>
<p><strong>3. Probe Timeout (PTO)</strong>:</p>
<p>When no ACKs received for a while, send probe:</p>
<pre><code>  Last packet sent: Time T
  No ACK received

  PTO = smoothed_RTT + max(4 * rttvar, kGranularity) + max_ack_delay

  At time T + PTO:
    Send 1-2 probe packets to elicit ACK

  If still no ACK:
    PTO = PTO * 2 (exponential backoff)
</code></pre>
<h3 id="lost-packet-retransmission"><a class="header" href="#lost-packet-retransmission">Lost Packet Retransmission</a></h3>
<p>QUIC never retransmits packets; instead, it retransmits <em>data</em> in new packets:</p>
<pre><code>Original:
  Packet 10: STREAM frame [offset 0, length 1000]

Lost packet 10, retransmit data:
  Packet 25: STREAM frame [offset 0, length 1000]

Different packet number (25, not 10)
Same stream data
</code></pre>
<p>This avoids TCP’s retransmission ambiguity problem.</p>
<hr>
<h2 id="security-features"><a class="header" href="#security-features">Security Features</a></h2>
<h3 id="mandatory-encryption"><a class="header" href="#mandatory-encryption">Mandatory Encryption</a></h3>
<p>QUIC always uses TLS 1.3:</p>
<pre><code>Plaintext (only version negotiation):
  ┌─────────────────────────────────────┐
  │  Version Negotiation Packet         │
  │  (unencrypted, stateless)           │
  └─────────────────────────────────────┘

All other packets encrypted:
  ┌─────────────────────────────────────┐
  │  Packet Header (partially protected)│
  ├─────────────────────────────────────┤
  │  Encrypted Payload                  │
  │  ┌───────────────────────────────┐  │
  │  │ Frames (fully encrypted)      │  │
  │  │ - STREAM, ACK, etc.           │  │
  │  └───────────────────────────────┘  │
  │  Authentication Tag                 │
  └─────────────────────────────────────┘
</code></pre>
<h3 id="header-protection"><a class="header" href="#header-protection">Header Protection</a></h3>
<p>Even packet headers are partially encrypted to prevent middleboxes from:</p>
<ul>
<li>Reading packet numbers</li>
<li>Tracking connections</li>
<li>Modifying packets</li>
</ul>
<p><strong>Protected Header Fields</strong>:</p>
<ul>
<li>Packet number length</li>
<li>Packet number</li>
<li>Key phase bit (in short headers)</li>
</ul>
<p><strong>Unprotected Header Fields</strong> (needed for routing):</p>
<ul>
<li>Connection ID</li>
<li>Version</li>
<li>Packet type</li>
</ul>
<h3 id="encryption-keys"><a class="header" href="#encryption-keys">Encryption Keys</a></h3>
<p>QUIC uses multiple levels of keys:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Key Level</th><th>Purpose</th><th>Derived From</th></tr>
</thead>
<tbody>
<tr><td><strong>Initial Keys</strong></td><td>First ClientHello encryption</td><td>Client-generated, deterministic</td></tr>
<tr><td><strong>0-RTT Keys</strong></td><td>Early data encryption</td><td>Previous session ticket</td></tr>
<tr><td><strong>Handshake Keys</strong></td><td>Handshake completion</td><td>TLS handshake</td></tr>
<tr><td><strong>1-RTT Keys</strong></td><td>Application data</td><td>TLS handshake completion</td></tr>
</tbody>
</table>
</div>
<p>Keys can be updated during connection (key rotation):</p>
<pre><code>Client                Server
  │                      │
  │──── Key Update ───&gt;│
  │  (KEY_PHASE=1)      │
  │                      │
  │&lt;─── ACK ────────────│
  │  (confirms update)  │
</code></pre>
<h3 id="protection-against-attacks"><a class="header" href="#protection-against-attacks">Protection Against Attacks</a></h3>
<p><strong>1. Replay Attacks</strong> (0-RTT):</p>
<ul>
<li>QUIC includes protections, but 0-RTT data inherently replayable</li>
<li>Servers must use application-level replay protection for sensitive operations</li>
</ul>
<p><strong>2. Amplification Attacks</strong>:</p>
<ul>
<li>QUIC limits Initial packet responses to 3x client packet size</li>
<li>Servers send Retry packets to validate client address</li>
</ul>
<p><strong>3. Connection ID Privacy</strong>:</p>
<ul>
<li>Connection IDs don’t reveal client identity</li>
<li>Can be rotated during connection</li>
</ul>
<p><strong>4. Header Protection</strong>:</p>
<ul>
<li>Prevents ossification by middleboxes</li>
<li>Middleboxes can’t rely on header field positions</li>
</ul>
<hr>
<h2 id="use-cases-and-implementations"><a class="header" href="#use-cases-and-implementations">Use Cases and Implementations</a></h2>
<h3 id="real-world-deployments"><a class="header" href="#real-world-deployments">Real-World Deployments</a></h3>
<h4 id="1-http3-and-web-browsing"><a class="header" href="#1-http3-and-web-browsing">1. HTTP/3 and Web Browsing</a></h4>
<p><strong>Adoption</strong>:</p>
<ul>
<li>~8.7% of top 10M websites (as of 2024)</li>
<li>All major browsers support HTTP/3 over QUIC</li>
</ul>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Faster page loads (reduced latency)</li>
<li>Better performance on lossy networks</li>
<li>Improved mobile web experience</li>
</ul>
<p><strong>Major Adopters</strong>:</p>
<ul>
<li>Google (Search, YouTube, Gmail)</li>
<li>Facebook/Meta</li>
<li>Cloudflare CDN</li>
<li>Fastly CDN</li>
<li>LiteSpeed servers</li>
</ul>
<p><strong>Browser Support</strong>:</p>
<pre><code>Chrome/Chromium:   Full support (2020+)
Firefox:           Full support (2021+)
Safari:            Full support (2021+)
Edge:              Full support (Chromium-based)
</code></pre>
<h4 id="2-video-streaming"><a class="header" href="#2-video-streaming">2. Video Streaming</a></h4>
<p><strong>YouTube</strong>:</p>
<ul>
<li>Uses QUIC for video delivery</li>
<li>Reduces buffering on poor networks</li>
<li>Connection migration for mobile users</li>
</ul>
<p><strong>Netflix</strong>:</p>
<ul>
<li>Testing QUIC for streaming</li>
<li>Benefits from reduced rebuffering</li>
<li>Better startup time</li>
</ul>
<p><strong>Advantages for Streaming</strong>:</p>
<ul>
<li>No head-of-line blocking between video chunks</li>
<li>Better handling of packet loss</li>
<li>Faster connection recovery</li>
</ul>
<h4 id="3-dns-over-quic-doq"><a class="header" href="#3-dns-over-quic-doq">3. DNS-over-QUIC (DoQ)</a></h4>
<p>RFC 9250 defines DNS over QUIC:</p>
<pre><code>Client                          DoQ Server
  │                                  │
  │──── QUIC Connection ────────────&gt;│
  │      (encrypted, port 853)       │
  │                                  │
  │──── DNS Query (stream 0) ───────&gt;│
  │      example.com A?              │
  │                                  │
  │&lt;──── DNS Response ───────────────│
  │      192.0.2.1                   │
  │                                  │
</code></pre>
<p><strong>Benefits over DNS-over-HTTPS (DoH)</strong>:</p>
<ul>
<li>Lower latency (0-RTT)</li>
<li>Better multiplexing</li>
<li>Connection migration</li>
</ul>
<p><strong>Benefits over DNS-over-TLS (DoT)</strong>:</p>
<ul>
<li>No head-of-line blocking</li>
<li>Faster connection setup</li>
<li>Better mobile support</li>
</ul>
<h4 id="4-iot-and-internet-of-vehicles-iov"><a class="header" href="#4-iot-and-internet-of-vehicles-iov">4. IoT and Internet of Vehicles (IoV)</a></h4>
<p><strong>Over-the-Air (OTA) Updates</strong>:</p>
<ul>
<li>Vehicle software updates via QUIC</li>
<li>Connection migration during driving</li>
<li>Robust to network handoffs</li>
</ul>
<p><strong>Telemetry</strong>:</p>
<ul>
<li>Continuous data upload from vehicles</li>
<li>Survives cellular tower transitions</li>
<li>Efficient multiplexing of multiple sensors</li>
</ul>
<p><strong>Example Scenario</strong>:</p>
<pre><code>Connected Car driving on highway:
  1. Connected to Cell Tower A (QUIC connection established)
  2. Uploading sensor data streams
  3. Moves to Cell Tower B coverage
  4. IP address changes
  5. QUIC connection migrates (same Connection ID)
  6. Data upload continues seamlessly
</code></pre>
<h4 id="5-gaming-and-real-time-applications"><a class="header" href="#5-gaming-and-real-time-applications">5. Gaming and Real-Time Applications</a></h4>
<p><strong>Low Latency</strong>:</p>
<ul>
<li>0-RTT reconnection after network blip</li>
<li>No head-of-line blocking between game state updates</li>
<li>Better than TCP for real-time games</li>
</ul>
<p><strong>Connection Resilience</strong>:</p>
<ul>
<li>Players switching WiFi/cellular mid-game</li>
<li>No disconnection, no re-login</li>
</ul>
<h4 id="6-vpn-and-proxying-masque"><a class="header" href="#6-vpn-and-proxying-masque">6. VPN and Proxying (MASQUE)</a></h4>
<p><strong>MASQUE Protocol</strong> (RFC 9298):</p>
<ul>
<li>Multiplexed Application Substrate over QUIC Encryption</li>
<li>Proxying and VPN over HTTP/3</li>
</ul>
<pre><code>Client                Proxy                  Server
  │                     │                       │
  │──── QUIC/HTTP/3 ───&gt;│                       │
  │     CONNECT request │                       │
  │                     │──── QUIC/HTTP/3 ──────&gt;│
  │                     │                       │
  │&lt;════ Tunneled ═════&gt;│&lt;════ Connection ═════&gt;│
  │     Connection      │                       │
</code></pre>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Better than traditional VPNs (faster handshake)</li>
<li>Multiplexing multiple tunnels</li>
<li>Connection migration support</li>
</ul>
<hr>
<h2 id="implementations-and-libraries"><a class="header" href="#implementations-and-libraries">Implementations and Libraries</a></h2>
<h3 id="cc-implementations"><a class="header" href="#cc-implementations">C/C++ Implementations</a></h3>
<h4 id="1-msquic-microsoft"><a class="header" href="#1-msquic-microsoft">1. <strong>MsQuic</strong> (Microsoft)</a></h4>
<pre><code class="language-c">// Example: Create QUIC connection
QUIC_API_TABLE* MsQuic;
HQUIC Configuration;
HQUIC Connection;

// Load library
MsQuicOpen(&amp;MsQuic);

// Create configuration
MsQuic-&gt;ConfigurationOpen(Registration, &amp;Settings,
                          SettingsSize, &amp;Configuration);

// Create connection
MsQuic-&gt;ConnectionOpen(Registration, CallbackHandler,
                       Context, &amp;Connection);

// Start connection
MsQuic-&gt;ConnectionStart(Connection, Configuration,
                        ServerName, ServerPort);
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Cross-platform (Windows, Linux, macOS)</li>
<li>High performance</li>
<li>Used in Windows 11, Azure</li>
<li>MIT license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/microsoft/msquic</p>
<h4 id="2-lsquic-litespeed"><a class="header" href="#2-lsquic-litespeed">2. <strong>lsquic</strong> (LiteSpeed)</a></h4>
<pre><code class="language-c">// Example: Create engine
lsquic_engine_t *engine;
struct lsquic_engine_settings settings;

lsquic_engine_init_settings(&amp;settings, 0);
settings.es_versions = LSQUIC_DF_VERSIONS;

engine = lsquic_engine_new(0, &amp;engine_api);

// Create connection
lsquic_conn_t *conn;
conn = lsquic_engine_connect(engine, N_LSQVER,
                             local_sa, peer_sa,
                             peer_ctx, NULL, NULL, 0);
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Production-grade</li>
<li>Used in LiteSpeed Web Server</li>
<li>HTTP/3 support</li>
<li>MIT license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/litespeedtech/lsquic</p>
<h4 id="3-quiche-googlechromium"><a class="header" href="#3-quiche-googlechromium">3. <strong>QUICHE</strong> (Google/Chromium)</a></h4>
<pre><code class="language-c">// Example: Create config
quiche_config *config = quiche_config_new(QUICHE_PROTOCOL_VERSION);
quiche_config_set_application_protos(config, protos, protos_len);

// Create connection
quiche_conn *conn = quiche_connect(server_name, &amp;scid,
                                   config);

// Send data
quiche_conn_send(conn, out, out_len);

// Receive data
quiche_conn_recv(conn, buf, buf_len);
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Powers Google Chrome</li>
<li>Complete HTTP/3 support</li>
<li>BSD license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/google/quiche</p>
<h4 id="4-picoquic"><a class="header" href="#4-picoquic">4. <strong>picoquic</strong></a></h4>
<pre><code class="language-c">// Example: Create client context
picoquic_quic_t* quic = picoquic_create(1, NULL, NULL, NULL,
                                        NULL, NULL, NULL, NULL,
                                        NULL, current_time, NULL,
                                        NULL, NULL);

// Start connection
picoquic_cnx_t* cnx = picoquic_create_cnx(quic,
    picoquic_null_connection_id, picoquic_null_connection_id,
    (struct sockaddr*)&amp;server_address, current_time,
    0, sni, alpn, 1);
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Research-oriented</li>
<li>Clean implementation</li>
<li>MIT license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/private-octopus/picoquic</p>
<h4 id="5-ngtcp2"><a class="header" href="#5-ngtcp2">5. <strong>ngtcp2</strong></a></h4>
<pre><code class="language-c">// Example: Create connection
ngtcp2_conn *conn;
ngtcp2_settings settings;
ngtcp2_transport_params params;

ngtcp2_settings_default(&amp;settings);
ngtcp2_transport_params_default(&amp;params);

ngtcp2_conn_client_new(&amp;conn, &amp;dcid, &amp;scid, &amp;path,
                       NGTCP2_PROTO_VER_V1, &amp;callbacks,
                       &amp;settings, &amp;params, NULL, NULL);
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Clean C implementation</li>
<li>Used in curl, nghttp3</li>
<li>MIT license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/ngtcp2/ngtcp2</p>
<h3 id="rust-implementations"><a class="header" href="#rust-implementations">Rust Implementations</a></h3>
<h4 id="1-quiche-cloudflare"><a class="header" href="#1-quiche-cloudflare">1. <strong>quiche</strong> (Cloudflare)</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Example: Create config
let mut config = quiche::Config::new(quiche::PROTOCOL_VERSION)?;
config.set_application_protos(&amp;[b"http/3"])?;
config.verify_peer(false);

// Create connection
let mut conn = quiche::connect(
    Some("example.com"),
    &amp;scid,
    &amp;mut config,
)?;

// Send HTTP/3 request
let mut http3_conn = quiche::h3::Connection::with_transport(
    &amp;mut conn,
    &amp;h3_config,
)?;

http3_conn.send_request(&amp;mut conn, &amp;headers, true)?;
<span class="boring">}</span></code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Production-ready</li>
<li>Powers Cloudflare edge</li>
<li>HTTP/3 support built-in</li>
<li>BSD license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/cloudflare/quiche</p>
<h4 id="2-quinn"><a class="header" href="#2-quinn">2. <strong>quinn</strong></a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Example: Create endpoint
let mut endpoint = quinn::Endpoint::client("[::]:0".parse()?)?;

// Connect to server
let connection = endpoint.connect(
    server_addr,
    "example.com",
)?.await?;

// Open bidirectional stream
let (mut send, recv) = connection.open_bi().await?;

// Send data
send.write_all(b"GET / HTTP/3.0\r\n\r\n").await?;

// Receive data
let response = recv.read_to_end(1024).await?;
<span class="boring">}</span></code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Pure Rust, async/await</li>
<li>Easy to use API</li>
<li>Apache/MIT license</li>
<li>Tokio-based</li>
</ul>
<p><strong>Repository</strong>: https://github.com/quinn-rs/quinn</p>
<h4 id="3-neqo-mozilla"><a class="header" href="#3-neqo-mozilla">3. <strong>neqo</strong> (Mozilla)</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Example: Create client
let mut client = neqo_transport::Connection::new_client(
    "example.com",
    &amp;["http/3"],
    Rc::new(RefCell::new(FixedConnectionIdManager::new(0))),
    local_addr,
    remote_addr,
    now(),
)?;

// Process connection
let out = client.process(None, now());
<span class="boring">}</span></code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Powers Firefox</li>
<li>MPL 2.0 license</li>
<li>Complete HTTP/3 support</li>
</ul>
<p><strong>Repository</strong>: https://github.com/mozilla/neqo</p>
<h4 id="4-s2n-quic-aws"><a class="header" href="#4-s2n-quic-aws">4. <strong>s2n-quic</strong> (AWS)</a></h4>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Example: Create server
let mut server = s2n_quic::Server::builder()
    .with_tls("cert.pem", "key.pem")?
    .with_io("0.0.0.0:4433")?
    .start()?;

// Accept connections
while let Some(mut connection) = server.accept().await {
    tokio::spawn(async move {
        while let Ok(Some(stream)) = connection.accept_bidirectional_stream().await {
            // Handle stream
        }
    });
}
<span class="boring">}</span></code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Production-grade (AWS)</li>
<li>Formal verification</li>
<li>Apache 2.0 license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/aws/s2n-quic</p>
<h3 id="python-implementations"><a class="header" href="#python-implementations">Python Implementations</a></h3>
<h4 id="aioquic"><a class="header" href="#aioquic"><strong>aioquic</strong></a></h4>
<pre><code class="language-python"># Example: Create QUIC client
import asyncio
from aioquic.asyncio import connect
from aioquic.quic.configuration import QuicConfiguration

async def main():
    configuration = QuicConfiguration(
        alpn_protocols=["h3"],
        is_client=True,
    )

    async with connect(
        "quic.example.com",
        443,
        configuration=configuration,
    ) as client:
        # Send HTTP/3 request
        reader, writer = await client.create_stream()
        writer.write(b"GET / HTTP/3.0\r\n\r\n")
        await writer.drain()

        # Receive response
        response = await reader.read()
        print(response)

asyncio.run(main())
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Pure Python implementation</li>
<li>HTTP/3 support</li>
<li>asyncio-based</li>
<li>BSD license</li>
<li>Well-documented</li>
</ul>
<p><strong>Repository</strong>: https://github.com/aiortc/aioquic</p>
<h3 id="other-implementations"><a class="header" href="#other-implementations">Other Implementations</a></h3>
<h4 id="mvfst-metafacebook---c"><a class="header" href="#mvfst-metafacebook---c"><strong>mvfst</strong> (Meta/Facebook - C++)</a></h4>
<pre><code class="language-cpp">// Example: Create client
auto client = std::make_shared&lt;QuicClient&gt;(
    eventBase,
    std::make_unique&lt;HQClient&gt;(),
    std::make_unique&lt;FizzClientQuicHandshakeContext&gt;()
);

client-&gt;start(hostName, port);
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Used in Facebook infrastructure</li>
<li>High performance</li>
<li>MIT license</li>
</ul>
<p><strong>Repository</strong>: https://github.com/facebookincubator/mvfst</p>
<h4 id="net-c"><a class="header" href="#net-c"><strong>.NET (C#)</strong></a></h4>
<pre><code class="language-csharp">// Example: Create QUIC connection (.NET 7+)
using System.Net.Quic;

var connection = await QuicConnection.ConnectAsync(
    new QuicClientConnectionOptions
    {
        RemoteEndPoint = serverEndPoint,
        DefaultStreamErrorCode = 0,
        DefaultCloseErrorCode = 0,
        ClientAuthenticationOptions = new SslClientAuthenticationOptions
        {
            ApplicationProtocols = new List&lt;SslApplicationProtocol&gt;
            {
                new SslApplicationProtocol("h3")
            }
        }
    }
);

// Open stream
var stream = await connection.OpenOutboundStreamAsync(
    QuicStreamType.Bidirectional
);

await stream.WriteAsync(Encoding.UTF8.GetBytes("Hello"));
</code></pre>
<p><strong>Features</strong>:</p>
<ul>
<li>Built into .NET 7+</li>
<li>Uses MsQuic internally</li>
<li>MIT license</li>
</ul>
<p><strong>Documentation</strong>: https://learn.microsoft.com/en-us/dotnet/api/system.net.quic</p>
<hr>
<h2 id="code-examples"><a class="header" href="#code-examples">Code Examples</a></h2>
<h3 id="python-client-http3-request"><a class="header" href="#python-client-http3-request">Python Client (HTTP/3 Request)</a></h3>
<pre><code class="language-python">import asyncio
import aioquic
from aioquic.asyncio.client import connect
from aioquic.h3.connection import H3Connection
from aioquic.h3.events import HeadersReceived, DataReceived
from aioquic.quic.configuration import QuicConfiguration
from aioquic.quic.events import QuicEvent

async def http3_request(url):
    """Make an HTTP/3 request over QUIC"""
    # Parse URL
    from urllib.parse import urlparse
    parsed = urlparse(url)
    host = parsed.hostname
    port = parsed.port or 443
    path = parsed.path or "/"

    # Configure QUIC
    configuration = QuicConfiguration(
        alpn_protocols=["h3"],  # HTTP/3
        is_client=True,
        verify_mode=False,  # For testing; use proper certs in production
    )

    # Connect to server
    async with connect(
        host,
        port,
        configuration=configuration,
    ) as client:
        # Create HTTP/3 connection
        h3_conn = H3Connection(client._quic)

        # Prepare HTTP headers
        headers = [
            (b":method", b"GET"),
            (b":scheme", b"https"),
            (b":authority", host.encode()),
            (b":path", path.encode()),
            (b"user-agent", b"aioquic-client"),
        ]

        # Send request
        stream_id = client._quic.get_next_available_stream_id()
        h3_conn.send_headers(stream_id=stream_id, headers=headers)

        # Send HTTP/3 frames to QUIC
        for data, stream_id in h3_conn.send():
            client._quic.send_stream_data(stream_id, data)

        # Transmit
        client.transmit()

        # Receive response
        response_headers = None
        response_data = b""

        while True:
            # Wait for QUIC events
            events = await client._receive()
            if not events:
                break

            for quic_event in events:
                # Process through HTTP/3
                for h3_event in h3_conn.handle_event(quic_event):
                    if isinstance(h3_event, HeadersReceived):
                        response_headers = h3_event.headers
                        print("Response headers:")
                        for name, value in response_headers:
                            print(f"  {name.decode()}: {value.decode()}")

                    elif isinstance(h3_event, DataReceived):
                        response_data += h3_event.data
                        if h3_event.stream_ended:
                            print(f"\nResponse body ({len(response_data)} bytes):")
                            print(response_data.decode()[:500])  # First 500 chars
                            return

# Run
asyncio.run(http3_request("https://cloudflare-quic.com/"))
</code></pre>
<h3 id="python-server-echo-server"><a class="header" href="#python-server-echo-server">Python Server (Echo Server)</a></h3>
<pre><code class="language-python">import asyncio
from aioquic.asyncio import serve
from aioquic.quic.configuration import QuicConfiguration
from aioquic.quic.events import StreamDataReceived

class EchoServerProtocol:
    def __init__(self, *args, **kwargs):
        self._quic = kwargs.get("quic")

    def quic_event_received(self, event):
        """Handle QUIC events"""
        if isinstance(event, StreamDataReceived):
            # Echo data back
            print(f"Received on stream {event.stream_id}: {event.data}")
            self._quic.send_stream_data(
                event.stream_id,
                b"Echo: " + event.data,
                end_stream=event.end_stream
            )

            # Transmit
            self.transmit()

async def run_server():
    """Run QUIC echo server"""
    # Configure QUIC
    configuration = QuicConfiguration(
        alpn_protocols=["echo"],  # Custom protocol
        is_client=False,
        max_datagram_frame_size=65536,
    )

    # Load TLS certificate
    configuration.load_cert_chain("cert.pem", "key.pem")

    # Start server
    print("Starting QUIC echo server on port 4433...")
    await serve(
        host="0.0.0.0",
        port=4433,
        configuration=configuration,
        create_protocol=EchoServerProtocol,
    )

    # Keep running
    await asyncio.Future()

# Run
asyncio.run(run_server())
</code></pre>
<h3 id="testing-quic-connections"><a class="header" href="#testing-quic-connections">Testing QUIC Connections</a></h3>
<h4 id="using-curl-http3"><a class="header" href="#using-curl-http3">Using curl (HTTP/3)</a></h4>
<pre><code class="language-bash"># Install curl with HTTP/3 support
# (On Ubuntu 22.04+)
sudo apt install curl

# Make HTTP/3 request
curl --http3 https://cloudflare-quic.com/

# Force HTTP/3 only (fail if not available)
curl --http3-only https://quic.tech:8443/

# Verbose output (shows QUIC details)
curl -v --http3 https://cloudflare-quic.com/

# Example output:
#   * QUIC cipher selection: TLS_AES_128_GCM_SHA256
#   * Using QUIC version 1
#   * Connected to cloudflare-quic.com (104.16.123.96) port 443
#   * using HTTP/3
#   * h3 [:method: GET]
#   * h3 [:scheme: https]
#   ...
</code></pre>
<h4 id="using-aioquic-cli"><a class="header" href="#using-aioquic-cli">Using aioquic CLI</a></h4>
<pre><code class="language-bash"># Install aioquic
pip install aioquic

# HTTP/3 client
python -m aioquic.examples.http3_client https://quic.tech:8443/

# QUIC echo client
python -m aioquic.examples.client \
    --host quic.tech \
    --port 4433 \
    --alpn echo

# QUIC server
python -m aioquic.examples.server \
    --certificate cert.pem \
    --private-key key.pem \
    --host 0.0.0.0 \
    --port 4433
</code></pre>
<h4 id="browser-testing"><a class="header" href="#browser-testing">Browser Testing</a></h4>
<p><strong>Chrome DevTools</strong>:</p>
<ol>
<li>Open DevTools (F12)</li>
<li>Network tab</li>
<li>Look for “Protocol” column showing “h3” (HTTP/3)</li>
<li>Visit <code>chrome://net-internals/#quic</code> for detailed QUIC stats</li>
</ol>
<p><strong>Firefox</strong>:</p>
<ol>
<li>Open DevTools (F12)</li>
<li>Network tab</li>
<li>Look for “Protocol” column showing “HTTP/3”</li>
<li>Visit <code>about:networking#http3</code> for HTTP/3 status</li>
</ol>
<p><strong>Check if site supports QUIC</strong>:</p>
<pre><code class="language-bash"># Using nmap
nmap -sU -p 443 --script quic-version example.com

# Using quiche's http3-client (if installed)
http3-client https://example.com
</code></pre>
<hr>
<h2 id="advantages-and-limitations"><a class="header" href="#advantages-and-limitations">Advantages and Limitations</a></h2>
<h3 id="advantages"><a class="header" href="#advantages">Advantages</a></h3>
<h4 id="1-reduced-latency"><a class="header" href="#1-reduced-latency">1. <strong>Reduced Latency</strong></a></h4>
<ul>
<li><strong>0-RTT</strong>: Resume connections instantly with early data</li>
<li><strong>1-RTT</strong>: New connections faster than TCP+TLS (2-3 RTT)</li>
<li><strong>Combined Handshake</strong>: Transport and encryption in one step</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>50% faster page loads in some scenarios</li>
<li>Critical for mobile users with high latency</li>
</ul>
<h4 id="2-no-head-of-line-blocking"><a class="header" href="#2-no-head-of-line-blocking">2. <strong>No Head-of-Line Blocking</strong></a></h4>
<ul>
<li>Independent streams</li>
<li>Lost packet only affects one stream</li>
<li>Better performance on lossy networks (WiFi, cellular)</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>5-10% improvement on 1% packet loss</li>
<li>20-30% improvement on 2% packet loss</li>
</ul>
<h4 id="3-connection-migration-1"><a class="header" href="#3-connection-migration-1">3. <strong>Connection Migration</strong></a></h4>
<ul>
<li>Seamless network transitions</li>
<li>No reconnection needed</li>
<li>Better mobile experience</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>Zero interruption when switching WiFi/cellular</li>
<li>Critical for IoT, connected vehicles</li>
</ul>
<h4 id="4-built-in-security"><a class="header" href="#4-built-in-security">4. <strong>Built-in Security</strong></a></h4>
<ul>
<li>TLS 1.3 mandatory</li>
<li>No downgrade attacks</li>
<li>Header protection</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>Can’t forget to enable TLS</li>
<li>Better privacy from middleboxes</li>
</ul>
<h4 id="5-faster-protocol-evolution"><a class="header" href="#5-faster-protocol-evolution">5. <strong>Faster Protocol Evolution</strong></a></h4>
<ul>
<li>Userspace implementation</li>
<li>No kernel updates needed</li>
<li>Faster deployment of improvements</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>TCP evolution takes decades</li>
<li>QUIC can improve in months/years</li>
</ul>
<h3 id="limitations"><a class="header" href="#limitations">Limitations</a></h3>
<h4 id="1-udp-blocking"><a class="header" href="#1-udp-blocking">1. <strong>UDP Blocking</strong></a></h4>
<ul>
<li>Some networks block/throttle UDP</li>
<li>Corporate firewalls may block port 443/UDP</li>
<li>Fallback to TCP needed</li>
</ul>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Always support TCP fallback (HTTP/2, HTTP/1.1)</li>
<li>Use port 443 (less likely blocked)</li>
<li>Educate network operators</li>
</ul>
<p><strong>Statistics</strong>:</p>
<ul>
<li>~95% of networks allow QUIC</li>
<li>~5% block or severely throttle UDP</li>
</ul>
<h4 id="2-cpu-overhead"><a class="header" href="#2-cpu-overhead">2. <strong>CPU Overhead</strong></a></h4>
<ul>
<li>Userspace processing more expensive than kernel TCP</li>
<li>Encryption/decryption overhead</li>
<li>More context switches</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>10-30% more CPU than TCP+TLS in kernel</li>
<li>Improving with hardware acceleration</li>
</ul>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Hardware offload (coming)</li>
<li>Optimized implementations</li>
<li>BBR congestion control (reduces packet count)</li>
</ul>
<h4 id="3-nat-rebinding"><a class="header" href="#3-nat-rebinding">3. <strong>NAT Rebinding</strong></a></h4>
<ul>
<li>NAT timeout can change port mapping</li>
<li>QUIC interprets this as path change</li>
<li>May cause connection migration</li>
</ul>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Keepalive packets</li>
<li>Shorter NAT timeout detection</li>
<li>Most implementations handle this</li>
</ul>
<h4 id="4-middlebox-issues"><a class="header" href="#4-middlebox-issues">4. <strong>Middlebox Issues</strong></a></h4>
<ul>
<li>Some middleboxes drop unknown UDP traffic</li>
<li>Load balancers need QUIC awareness</li>
<li>Deep packet inspection harder (encrypted headers)</li>
</ul>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Educate network operators</li>
<li>QUIC-aware load balancers (F5, HAProxy)</li>
<li>Greasing prevents ossification</li>
</ul>
<h4 id="5-debugging-complexity"><a class="header" href="#5-debugging-complexity">5. <strong>Debugging Complexity</strong></a></h4>
<ul>
<li>Encrypted headers make debugging harder</li>
<li>tcpdump shows less information</li>
<li>Need specialized tools (qlog, qvis)</li>
</ul>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>qlog logging format (standardized)</li>
<li>qvis visualization tools</li>
<li>Server-side logging more important</li>
</ul>
<h4 id="6-limited-browserserver-support"><a class="header" href="#6-limited-browserserver-support">6. <strong>Limited Browser/Server Support</strong></a></h4>
<ul>
<li>Not all servers support HTTP/3 yet</li>
<li>Legacy clients don’t support QUIC</li>
<li>Need fallback mechanisms</li>
</ul>
<p><strong>Current Support</strong> (2024):</p>
<ul>
<li>Browsers: ~95% (all modern browsers)</li>
<li>Websites: ~8.7% of top 10M</li>
<li>CDNs: Cloudflare, Fastly, Akamai, etc.</li>
<li>Servers: Cloudflare, LiteSpeed, nginx (experimental), caddy</li>
</ul>
<hr>
<h2 id="monitoring-and-debugging"><a class="header" href="#monitoring-and-debugging">Monitoring and Debugging</a></h2>
<h3 id="capturing-quic-traffic"><a class="header" href="#capturing-quic-traffic">Capturing QUIC Traffic</a></h3>
<h4 id="tcpdump"><a class="header" href="#tcpdump">tcpdump</a></h4>
<pre><code class="language-bash"># Capture QUIC traffic on port 443
sudo tcpdump -i any -n 'udp port 443' -w quic.pcap

# Capture with timestamp and verbose
sudo tcpdump -i any -n -tttt -vv 'udp port 443'

# Capture only Initial packets (first byte &amp; 0xF0 == 0xC0)
sudo tcpdump -i any -n 'udp port 443 and udp[8] &amp; 0xF0 == 0xC0'
</code></pre>
<p><strong>Challenge</strong>: QUIC packets are encrypted, so you see UDP datagrams but not contents.</p>
<h4 id="wireshark"><a class="header" href="#wireshark">Wireshark</a></h4>
<p>Wireshark can decrypt QUIC if you provide TLS keys:</p>
<pre><code class="language-bash"># Set environment variable to log TLS keys
export SSLKEYLOGFILE=/tmp/sslkeys.log

# Run application (e.g., Chrome)
chrome --ssl-key-log-file=/tmp/sslkeys.log

# Open Wireshark
# Edit → Preferences → Protocols → TLS
# → (Pre)-Master-Secret log filename: /tmp/sslkeys.log
</code></pre>
<p>Wireshark will show:</p>
<ul>
<li>QUIC packet types (Initial, Handshake, 1-RTT)</li>
<li>Frame types (STREAM, ACK, etc.)</li>
<li>Decrypted payloads</li>
<li>HTTP/3 frames</li>
</ul>
<h4 id="qlog-quic-logging"><a class="header" href="#qlog-quic-logging">qlog (QUIC Logging)</a></h4>
<p>Standard JSON format for QUIC events:</p>
<pre><code class="language-json">{
  "qlog_version": "draft-02",
  "title": "QUIC connection trace",
  "traces": [{
    "vantage_point": { "type": "client" },
    "events": [
      {
        "time": 0,
        "name": "transport:packet_sent",
        "data": {
          "packet_type": "initial",
          "header": {
            "packet_number": 0,
            "dcid": "abcd1234"
          },
          "frames": [
            { "frame_type": "crypto", "length": 256 }
          ]
        }
      },
      {
        "time": 23.5,
        "name": "transport:packet_received",
        "data": {
          "packet_type": "handshake",
          "header": { "packet_number": 0 }
        }
      }
    ]
  }]
}
</code></pre>
<p><strong>Enable qlog</strong> in most implementations:</p>
<pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// quinn
let mut config = quinn::ServerConfig::new(/* ... */);
config.qlog_dir = Some("/tmp/qlogs".into());
<span class="boring">}</span></code></pre>
<pre><code class="language-python"># aioquic
configuration = QuicConfiguration(
    quic_logger=QuicLogger(),
)
</code></pre>
<h4 id="qvis-quic-visualization"><a class="header" href="#qvis-quic-visualization">qvis (QUIC Visualization)</a></h4>
<p>Web-based tool for visualizing qlog files:</p>
<pre><code class="language-bash"># Online: https://qvis.quictools.info/

# Or run locally
git clone https://github.com/quiclog/qvis
cd qvis
npm install
npm run serve
</code></pre>
<p><strong>Visualizations</strong>:</p>
<ul>
<li><strong>Sequence Diagram</strong>: Packet exchanges over time</li>
<li><strong>Congestion Graph</strong>: cwnd, bytes in flight, RTT over time</li>
<li><strong>Multiplexing Graph</strong>: Stream data over time</li>
</ul>
<h3 id="browser-devtools"><a class="header" href="#browser-devtools">Browser DevTools</a></h3>
<h4 id="chrome"><a class="header" href="#chrome">Chrome</a></h4>
<p><strong>chrome://net-internals/#quic</strong>:</p>
<ul>
<li>Active QUIC sessions</li>
<li>Connection statistics</li>
<li>Packet loss rates</li>
<li>RTT measurements</li>
</ul>
<pre><code>Sessions:
  Origin: https://example.com:443
  Connection ID: 0x1234567890abcdef
  Version: h3-29
  RTT: 45ms
  Packets sent: 1234
  Packets received: 1100
  Packets lost: 5 (0.4%)
</code></pre>
<p><strong>Network Panel</strong>:</p>
<ul>
<li>Protocol column shows “h3” for HTTP/3</li>
<li>Timing breakdown includes QUIC handshake</li>
</ul>
<h4 id="firefox"><a class="header" href="#firefox">Firefox</a></h4>
<p><strong>about:networking#http3</strong>:</p>
<ul>
<li>HTTP/3 enabled status</li>
<li>Active connections</li>
<li>Supported versions</li>
</ul>
<p><strong>Network Panel</strong>:</p>
<ul>
<li>Protocol column shows “HTTP/3”</li>
<li>Connection ID visible in headers</li>
</ul>
<h3 id="performance-metrics"><a class="header" href="#performance-metrics">Performance Metrics</a></h3>
<p>Key metrics to monitor:</p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Metric</th><th>Description</th><th>Good Value</th></tr>
</thead>
<tbody>
<tr><td><strong>RTT</strong></td><td>Round-trip time</td><td>&lt;50ms</td></tr>
<tr><td><strong>Packet Loss</strong></td><td>Percentage of lost packets</td><td>&lt;1%</td></tr>
<tr><td><strong>Connection Setup</strong></td><td>Time to establish connection</td><td>&lt;100ms (1-RTT)</td></tr>
<tr><td><strong>0-RTT Success Rate</strong></td><td>% of 0-RTT attempts accepted</td><td>&gt;80%</td></tr>
<tr><td><strong>Stream Count</strong></td><td>Active concurrent streams</td><td>Varies (HTTP/3: ~100)</td></tr>
<tr><td><strong>Bytes In Flight</strong></td><td>Unacknowledged data</td><td>&lt;cwnd</td></tr>
<tr><td><strong>cwnd</strong></td><td>Congestion window size</td><td>Varies (growing)</td></tr>
<tr><td><strong>PTO Count</strong></td><td>Probe timeout events</td><td>Low</td></tr>
</tbody>
</table>
</div>
<p><strong>Logging in Code</strong>:</p>
<pre><code class="language-python"># aioquic example
import logging

logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger("quic")

# Logs show:
# DEBUG:quic:Connection established
# DEBUG:quic:Stream 0 opened
# DEBUG:quic:RTT: 45ms
# DEBUG:quic:Packet sent: type=1-RTT, pn=123
</code></pre>
<hr>
<h2 id="related-protocols-and-standards"><a class="header" href="#related-protocols-and-standards">Related Protocols and Standards</a></h2>
<h3 id="http3-rfc-9114"><a class="header" href="#http3-rfc-9114">HTTP/3 (RFC 9114)</a></h3>
<p>HTTP/3 is the HTTP mapping over QUIC:</p>
<pre><code>┌─────────────────────────────┐
│   HTTP/3 (RFC 9114)         │
│   - Request/Response        │
│   - Header Compression      │
├─────────────────────────────┤
│   QPACK (RFC 9204)          │
│   - Header Compression      │
├─────────────────────────────┤
│   QUIC (RFC 9000)           │
│   - Transport + TLS         │
├─────────────────────────────┤
│   UDP                       │
└─────────────────────────────┘
</code></pre>
<p><strong>Key Differences from HTTP/2</strong>:</p>
<ul>
<li>QPACK instead of HPACK (allows out-of-order delivery)</li>
<li>Streams map 1:1 to QUIC streams</li>
<li>Server push works differently</li>
</ul>
<h3 id="qpack-rfc-9204"><a class="header" href="#qpack-rfc-9204">QPACK (RFC 9204)</a></h3>
<p>Header compression for HTTP/3:</p>
<ul>
<li><strong>Problem</strong>: HPACK requires ordered delivery (incompatible with QUIC)</li>
<li><strong>Solution</strong>: QPACK allows out-of-order delivery</li>
</ul>
<p><strong>QPACK streams</strong>:</p>
<ul>
<li><strong>Encoder stream</strong>: Dynamic table updates</li>
<li><strong>Decoder stream</strong>: Acknowledgments</li>
<li><strong>Request/response streams</strong>: Compressed headers</li>
</ul>
<h3 id="dns-over-quic-doq-rfc-9250"><a class="header" href="#dns-over-quic-doq-rfc-9250">DNS-over-QUIC (DoQ) (RFC 9250)</a></h3>
<p>Encrypted DNS using QUIC:</p>
<pre><code>Port: 853
ALPN: doq

Benefits:
- Better than DoT (no TCP head-of-line blocking)
- Better than DoH (lower overhead than HTTP)
- 0-RTT for subsequent queries
</code></pre>
<h3 id="masque-rfc-9298"><a class="header" href="#masque-rfc-9298">MASQUE (RFC 9298)</a></h3>
<p><strong>Multiplexed Application Substrate over QUIC Encryption</strong>:</p>
<p>Enables:</p>
<ul>
<li><strong>HTTP CONNECT over HTTP/3</strong>: VPN-like tunneling</li>
<li><strong>UDP Proxying</strong>: QUIC-in-QUIC, DNS proxying</li>
<li><strong>IP Proxying</strong>: Full IP-layer tunneling</li>
</ul>
<p>Use cases:</p>
<ul>
<li>VPNs</li>
<li>Proxies</li>
<li>Censorship circumvention</li>
<li>IoT device tunneling</li>
</ul>
<h3 id="webtransport"><a class="header" href="#webtransport">WebTransport</a></h3>
<p>Browser API for QUIC-based communication:</p>
<pre><code class="language-javascript">// WebTransport API (browser)
const transport = new WebTransport("https://example.com:4433/webtransport");
await transport.ready;

// Open bidirectional stream
const stream = await transport.createBidirectionalStream();
const writer = stream.writable.getWriter();
await writer.write(new Uint8Array([1, 2, 3]));

// Datagrams
const datagrams = transport.datagrams;
const writer = datagrams.writable.getWriter();
await writer.write(new Uint8Array([4, 5, 6]));
</code></pre>
<p><strong>Benefits</strong>:</p>
<ul>
<li>Low-latency bidirectional communication</li>
<li>Better than WebSocket (no head-of-line blocking)</li>
<li>Datagrams for real-time data</li>
</ul>
<p><strong>Use cases</strong>:</p>
<ul>
<li>Gaming</li>
<li>Video conferencing</li>
<li>Real-time collaboration</li>
</ul>
<hr>
<h2 id="eli10-quic-explained-simply"><a class="header" href="#eli10-quic-explained-simply">ELI10: QUIC Explained Simply</a></h2>
<h3 id="the-package-delivery-analogy"><a class="header" href="#the-package-delivery-analogy">The Package Delivery Analogy</a></h3>
<p>Imagine you’re ordering packages online. Let’s compare TCP and QUIC:</p>
<h4 id="tcp-the-old-delivery-service"><a class="header" href="#tcp-the-old-delivery-service">TCP: The Old Delivery Service</a></h4>
<p><strong>TCP is like certified mail</strong>:</p>
<ol>
<li>
<p><strong>Slow Start</strong>: Before sending your package, the delivery person has to:</p>
<ul>
<li>Knock on your door to introduce themselves (SYN)</li>
<li>Wait for you to say “okay” (SYN-ACK)</li>
<li>Then confirm they heard you (ACK)</li>
<li>THEN show their ID badge for security (TLS)</li>
<li>Wait for you to verify it</li>
<li><strong>Total: 3 trips just to start!</strong></li>
</ul>
</li>
<li>
<p><strong>Head-of-Line Blocking</strong>: You ordered 3 packages:</p>
<ul>
<li>Package #1: Book ✅</li>
<li>Package #2: Phone ❌ (lost in transit)</li>
<li>Package #3: Headphones (arrived but waiting)</li>
</ul>
<p>Even though Package #3 is sitting at your door, the delivery person won’t give it to you until they find Package #2. You have to wait for ALL packages in order.</p>
</li>
<li>
<p><strong>Moving House</strong>: If you move to a new address while waiting for delivery, you have to start the entire ordering process over from scratch!</p>
</li>
</ol>
<h4 id="quic-the-smart-delivery-service"><a class="header" href="#quic-the-smart-delivery-service">QUIC: The Smart Delivery Service</a></h4>
<p><strong>QUIC is like a modern courier service</strong>:</p>
<ol>
<li>
<p><strong>Fast Start</strong>:</p>
<ul>
<li>First time: Delivery person introduces themselves AND shows ID at the same time (1 trip instead of 3!)</li>
<li>Next time: They remember you, so they can just leave packages immediately (0 trips! They know who you are)</li>
</ul>
</li>
<li>
<p><strong>Independent Deliveries</strong>: You ordered 3 packages:</p>
<ul>
<li>Package #1: Book ✅ (delivered)</li>
<li>Package #2: Phone ❌ (lost)</li>
<li>Package #3: Headphones ✅ (delivered immediately!)</li>
</ul>
<p>Each package is independent. If one is lost, the others still get delivered. No waiting!</p>
</li>
<li>
<p><strong>Moving House Magic</strong>:</p>
<ul>
<li>You have a special “customer ID number” instead of just an address</li>
<li>If you move, the delivery person recognizes your ID number and continues delivering to your new address</li>
<li>No need to re-order everything!</li>
</ul>
</li>
<li>
<p><strong>Secret Packages</strong>:</p>
<ul>
<li>ALL packages are wrapped in tamper-proof containers</li>
<li>Even the label is partially hidden</li>
<li>Nobody can peek inside or know what you’re getting</li>
</ul>
</li>
</ol>
<h3 id="real-world-example-watching-youtube-on-your-phone"><a class="header" href="#real-world-example-watching-youtube-on-your-phone">Real-World Example: Watching YouTube on Your Phone</a></h3>
<p><strong>With TCP/HTTP/2</strong>:</p>
<pre><code>You're watching a video on WiFi in your car.
You drive under a tunnel → WiFi disconnects
Car switches to cellular → New IP address
TCP connection breaks!
YouTube has to:
1. Reconnect (3 handshakes)
2. Re-authenticate
3. Figure out where you were in the video
Result: 2-3 seconds of buffering 😞
</code></pre>
<p><strong>With QUIC/HTTP/3</strong>:</p>
<pre><code>You're watching a video on WiFi in your car.
You drive under a tunnel → WiFi disconnects
Car switches to cellular → New IP address
QUIC connection continues! (remembers your Connection ID)
YouTube:
1. Keeps streaming
2. Already authenticated
3. Knows exactly where you were
Result: No buffering! Seamless transition 😊
</code></pre>
<h3 id="key-takeaways-for-a-10-year-old"><a class="header" href="#key-takeaways-for-a-10-year-old">Key Takeaways (for a 10-year-old)</a></h3>
<ol>
<li>
<p><strong>QUIC is faster</strong>:</p>
<ul>
<li>First visit: 2x faster to start</li>
<li>Return visits: 3x faster (instant!)</li>
</ul>
</li>
<li>
<p><strong>QUIC is smarter</strong>:</p>
<ul>
<li>Multiple deliveries don’t block each other</li>
<li>Lost packages don’t stop others</li>
</ul>
</li>
<li>
<p><strong>QUIC doesn’t break</strong>:</p>
<ul>
<li>Change WiFi? No problem</li>
<li>Move around? Keeps working</li>
</ul>
</li>
<li>
<p><strong>QUIC is secure</strong>:</p>
<ul>
<li>Everything is locked by default</li>
<li>Can’t forget to turn on security</li>
</ul>
</li>
<li>
<p><strong>QUIC is the future</strong>:</p>
<ul>
<li>Google, Facebook, YouTube already use it</li>
<li>Your browser probably supports it</li>
<li>More websites switching every day</li>
</ul>
</li>
</ol>
<hr>
<h2 id="further-resources"><a class="header" href="#further-resources">Further Resources</a></h2>
<h3 id="rfc-standards"><a class="header" href="#rfc-standards">RFC Standards</a></h3>
<ul>
<li><strong>RFC 9000</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9000">QUIC: A UDP-Based Multiplexed and Secure Transport</a></li>
<li><strong>RFC 9001</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9001">Using TLS to Secure QUIC</a></li>
<li><strong>RFC 9002</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9002">QUIC Loss Detection and Congestion Control</a></li>
<li><strong>RFC 9114</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9114">HTTP/3</a></li>
<li><strong>RFC 9204</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9204">QPACK: Field Compression for HTTP/3</a></li>
<li><strong>RFC 9250</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9250">DNS over Dedicated QUIC Connections</a></li>
<li><strong>RFC 9297</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9297">HTTP Datagrams and the Capsule Protocol</a></li>
<li><strong>RFC 9298</strong>: <a href="https://datatracker.ietf.org/doc/html/rfc9298">Proxying UDP in HTTP</a></li>
</ul>
<h3 id="official-resources"><a class="header" href="#official-resources">Official Resources</a></h3>
<ul>
<li><strong>QUIC Working Group</strong>: https://quicwg.org/</li>
<li><strong>QUIC Implementations List</strong>: https://github.com/quicwg/base-drafts/wiki/Implementations</li>
<li><strong>HTTP/3 Check</strong>: https://http3check.net/</li>
</ul>
<h3 id="tutorials-and-guides"><a class="header" href="#tutorials-and-guides">Tutorials and Guides</a></h3>
<ul>
<li><strong>Cloudflare - The Road to QUIC</strong>: https://blog.cloudflare.com/the-road-to-quic/</li>
<li><strong>Google QUIC Documentation</strong>: https://www.chromium.org/quic/</li>
<li><strong>QUIC at Fastly</strong>: https://www.fastly.com/blog/quic-http3</li>
<li><strong>Mozilla - HTTP/3 Explained</strong>: https://http3-explained.haxx.se/</li>
</ul>
<h3 id="tools-and-libraries"><a class="header" href="#tools-and-libraries">Tools and Libraries</a></h3>
<ul>
<li><strong>Awesome QUIC</strong>: https://github.com/mmmarcos/awesome-quic (curated list of resources)</li>
<li><strong>qlog Tools</strong>: https://qlog.edm.uhasselt.be/</li>
<li><strong>qvis Visualization</strong>: https://qvis.quictools.info/</li>
<li><strong>aioquic Examples</strong>: https://github.com/aiortc/aioquic/tree/main/examples</li>
</ul>
<h3 id="research-papers"><a class="header" href="#research-papers">Research Papers</a></h3>
<ul>
<li><strong>The QUIC Transport Protocol: Design and Internet-Scale Deployment</strong> (SIGCOMM 2017)</li>
<li><strong>QUIC: A UDP-Based Secure and Reliable Transport for HTTP/2</strong> (IETF Draft 2016)</li>
<li><strong>Evaluating QUIC Performance Over Web, Cloud Storage, and Video Workloads</strong> (IEEE 2020)</li>
</ul>
<h3 id="testing-resources"><a class="header" href="#testing-resources">Testing Resources</a></h3>
<ul>
<li><strong>QUIC Interop Runner</strong>: https://interop.seemann.io/ (test QUIC implementations)</li>
<li><strong>quic.tech</strong>: https://quic.tech:8443/ (public QUIC test server)</li>
<li><strong>Cloudflare QUIC Test</strong>: https://cloudflare-quic.com/</li>
</ul>
<h3 id="monitoring-and-debugging-1"><a class="header" href="#monitoring-and-debugging-1">Monitoring and Debugging</a></h3>
<ul>
<li><strong>Wireshark QUIC Dissector</strong>: https://wiki.wireshark.org/QUIC</li>
<li><strong>qlog Specification</strong>: https://datatracker.ietf.org/doc/html/draft-ietf-quic-qlog-main-schema</li>
<li><strong>Chrome Net Internals</strong>: chrome://net-internals/#quic</li>
</ul>
<h3 id="community"><a class="header" href="#community">Community</a></h3>
<ul>
<li><strong>IETF QUIC Mailing List</strong>: quic@ietf.org</li>
<li><strong>QUIC Slack</strong>: https://quicdev.slack.com/</li>
<li><strong>Stack Overflow</strong>: Tag <a href="https://stackoverflow.com/questions/tagged/quic">quic</a></li>
</ul>
<hr>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>QUIC is a modern transport protocol that addresses fundamental limitations of TCP:</p>
<p>✅ <strong>Faster connections</strong> (0-RTT/1-RTT vs 2-3 RTT)
✅ <strong>No head-of-line blocking</strong> (independent streams)
✅ <strong>Connection migration</strong> (survives IP changes)
✅ <strong>Built-in security</strong> (mandatory TLS 1.3)
✅ <strong>Faster evolution</strong> (userspace implementation)</p>
<p>Currently powering <strong>HTTP/3</strong>, deployed by major services (Google, Facebook, Cloudflare), and supported by all modern browsers. While it faces challenges (UDP blocking, CPU overhead), QUIC represents the future of internet transport protocols.</p>
<p>For most new applications requiring secure, multiplexed, low-latency communication, <strong>QUIC should be the default choice</strong> over traditional TCP.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../networking/rtp.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../security/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../networking/rtp.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../security/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
