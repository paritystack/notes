<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>SvelteKit - My Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-c422b50d.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-bd4efd9a.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">My Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="sveltekit"><a class="header" href="#sveltekit">SvelteKit</a></h1>
<p>SvelteKit is the official application framework for Svelte that provides server-side rendering, routing, code splitting, and more. It’s a full-stack framework that enables you to build web applications of any size with excellent performance and developer experience.</p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#installation-and-setup">Installation and Setup</a></li>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#routing">Routing</a></li>
<li><a href="#loading-data">Loading Data</a></li>
<li><a href="#form-actions">Form Actions</a></li>
<li><a href="#hooks">Hooks</a></li>
<li><a href="#page-options">Page Options</a></li>
<li><a href="#api-routes">API Routes</a></li>
<li><a href="#state-management">State Management</a></li>
<li><a href="#navigation">Navigation</a></li>
<li><a href="#error-handling">Error Handling</a></li>
<li><a href="#advanced-patterns">Advanced Patterns</a></li>
<li><a href="#authentication">Authentication</a></li>
<li><a href="#database-integration">Database Integration</a></li>
<li><a href="#building-and-deployment">Building and Deployment</a></li>
<li><a href="#performance-optimization">Performance Optimization</a></li>
<li><a href="#testing">Testing</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ul>
<hr>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p><strong>Key Features:</strong></p>
<ul>
<li>Server-side rendering (SSR) by default</li>
<li>Static site generation (SSG)</li>
<li>API routes</li>
<li>File-based routing</li>
<li>Code splitting and lazy loading</li>
<li>Hot module replacement (HMR)</li>
<li>TypeScript support</li>
<li>Adaptable to any platform</li>
<li>Progressive enhancement</li>
<li>Zero-config deployment</li>
</ul>
<p><strong>Comparison with Other Frameworks:</strong></p>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>SvelteKit</th><th>Next.js</th><th>Nuxt.js</th></tr>
</thead>
<tbody>
<tr><td>Base Framework</td><td>Svelte</td><td>React</td><td>Vue</td></tr>
<tr><td>Build Tool</td><td>Vite</td><td>Webpack/Turbopack</td><td>Vite/Webpack</td></tr>
<tr><td>Rendering</td><td>SSR/SSG/CSR</td><td>SSR/SSG/ISR</td><td>SSR/SSG/CSR</td></tr>
<tr><td>Bundle Size</td><td>Smallest</td><td>Medium</td><td>Medium</td></tr>
<tr><td>Learning Curve</td><td>Gentle</td><td>Moderate</td><td>Moderate</td></tr>
<tr><td>Performance</td><td>Excellent</td><td>Very Good</td><td>Very Good</td></tr>
</tbody>
</table>
</div>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Full-stack web applications</li>
<li>E-commerce platforms</li>
<li>Content management systems</li>
<li>Dashboards and admin panels</li>
<li>Documentation sites</li>
<li>Progressive web apps (PWAs)</li>
<li>API-driven applications</li>
</ul>
<hr>
<h2 id="installation-and-setup"><a class="header" href="#installation-and-setup">Installation and Setup</a></h2>
<h3 id="create-new-project"><a class="header" href="#create-new-project">Create New Project</a></h3>
<pre><code class="language-bash"># Create new SvelteKit project
npm create svelte@latest my-app
cd my-app

# Install dependencies
npm install

# Start development server
npm run dev

# Or use other package managers
pnpm create svelte@latest my-app
yarn create svelte my-app
</code></pre>
<h3 id="project-setup-options"><a class="header" href="#project-setup-options">Project Setup Options</a></h3>
<p>During <code>npm create svelte</code>, you’ll be asked:</p>
<ol>
<li>
<p><strong>Which template?</strong></p>
<ul>
<li>Skeleton project (minimal)</li>
<li>SvelteKit demo app (examples)</li>
<li>Library project</li>
</ul>
</li>
<li>
<p><strong>Type checking?</strong></p>
<ul>
<li>TypeScript</li>
<li>JavaScript with JSDoc</li>
<li>None</li>
</ul>
</li>
<li>
<p><strong>Additional options:</strong></p>
<ul>
<li>ESLint</li>
<li>Prettier</li>
<li>Playwright (E2E testing)</li>
<li>Vitest (unit testing)</li>
</ul>
</li>
</ol>
<h3 id="basic-configuration"><a class="header" href="#basic-configuration">Basic Configuration</a></h3>
<p><strong>svelte.config.js:</strong></p>
<pre><code class="language-javascript">import adapter from '@sveltejs/adapter-auto';
import { vitePreprocess } from '@sveltejs/kit/vite';

/** @type {import('@sveltejs/kit').Config} */
const config = {
  // Preprocessor for Svelte files
  preprocess: vitePreprocess(),

  kit: {
    // Adapter for deployment
    adapter: adapter(),

    // Alias configuration
    alias: {
      $components: 'src/lib/components',
      $utils: 'src/lib/utils',
      $stores: 'src/lib/stores'
    },

    // CSP headers
    csp: {
      directives: {
        'script-src': ['self']
      }
    },

    // Environment variables prefix
    env: {
      publicPrefix: 'PUBLIC_'
    }
  }
};

export default config;
</code></pre>
<p><strong>vite.config.js:</strong></p>
<pre><code class="language-javascript">import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vite';

export default defineConfig({
  plugins: [sveltekit()],

  server: {
    port: 3000,
    strictPort: false
  },

  preview: {
    port: 4173
  },

  optimizeDeps: {
    include: ['lodash']
  }
});
</code></pre>
<hr>
<h2 id="project-structure"><a class="header" href="#project-structure">Project Structure</a></h2>
<pre><code>my-sveltekit-app/
├── src/
│   ├── lib/
│   │   ├── components/        # Reusable components
│   │   ├── server/           # Server-only code
│   │   ├── stores/           # Svelte stores
│   │   └── utils/            # Utility functions
│   ├── routes/               # File-based routing
│   │   ├── +layout.svelte    # Root layout
│   │   ├── +layout.js        # Root layout data
│   │   ├── +page.svelte      # Home page
│   │   ├── +page.js          # Home page data
│   │   ├── about/
│   │   │   └── +page.svelte
│   │   ├── blog/
│   │   │   ├── +page.svelte
│   │   │   ├── +page.server.js
│   │   │   └── [slug]/
│   │   │       └── +page.svelte
│   │   └── api/
│   │       └── posts/
│   │           └── +server.js
│   ├── app.html              # HTML template
│   ├── app.css              # Global styles
│   ├── hooks.client.js      # Client hooks
│   └── hooks.server.js      # Server hooks
├── static/                   # Static assets
│   ├── favicon.png
│   └── robots.txt
├── tests/                    # Test files
├── .env                      # Environment variables
├── svelte.config.js         # SvelteKit config
├── vite.config.js           # Vite config
├── package.json
└── tsconfig.json            # TypeScript config
</code></pre>
<h3 id="important-files"><a class="header" href="#important-files">Important Files</a></h3>
<p><strong>src/app.html:</strong></p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;link rel="icon" href="%sveltekit.assets%/favicon.png" /&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1" /&gt;
    %sveltekit.head%
  &lt;/head&gt;
  &lt;body data-sveltekit-preload-data="hover"&gt;
    &lt;div style="display: contents"&gt;%sveltekit.body%&lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<hr>
<h2 id="routing"><a class="header" href="#routing">Routing</a></h2>
<h3 id="file-based-routing"><a class="header" href="#file-based-routing">File-Based Routing</a></h3>
<p>SvelteKit uses filesystem-based routing where the structure of your <code>src/routes</code> directory defines your app’s routes.</p>
<pre><code>routes/
├── +page.svelte              # / (home)
├── about/
│   └── +page.svelte          # /about
├── blog/
│   ├── +page.svelte          # /blog
│   ├── +layout.svelte        # Blog layout
│   └── [slug]/
│       └── +page.svelte      # /blog/my-post
├── products/
│   ├── +page.svelte          # /products
│   ├── [id]/
│   │   └── +page.svelte      # /products/123
│   └── [...path]/
│       └── +page.svelte      # /products/a/b/c
└── admin/
    └── (dashboard)/          # Route group (no URL segment)
        ├── users/
        │   └── +page.svelte  # /admin/users
        └── settings/
            └── +page.svelte  # /admin/settings
</code></pre>
<h3 id="route-files"><a class="header" href="#route-files">Route Files</a></h3>
<div class="table-wrapper">
<table>
<thead>
<tr><th>File</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><code>+page.svelte</code></td><td>Page component</td></tr>
<tr><td><code>+page.js</code></td><td>Universal load function</td></tr>
<tr><td><code>+page.server.js</code></td><td>Server-only load function</td></tr>
<tr><td><code>+layout.svelte</code></td><td>Layout component</td></tr>
<tr><td><code>+layout.js</code></td><td>Layout universal load</td></tr>
<tr><td><code>+layout.server.js</code></td><td>Layout server load</td></tr>
<tr><td><code>+server.js</code></td><td>API endpoint</td></tr>
<tr><td><code>+error.svelte</code></td><td>Error page</td></tr>
</tbody>
</table>
</div>
<h3 id="basic-page"><a class="header" href="#basic-page">Basic Page</a></h3>
<p><strong>src/routes/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;h1&gt;Welcome to SvelteKit&lt;/h1&gt;
&lt;p&gt;Data from server: {data.message}&lt;/p&gt;

&lt;style&gt;
  h1 {
    color: #ff3e00;
  }
&lt;/style&gt;
</code></pre>
<p><strong>src/routes/+page.js:</strong></p>
<pre><code class="language-javascript">export async function load({ fetch }) {
  return {
    message: 'Hello from load function'
  };
}
</code></pre>
<h3 id="layouts"><a class="header" href="#layouts">Layouts</a></h3>
<p>Layouts wrap pages and can be nested.</p>
<p><strong>src/routes/+layout.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import '../app.css';
  import Header from '$lib/components/Header.svelte';
  import Footer from '$lib/components/Footer.svelte';

  export let data;
&lt;/script&gt;

&lt;div class="app"&gt;
  &lt;Header user={data.user} /&gt;

  &lt;main&gt;
    &lt;slot /&gt;
  &lt;/main&gt;

  &lt;Footer /&gt;
&lt;/div&gt;

&lt;style&gt;
  .app {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  main {
    flex: 1;
  }
&lt;/style&gt;
</code></pre>
<p><strong>src/routes/+layout.server.js:</strong></p>
<pre><code class="language-javascript">export async function load({ locals }) {
  return {
    user: locals.user || null
  };
}
</code></pre>
<h3 id="nested-layouts"><a class="header" href="#nested-layouts">Nested Layouts</a></h3>
<p><strong>src/routes/blog/+layout.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;div class="blog-layout"&gt;
  &lt;aside&gt;
    &lt;h2&gt;Categories&lt;/h2&gt;
    &lt;ul&gt;
      {#each data.categories as category}
        &lt;li&gt;&lt;a href="/blog/category/{category.slug}"&gt;{category.name}&lt;/a&gt;&lt;/li&gt;
      {/each}
    &lt;/ul&gt;
  &lt;/aside&gt;

  &lt;div class="content"&gt;
    &lt;slot /&gt;
  &lt;/div&gt;
&lt;/div&gt;

&lt;style&gt;
  .blog-layout {
    display: grid;
    grid-template-columns: 250px 1fr;
    gap: 2rem;
  }
&lt;/style&gt;
</code></pre>
<h3 id="dynamic-routes"><a class="header" href="#dynamic-routes">Dynamic Routes</a></h3>
<p><strong>src/routes/blog/[slug]/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;article&gt;
  &lt;h1&gt;{data.post.title}&lt;/h1&gt;
  &lt;div class="meta"&gt;
    &lt;time&gt;{data.post.date}&lt;/time&gt;
    &lt;span&gt;By {data.post.author}&lt;/span&gt;
  &lt;/div&gt;
  &lt;div class="content"&gt;
    {@html data.post.content}
  &lt;/div&gt;
&lt;/article&gt;
</code></pre>
<p><strong>src/routes/blog/[slug]/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { error } from '@sveltejs/kit';
import { getPostBySlug } from '$lib/server/database';

export async function load({ params }) {
  const post = await getPostBySlug(params.slug);

  if (!post) {
    throw error(404, {
      message: 'Post not found'
    });
  }

  return {
    post
  };
}
</code></pre>
<h3 id="optional-parameters"><a class="header" href="#optional-parameters">Optional Parameters</a></h3>
<p><strong>src/routes/archive/[[page]]/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;!-- Matches /archive and /archive/2 --&gt;
&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;h1&gt;Archive - Page {data.page}&lt;/h1&gt;

{#each data.posts as post}
  &lt;article&gt;
    &lt;h2&gt;{post.title}&lt;/h2&gt;
  &lt;/article&gt;
{/each}
</code></pre>
<p><strong>src/routes/archive/[[page]]/+page.js:</strong></p>
<pre><code class="language-javascript">export async function load({ params }) {
  const page = params.page ? parseInt(params.page) : 1;
  const posts = await fetchPosts(page);

  return {
    page,
    posts
  };
}
</code></pre>
<h3 id="rest-parameters"><a class="header" href="#rest-parameters">Rest Parameters</a></h3>
<p><strong>src/routes/docs/[…path]/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;!-- Matches /docs/getting-started, /docs/api/reference, etc. --&gt;
&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;nav&gt;
  {#each data.breadcrumbs as crumb, i}
    {#if i &gt; 0}&lt;span&gt;/&lt;/span&gt;{/if}
    &lt;a href={crumb.href}&gt;{crumb.label}&lt;/a&gt;
  {/each}
&lt;/nav&gt;

&lt;div&gt;
  {@html data.content}
&lt;/div&gt;
</code></pre>
<p><strong>src/routes/docs/[…path]/+page.js:</strong></p>
<pre><code class="language-javascript">export async function load({ params }) {
  const path = params.path || '';
  const segments = path.split('/').filter(Boolean);

  const breadcrumbs = segments.map((segment, i) =&gt; ({
    label: segment,
    href: '/docs/' + segments.slice(0, i + 1).join('/')
  }));

  const content = await loadDocumentation(path);

  return {
    breadcrumbs,
    content
  };
}
</code></pre>
<h3 id="route-groups"><a class="header" href="#route-groups">Route Groups</a></h3>
<p>Route groups allow you to organize routes without affecting the URL structure.</p>
<pre><code>routes/
└── (marketing)/            # Group name in parentheses
    ├── +layout.svelte     # Shared layout
    ├── about/
    │   └── +page.svelte   # /about (not /(marketing)/about)
    └── contact/
        └── +page.svelte   # /contact
</code></pre>
<h3 id="route-matching"><a class="header" href="#route-matching">Route Matching</a></h3>
<p><strong>src/routes/products/[id=integer]/+page.svelte:</strong></p>
<p>Uses a matcher to validate route parameters.</p>
<p><strong>src/params/integer.js:</strong></p>
<pre><code class="language-javascript">export function match(param) {
  return /^\d+$/.test(param);
}
</code></pre>
<p>This ensures <code>/products/123</code> matches but <code>/products/abc</code> does not.</p>
<hr>
<h2 id="loading-data"><a class="header" href="#loading-data">Loading Data</a></h2>
<h3 id="universal-load-functions"><a class="header" href="#universal-load-functions">Universal Load Functions</a></h3>
<p>Run on both server and client.</p>
<p><strong>src/routes/blog/+page.js:</strong></p>
<pre><code class="language-javascript">export async function load({ fetch, params, url }) {
  // Use SvelteKit's fetch for credentials and relative URLs
  const response = await fetch('/api/posts');
  const posts = await response.json();

  return {
    posts,
    currentPath: url.pathname
  };
}
</code></pre>
<h3 id="server-load-functions"><a class="header" href="#server-load-functions">Server Load Functions</a></h3>
<p>Run only on the server. Can access databases, environment variables, etc.</p>
<p><strong>src/routes/dashboard/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { db } from '$lib/server/database';

export async function load({ locals, cookies }) {
  // Access server-only resources
  const userId = locals.user?.id;

  if (!userId) {
    redirect(303, '/login');
  }

  const stats = await db.query('SELECT * FROM stats WHERE user_id = ?', [userId]);
  const preferences = cookies.get('preferences');

  return {
    stats,
    preferences: preferences ? JSON.parse(preferences) : {}
  };
}
</code></pre>
<h3 id="load-function-parameters"><a class="header" href="#load-function-parameters">Load Function Parameters</a></h3>
<pre><code class="language-javascript">export async function load({
  params,       // Route parameters
  url,          // URL object
  route,        // Route information
  fetch,        // Enhanced fetch
  setHeaders,   // Set response headers
  depends,      // Track dependencies
  parent,       // Parent load data
  locals,       // Server-only locals
  cookies       // Server-only cookies
}) {
  // Load logic
}
</code></pre>
<h3 id="streaming-data-with-promises"><a class="header" href="#streaming-data-with-promises">Streaming Data with Promises</a></h3>
<p><strong>src/routes/dashboard/+page.server.js:</strong></p>
<pre><code class="language-javascript">export async function load() {
  // Fast data loads immediately
  const user = await getUser();

  // Slow data streams in later
  return {
    user,
    // Return promise directly - SvelteKit will await it
    stats: getStats(),
    notifications: getNotifications()
  };
}
</code></pre>
<p><strong>src/routes/dashboard/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;h1&gt;Welcome, {data.user.name}&lt;/h1&gt;

{#await data.stats}
  &lt;p&gt;Loading stats...&lt;/p&gt;
{:then stats}
  &lt;div class="stats"&gt;
    &lt;div&gt;Posts: {stats.posts}&lt;/div&gt;
    &lt;div&gt;Views: {stats.views}&lt;/div&gt;
  &lt;/div&gt;
{/await}

{#await data.notifications}
  &lt;p&gt;Loading notifications...&lt;/p&gt;
{:then notifications}
  &lt;ul&gt;
    {#each notifications as notif}
      &lt;li&gt;{notif.message}&lt;/li&gt;
    {/each}
  &lt;/ul&gt;
{/await}
</code></pre>
<h3 id="parent-data"><a class="header" href="#parent-data">Parent Data</a></h3>
<p>Access data from parent layouts.</p>
<p><strong>src/routes/blog/[slug]/+page.js:</strong></p>
<pre><code class="language-javascript">export async function load({ params, parent }) {
  // Get data from parent layout
  const { categories } = await parent();

  const post = await getPost(params.slug);

  return {
    post,
    relatedPosts: getRelatedPosts(post, categories)
  };
}
</code></pre>
<h3 id="invalidation"><a class="header" href="#invalidation">Invalidation</a></h3>
<p><strong>Manual invalidation:</strong></p>
<pre><code class="language-javascript">import { invalidate, invalidateAll } from '$app/navigation';

// Invalidate specific URL
await invalidate('/api/posts');

// Invalidate by dependency
await invalidate('posts:list');

// Invalidate all
await invalidateAll();
</code></pre>
<p><strong>Dependency tracking:</strong></p>
<pre><code class="language-javascript">// In load function
export async function load({ fetch, depends }) {
  depends('posts:list');

  const posts = await fetch('/api/posts').then(r =&gt; r.json());
  return { posts };
}

// Later, in component
import { invalidate } from '$app/navigation';

async function refreshPosts() {
  await invalidate('posts:list');
}
</code></pre>
<hr>
<h2 id="form-actions"><a class="header" href="#form-actions">Form Actions</a></h2>
<p>Form actions enable progressive enhancement for form submissions.</p>
<h3 id="basic-form-action"><a class="header" href="#basic-form-action">Basic Form Action</a></h3>
<p><strong>src/routes/login/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { fail, redirect } from '@sveltejs/kit';
import { db } from '$lib/server/database';

export const actions = {
  default: async ({ request, cookies }) =&gt; {
    const data = await request.formData();
    const email = data.get('email');
    const password = data.get('password');

    // Validation
    if (!email || !password) {
      return fail(400, {
        email,
        missing: true
      });
    }

    // Authenticate
    const user = await db.authenticate(email, password);

    if (!user) {
      return fail(400, {
        email,
        credentials: true
      });
    }

    // Set session cookie
    cookies.set('session', user.sessionId, {
      path: '/',
      httpOnly: true,
      sameSite: 'strict',
      secure: process.env.NODE_ENV === 'production',
      maxAge: 60 * 60 * 24 * 7 // 1 week
    });

    throw redirect(303, '/dashboard');
  }
};
</code></pre>
<p><strong>src/routes/login/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { enhance } from '$app/forms';
  export let form;
&lt;/script&gt;

&lt;form method="POST" use:enhance&gt;
  &lt;label&gt;
    Email
    &lt;input
      name="email"
      type="email"
      value={form?.email ?? ''}
      required
    /&gt;
  &lt;/label&gt;

  &lt;label&gt;
    Password
    &lt;input name="password" type="password" required /&gt;
  &lt;/label&gt;

  {#if form?.missing}
    &lt;p class="error"&gt;Please fill in all fields&lt;/p&gt;
  {/if}

  {#if form?.credentials}
    &lt;p class="error"&gt;Invalid credentials&lt;/p&gt;
  {/if}

  &lt;button type="submit"&gt;Log in&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<h3 id="named-actions"><a class="header" href="#named-actions">Named Actions</a></h3>
<p><strong>src/routes/todos/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { fail } from '@sveltejs/kit';
import { db } from '$lib/server/database';

export async function load() {
  const todos = await db.getTodos();
  return { todos };
}

export const actions = {
  create: async ({ request, locals }) =&gt; {
    const data = await request.formData();
    const text = data.get('text');

    if (!text) {
      return fail(400, { text, missing: true });
    }

    await db.createTodo({
      userId: locals.user.id,
      text
    });

    return { success: true };
  },

  update: async ({ request }) =&gt; {
    const data = await request.formData();
    const id = data.get('id');
    const completed = data.get('completed') === 'true';

    await db.updateTodo(id, { completed });

    return { success: true };
  },

  delete: async ({ request }) =&gt; {
    const data = await request.formData();
    const id = data.get('id');

    await db.deleteTodo(id);

    return { success: true };
  }
};
</code></pre>
<p><strong>src/routes/todos/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { enhance } from '$app/forms';
  export let data;
  export let form;
&lt;/script&gt;

&lt;!-- Create form --&gt;
&lt;form method="POST" action="?/create" use:enhance&gt;
  &lt;input name="text" placeholder="New todo..." /&gt;
  &lt;button type="submit"&gt;Add&lt;/button&gt;
  {#if form?.missing}
    &lt;span class="error"&gt;Required&lt;/span&gt;
  {/if}
&lt;/form&gt;

&lt;!-- Todo list --&gt;
{#each data.todos as todo}
  &lt;div class="todo"&gt;
    &lt;!-- Update form --&gt;
    &lt;form method="POST" action="?/update" use:enhance&gt;
      &lt;input type="hidden" name="id" value={todo.id} /&gt;
      &lt;input type="hidden" name="completed" value={!todo.completed} /&gt;
      &lt;button type="submit"&gt;
        {todo.completed ? '☑' : '☐'}
      &lt;/button&gt;
    &lt;/form&gt;

    &lt;span class:completed={todo.completed}&gt;
      {todo.text}
    &lt;/span&gt;

    &lt;!-- Delete form --&gt;
    &lt;form method="POST" action="?/delete" use:enhance&gt;
      &lt;input type="hidden" name="id" value={todo.id} /&gt;
      &lt;button type="submit"&gt;Delete&lt;/button&gt;
    &lt;/form&gt;
  &lt;/div&gt;
{/each}
</code></pre>
<h3 id="custom-useenhance"><a class="header" href="#custom-useenhance">Custom use:enhance</a></h3>
<p><strong>src/routes/newsletter/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { enhance } from '$app/forms';

  let loading = false;
  let message = '';

  function handleSubmit() {
    loading = true;
    message = '';

    return async ({ result, update }) =&gt; {
      loading = false;

      if (result.type === 'success') {
        message = 'Subscribed successfully!';
        // Optionally don't update form
        // await update();
      } else if (result.type === 'failure') {
        message = result.data?.message || 'Subscription failed';
        await update();
      }
    };
  }
&lt;/script&gt;

&lt;form
  method="POST"
  use:enhance={handleSubmit}
&gt;
  &lt;input
    name="email"
    type="email"
    placeholder="your@email.com"
    disabled={loading}
  /&gt;

  &lt;button type="submit" disabled={loading}&gt;
    {loading ? 'Subscribing...' : 'Subscribe'}
  &lt;/button&gt;
&lt;/form&gt;

{#if message}
  &lt;p class="message"&gt;{message}&lt;/p&gt;
{/if}
</code></pre>
<h3 id="file-upload-action"><a class="header" href="#file-upload-action">File Upload Action</a></h3>
<p><strong>src/routes/upload/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { fail } from '@sveltejs/kit';
import { writeFile } from 'fs/promises';
import path from 'path';

export const actions = {
  upload: async ({ request }) =&gt; {
    const data = await request.formData();
    const file = data.get('file');

    if (!file || !file.size) {
      return fail(400, { missing: true });
    }

    // Validate file type
    const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
    if (!allowedTypes.includes(file.type)) {
      return fail(400, { invalidType: true });
    }

    // Validate file size (5MB max)
    const maxSize = 5 * 1024 * 1024;
    if (file.size &gt; maxSize) {
      return fail(400, { tooLarge: true });
    }

    // Save file
    const filename = `${Date.now()}-${file.name}`;
    const filepath = path.join('static', 'uploads', filename);

    const buffer = Buffer.from(await file.arrayBuffer());
    await writeFile(filepath, buffer);

    return {
      success: true,
      url: `/uploads/${filename}`
    };
  }
};
</code></pre>
<p><strong>src/routes/upload/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { enhance } from '$app/forms';
  export let form;

  let files;
  let preview = '';

  $: if (files &amp;&amp; files[0]) {
    const reader = new FileReader();
    reader.onload = (e) =&gt; preview = e.target.result;
    reader.readAsDataURL(files[0]);
  }
&lt;/script&gt;

&lt;form method="POST" action="?/upload" enctype="multipart/form-data" use:enhance&gt;
  &lt;input
    type="file"
    name="file"
    accept="image/*"
    bind:files
    required
  /&gt;

  {#if preview}
    &lt;img src={preview} alt="Preview" /&gt;
  {/if}

  {#if form?.missing}
    &lt;p class="error"&gt;Please select a file&lt;/p&gt;
  {/if}

  {#if form?.invalidType}
    &lt;p class="error"&gt;Only images are allowed&lt;/p&gt;
  {/if}

  {#if form?.tooLarge}
    &lt;p class="error"&gt;File too large (max 5MB)&lt;/p&gt;
  {/if}

  {#if form?.success}
    &lt;p class="success"&gt;Upload successful!&lt;/p&gt;
    &lt;img src={form.url} alt="Uploaded" /&gt;
  {/if}

  &lt;button type="submit"&gt;Upload&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<hr>
<h2 id="hooks"><a class="header" href="#hooks">Hooks</a></h2>
<h3 id="server-hooks"><a class="header" href="#server-hooks">Server Hooks</a></h3>
<p><strong>src/hooks.server.js:</strong></p>
<pre><code class="language-javascript">import { sequence } from '@sveltejs/kit/hooks';
import { db } from '$lib/server/database';

// Authentication hook
async function handleAuth({ event, resolve }) {
  const sessionId = event.cookies.get('session');

  if (sessionId) {
    const user = await db.getUserBySessionId(sessionId);
    if (user) {
      event.locals.user = user;
    }
  }

  return resolve(event);
}

// Logging hook
async function handleLog({ event, resolve }) {
  const start = Date.now();

  const response = await resolve(event);

  const duration = Date.now() - start;
  console.log(`${event.request.method} ${event.url.pathname} ${response.status} ${duration}ms`);

  return response;
}

// Protected routes hook
async function handleProtected({ event, resolve }) {
  if (event.url.pathname.startsWith('/admin')) {
    if (!event.locals.user?.isAdmin) {
      return new Response('Forbidden', { status: 403 });
    }
  }

  return resolve(event);
}

// Custom response headers
async function handleHeaders({ event, resolve }) {
  const response = await resolve(event);

  response.headers.set('X-Custom-Header', 'SvelteKit');

  return response;
}

// Combine multiple hooks with sequence
export const handle = sequence(
  handleAuth,
  handleProtected,
  handleLog,
  handleHeaders
);

// Handle fetch requests
export async function handleFetch({ request, fetch }) {
  // Modify fetch requests made during SSR
  if (request.url.startsWith('https://api.example.com/')) {
    request = new Request(
      request.url,
      {
        ...request,
        headers: {
          ...request.headers,
          'Authorization': `Bearer ${process.env.API_TOKEN}`
        }
      }
    );
  }

  return fetch(request);
}

// Handle errors
export function handleError({ error, event }) {
  // Log error to monitoring service
  console.error('Error:', error, 'Event:', event);

  return {
    message: 'An error occurred',
    code: error?.code ?? 'UNKNOWN'
  };
}
</code></pre>
<h3 id="client-hooks"><a class="header" href="#client-hooks">Client Hooks</a></h3>
<p><strong>src/hooks.client.js:</strong></p>
<pre><code class="language-javascript">import { dev } from '$app/environment';

// Handle errors on client
export function handleError({ error, event }) {
  if (dev) {
    console.error('Client error:', error, event);
  }

  // Send to error tracking service
  if (!dev &amp;&amp; window.Sentry) {
    Sentry.captureException(error);
  }

  return {
    message: 'Something went wrong'
  };
}
</code></pre>
<hr>
<h2 id="page-options"><a class="header" href="#page-options">Page Options</a></h2>
<p>Configure page behavior with export statements.</p>
<p><strong>src/routes/blog/+page.js:</strong></p>
<pre><code class="language-javascript">// Prerender this page at build time
export const prerender = true;

// Disable server-side rendering
export const ssr = false;

// Disable client-side rendering
export const csr = false;

// Trailing slash behavior: 'always' | 'never' | 'ignore'
export const trailingSlash = 'never';

export async function load({ fetch }) {
  const posts = await fetch('/api/posts').then(r =&gt; r.json());
  return { posts };
}
</code></pre>
<h3 id="prerendering"><a class="header" href="#prerendering">Prerendering</a></h3>
<p><strong>Static site generation:</strong></p>
<pre><code class="language-javascript">// src/routes/+layout.js
export const prerender = true;
</code></pre>
<p><strong>Per-route control:</strong></p>
<pre><code class="language-javascript">// src/routes/blog/+page.js
export const prerender = true;

// src/routes/dashboard/+page.js
export const prerender = false;
</code></pre>
<p><strong>Dynamic prerendering:</strong></p>
<pre><code class="language-javascript">// src/routes/blog/[slug]/+page.server.js
export const prerender = true;

export async function entries() {
  // Return all possible parameter values
  const posts = await getAllPosts();
  return posts.map(post =&gt; ({
    slug: post.slug
  }));
}

export async function load({ params }) {
  const post = await getPost(params.slug);
  return { post };
}
</code></pre>
<h3 id="ssr-and-csr-control"><a class="header" href="#ssr-and-csr-control">SSR and CSR Control</a></h3>
<pre><code class="language-javascript">// Disable SSR for a specific page (SPA mode)
export const ssr = false;
export const csr = true;

// Server-only rendering (no hydration)
export const ssr = true;
export const csr = false;

// Full stack mode (default)
export const ssr = true;
export const csr = true;
</code></pre>
<hr>
<h2 id="api-routes"><a class="header" href="#api-routes">API Routes</a></h2>
<p>Create API endpoints with <code>+server.js</code> files.</p>
<h3 id="basic-api-routes"><a class="header" href="#basic-api-routes">Basic API Routes</a></h3>
<p><strong>src/routes/api/hello/+server.js:</strong></p>
<pre><code class="language-javascript">import { json } from '@sveltejs/kit';

export async function GET() {
  return json({
    message: 'Hello from SvelteKit API'
  });
}

export async function POST({ request }) {
  const data = await request.json();

  return json({
    received: data
  }, {
    status: 201
  });
}
</code></pre>
<h3 id="crud-api"><a class="header" href="#crud-api">CRUD API</a></h3>
<p><strong>src/routes/api/posts/+server.js:</strong></p>
<pre><code class="language-javascript">import { json, error } from '@sveltejs/kit';
import { db } from '$lib/server/database';

// GET /api/posts
export async function GET({ url }) {
  const limit = parseInt(url.searchParams.get('limit') || '10');
  const offset = parseInt(url.searchParams.get('offset') || '0');

  const posts = await db.query(
    'SELECT * FROM posts ORDER BY created_at DESC LIMIT ? OFFSET ?',
    [limit, offset]
  );

  return json(posts);
}

// POST /api/posts
export async function POST({ request, locals }) {
  if (!locals.user) {
    throw error(401, 'Unauthorized');
  }

  const { title, content } = await request.json();

  if (!title || !content) {
    throw error(400, 'Title and content are required');
  }

  const post = await db.createPost({
    title,
    content,
    authorId: locals.user.id
  });

  return json(post, { status: 201 });
}
</code></pre>
<p><strong>src/routes/api/posts/[id]/+server.js:</strong></p>
<pre><code class="language-javascript">import { json, error } from '@sveltejs/kit';
import { db } from '$lib/server/database';

// GET /api/posts/:id
export async function GET({ params }) {
  const post = await db.getPost(params.id);

  if (!post) {
    throw error(404, 'Post not found');
  }

  return json(post);
}

// PUT /api/posts/:id
export async function PUT({ params, request, locals }) {
  const post = await db.getPost(params.id);

  if (!post) {
    throw error(404, 'Post not found');
  }

  if (post.authorId !== locals.user?.id) {
    throw error(403, 'Forbidden');
  }

  const { title, content } = await request.json();

  const updated = await db.updatePost(params.id, {
    title,
    content
  });

  return json(updated);
}

// DELETE /api/posts/:id
export async function DELETE({ params, locals }) {
  const post = await db.getPost(params.id);

  if (!post) {
    throw error(404, 'Post not found');
  }

  if (post.authorId !== locals.user?.id &amp;&amp; !locals.user?.isAdmin) {
    throw error(403, 'Forbidden');
  }

  await db.deletePost(params.id);

  return new Response(null, { status: 204 });
}
</code></pre>
<h3 id="cookies-and-headers"><a class="header" href="#cookies-and-headers">Cookies and Headers</a></h3>
<p><strong>src/routes/api/preferences/+server.js:</strong></p>
<pre><code class="language-javascript">import { json } from '@sveltejs/kit';

export async function GET({ cookies }) {
  const preferences = cookies.get('preferences');

  return json(
    preferences ? JSON.parse(preferences) : {}
  );
}

export async function POST({ request, cookies }) {
  const preferences = await request.json();

  cookies.set('preferences', JSON.stringify(preferences), {
    path: '/',
    maxAge: 60 * 60 * 24 * 365, // 1 year
    httpOnly: false,
    sameSite: 'lax'
  });

  return json({ success: true });
}
</code></pre>
<h3 id="streaming-responses"><a class="header" href="#streaming-responses">Streaming Responses</a></h3>
<p><strong>src/routes/api/stream/+server.js:</strong></p>
<pre><code class="language-javascript">export async function GET() {
  const encoder = new TextEncoder();

  const stream = new ReadableStream({
    async start(controller) {
      for (let i = 0; i &lt; 10; i++) {
        await new Promise(resolve =&gt; setTimeout(resolve, 1000));
        controller.enqueue(encoder.encode(`data: ${i}\n\n`));
      }
      controller.close();
    }
  });

  return new Response(stream, {
    headers: {
      'Content-Type': 'text/event-stream',
      'Cache-Control': 'no-cache'
    }
  });
}
</code></pre>
<h3 id="file-downloads"><a class="header" href="#file-downloads">File Downloads</a></h3>
<p><strong>src/routes/api/download/[filename]/+server.js:</strong></p>
<pre><code class="language-javascript">import { error } from '@sveltejs/kit';
import { readFile } from 'fs/promises';
import path from 'path';

export async function GET({ params }) {
  const filename = params.filename;
  const filepath = path.join('static', 'downloads', filename);

  try {
    const file = await readFile(filepath);

    return new Response(file, {
      headers: {
        'Content-Type': 'application/octet-stream',
        'Content-Disposition': `attachment; filename="${filename}"`
      }
    });
  } catch (err) {
    throw error(404, 'File not found');
  }
}
</code></pre>
<hr>
<h2 id="state-management"><a class="header" href="#state-management">State Management</a></h2>
<h3 id="built-in-stores"><a class="header" href="#built-in-stores">Built-in Stores</a></h3>
<p><strong>$app/stores:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { page, navigating, updated } from '$app/stores';

  // page - contains url, params, route, status, error, data, form
  $: console.log('Current URL:', $page.url.pathname);
  $: console.log('Route params:', $page.params);
  $: console.log('Page data:', $page.data);

  // navigating - contains from, to, type during navigation
  $: if ($navigating) {
    console.log('Navigating from', $navigating.from, 'to', $navigating.to);
  }

  // updated - becomes true when new version deployed
  $: if ($updated) {
    // Reload to get new version
    location.reload();
  }
&lt;/script&gt;

&lt;nav&gt;
  &lt;a href="/" class:active={$page.url.pathname === '/'}&gt;
    Home
  &lt;/a&gt;
  &lt;a href="/about" class:active={$page.url.pathname === '/about'}&gt;
    About
  &lt;/a&gt;
&lt;/nav&gt;

{#if $navigating}
  &lt;div class="loading-bar" /&gt;
{/if}
</code></pre>
<h3 id="custom-stores"><a class="header" href="#custom-stores">Custom Stores</a></h3>
<p><strong>src/lib/stores/cart.js:</strong></p>
<pre><code class="language-javascript">import { writable, derived } from 'svelte/store';
import { browser } from '$app/environment';

function createCart() {
  // Load from localStorage if in browser
  const stored = browser &amp;&amp; localStorage.getItem('cart');
  const initial = stored ? JSON.parse(stored) : [];

  const { subscribe, set, update } = writable(initial);

  // Sync to localStorage
  if (browser) {
    subscribe(value =&gt; {
      localStorage.setItem('cart', JSON.stringify(value));
    });
  }

  return {
    subscribe,

    addItem: (item) =&gt; update(items =&gt; {
      const existing = items.find(i =&gt; i.id === item.id);
      if (existing) {
        return items.map(i =&gt;
          i.id === item.id
            ? { ...i, quantity: i.quantity + 1 }
            : i
        );
      }
      return [...items, { ...item, quantity: 1 }];
    }),

    removeItem: (id) =&gt; update(items =&gt;
      items.filter(i =&gt; i.id !== id)
    ),

    updateQuantity: (id, quantity) =&gt; update(items =&gt;
      items.map(i =&gt;
        i.id === id ? { ...i, quantity } : i
      )
    ),

    clear: () =&gt; set([])
  };
}

export const cart = createCart();

export const cartTotal = derived(
  cart,
  $cart =&gt; $cart.reduce((sum, item) =&gt;
    sum + item.price * item.quantity, 0
  )
);

export const cartCount = derived(
  cart,
  $cart =&gt; $cart.reduce((sum, item) =&gt;
    sum + item.quantity, 0
  )
);
</code></pre>
<p><strong>Using the cart store:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { cart, cartTotal, cartCount } from '$lib/stores/cart';

  export let data;
&lt;/script&gt;

&lt;header&gt;
  &lt;a href="/cart"&gt;
    Cart ({$cartCount}) - ${$cartTotal.toFixed(2)}
  &lt;/a&gt;
&lt;/header&gt;

{#each data.products as product}
  &lt;div class="product"&gt;
    &lt;h3&gt;{product.name}&lt;/h3&gt;
    &lt;p&gt;${product.price}&lt;/p&gt;
    &lt;button on:click={() =&gt; cart.addItem(product)}&gt;
      Add to Cart
    &lt;/button&gt;
  &lt;/div&gt;
{/each}
</code></pre>
<h3 id="context-based-state"><a class="header" href="#context-based-state">Context-based State</a></h3>
<p><strong>src/routes/+layout.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { setContext } from 'svelte';
  import { writable } from 'svelte/store';

  export let data;

  // Create app-wide state
  const theme = writable(data.userPreferences?.theme || 'light');
  const user = writable(data.user);

  setContext('app', {
    theme,
    user,
    toggleTheme: () =&gt; theme.update(t =&gt; t === 'light' ? 'dark' : 'light')
  });
&lt;/script&gt;

&lt;div class="app" data-theme={$theme}&gt;
  &lt;slot /&gt;
&lt;/div&gt;
</code></pre>
<p><strong>Using context in components:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { getContext } from 'svelte';

  const { theme, user, toggleTheme } = getContext('app');
&lt;/script&gt;

&lt;header&gt;
  &lt;span&gt;Welcome, {$user?.name || 'Guest'}&lt;/span&gt;
  &lt;button on:click={toggleTheme}&gt;
    {$theme === 'light' ? '🌙' : '☀️'}
  &lt;/button&gt;
&lt;/header&gt;
</code></pre>
<hr>
<h2 id="navigation"><a class="header" href="#navigation">Navigation</a></h2>
<h3 id="programmatic-navigation"><a class="header" href="#programmatic-navigation">Programmatic Navigation</a></h3>
<pre><code class="language-svelte">&lt;script&gt;
  import { goto, invalidate, invalidateAll } from '$app/navigation';
  import { beforeNavigate, afterNavigate } from '$app/navigation';

  async function navigate() {
    // Navigate to a route
    await goto('/dashboard');

    // Navigate with options
    await goto('/dashboard', {
      replaceState: true,  // Replace history instead of push
      noScroll: true,      // Don't scroll to top
      keepFocus: true,     // Keep focus on current element
      invalidateAll: true  // Re-run all load functions
    });
  }

  // Intercept navigation
  beforeNavigate(({ from, to, cancel }) =&gt; {
    console.log('Navigating from', from, 'to', to);

    // Cancel navigation based on condition
    if (unsavedChanges) {
      if (!confirm('You have unsaved changes. Leave anyway?')) {
        cancel();
      }
    }
  });

  // Handle after navigation
  afterNavigate(({ from, to, type }) =&gt; {
    console.log('Navigation complete:', type);
    // type: 'link' | 'goto' | 'popstate'
  });
&lt;/script&gt;
</code></pre>
<h3 id="prefetching"><a class="header" href="#prefetching">Prefetching</a></h3>
<pre><code class="language-svelte">&lt;script&gt;
  import { preloadData, preloadCode } from '$app/navigation';

  async function prefetch() {
    // Preload data and code
    await preloadData('/blog/post-1');

    // Just preload code
    await preloadCode('/dashboard');
  }
&lt;/script&gt;

&lt;!-- Automatic prefetch on hover/tap --&gt;
&lt;a href="/blog" data-sveltekit-preload-data="hover"&gt;
  Blog
&lt;/a&gt;

&lt;!-- Prefetch on viewport --&gt;
&lt;a href="/about" data-sveltekit-preload-data="viewport"&gt;
  About
&lt;/a&gt;

&lt;!-- Prefetch on tap (mobile) --&gt;
&lt;a href="/contact" data-sveltekit-preload-data="tap"&gt;
  Contact
&lt;/a&gt;

&lt;!-- Disable prefetch --&gt;
&lt;a href="/external" data-sveltekit-reload&gt;
  External Site
&lt;/a&gt;
</code></pre>
<h3 id="link-options"><a class="header" href="#link-options">Link Options</a></h3>
<pre><code class="language-svelte">&lt;!-- Standard navigation --&gt;
&lt;a href="/about"&gt;About&lt;/a&gt;

&lt;!-- External link (skip SvelteKit routing) --&gt;
&lt;a href="https://example.com" data-sveltekit-reload&gt;
  External
&lt;/a&gt;

&lt;!-- Disable prefetch --&gt;
&lt;a href="/slow-page" data-sveltekit-preload-data="off"&gt;
  Slow Page
&lt;/a&gt;

&lt;!-- Programmatic prefetch --&gt;
&lt;a
  href="/dashboard"
  on:mouseenter={() =&gt; preloadData('/dashboard')}
&gt;
  Dashboard
&lt;/a&gt;
</code></pre>
<hr>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<h3 id="custom-error-pages"><a class="header" href="#custom-error-pages">Custom Error Pages</a></h3>
<p><strong>src/routes/+error.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { page } from '$app/stores';
&lt;/script&gt;

&lt;div class="error"&gt;
  &lt;h1&gt;{$page.status}&lt;/h1&gt;
  &lt;p&gt;{$page.error?.message || 'An error occurred'}&lt;/p&gt;

  {#if $page.status === 404}
    &lt;p&gt;The page you're looking for doesn't exist.&lt;/p&gt;
  {:else if $page.status === 500}
    &lt;p&gt;Internal server error. Please try again later.&lt;/p&gt;
  {/if}

  &lt;a href="/"&gt;Go home&lt;/a&gt;
&lt;/div&gt;

&lt;style&gt;
  .error {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    text-align: center;
  }

  h1 {
    font-size: 4rem;
    color: #ff3e00;
  }
&lt;/style&gt;
</code></pre>
<h3 id="throwing-errors"><a class="header" href="#throwing-errors">Throwing Errors</a></h3>
<pre><code class="language-javascript">import { error, redirect } from '@sveltejs/kit';

export async function load({ params, locals }) {
  // 404 error
  const post = await getPost(params.id);
  if (!post) {
    throw error(404, {
      message: 'Post not found'
    });
  }

  // 403 error
  if (post.authorId !== locals.user?.id) {
    throw error(403, 'You do not have permission to view this post');
  }

  // 500 error
  try {
    const data = await fetchData();
    return { data };
  } catch (err) {
    throw error(500, 'Failed to load data');
  }

  // Redirect
  if (!locals.user) {
    throw redirect(303, '/login');
  }

  return { post };
}
</code></pre>
<h3 id="expected-vs-unexpected-errors"><a class="header" href="#expected-vs-unexpected-errors">Expected vs Unexpected Errors</a></h3>
<pre><code class="language-javascript">// src/routes/api/posts/+server.js
import { error } from '@sveltejs/kit';

export async function GET({ params }) {
  try {
    const post = await db.getPost(params.id);

    if (!post) {
      // Expected error - shown to user
      throw error(404, 'Post not found');
    }

    return json(post);
  } catch (err) {
    // Unexpected error - logged, generic message shown
    if (err.status) {
      throw err;
    }

    console.error('Database error:', err);
    throw error(500, 'Internal server error');
  }
}
</code></pre>
<hr>
<h2 id="advanced-patterns"><a class="header" href="#advanced-patterns">Advanced Patterns</a></h2>
<h3 id="authentication-pattern"><a class="header" href="#authentication-pattern">Authentication Pattern</a></h3>
<p><strong>src/hooks.server.js:</strong></p>
<pre><code class="language-javascript">import { redirect } from '@sveltejs/kit';
import { db } from '$lib/server/database';

export async function handle({ event, resolve }) {
  // Get session from cookie
  const sessionId = event.cookies.get('session');

  if (sessionId) {
    const user = await db.getUserBySession(sessionId);
    if (user) {
      event.locals.user = user;
    } else {
      // Invalid session
      event.cookies.delete('session', { path: '/' });
    }
  }

  // Protected routes
  if (event.url.pathname.startsWith('/dashboard')) {
    if (!event.locals.user) {
      throw redirect(303, '/login');
    }
  }

  // Admin routes
  if (event.url.pathname.startsWith('/admin')) {
    if (!event.locals.user?.isAdmin) {
      throw redirect(303, '/');
    }
  }

  return resolve(event);
}
</code></pre>
<p><strong>src/routes/login/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { fail, redirect } from '@sveltejs/kit';
import { db } from '$lib/server/database';
import bcrypt from 'bcrypt';

export const actions = {
  login: async ({ request, cookies }) =&gt; {
    const data = await request.formData();
    const email = data.get('email');
    const password = data.get('password');

    // Validate
    if (!email || !password) {
      return fail(400, {
        email,
        missing: true
      });
    }

    // Get user
    const user = await db.getUserByEmail(email);
    if (!user) {
      return fail(400, {
        email,
        invalid: true
      });
    }

    // Verify password
    const valid = await bcrypt.compare(password, user.passwordHash);
    if (!valid) {
      return fail(400, {
        email,
        invalid: true
      });
    }

    // Create session
    const sessionId = crypto.randomUUID();
    await db.createSession({
      id: sessionId,
      userId: user.id,
      expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days
    });

    // Set cookie
    cookies.set('session', sessionId, {
      path: '/',
      httpOnly: true,
      sameSite: 'strict',
      secure: process.env.NODE_ENV === 'production',
      maxAge: 60 * 60 * 24 * 7 // 7 days
    });

    throw redirect(303, '/dashboard');
  },

  logout: async ({ cookies, locals }) =&gt; {
    const sessionId = cookies.get('session');
    if (sessionId) {
      await db.deleteSession(sessionId);
    }

    cookies.delete('session', { path: '/' });
    throw redirect(303, '/');
  }
};
</code></pre>
<h3 id="pagination-pattern"><a class="header" href="#pagination-pattern">Pagination Pattern</a></h3>
<p><strong>src/routes/blog/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { error } from '@sveltejs/kit';
import { db } from '$lib/server/database';

const POSTS_PER_PAGE = 10;

export async function load({ url }) {
  const page = parseInt(url.searchParams.get('page') || '1');

  if (page &lt; 1) {
    throw error(400, 'Invalid page number');
  }

  const offset = (page - 1) * POSTS_PER_PAGE;

  const [posts, totalCount] = await Promise.all([
    db.getPosts({ limit: POSTS_PER_PAGE, offset }),
    db.getPostCount()
  ]);

  const totalPages = Math.ceil(totalCount / POSTS_PER_PAGE);

  if (page &gt; totalPages &amp;&amp; totalPages &gt; 0) {
    throw error(404, 'Page not found');
  }

  return {
    posts,
    pagination: {
      page,
      totalPages,
      hasNext: page &lt; totalPages,
      hasPrev: page &gt; 1
    }
  };
}
</code></pre>
<p><strong>src/routes/blog/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  export let data;
&lt;/script&gt;

&lt;div class="posts"&gt;
  {#each data.posts as post}
    &lt;article&gt;
      &lt;h2&gt;&lt;a href="/blog/{post.slug}"&gt;{post.title}&lt;/a&gt;&lt;/h2&gt;
      &lt;p&gt;{post.excerpt}&lt;/p&gt;
    &lt;/article&gt;
  {/each}
&lt;/div&gt;

&lt;nav class="pagination"&gt;
  {#if data.pagination.hasPrev}
    &lt;a href="?page={data.pagination.page - 1}"&gt;
      ← Previous
    &lt;/a&gt;
  {/if}

  &lt;span&gt;
    Page {data.pagination.page} of {data.pagination.totalPages}
  &lt;/span&gt;

  {#if data.pagination.hasNext}
    &lt;a href="?page={data.pagination.page + 1}"&gt;
      Next →
    &lt;/a&gt;
  {/if}
&lt;/nav&gt;
</code></pre>
<h3 id="search-pattern"><a class="header" href="#search-pattern">Search Pattern</a></h3>
<p><strong>src/routes/search/+page.svelte:</strong></p>
<pre><code class="language-svelte">&lt;script&gt;
  import { goto } from '$app/navigation';
  import { page } from '$app/stores';

  export let data;

  let query = $page.url.searchParams.get('q') || '';
  let timeout;

  function handleInput() {
    clearTimeout(timeout);
    timeout = setTimeout(() =&gt; {
      if (query) {
        goto(`?q=${encodeURIComponent(query)}`, {
          keepFocus: true,
          noScroll: true
        });
      }
    }, 300);
  }
&lt;/script&gt;

&lt;form on:submit|preventDefault&gt;
  &lt;input
    type="search"
    bind:value={query}
    on:input={handleInput}
    placeholder="Search..."
  /&gt;
&lt;/form&gt;

{#if data.results}
  &lt;div class="results"&gt;
    &lt;p&gt;{data.results.length} results for "{data.query}"&lt;/p&gt;

    {#each data.results as result}
      &lt;article&gt;
        &lt;h3&gt;&lt;a href={result.url}&gt;{result.title}&lt;/a&gt;&lt;/h3&gt;
        &lt;p&gt;{result.excerpt}&lt;/p&gt;
      &lt;/article&gt;
    {/each}
  &lt;/div&gt;
{/if}
</code></pre>
<p><strong>src/routes/search/+page.server.js:</strong></p>
<pre><code class="language-javascript">export async function load({ url }) {
  const query = url.searchParams.get('q');

  if (!query) {
    return { results: null, query: '' };
  }

  const results = await searchDatabase(query);

  return {
    results,
    query
  };
}
</code></pre>
<hr>
<h2 id="authentication"><a class="header" href="#authentication">Authentication</a></h2>
<h3 id="jwt-based-authentication"><a class="header" href="#jwt-based-authentication">JWT-based Authentication</a></h3>
<p><strong>src/lib/server/auth.js:</strong></p>
<pre><code class="language-javascript">import jwt from 'jsonwebtoken';
import bcrypt from 'bcrypt';
import { db } from './database';

const JWT_SECRET = process.env.JWT_SECRET;
const JWT_EXPIRES_IN = '7d';

export async function hashPassword(password) {
  return bcrypt.hash(password, 10);
}

export async function verifyPassword(password, hash) {
  return bcrypt.compare(password, hash);
}

export function generateToken(user) {
  return jwt.sign(
    { userId: user.id, email: user.email },
    JWT_SECRET,
    { expiresIn: JWT_EXPIRES_IN }
  );
}

export function verifyToken(token) {
  try {
    return jwt.verify(token, JWT_SECRET);
  } catch {
    return null;
  }
}

export async function getUserFromToken(token) {
  const payload = verifyToken(token);
  if (!payload) return null;

  return db.getUserById(payload.userId);
}
</code></pre>
<p><strong>src/hooks.server.js:</strong></p>
<pre><code class="language-javascript">import { getUserFromToken } from '$lib/server/auth';

export async function handle({ event, resolve }) {
  const token = event.cookies.get('auth_token');

  if (token) {
    const user = await getUserFromToken(token);
    if (user) {
      event.locals.user = user;
    }
  }

  return resolve(event);
}
</code></pre>
<h3 id="oauth-integration"><a class="header" href="#oauth-integration">OAuth Integration</a></h3>
<p><strong>src/routes/auth/github/+server.js:</strong></p>
<pre><code class="language-javascript">import { redirect } from '@sveltejs/kit';

const GITHUB_CLIENT_ID = process.env.GITHUB_CLIENT_ID;
const GITHUB_CLIENT_SECRET = process.env.GITHUB_CLIENT_SECRET;
const CALLBACK_URL = process.env.GITHUB_CALLBACK_URL;

export async function GET() {
  const state = crypto.randomUUID();

  const url = new URL('https://github.com/login/oauth/authorize');
  url.searchParams.set('client_id', GITHUB_CLIENT_ID);
  url.searchParams.set('redirect_uri', CALLBACK_URL);
  url.searchParams.set('state', state);
  url.searchParams.set('scope', 'user:email');

  throw redirect(302, url.toString());
}
</code></pre>
<p><strong>src/routes/auth/github/callback/+server.js:</strong></p>
<pre><code class="language-javascript">import { error, redirect } from '@sveltejs/kit';
import { db } from '$lib/server/database';
import { generateToken } from '$lib/server/auth';

export async function GET({ url, cookies }) {
  const code = url.searchParams.get('code');
  const state = url.searchParams.get('state');

  if (!code) {
    throw error(400, 'Missing code');
  }

  // Exchange code for access token
  const tokenResponse = await fetch('https://github.com/login/oauth/access_token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Accept': 'application/json'
    },
    body: JSON.stringify({
      client_id: process.env.GITHUB_CLIENT_ID,
      client_secret: process.env.GITHUB_CLIENT_SECRET,
      code
    })
  });

  const { access_token } = await tokenResponse.json();

  // Get user info
  const userResponse = await fetch('https://api.github.com/user', {
    headers: {
      'Authorization': `Bearer ${access_token}`
    }
  });

  const githubUser = await userResponse.json();

  // Create or update user
  let user = await db.getUserByGithubId(githubUser.id);

  if (!user) {
    user = await db.createUser({
      githubId: githubUser.id,
      email: githubUser.email,
      name: githubUser.name,
      avatar: githubUser.avatar_url
    });
  }

  // Generate JWT
  const token = generateToken(user);

  cookies.set('auth_token', token, {
    path: '/',
    httpOnly: true,
    sameSite: 'lax',
    secure: process.env.NODE_ENV === 'production',
    maxAge: 60 * 60 * 24 * 7 // 7 days
  });

  throw redirect(303, '/dashboard');
}
</code></pre>
<hr>
<h2 id="database-integration"><a class="header" href="#database-integration">Database Integration</a></h2>
<h3 id="prisma-integration"><a class="header" href="#prisma-integration">Prisma Integration</a></h3>
<p><strong>Install Prisma:</strong></p>
<pre><code class="language-bash">npm install -D prisma
npm install @prisma/client
npx prisma init
</code></pre>
<p><strong>prisma/schema.prisma:</strong></p>
<pre><code class="language-prisma">datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  posts     Post[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Post {
  id        String   @id @default(cuid())
  title     String
  content   String
  published Boolean  @default(false)
  author    User     @relation(fields: [authorId], references: [id])
  authorId  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
</code></pre>
<p><strong>src/lib/server/database.js:</strong></p>
<pre><code class="language-javascript">import { PrismaClient } from '@prisma/client';

const prisma = global.prisma || new PrismaClient();

if (process.env.NODE_ENV === 'development') {
  global.prisma = prisma;
}

export { prisma };
</code></pre>
<p><strong>src/routes/blog/+page.server.js:</strong></p>
<pre><code class="language-javascript">import { prisma } from '$lib/server/database';

export async function load() {
  const posts = await prisma.post.findMany({
    where: { published: true },
    include: { author: true },
    orderBy: { createdAt: 'desc' }
  });

  return { posts };
}

export const actions = {
  create: async ({ request, locals }) =&gt; {
    const data = await request.formData();
    const title = data.get('title');
    const content = data.get('content');

    const post = await prisma.post.create({
      data: {
        title,
        content,
        authorId: locals.user.id
      }
    });

    return { success: true, post };
  }
};
</code></pre>
<h3 id="drizzle-orm-integration"><a class="header" href="#drizzle-orm-integration">Drizzle ORM Integration</a></h3>
<p><strong>src/lib/server/db/schema.ts:</strong></p>
<pre><code class="language-typescript">import { pgTable, serial, text, timestamp, boolean } from 'drizzle-orm/pg-core';

export const users = pgTable('users', {
  id: serial('id').primaryKey(),
  email: text('email').notNull().unique(),
  name: text('name'),
  createdAt: timestamp('created_at').defaultNow()
});

export const posts = pgTable('posts', {
  id: serial('id').primaryKey(),
  title: text('title').notNull(),
  content: text('content').notNull(),
  published: boolean('published').default(false),
  authorId: serial('author_id').references(() =&gt; users.id),
  createdAt: timestamp('created_at').defaultNow()
});
</code></pre>
<p><strong>src/lib/server/db/index.ts:</strong></p>
<pre><code class="language-typescript">import { drizzle } from 'drizzle-orm/postgres-js';
import postgres from 'postgres';
import * as schema from './schema';

const client = postgres(process.env.DATABASE_URL!);
export const db = drizzle(client, { schema });
</code></pre>
<hr>
<h2 id="building-and-deployment"><a class="header" href="#building-and-deployment">Building and Deployment</a></h2>
<h3 id="adapters"><a class="header" href="#adapters">Adapters</a></h3>
<p>SvelteKit uses adapters to deploy to different platforms.</p>
<p><strong>Install adapter:</strong></p>
<pre><code class="language-bash"># Automatic adapter selection
npm install -D @sveltejs/adapter-auto

# Node.js
npm install -D @sveltejs/adapter-node

# Vercel
npm install -D @sveltejs/adapter-vercel

# Netlify
npm install -D @sveltejs/adapter-netlify

# Cloudflare Pages
npm install -D @sveltejs/adapter-cloudflare

# Static site (SPA/SSG)
npm install -D @sveltejs/adapter-static
</code></pre>
<p><strong>svelte.config.js:</strong></p>
<pre><code class="language-javascript">import adapter from '@sveltejs/adapter-node';

export default {
  kit: {
    adapter: adapter({
      out: 'build',
      precompress: true,
      envPrefix: 'MY_'
    })
  }
};
</code></pre>
<h3 id="building-for-production"><a class="header" href="#building-for-production">Building for Production</a></h3>
<pre><code class="language-bash"># Build the application
npm run build

# Preview production build
npm run preview

# Run production build (with adapter-node)
node build
</code></pre>
<h3 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h3>
<p><strong>.env:</strong></p>
<pre><code class="language-bash"># Private (server-only)
DATABASE_URL="postgresql://..."
JWT_SECRET="secret"
API_KEY="key"

# Public (exposed to client)
PUBLIC_API_URL="https://api.example.com"
PUBLIC_SITE_NAME="My SvelteKit App"
</code></pre>
<p><strong>Using environment variables:</strong></p>
<pre><code class="language-javascript">// src/routes/+page.server.js
import { env } from '$env/dynamic/private';
// or
import { DATABASE_URL } from '$env/static/private';

export async function load() {
  const apiKey = env.API_KEY; // or API_KEY from static import
  // ...
}
</code></pre>
<pre><code class="language-svelte">&lt;!-- src/routes/+page.svelte --&gt;
&lt;script&gt;
  import { env } from '$env/dynamic/public';
  // or
  import { PUBLIC_API_URL } from '$env/static/public';

  const apiUrl = env.PUBLIC_API_URL; // or PUBLIC_API_URL from static import
&lt;/script&gt;
</code></pre>
<h3 id="docker-deployment"><a class="header" href="#docker-deployment">Docker Deployment</a></h3>
<p><strong>Dockerfile:</strong></p>
<pre><code class="language-dockerfile">FROM node:18-alpine AS builder

WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build
RUN npm prune --production

FROM node:18-alpine

WORKDIR /app

COPY --from=builder /app/build build/
COPY --from=builder /app/node_modules node_modules/
COPY package.json .

EXPOSE 3000
ENV NODE_ENV=production

CMD ["node", "build"]
</code></pre>
<p><strong>docker-compose.yml:</strong></p>
<pre><code class="language-yaml">version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://user:pass@db:5432/mydb
      - JWT_SECRET=${JWT_SECRET}
    depends_on:
      - db

  db:
    image: postgres:15
    environment:
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=pass
      - POSTGRES_DB=mydb
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
</code></pre>
<h3 id="vercel-deployment"><a class="header" href="#vercel-deployment">Vercel Deployment</a></h3>
<pre><code class="language-bash"># Install Vercel CLI
npm i -g vercel

# Deploy
vercel

# Production deployment
vercel --prod
</code></pre>
<p><strong>vercel.json (optional):</strong></p>
<pre><code class="language-json">{
  "buildCommand": "npm run build",
  "devCommand": "npm run dev",
  "framework": "sveltekit",
  "installCommand": "npm install"
}
</code></pre>
<hr>
<h2 id="performance-optimization"><a class="header" href="#performance-optimization">Performance Optimization</a></h2>
<h3 id="code-splitting"><a class="header" href="#code-splitting">Code Splitting</a></h3>
<pre><code class="language-svelte">&lt;script&gt;
  // Dynamic imports for code splitting
  let HeavyComponent;

  async function loadComponent() {
    const module = await import('$lib/components/HeavyComponent.svelte');
    HeavyComponent = module.default;
  }
&lt;/script&gt;

&lt;button on:click={loadComponent}&gt;
  Load Heavy Component
&lt;/button&gt;

{#if HeavyComponent}
  &lt;svelte:component this={HeavyComponent} /&gt;
{/if}
</code></pre>
<h3 id="preloading"><a class="header" href="#preloading">Preloading</a></h3>
<pre><code class="language-svelte">&lt;script&gt;
  import { preloadData } from '$app/navigation';

  function handleMouseEnter() {
    preloadData('/dashboard');
  }
&lt;/script&gt;

&lt;a
  href="/dashboard"
  on:mouseenter={handleMouseEnter}
&gt;
  Dashboard
&lt;/a&gt;

&lt;!-- Or use data attributes --&gt;
&lt;a href="/blog" data-sveltekit-preload-data="hover"&gt;
  Blog
&lt;/a&gt;
</code></pre>
<h3 id="image-optimization"><a class="header" href="#image-optimization">Image Optimization</a></h3>
<p><strong>Using modern formats:</strong></p>
<pre><code class="language-svelte">&lt;picture&gt;
  &lt;source
    srcset="/images/hero.webp"
    type="image/webp"
  /&gt;
  &lt;source
    srcset="/images/hero.jpg"
    type="image/jpeg"
  /&gt;
  &lt;img
    src="/images/hero.jpg"
    alt="Hero image"
    loading="lazy"
    width="1200"
    height="600"
  /&gt;
&lt;/picture&gt;
</code></pre>
<p><strong>Responsive images:</strong></p>
<pre><code class="language-svelte">&lt;img
  srcset="
    /images/small.jpg 400w,
    /images/medium.jpg 800w,
    /images/large.jpg 1200w
  "
  sizes="(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px"
  src="/images/medium.jpg"
  alt="Responsive image"
  loading="lazy"
/&gt;
</code></pre>
<h3 id="caching-strategies"><a class="header" href="#caching-strategies">Caching Strategies</a></h3>
<p><strong>src/hooks.server.js:</strong></p>
<pre><code class="language-javascript">export async function handle({ event, resolve }) {
  const response = await resolve(event);

  // Cache static assets
  if (event.url.pathname.startsWith('/images/')) {
    response.headers.set('Cache-Control', 'public, max-age=31536000, immutable');
  }

  // Cache API responses
  if (event.url.pathname.startsWith('/api/')) {
    response.headers.set('Cache-Control', 'public, max-age=60');
  }

  return response;
}
</code></pre>
<hr>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<h3 id="unit-testing-with-vitest"><a class="header" href="#unit-testing-with-vitest">Unit Testing with Vitest</a></h3>
<p><strong>vitest.config.js:</strong></p>
<pre><code class="language-javascript">import { sveltekit } from '@sveltejs/kit/vite';
import { defineConfig } from 'vitest/config';

export default defineConfig({
  plugins: [sveltekit()],
  test: {
    include: ['src/**/*.{test,spec}.{js,ts}'],
    environment: 'jsdom'
  }
});
</code></pre>
<p><strong>src/lib/utils/format.test.js:</strong></p>
<pre><code class="language-javascript">import { describe, it, expect } from 'vitest';
import { formatCurrency, formatDate } from './format';

describe('formatCurrency', () =&gt; {
  it('formats USD correctly', () =&gt; {
    expect(formatCurrency(1234.56, 'USD')).toBe('$1,234.56');
  });

  it('handles zero', () =&gt; {
    expect(formatCurrency(0, 'USD')).toBe('$0.00');
  });
});

describe('formatDate', () =&gt; {
  it('formats date correctly', () =&gt; {
    const date = new Date('2024-01-15');
    expect(formatDate(date)).toBe('Jan 15, 2024');
  });
});
</code></pre>
<p><strong>Testing Svelte components:</strong></p>
<pre><code class="language-javascript">import { render, screen, fireEvent } from '@testing-library/svelte';
import { describe, it, expect } from 'vitest';
import Button from './Button.svelte';

describe('Button', () =&gt; {
  it('renders with text', () =&gt; {
    render(Button, { props: { text: 'Click me' } });
    expect(screen.getByText('Click me')).toBeTruthy();
  });

  it('calls onClick when clicked', async () =&gt; {
    let clicked = false;
    render(Button, {
      props: {
        text: 'Click',
        onClick: () =&gt; { clicked = true; }
      }
    });

    const button = screen.getByText('Click');
    await fireEvent.click(button);

    expect(clicked).toBe(true);
  });
});
</code></pre>
<h3 id="e2e-testing-with-playwright"><a class="header" href="#e2e-testing-with-playwright">E2E Testing with Playwright</a></h3>
<p><strong>tests/home.spec.js:</strong></p>
<pre><code class="language-javascript">import { expect, test } from '@playwright/test';

test('home page loads', async ({ page }) =&gt; {
  await page.goto('/');
  await expect(page.locator('h1')).toContainText('Welcome');
});

test('navigation works', async ({ page }) =&gt; {
  await page.goto('/');
  await page.click('a[href="/about"]');
  await expect(page).toHaveURL('/about');
  await expect(page.locator('h1')).toContainText('About');
});

test('form submission', async ({ page }) =&gt; {
  await page.goto('/contact');

  await page.fill('input[name="name"]', 'John Doe');
  await page.fill('input[name="email"]', 'john@example.com');
  await page.fill('textarea[name="message"]', 'Hello!');

  await page.click('button[type="submit"]');

  await expect(page.locator('.success')).toContainText('Message sent');
});
</code></pre>
<hr>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="1-use-server-load-functions-for-sensitive-data"><a class="header" href="#1-use-server-load-functions-for-sensitive-data">1. Use Server Load Functions for Sensitive Data</a></h3>
<pre><code class="language-javascript">// ✅ Good - server-only
// src/routes/dashboard/+page.server.js
export async function load({ locals }) {
  const user = await db.getUser(locals.userId);
  return { user };
}

// ❌ Bad - exposes API keys
// src/routes/dashboard/+page.js
export async function load() {
  const data = await fetch('https://api.example.com', {
    headers: { 'API-Key': process.env.API_KEY } // Exposed to client!
  });
  return { data };
}
</code></pre>
<h3 id="2-leverage-progressive-enhancement"><a class="header" href="#2-leverage-progressive-enhancement">2. Leverage Progressive Enhancement</a></h3>
<pre><code class="language-svelte">&lt;!-- Form works without JavaScript --&gt;
&lt;form method="POST" action="?/create" use:enhance&gt;
  &lt;input name="title" required /&gt;
  &lt;button type="submit"&gt;Create&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<h3 id="3-optimize-load-functions"><a class="header" href="#3-optimize-load-functions">3. Optimize Load Functions</a></h3>
<pre><code class="language-javascript">// ✅ Good - parallel loading
export async function load({ fetch }) {
  const [posts, categories, tags] = await Promise.all([
    fetch('/api/posts').then(r =&gt; r.json()),
    fetch('/api/categories').then(r =&gt; r.json()),
    fetch('/api/tags').then(r =&gt; r.json())
  ]);

  return { posts, categories, tags };
}

// ❌ Bad - sequential loading
export async function load({ fetch }) {
  const posts = await fetch('/api/posts').then(r =&gt; r.json());
  const categories = await fetch('/api/categories').then(r =&gt; r.json());
  const tags = await fetch('/api/tags').then(r =&gt; r.json());

  return { posts, categories, tags };
}
</code></pre>
<h3 id="4-use-layouts-effectively"><a class="header" href="#4-use-layouts-effectively">4. Use Layouts Effectively</a></h3>
<pre><code>routes/
├── +layout.svelte              # Root layout (navbar, footer)
├── (app)/
│   ├── +layout.svelte         # App layout (sidebar)
│   ├── dashboard/
│   │   └── +page.svelte
│   └── settings/
│       └── +page.svelte
└── (marketing)/
    ├── +layout.svelte         # Marketing layout (different header)
    ├── about/
    │   └── +page.svelte
    └── pricing/
        └── +page.svelte
</code></pre>
<h3 id="5-handle-errors-gracefully"><a class="header" href="#5-handle-errors-gracefully">5. Handle Errors Gracefully</a></h3>
<pre><code class="language-javascript">import { error } from '@sveltejs/kit';

export async function load({ params }) {
  try {
    const data = await fetchData(params.id);

    if (!data) {
      throw error(404, {
        message: 'Not found',
        hint: 'Check the URL and try again'
      });
    }

    return { data };
  } catch (err) {
    if (err.status) throw err;

    console.error('Unexpected error:', err);
    throw error(500, 'Something went wrong');
  }
}
</code></pre>
<h3 id="6-validate-user-input"><a class="header" href="#6-validate-user-input">6. Validate User Input</a></h3>
<pre><code class="language-javascript">import { fail } from '@sveltejs/kit';
import { z } from 'zod';

const schema = z.object({
  email: z.string().email(),
  password: z.string().min(8),
  age: z.number().min(18)
});

export const actions = {
  default: async ({ request }) =&gt; {
    const data = await request.formData();
    const values = {
      email: data.get('email'),
      password: data.get('password'),
      age: parseInt(data.get('age'))
    };

    const result = schema.safeParse(values);

    if (!result.success) {
      return fail(400, {
        errors: result.error.flatten().fieldErrors,
        values
      });
    }

    // Process valid data
    await createUser(result.data);

    return { success: true };
  }
};
</code></pre>
<h3 id="7-secure-cookies"><a class="header" href="#7-secure-cookies">7. Secure Cookies</a></h3>
<pre><code class="language-javascript">cookies.set('session', sessionId, {
  path: '/',
  httpOnly: true,        // Prevent JS access
  sameSite: 'strict',    // CSRF protection
  secure: true,          // HTTPS only
  maxAge: 60 * 60 * 24 * 7  // 7 days
});
</code></pre>
<h3 id="8-use-type-safety"><a class="header" href="#8-use-type-safety">8. Use Type Safety</a></h3>
<pre><code class="language-typescript">// src/routes/blog/[slug]/+page.ts
import type { PageLoad } from './$types';

export const load: PageLoad = async ({ params, fetch }) =&gt; {
  const post = await fetch(`/api/posts/${params.slug}`).then(r =&gt; r.json());

  return {
    post
  };
};
</code></pre>
<hr>
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<p><strong>Official Documentation:</strong></p>
<ul>
<li><a href="https://kit.svelte.dev/docs">SvelteKit Documentation</a></li>
<li><a href="https://svelte.dev/docs">Svelte Documentation</a></li>
<li><a href="https://learn.svelte.dev/">SvelteKit Tutorial</a></li>
</ul>
<p><strong>Deployment Platforms:</strong></p>
<ul>
<li><a href="https://vercel.com/">Vercel</a></li>
<li><a href="https://www.netlify.com/">Netlify</a></li>
<li><a href="https://pages.cloudflare.com/">Cloudflare Pages</a></li>
</ul>
<p><strong>Useful Libraries:</strong></p>
<ul>
<li><a href="https://www.prisma.io/">Prisma ORM</a></li>
<li><a href="https://orm.drizzle.team/">Drizzle ORM</a></li>
<li><a href="https://lucia-auth.com/">Lucia Auth</a></li>
<li><a href="https://zod.dev/">Zod Validation</a></li>
<li><a href="https://inlang.com/m/gerre34r/library-inlang-paraglideJs">Paraglide i18n</a></li>
</ul>
<p><strong>Community:</strong></p>
<ul>
<li><a href="https://svelte.dev/chat">SvelteKit Discord</a></li>
<li><a href="https://sveltesociety.dev/">Svelte Society</a></li>
<li><a href="https://stackoverflow.com/questions/tagged/sveltekit">Stack Overflow</a></li>
<li><a href="https://github.com/sveltejs/kit/discussions">GitHub Discussions</a></li>
</ul>
<p><strong>Learning Resources:</strong></p>
<ul>
<li><a href="https://joyofcode.xyz/">Joy of Code</a></li>
<li><a href="https://sveltemastery.com/">Svelte Mastery</a></li>
<li><a href="https://github.com/sveltejs/kit/tree/master/examples">SvelteKit Examples</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../web_development/svelte.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../web_development/tailwind.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../web_development/svelte.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../web_development/tailwind.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
