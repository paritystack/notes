<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>UDP - My Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-ae938929.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-93ad08a6.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-f9b1048b.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">My Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="udp-user-datagram-protocol"><a class="header" href="#udp-user-datagram-protocol">UDP (User Datagram Protocol)</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>UDP is a connectionless transport layer protocol that provides fast, unreliable data transmission. Unlike TCP, UDP doesn’t guarantee delivery, ordering, or error checking, making it ideal for time-sensitive applications where speed matters more than reliability.</p>
<h2 id="udp-vs-tcp"><a class="header" href="#udp-vs-tcp">UDP vs TCP</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Feature</th><th>UDP</th><th>TCP</th></tr>
</thead>
<tbody>
<tr><td><strong>Connection</strong></td><td>Connectionless</td><td>Connection-oriented</td></tr>
<tr><td><strong>Reliability</strong></td><td>Unreliable (no guarantee)</td><td>Reliable (guaranteed delivery)</td></tr>
<tr><td><strong>Ordering</strong></td><td>No ordering</td><td>Ordered delivery</td></tr>
<tr><td><strong>Speed</strong></td><td>Fast (low overhead)</td><td>Slower (more overhead)</td></tr>
<tr><td><strong>Header Size</strong></td><td>8 bytes</td><td>20-60 bytes</td></tr>
<tr><td><strong>Error Checking</strong></td><td>Optional checksum</td><td>Mandatory checksum + retransmission</td></tr>
<tr><td><strong>Flow Control</strong></td><td>None</td><td>Yes (window-based)</td></tr>
<tr><td><strong>Congestion Control</strong></td><td>None</td><td>Yes</td></tr>
<tr><td><strong>Use Cases</strong></td><td>Streaming, gaming, DNS, VoIP</td><td>File transfer, web, email</td></tr>
</tbody>
</table>
</div>
<h2 id="udp-packet-format"><a class="header" href="#udp-packet-format">UDP Packet Format</a></h2>
<pre><code> 0      7 8     15 16    23 24    31
+--------+--------+--------+--------+
|     Source      |   Destination   |
|      Port       |      Port       |
+--------+--------+--------+--------+
|                 |                 |
|     Length      |    Checksum     |
+--------+--------+--------+--------+
|                                   |
|          Data octets ...          |
+-----------------------------------+
</code></pre>
<h3 id="header-fields-8-bytes-total"><a class="header" href="#header-fields-8-bytes-total">Header Fields (8 bytes total)</a></h3>
<ol>
<li><strong>Source Port</strong> (16 bits): Port number of sender (optional, can be 0)</li>
<li><strong>Destination Port</strong> (16 bits): Port number of receiver</li>
<li><strong>Length</strong> (16 bits): Length of UDP header + data (minimum 8 bytes)</li>
<li><strong>Checksum</strong> (16 bits): Error checking (optional in IPv4, mandatory in IPv6)</li>
</ol>
<h3 id="example-udp-header"><a class="header" href="#example-udp-header">Example UDP Header</a></h3>
<pre><code>Source Port: 53210 (0xCFCA)
Destination Port: 53 (0x0035) - DNS
Length: 512 bytes
Checksum: 0x1A2B
</code></pre>
<p><strong>Hexadecimal representation:</strong></p>
<pre><code>CF CA 00 35 02 00 1A 2B
[... 504 bytes of data ...]
</code></pre>
<h2 id="how-udp-works"><a class="header" href="#how-udp-works">How UDP Works</a></h2>
<h3 id="sending-data"><a class="header" href="#sending-data">Sending Data</a></h3>
<pre><code>Application → Socket → UDP Layer → IP Layer → Network

1. Application writes data to UDP socket
2. UDP adds 8-byte header
3. UDP passes datagram to IP layer
4. IP sends packet to destination
5. No acknowledgment expected
</code></pre>
<h3 id="receiving-data"><a class="header" href="#receiving-data">Receiving Data</a></h3>
<pre><code>Network → IP Layer → UDP Layer → Socket → Application

1. IP receives packet
2. IP passes to UDP based on protocol number (17)
3. UDP validates checksum (if present)
4. UDP delivers to application based on port
5. If port not listening, send ICMP "Port Unreachable"
</code></pre>
<h2 id="udp-communication-flow"><a class="header" href="#udp-communication-flow">UDP Communication Flow</a></h2>
<h3 id="one-way-communication-fire-and-forget"><a class="header" href="#one-way-communication-fire-and-forget">One-Way Communication (Fire and Forget)</a></h3>
<pre><code>Client                          Server (port 9000)
  |                                |
  |  UDP Packet (Hello)            |
  |-------------------------------&gt;|
  |                                |
  |  UDP Packet (World)            |
  |-------------------------------&gt;|
  |                                |

No handshake, no acknowledgment
</code></pre>
<h3 id="two-way-communication-request-response"><a class="header" href="#two-way-communication-request-response">Two-Way Communication (Request-Response)</a></h3>
<pre><code>Client                          Server
  |                                |
  |  DNS Query (Port 53)           |
  |-------------------------------&gt;|
  |                                |
  |  DNS Response                  |
  |&lt;-------------------------------|
  |                                |

Application must handle timeouts and retries
</code></pre>
<h2 id="udp-checksum-calculation"><a class="header" href="#udp-checksum-calculation">UDP Checksum Calculation</a></h2>
<h3 id="pseudo-header-for-checksum-calculation"><a class="header" href="#pseudo-header-for-checksum-calculation">Pseudo Header (for checksum calculation)</a></h3>
<pre><code>+--------+--------+--------+--------+
|          Source IP Address        |
+--------+--------+--------+--------+
|       Destination IP Address      |
+--------+--------+--------+--------+
|  zero  |Protocol| UDP Length      |
+--------+--------+--------+--------+
</code></pre>
<h3 id="checksum-process"><a class="header" href="#checksum-process">Checksum Process</a></h3>
<ol>
<li>Create pseudo header from IP information</li>
<li>Concatenate: Pseudo header + UDP header + data</li>
<li>Divide into 16-bit words</li>
<li>Sum all 16-bit words</li>
<li>Add carry bits to result</li>
<li>Take one’s complement</li>
</ol>
<p><strong>Example:</strong></p>
<pre><code class="language-python">def calculate_checksum(data):
    # Sum all 16-bit words
    total = sum(struct.unpack("!%dH" % (len(data)//2), data))

    # Add carry
    total = (total &gt;&gt; 16) + (total &amp; 0xffff)
    total += (total &gt;&gt; 16)

    # One's complement
    return ~total &amp; 0xffff
</code></pre>
<h2 id="common-udp-ports"><a class="header" href="#common-udp-ports">Common UDP Ports</a></h2>
<div class="table-wrapper">
<table>
<thead>
<tr><th>Port</th><th>Service</th><th>Purpose</th></tr>
</thead>
<tbody>
<tr><td><strong>53</strong></td><td>DNS</td><td>Domain name resolution</td></tr>
<tr><td><strong>67/68</strong></td><td>DHCP</td><td>Dynamic IP configuration</td></tr>
<tr><td><strong>69</strong></td><td>TFTP</td><td>Trivial File Transfer</td></tr>
<tr><td><strong>123</strong></td><td>NTP</td><td>Network Time Protocol</td></tr>
<tr><td><strong>161/162</strong></td><td>SNMP</td><td>Network management</td></tr>
<tr><td><strong>514</strong></td><td>Syslog</td><td>System logging</td></tr>
<tr><td><strong>520</strong></td><td>RIP</td><td>Routing protocol</td></tr>
<tr><td><strong>1900</strong></td><td>SSDP</td><td>Service discovery (UPnP)</td></tr>
<tr><td><strong>3478</strong></td><td>STUN</td><td>NAT traversal</td></tr>
<tr><td><strong>5353</strong></td><td>mDNS</td><td>Multicast DNS</td></tr>
</tbody>
</table>
</div>
<h2 id="udp-use-cases"><a class="header" href="#udp-use-cases">UDP Use Cases</a></h2>
<h3 id="1-dns-domain-name-system"><a class="header" href="#1-dns-domain-name-system">1. DNS (Domain Name System)</a></h3>
<pre><code>Client sends UDP query to port 53:
+----------------+
| DNS Query      |
| example.com?   |
+----------------+

Server responds:
+----------------+
| DNS Response   |
| 93.184.216.34  |
+----------------+

Fast lookup, retry if no response
</code></pre>
<h3 id="2-video-streaming"><a class="header" href="#2-video-streaming">2. Video Streaming</a></h3>
<pre><code>Server sends video frames continuously:
Frame 1 → Frame 2 → Frame 3 → Frame 4 → Frame 5

If Frame 3 is lost, continue with Frame 4
(Old frame is useless for live streaming)
</code></pre>
<h3 id="3-online-gaming"><a class="header" href="#3-online-gaming">3. Online Gaming</a></h3>
<pre><code>Game Client → Server: Player position updates (60 FPS)
Update 1: Player at (100, 200)
Update 2: Player at (101, 201)
Update 3: [LOST]
Update 4: Player at (103, 203)

Lost packet is okay - next update corrects position
</code></pre>
<h3 id="4-voip-voice-over-ip"><a class="header" href="#4-voip-voice-over-ip">4. VoIP (Voice over IP)</a></h3>
<pre><code>Continuous audio stream:
Packet 1: Audio 0-20ms
Packet 2: Audio 20-40ms
Packet 3: Audio 40-60ms [LOST]
Packet 4: Audio 60-80ms

Lost packet = brief audio glitch
Retransmission would cause worse delay
</code></pre>
<h3 id="5-dhcp-ip-address-assignment"><a class="header" href="#5-dhcp-ip-address-assignment">5. DHCP (IP Address Assignment)</a></h3>
<pre><code>Client                          Server
  |                                |
  | DHCP Discover (broadcast)      |
  |-------------------------------&gt;|
  |                                |
  | DHCP Offer                     |
  |&lt;-------------------------------|
  |                                |
  | DHCP Request                   |
  |-------------------------------&gt;|
  |                                |
  | DHCP ACK                       |
  |&lt;-------------------------------|
</code></pre>
<h2 id="udp-socket-programming"><a class="header" href="#udp-socket-programming">UDP Socket Programming</a></h2>
<h3 id="python-udp-server"><a class="header" href="#python-udp-server">Python UDP Server</a></h3>
<pre><code class="language-python">import socket

# Create UDP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

# Bind to address and port
server_address = ('localhost', 9000)
sock.bind(server_address)

print(f"UDP server listening on {server_address}")

while True:
    # Receive data (up to 1024 bytes)
    data, client_address = sock.recvfrom(1024)
    print(f"Received {len(data)} bytes from {client_address}")
    print(f"Data: {data.decode()}")

    # Send response
    sock.sendto(b"Message received", client_address)
</code></pre>
<h3 id="python-udp-client"><a class="header" href="#python-udp-client">Python UDP Client</a></h3>
<pre><code class="language-python">import socket

# Create UDP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

server_address = ('localhost', 9000)

try:
    # Send data
    message = b"Hello, UDP Server!"
    sock.sendto(message, server_address)

    # Receive response (with timeout)
    sock.settimeout(5.0)
    data, server = sock.recvfrom(1024)
    print(f"Received: {data.decode()}")

except socket.timeout:
    print("No response from server")
finally:
    sock.close()
</code></pre>
<h3 id="c-udp-server"><a class="header" href="#c-udp-server">C UDP Server</a></h3>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;arpa/inet.h&gt;

#define PORT 9000
#define BUFFER_SIZE 1024

int main() {
    int sockfd;
    char buffer[BUFFER_SIZE];
    struct sockaddr_in server_addr, client_addr;
    socklen_t addr_len = sizeof(client_addr);

    // Create UDP socket
    sockfd = socket(AF_INET, SOCK_DGRAM, 0);

    // Setup server address
    memset(&amp;server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_addr.s_addr = INADDR_ANY;
    server_addr.sin_port = htons(PORT);

    // Bind socket
    bind(sockfd, (struct sockaddr*)&amp;server_addr, sizeof(server_addr));

    printf("UDP server listening on port %d\n", PORT);

    while(1) {
        // Receive data
        int n = recvfrom(sockfd, buffer, BUFFER_SIZE, 0,
                        (struct sockaddr*)&amp;client_addr, &amp;addr_len);
        buffer[n] = '\0';

        printf("Received: %s\n", buffer);

        // Send response
        sendto(sockfd, "ACK", 3, 0,
               (struct sockaddr*)&amp;client_addr, addr_len);
    }

    return 0;
}
</code></pre>
<h2 id="udp-broadcast-and-multicast"><a class="header" href="#udp-broadcast-and-multicast">UDP Broadcast and Multicast</a></h2>
<h3 id="broadcast-one-to-all-in-subnet"><a class="header" href="#broadcast-one-to-all-in-subnet">Broadcast (One-to-All in subnet)</a></h3>
<pre><code class="language-python">import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)

# Send to broadcast address
broadcast_address = ('255.255.255.255', 9000)
sock.sendto(b"Broadcast message", broadcast_address)
</code></pre>
<h3 id="multicast-one-to-many-selected"><a class="header" href="#multicast-one-to-many-selected">Multicast (One-to-Many selected)</a></h3>
<pre><code class="language-python">import socket
import struct

MCAST_GRP = '224.1.1.1'
MCAST_PORT = 5007

# Sender
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(b"Multicast message", (MCAST_GRP, MCAST_PORT))

# Receiver
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind(('', MCAST_PORT))

# Join multicast group
mreq = struct.pack("4sl", socket.inet_aton(MCAST_GRP),
                   socket.INADDR_ANY)
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)

data, address = sock.recvfrom(1024)
</code></pre>
<h2 id="udp-maximum-packet-size"><a class="header" href="#udp-maximum-packet-size">UDP Maximum Packet Size</a></h2>
<h3 id="theoretical-limits"><a class="header" href="#theoretical-limits">Theoretical Limits</a></h3>
<pre><code>IPv4:
- Max IP packet: 65,535 bytes
- IP header: 20 bytes (minimum)
- UDP header: 8 bytes
- Max UDP data: 65,507 bytes

IPv6:
- Max payload (jumbogram): 4,294,967,295 bytes
</code></pre>
<h3 id="practical-limits-mtu"><a class="header" href="#practical-limits-mtu">Practical Limits (MTU)</a></h3>
<pre><code>Ethernet MTU: 1500 bytes
- IP header: 20 bytes
- UDP header: 8 bytes
- Safe UDP data: 1472 bytes

To avoid fragmentation:
- Stay under 1472 bytes for IPv4
- Stay under 1452 bytes for IPv6
</code></pre>
<h2 id="udp-reliability-techniques"><a class="header" href="#udp-reliability-techniques">UDP Reliability Techniques</a></h2>
<p>Since UDP doesn’t provide reliability, applications must implement it:</p>
<h3 id="1-acknowledgments"><a class="header" href="#1-acknowledgments">1. Acknowledgments</a></h3>
<pre><code>Sender                          Receiver
  |                                |
  | Packet 1                       |
  |-------------------------------&gt;|
  |                                |
  | ACK 1                          |
  |&lt;-------------------------------|
  |                                |
  | Packet 2                       |
  |-------------------------------&gt;|
  |                                |
  [timeout - no ACK received]
  |                                |
  | Packet 2 (resend)              |
  |-------------------------------&gt;|
  |                                |
  | ACK 2                          |
  |&lt;-------------------------------|
</code></pre>
<h3 id="2-sequence-numbers"><a class="header" href="#2-sequence-numbers">2. Sequence Numbers</a></h3>
<pre><code>Application adds sequence numbers:
Packet 1: [Seq=1][Data]
Packet 2: [Seq=2][Data]
Packet 3: [Seq=3][Data]

Receiver detects missing packets
Requests retransmission if needed
</code></pre>
<h3 id="3-timeouts-and-retries"><a class="header" href="#3-timeouts-and-retries">3. Timeouts and Retries</a></h3>
<pre><code class="language-python">import socket
import time

def send_with_retry(sock, data, address, max_retries=3):
    for attempt in range(max_retries):
        sock.sendto(data, address)
        sock.settimeout(1.0)

        try:
            response, _ = sock.recvfrom(1024)
            return response
        except socket.timeout:
            print(f"Retry {attempt + 1}/{max_retries}")
            continue

    raise Exception("Max retries exceeded")
</code></pre>
<h2 id="udp-advantages"><a class="header" href="#udp-advantages">UDP Advantages</a></h2>
<ol>
<li><strong>Low Latency</strong>: No connection setup, immediate transmission</li>
<li><strong>Low Overhead</strong>: 8-byte header vs TCP’s 20+ bytes</li>
<li><strong>No Connection State</strong>: Simpler, uses less memory</li>
<li><strong>Broadcast/Multicast</strong>: Can send to multiple receivers</li>
<li><strong>Fast</strong>: No waiting for acknowledgments</li>
<li><strong>Transaction-Oriented</strong>: Good for request-response</li>
</ol>
<h2 id="udp-disadvantages"><a class="header" href="#udp-disadvantages">UDP Disadvantages</a></h2>
<ol>
<li><strong>Unreliable</strong>: Packets may be lost, duplicated, or reordered</li>
<li><strong>No Flow Control</strong>: Can overwhelm receiver</li>
<li><strong>No Congestion Control</strong>: Can worsen network congestion</li>
<li><strong>No Security</strong>: No encryption (use DTLS for secure UDP)</li>
<li><strong>Application Complexity</strong>: Must implement reliability if needed</li>
</ol>
<h2 id="udp-security-considerations"><a class="header" href="#udp-security-considerations">UDP Security Considerations</a></h2>
<h3 id="vulnerabilities"><a class="header" href="#vulnerabilities">Vulnerabilities</a></h3>
<ol>
<li><strong>UDP Flood Attack</strong>: Overwhelm server with UDP packets</li>
<li><strong>UDP Amplification</strong>: Small request → large response (DNS, NTP)</li>
<li><strong>Spoofing</strong>: Easy to fake source IP (no handshake)</li>
</ol>
<h3 id="mitigation"><a class="header" href="#mitigation">Mitigation</a></h3>
<pre><code>1. Rate limiting: Limit packets per second per source
2. Firewall rules: Block unnecessary UDP ports
3. Authentication: Verify sender identity
4. DTLS: Encrypted UDP (Datagram TLS)
</code></pre>
<h3 id="dtls-datagram-tls"><a class="header" href="#dtls-datagram-tls">DTLS (Datagram TLS)</a></h3>
<p>Secure UDP communication:</p>
<pre><code>UDP + TLS-style encryption = DTLS

Used in:
- WebRTC
- VPN protocols
- IoT devices
</code></pre>
<h2 id="monitoring-udp-traffic"><a class="header" href="#monitoring-udp-traffic">Monitoring UDP Traffic</a></h2>
<h3 id="using-tcpdump"><a class="header" href="#using-tcpdump">Using tcpdump</a></h3>
<pre><code class="language-bash"># Capture UDP traffic on port 53 (DNS)
tcpdump -i any udp port 53

# Capture all UDP traffic
tcpdump -i any udp

# Save to file
tcpdump -i any udp -w udp_capture.pcap

# View UDP packet details
tcpdump -i any udp -vv -X
</code></pre>
<h3 id="using-netstat"><a class="header" href="#using-netstat">Using netstat</a></h3>
<pre><code class="language-bash"># Show UDP listening ports
netstat -un

# Show UDP statistics
netstat -su

# Show processes using UDP
netstat -unp
</code></pre>
<h2 id="eli10"><a class="header" href="#eli10">ELI10</a></h2>
<p>UDP is like sending postcards:</p>
<p><strong>TCP is like certified mail:</strong></p>
<ul>
<li>You get confirmation it arrived</li>
<li>Items arrive in order</li>
<li>Lost mail is resent</li>
<li>But takes longer</li>
</ul>
<p><strong>UDP is like postcards:</strong></p>
<ul>
<li>Just drop it in the mailbox and go</li>
<li>Super fast - no waiting</li>
<li>But might get lost</li>
<li>Might arrive out of order</li>
<li>No way to know if it arrived</li>
</ul>
<p><strong>When to use UDP (postcards):</strong></p>
<ul>
<li>Quick questions (DNS: “What’s this address?”)</li>
<li>Live streaming (watching a game - who cares about 1 missed frame?)</li>
<li>Online games (your position updates 60 times per second)</li>
<li>Video calls (slight glitch is better than delay)</li>
</ul>
<p><strong>When to use TCP (certified mail):</strong></p>
<ul>
<li>Important files</li>
<li>Web pages</li>
<li>Emails</li>
<li>Banking transactions</li>
</ul>
<h2 id="further-resources"><a class="header" href="#further-resources">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc768">RFC 768 - UDP Specification</a></li>
<li><a href="https://www.cloudflare.com/learning/ddos/glossary/user-datagram-protocol-udp/">UDP vs TCP Explained</a></li>
<li><a href="https://beej.us/guide/bgnet/html/">UDP Programming Guide</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../networking/tcp.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../networking/http.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../networking/tcp.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../networking/http.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
