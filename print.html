<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>My Notes</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">My Notes</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome-to-my-notes-site"><a class="header" href="#welcome-to-my-notes-site">Welcome to My Notes Site</a></h1>
<p>Welcome to a curated collection of notes and resources spanning a wide array of topics, from programming languages and data structures to machine learning and cloud computing. This is my personal repository of knowledge, where I document my learnings and insights across various subjects.</p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="git/">Git</a></li>
<li><a href="programming/">Programming Languages</a></li>
<li><a href="linux/">Linux</a></li>
<li><a href="android/">Android</a></li>
<li><a href="data_structures/">Data Structures</a></li>
<li><a href="algorithms/">Algorithms</a></li>
<li><a href="security/">Security</a></li>
<li><a href="networking/">Computer Networking</a></li>
<li><a href="wifi/">Wifi</a></li>
<li><a href="machine_learning/">Machine Learning</a></li>
<li><a href="ai/">AI</a></li>
<li><a href="cloud/">Cloud</a></li>
<li><a href="finance/">Finance</a></li>
<li><a href="tools/">Tools</a></li>
<li><a href="embedded/">Embedded</a></li>
</ul>
<p>Feel free to explore the sections and delve into the topics that pique your interest. Happy learning!</p>
<p>Note: This is an evolving project, and I will continue to add more content over time. The contents may be rearranged or updated as needed.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-version-control"><a class="header" href="#git-version-control">Git Version Control</a></h1>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Git is a distributed version control system designed to handle everything from small to very large projects with speed and efficiency. Created by Linus Torvalds in 2005, Git has become the de facto standard for version control in software development.</p>
<h2 id="what-is-version-control"><a class="header" href="#what-is-version-control">What is Version Control?</a></h2>
<p>Version control is a system that records changes to files over time so that you can recall specific versions later. It allows you to:</p>
<ul>
<li>Track changes to your code</li>
<li>Collaborate with other developers</li>
<li>Revert to previous versions</li>
<li>Create branches for experimental features</li>
<li>Merge changes from multiple sources</li>
<li>Maintain a complete history of your project</li>
</ul>
<h2 id="why-git"><a class="header" href="#why-git">Why Git?</a></h2>
<ol>
<li><strong>Distributed</strong>: Every developer has a full copy of the repository</li>
<li><strong>Fast</strong>: Most operations are local</li>
<li><strong>Branching</strong>: Lightweight and powerful branching model</li>
<li><strong>Data Integrity</strong>: Cryptographic hash (SHA-1) ensures data integrity</li>
<li><strong>Staging Area</strong>: Review changes before committing</li>
<li><strong>Open Source</strong>: Free and widely supported</li>
</ol>
<h2 id="git-basics"><a class="header" href="#git-basics">Git Basics</a></h2>
<h3 id="the-three-states"><a class="header" href="#the-three-states">The Three States</a></h3>
<p>Git has three main states for your files:</p>
<ol>
<li><strong>Modified</strong>: Changed but not committed</li>
<li><strong>Staged</strong>: Marked for next commit</li>
<li><strong>Committed</strong>: Safely stored in local database</li>
</ol>
<pre><code>Working Directory -&gt; Staging Area -&gt; Git Repository
     (edit)            (stage)         (commit)
</code></pre>
<h3 id="git-workflow"><a class="header" href="#git-workflow">Git Workflow</a></h3>
<pre><code class="language-bash"># 1. Make changes in working directory
echo "Hello World" &gt; file.txt

# 2. Stage changes
git add file.txt

# 3. Commit changes
git commit -m "Add hello world file"

# 4. Push to remote repository
git push origin main
</code></pre>
<h2 id="installation-and-setup"><a class="header" href="#installation-and-setup">Installation and Setup</a></h2>
<h3 id="installation"><a class="header" href="#installation">Installation</a></h3>
<pre><code class="language-bash"># Linux (Debian/Ubuntu)
sudo apt-get update
sudo apt-get install git

# Linux (Fedora)
sudo dnf install git

# macOS (Homebrew)
brew install git

# Windows
# Download from https://git-scm.com/download/win

# Verify installation
git --version
</code></pre>
<h3 id="initial-configuration"><a class="header" href="#initial-configuration">Initial Configuration</a></h3>
<pre><code class="language-bash"># Set user name
git config --global user.name "Your Name"

# Set email
git config --global user.email "your.email@example.com"

# Set default editor
git config --global core.editor "vim"

# Set default branch name
git config --global init.defaultBranch main

# Enable color output
git config --global color.ui auto

# View all settings
git config --list

# View specific setting
git config user.name

# Edit config file directly
git config --global --edit
</code></pre>
<h2 id="basic-commands"><a class="header" href="#basic-commands">Basic Commands</a></h2>
<h3 id="creating-repositories"><a class="header" href="#creating-repositories">Creating Repositories</a></h3>
<pre><code class="language-bash"># Initialize new repository
git init

# Clone existing repository
git clone https://github.com/user/repo.git

# Clone to specific directory
git clone https://github.com/user/repo.git my-project

# Clone specific branch
git clone -b develop https://github.com/user/repo.git
</code></pre>
<h3 id="making-changes"><a class="header" href="#making-changes">Making Changes</a></h3>
<pre><code class="language-bash"># Check status
git status

# Add file to staging
git add file.txt

# Add all files
git add .

# Add all files with specific extension
git add *.js

# Interactive staging
git add -p

# Commit staged changes
git commit -m "Commit message"

# Commit with detailed message
git commit

# Stage and commit in one step
git commit -am "Message"

# Amend last commit
git commit --amend

# Amend without changing message
git commit --amend --no-edit
</code></pre>
<h3 id="viewing-history"><a class="header" href="#viewing-history">Viewing History</a></h3>
<pre><code class="language-bash"># View commit history
git log

# Compact log
git log --oneline

# Graph view
git log --graph --oneline --all

# Limit number of commits
git log -n 5

# Show commits by author
git log --author="John"

# Show commits in date range
git log --since="2 weeks ago"
git log --until="2024-01-01"

# Show file changes
git log --stat

# Show detailed changes
git log -p

# Search commit messages
git log --grep="fix"

# Show commits affecting specific file
git log -- file.txt
</code></pre>
<h3 id="viewing-changes"><a class="header" href="#viewing-changes">Viewing Changes</a></h3>
<pre><code class="language-bash"># Show unstaged changes
git diff

# Show staged changes
git diff --staged

# Show changes in specific file
git diff file.txt

# Compare branches
git diff main..feature

# Compare commits
git diff commit1 commit2

# Word-level diff
git diff --word-diff
</code></pre>
<h2 id="branching-and-merging"><a class="header" href="#branching-and-merging">Branching and Merging</a></h2>
<h3 id="branches"><a class="header" href="#branches">Branches</a></h3>
<pre><code class="language-bash"># List branches
git branch

# List all branches (including remote)
git branch -a

# Create new branch
git branch feature-name

# Switch to branch
git checkout feature-name

# Create and switch in one command
git checkout -b feature-name

# Modern syntax (Git 2.23+)
git switch feature-name
git switch -c feature-name

# Delete branch
git branch -d feature-name

# Force delete unmerged branch
git branch -D feature-name

# Rename current branch
git branch -m new-name

# Rename specific branch
git branch -m old-name new-name
</code></pre>
<h3 id="merging"><a class="header" href="#merging">Merging</a></h3>
<pre><code class="language-bash"># Merge branch into current branch
git merge feature-name

# Merge with commit message
git merge feature-name -m "Merge feature"

# Merge without fast-forward
git merge --no-ff feature-name

# Abort merge
git merge --abort

# Continue merge after resolving conflicts
git merge --continue
</code></pre>
<h3 id="handling-merge-conflicts"><a class="header" href="#handling-merge-conflicts">Handling Merge Conflicts</a></h3>
<pre><code class="language-bash"># When merge conflict occurs:

# 1. Check conflicted files
git status

# 2. Open files and resolve conflicts
#    Look for markers: &lt;&lt;&lt;&lt;&lt;&lt;&lt;, =======, &gt;&gt;&gt;&gt;&gt;&gt;&gt;

# 3. After resolving, stage files
git add resolved-file.txt

# 4. Complete merge
git commit

# Or use merge tool
git mergetool
</code></pre>
<h3 id="rebasing"><a class="header" href="#rebasing">Rebasing</a></h3>
<pre><code class="language-bash"># Rebase current branch onto main
git rebase main

# Interactive rebase (last 3 commits)
git rebase -i HEAD~3

# Continue after resolving conflicts
git rebase --continue

# Skip current commit
git rebase --skip

# Abort rebase
git rebase --abort

# Rebase options in interactive mode:
# pick   = use commit
# reword = use commit, but edit message
# edit   = use commit, but stop for amending
# squash = merge with previous commit
# drop   = remove commit
</code></pre>
<h2 id="remote-repositories"><a class="header" href="#remote-repositories">Remote Repositories</a></h2>
<h3 id="working-with-remotes"><a class="header" href="#working-with-remotes">Working with Remotes</a></h3>
<pre><code class="language-bash"># List remotes
git remote

# List remotes with URLs
git remote -v

# Add remote
git remote add origin https://github.com/user/repo.git

# Change remote URL
git remote set-url origin https://github.com/user/new-repo.git

# Remove remote
git remote remove origin

# Rename remote
git remote rename origin upstream

# Show remote info
git remote show origin
</code></pre>
<h3 id="fetching-and-pulling"><a class="header" href="#fetching-and-pulling">Fetching and Pulling</a></h3>
<pre><code class="language-bash"># Fetch from remote (doesn't merge)
git fetch origin

# Fetch all remotes
git fetch --all

# Pull (fetch + merge)
git pull origin main

# Pull with rebase
git pull --rebase origin main

# Pull specific branch
git pull origin feature-branch
</code></pre>
<h3 id="pushing"><a class="header" href="#pushing">Pushing</a></h3>
<pre><code class="language-bash"># Push to remote
git push origin main

# Push and set upstream
git push -u origin main

# Push all branches
git push --all origin

# Push tags
git push --tags

# Force push (dangerous!)
git push --force origin main

# Safer force push
git push --force-with-lease origin main

# Delete remote branch
git push origin --delete branch-name
</code></pre>
<h2 id="undoing-changes"><a class="header" href="#undoing-changes">Undoing Changes</a></h2>
<h3 id="working-directory"><a class="header" href="#working-directory">Working Directory</a></h3>
<pre><code class="language-bash"># Discard changes in file
git checkout -- file.txt

# Discard all changes
git checkout -- .

# Modern syntax
git restore file.txt
git restore .

# Remove untracked files
git clean -f

# Remove untracked files and directories
git clean -fd

# Preview what will be removed
git clean -n
</code></pre>
<h3 id="staging-area"><a class="header" href="#staging-area">Staging Area</a></h3>
<pre><code class="language-bash"># Unstage file
git reset HEAD file.txt

# Unstage all files
git reset HEAD

# Modern syntax
git restore --staged file.txt
</code></pre>
<h3 id="commits"><a class="header" href="#commits">Commits</a></h3>
<pre><code class="language-bash"># Undo last commit (keep changes)
git reset --soft HEAD~1

# Undo last commit (discard changes)
git reset --hard HEAD~1

# Undo multiple commits
git reset --hard HEAD~3

# Reset to specific commit
git reset --hard commit-hash

# Create new commit that undoes changes
git revert commit-hash

# Revert multiple commits
git revert commit1..commit3
</code></pre>
<h2 id="advanced-features"><a class="header" href="#advanced-features">Advanced Features</a></h2>
<h3 id="stashing"><a class="header" href="#stashing">Stashing</a></h3>
<pre><code class="language-bash"># Stash current changes
git stash

# Stash with message
git stash save "Work in progress"

# List stashes
git stash list

# Apply last stash
git stash apply

# Apply specific stash
git stash apply stash@{2}

# Apply and remove stash
git stash pop

# Create branch from stash
git stash branch feature-name

# Drop stash
git stash drop stash@{0}

# Clear all stashes
git stash clear

# Stash including untracked files
git stash -u
</code></pre>
<h3 id="tags"><a class="header" href="#tags">Tags</a></h3>
<pre><code class="language-bash"># List tags
git tag

# Create lightweight tag
git tag v1.0.0

# Create annotated tag
git tag -a v1.0.0 -m "Version 1.0.0"

# Tag specific commit
git tag v1.0.0 commit-hash

# Push tag to remote
git push origin v1.0.0

# Push all tags
git push --tags

# Delete local tag
git tag -d v1.0.0

# Delete remote tag
git push origin --delete v1.0.0

# Checkout tag
git checkout v1.0.0
</code></pre>
<h3 id="cherry-pick"><a class="header" href="#cherry-pick">Cherry-Pick</a></h3>
<pre><code class="language-bash"># Apply specific commit to current branch
git cherry-pick commit-hash

# Cherry-pick multiple commits
git cherry-pick commit1 commit2

# Cherry-pick without committing
git cherry-pick -n commit-hash

# Abort cherry-pick
git cherry-pick --abort
</code></pre>
<h3 id="bisect"><a class="header" href="#bisect">Bisect</a></h3>
<pre><code class="language-bash"># Start bisect session
git bisect start

# Mark current commit as bad
git bisect bad

# Mark known good commit
git bisect good commit-hash

# Git will checkout middle commit
# Test and mark as good or bad
git bisect good  # or git bisect bad

# Continue until bug is found

# End bisect session
git bisect reset
</code></pre>
<h2 id="git-workflows"><a class="header" href="#git-workflows">Git Workflows</a></h2>
<h3 id="feature-branch-workflow"><a class="header" href="#feature-branch-workflow">Feature Branch Workflow</a></h3>
<pre><code class="language-bash"># 1. Create feature branch
git checkout -b feature/new-feature

# 2. Make changes and commit
git add .
git commit -m "Implement new feature"

# 3. Push to remote
git push -u origin feature/new-feature

# 4. Create pull request (on GitHub/GitLab)

# 5. After review, merge via web interface

# 6. Update local main branch
git checkout main
git pull origin main

# 7. Delete feature branch
git branch -d feature/new-feature
git push origin --delete feature/new-feature
</code></pre>
<h3 id="gitflow-workflow"><a class="header" href="#gitflow-workflow">Gitflow Workflow</a></h3>
<pre><code class="language-bash"># Main branches: main (production), develop (integration)

# Start new feature
git checkout -b feature/feature-name develop

# Finish feature
git checkout develop
git merge --no-ff feature/feature-name
git branch -d feature/feature-name

# Start release
git checkout -b release/1.0.0 develop

# Finish release
git checkout main
git merge --no-ff release/1.0.0
git tag -a v1.0.0
git checkout develop
git merge --no-ff release/1.0.0
git branch -d release/1.0.0

# Hotfix
git checkout -b hotfix/fix-bug main
git checkout main
git merge --no-ff hotfix/fix-bug
git tag -a v1.0.1
git checkout develop
git merge --no-ff hotfix/fix-bug
git branch -d hotfix/fix-bug
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="commit-messages"><a class="header" href="#commit-messages">Commit Messages</a></h3>
<pre><code class="language-bash"># Good commit message structure:
# &lt;type&gt;: &lt;subject&gt;
# 
# &lt;body&gt;
# 
# &lt;footer&gt;

# Example:
git commit -m "feat: Add user authentication

Implement JWT-based authentication system with login and logout endpoints.
Uses bcrypt for password hashing.

Closes #123"

# Common types:
# feat:     New feature
# fix:      Bug fix
# docs:     Documentation changes
# style:    Formatting, missing semicolons, etc.
# refactor: Code restructuring
# test:     Adding tests
# chore:    Maintenance tasks
</code></pre>
<h3 id="general-best-practices"><a class="header" href="#general-best-practices">General Best Practices</a></h3>
<ol>
<li><strong>Commit Often</strong>: Make small, logical commits</li>
<li><strong>Write Clear Messages</strong>: Explain what and why</li>
<li><strong>Use Branches</strong>: Keep main stable</li>
<li><strong>Pull Before Push</strong>: Stay synchronized</li>
<li><strong>Review Before Commit</strong>: Check what you're committing</li>
<li><strong>Don't Commit Secrets</strong>: Use .gitignore for sensitive files</li>
<li><strong>Keep History Clean</strong>: Use rebase for feature branches</li>
<li><strong>Tag Releases</strong>: Mark important versions</li>
<li><strong>Backup Remote</strong>: Always have a remote backup</li>
<li><strong>Learn to Revert</strong>: Know how to undo mistakes</li>
</ol>
<h3 id="gitignore"><a class="header" href="#gitignore">.gitignore</a></h3>
<pre><code class="language-bash"># Create .gitignore file
cat &gt; .gitignore &lt;&lt; 'EOL'
# Dependencies
node_modules/
vendor/

# Environment files
.env
.env.local

# Build outputs
dist/
build/
*.log

# IDE files
.vscode/
.idea/
*.swp

# OS files
.DS_Store
Thumbs.db

# Compiled files
*.pyc
*.class
*.o
EOL

# Global gitignore
git config --global core.excludesfile ~/.gitignore_global
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<pre><code class="language-bash"># Undo last commit but keep changes
git reset --soft HEAD~1

# Fix wrong commit message
git commit --amend -m "Correct message"

# Recover deleted branch
git reflog
git checkout -b recovered-branch commit-hash

# Resolve "detached HEAD"
git checkout main

# Remove file from Git but keep locally
git rm --cached file.txt

# Update .gitignore for already tracked files
git rm -r --cached .
git add .
git commit -m "Update .gitignore"

# Find commit that introduced bug
git bisect start
git bisect bad
git bisect good commit-hash
</code></pre>
<h3 id="performance"><a class="header" href="#performance">Performance</a></h3>
<pre><code class="language-bash"># Clean up repository
git gc

# Aggressive cleanup
git gc --aggressive

# Prune unreachable objects
git prune

# Show repository size
git count-objects -vH
</code></pre>
<h2 id="git-aliases"><a class="header" href="#git-aliases">Git Aliases</a></h2>
<pre><code class="language-bash"># Create useful aliases
git config --global alias.co checkout
git config --global alias.br branch
git config --global alias.ci commit
git config --global alias.st status
git config --global alias.unstage 'reset HEAD --'
git config --global alias.last 'log -1 HEAD'
git config --global alias.visual 'log --graph --oneline --all'
git config --global alias.amend 'commit --amend --no-edit'

# Use aliases
git co main
git ci -m "Message"
git visual
</code></pre>
<h2 id="integration-with-github"><a class="header" href="#integration-with-github">Integration with GitHub</a></h2>
<p>GitHub adds collaboration features on top of Git. See the dedicated <a href="git/github.html">GitHub guide</a> for:</p>
<ul>
<li>Pull requests</li>
<li>Issues</li>
<li>Actions (CI/CD)</li>
<li>Pages</li>
<li>Wikis</li>
<li>Organizations and teams</li>
</ul>
<h2 id="available-resources"><a class="header" href="#available-resources">Available Resources</a></h2>
<ul>
<li><a href="git/cheatsheet.html">Git Cheat Sheet</a> - Quick reference guide</li>
<li><a href="git/commands.html">Git Commands</a> - Comprehensive command list</li>
<li><a href="git/github.html">GitHub Guide</a> - GitHub-specific features</li>
</ul>
<h2 id="learning-resources"><a class="header" href="#learning-resources">Learning Resources</a></h2>
<h3 id="documentation"><a class="header" href="#documentation">Documentation</a></h3>
<ul>
<li><a href="https://git-scm.com/doc">Official Git Documentation</a></li>
<li><a href="https://git-scm.com/book/en/v2">Pro Git Book</a> (free online)</li>
<li><a href="https://git-scm.com/docs">Git Reference</a></li>
</ul>
<h3 id="interactive-tutorials"><a class="header" href="#interactive-tutorials">Interactive Tutorials</a></h3>
<ul>
<li><a href="https://learngitbranching.js.org/">Learn Git Branching</a></li>
<li><a href="https://lab.github.com/">GitHub Learning Lab</a></li>
<li><a href="https://gitexercises.fracz.com/">Git Exercises</a></li>
</ul>
<h3 id="visualizations"><a class="header" href="#visualizations">Visualizations</a></h3>
<ul>
<li><a href="https://git-school.github.io/visualizing-git/">Visualizing Git Concepts</a></li>
<li><a href="https://nvie.com/posts/a-successful-git-branching-model/">Git Flow Diagram</a></li>
</ul>
<h2 id="quick-reference"><a class="header" href="#quick-reference">Quick Reference</a></h2>
<h3 id="daily-commands"><a class="header" href="#daily-commands">Daily Commands</a></h3>
<pre><code class="language-bash">git status                    # Check status
git add .                     # Stage all changes
git commit -m "message"       # Commit changes
git pull                      # Update from remote
git push                      # Push to remote
git log --oneline            # View history
</code></pre>
<h3 id="branching"><a class="header" href="#branching">Branching</a></h3>
<pre><code class="language-bash">git branch                    # List branches
git checkout -b feature       # Create and switch
git merge feature            # Merge branch
git branch -d feature        # Delete branch
</code></pre>
<h3 id="undoing"><a class="header" href="#undoing">Undoing</a></h3>
<pre><code class="language-bash">git reset --soft HEAD~1      # Undo commit, keep changes
git restore file.txt         # Discard file changes
git revert commit-hash       # Create revert commit
git stash                    # Save temporary changes
</code></pre>
<h3 id="remote"><a class="header" href="#remote">Remote</a></h3>
<pre><code class="language-bash">git remote -v                # List remotes
git fetch origin             # Download changes
git pull origin main         # Fetch and merge
git push origin main         # Upload changes
</code></pre>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ol>
<li>Practice basic commands: add, commit, push, pull</li>
<li>Learn branching and merging</li>
<li>Master undoing changes safely</li>
<li>Explore advanced features: rebase, cherry-pick, bisect</li>
<li>Set up GitHub account and create repositories</li>
<li>Contribute to open source projects</li>
<li>Learn Git workflows (Feature Branch, Gitflow)</li>
<li>Configure useful aliases and tools</li>
</ol>
<p>Remember: Git has a learning curve, but it's worth the investment. Start with the basics and gradually explore advanced features as needed.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-cheatsheet"><a class="header" href="#git-cheatsheet">Git Cheatsheet</a></h1>
<h2 id="git-commands"><a class="header" href="#git-commands">Git Commands</a></h2>
<h3 id="basic-setup"><a class="header" href="#basic-setup">Basic setup</a></h3>
<pre><code class="language-bash">git config --global user.name "&lt;name&gt;"
git config --global user.email "&lt;email&gt;"
git config --global core.editor "vi"
</code></pre>
<h3 id="create-a-new-branch-from-an-orphan-branch"><a class="header" href="#create-a-new-branch-from-an-orphan-branch">Create a new branch from an orphan branch</a></h3>
<pre><code class="language-bash">git switch --orphan &lt;new branch&gt;
git commit --allow-empty -m "Initial commit on orphan branch"
git push -u origin &lt;new branch&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="git-commands-1"><a class="header" href="#git-commands-1">Git Commands</a></h1>
<h2 id="git-clone"><a class="header" href="#git-clone">Git Clone</a></h2>
<pre><code class="language-bash">git clone &lt;repository_url&gt;
</code></pre>
<h2 id="git-add"><a class="header" href="#git-add">Git Add</a></h2>
<pre><code class="language-bash">git add &lt;file&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="github"><a class="header" href="#github">Github</a></h1>
<h2 id="quick-start"><a class="header" href="#quick-start">Quick start</a></h2>
<ul>
<li>Copy the public key to the settings.</li>
<li>Clone the repository using <code>git clone git@github.com:&lt;username&gt;/&lt;repository&gt;.git</code></li>
<li>Create a new branch from the main branch using <code>git switch -c &lt;new branch&gt;</code></li>
<li>Push the new branch to the remote repository using <code>git push -u origin &lt;new branch&gt;</code></li>
</ul>
<h2 id="action-permissions"><a class="header" href="#action-permissions">Action Permissions</a></h2>
<ul>
<li>Workflow permissions are disabled by default.</li>
<li>To enable them, go to the repository settings, click on <code>Actions</code>, then click on <code>General</code>, and enable <code>Read and write permissions</code> for the <code>Workflow Permissions</code>.</li>
<li>NOTE: Without workflow permissions enabled, the publishing action will fail.</li>
</ul>
<h2 id="publishing"><a class="header" href="#publishing">Publishing</a></h2>
<ul>
<li>Select the branch <code>gh-pages</code> <code>/(root)</code> from the repository settings.</li>
<li>The publishing action is defined in <code>.github/workflows/deploy.yml</code>.</li>
<li>This action uses the <code>peaceiris/actions-mdbook</code> action to build and publish the book.</li>
<li>The <code>publish_dir</code> is the directory that the action will publish. In this case, it is the <code>book</code> directory.</li>
<li>The <code>github_token</code> is a token that the action will use to push the changes to the repository.</li>
<li>The <code>GITHUB_TOKEN</code> is automatically created by Github when the repository is created.</li>
<li>The <code>GITHUB_TOKEN</code> has the <code>contents</code> permission, which is required by the action.</li>
<li>Add custom domain in the repository settings.
<ul>
<li>CNAME file in the root of the repository in gh-pages branch. if not present, the site will not be accessible via the custom domain.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="programming-languages"><a class="header" href="#programming-languages">Programming Languages</a></h1>
<p>This section contains references and guides for various programming languages.</p>
<h2 id="available-languages"><a class="header" href="#available-languages">Available Languages</a></h2>
<ul>
<li><a href="programming/python.html">Python</a> - A high-level, interpreted programming language</li>
<li><a href="programming/c.html">C</a> - A general-purpose, procedural programming language</li>
<li><a href="programming/cpp.html">C++</a> - An extension of C with object-oriented features</li>
<li><a href="programming/javascript.html">JavaScript</a> - A scripting language for web development</li>
<li><a href="programming/bash.html">Bash</a> - A Unix shell and command language</li>
<li><a href="programming/java.html">Java</a> - A class-based, object-oriented programming language</li>
<li><a href="programming/rust.html">Rust</a> - A systems programming language focused on safety and performance</li>
<li><a href="programming/sql.html">SQL</a> - A domain-specific language for managing databases</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="python"><a class="header" href="#python">Python</a></h1>
<h2 id="basic-syntax-examples"><a class="header" href="#basic-syntax-examples">Basic Syntax Examples</a></h2>
<h3 id="print"><a class="header" href="#print">Print</a></h3>
<pre><code class="language-python">print("Hello, World!")
</code></pre>
<h3 id="lists"><a class="header" href="#lists">Lists</a></h3>
<pre><code class="language-python">my_list = [1, 2, 3, 4, 5]
print(my_list)
print(len(my_list))

my_list.append(6)
print(my_list)
</code></pre>
<pre><code>- Lists are mutable
- Lists are ordered
- Lists can contain duplicates
- Lists can be nested
- Lists are dynamic
</code></pre>
<h3 id="tuples"><a class="header" href="#tuples">Tuples</a></h3>
<pre><code class="language-python">my_tuple = (1, 2, 3, 4, 5)
print(my_tuple)
</code></pre>
<p>Here's a practical approach using pandas (which is great for handling Excel files) and dataclasses for clean class definition.</p>
<pre><code class="language-python">from dataclasses import dataclass
import pandas as pd
from typing import List

@dataclass
class Person:
    name: str
    age: int
    email: str

def load_people_from_excel(file_path: str) -&gt; List[Person]:
    # Read Excel file
    df = pd.read_excel(file_path)
    
    # Convert DataFrame rows to Person objects
    people = [
        Person(
            name=row['name'],
            age=row['age'],
            email=row['email']
        ) for _, row in df.iterrows()
    ]
    
    return people

# Usage example
if __name__ == "__main__":
    # Assuming your Excel file has columns: name, age, email
    people = load_people_from_excel("your_file.xlsx")
    
    # Access the data
    for person in people:
        print(f"{person.name} is {person.age} years old")
</code></pre>
<p>This solution offers several benefits:
Type Safety: Using @dataclass and type hints makes the code more maintainable and helps catch errors early
Clean Mapping: The mapping between Excel columns and class members is explicit and easy to understand
Easy to Extend: You can easily add more fields to the class and corresponding Excel columns
Alternative approach if you need more control over the mapping:</p>
<pre><code class="language-python">class Person:
    def __init__(self, name: str, age: int, email: str):
        self.name = name
        self.age = age
        self.email = email
    
    @classmethod
    def from_excel_row(cls, row):
        # Custom mapping logic here
        return cls(
            name=row['name'].strip(),  # Add data cleaning
            age=int(row['age']),       # Type conversion
            email=row['email'].lower() # Data normalization
        )

def load_people_from_excel(file_path: str) -&gt; List[Person]:
    df = pd.read_excel(file_path)
    return [Person.from_excel_row(row) for _, row in df.iterrows()]
</code></pre>
<p>If your Excel columns have different names than your class members, you can add a mapping dictionary:</p>
<pre><code class="language-python">EXCEL_TO_CLASS_MAPPING = {
    'Full Name': 'name',
    'Person Age': 'age',
    'E-mail Address': 'email'
}

def load_people_from_excel(file_path: str) -&gt; List[Person]:
    df = pd.read_excel(file_path)
    # Rename columns according to mapping
    df = df.rename(columns=EXCEL_TO_CLASS_MAPPING)
    return [Person.from_excel_row(row) for _, row in df.iterrows()]
</code></pre>
<p>Here are a few more patterns for mapping Excel data to class members:
Factory Pattern with Schema Validation:</p>
<pre><code class="language-python">from pydantic import BaseModel
from typing import Dict, Any

class PersonSchema(BaseModel):
    name: str
    age: int
    email: str
    
    class Config:
        extra = "forbid"  # Prevents additional fields

class PersonFactory:
    @staticmethod
    def create_from_row(row: Dict[str, Any]) -&gt; 'Person':
        # Validate data using schema
        validated_data = PersonSchema(**row).dict()
        return Person(**validated_data)

def load_people_from_excel(file_path: str) -&gt; List[Person]:
    df = pd.read_excel(file_path)
    return [PersonFactory.create_from_row(row) for _, row in df.iterrows()]
    
</code></pre>
<p>Builder Pattern (useful for complex object construction):</p>
<pre><code class="language-python">class PersonBuilder:
    def __init__(self):
        self.reset()
    
    def reset(self):
        self._person = Person()
        return self
    
    def set_name(self, name: str):
        self._person.name = name.strip()
        return self
    
    def set_age(self, age: int):
        self._person.age = int(age)
        return self
    
    def set_email(self, email: str):
        self._person.email = email.lower()
        return self
    
    def build(self) -&gt; Person:
        person = self._person
        self.reset()
        return person

def load_people_from_excel(file_path: str) -&gt; List[Person]:
    df = pd.read_excel(file_path)
    builder = PersonBuilder()
    
    return [
        builder
            .set_name(row['name'])
            .set_age(row['age'])
            .set_email(row['email'])
            .build()
        for _, row in df.iterrows()
    ]
</code></pre>
<p>Serializer Pattern (similar to Django/REST framework approach):</p>
<pre><code class="language-python">class PersonSerializer:
    @staticmethod
    def validate_age(age: int) -&gt; int:
        if not isinstance(age, (int, float)) or age &lt; 0:
            raise ValueError("Age must be a positive number")
        return int(age)
    
    @staticmethod
    def validate_email(email: str) -&gt; str:
        email = email.lower().strip()
        if '@' not in email:
            raise ValueError("Invalid email format")
        return email
    
    @classmethod
    def from_excel(cls, data: Dict[str, Any]) -&gt; Person:
        return Person(
            name=data['name'].strip(),
            age=cls.validate_age(data['age']),
            email=cls.validate_email(data['email'])
        )

def load_people_from_excel(file_path: str) -&gt; List[Person]:
    df = pd.read_excel(file_path)
    return [PersonSerializer.from_excel(row) for _, row in df.iterrows()]    
</code></pre>
<p>Descriptor Pattern (for automatic data validation):</p>
<pre><code class="language-python">class ValidatedField:
    def __init__(self, field_type, validator=None):
        self.field_type = field_type
        self.validator = validator
        self.name = None

    def __set_name__(self, owner, name):
        self.name = name

    def __get__(self, instance, owner):
        if instance is None:
            return self
        return instance.__dict__[self.name]

    def __set__(self, instance, value):
        value = self.field_type(value)
        if self.validator:
            value = self.validator(value)
        instance.__dict__[self.name] = value

class Person:
    name = ValidatedField(str, lambda x: x.strip())
    age = ValidatedField(int, lambda x: x if x &gt;= 0 else ValueError("Age must be positive"))
    email = ValidatedField(str, lambda x: x.lower())

    def __init__(self, name, age, email):
        self.name = name
        self.age = age
        self.email = email
</code></pre>
<p>Strategy Pattern (for different data sources):</p>
<pre><code class="language-python">from abc import ABC, abstractmethod

class DataLoader(ABC):
    @abstractmethod
    def load_data(self, source: str) -&gt; List[Person]:
        pass

class ExcelDataLoader(DataLoader):
    def load_data(self, source: str) -&gt; List[Person]:
        df = pd.read_excel(source)
        return [Person(**row) for _, row in df.iterrows()]

class CSVDataLoader(DataLoader):
    def load_data(self, source: str) -&gt; List[Person]:
        df = pd.read_csv(source)
        return [Person(**row) for _, row in df.iterrows()]

# Usage
loader = ExcelDataLoader()
people = loader.load_data("data.xlsx")
</code></pre>
<p>Each pattern has its use cases:
Use Factory when you need centralized object creation with validation
Use Builder for complex objects with many optional parameters
Use Serializer when you need strong data validation and transformation
Use Descriptor for automatic attribute-level validation
Use Strategy when you need to support multiple data sources</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="c-programming"><a class="header" href="#c-programming">C Programming</a></h1>
<h2 id="difference-between-different-const-pointers"><a class="header" href="#difference-between-different-const-pointers">Difference Between Different Const Pointers</a></h2>
<p>In C programming, pointers can be declared with the <code>const</code> qualifier in different ways, leading to different types of constant pointers. Understanding these differences is crucial for writing correct and efficient code.</p>
<ol>
<li>
<p><strong>Pointer to a Constant Variable:</strong>
A pointer to a constant variable means that the value being pointed to cannot be changed through the pointer, but the pointer itself can be changed to point to another variable.</p>
<pre><code class="language-c">const int *ptr;
int a = 10;
int b = 20;
ptr = &amp;a; // Valid
*ptr = 30; // Invalid, cannot change the value of 'a' through ptr
ptr = &amp;b; // Valid, can change the pointer to point to 'b'
</code></pre>
</li>
<li>
<p><strong>Constant Pointer to a Variable:</strong>
A constant pointer to a variable means that the pointer itself cannot be changed to point to another variable, but the value being pointed to can be changed.</p>
<pre><code class="language-c">int *const ptr = &amp;a;
int a = 10;
int b = 20;
ptr = &amp;b; // Invalid, cannot change the pointer to point to 'b'
*ptr = 30; // Valid, can change the value of 'a' through ptr
</code></pre>
</li>
<li>
<p><strong>Constant Pointer to a Constant Variable:</strong>
A constant pointer to a constant variable means that neither the pointer can be changed to point to another variable nor the value being pointed to can be changed.</p>
<pre><code class="language-c">const int *const ptr = &amp;a;
int a = 10;
int b = 20;
ptr = &amp;b; // Invalid, cannot change the pointer to point to 'b'
*ptr = 30; // Invalid, cannot change the value of 'a' through ptr
</code></pre>
</li>
</ol>
<p>These different types of constant pointers provide various levels of protection and control over the data and pointers in your program, helping to prevent unintended modifications and ensuring code reliability.</p>
<h2 id="dynamic-memory-allocation"><a class="header" href="#dynamic-memory-allocation">Dynamic Memory Allocation</a></h2>
<p>Dynamic memory allocation allows you to allocate memory at runtime instead of compile time. This is essential for creating data structures of variable size.</p>
<h3 id="memory-layout"><a class="header" href="#memory-layout">Memory Layout</a></h3>
<pre><code>Stack (grows down)   |  Local variables, function parameters
                     |
                     V
=====================|======================  &lt;- Stack limit
                     ^
                     |
                     |  Free memory
                     |
                     V
=====================|======================  &lt;- Heap limit
Heap (grows up)      |  malloc, calloc, realloc allocations
                     ^
</code></pre>
<h3 id="malloc---memory-allocation"><a class="header" href="#malloc---memory-allocation">malloc() - Memory Allocation</a></h3>
<p>Allocates memory and returns a void pointer:</p>
<pre><code class="language-c">#include &lt;stdlib.h&gt;

// Allocate memory for single integer
int *ptr = (int *)malloc(sizeof(int));
if (ptr == NULL) {
    printf("Memory allocation failed\n");
    return 1;
}
*ptr = 42;
printf("Value: %d\n", *ptr);
free(ptr);
ptr = NULL;  // Good practice: set to NULL after free

// Allocate memory for array
int *arr = (int *)malloc(10 * sizeof(int));
if (arr == NULL) {
    printf("Memory allocation failed\n");
    return 1;
}
arr[0] = 100;
arr[9] = 999;
free(arr);
arr = NULL;
</code></pre>
<h3 id="calloc---contiguous-memory-allocation"><a class="header" href="#calloc---contiguous-memory-allocation">calloc() - Contiguous Memory Allocation</a></h3>
<p>Allocates memory and initializes all bytes to zero:</p>
<pre><code class="language-c">#include &lt;stdlib.h&gt;

// calloc(number_of_elements, size_of_each_element)
int *arr = (int *)calloc(10, sizeof(int));  // 10 integers, all initialized to 0
if (arr == NULL) {
    printf("Memory allocation failed\n");
    return 1;
}

for (int i = 0; i &lt; 10; i++) {
    printf("%d ", arr[i]);  // Prints: 0 0 0 0 0 0 0 0 0 0
}

free(arr);
arr = NULL;
</code></pre>
<h3 id="realloc---resize-memory"><a class="header" href="#realloc---resize-memory">realloc() - Resize Memory</a></h3>
<p>Resizes previously allocated memory block:</p>
<pre><code class="language-c">#include &lt;stdlib.h&gt;

int *arr = (int *)malloc(5 * sizeof(int));
for (int i = 0; i &lt; 5; i++) arr[i] = i;

// Resize to 10 integers
int *new_arr = (int *)realloc(arr, 10 * sizeof(int));
if (new_arr == NULL) {
    printf("Reallocation failed\n");
    free(arr);  // Original block still exists
    return 1;
}

arr = new_arr;
for (int i = 5; i &lt; 10; i++) arr[i] = i;

free(arr);
arr = NULL;
</code></pre>
<h3 id="free---deallocate-memory"><a class="header" href="#free---deallocate-memory">free() - Deallocate Memory</a></h3>
<p>Deallocates previously allocated memory:</p>
<pre><code class="language-c">#include &lt;stdlib.h&gt;

int *ptr = (int *)malloc(sizeof(int));
*ptr = 42;

// When done, free the memory
free(ptr);

// IMPORTANT: Set to NULL to avoid dangling pointer
ptr = NULL;
</code></pre>
<h3 id="memory-allocation-pattern-safe"><a class="header" href="#memory-allocation-pattern-safe">Memory Allocation Pattern (Safe)</a></h3>
<pre><code class="language-c">#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

int main(void) {
    // 1. Declare pointer
    int *ptr;

    // 2. Allocate memory with error checking
    ptr = (int *)malloc(sizeof(int));
    if (ptr == NULL) {
        fprintf(stderr, "Memory allocation failed\n");
        return 1;
    }

    // 3. Use the memory
    *ptr = 100;
    printf("Value: %d\n", *ptr);

    // 4. Free the memory
    free(ptr);

    // 5. Set to NULL (avoid dangling pointer)
    ptr = NULL;

    return 0;
}
</code></pre>
<h3 id="dynamic-array-implementation"><a class="header" href="#dynamic-array-implementation">Dynamic Array Implementation</a></h3>
<pre><code class="language-c">#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

typedef struct {
    int *data;
    int size;
    int capacity;
} DynamicArray;

// Create dynamic array
DynamicArray* array_create(int initial_capacity) {
    DynamicArray *arr = (DynamicArray *)malloc(sizeof(DynamicArray));
    if (arr == NULL) return NULL;

    arr-&gt;data = (int *)malloc(initial_capacity * sizeof(int));
    if (arr-&gt;data == NULL) {
        free(arr);
        return NULL;
    }

    arr-&gt;size = 0;
    arr-&gt;capacity = initial_capacity;
    return arr;
}

// Add element to array
int array_push(DynamicArray *arr, int value) {
    if (arr-&gt;size == arr-&gt;capacity) {
        // Resize: double the capacity
        int new_capacity = arr-&gt;capacity * 2;
        int *new_data = (int *)realloc(arr-&gt;data, new_capacity * sizeof(int));
        if (new_data == NULL) return -1;

        arr-&gt;data = new_data;
        arr-&gt;capacity = new_capacity;
    }

    arr-&gt;data[arr-&gt;size++] = value;
    return 0;
}

// Get element from array
int array_get(DynamicArray *arr, int index) {
    if (index &lt; 0 || index &gt;= arr-&gt;size) {
        fprintf(stderr, "Index out of bounds\n");
        return -1;
    }
    return arr-&gt;data[index];
}

// Free array
void array_free(DynamicArray *arr) {
    if (arr == NULL) return;
    free(arr-&gt;data);
    free(arr);
}

// Usage
int main(void) {
    DynamicArray *arr = array_create(10);
    if (arr == NULL) {
        fprintf(stderr, "Failed to create array\n");
        return 1;
    }

    for (int i = 0; i &lt; 20; i++) {
        array_push(arr, i * 10);
    }

    for (int i = 0; i &lt; arr-&gt;size; i++) {
        printf("%d ", array_get(arr, i));
    }

    array_free(arr);
    return 0;
}
</code></pre>
<h3 id="common-memory-errors"><a class="header" href="#common-memory-errors">Common Memory Errors</a></h3>
<h4 id="1-memory-leak-forgot-to-free"><a class="header" href="#1-memory-leak-forgot-to-free">1. Memory Leak (forgot to free)</a></h4>
<pre><code class="language-c">void memory_leak(void) {
    int *ptr = (int *)malloc(sizeof(int));
    *ptr = 42;
    // Missing: free(ptr);
    // Memory is lost when function exits
}
</code></pre>
<h4 id="2-double-free"><a class="header" href="#2-double-free">2. Double Free</a></h4>
<pre><code class="language-c">int *ptr = (int *)malloc(sizeof(int));
free(ptr);
free(ptr);  // ERROR: Undefined behavior!
</code></pre>
<h4 id="3-use-after-free-dangling-pointer"><a class="header" href="#3-use-after-free-dangling-pointer">3. Use After Free (Dangling Pointer)</a></h4>
<pre><code class="language-c">int *ptr = (int *)malloc(sizeof(int));
*ptr = 42;
free(ptr);
printf("%d\n", *ptr);  // ERROR: ptr points to freed memory!
ptr = NULL;  // Should do this after free
</code></pre>
<h4 id="4-buffer-overflow"><a class="header" href="#4-buffer-overflow">4. Buffer Overflow</a></h4>
<pre><code class="language-c">char *str = (char *)malloc(5);
strcpy(str, "Hello World");  // ERROR: Buffer overflow!
                             // "Hello World" needs 12 bytes, only allocated 5
free(str);
</code></pre>
<h4 id="5-null-pointer-dereference"><a class="header" href="#5-null-pointer-dereference">5. Null Pointer Dereference</a></h4>
<pre><code class="language-c">int *ptr = (int *)malloc(sizeof(int));
// Allocation failed
if (ptr == NULL) {
    *ptr = 42;  // ERROR: Dereferencing NULL!
}
</code></pre>
<h3 id="best-practices-for-dynamic-memory"><a class="header" href="#best-practices-for-dynamic-memory">Best Practices for Dynamic Memory</a></h3>
<pre><code class="language-c">// 1. Always check if malloc/calloc/realloc succeeded
int *ptr = (int *)malloc(sizeof(int));
if (ptr == NULL) {
    // Handle error
    return -1;
}

// 2. Use sizeof for type safety
int *arr = (int *)malloc(100 * sizeof(int));  // Good
int *arr = (int *)malloc(100 * 4);            // Avoid - hardcoded size

// 3. Free in reverse order of allocation
void *p1 = malloc(100);
void *p2 = malloc(200);
void *p3 = malloc(300);

free(p3);
free(p2);
free(p1);

// 4. Set pointer to NULL after free
free(ptr);
ptr = NULL;

// 5. Avoid memory leaks - create cleanup paths
FILE *file = fopen("data.txt", "r");
int *data = (int *)malloc(1000 * sizeof(int));

if (file == NULL) {
    free(data);  // Clean up before returning
    return -1;
}

// Process file
if (some_error) {
    fclose(file);
    free(data);  // Clean up before returning
    return -1;
}

fclose(file);
free(data);
return 0;

// 6. Use wrapper functions for consistency
void* safe_malloc(size_t size) {
    void *ptr = malloc(size);
    if (ptr == NULL) {
        fprintf(stderr, "malloc failed: requested %zu bytes\n", size);
        exit(1);  // Or handle error differently
    }
    return ptr;
}

int *arr = (int *)safe_malloc(100 * sizeof(int));
</code></pre>
<h3 id="memory-leak-detection-tools"><a class="header" href="#memory-leak-detection-tools">Memory Leak Detection Tools</a></h3>
<pre><code class="language-bash"># Valgrind - memory error detector
valgrind --leak-check=full --show-leak-kinds=all ./program

# AddressSanitizer (GCC/Clang)
gcc -fsanitize=address -g program.c -o program
./program

# Dr. Memory (Windows)
drmemory -leaks_only -- program.exe
</code></pre>
<h3 id="comparison-of-allocation-functions"><a class="header" href="#comparison-of-allocation-functions">Comparison of Allocation Functions</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Function</th><th>Initialization</th><th>Returns NULL on Fail</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>malloc</strong></td><td>No (garbage values)</td><td>Yes</td><td>When you'll initialize manually</td></tr>
<tr><td><strong>calloc</strong></td><td>Yes (all zeros)</td><td>Yes</td><td>When you need zeroed memory</td></tr>
<tr><td><strong>realloc</strong></td><td>Preserves existing</td><td>Yes</td><td>When resizing allocations</td></tr>
</tbody></table>
</div>
<h3 id="memory-allocation-time-complexity"><a class="header" href="#memory-allocation-time-complexity">Memory Allocation Time Complexity</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time Complexity</th><th>Space Complexity</th></tr></thead><tbody>
<tr><td><strong>malloc/calloc</strong></td><td>O(1) amortized</td><td>O(1)</td></tr>
<tr><td><strong>free</strong></td><td>O(1) amortized</td><td>O(1)</td></tr>
<tr><td><strong>realloc</strong></td><td>O(n)</td><td>O(n)</td></tr>
</tbody></table>
</div>
<h2 id="commonly-used-string-library-functions"><a class="header" href="#commonly-used-string-library-functions">Commonly Used String Library Functions</a></h2>
<p>The C standard library provides a set of functions for manipulating strings. Here are some commonly used string functions:</p>
<ol>
<li>
<p><strong>strlen</strong> - Calculate the length of a string:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
size_t length = strlen("example");
</code></pre>
</li>
<li>
<p><strong>strcpy</strong> - Copy a string:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char dest[20];
strcpy(dest, "source");
</code></pre>
</li>
<li>
<p><strong>strncpy</strong> - Copy a specified number of characters from a string:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char dest[20];
strncpy(dest, "source", 5);
</code></pre>
</li>
<li>
<p><strong>strcat</strong> - Concatenate two strings:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char dest[20] = "Hello, ";
strcat(dest, "World!");
</code></pre>
</li>
<li>
<p><strong>strncat</strong> - Concatenate a specified number of characters from one string to another:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char dest[20] = "Hello, ";
strncat(dest, "World!", 3);
</code></pre>
</li>
<li>
<p><strong>strcmp</strong> - Compare two strings:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
int result = strcmp("string1", "string2");
</code></pre>
</li>
<li>
<p><strong>strncmp</strong> - Compare a specified number of characters from two strings:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
int result = strncmp("string1", "string2", 5);
</code></pre>
</li>
<li>
<p><strong>strchr</strong> - Find the first occurrence of a character in a string:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char *ptr = strchr("example", 'a');
</code></pre>
</li>
<li>
<p><strong>strrchr</strong> - Find the last occurrence of a character in a string:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char *ptr = strrchr("example", 'e');
</code></pre>
</li>
<li>
<p><strong>strstr</strong> - Find the first occurrence of a substring in a string:</p>
<pre><code class="language-c">#include &lt;string.h&gt;
char *ptr = strstr("example", "amp");
</code></pre>
</li>
</ol>
<p>These functions cover a variety of common use cases for string manipulation in C, making them essential tools for C programmers.</p>
<h3 id="variants-of-printf-and-scanf"><a class="header" href="#variants-of-printf-and-scanf">Variants of <code>printf</code> and <code>scanf</code></a></h3>
<p>The <code>printf</code> and <code>scanf</code> functions are commonly used for input and output in C. There are several variants of these functions that provide additional functionality.</p>
<h4 id="printf-variants"><a class="header" href="#printf-variants"><code>printf</code> Variants</a></h4>
<ol>
<li>
<p><strong><code>printf</code></strong> - Print formatted output to the standard output:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
printf("Hello, %s!\n", "World");
</code></pre>
</li>
<li>
<p><strong><code>fprintf</code></strong> - Print formatted output to a file:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
FILE *file = fopen("output.txt", "w");
fprintf(file, "Hello, %s!\n", "World");
fclose(file);
</code></pre>
</li>
<li>
<p><strong><code>sprintf</code></strong> - Print formatted output to a string:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
char buffer[50];
sprintf(buffer, "Hello, %s!", "World");
</code></pre>
</li>
<li>
<p><strong><code>snprintf</code></strong> - Print formatted output to a string with a limit on the number of characters:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
char buffer[50];
snprintf(buffer, sizeof(buffer), "Hello, %s!", "World");
</code></pre>
</li>
<li>
<p><strong><code>vprintf</code></strong> - Print formatted output using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vprintf(const char *format, ...) {
    va_list args;
    va_start(args, format);
    vprintf(format, args);
    va_end(args);
}
</code></pre>
</li>
<li>
<p><strong><code>vfprintf</code></strong> - Print formatted output to a file using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vfprintf(FILE *file, const char *format, ...) {
    va_list args;
    va_start(args, format);
    vfprintf(file, format, args);
    va_end(args);
}
</code></pre>
</li>
<li>
<p><strong><code>vsprintf</code></strong> - Print formatted output to a string using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vsprintf(char *buffer, const char *format, ...) {
    va_list args;
    va_start(args, format);
    vsprintf(buffer, format, args);
    va_end(args);
}
</code></pre>
</li>
<li>
<p><strong><code>vsnprintf</code></strong> - Print formatted output to a string with a limit on the number of characters using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vsnprintf(char *buffer, size_t size, const char *format, ...) {
    va_list args;
    va_start(args, format);
    vsnprintf(buffer, size, format, args);
    va_end(args);
}
</code></pre>
</li>
</ol>
<h4 id="scanf-variants"><a class="header" href="#scanf-variants"><code>scanf</code> Variants</a></h4>
<ol>
<li>
<p><strong><code>scanf</code></strong> - Read formatted input from the standard input:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
int value;
scanf("%d", &amp;value);
</code></pre>
</li>
<li>
<p><strong><code>fscanf</code></strong> - Read formatted input from a file:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
FILE *file = fopen("input.txt", "r");
int value;
fscanf(file, "%d", &amp;value);
fclose(file);
</code></pre>
</li>
<li>
<p><strong><code>sscanf</code></strong> - Read formatted input from a string:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
const char *str = "123";
int value;
sscanf(str, "%d", &amp;value);
</code></pre>
</li>
<li>
<p><strong><code>vscanf</code></strong> - Read formatted input using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vscanf(const char *format, ...) {
    va_list args;
    va_start(args, format);
    vscanf(format, args);
    va_end(args);
}
</code></pre>
</li>
<li>
<p><strong><code>vfscanf</code></strong> - Read formatted input from a file using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vfscanf(FILE *file, const char *format, ...) {
    va_list args;
    va_start(args, format);
    vfscanf(file, format, args);
    va_end(args);
}
</code></pre>
</li>
<li>
<p><strong><code>vsscanf</code></strong> - Read formatted input from a string using a <code>va_list</code>:</p>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdarg.h&gt;
void my_vsscanf(const char *str, const char *format, ...) {
    va_list args;
    va_start(args, format);
    vsscanf(str, format, args);
    va_end(args);
}
</code></pre>
</li>
</ol>
<p>These variants of <code>printf</code> and <code>scanf</code> provide flexibility for different input and output scenarios in C programming.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="c"><a class="header" href="#c">C++</a></h1>
<h2 id="overview-1"><a class="header" href="#overview-1">Overview</a></h2>
<p>C++ is an extension of C that adds object-oriented features and other enhancements.</p>
<h2 id="key-features"><a class="header" href="#key-features">Key Features</a></h2>
<ul>
<li>Object-oriented programming</li>
<li>Generic programming support</li>
<li>Standard Template Library (STL)</li>
<li>Low-level memory manipulation</li>
<li>High performance</li>
</ul>
<h2 id="c-strings-and-their-methods"><a class="header" href="#c-strings-and-their-methods">C++ Strings and Their Methods</a></h2>
<p>In C++, the <code>std::string</code> class provides a powerful and flexible way to handle strings. It offers a variety of methods for string manipulation, making it easier to perform common operations without dealing with low-level character arrays. Below are some of the most commonly used <code>std::string</code> methods in detail:</p>
<h3 id="1-constructors"><a class="header" href="#1-constructors">1. <strong>Constructors</strong></a></h3>
<p><code>std::string</code> offers multiple constructors to initialize strings in different ways.</p>
<pre><code class="language-cpp">#include &lt;string&gt;

// Default constructor
std::string str1;

// Constructor with a C-string
std::string str2("Hello, World!");

// Constructor with a specific number of repeated characters
std::string str3(5, 'a'); // "aaaaa"

// Copy constructor
std::string str4(str2);

// Substring constructor
std::string str5(str2, 7, 5); // "World"
</code></pre>
<h3 id="2-size-and-capacity"><a class="header" href="#2-size-and-capacity">2. <strong>Size and Capacity</strong></a></h3>
<ul>
<li><code>size()</code> / <code>length()</code>: Returns the number of characters in the string.</li>
<li><code>capacity()</code>: Returns the size of the storage space currently allocated for the string.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Example";
size_t len = str.size(); // 7
size_t cap = str.capacity(); // Implementation-defined
</code></pre>
<h3 id="3-accessing-characters"><a class="header" href="#3-accessing-characters">3. <strong>Accessing Characters</strong></a></h3>
<ul>
<li><code>operator[]</code>: Accesses character at a specific index.</li>
<li><code>at()</code>: Accesses character at a specific index with bounds checking.</li>
<li><code>front()</code> / <code>back()</code>: Accesses the first and last characters.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello";
char ch = str[1]; // 'e'
char ch_at = str.at(2); // 'l'
char first = str.front(); // 'H'
char last = str.back(); // 'o'
</code></pre>
<h3 id="4-modifiers"><a class="header" href="#4-modifiers">4. <strong>Modifiers</strong></a></h3>
<ul>
<li><code>append()</code>: Adds characters to the end of the string.</li>
<li><code>clear()</code>: Removes all characters from the string.</li>
<li><code>insert()</code>: Inserts characters at a specified position.</li>
<li><code>erase()</code>: Removes characters from a specified position.</li>
<li><code>replace()</code>: Replaces part of the string with another string.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello";
str.append(", World!"); // "Hello, World!"
str.insert(5, " C++"); // "Hello C++, World!"
str.erase(5, 6); // "HelloWorld!"
str.replace(5, 5, " C++"); // "Hello C++!"
str.clear(); // ""
</code></pre>
<h3 id="5-substring-and-extracting"><a class="header" href="#5-substring-and-extracting">5. <strong>Substring and Extracting</strong></a></h3>
<ul>
<li><code>substr()</code>: Returns a substring starting from a specified position.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello, World!";
std::string sub = str.substr(7, 5); // "World"
</code></pre>
<h3 id="6-finding-characters-and-substrings"><a class="header" href="#6-finding-characters-and-substrings">6. <strong>Finding Characters and Substrings</strong></a></h3>
<ul>
<li><code>find()</code>: Searches for a substring or character and returns the position.</li>
<li><code>rfind()</code>: Searches for a substring or character from the end.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello, World!";
size_t pos = str.find("World"); // 7
size_t rpos = str.rfind('o'); // 8
</code></pre>
<h3 id="7-comparison"><a class="header" href="#7-comparison">7. <strong>Comparison</strong></a></h3>
<ul>
<li><code>compare()</code>: Compares two strings.</li>
</ul>
<pre><code class="language-cpp">std::string str1 = "apple";
std::string str2 = "banana";

int result = str1.compare(str2);
// result &lt; 0 since "apple" &lt; "banana"
</code></pre>
<h3 id="8-conversion-to-c-string"><a class="header" href="#8-conversion-to-c-string">8. <strong>Conversion to C-string</strong></a></h3>
<ul>
<li><code>c_str()</code>: Returns a C-style null-terminated string.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello";
const char* cstr = str.c_str();
</code></pre>
<h3 id="9-iterators"><a class="header" href="#9-iterators">9. <strong>Iterators</strong></a></h3>
<p><code>std::string</code> supports iterators to traverse the string.</p>
<pre><code class="language-cpp">std::string str = "Hello";
for (std::string::iterator it = str.begin(); it != str.end(); ++it) {
    std::cout &lt;&lt; *it &lt;&lt; ' ';
}
// Output: H e l l o 
</code></pre>
<h3 id="10-emplace-and-emplace_back"><a class="header" href="#10-emplace-and-emplace_back">10. <strong>Emplace and Emplace_back</strong></a></h3>
<ul>
<li><code>emplace()</code>: Constructs and inserts a substring.</li>
<li><code>emplace_back()</code>: Appends a character to the end of the string.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello";
str.emplace(str.size(), '!'); // "Hello!"
str.emplace_back('?'); // "Hello!?"
</code></pre>
<h3 id="11-swap"><a class="header" href="#11-swap">11. <strong>Swap</strong></a></h3>
<ul>
<li><code>swap()</code>: Swaps the contents of two strings.</li>
</ul>
<pre><code class="language-cpp">std::string str1 = "Hello";
std::string str2 = "World";
str1.swap(str2);
// str1 is now "World", str2 is now "Hello"
</code></pre>
<h3 id="12-transform"><a class="header" href="#12-transform">12. <strong>Transform</strong></a></h3>
<p>You can apply transformations to each character using algorithms.</p>
<pre><code class="language-cpp">#include &lt;algorithm&gt;

std::string str = "Hello";
std::transform(str.begin(), str.end(), str.begin(), ::toupper); // "HELLO"
</code></pre>
<h3 id="13-other-useful-methods"><a class="header" href="#13-other-useful-methods">13. <strong>Other Useful Methods</strong></a></h3>
<ul>
<li><code>empty()</code>: Checks if the string is empty.</li>
<li><code>find_first_of()</code> / <code>find_last_of()</code>: Finds the first/last occurrence of any character from a set.</li>
<li><code>find_first_not_of()</code> / <code>find_last_not_of()</code>: Finds the first/last character not in a set.</li>
</ul>
<pre><code class="language-cpp">std::string str = "Hello";
bool isEmpty = str.empty(); // false
size_t pos = str.find_first_of('e'); // 1
size_t not_pos = str.find_first_not_of('H'); // 1
</code></pre>
<h3 id="example-usage"><a class="header" href="#example-usage">Example Usage</a></h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;string&gt;

int main() {
    std::string greeting = "Hello";
    greeting += ", World!"; // Using operator +=
    
    std::cout &lt;&lt; greeting &lt;&lt; std::endl; // Output: Hello, World!
    
    // Find and replace
    size_t pos = greeting.find("World");
    if (pos != std::string::npos) {
        greeting.replace(pos, 5, "C++");
    }
    
    std::cout &lt;&lt; greeting &lt;&lt; std::endl; // Output: Hello, C++!
    
    return 0;
}
</code></pre>
<p>Understanding and utilizing these <code>std::string</code> methods can greatly enhance your ability to manipulate and manage text in C++ applications effectively.</p>
<h2 id="c-vectors-and-their-methods"><a class="header" href="#c-vectors-and-their-methods">C++ Vectors and Their Methods</a></h2>
<p>In C++, the <code>std::vector</code> class template provides a dynamic array that can resize itself automatically when elements are added or removed. It offers numerous methods to manipulate the data efficiently. Below are detailed explanations and examples of various <code>std::vector</code> methods:</p>
<h3 id="1-constructors-1"><a class="header" href="#1-constructors-1">1. <strong>Constructors</strong></a></h3>
<p><code>std::vector</code> offers multiple constructors to initialize vectors in different ways.</p>
<pre><code class="language-cpp">#include &lt;vector&gt;

// Default constructor
std::vector&lt;int&gt; vec1;

// Constructor with a specific size
std::vector&lt;int&gt; vec2(5); // {0, 0, 0, 0, 0}

// Constructor with a specific size and initial value
std::vector&lt;int&gt; vec3(5, 10); // {10, 10, 10, 10, 10}

// Initializer list constructor
std::vector&lt;int&gt; vec4 = {1, 2, 3, 4, 5};

// Copy constructor
std::vector&lt;int&gt; vec5(vec4);
</code></pre>
<h3 id="2-size-and-capacity-1"><a class="header" href="#2-size-and-capacity-1">2. <strong>Size and Capacity</strong></a></h3>
<ul>
<li><code>size()</code>: Returns the number of elements in the vector.</li>
<li><code>capacity()</code>: Returns the size of the storage space currently allocated for the vector, expressed in terms of elements.</li>
<li><code>empty()</code>: Checks whether the vector is empty.</li>
</ul>
<pre><code class="language-cpp">std::vector&lt;int&gt; vec = {1, 2, 3};
size_t sz = vec.size(); // 3
size_t cap = vec.capacity(); // &gt;= 3
bool isEmpty = vec.empty(); // false
</code></pre>
<h3 id="3-element-access"><a class="header" href="#3-element-access">3. <strong>Element Access</strong></a></h3>
<ul>
<li><code>operator[]</code>: Accesses element at a specific index without bounds checking.</li>
<li><code>at()</code>: Accesses element at a specific index with bounds checking.</li>
<li><code>front()</code>: Accesses the first element.</li>
<li><code>back()</code>: Accesses the last element.</li>
<li><code>data()</code>: Returns a pointer to the underlying array.</li>
</ul>
<pre><code class="language-cpp">std::vector&lt;int&gt; vec = {10, 20, 30, 40, 50};
int first = vec[0]; // 10
int third = vec.at(2); // 30
int front = vec.front(); // 10
int back = vec.back(); // 50
int* ptr = vec.data(); // Pointer to the first element
</code></pre>
<h3 id="4-modifiers-1"><a class="header" href="#4-modifiers-1">4. <strong>Modifiers</strong></a></h3>
<ul>
<li><code>push_back()</code>: Adds an element to the end of the vector.</li>
<li><code>pop_back()</code>: Removes the last element of the vector.</li>
<li><code>insert()</code>: Inserts elements at a specified position.</li>
<li><code>erase()</code>: Removes elements from a specified position or range.</li>
<li><code>clear()</code>: Removes all elements from the vector.</li>
<li><code>resize()</code>: Changes the number of elements stored.</li>
<li><code>shrink_to_fit()</code>: Reduces capacity to fit the size.</li>
</ul>
<pre><code class="language-cpp">std::vector&lt;int&gt; vec = {1, 2, 3};

// push_back
vec.push_back(4); // {1, 2, 3, 4}

// pop_back
vec.pop_back(); // {1, 2, 3}

// insert
vec.insert(vec.begin() + 1, 10); // {1, 10, 2, 3}

// erase single element
vec.erase(vec.begin() + 2); // {1, 10, 3}

// erase range
vec.erase(vec.begin(), vec.begin() + 1); // {10, 3}

// clear
vec.clear(); // {}

// resize
vec.resize(5, 100); // {100, 100, 100, 100, 100}

// shrink_to_fit
vec.shrink_to_fit();
</code></pre>
<h3 id="5-iterators"><a class="header" href="#5-iterators">5. <strong>Iterators</strong></a></h3>
<p>Vectors support iterators to traverse and manipulate elements.</p>
<ul>
<li><code>begin()</code>: Returns an iterator to the first element.</li>
<li><code>end()</code>: Returns an iterator to one past the last element.</li>
<li><code>rbegin()</code>: Returns a reverse iterator to the last element.</li>
<li><code>rend()</code>: Returns a reverse iterator to one before the first element.</li>
</ul>
<pre><code class="language-cpp">std::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};

// Forward iteration
for(auto it = vec.begin(); it != vec.end(); ++it) {
    std::cout &lt;&lt; *it &lt;&lt; " ";
}

// Reverse iteration
for(auto it = vec.rbegin(); it != vec.rend(); ++it) {
    std::cout &lt;&lt; *it &lt;&lt; " ";
}
</code></pre>
<h3 id="6-algorithms-support"><a class="header" href="#6-algorithms-support">6. <strong>Algorithms Support</strong></a></h3>
<p>Vectors work seamlessly with standard algorithms from the C++ Standard Library.</p>
<pre><code class="language-cpp">#include &lt;algorithm&gt;

std::vector&lt;int&gt; vec = {5, 3, 1, 4, 2};

// Sort the vector
std::sort(vec.begin(), vec.end()); // {1, 2, 3, 4, 5}

// Reverse the vector
std::reverse(vec.begin(), vec.end()); // {5, 4, 3, 2, 1}

// Find an element
auto it = std::find(vec.begin(), vec.end(), 3);
if(it != vec.end()) {
    std::cout &lt;&lt; "Found: " &lt;&lt; *it &lt;&lt; std::endl;
}
</code></pre>
<h3 id="7-capacity-management"><a class="header" href="#7-capacity-management">7. <strong>Capacity Management</strong></a></h3>
<ul>
<li><code>reserve()</code>: Increases the capacity of the vector to a value that's greater or equal to the specified.</li>
<li><code>capacity()</code>: Explained earlier.</li>
</ul>
<pre><code class="language-cpp">std::vector&lt;int&gt; vec;
vec.reserve(100); // Reserve space for 100 elements
std::cout &lt;&lt; "Capacity: " &lt;&lt; vec.capacity() &lt;&lt; std::endl;
</code></pre>
<p>Understanding and utilizing <code>std::vector</code> and its various methods can significantly enhance the efficiency and flexibility of your C++ programs, allowing for dynamic memory management and rich data manipulation capabilities.</p>
<h3 id="4-maps"><a class="header" href="#4-maps">4. <strong>Maps</strong></a></h3>
<p>C++ provides the <code>std::map</code> container, which is an associative container that stores elements formed by a combination of a key and a value. <code>std::map</code> automatically sorts its elements by key and allows fast retrieval of individual elements based on their keys.</p>
<h4 id="constructors"><a class="header" href="#constructors">Constructors</a></h4>
<p><code>std::map</code> offers multiple constructors to initialize maps in different ways.</p>
<pre><code class="language-cpp">#include &lt;map&gt;
#include &lt;string&gt;

// Default constructor
std::map&lt;int, std::string&gt; map1;

// Initializer list constructor
std::map&lt;int, std::string&gt; map2 = {
    {1, "one"},
    {2, "two"},
    {3, "three"}
};

// Range constructor
std::vector&lt;std::pair&lt;int, std::string&gt;&gt; vec = { {4, "four"}, {5, "five"} };
std::map&lt;int, std::string&gt; map3(vec.begin(), vec.end());

// Copy constructor
std::map&lt;int, std::string&gt; map4(map2);
</code></pre>
<h4 id="size-and-capacity"><a class="header" href="#size-and-capacity">Size and Capacity</a></h4>
<ul>
<li><code>size()</code>: Returns the number of elements in the map.</li>
<li><code>empty()</code>: Checks whether the map is empty.</li>
</ul>
<pre><code class="language-cpp">std::map&lt;int, std::string&gt; map = { {1, "one"}, {2, "two"}, {3, "three"} };
size_t sz = map.size(); // 3
bool isEmpty = map.empty(); // false
</code></pre>
<h4 id="element-access"><a class="header" href="#element-access">Element Access</a></h4>
<ul>
<li><code>operator[]</code>: Accesses or inserts elements with the given key.</li>
<li><code>at()</code>: Accesses elements with bounds checking.</li>
<li><code>find()</code>: Finds an element with a specific key.</li>
<li><code>count()</code>: Returns the number of elements with a specific key.</li>
</ul>
<pre><code class="language-cpp">// Using operator[]
map[4] = "four"; // Inserts if key 4 does not exist

// Using at()
try {
    std::string value = map.at(2); // "two"
} catch(const std::out_of_range&amp; e) {
    // Handle error
}

// Using find()
auto it = map.find(3);
if(it != map.end()) {
    std::cout &lt;&lt; "Found: " &lt;&lt; it-&gt;second &lt;&lt; std::endl; // "three"
}

// Using count()
if(map.count(5)) {
    std::cout &lt;&lt; "Key 5 exists." &lt;&lt; std::endl;
} else {
    std::cout &lt;&lt; "Key 5 does not exist." &lt;&lt; std::endl;
}
</code></pre>
<h4 id="inserting-elements"><a class="header" href="#inserting-elements">Inserting Elements</a></h4>
<ul>
<li><code>insert()</code>: Inserts elements into the map.</li>
<li><code>emplace()</code>: Constructs elements in-place.</li>
</ul>
<pre><code class="language-cpp">// Using insert()
map.insert({1, "one"});
map.insert(std::pair&lt;int, std::string&gt;(2, "two"));

// Using emplace()
map.emplace(3, "three");
</code></pre>
<h4 id="deleting-elements"><a class="header" href="#deleting-elements">Deleting Elements</a></h4>
<ul>
<li><code>erase()</code>: Removes elements by key or iterator.</li>
<li><code>clear()</code>: Removes all elements from the map.</li>
</ul>
<pre><code class="language-cpp">std::map&lt;int, std::string&gt; map = { {1, "one"}, {2, "two"}, {3, "three"} };

// Erase by key
map.erase(2);

// Erase by iterator
auto itErase = map.find(3);
if(itErase != map.end()) {
    map.erase(itErase);
}

// Clear all elements
map.clear();
</code></pre>
<h4 id="iterating-through-a-map"><a class="header" href="#iterating-through-a-map">Iterating Through a Map</a></h4>
<pre><code class="language-cpp">std::map&lt;int, std::string&gt; map = { {1, "one"}, {2, "two"}, {3, "three"} };

// Using iterator
for(auto it = map.begin(); it != map.end(); ++it) {
    std::cout &lt;&lt; it-&gt;first &lt;&lt; ": " &lt;&lt; it-&gt;second &lt;&lt; std::endl;
}

// Using range-based for loop
for(const auto&amp; pair : map) {
    std::cout &lt;&lt; pair.first &lt;&lt; ": " &lt;&lt; pair.second &lt;&lt; std::endl;
}
</code></pre>
<p>Understanding and utilizing <code>std::map</code> and its various methods can greatly enhance your ability to manage key-value pairs efficiently in C++ applications.</p>
<h3 id="4-smart-pointers"><a class="header" href="#4-smart-pointers">4. <strong>Smart Pointers</strong></a></h3>
<p>Smart pointers in C++ are template classes provided by the Standard Library that facilitate automatic and exception-safe memory management. They help manage dynamically allocated objects by ensuring that resources are properly released when they are no longer needed, thus preventing memory leaks and other related issues. C++ offers several types of smart pointers, each tailored to specific use cases and ownership semantics.</p>
<h4 id="types-of-smart-pointers"><a class="header" href="#types-of-smart-pointers">Types of Smart Pointers</a></h4>
<ol>
<li><strong><code>std::unique_ptr</code></strong></li>
<li><strong><code>std::shared_ptr</code></strong></li>
<li><strong><code>std::weak_ptr</code></strong></li>
</ol>
<hr />
<h4 id="1-stdunique_ptr"><a class="header" href="#1-stdunique_ptr">1. <code>std::unique_ptr</code></a></h4>
<p><code>std::unique_ptr</code> is a smart pointer that owns and manages another object through a pointer and disposes of that object when the <code>unique_ptr</code> goes out of scope. It ensures exclusive ownership, meaning that there can be only one <code>unique_ptr</code> instance owning a particular object at any given time.</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Exclusive Ownership:</strong> Only one <code>std::unique_ptr</code> can own the object at a time.</li>
<li><strong>No Copying:</strong> <code>unique_ptr</code> cannot be copied to prevent multiple ownerships. However, it can be moved.</li>
<li><strong>Lightweight:</strong> Minimal overhead compared to raw pointers.</li>
</ul>
<p><strong>Usage Example:</strong></p>
<pre><code class="language-cpp">#include &lt;memory&gt;
#include &lt;iostream&gt;

int main() {
    // Creating a unique_ptr to an integer
    std::unique_ptr&lt;int&gt; ptr1(new int(10));
    std::cout &lt;&lt; "Value: " &lt;&lt; *ptr1 &lt;&lt; std::endl; // Output: Value: 10

    // Transferring ownership using std::move
    std::unique_ptr&lt;int&gt; ptr2 = std::move(ptr1);
    if (!ptr1) {
        std::cout &lt;&lt; "ptr1 is now null." &lt;&lt; std::endl;
    }
    std::cout &lt;&lt; "Value: " &lt;&lt; *ptr2 &lt;&lt; std::endl; // Output: Value: 10

    // Automatic deletion when ptr2 goes out of scope
    return 0;
}
</code></pre>
<p><strong>Common Methods:</strong></p>
<ul>
<li><strong><code>get()</code></strong>: Returns the raw pointer.</li>
<li><strong><code>release()</code></strong>: Releases ownership of the managed object and returns the pointer.</li>
<li><strong><code>reset()</code></strong>: Deletes the currently managed object and takes ownership of a new one.</li>
<li><strong><code>operator*</code> and <code>operator-&gt;</code></strong>: Dereference operators to access the managed object.</li>
</ul>
<hr />
<h4 id="2-stdshared_ptr"><a class="header" href="#2-stdshared_ptr">2. <code>std::shared_ptr</code></a></h4>
<p><code>std::shared_ptr</code> is a smart pointer that maintains shared ownership of an object through a pointer. Multiple <code>shared_ptr</code> instances can own the same object, and the object is destroyed only when the last <code>shared_ptr</code> owning it is destroyed or reset.</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Shared Ownership:</strong> Multiple <code>shared_ptr</code> instances can own the same object.</li>
<li><strong>Reference Counting:</strong> Keeps track of how many <code>shared_ptr</code> instances own the object.</li>
<li><strong>Thread-Safe Reference Counting:</strong> Safe to use in multi-threaded applications for reference counting operations.</li>
</ul>
<p><strong>Usage Example:</strong></p>
<pre><code class="language-cpp">#include &lt;memory&gt;
#include &lt;iostream&gt;

int main() {
    // Creating a shared_ptr to an integer
    std::shared_ptr&lt;int&gt; ptr1 = std::make_shared&lt;int&gt;(20);
    std::cout &lt;&lt; "Value: " &lt;&lt; *ptr1 &lt;&lt; ", Count: " &lt;&lt; ptr1.use_count() &lt;&lt; std::endl; // Output: Value: 20, Count: 1

    // Creating another shared_ptr sharing the same object
    std::shared_ptr&lt;int&gt; ptr2 = ptr1;
    std::cout &lt;&lt; "Value: " &lt;&lt; *ptr2 &lt;&lt; ", Count: " &lt;&lt; ptr1.use_count() &lt;&lt; std::endl; // Output: Value: 20, Count: 2

    // Resetting ptr1
    ptr1.reset();
    std::cout &lt;&lt; "ptr1 reset. Count: " &lt;&lt; ptr2.use_count() &lt;&lt; std::endl; // Output: Count: 1

    // Automatic deletion when ptr2 goes out of scope
    return 0;
}
</code></pre>
<p><strong>Common Methods:</strong></p>
<ul>
<li><strong><code>use_count()</code></strong>: Returns the number of <code>shared_ptr</code> instances sharing ownership.</li>
<li><strong><code>unique()</code></strong>: Checks if the <code>shared_ptr</code> is the only owner.</li>
<li><strong><code>reset()</code></strong>: Releases ownership of the managed object.</li>
<li><strong><code>swap()</code></strong>: Exchanges the managed object with another <code>shared_ptr</code>.</li>
</ul>
<hr />
<h4 id="3-stdweak_ptr"><a class="header" href="#3-stdweak_ptr">3. <code>std::weak_ptr</code></a></h4>
<p><code>std::weak_ptr</code> is a smart pointer that holds a non-owning ("weak") reference to an object that is managed by <code>std::shared_ptr</code>. It is used to prevent circular references that can lead to memory leaks by allowing one part of the code to observe an object without affecting its lifetime.</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Non-Owning:</strong> Does not contribute to the reference count.</li>
<li><strong>Avoids Circular References:</strong> Useful in scenarios like bidirectional relationships.</li>
<li><strong>Access Controlled:</strong> Must be converted to <code>std::shared_ptr</code> to access the managed object.</li>
</ul>
<p><strong>Usage Example:</strong></p>
<pre><code class="language-cpp">#include &lt;memory&gt;
#include &lt;iostream&gt;

struct Node {
    int value;
    std::shared_ptr&lt;Node&gt; next;
    std::weak_ptr&lt;Node&gt; prev; // Using weak_ptr to prevent circular reference

    Node(int val) : value(val), next(nullptr), prev() {}
};

int main() {
    auto node1 = std::make_shared&lt;Node&gt;(1);
    auto node2 = std::make_shared&lt;Node&gt;(2);

    node1-&gt;next = node2;
    node2-&gt;prev = node1; // weak_ptr does not increase reference count

    std::cout &lt;&lt; "Node1 value: " &lt;&lt; node1-&gt;value &lt;&lt; std::endl;
    std::cout &lt;&lt; "Node2 value: " &lt;&lt; node2-&gt;value &lt;&lt; std::endl;

    // Accessing the previous node
    if(auto prev = node2-&gt;prev.lock()) {
        std::cout &lt;&lt; "Node2's previous node value: " &lt;&lt; prev-&gt;value &lt;&lt; std::endl;
    } else {
        std::cout &lt;&lt; "Previous node no longer exists." &lt;&lt; std::endl;
    }

    return 0;
}
</code></pre>
<p><strong>Common Methods:</strong></p>
<ul>
<li><strong><code>lock()</code></strong>: Attempts to acquire a <code>std::shared_ptr</code> to the managed object.</li>
<li><strong><code>expired()</code></strong>: Checks if the managed object has been deleted.</li>
<li><strong><code>reset()</code></strong>: Releases the managed object reference.</li>
</ul>
<hr />
<h4 id="common-methods-across-smart-pointers"><a class="header" href="#common-methods-across-smart-pointers">Common Methods Across Smart Pointers</a></h4>
<p>While each smart pointer type has its specific methods, there are several common methods that they share:</p>
<ul>
<li>
<p><strong><code>get()</code></strong>: Returns the raw pointer managed by the smart pointer.</p>
<pre><code class="language-cpp">std::unique_ptr&lt;int&gt; ptr = std::make_unique&lt;int&gt;(100);
int* rawPtr = ptr.get();
std::cout &lt;&lt; "Raw pointer value: " &lt;&lt; *rawPtr &lt;&lt; std::endl; // Output: 100
</code></pre>
</li>
<li>
<p><strong><code>reset()</code></strong>: Releases the ownership of the managed object and optionally takes ownership of a new object.</p>
<pre><code class="language-cpp">std::shared_ptr&lt;int&gt; ptr = std::make_shared&lt;int&gt;(200);
ptr.reset(new int(300)); // Old object is deleted, ptr now owns the new object
std::cout &lt;&lt; "New value: " &lt;&lt; *ptr &lt;&lt; std::endl; // Output: 300
</code></pre>
</li>
<li>
<p><strong><code>swap()</code></strong>: Exchanges the managed objects of two smart pointers.</p>
<pre><code class="language-cpp">std::unique_ptr&lt;int&gt; ptr1 = std::make_unique&lt;int&gt;(400);
std::unique_ptr&lt;int&gt; ptr2 = std::make_unique&lt;int&gt;(500);
ptr1.swap(ptr2);
std::cout &lt;&lt; "ptr1: " &lt;&lt; *ptr1 &lt;&lt; ", ptr2: " &lt;&lt; *ptr2 &lt;&lt; std::endl; // Output: ptr1: 500, ptr2: 400
</code></pre>
</li>
<li>
<p><strong>Dereference Operators (<code>*</code> and <code>-&gt;</code>)</strong>: Access the managed object.</p>
<pre><code class="language-cpp">std::shared_ptr&lt;std::string&gt; ptr = std::make_shared&lt;std::string&gt;("Hello");
std::cout &lt;&lt; "String: " &lt;&lt; *ptr &lt;&lt; std::endl; // Output: Hello
std::cout &lt;&lt; "String length: " &lt;&lt; ptr-&gt;length() &lt;&lt; std::endl; // Output: 5
</code></pre>
</li>
</ul>
<hr />
<h4 id="best-practices-1"><a class="header" href="#best-practices-1">Best Practices</a></h4>
<ul>
<li>
<p><strong>Prefer <code>std::make_unique</code> and <code>std::make_shared</code>:</strong> These functions are exception-safe and more efficient.</p>
<pre><code class="language-cpp">auto ptr = std::make_unique&lt;MyClass&gt;();
auto sharedPtr = std::make_shared&lt;MyClass&gt;();
</code></pre>
</li>
<li>
<p><strong>Use <code>std::unique_ptr</code> When Ownership is Exclusive:</strong> It clearly signifies ownership semantics and incurs no overhead of reference counting.</p>
<pre><code class="language-cpp">std::unique_ptr&lt;Resource&gt; resource = std::make_unique&lt;Resource&gt;();
</code></pre>
</li>
<li>
<p><strong>Use <code>std::shared_ptr</code> When Ownership is Shared:</strong> Useful in scenarios where multiple parts of the program need to share access to the same resource.</p>
<pre><code class="language-cpp">std::shared_ptr&lt;Logger&gt; logger1 = std::make_shared&lt;Logger&gt;();
std::shared_ptr&lt;Logger&gt; logger2 = logger1;
</code></pre>
</li>
<li>
<p><strong>Avoid <code>std::shared_ptr</code> Unless Necessary:</strong> It introduces overhead due to reference counting. Use it only when shared ownership is required.</p>
</li>
<li>
<p><strong>Break Circular References with <code>std::weak_ptr</code>:</strong> When two objects share ownership via <code>std::shared_ptr</code>, use <code>std::weak_ptr</code> to prevent memory leaks.</p>
<pre><code class="language-cpp">struct A {
    std::shared_ptr&lt;B&gt; b_ptr;
};

struct B {
    std::weak_ptr&lt;A&gt; a_ptr; // weak_ptr breaks the circular reference
};
</code></pre>
</li>
</ul>
<hr />
<p>Understanding and effectively utilizing smart pointers is crucial for modern C++ programming. They not only simplify memory management but also enhance the safety and performance of applications by preventing common issues related to dynamic memory allocation.</p>
<h3 id="5-stdfunction-and-stdbind"><a class="header" href="#5-stdfunction-and-stdbind">5. <strong><code>std::function</code> and <code>std::bind</code></strong></a></h3>
<p><code>std::function</code> and <code>std::bind</code> are powerful utilities in the C++ Standard Library that facilitate higher-order programming by allowing functions to be treated as first-class objects. They enable the storage, modification, and invocation of functions in a flexible and generic manner, enhancing the capabilities of callback mechanisms, event handling, and functional programming paradigms in C++.</p>
<h4 id="stdfunction"><a class="header" href="#stdfunction"><code>std::function</code></a></h4>
<p><code>std::function</code> is a versatile, type-erased function wrapper that can store any callable target—such as free functions, member functions, lambda expressions, or other function objects—provided they match a specific function signature. This flexibility makes it an essential tool for designing callback interfaces and managing dynamic function invocation.</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Type-Erasure:</strong> Abstracts away the specific type of the callable, allowing different types of callable objects to be stored in the same <code>std::function</code> variable.</li>
<li><strong>Copyable and Assignable:</strong> <code>std::function</code> instances can be copied and assigned, enabling their use in standard containers and algorithms.</li>
<li><strong>Invoke Any Callable:</strong> Can represent free functions, member functions, lambda expressions, and function objects.</li>
</ul>
<p><strong>Basic Usage Example:</strong></p>
<pre><code class="language-cpp">#include &lt;functional&gt;
#include &lt;iostream&gt;

// A free function
int add(int a, int b) {
    return a + b;
}

int main() {
    // Storing a free function in std::function
    std::function&lt;int(int, int)&gt; func = add;
    std::cout &lt;&lt; "add(2, 3) = " &lt;&lt; func(2, 3) &lt;&lt; std::endl; // Output: 5

    // Storing a lambda expression
    std::function&lt;int(int, int)&gt; lambdaFunc = [](int a, int b) -&gt; int {
        return a * b;
    };
    std::cout &lt;&lt; "lambdaFunc(2, 3) = " &lt;&lt; lambdaFunc(2, 3) &lt;&lt; std::endl; // Output: 6

    // Storing a member function (requires binding)
    struct Calculator {
        int subtract(int a, int b) const {
            return a - b;
        }
    };

    Calculator calc;
    std::function&lt;int(int, int)&gt; memberFunc = std::bind(&amp;Calculator::subtract, &amp;calc, std::placeholders::_1, std::placeholders::_2);
    std::cout &lt;&lt; "calc.subtract(5, 3) = " &lt;&lt; memberFunc(5, 3) &lt;&lt; std::endl; // Output: 2

    return 0;
}
</code></pre>
<p><strong>Common Methods:</strong></p>
<ul>
<li><strong><code>operator()</code></strong>: Invokes the stored callable.</li>
<li><strong><code>target()</code></strong>: Retrieves a pointer to the stored callable if it matches a specific type.</li>
<li><strong><code>reset()</code></strong>: Clears the stored callable, making the <code>std::function</code> empty.</li>
</ul>
<h4 id="stdbind"><a class="header" href="#stdbind"><code>std::bind</code></a></h4>
<p><code>std::bind</code> is a utility that allows you to create a new function object by binding some or all of the arguments of an existing function to specific values. This is particularly useful for adapting functions to match desired interfaces or for creating callbacks with pre-specified arguments.</p>
<p><strong>Key Characteristics:</strong></p>
<ul>
<li><strong>Argument Binding:</strong> Fixes certain arguments of a function, producing a new function object with fewer parameters.</li>
<li><strong>Placeholders:</strong> Uses placeholders like <code>std::placeholders::_1</code> to indicate arguments that will be provided later.</li>
<li><strong>Supports Various Callables:</strong> Can bind free functions, member functions, and function objects.</li>
</ul>
<p><strong>Basic Usage Example:</strong></p>
<pre><code class="language-cpp">#include &lt;functional&gt;
#include &lt;iostream&gt;

// A free function
int multiply(int a, int b) {
    return a * b;
}

struct Calculator {
    int divide(int a, int b) const {
        if(b == 0) throw std::invalid_argument("Division by zero");
        return a / b;
    }
};

int main() {
    // Binding the first argument of multiply to 5
    auto timesFive = std::bind(multiply, 5, std::placeholders::_1);
    std::cout &lt;&lt; "multiply(5, 4) = " &lt;&lt; timesFive(4) &lt;&lt; std::endl; // Output: 20

    // Binding a member function with the object instance
    Calculator calc;
    auto divideBy = std::bind(&amp;Calculator::divide, &amp;calc, std::placeholders::_1, 2);
    std::cout &lt;&lt; "calc.divide(10, 2) = " &lt;&lt; divideBy(10) &lt;&lt; std::endl; // Output: 5

    return 0;
}
</code></pre>
<p><strong>Common Use Cases:</strong></p>
<ul>
<li><strong>Creating Callbacks:</strong> Adapting functions to match callback interfaces that require a specific signature.</li>
<li><strong>Event Handling:</strong> Binding member functions of objects to event handlers with predefined arguments.</li>
<li><strong>Functional Programming:</strong> Enabling partial application and currying of functions for more functional-style code.</li>
</ul>
<p><strong>Advanced Usage Example:</strong></p>
<pre><code class="language-cpp">#include &lt;functional&gt;
#include &lt;iostream&gt;
#include &lt;vector&gt;

class Logger {
public:
    void log(const std::string&amp; message, int level) const {
        std::cout &lt;&lt; "Level " &lt;&lt; level &lt;&lt; ": " &lt;&lt; message &lt;&lt; std::endl;
    }
};

int main() {
    Logger logger;

    // Binding the logger object and log level to create a simplified log function
    auto infoLog = std::bind(&amp;Logger::log, &amp;logger, std::placeholders::_1, 1);
    auto errorLog = std::bind(&amp;Logger::log, &amp;logger, std::placeholders::_1, 3);

    infoLog("This is an informational message."); // Output: Level 1: This is an informational message.
    errorLog("This is an error message."); // Output: Level 3: This is an error message.

    // Storing bind expressions in a std::vector of std::function
    std::vector&lt;std::function&lt;void(const std::string&amp;)&gt;&gt; logs;
    logs.push_back(infoLog);
    logs.push_back(errorLog);

    for(auto&amp; logFunc : logs) {
        logFunc("Logging through stored function.");
    }
    // Output:
    // Level 1: Logging through stored function.
    // Level 3: Logging through stored function.

    return 0;
}
</code></pre>
<p><strong>Best Practices:</strong></p>
<ul>
<li>
<p><strong>Prefer Lambda Expressions Over <code>std::bind</code>:</strong> Lambdas often provide clearer and more readable syntax compared to <code>std::bind</code>.</p>
<pre><code class="language-cpp">// Using std::bind
auto timesFive = std::bind(multiply, 5, std::placeholders::_1);

// Equivalent using a lambda
auto timesFiveLambda = [](int a) -&gt; int {
    return multiply(5, a);
};
</code></pre>
</li>
<li>
<p><strong>Use <code>std::function</code> for Flexibility:</strong> When storing or passing callable objects that may vary in type, use <code>std::function</code> to accommodate different callables.</p>
</li>
<li>
<p><strong>Avoid Unnecessary Bindings:</strong> Excessive use of <code>std::bind</code> can lead to less readable code. Assess whether a lambda or a direct function call may be more appropriate.</p>
</li>
</ul>
<p>By leveraging <code>std::function</code> and <code>std::bind</code>, developers can create more abstract, flexible, and reusable code components, facilitating sophisticated callback mechanisms and enhancing the expressive power of C++.</p>
<h2 id="c-in-competitive-programming"><a class="header" href="#c-in-competitive-programming">C++ in Competitive Programming</a></h2>
<p>Competitive programming demands not only a deep understanding of algorithms and data structures but also the ability to implement them efficiently within strict time and memory constraints. C++ is a favored language in this arena due to its performance, rich Standard Template Library (STL), and powerful language features. Below are various methods and techniques in C++ that are extensively used in competitive programming:</p>
<h3 id="1-fast-inputoutput"><a class="header" href="#1-fast-inputoutput">1. <strong>Fast Input/Output</strong></a></h3>
<p>Efficient handling of input and output can significantly reduce execution time, especially with large datasets.</p>
<ul>
<li>
<p><strong>Untie C++ Streams from C Streams:</strong></p>
<pre><code class="language-cpp">std::ios::sync_with_stdio(false);
std::cin.tie(nullptr);
</code></pre>
<p>Disabling the synchronization between C and C++ standard streams and untieing <code>cin</code> from <code>cout</code> can speed up I/O operations.</p>
</li>
<li>
<p><strong>Use of <code>scanf</code> and <code>printf</code>:</strong>
For even faster I/O, some competitors prefer using C-style I/O functions.</p>
</li>
</ul>
<h3 id="2-utilizing-the-standard-template-library-stl"><a class="header" href="#2-utilizing-the-standard-template-library-stl">2. <strong>Utilizing the Standard Template Library (STL)</strong></a></h3>
<p>The STL provides a suite of ready-to-use data structures and algorithms that can save time and reduce the likelihood of bugs.</p>
<ul>
<li>
<p><strong>Vectors (<code>std::vector</code>):</strong>
Dynamic arrays that allow for efficient random access and dynamic resizing.</p>
<pre><code class="language-cpp">std::vector&lt;int&gt; vec = {1, 2, 3};
vec.push_back(4);
</code></pre>
</li>
<li>
<p><strong>Pairs and Tuples (<code>std::pair</code>, <code>std::tuple</code>):</strong>
Useful for storing multiple related values.</p>
<pre><code class="language-cpp">std::pair&lt;int, int&gt; p = {1, 2};
std::tuple&lt;int, int, int&gt; t = {1, 2, 3};
</code></pre>
</li>
<li>
<p><strong>Sets and Maps (<code>std::set</code>, <code>std::map</code>):</strong>
Efficiently handle unique elements and key-value associations.</p>
</li>
<li>
<p><strong>Algorithms (<code>std::sort</code>, <code>std::binary_search</code>, etc.):</strong>
Implement common algorithms with optimized performance.</p>
</li>
</ul>
<h3 id="3-graph-representations-and-algorithms"><a class="header" href="#3-graph-representations-and-algorithms">3. <strong>Graph Representations and Algorithms</strong></a></h3>
<p>Graphs are a staple in competitive programming problems. Efficient representation and traversal are crucial.</p>
<ul>
<li>
<p><strong>Adjacency List:</strong></p>
<pre><code class="language-cpp">int n; // Number of nodes
std::vector&lt;std::vector&lt;int&gt;&gt; adj(n + 1);
adj[u].push_back(v);
adj[v].push_back(u); // For undirected graphs
</code></pre>
</li>
<li>
<p><strong>Depth-First Search (DFS) and Breadth-First Search (BFS):</strong>
Fundamental traversal techniques.</p>
</li>
<li>
<p><strong>Dijkstra's and Floyd-Warshall Algorithms:</strong>
For shortest path problems.</p>
</li>
</ul>
<h3 id="4-dynamic-programming-dp"><a class="header" href="#4-dynamic-programming-dp">4. <strong>Dynamic Programming (DP)</strong></a></h3>
<p>DP is essential for solving optimization problems by breaking them down into simpler subproblems.</p>
<ul>
<li>
<p><strong>Memoization and Tabulation:</strong></p>
<pre><code class="language-cpp">// Example of Fibonacci using memoization
long long fib(int n, std::vector&lt;long long&gt; &amp;dp) {
    if(n &lt;= 1) return n;
    if(dp[n] != -1) return dp[n];
    return dp[n] = fib(n-1, dp) + fib(n-2, dp);
}
</code></pre>
</li>
<li>
<p><strong>State Optimization:</strong>
Reducing space complexity by optimizing states.</p>
</li>
</ul>
<h3 id="5-greedy-algorithms"><a class="header" href="#5-greedy-algorithms">5. <strong>Greedy Algorithms</strong></a></h3>
<p>These algorithms make the locally optimal choice at each step with the hope of finding the global optimum.</p>
<ul>
<li>
<p><strong>Interval Scheduling:</strong>
Selecting the maximum number of non-overlapping intervals.</p>
</li>
<li>
<p><strong>Huffman Coding:</strong>
For efficient encoding.</p>
</li>
</ul>
<h3 id="6-bit-manipulation"><a class="header" href="#6-bit-manipulation">6. <strong>Bit Manipulation</strong></a></h3>
<p>Bitwise operations can optimize certain calculations and are useful in problems involving subsets or binary representations.</p>
<ul>
<li>
<p><strong>Common Operations:</strong></p>
<ul>
<li>Setting a bit: <code>x | (1 &lt;&lt; pos)</code></li>
<li>Clearing a bit: <code>x &amp; ~(1 &lt;&lt; pos)</code></li>
<li>Toggling a bit: <code>x ^ (1 &lt;&lt; pos)</code></li>
</ul>
</li>
<li>
<p><strong>Bitmask DP:</strong>
Using bitmasks to represent states in DP.</p>
</li>
</ul>
<h3 id="7-number-theory"><a class="header" href="#7-number-theory">7. <strong>Number Theory</strong></a></h3>
<p>Many problems involve mathematical concepts such as primes, GCD, and modular arithmetic.</p>
<ul>
<li>
<p><strong>Sieve of Eratosthenes:</strong>
For finding all prime numbers up to a certain limit.</p>
<pre><code class="language-cpp">std::vector&lt;bool&gt; is_prime(n+1, true);
is_prime[0] = is_prime[1] = false;
for(int i=2; i*i &lt;= n; ++i){
    if(is_prime[i]){
        for(int j=i*i; j&lt;=n; j+=i){
            is_prime[j] = false;
        }
    }
}
</code></pre>
</li>
<li>
<p><strong>Modular Exponentiation:</strong>
Efficiently computing large exponents under a modulus.</p>
<pre><code class="language-cpp">long long power(long long a, long long b, long long mod){
    long long res = 1;
    a %= mod;
    while(b &gt; 0){
        if(b &amp; 1) res = res * a % mod;
        a = a * a % mod;
        b &gt;&gt;= 1;
    }
    return res;
}
</code></pre>
</li>
</ul>
<h3 id="8-string-algorithms"><a class="header" href="#8-string-algorithms">8. <strong>String Algorithms</strong></a></h3>
<p>Handling and processing strings efficiently is vital in many problems.</p>
<ul>
<li>
<p><strong>KMP Algorithm:</strong>
For pattern matching with linear time complexity.</p>
</li>
<li>
<p><strong>Trie Data Structure:</strong>
Efficiently storing and searching a dynamic set of strings.</p>
</li>
</ul>
<h3 id="9-data-structures"><a class="header" href="#9-data-structures">9. <strong>Data Structures</strong></a></h3>
<p>Choosing the right data structure can make or break your solution.</p>
<ul>
<li>
<p><strong>Segment Trees and Binary Indexed Trees (Fenwick Trees):</strong>
For range queries and updates.</p>
</li>
<li>
<p><strong>Disjoint Set Union (DSU):</strong>
For efficiently handling union and find operations.</p>
<pre><code class="language-cpp">struct DSU {
    std::vector&lt;int&gt; parent;
    DSU(int n) : parent(n+1) { for(int i=0;i&lt;=n;i++) parent[i] = i; }
    int find_set(int x) { return parent[x] == x ? x : parent[x] = find_set(parent[x]); }
    void union_set(int x, int y) { parent[find_set(x)] = find_set(y); }
};
</code></pre>
</li>
<li>
<p><strong>Heaps (<code>std::priority_queue</code>):</strong>
Useful for efficiently retrieving the maximum or minimum element.</p>
</li>
</ul>
<h3 id="10-advanced-techniques"><a class="header" href="#10-advanced-techniques">10. <strong>Advanced Techniques</strong></a></h3>
<ul>
<li>
<p><strong>Meet in the Middle:</strong>
Breaking problems into two halves to reduce time complexity.</p>
</li>
<li>
<p><strong>Bitmasking and Enumeration:</strong>
Enumerating all subsets or combinations efficiently.</p>
</li>
</ul>
<h3 id="best-practices-2"><a class="header" href="#best-practices-2"><strong>Best Practices</strong></a></h3>
<ul>
<li>
<p><strong>Understand the Problem Thoroughly:</strong>
Carefully read and comprehend the problem constraints and requirements before jumping into coding.</p>
</li>
<li>
<p><strong>Practice Code Implementation:</strong>
Regularly practice implementing various algorithms and data structures to build speed and accuracy.</p>
</li>
<li>
<p><strong>Optimize and Test:</strong>
Continuously look for optimizations and thoroughly test your code against different cases to ensure correctness.</p>
</li>
<li>
<p><strong>Stay Updated:</strong>
Keep abreast of new algorithms and techniques emerging in the competitive programming community.</p>
</li>
</ul>
<p>By mastering these methods and leveraging C++'s powerful features, competitive programmers can efficiently tackle a wide array of challenging problems and excel in contests.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="javascript"><a class="header" href="#javascript">JavaScript</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bash"><a class="header" href="#bash">Bash</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="java"><a class="header" href="#java">Java</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust"><a class="header" href="#rust">Rust</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sql"><a class="header" href="#sql">SQL</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interview-questions"><a class="header" href="#interview-questions">Interview Questions</a></h1>
<h2 id="leetcode-patterns"><a class="header" href="#leetcode-patterns">LeetCode Patterns</a></h2>
<p>LeetCode is a popular platform for practicing coding problems and preparing for technical interviews. Many problems on LeetCode can be categorized into specific patterns. Understanding these patterns can help you approach and solve problems more efficiently. Here are some common LeetCode patterns:</p>
<h3 id="1-sliding-window"><a class="header" href="#1-sliding-window">1. Sliding Window</a></h3>
<p>The sliding window pattern is used to solve problems that involve a contiguous sequence of elements, such as subarrays or substrings. This pattern helps in reducing the time complexity by avoiding redundant calculations.</p>
<p><strong>Example Problem:</strong> Find the maximum sum of a subarray of size <code>k</code>.</p>
<h3 id="2-two-pointers"><a class="header" href="#2-two-pointers">2. Two Pointers</a></h3>
<p>The two pointers pattern is used to solve problems involving sorted arrays or linked lists. It involves using two pointers to iterate through the data structure, often from opposite ends, to find pairs or subarrays that meet certain criteria.</p>
<p><strong>Example Problem:</strong> Find two numbers in a sorted array that add up to a given target.</p>
<h3 id="3-fast-and-slow-pointers"><a class="header" href="#3-fast-and-slow-pointers">3. Fast and Slow Pointers</a></h3>
<p>The fast and slow pointers pattern is used to detect cycles in linked lists or arrays. The fast pointer moves twice as fast as the slow pointer, and if there is a cycle, they will eventually meet.</p>
<p><strong>Example Problem:</strong> Detect a cycle in a linked list.</p>
<h3 id="4-merge-intervals"><a class="header" href="#4-merge-intervals">4. Merge Intervals</a></h3>
<p>The merge intervals pattern is used to solve problems that involve overlapping intervals. This pattern helps in merging overlapping intervals and simplifying the problem.</p>
<p><strong>Example Problem:</strong> Merge overlapping intervals in a list of intervals.</p>
<h3 id="5-cyclic-sort"><a class="header" href="#5-cyclic-sort">5. Cyclic Sort</a></h3>
<p>The cyclic sort pattern is used to solve problems involving arrays where the elements are in a range from 1 to <code>n</code>. This pattern helps in placing each element at its correct index.</p>
<p><strong>Example Problem:</strong> Find the missing number in an array of size <code>n</code> containing numbers from 1 to <code>n</code>.</p>
<h3 id="6-in-place-reversal-of-a-linked-list"><a class="header" href="#6-in-place-reversal-of-a-linked-list">6. In-place Reversal of a Linked List</a></h3>
<p>The in-place reversal of a linked list pattern is used to solve problems that require reversing a portion of a linked list. This pattern helps in reversing the nodes of the linked list in-place without using extra space.</p>
<p><strong>Example Problem:</strong> Reverse a sublist of a linked list from position <code>m</code> to <code>n</code>.</p>
<h3 id="7-tree-bfs-breadth-first-search"><a class="header" href="#7-tree-bfs-breadth-first-search">7. Tree BFS (Breadth-First Search)</a></h3>
<p>The tree BFS pattern is used to solve problems involving tree traversal. This pattern helps in traversing the tree level by level and is useful for problems that require processing nodes in a specific order.</p>
<p><strong>Example Problem:</strong> Find the level order traversal of a binary tree.</p>
<h3 id="8-tree-dfs-depth-first-search"><a class="header" href="#8-tree-dfs-depth-first-search">8. Tree DFS (Depth-First Search)</a></h3>
<p>The tree DFS pattern is used to solve problems involving tree traversal. This pattern helps in traversing the tree depth-wise and is useful for problems that require exploring all paths from the root to the leaves.</p>
<p><strong>Example Problem:</strong> Find all root-to-leaf paths in a binary tree.</p>
<h3 id="9-two-heaps"><a class="header" href="#9-two-heaps">9. Two Heaps</a></h3>
<p>The two heaps pattern is used to solve problems that require finding the median of a data stream. This pattern involves using two heaps (a max-heap and a min-heap) to maintain the median efficiently.</p>
<p><strong>Example Problem:</strong> Find the median of a data stream.</p>
<h3 id="10-subsets"><a class="header" href="#10-subsets">10. Subsets</a></h3>
<p>The subsets pattern is used to solve problems that involve generating all possible subsets of a given set. This pattern helps in exploring all combinations and permutations of the elements.</p>
<p><strong>Example Problem:</strong> Generate all subsets of a given set of numbers.</p>
<h3 id="11-modified-binary-search"><a class="header" href="#11-modified-binary-search">11. Modified Binary Search</a></h3>
<p>The modified binary search pattern is used to solve problems that involve searching in a sorted array or matrix. This pattern helps in reducing the search space by half in each step.</p>
<p><strong>Example Problem:</strong> Find the peak element in a mountain array.</p>
<h3 id="12-topological-sort"><a class="header" href="#12-topological-sort">12. Topological Sort</a></h3>
<p>The topological sort pattern is used to solve problems involving directed acyclic graphs (DAGs). This pattern helps in ordering the nodes of the graph in a linear sequence based on their dependencies.</p>
<p><strong>Example Problem:</strong> Find the order of courses to take given their prerequisites.</p>
<h3 id="13-k-way-merge"><a class="header" href="#13-k-way-merge">13. K-way Merge</a></h3>
<p>The k-way merge pattern is used to solve problems that involve merging multiple sorted arrays or lists. This pattern helps in efficiently merging the arrays using a min-heap.</p>
<p><strong>Example Problem:</strong> Merge <code>k</code> sorted linked lists.</p>
<h3 id="14-knapsack-dynamic-programming"><a class="header" href="#14-knapsack-dynamic-programming">14. Knapsack (Dynamic Programming)</a></h3>
<p>The knapsack pattern is used to solve problems that involve selecting items with given weights and values to maximize the total value without exceeding a weight limit. This pattern helps in solving optimization problems using dynamic programming.</p>
<p><strong>Example Problem:</strong> Find the maximum value that can be obtained by selecting items with given weights and values.</p>
<p>Understanding these patterns and practicing problems based on them can significantly improve your problem-solving skills and help you perform better in technical interviews.</p>
<h3 id="15-stacks"><a class="header" href="#15-stacks">15. Stacks</a></h3>
<p>The stack pattern is used to solve problems that involve processing elements in a last-in, first-out (LIFO) order. This pattern helps in managing function calls, parsing expressions, and backtracking problems.</p>
<p><strong>Example Problem:</strong> Evaluate a postfix expression.</p>
<p>Understanding these patterns and practicing problems based on them can significantly improve your problem-solving skills and help you perform better in technical interviews.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-patterns"><a class="header" href="#design-patterns">Design Patterns</a></h1>
<p>// Start Generation Here</p>
<h2 id="introduction-to-design-patterns"><a class="header" href="#introduction-to-design-patterns">Introduction to Design Patterns</a></h2>
<p>Design patterns are proven solutions to common problems encountered in software development. They provide a standardized approach to solving issues related to object creation, structure, and behavior, promoting code reusability, scalability, and maintainability. Understanding design patterns is essential for building robust and efficient software systems.</p>
<h3 id="categories-of-design-patterns"><a class="header" href="#categories-of-design-patterns">Categories of Design Patterns</a></h3>
<p>Design patterns are typically categorized into three main types:</p>
<ol>
<li><strong>Creational Patterns</strong>: Focus on object creation mechanisms, aiming to create objects in a manner suitable to the situation.</li>
<li><strong>Structural Patterns</strong>: Deal with object composition, identifying simple ways to realize relationships between objects.</li>
<li><strong>Behavioral Patterns</strong>: Concerned with communication between objects, highlighting patterns of interaction.</li>
</ol>
<h2 id="list-of-design-patterns-and-their-uses"><a class="header" href="#list-of-design-patterns-and-their-uses">List of Design Patterns and Their Uses</a></h2>
<h3 id="creational-patterns"><a class="header" href="#creational-patterns">Creational Patterns</a></h3>
<ol>
<li>
<p><strong>Singleton</strong>: Ensures a class has only one instance and provides a global point of access to it. Useful for managing shared resources like logging or configuration settings.</p>
</li>
<li>
<p><strong>Factory Method</strong>: Defines an interface for creating an object but lets subclasses alter the type of objects that will be created. Useful for creating objects without specifying the exact class of the object to be created.</p>
</li>
<li>
<p><strong>Abstract Factory</strong>: Provides an interface for creating families of related or dependent objects without specifying their concrete classes. Useful when the system needs to be independent of how its objects are created.</p>
</li>
<li>
<p><strong>Builder</strong>: Separates the construction of a complex object from its representation, allowing the same construction process to create various representations. Useful for constructing complex objects step by step.</p>
</li>
<li>
<p><strong>Prototype</strong>: Specifies the kinds of objects to create using a prototypical instance and creates new objects by copying this prototype. Useful when object creation is expensive or complex.</p>
</li>
</ol>
<h3 id="structural-patterns"><a class="header" href="#structural-patterns">Structural Patterns</a></h3>
<ol>
<li>
<p><strong>Adapter</strong>: Allows incompatible interfaces to work together by converting the interface of one class into another expected by the clients. Useful when integrating legacy systems or third-party libraries.</p>
</li>
<li>
<p><strong>Bridge</strong>: Decouples an abstraction from its implementation so that the two can vary independently. Useful for handling multiple implementations of an abstraction.</p>
</li>
<li>
<p><strong>Composite</strong>: Composes objects into tree structures to represent part-whole hierarchies, allowing clients to treat individual objects and compositions uniformly. Useful for representing hierarchical structures like file systems.</p>
</li>
<li>
<p><strong>Decorator</strong>: Adds additional responsibilities to an object dynamically without altering its structure. Useful for enhancing functionalities of objects without subclassing.</p>
</li>
<li>
<p><strong>Facade</strong>: Provides a simplified interface to a complex subsystem, making the subsystem easier to use. Useful for reducing dependencies and simplifying client interaction.</p>
</li>
<li>
<p><strong>Flyweight</strong>: Reduces the cost of creating and maintaining a large number of similar objects by sharing as much data as possible. Useful for handling large numbers of objects efficiently.</p>
</li>
<li>
<p><strong>Proxy</strong>: Provides a surrogate or placeholder for another object to control access to it. Useful for lazy initialization, access control, or logging.</p>
</li>
</ol>
<h3 id="behavioral-patterns"><a class="header" href="#behavioral-patterns">Behavioral Patterns</a></h3>
<ol>
<li>
<p><strong>Chain of Responsibility</strong>: Passes a request along a chain of handlers, allowing each handler to process or pass it along. Useful for decoupling senders and receivers of requests.</p>
</li>
<li>
<p><strong>Command</strong>: Encapsulates a request as an object, thereby allowing for parameterization and queuing of requests. Useful for implementing undoable operations or task scheduling.</p>
</li>
<li>
<p><strong>Interpreter</strong>: Defines a representation for a language's grammar and interprets sentences in the language. Useful for parsing and interpreting expressions or languages.</p>
</li>
<li>
<p><strong>Iterator</strong>: Provides a way to access elements of an aggregate object sequentially without exposing its underlying representation. Useful for traversing collections.</p>
</li>
<li>
<p><strong>Mediator</strong>: Defines an object that encapsulates how a set of objects interact, promoting loose coupling by keeping objects from referring to each other explicitly. Useful for reducing complexity in object interactions.</p>
</li>
<li>
<p><strong>Memento</strong>: Captures and externalizes an object's internal state without violating encapsulation, allowing the object to be restored to this state later. Useful for implementing undo functionality.</p>
</li>
<li>
<p><strong>Observer</strong>: Defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically. Useful for event handling and implementing distributed event systems.</p>
</li>
<li>
<p><strong>State</strong>: Allows an object to alter its behavior when its internal state changes, appearing as if it has changed its class. Useful for managing state-dependent behavior.</p>
</li>
<li>
<p><strong>Strategy</strong>: Defines a family of algorithms, encapsulates each one, and makes them interchangeable, allowing the algorithm to vary independently from clients that use it. Useful for selecting algorithms dynamically at runtime.</p>
</li>
<li>
<p><strong>Template Method</strong>: Defines the skeleton of an algorithm in a method, deferring some steps to subclasses, allowing subclasses to redefine certain steps without changing the algorithm's structure. Useful for implementing invariant parts of an algorithm and varying certain steps.</p>
</li>
<li>
<p><strong>Visitor</strong>: Represents an operation to be performed on elements of an object structure, allowing new operations to be added without modifying the classes of the elements on which it operates. Useful for separating algorithms from object structures.</p>
</li>
</ol>
<h3 id="creational-patterns-1"><a class="header" href="#creational-patterns-1">Creational Patterns</a></h3>
<h4 id="singleton-pattern"><a class="header" href="#singleton-pattern">Singleton Pattern</a></h4>
<p>The Singleton Pattern ensures that a class has only one instance and provides a global point of access to it. This is useful when exactly one object is needed to coordinate actions across the system.</p>
<p><strong>Example Scenario</strong>: Implementing a logger where a single instance manages all logging operations.</p>
<p><strong>Example Implementation in C++:</strong></p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;mutex&gt;

class Logger {
public:
    // Static method to get the single instance
    static Logger&amp; getInstance() {
        static Logger instance; // Guaranteed to be destroyed and instantiated on first use
        return instance;
    }

    // Delete copy constructor and assignment operator to prevent copies
    Logger(const Logger&amp;) = delete;
    Logger&amp; operator=(const Logger&amp;) = delete;

    // Public method to log messages
    void log(const std::string&amp; message) {
        std::lock_guard&lt;std::mutex&gt; lock(mutex_);
        std::cout &lt;&lt; "Log: " &lt;&lt; message &lt;&lt; std::endl;
    }

private:
    Logger() {} // Private constructor
    std::mutex mutex_;
};

int main() {
    Logger::getInstance().log("Application started.");
    Logger::getInstance().log("An error occurred.");
    return 0;
}
</code></pre>
<p><strong>Explanation</strong>:</p>
<ul>
<li>The <code>Logger</code> class has a private constructor to prevent direct instantiation.</li>
<li>The static method <code>getInstance()</code> returns a reference to the single <code>Logger</code> instance.</li>
<li>Copy constructor and assignment operator are deleted to prevent creating additional instances.</li>
<li>A mutex is used to ensure thread-safe logging operations.</li>
</ul>
<h3 id="structural-patterns-1"><a class="header" href="#structural-patterns-1">Structural Patterns</a></h3>
<h4 id="adapter-pattern"><a class="header" href="#adapter-pattern">Adapter Pattern</a></h4>
<p>The Adapter Pattern allows incompatible interfaces to work together. It acts as a bridge between two incompatible interfaces, enabling classes to collaborate without modifying their existing code.</p>
<p><strong>Example Scenario</strong>: Integrating a new payment system into an existing application that expects a different payment interface.</p>
<p><strong>Example Implementation in C++:</strong></p>
<pre><code class="language-cpp">#include &lt;iostream&gt;

// Existing interface expected by the application
class PaymentProcessor {
public:
    virtual void pay(int amount) = 0;
};

// New payment system with a different interface
class NewPaymentSystem {
public:
    void makePayment(int amount) {
        std::cout &lt;&lt; "Processing payment of $" &lt;&lt; amount &lt;&lt; " through the new system." &lt;&lt; std::endl;
    }
};

// Adapter to make NewPaymentSystem compatible with PaymentProcessor
class PaymentAdapter : public PaymentProcessor {
public:
    PaymentAdapter(NewPaymentSystem* newPaymentSystem) : newPaymentSystem_(newPaymentSystem) {}

    void pay(int amount) override {
        newPaymentSystem_-&gt;makePayment(amount);
    }

private:
    NewPaymentSystem* newPaymentSystem_;
};

int main() {
    NewPaymentSystem newSystem;
    PaymentAdapter adapter(&amp;newSystem);
    adapter.pay(100); // Output: Processing payment of $100 through the new system.
    return 0;
}
</code></pre>
<p><strong>Explanation</strong>:</p>
<ul>
<li><code>PaymentProcessor</code> is the existing interface that the application expects.</li>
<li><code>NewPaymentSystem</code> is the new class with an incompatible interface (<code>makePayment</code> method).</li>
<li><code>PaymentAdapter</code> implements <code>PaymentProcessor</code> and internally uses an instance of <code>NewPaymentSystem</code> to fulfill the <code>pay</code> request.</li>
</ul>
<h3 id="behavioral-patterns-1"><a class="header" href="#behavioral-patterns-1">Behavioral Patterns</a></h3>
<h4 id="observer-pattern"><a class="header" href="#observer-pattern">Observer Pattern</a></h4>
<p>The Observer Pattern defines a one-to-many dependency between objects so that when one object changes state, all its dependents are notified and updated automatically. This pattern is commonly used in event handling systems.</p>
<p><strong>Example Scenario</strong>: Implementing a publish-subscribe mechanism where multiple subscribers listen to updates from a publisher.</p>
<p><strong>Example Implementation in C++:</strong></p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;string&gt;

// Observer interface
class Observer {
public:
    virtual void update(const std::string&amp; message) = 0;
};

// Subject class
class Subject {
public:
    void addObserver(Observer* observer) {
        observers_.push_back(observer);
    }

    void notify(const std::string&amp; message) {
        for(auto observer : observers_) {
            observer-&gt;update(message);
        }
    }

private:
    std::vector&lt;Observer*&gt; observers_;
};

// Concrete Observer
class ConcreteObserver : public Observer {
public:
    ConcreteObserver(const std::string&amp; name) : name_(name) {}

    void update(const std::string&amp; message) override {
        std::cout &lt;&lt; name_ &lt;&lt; " received message: " &lt;&lt; message &lt;&lt; std::endl;
    }

private:
    std::string name_;
};

int main() {
    Subject subject;

    ConcreteObserver observer1("Observer 1");
    ConcreteObserver observer2("Observer 2");

    subject.addObserver(&amp;observer1);
    subject.addObserver(&amp;observer2);

    subject.notify("Event occurred!");

    return 0;
}
</code></pre>
<p><strong>Explanation</strong>:</p>
<ul>
<li><code>Observer</code> is an interface with an <code>update</code> method.</li>
<li><code>Subject</code> maintains a list of observers and notifies them of events.</li>
<li><code>ConcreteObserver</code> implements the <code>Observer</code> interface and reacts to notifications.</li>
<li>In <code>main</code>, observers are added to the subject, and when <code>notify</code> is called, all observers receive the message.</li>
</ul>
<h2 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h2>
<p>Design patterns are invaluable tools for software developers, providing standardized solutions to recurring design problems. By understanding and applying appropriate design patterns, developers can create more flexible, reusable, and maintainable codebases.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux-documentation"><a class="header" href="#linux-documentation">Linux Documentation</a></h1>
<p>A comprehensive guide to Linux system administration, commands, kernel architecture, and networking.</p>
<h2 id="table-of-contents-1"><a class="header" href="#table-of-contents-1">Table of Contents</a></h2>
<ol>
<li><a href="linux/./commands.html">Essential Commands</a> - Command reference and examples</li>
<li><a href="linux/./kernel.html">Kernel Architecture</a> - Linux kernel internals and development</li>
<li><a href="linux/./networking.html">Networking</a> - Network configuration and troubleshooting</li>
<li><a href="linux/./netfilter.html">Netfilter</a> - Packet filtering framework</li>
<li><a href="linux/./iptables.html">iptables</a> - Firewall configuration</li>
<li><a href="linux/./tc.html">Traffic Control (tc)</a> - Network traffic management</li>
</ol>
<h2 id="overview-2"><a class="header" href="#overview-2">Overview</a></h2>
<p>This documentation covers essential Linux topics for system administrators, developers, and power users. Each section provides practical examples, use cases, and best practices.</p>
<h2 id="getting-started"><a class="header" href="#getting-started">Getting Started</a></h2>
<h3 id="for-beginners"><a class="header" href="#for-beginners">For Beginners</a></h3>
<p>Start with <a href="linux/./commands.html">Essential Commands</a> to learn the fundamental Linux commands that you'll use daily.</p>
<h3 id="for-system-administrators"><a class="header" href="#for-system-administrators">For System Administrators</a></h3>
<ul>
<li><a href="linux/./commands.html">Essential Commands</a> - Master command-line tools</li>
<li><a href="linux/./networking.html">Networking</a> - Network configuration and diagnostics</li>
<li><a href="linux/./iptables.html">iptables</a> - Firewall management</li>
</ul>
<h3 id="for-developers"><a class="header" href="#for-developers">For Developers</a></h3>
<ul>
<li><a href="linux/./kernel.html">Kernel Architecture</a> - Understand Linux internals</li>
<li><a href="linux/./commands.html">Essential Commands</a> - Development and debugging tools</li>
</ul>
<h3 id="for-network-engineers"><a class="header" href="#for-network-engineers">For Network Engineers</a></h3>
<ul>
<li><a href="linux/./networking.html">Networking</a> - Network stack and protocols</li>
<li><a href="linux/./netfilter.html">Netfilter</a> - Packet filtering framework</li>
<li><a href="linux/./tc.html">Traffic Control</a> - QoS and traffic shaping</li>
</ul>
<h2 id="key-topics"><a class="header" href="#key-topics">Key Topics</a></h2>
<h3 id="system-administration"><a class="header" href="#system-administration">System Administration</a></h3>
<ul>
<li>User and permission management</li>
<li>Process management and monitoring</li>
<li>System resource monitoring</li>
<li>Service management with systemd</li>
<li>Log management and analysis</li>
</ul>
<h3 id="kernel-development"><a class="header" href="#kernel-development">Kernel Development</a></h3>
<ul>
<li>Kernel architecture and components</li>
<li>System calls and kernel modules</li>
<li>Device drivers</li>
<li>Kernel compilation and debugging</li>
</ul>
<h3 id="networking"><a class="header" href="#networking">Networking</a></h3>
<ul>
<li>Network configuration (ip, ifconfig)</li>
<li>Routing and bridging</li>
<li>Packet filtering (iptables, nftables)</li>
<li>Traffic shaping and QoS</li>
<li>Network troubleshooting</li>
</ul>
<h2 id="quick-reference-1"><a class="header" href="#quick-reference-1">Quick Reference</a></h2>
<h3 id="most-used-commands"><a class="header" href="#most-used-commands">Most Used Commands</a></h3>
<pre><code class="language-bash"># File operations
ls -lah                    # List files with details
cd /path/to/directory      # Change directory
cp -r source dest          # Copy recursively
mv source dest             # Move/rename
rm -rf directory           # Remove recursively

# Text processing
grep pattern file          # Search for pattern
sed 's/old/new/g' file     # Replace text
awk '{print $1}' file      # Process columns

# System monitoring
top                        # Process viewer
htop                       # Enhanced process viewer
ps aux                     # List all processes
df -h                      # Disk usage
free -h                    # Memory usage

# Network
ip addr show               # Show IP addresses
ss -tulpn                  # Show listening ports
ping host                  # Test connectivity
curl url                   # HTTP client
</code></pre>
<h3 id="system-information"><a class="header" href="#system-information">System Information</a></h3>
<pre><code class="language-bash">uname -a                   # Kernel version
lsb_release -a             # Distribution info
hostnamectl                # System hostname
uptime                     # System uptime
</code></pre>
<h2 id="learning-path"><a class="header" href="#learning-path">Learning Path</a></h2>
<ol>
<li>
<p><strong>Basics</strong> (1-2 weeks)</p>
<ul>
<li>File system navigation</li>
<li>File manipulation</li>
<li>Text editors (vim, nano)</li>
<li>Basic shell scripting</li>
</ul>
</li>
<li>
<p><strong>Intermediate</strong> (2-4 weeks)</p>
<ul>
<li>Process management</li>
<li>User management</li>
<li>Permissions and ownership</li>
<li>Package management</li>
<li>System services</li>
</ul>
</li>
<li>
<p><strong>Advanced</strong> (1-3 months)</p>
<ul>
<li>Kernel modules</li>
<li>Network configuration</li>
<li>Firewall rules</li>
<li>Performance tuning</li>
<li>Security hardening</li>
</ul>
</li>
<li>
<p><strong>Expert</strong> (3-6 months)</p>
<ul>
<li>Kernel development</li>
<li>Custom modules</li>
<li>Advanced networking</li>
<li>High availability systems</li>
<li>Container orchestration</li>
</ul>
</li>
</ol>
<h2 id="best-practices-3"><a class="header" href="#best-practices-3">Best Practices</a></h2>
<h3 id="security"><a class="header" href="#security">Security</a></h3>
<ul>
<li>Always use sudo instead of root login</li>
<li>Keep system and packages updated</li>
<li>Use SSH keys instead of passwords</li>
<li>Enable and configure firewall</li>
<li>Regular security audits</li>
<li>Monitor system logs</li>
</ul>
<h3 id="performance-1"><a class="header" href="#performance-1">Performance</a></h3>
<ul>
<li>Monitor system resources regularly</li>
<li>Use appropriate file systems</li>
<li>Optimize kernel parameters</li>
<li>Implement proper backup strategies</li>
<li>Use automation tools</li>
</ul>
<h3 id="documentation-1"><a class="header" href="#documentation-1">Documentation</a></h3>
<ul>
<li>Document custom configurations</li>
<li>Keep change logs</li>
<li>Use version control for configs</li>
<li>Create runbooks for common tasks</li>
</ul>
<h2 id="useful-resources"><a class="header" href="#useful-resources">Useful Resources</a></h2>
<h3 id="official-documentation"><a class="header" href="#official-documentation">Official Documentation</a></h3>
<ul>
<li><a href="https://www.kernel.org/doc/html/latest/">Linux Kernel Documentation</a></li>
<li><a href="https://www.gnu.org/software/coreutils/manual/">GNU Core Utilities</a></li>
<li><a href="https://www.freedesktop.org/wiki/Software/systemd/">systemd Documentation</a></li>
</ul>
<h3 id="community-resources"><a class="header" href="#community-resources">Community Resources</a></h3>
<ul>
<li><a href="https://tldp.org/">Linux Documentation Project</a></li>
<li><a href="https://wiki.archlinux.org/">Arch Wiki</a></li>
<li><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></li>
</ul>
<h3 id="books"><a class="header" href="#books">Books</a></h3>
<ul>
<li>"The Linux Command Line" by William Shotts</li>
<li>"Linux Kernel Development" by Robert Love</li>
<li>"UNIX and Linux System Administration Handbook"</li>
</ul>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>When adding new documentation:</p>
<ol>
<li>Follow the existing structure</li>
<li>Include practical examples</li>
<li>Add use cases and scenarios</li>
<li>Reference related sections</li>
<li>Keep examples tested and working</li>
</ol>
<h2 id="version-information"><a class="header" href="#version-information">Version Information</a></h2>
<ul>
<li>Documentation maintained for Linux Kernel 5.x and 6.x</li>
<li>Examples tested on Ubuntu 20.04/22.04 and Debian 11/12</li>
<li>Command syntax may vary slightly between distributions</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="networking-1"><a class="header" href="#networking-1">Networking</a></h1>
<h2 id="tun-and-tap-interfaces"><a class="header" href="#tun-and-tap-interfaces">TUN and TAP Interfaces</a></h2>
<p>TUN and TAP are virtual network kernel interfaces. They are used to create network interfaces that operate at different layers of the network stack.</p>
<h3 id="tun-interface"><a class="header" href="#tun-interface">TUN Interface</a></h3>
<p>A TUN (network TUNnel) interface is a virtual point-to-point network device that operates at the network layer (Layer 3). It is used to route IP packets. TUN interfaces are commonly used in VPN (Virtual Private Network) implementations to tunnel IP traffic over a secure connection.</p>
<h4 id="key-features-of-tun-interface"><a class="header" href="#key-features-of-tun-interface">Key Features of TUN Interface:</a></h4>
<ul>
<li>Operates at Layer 3 (Network Layer).</li>
<li>Handles IP packets.</li>
<li>Used for routing and tunneling IP traffic.</li>
<li>Commonly used in VPNs.</li>
</ul>
<h4 id="example-use-case"><a class="header" href="#example-use-case">Example Use Case:</a></h4>
<p>A TUN interface can be used to create a secure VPN connection between two remote networks, allowing them to communicate as if they were on the same local network.</p>
<h3 id="tap-interface"><a class="header" href="#tap-interface">TAP Interface</a></h3>
<p>A TAP (network TAP) interface is a virtual network device that operates at the data link layer (Layer 2). It is used to handle Ethernet frames. TAP interfaces are useful for creating network bridges and for virtual machine networking.</p>
<h4 id="key-features-of-tap-interface"><a class="header" href="#key-features-of-tap-interface">Key Features of TAP Interface:</a></h4>
<ul>
<li>Operates at Layer 2 (Data Link Layer).</li>
<li>Handles Ethernet frames.</li>
<li>Used for bridging and virtual machine networking.</li>
<li>Can be used to create virtual switches.</li>
</ul>
<h4 id="example-use-case-1"><a class="header" href="#example-use-case-1">Example Use Case:</a></h4>
<p>A TAP interface can be used to connect a virtual machine to a virtual switch, allowing the virtual machine to communicate with other virtual machines and the host system as if they were connected to a physical Ethernet switch.</p>
<h3 id="creating-tun-and-tap-interfaces"><a class="header" href="#creating-tun-and-tap-interfaces">Creating TUN and TAP Interfaces</a></h3>
<p>TUN and TAP interfaces can be created and managed using the <code>ip</code> command or the <code>tunctl</code> utility. Here is an example of how to create a TUN interface using the <code>ip</code> command:</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux-kernel-architecture"><a class="header" href="#linux-kernel-architecture">Linux Kernel Architecture</a></h1>
<p>A comprehensive guide to Linux kernel internals, architecture, system calls, modules, compilation, and debugging.</p>
<h2 id="table-of-contents-2"><a class="header" href="#table-of-contents-2">Table of Contents</a></h2>
<ol>
<li><a href="linux/kernel.html#kernel-overview">Kernel Overview</a></li>
<li><a href="linux/kernel.html#kernel-architecture">Kernel Architecture</a></li>
<li><a href="linux/kernel.html#memory-management">Memory Management</a></li>
<li><a href="linux/kernel.html#process-management">Process Management</a></li>
<li><a href="linux/kernel.html#system-calls">System Calls</a></li>
<li><a href="linux/kernel.html#kernel-modules">Kernel Modules</a></li>
<li><a href="linux/kernel.html#device-drivers">Device Drivers</a></li>
<li><a href="linux/kernel.html#file-systems">File Systems</a></li>
<li><a href="linux/kernel.html#networking-stack">Networking Stack</a></li>
<li><a href="linux/kernel.html#kernel-compilation">Kernel Compilation</a></li>
<li><a href="linux/kernel.html#kernel-debugging">Kernel Debugging</a></li>
<li><a href="linux/kernel.html#performance-tuning">Performance Tuning</a></li>
</ol>
<hr />
<h2 id="kernel-overview"><a class="header" href="#kernel-overview">Kernel Overview</a></h2>
<p>The Linux kernel is a monolithic kernel that handles all system operations including process management, memory management, device drivers, and system calls.</p>
<h3 id="kernel-architecture-types"><a class="header" href="#kernel-architecture-types">Kernel Architecture Types</a></h3>
<p><strong>Monolithic Kernel (Linux)</strong></p>
<ul>
<li>All services run in kernel space</li>
<li>Better performance (no context switching)</li>
<li>Single address space</li>
<li>Larger kernel size</li>
</ul>
<p><strong>Microkernel</strong></p>
<ul>
<li>Minimal kernel (IPC, memory, scheduling)</li>
<li>Services run in user space</li>
<li>Better stability and security</li>
<li>More context switches</li>
</ul>
<p><strong>Hybrid Kernel</strong></p>
<ul>
<li>Combination of both approaches</li>
<li>Examples: Windows NT, macOS</li>
</ul>
<h3 id="linux-kernel-features"><a class="header" href="#linux-kernel-features">Linux Kernel Features</a></h3>
<pre><code>- Preemptive multitasking
- Symmetric multiprocessing (SMP)
- Virtual memory management
- Loadable kernel modules
- Multiple filesystem support
- POSIX compliance
- Dynamic kernel memory allocation
- Networking stack (TCP/IP, IPv6)
- Advanced security features (SELinux, AppArmor)
- Real-time capabilities (PREEMPT_RT)
</code></pre>
<h3 id="kernel-version-numbering"><a class="header" href="#kernel-version-numbering">Kernel Version Numbering</a></h3>
<pre><code class="language-bash"># Check kernel version
uname -r
# Output: 6.5.0-15-generic

# Format: MAJOR.MINOR.PATCH-BUILD-ARCH
# 6.5.0 - kernel version
# 15 - distribution build number
# generic - kernel flavor/variant
</code></pre>
<p><strong>Version Types:</strong></p>
<ul>
<li><strong>Mainline</strong> - Latest features, active development</li>
<li><strong>Stable</strong> - Production-ready, bug fixes only</li>
<li><strong>LTS (Long Term Support)</strong> - Extended maintenance (2-6 years)</li>
<li><strong>EOL (End of Life)</strong> - No longer maintained</li>
</ul>
<h3 id="kernel-source-tree-structure"><a class="header" href="#kernel-source-tree-structure">Kernel Source Tree Structure</a></h3>
<pre><code>/usr/src/linux/
├── arch/           # Architecture-specific code (x86, ARM, etc.)
├── block/          # Block device drivers
├── crypto/         # Cryptographic API
├── Documentation/  # Kernel documentation
├── drivers/        # Device drivers
│   ├── char/       # Character devices
│   ├── block/      # Block devices
│   ├── net/        # Network devices
│   ├── gpu/        # Graphics drivers
│   └── usb/        # USB drivers
├── fs/             # File system implementations
│   ├── ext4/       # ext4 filesystem
│   ├── btrfs/      # Btrfs filesystem
│   └── nfs/        # Network file system
├── include/        # Header files
│   ├── linux/      # Linux-specific headers
│   └── uapi/       # User-space API headers
├── init/           # Kernel initialization
├── ipc/            # Inter-process communication
├── kernel/         # Core kernel code
│   ├── sched/      # Process scheduler
│   ├── time/       # Time management
│   └── irq/        # Interrupt handling
├── lib/            # Library routines
├── mm/             # Memory management
├── net/            # Networking stack
│   ├── ipv4/       # IPv4 implementation
│   ├── ipv6/       # IPv6 implementation
│   └── core/       # Core networking
├── samples/        # Sample code
├── scripts/        # Build scripts
├── security/       # Security modules (SELinux, AppArmor)
├── sound/          # Sound drivers
└── tools/          # Kernel tools and utilities
</code></pre>
<hr />
<h2 id="kernel-architecture"><a class="header" href="#kernel-architecture">Kernel Architecture</a></h2>
<h3 id="kernel-space-vs-user-space"><a class="header" href="#kernel-space-vs-user-space">Kernel Space vs User Space</a></h3>
<pre><code>+------------------------------------------+
|           User Space (Ring 3)            |
| +--------------------------------------+ |
| | User Applications                    | |
| | (web browsers, editors, games, etc.) | |
| +--------------------------------------+ |
|                   ↕                      |
| +--------------------------------------+ |
| | System Libraries (glibc, etc.)       | |
| +--------------------------------------+ |
+------------------------------------------+
                   ↕
         System Call Interface
                   ↕
+------------------------------------------+
|         Kernel Space (Ring 0)            |
| +--------------------------------------+ |
| | System Call Interface                | |
| +--------------------------------------+ |
| | Process    | Memory   | File System | |
| | Management | Manager  | Layer       | |
| +--------------------------------------+ |
| | Network    | IPC      | Security    | |
| | Stack      | Layer    | Modules     | |
| +--------------------------------------+ |
| | Device Drivers                       | |
| | (char, block, network)               | |
| +--------------------------------------+ |
| | Architecture-Specific Code           | |
| | (CPU, MMU, interrupts)               | |
| +--------------------------------------+ |
+------------------------------------------+
                   ↕
            Hardware Layer
</code></pre>
<h3 id="key-kernel-components"><a class="header" href="#key-kernel-components">Key Kernel Components</a></h3>
<h4 id="1-process-scheduler"><a class="header" href="#1-process-scheduler">1. Process Scheduler</a></h4>
<p>Manages CPU time allocation among processes.</p>
<pre><code class="language-c">// Scheduling classes (from highest to lowest priority)
1. SCHED_DEADLINE  // Deadline scheduling (real-time)
2. SCHED_FIFO      // First-in-first-out (real-time)
3. SCHED_RR        // Round-robin (real-time)
4. SCHED_NORMAL    // Standard time-sharing (CFS)
5. SCHED_BATCH     // Batch processes
6. SCHED_IDLE      // Very low priority

// Completely Fair Scheduler (CFS) - default for SCHED_NORMAL
// - Uses red-black tree for O(log n) operations
// - Virtual runtime tracking
// - Fair CPU time distribution
</code></pre>
<p><strong>Check and modify scheduling:</strong></p>
<pre><code class="language-bash"># View process scheduling info
ps -eo pid,pri,ni,comm,policy

# Change scheduling policy
chrt -f -p 99 PID        # Set to FIFO with priority 99
chrt -r -p 50 PID        # Set to Round-robin
chrt -o -p 0 PID         # Set to normal

# Change nice value (-20 to 19)
nice -n 10 command       # Run with nice value 10
renice -n 5 -p PID       # Change nice value of running process
</code></pre>
<h4 id="2-memory-manager"><a class="header" href="#2-memory-manager">2. Memory Manager</a></h4>
<p>Handles virtual memory, paging, and memory allocation.</p>
<pre><code>Virtual Memory Layout (64-bit x86):

0x00007FFFFFFFFFFF  +------------------+
                    | User Stack       | (grows down)
                    +------------------+
                    | Memory Mapped    |
                    | Files &amp; Libs     |
                    +------------------+
                    | Heap             | (grows up)
                    +------------------+
                    | BSS (uninit data)|
                    +------------------+
                    | Data (init data) |
                    +------------------+
0x0000000000400000  | Text (code)      |
                    +------------------+
                    | Reserved         |
0x0000000000000000  +------------------+

Kernel Space Layout:

0xFFFFFFFFFFFFFFFF  +------------------+
                    | Kernel Code/Data |
                    +------------------+
                    | Direct Mapping   |
                    | (Physical RAM)   |
                    +------------------+
                    | vmalloc Area     |
                    +------------------+
                    | Module Space     |
0xFFFF800000000000  +------------------+
</code></pre>
<p><strong>Memory zones:</strong></p>
<pre><code>ZONE_DMA       - Memory for DMA (0-16MB on x86)
ZONE_DMA32     - Memory for 32-bit DMA (0-4GB)
ZONE_NORMAL    - Normal memory (above 4GB on 64-bit)
ZONE_HIGHMEM   - High memory (not directly mapped, 32-bit only)
ZONE_MOVABLE   - Memory that can be migrated
</code></pre>
<h4 id="3-virtual-file-system-vfs"><a class="header" href="#3-virtual-file-system-vfs">3. Virtual File System (VFS)</a></h4>
<p>Abstract layer for file system operations.</p>
<pre><code class="language-c">// VFS Objects
struct super_block  // Mounted filesystem
struct inode        // File metadata
struct dentry       // Directory entry (name to inode mapping)
struct file         // Open file instance

// File operations structure
struct file_operations {
    ssize_t (*read) (struct file *, char __user *, size_t, loff_t *);
    ssize_t (*write) (struct file *, const char __user *, size_t, loff_t *);
    int (*open) (struct inode *, struct file *);
    int (*release) (struct inode *, struct file *);
    // ... more operations
};
</code></pre>
<h4 id="4-network-stack"><a class="header" href="#4-network-stack">4. Network Stack</a></h4>
<p>Implements network protocols and socket interface.</p>
<pre><code>Layer Model:

Application Layer
       ↕
Socket Interface
       ↕
Transport Layer (TCP/UDP)
       ↕
Network Layer (IP)
       ↕
Link Layer (Ethernet, WiFi)
       ↕
Device Driver
       ↕
Hardware
</code></pre>
<hr />
<h2 id="memory-management"><a class="header" href="#memory-management">Memory Management</a></h2>
<h3 id="page-management"><a class="header" href="#page-management">Page Management</a></h3>
<p>Linux uses paging for memory management:</p>
<pre><code class="language-bash"># Check page size
getconf PAGE_SIZE
# Usually 4096 bytes (4KB)

# View memory info
cat /proc/meminfo
# MemTotal, MemFree, MemAvailable, Buffers, Cached, etc.

# Memory statistics
vmstat 1
# View paging, memory, CPU stats every second

# Detailed memory usage
cat /proc/PID/status | grep -i vm
cat /proc/PID/maps    # Memory mappings
</code></pre>
<h3 id="memory-allocation"><a class="header" href="#memory-allocation">Memory Allocation</a></h3>
<p><strong>Kernel Memory Allocation:</strong></p>
<pre><code class="language-c">// Physically contiguous memory
kmalloc(size, GFP_KERNEL)     // Standard allocation
kfree(ptr)                     // Free memory

// Virtual contiguous memory
vmalloc(size)                  // Large allocations
vfree(ptr)

// Page-based allocation
alloc_pages(gfp_mask, order)   // 2^order pages
free_pages(addr, order)

// Flags (GFP = Get Free Pages)
GFP_KERNEL    // Standard, may sleep
GFP_ATOMIC    // Cannot sleep, for interrupts
GFP_USER      // User space allocation
GFP_DMA       // DMA-capable memory
</code></pre>
<h3 id="memory-reclamation"><a class="header" href="#memory-reclamation">Memory Reclamation</a></h3>
<p><strong>OOM Killer (Out-of-Memory):</strong></p>
<pre><code class="language-bash"># View OOM score (higher = more likely to be killed)
cat /proc/PID/oom_score

# Adjust OOM score (-1000 to 1000)
echo -500 &gt; /proc/PID/oom_score_adj  # Less likely to be killed
echo 500 &gt; /proc/PID/oom_score_adj   # More likely to be killed

# Disable OOM killer for process
echo -1000 &gt; /proc/PID/oom_score_adj

# View OOM killer logs
dmesg | grep -i "out of memory"
journalctl -k | grep -i "oom"
</code></pre>
<p><strong>Swapping:</strong></p>
<pre><code class="language-bash"># View swap usage
swapon --show
free -h

# Create swap file
dd if=/dev/zero of=/swapfile bs=1M count=1024
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile

# Control swappiness (0-100, default 60)
cat /proc/sys/vm/swappiness
echo 10 &gt; /proc/sys/vm/swappiness  # Less aggressive swapping

# Make permanent in /etc/sysctl.conf
vm.swappiness=10
</code></pre>
<h3 id="huge-pages"><a class="header" href="#huge-pages">Huge Pages</a></h3>
<p>Improve performance for applications with large memory footprints:</p>
<pre><code class="language-bash"># View huge page info
cat /proc/meminfo | grep -i huge

# Configure huge pages
echo 512 &gt; /proc/sys/vm/nr_hugepages

# Transparent Huge Pages (THP)
cat /sys/kernel/mm/transparent_hugepage/enabled
echo always &gt; /sys/kernel/mm/transparent_hugepage/enabled
echo madvise &gt; /sys/kernel/mm/transparent_hugepage/enabled  # Recommended
echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled
</code></pre>
<hr />
<h2 id="process-management"><a class="header" href="#process-management">Process Management</a></h2>
<h3 id="process-representation"><a class="header" href="#process-representation">Process Representation</a></h3>
<pre><code class="language-c">// Task structure (Process Control Block)
struct task_struct {
    pid_t pid;                     // Process ID
    pid_t tgid;                    // Thread group ID
    struct task_struct *parent;    // Parent process
    struct list_head children;     // Child processes
    struct mm_struct *mm;          // Memory descriptor
    struct fs_struct *fs;          // Filesystem info
    struct files_struct *files;    // Open files
    int exit_state;                // Exit status
    unsigned int policy;           // Scheduling policy
    // ... many more fields
};
</code></pre>
<h3 id="process-states"><a class="header" href="#process-states">Process States</a></h3>
<pre><code class="language-c">TASK_RUNNING           // Running or ready to run
TASK_INTERRUPTIBLE     // Sleeping, can be woken by signals
TASK_UNINTERRUPTIBLE   // Sleeping, cannot be interrupted
TASK_STOPPED           // Stopped (e.g., by SIGSTOP)
TASK_TRACED            // Being traced by debugger
EXIT_ZOMBIE            // Terminated, waiting for parent
EXIT_DEAD              // Final state before removal
</code></pre>
<p><strong>View process states:</strong></p>
<pre><code class="language-bash">ps aux
# STAT column:
# R - Running
# S - Sleeping (interruptible)
# D - Sleeping (uninterruptible, usually I/O)
# T - Stopped
# Z - Zombie
# &lt; - High priority
# N - Low priority
# + - Foreground process group

# Find stuck processes (uninterruptible sleep)
ps aux | awk '$8 ~ /D/'
</code></pre>
<h3 id="process-creation"><a class="header" href="#process-creation">Process Creation</a></h3>
<p><strong>fork() system call:</strong></p>
<pre><code class="language-c">#include &lt;unistd.h&gt;
#include &lt;stdio.h&gt;

int main() {
    pid_t pid = fork();
    
    if (pid &lt; 0) {
        // Fork failed
        perror("fork");
        return 1;
    } else if (pid == 0) {
        // Child process
        printf("Child: PID = %d\n", getpid());
    } else {
        // Parent process
        printf("Parent: PID = %d, Child PID = %d\n", getpid(), pid);
    }
    
    return 0;
}
</code></pre>
<p><strong>exec() system call:</strong></p>
<pre><code class="language-c">#include &lt;unistd.h&gt;

int main() {
    char *args[] = {"/bin/ls", "-l", NULL};
    execv("/bin/ls", args);  // Replace current process
    
    // Only reached if exec fails
    perror("exec");
    return 1;
}
</code></pre>
<h3 id="process-namespaces"><a class="header" href="#process-namespaces">Process Namespaces</a></h3>
<p>Provide isolation for different resources:</p>
<pre><code class="language-bash"># Namespace types
PID      # Process IDs
NET      # Network stack
MNT      # Mount points
IPC      # Inter-process communication
UTS      # Hostname and domain name
USER     # User and group IDs
CGROUP   # Control groups

# View process namespaces
ls -l /proc/self/ns/
lsns  # List namespaces

# Create new namespace
unshare --pid --fork bash  # New PID namespace
unshare --net bash         # New network namespace

# Enter namespace
nsenter --target PID --pid --uts --net bash
</code></pre>
<hr />
<h2 id="system-calls"><a class="header" href="#system-calls">System Calls</a></h2>
<p>System calls provide the interface between user space and kernel space.</p>
<h3 id="system-call-mechanism"><a class="header" href="#system-call-mechanism">System Call Mechanism</a></h3>
<pre><code>User Space:
  Application calls glibc function
         ↓
  glibc wrapper function
         ↓
  Software interrupt (int 0x80 or syscall instruction)
         ↓
Kernel Space:
  System call handler
         ↓
  Kernel function implementation
         ↓
  Return to user space
</code></pre>
<h3 id="common-system-calls"><a class="header" href="#common-system-calls">Common System Calls</a></h3>
<p><strong>Process Management:</strong></p>
<pre><code class="language-c">fork()          // Create child process
exec()          // Execute program
exit()          // Terminate process
wait()          // Wait for child process
getpid()        // Get process ID
getppid()       // Get parent process ID
kill()          // Send signal to process
nice()          // Change priority
</code></pre>
<p><strong>File Operations:</strong></p>
<pre><code class="language-c">open()          // Open file
close()         // Close file
read()          // Read from file
write()         // Write to file
lseek()         // Change file position
stat()          // Get file status
chmod()         // Change permissions
chown()         // Change ownership
link()          // Create hard link
unlink()        // Delete file
mkdir()         // Create directory
rmdir()         // Remove directory
</code></pre>
<p><strong>Memory Management:</strong></p>
<pre><code class="language-c">brk()           // Change data segment size
mmap()          // Map file or device into memory
munmap()        // Unmap memory
mprotect()      // Change memory protection
mlock()         // Lock memory (prevent swapping)
</code></pre>
<p><strong>Networking:</strong></p>
<pre><code class="language-c">socket()        // Create socket
bind()          // Bind socket to address
listen()        // Listen for connections
accept()        // Accept connection
connect()       // Connect to remote socket
send()          // Send data
recv()          // Receive data
shutdown()      // Shut down socket
</code></pre>
<h3 id="tracing-system-calls"><a class="header" href="#tracing-system-calls">Tracing System Calls</a></h3>
<p><strong>strace - Trace system calls:</strong></p>
<pre><code class="language-bash"># Trace program execution
strace ls
strace -o output.txt ls    # Save to file

# Trace specific system calls
strace -e open,read ls     # Only open and read
strace -e trace=file ls    # All file operations
strace -e trace=network curl example.com

# Attach to running process
strace -p PID

# Count system call statistics
strace -c ls

# Follow child processes
strace -f ./program

# Timestamp system calls
strace -t ls               # Time of day
strace -T ls               # Time spent in each call

# Examples
strace -e trace=open,openat cat /etc/passwd
strace -c find / -name "*.log" 2&gt;/dev/null
strace -p $(pgrep nginx | head -1)
</code></pre>
<h3 id="writing-a-simple-system-call"><a class="header" href="#writing-a-simple-system-call">Writing a Simple System Call</a></h3>
<p><strong>1. Add system call to kernel:</strong></p>
<pre><code class="language-c">// kernel/sys.c
SYSCALL_DEFINE1(hello, char __user *, msg)
{
    char kernel_msg[256];
    
    if (copy_from_user(kernel_msg, msg, sizeof(kernel_msg)))
        return -EFAULT;
    
    printk(KERN_INFO "System call hello: %s\n", kernel_msg);
    return 0;
}
</code></pre>
<p><strong>2. Add to system call table:</strong></p>
<pre><code class="language-c">// arch/x86/entry/syscalls/syscall_64.tbl
450    common    hello    sys_hello
</code></pre>
<p><strong>3. User space program:</strong></p>
<pre><code class="language-c">#include &lt;unistd.h&gt;
#include &lt;sys/syscall.h&gt;

#define __NR_hello 450

int main() {
    syscall(__NR_hello, "Hello from user space!");
    return 0;
}
</code></pre>
<hr />
<h2 id="kernel-modules"><a class="header" href="#kernel-modules">Kernel Modules</a></h2>
<p>Kernel modules allow dynamic loading of code into the running kernel.</p>
<h3 id="module-basics"><a class="header" href="#module-basics">Module Basics</a></h3>
<pre><code class="language-bash"># List loaded modules
lsmod

# Module information
modinfo module_name

# Load module
modprobe module_name
insmod /path/to/module.ko

# Unload module
modprobe -r module_name
rmmod module_name

# Module dependencies
depmod -a

# Module parameters
modinfo -p module_name
modprobe module_name param=value
</code></pre>
<h3 id="writing-a-simple-module"><a class="header" href="#writing-a-simple-module">Writing a Simple Module</a></h3>
<p><strong>hello_module.c:</strong></p>
<pre><code class="language-c">#include &lt;linux/init.h&gt;
#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Your Name");
MODULE_DESCRIPTION("A simple Hello World module");
MODULE_VERSION("1.0");

// Module initialization
static int __init hello_init(void)
{
    printk(KERN_INFO "Hello World module loaded\n");
    return 0;  // 0 = success
}

// Module cleanup
static void __exit hello_exit(void)
{
    printk(KERN_INFO "Hello World module unloaded\n");
}

// Register init and exit functions
module_init(hello_init);
module_exit(hello_exit);
</code></pre>
<p><strong>Makefile:</strong></p>
<pre><code class="language-makefile">obj-m += hello_module.o

all:
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules

clean:
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean

install:
	make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules_install
	depmod -a
</code></pre>
<p><strong>Build and load:</strong></p>
<pre><code class="language-bash"># Compile
make

# Load module
sudo insmod hello_module.ko

# Check kernel log
dmesg | tail

# Unload module
sudo rmmod hello_module

# Install system-wide
sudo make install
</code></pre>
<h3 id="module-with-parameters"><a class="header" href="#module-with-parameters">Module with Parameters</a></h3>
<pre><code class="language-c">#include &lt;linux/init.h&gt;
#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;
#include &lt;linux/moduleparam.h&gt;

MODULE_LICENSE("GPL");

static int count = 1;
static char *name = "World";

module_param(count, int, S_IRUGO);
module_param(name, charp, S_IRUGO);

MODULE_PARM_DESC(count, "Number of times to greet");
MODULE_PARM_DESC(name, "Name to greet");

static int __init param_init(void)
{
    int i;
    for (i = 0; i &lt; count; i++) {
        printk(KERN_INFO "Hello %s! (%d/%d)\n", name, i+1, count);
    }
    return 0;
}

static void __exit param_exit(void)
{
    printk(KERN_INFO "Goodbye %s!\n", name);
}

module_init(param_init);
module_exit(param_exit);
</code></pre>
<p><strong>Load with parameters:</strong></p>
<pre><code class="language-bash">sudo insmod param_module.ko count=3 name="Linux"
</code></pre>
<h3 id="character-device-driver"><a class="header" href="#character-device-driver">Character Device Driver</a></h3>
<pre><code class="language-c">#include &lt;linux/init.h&gt;
#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;
#include &lt;linux/fs.h&gt;
#include &lt;linux/uaccess.h&gt;

#define DEVICE_NAME "chardev"
#define BUFFER_SIZE 1024

MODULE_LICENSE("GPL");

static int major_number;
static char device_buffer[BUFFER_SIZE];
static int buffer_size = 0;

// File operations
static int dev_open(struct inode *inodep, struct file *filep)
{
    printk(KERN_INFO "chardev: Device opened\n");
    return 0;
}

static ssize_t dev_read(struct file *filep, char *buffer, 
                        size_t len, loff_t *offset)
{
    int bytes_read = 0;
    
    if (*offset &gt;= buffer_size)
        return 0;
    
    bytes_read = buffer_size - *offset;
    if (bytes_read &gt; len)
        bytes_read = len;
    
    if (copy_to_user(buffer, device_buffer + *offset, bytes_read))
        return -EFAULT;
    
    *offset += bytes_read;
    return bytes_read;
}

static ssize_t dev_write(struct file *filep, const char *buffer, 
                         size_t len, loff_t *offset)
{
    int bytes_written = len;
    
    if (bytes_written &gt; BUFFER_SIZE)
        bytes_written = BUFFER_SIZE;
    
    if (copy_from_user(device_buffer, buffer, bytes_written))
        return -EFAULT;
    
    buffer_size = bytes_written;
    printk(KERN_INFO "chardev: Received %d bytes\n", bytes_written);
    return bytes_written;
}

static int dev_release(struct inode *inodep, struct file *filep)
{
    printk(KERN_INFO "chardev: Device closed\n");
    return 0;
}

static struct file_operations fops = {
    .open = dev_open,
    .read = dev_read,
    .write = dev_write,
    .release = dev_release,
};

static int __init chardev_init(void)
{
    major_number = register_chrdev(0, DEVICE_NAME, &amp;fops);
    
    if (major_number &lt; 0) {
        printk(KERN_ALERT "chardev: Failed to register\n");
        return major_number;
    }
    
    printk(KERN_INFO "chardev: Registered with major number %d\n", 
           major_number);
    printk(KERN_INFO "chardev: Create device with: mknod /dev/%s c %d 0\n",
           DEVICE_NAME, major_number);
    return 0;
}

static void __exit chardev_exit(void)
{
    unregister_chrdev(major_number, DEVICE_NAME);
    printk(KERN_INFO "chardev: Unregistered\n");
}

module_init(chardev_init);
module_exit(chardev_exit);
</code></pre>
<p><strong>Using the device:</strong></p>
<pre><code class="language-bash"># Load module
sudo insmod chardev.ko

# Create device node
sudo mknod /dev/chardev c &lt;major_number&gt; 0
sudo chmod 666 /dev/chardev

# Test device
echo "Hello" &gt; /dev/chardev
cat /dev/chardev

# Cleanup
sudo rm /dev/chardev
sudo rmmod chardev
</code></pre>
<hr />
<h2 id="device-drivers"><a class="header" href="#device-drivers">Device Drivers</a></h2>
<h3 id="driver-types"><a class="header" href="#driver-types">Driver Types</a></h3>
<p><strong>Character Devices:</strong></p>
<ul>
<li>Sequential access</li>
<li>Examples: keyboards, serial ports, /dev/null</li>
<li>Major/minor numbers for identification</li>
</ul>
<p><strong>Block Devices:</strong></p>
<ul>
<li>Random access, buffered I/O</li>
<li>Examples: hard drives, SSDs, USB drives</li>
<li>Use page cache for performance</li>
</ul>
<p><strong>Network Devices:</strong></p>
<ul>
<li>Packet transmission/reception</li>
<li>Examples: Ethernet, WiFi, loopback</li>
<li>Socket interface</li>
</ul>
<h3 id="device-model"><a class="header" href="#device-model">Device Model</a></h3>
<pre><code class="language-bash"># View device hierarchy
ls /sys/devices/
ls /sys/class/

# PCI devices
lspci -v
ls /sys/bus/pci/devices/

# USB devices
lsusb -v
ls /sys/bus/usb/devices/

# Block devices
lsblk
ls /sys/block/

# Network devices
ip link show
ls /sys/class/net/

# Device information
udevadm info --query=all --name=/dev/sda
</code></pre>
<h3 id="device-management-with-udev"><a class="header" href="#device-management-with-udev">Device Management with udev</a></h3>
<p><strong>udev rules</strong> (/etc/udev/rules.d/):</p>
<pre><code class="language-bash"># Example: Custom USB device rule
# /etc/udev/rules.d/99-usb-device.rules
SUBSYSTEM=="usb", ATTR{idVendor}=="1234", ATTR{idProduct}=="5678", \
    MODE="0666", GROUP="users", SYMLINK+="mydevice"

# Reload udev rules
sudo udevadm control --reload-rules
sudo udevadm trigger

# Monitor udev events
udevadm monitor
</code></pre>
<hr />
<h2 id="file-systems"><a class="header" href="#file-systems">File Systems</a></h2>
<h3 id="vfs-layer"><a class="header" href="#vfs-layer">VFS Layer</a></h3>
<p>The Virtual File System provides a common interface for all filesystems.</p>
<p><strong>Supported filesystems:</strong></p>
<pre><code class="language-bash">cat /proc/filesystems
# ext4, btrfs, xfs, nfs, vfat, tmpfs, etc.

# Filesystem modules
ls /lib/modules/$(uname -r)/kernel/fs/
</code></pre>
<h3 id="ext4-filesystem"><a class="header" href="#ext4-filesystem">ext4 Filesystem</a></h3>
<pre><code class="language-bash"># Create ext4 filesystem
mkfs.ext4 /dev/sdb1

# Filesystem check
fsck.ext4 /dev/sdb1
e2fsck -f /dev/sdb1

# Filesystem information
dumpe2fs /dev/sdb1
tune2fs -l /dev/sdb1

# Tune filesystem
tune2fs -m 1 /dev/sdb1           # Reserved blocks percentage
tune2fs -c 30 /dev/sdb1          # Max mount count
tune2fs -i 6m /dev/sdb1          # Check interval

# Enable/disable features
tune2fs -O has_journal /dev/sdb1   # Enable journaling
tune2fs -O ^has_journal /dev/sdb1  # Disable journaling
</code></pre>
<h3 id="filesystem-debugging"><a class="header" href="#filesystem-debugging">Filesystem Debugging</a></h3>
<pre><code class="language-bash"># Debugfs - interactive ext2/ext3/ext4 debugger
debugfs /dev/sdb1
# Commands: ls, cd, stat, logdump, etc.

# View inode information
stat /path/to/file
ls -i /path/to/file              # Show inode number
debugfs -R "stat &lt;inode_number&gt;" /dev/sdb1

# Find deleted files
debugfs -R "lsdel" /dev/sdb1
</code></pre>
<hr />
<h2 id="networking-stack"><a class="header" href="#networking-stack">Networking Stack</a></h2>
<h3 id="network-layer-architecture"><a class="header" href="#network-layer-architecture">Network Layer Architecture</a></h3>
<pre><code>+-----------------+
| Application     |
+-----------------+
| Socket Layer    |
+-----------------+
| Protocol Layer  | (TCP, UDP, ICMP)
+-----------------+
| IP Layer        | (IPv4, IPv6, routing)
+-----------------+
| Link Layer      | (Ethernet, WiFi)
+-----------------+
| Device Driver   |
+-----------------+
| Hardware        |
+-----------------+
</code></pre>
<h3 id="network-configuration"><a class="header" href="#network-configuration">Network Configuration</a></h3>
<pre><code class="language-bash"># View network configuration
ip addr show
ip route show
ip link show

# Network statistics
cat /proc/net/dev               # Interface statistics
cat /proc/net/tcp               # TCP connections
cat /proc/net/udp               # UDP connections
netstat -s                      # Protocol statistics

# Socket buffers
sysctl net.core.rmem_max        # Receive buffer
sysctl net.core.wmem_max        # Send buffer

# TCP parameters
sysctl net.ipv4.tcp_rmem        # TCP receive memory
sysctl net.ipv4.tcp_wmem        # TCP send memory
sysctl net.ipv4.tcp_congestion_control
</code></pre>
<h3 id="network-debugging"><a class="header" href="#network-debugging">Network Debugging</a></h3>
<p>See <a href="linux/./networking.html">networking.md</a> for detailed network debugging.</p>
<hr />
<h2 id="kernel-compilation"><a class="header" href="#kernel-compilation">Kernel Compilation</a></h2>
<h3 id="getting-kernel-source"><a class="header" href="#getting-kernel-source">Getting Kernel Source</a></h3>
<pre><code class="language-bash"># Download from kernel.org
wget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.5.tar.xz
tar -xf linux-6.5.tar.xz
cd linux-6.5

# Or use git
git clone https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
cd linux
git checkout v6.5

# Distribution specific
# Ubuntu/Debian
apt-get source linux-image-$(uname -r)

# Fedora/RHEL
dnf download --source kernel
</code></pre>
<h3 id="kernel-configuration"><a class="header" href="#kernel-configuration">Kernel Configuration</a></h3>
<pre><code class="language-bash">cd /usr/src/linux

# Configuration methods
make config           # Text-based Q&amp;A (tedious)
make menuconfig       # Text-based menu (ncurses)
make xconfig          # Qt-based GUI
make gconfig          # GTK-based GUI

# Use existing config
make oldconfig        # Update old config
make localmodconfig   # Only modules for current hardware
make defconfig        # Default configuration
cp /boot/config-$(uname -r) .config  # Copy running config

# Configuration file
.config               # Generated configuration
</code></pre>
<p><strong>Important config options:</strong></p>
<pre><code class="language-bash"># General setup
CONFIG_LOCALVERSION="-custom"        # Custom kernel name
CONFIG_DEFAULT_HOSTNAME="myhost"

# Processor type
CONFIG_SMP=y                         # Symmetric multiprocessing
CONFIG_NR_CPUS=8                     # Number of CPUs

# Power management
CONFIG_CPU_FREQ=y                    # CPU frequency scaling
CONFIG_HIBERNATION=y

# Networking
CONFIG_NETFILTER=y                   # Firewall support
CONFIG_BRIDGE=y                      # Network bridging

# Filesystems
CONFIG_EXT4_FS=y                     # ext4 filesystem
CONFIG_BTRFS_FS=y                    # Btrfs filesystem

# Security
CONFIG_SECURITY_SELINUX=y            # SELinux support
CONFIG_SECURITY_APPARMOR=y           # AppArmor support

# Debugging
CONFIG_DEBUG_KERNEL=y                # Kernel debugging
CONFIG_KGDB=y                        # Kernel debugger
CONFIG_DEBUG_INFO=y                  # Debug symbols
</code></pre>
<h3 id="building-the-kernel"><a class="header" href="#building-the-kernel">Building the Kernel</a></h3>
<pre><code class="language-bash"># Install build dependencies
# Ubuntu/Debian
sudo apt install build-essential libncurses-dev bison flex \
                 libssl-dev libelf-dev bc

# Fedora/RHEL
sudo dnf groupinstall "Development Tools"
sudo dnf install ncurses-devel bison flex elfutils-libelf-devel \
                 openssl-devel bc

# Build kernel
make -j$(nproc)                      # Use all CPU cores

# Or build specific targets
make bzImage                         # Kernel image
make modules                         # Kernel modules
make dtbs                            # Device tree blobs (ARM)

# Install
sudo make modules_install            # Install modules to /lib/modules
sudo make install                    # Install kernel to /boot

# Manual installation
sudo cp arch/x86/boot/bzImage /boot/vmlinuz-6.5-custom
sudo cp System.map /boot/System.map-6.5-custom
sudo cp .config /boot/config-6.5-custom

# Update bootloader
sudo update-grub                     # Debian/Ubuntu
sudo grub2-mkconfig -o /boot/grub2/grub.cfg  # Fedora/RHEL

# Reboot
sudo reboot
</code></pre>
<h3 id="cross-compilation"><a class="header" href="#cross-compilation">Cross-Compilation</a></h3>
<pre><code class="language-bash"># Install cross-compiler
sudo apt install gcc-arm-linux-gnueabi

# Configure for target architecture
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- defconfig

# Build
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- -j$(nproc)

# Example architectures
ARCH=arm                             # ARM 32-bit
ARCH=arm64                           # ARM 64-bit (aarch64)
ARCH=mips                            # MIPS
ARCH=powerpc                         # PowerPC
ARCH=riscv                           # RISC-V
</code></pre>
<h3 id="kernel-patching"><a class="header" href="#kernel-patching">Kernel Patching</a></h3>
<pre><code class="language-bash"># Apply patch
patch -p1 &lt; patch-file.patch

# Create patch
diff -Naur original/ modified/ &gt; my-patch.patch

# Check if patch applies cleanly
patch -p1 --dry-run &lt; patch-file.patch

# Reverse patch
patch -R -p1 &lt; patch-file.patch
</code></pre>
<hr />
<h2 id="kernel-debugging"><a class="header" href="#kernel-debugging">Kernel Debugging</a></h2>
<h3 id="printk---kernel-logging"><a class="header" href="#printk---kernel-logging">printk - Kernel Logging</a></h3>
<pre><code class="language-c">#include &lt;linux/printk.h&gt;

// Log levels (from highest to lowest priority)
printk(KERN_EMERG "System is unusable\n");           // 0
printk(KERN_ALERT "Action must be taken\n");         // 1
printk(KERN_CRIT "Critical conditions\n");           // 2
printk(KERN_ERR "Error conditions\n");               // 3
printk(KERN_WARNING "Warning conditions\n");         // 4
printk(KERN_NOTICE "Normal but significant\n");      // 5
printk(KERN_INFO "Informational\n");                 // 6
printk(KERN_DEBUG "Debug-level messages\n");         // 7

// Default level (usually KERN_WARNING)
printk("Default level message\n");

// Dynamic debug (if CONFIG_DYNAMIC_DEBUG enabled)
pr_debug("Debug message\n");
</code></pre>
<p><strong>View kernel messages:</strong></p>
<pre><code class="language-bash">dmesg                                # View kernel ring buffer
dmesg -w                             # Follow new messages
dmesg -l err                         # Only errors
dmesg --level=err,warn               # Errors and warnings
dmesg -T                             # Human-readable timestamps

journalctl -k                        # Kernel messages via systemd
journalctl -k -f                     # Follow kernel messages
journalctl -k --since "1 hour ago"

# Set console log level
dmesg -n 1                           # Only emergency messages to console
echo 7 &gt; /proc/sys/kernel/printk     # All messages to console
</code></pre>
<h3 id="kgdb---kernel-debugger"><a class="header" href="#kgdb---kernel-debugger">KGDB - Kernel Debugger</a></h3>
<pre><code class="language-bash"># Build kernel with debugging enabled
CONFIG_DEBUG_KERNEL=y
CONFIG_DEBUG_INFO=y
CONFIG_KGDB=y
CONFIG_KGDB_SERIAL_CONSOLE=y

# Boot with KGDB enabled
linux ... kgdboc=ttyS0,115200 kgdbwait

# Connect with GDB
gdb vmlinux
(gdb) target remote /dev/ttyS0
(gdb) break sys_open
(gdb) continue
</code></pre>
<h3 id="kdump---kernel-crash-dumps"><a class="header" href="#kdump---kernel-crash-dumps">kdump - Kernel Crash Dumps</a></h3>
<pre><code class="language-bash"># Install kdump
# Ubuntu/Debian
sudo apt install kdump-tools

# Fedora/RHEL
sudo dnf install kexec-tools

# Configure kdump
# Edit /etc/default/kdump-tools (Debian) or /etc/sysconfig/kdump (RHEL)

# Reserve memory for crash kernel
# Add to kernel parameters: crashkernel=384M-:128M

# Enable kdump
sudo systemctl enable kdump
sudo systemctl start kdump

# Test crash
echo c &gt; /proc/sysrq-trigger         # WARNING: Crashes system!

# Analyze crash dump
crash /usr/lib/debug/vmlinux-&lt;version&gt; /var/crash/vmcore
</code></pre>
<h3 id="magic-sysrq-key"><a class="header" href="#magic-sysrq-key">Magic SysRq Key</a></h3>
<p>Emergency kernel functions:</p>
<pre><code class="language-bash"># Enable SysRq
echo 1 &gt; /proc/sys/kernel/sysrq

# SysRq commands (Alt+SysRq+&lt;key&gt;)
# Or: echo &lt;key&gt; &gt; /proc/sysrq-trigger

b - Reboot immediately
c - Crash (for kdump)
e - SIGTERM to all processes
f - OOM killer
h - Help
i - SIGKILL to all processes
k - Kill all on current console
m - Memory info
p - Current registers and flags
r - Keyboard raw mode
s - Sync all filesystems
t - Task list
u - Remount filesystems read-only
w - Tasks in uninterruptible sleep

# Safe reboot sequence (REISUB)
# R - Raw keyboard mode
# E - SIGTERM all
# I - SIGKILL all
# S - Sync disks
# U - Remount read-only
# B - Reboot
</code></pre>
<h3 id="ftrace---function-tracer"><a class="header" href="#ftrace---function-tracer">ftrace - Function Tracer</a></h3>
<pre><code class="language-bash"># Mount debugfs
mount -t debugfs none /sys/kernel/debug

cd /sys/kernel/debug/tracing

# Available tracers
cat available_tracers
# function, function_graph, blk, wakeup, etc.

# Enable function tracer
echo function &gt; current_tracer
echo 1 &gt; tracing_on

# View trace
cat trace | head -20

# Stop tracing
echo 0 &gt; tracing_on

# Trace specific function
echo sys_open &gt; set_ftrace_filter
echo function &gt; current_tracer
echo 1 &gt; tracing_on

# Clear trace
echo &gt; trace

# Example: Trace network stack
echo 1 &gt; events/net/enable
echo 1 &gt; tracing_on
# Generate network traffic
cat trace
</code></pre>
<h3 id="systemtap"><a class="header" href="#systemtap">SystemTap</a></h3>
<p>Dynamic tracing and instrumentation:</p>
<pre><code class="language-bash"># Install SystemTap
sudo apt install systemtap systemtap-runtime

# Install kernel debug symbols
sudo apt install linux-image-$(uname -r)-dbgsym

# Simple script (hello.stp)
probe begin {
    printf("Hello, SystemTap!\n")
    exit()
}

# Run script
sudo stap hello.stp

# Trace system calls
sudo stap -e 'probe syscall.open { println(execname()) }'

# Count system calls
sudo stap -e '
    global count
    probe syscall.* {
        count[name]++
    }
    probe end {
        foreach (syscall in count-)
            printf("%20s: %d\n", syscall, count[syscall])
    }
' -c "ls -l /"
</code></pre>
<h3 id="perf---performance-analysis"><a class="header" href="#perf---performance-analysis">perf - Performance Analysis</a></h3>
<pre><code class="language-bash"># Install perf
sudo apt install linux-tools-$(uname -r)

# Record CPU cycles
sudo perf record -a sleep 10

# View report
sudo perf report

# CPU profiling
sudo perf top

# Stat command
sudo perf stat ls -R /

# Trace system calls
sudo perf trace ls

# Record specific events
sudo perf record -e sched:sched_switch -a sleep 5
sudo perf script

# Hardware counters
perf list                          # List available events
sudo perf stat -e cache-misses,cache-references ls
</code></pre>
<hr />
<h2 id="performance-tuning"><a class="header" href="#performance-tuning">Performance Tuning</a></h2>
<h3 id="sysctl-parameters"><a class="header" href="#sysctl-parameters">sysctl Parameters</a></h3>
<pre><code class="language-bash"># View all parameters
sysctl -a

# View specific parameter
sysctl vm.swappiness

# Set temporarily
sudo sysctl vm.swappiness=10

# Set permanently (/etc/sysctl.conf or /etc/sysctl.d/)
echo "vm.swappiness=10" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p                     # Reload configuration
</code></pre>
<p><strong>Important parameters:</strong></p>
<pre><code class="language-bash"># Virtual Memory
vm.swappiness=10                   # Reduce swap usage
vm.dirty_ratio=10                  # Dirty page threshold for writeback
vm.dirty_background_ratio=5        # Background writeback threshold
vm.overcommit_memory=1             # Allow memory overcommit

# Network
net.core.rmem_max=134217728        # Max receive buffer
net.core.wmem_max=134217728        # Max send buffer
net.core.netdev_max_backlog=5000   # Input queue size
net.ipv4.tcp_rmem=4096 87380 67108864     # TCP read memory
net.ipv4.tcp_wmem=4096 65536 67108864     # TCP write memory
net.ipv4.tcp_congestion_control=bbr        # Congestion algorithm
net.ipv4.tcp_fastopen=3            # TCP Fast Open
net.ipv4.tcp_mtu_probing=1         # Path MTU discovery
net.ipv4.ip_forward=1              # IP forwarding

# File System
fs.file-max=2097152                # Max open files system-wide
fs.inotify.max_user_watches=524288 # Inotify watches

# Kernel
kernel.sysrq=1                     # Enable SysRq
kernel.panic=10                    # Reboot 10s after panic
kernel.pid_max=4194304             # Max PIDs
</code></pre>
<h3 id="io-schedulers"><a class="header" href="#io-schedulers">I/O Schedulers</a></h3>
<pre><code class="language-bash"># View available schedulers
cat /sys/block/sda/queue/scheduler
# [mq-deadline] kyber bfq none

# Change scheduler
echo kyber &gt; /sys/block/sda/queue/scheduler

# Schedulers:
# mq-deadline - Default, good for most workloads
# kyber - Low latency, good for SSDs
# bfq - Fair queueing, good for desktops
# none - No scheduling (for NVMe with low latency)

# Make permanent (udev rule)
# /etc/udev/rules.d/60-scheduler.rules
ACTION=="add|change", KERNEL=="sd[a-z]", ATTR{queue/scheduler}="kyber"
</code></pre>
<h3 id="cpu-governor"><a class="header" href="#cpu-governor">CPU Governor</a></h3>
<pre><code class="language-bash"># View current governor
cat /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor

# Available governors
cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_governors
# performance powersave schedutil ondemand conservative

# Set governor
echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor

# Governors:
# performance - Max frequency
# powersave - Min frequency
# ondemand - Dynamic scaling (legacy)
# schedutil - Scheduler-driven (default, recommended)
# conservative - Gradual scaling

# Using cpupower
sudo cpupower frequency-set -g performance
sudo cpupower frequency-info
</code></pre>
<h3 id="huge-pages-1"><a class="header" href="#huge-pages-1">Huge Pages</a></h3>
<pre><code class="language-bash"># Configure huge pages
echo 512 &gt; /proc/sys/vm/nr_hugepages

# Transparent Huge Pages
echo always &gt; /sys/kernel/mm/transparent_hugepage/enabled
echo madvise &gt; /sys/kernel/mm/transparent_hugepage/enabled  # Recommended

# View huge page usage
cat /proc/meminfo | grep -i huge

# Permanent configuration (/etc/sysctl.conf)
vm.nr_hugepages=512
</code></pre>
<h3 id="numa-non-uniform-memory-access"><a class="header" href="#numa-non-uniform-memory-access">NUMA (Non-Uniform Memory Access)</a></h3>
<pre><code class="language-bash"># Check NUMA configuration
numactl --hardware

# View NUMA statistics
numastat

# Run program on specific NUMA node
numactl --cpunodebind=0 --membind=0 ./program

# Automatic NUMA balancing
echo 1 &gt; /proc/sys/kernel/numa_balancing
</code></pre>
<hr />
<h2 id="practical-examples"><a class="header" href="#practical-examples">Practical Examples</a></h2>
<h3 id="monitoring-system-performance"><a class="header" href="#monitoring-system-performance">Monitoring System Performance</a></h3>
<pre><code class="language-bash">#!/bin/bash
# System performance monitoring script

echo "=== CPU Usage ==="
mpstat 1 5 | tail -1

echo -e "\n=== Memory Usage ==="
free -h

echo -e "\n=== Disk I/O ==="
iostat -xz 1 2 | tail -n +3

echo -e "\n=== Network ==="
sar -n DEV 1 1 | tail -3

echo -e "\n=== Top Processes by CPU ==="
ps aux --sort=-%cpu | head -6

echo -e "\n=== Top Processes by Memory ==="
ps aux --sort=-%mem | head -6

echo -e "\n=== Load Average ==="
uptime

echo -e "\n=== Kernel Parameters ==="
sysctl vm.swappiness net.ipv4.tcp_congestion_control
</code></pre>
<h3 id="kernel-module-template"><a class="header" href="#kernel-module-template">Kernel Module Template</a></h3>
<pre><code class="language-c">/**
 * template_module.c - Template for kernel modules
 */
#include &lt;linux/init.h&gt;
#include &lt;linux/module.h&gt;
#include &lt;linux/kernel.h&gt;
#include &lt;linux/slab.h&gt;

MODULE_LICENSE("GPL");
MODULE_AUTHOR("Your Name");
MODULE_DESCRIPTION("Template module");
MODULE_VERSION("1.0");

static int __init template_init(void)
{
    printk(KERN_INFO "template: Module loaded\n");
    
    // Initialize your code here
    
    return 0;
}

static void __exit template_exit(void)
{
    // Cleanup your code here
    
    printk(KERN_INFO "template: Module unloaded\n");
}

module_init(template_init);
module_exit(template_exit);
</code></pre>
<hr />
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<h3 id="official-documentation-1"><a class="header" href="#official-documentation-1">Official Documentation</a></h3>
<ul>
<li><a href="https://www.kernel.org/doc/html/latest/">Kernel Documentation</a></li>
<li><a href="https://lkml.org/">Linux Kernel Mailing List</a></li>
<li><a href="https://kernelnewbies.org/">Kernel Newbies</a></li>
</ul>
<h3 id="books-1"><a class="header" href="#books-1">Books</a></h3>
<ul>
<li>"Linux Kernel Development" by Robert Love</li>
<li>"Linux Device Drivers" by Jonathan Corbet</li>
<li>"Understanding the Linux Kernel" by Daniel P. Bovet</li>
<li>"Linux System Programming" by Robert Love</li>
</ul>
<h3 id="online-resources"><a class="header" href="#online-resources">Online Resources</a></h3>
<ul>
<li><a href="https://www.kernel.org/">The Linux Kernel Archives</a></li>
<li><a href="https://lwn.net/">LWN.net</a> - Linux Weekly News</li>
<li><a href="https://bootlin.com/docs/">Bootlin Training Materials</a></li>
</ul>
<h3 id="development-tools"><a class="header" href="#development-tools">Development Tools</a></h3>
<ul>
<li>Git - Version control</li>
<li>cscope/ctags - Code navigation</li>
<li>sparse - Static analyzer</li>
<li>Coccinelle - Semantic patching</li>
<li>QEMU - Virtualization for testing</li>
</ul>
<hr />
<p>This guide covers the fundamentals of Linux kernel architecture and development. The kernel is vast and constantly evolving, so continuous learning and experimentation are essential!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="essential-linux-commands-reference"><a class="header" href="#essential-linux-commands-reference">Essential Linux Commands Reference</a></h1>
<p>A comprehensive guide to essential Linux commands with examples, use cases, and practical tips.</p>
<h2 id="table-of-contents-3"><a class="header" href="#table-of-contents-3">Table of Contents</a></h2>
<ol>
<li><a href="linux/commands.html#file-system-navigation">File System Navigation</a></li>
<li><a href="linux/commands.html#file-operations">File Operations</a></li>
<li><a href="linux/commands.html#text-processing">Text Processing</a></li>
<li><a href="linux/commands.html#search-and-find">Search and Find</a></li>
<li><a href="linux/commands.html#process-management">Process Management</a></li>
<li><a href="linux/commands.html#system-monitoring">System Monitoring</a></li>
<li><a href="linux/commands.html#user-management">User Management</a></li>
<li><a href="linux/commands.html#permissions">Permissions</a></li>
<li><a href="linux/commands.html#package-management">Package Management</a></li>
<li><a href="linux/commands.html#network-commands">Network Commands</a></li>
<li><a href="linux/commands.html#service-management">Service Management</a></li>
<li><a href="linux/commands.html#compression">Compression</a></li>
<li><a href="linux/commands.html#disk-management">Disk Management</a></li>
<li><a href="linux/commands.html#system-information">System Information</a></li>
</ol>
<hr />
<h2 id="file-system-navigation"><a class="header" href="#file-system-navigation">File System Navigation</a></h2>
<h3 id="ls---list-directory-contents"><a class="header" href="#ls---list-directory-contents">ls - List Directory Contents</a></h3>
<pre><code class="language-bash"># Basic listing
ls                         # List files in current directory
ls -l                      # Long format with details
ls -a                      # Show hidden files
ls -lh                     # Human-readable sizes
ls -lah                    # Combine all above options
ls -R                      # Recursive listing
ls -lt                     # Sort by modification time
ls -lS                     # Sort by size

# Advanced usage
ls -i                      # Show inode numbers
ls -d */                   # List only directories
ls --color=auto            # Colored output
ls -ltr                    # Reverse time sort (oldest first)

# Examples
ls *.txt                   # List all .txt files
ls -l /var/log/            # List files in specific directory
ls -lh --sort=size         # Sort by size, human-readable
</code></pre>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Quick directory overview</li>
<li>Check file permissions and ownership</li>
<li>Find recently modified files</li>
<li>Disk usage analysis</li>
</ul>
<h3 id="cd---change-directory"><a class="header" href="#cd---change-directory">cd - Change Directory</a></h3>
<pre><code class="language-bash">cd /path/to/directory      # Absolute path
cd relative/path           # Relative path
cd ..                      # Parent directory
cd ../..                   # Two levels up
cd -                       # Previous directory
cd ~                       # Home directory
cd                         # Home directory (shorthand)
cd ~username               # Another user's home

# Examples
cd /var/log                # Go to log directory
cd ~/Documents             # Go to Documents in home
cd -                       # Toggle between two directories
</code></pre>
<h3 id="pwd---print-working-directory"><a class="header" href="#pwd---print-working-directory">pwd - Print Working Directory</a></h3>
<pre><code class="language-bash">pwd                        # Show current directory
pwd -P                     # Show physical directory (resolve symlinks)
</code></pre>
<hr />
<h2 id="file-operations"><a class="header" href="#file-operations">File Operations</a></h2>
<h3 id="cp---copy-files"><a class="header" href="#cp---copy-files">cp - Copy Files</a></h3>
<pre><code class="language-bash"># Basic copying
cp source.txt dest.txt     # Copy file
cp file1 file2 dir/        # Copy multiple files to directory
cp -r dir1/ dir2/          # Copy directory recursively
cp -i file dest            # Interactive (prompt before overwrite)
cp -v file dest            # Verbose output
cp -u file dest            # Update (copy only if newer)

# Advanced options
cp -p file dest            # Preserve attributes (mode, ownership, timestamps)
cp -a dir1/ dir2/          # Archive mode (recursive + preserve)
cp --backup file dest      # Create backup before overwriting

# Examples
cp /etc/config ~/.config/  # Copy config file to home
cp -r /var/www/* /backup/  # Backup web directory
cp -av src/ dest/          # Full directory copy with attributes
</code></pre>
<h3 id="mv---moverename-files"><a class="header" href="#mv---moverename-files">mv - Move/Rename Files</a></h3>
<pre><code class="language-bash"># Basic move/rename
mv old.txt new.txt         # Rename file
mv file.txt dir/           # Move file to directory
mv file1 file2 dir/        # Move multiple files
mv -i file dest            # Interactive mode
mv -v file dest            # Verbose output

# Examples
mv *.log /var/log/         # Move all log files
mv -n file dest            # No overwrite
mv --backup=numbered f d   # Numbered backups
</code></pre>
<h3 id="rm---remove-files"><a class="header" href="#rm---remove-files">rm - Remove Files</a></h3>
<pre><code class="language-bash"># Basic removal
rm file.txt                # Remove file
rm -r directory/           # Remove directory recursively
rm -f file                 # Force removal (no confirmation)
rm -rf directory/          # Force remove directory
rm -i file                 # Interactive (ask before removal)
rm -v file                 # Verbose output

# Safe practices
rm -I files*               # Prompt once before removing many files
rm -d emptydir/            # Remove empty directory only

# Examples
rm *.tmp                   # Remove all .tmp files
rm -rf /tmp/session*       # Force remove temp sessions
find . -name "*.bak" -delete  # Alternative: safer removal
</code></pre>
<p><strong>Warning:</strong> Use <code>rm -rf</code> with extreme caution!</p>
<h3 id="mkdir---make-directories"><a class="header" href="#mkdir---make-directories">mkdir - Make Directories</a></h3>
<pre><code class="language-bash">mkdir newdir               # Create directory
mkdir -p path/to/dir       # Create parent directories
mkdir -m 755 dir           # Set permissions
mkdir -v dir               # Verbose output

# Examples
mkdir -p project/{src,bin,doc}  # Create multiple directories
mkdir -p ~/backup/$(date +%Y-%m-%d)  # Date-based backup dir
</code></pre>
<h3 id="touch---createupdate-files"><a class="header" href="#touch---createupdate-files">touch - Create/Update Files</a></h3>
<pre><code class="language-bash">touch file.txt             # Create empty file or update timestamp
touch -c file              # No create (only update if exists)
touch -t 202301011200 file # Set specific timestamp
touch -d "2023-01-01" file # Set date

# Examples
touch {1..10}.txt          # Create multiple files
touch -r ref.txt new.txt   # Copy timestamp from reference
</code></pre>
<hr />
<h2 id="text-processing"><a class="header" href="#text-processing">Text Processing</a></h2>
<h3 id="cat---concatenate-and-display"><a class="header" href="#cat---concatenate-and-display">cat - Concatenate and Display</a></h3>
<pre><code class="language-bash">cat file.txt               # Display file contents
cat file1 file2            # Concatenate multiple files
cat &gt; file.txt             # Create file from stdin (Ctrl+D to end)
cat &gt;&gt; file.txt            # Append to file
cat -n file.txt            # Number all lines
cat -b file.txt            # Number non-blank lines
cat -s file.txt            # Squeeze multiple blank lines

# Examples
cat /etc/passwd            # View user accounts
cat file1 file2 &gt; combined # Combine files
cat /dev/null &gt; file.txt   # Empty a file
</code></pre>
<h3 id="grep---search-text-patterns"><a class="header" href="#grep---search-text-patterns">grep - Search Text Patterns</a></h3>
<pre><code class="language-bash"># Basic search
grep "pattern" file.txt    # Search for pattern
grep -i "pattern" file     # Case-insensitive
grep -v "pattern" file     # Invert match (exclude)
grep -r "pattern" dir/     # Recursive search
grep -n "pattern" file     # Show line numbers
grep -c "pattern" file     # Count matches

# Advanced options
grep -w "word" file        # Match whole words only
grep -A 3 "pattern" file   # Show 3 lines after match
grep -B 3 "pattern" file   # Show 3 lines before match
grep -C 3 "pattern" file   # Show 3 lines context
grep -l "pattern" files*   # List filenames only
grep -E "regex" file       # Extended regex (or egrep)

# Regular expressions
grep "^start" file         # Lines starting with "start"
grep "end$" file           # Lines ending with "end"
grep "^$" file             # Empty lines
grep "[0-9]\{3\}" file     # Three consecutive digits

# Examples
grep -r "TODO" ~/code/     # Find all TODOs in code
grep -i "error" /var/log/*.log  # Find errors in logs
ps aux | grep nginx        # Find nginx processes
grep -v "^#" config.txt    # Show non-comment lines
netstat -tulpn | grep :80  # Find what's using port 80
</code></pre>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Log file analysis</li>
<li>Finding specific code patterns</li>
<li>Filtering command output</li>
<li>Configuration file parsing</li>
</ul>
<h3 id="sed---stream-editor"><a class="header" href="#sed---stream-editor">sed - Stream Editor</a></h3>
<pre><code class="language-bash"># Basic substitution
sed 's/old/new/' file      # Replace first occurrence per line
sed 's/old/new/g' file     # Replace all occurrences
sed 's/old/new/gi' file    # Case-insensitive global replace
sed -i 's/old/new/g' file  # In-place editing
sed -i.bak 's/old/new/g' file  # In-place with backup

# Line operations
sed -n '5p' file           # Print line 5
sed -n '1,5p' file         # Print lines 1-5
sed '5d' file              # Delete line 5
sed '/pattern/d' file      # Delete lines matching pattern
sed '1,3d' file            # Delete lines 1-3

# Advanced usage
sed '/pattern/s/old/new/' file  # Replace only in matching lines
sed 's/^/  /' file         # Add 2 spaces at start of each line
sed 's/$/\r/' file         # Convert to DOS line endings
sed '/^$/d' file           # Remove empty lines

# Examples
sed 's/localhost/127.0.0.1/g' config  # Replace hostname
sed -n '/ERROR/,/END/p' log    # Print between patterns
sed '/#/d' file                # Remove comment lines
sed 's/\t/ /g' file            # Replace tabs with spaces
</code></pre>
<h3 id="awk---text-processing-language"><a class="header" href="#awk---text-processing-language">awk - Text Processing Language</a></h3>
<pre><code class="language-bash"># Basic usage
awk '{print}' file         # Print all lines
awk '{print $1}' file      # Print first column
awk '{print $1,$3}' file   # Print columns 1 and 3
awk '{print $NF}' file     # Print last column
awk '{print NR,$0}' file   # Print line numbers

# Field separator
awk -F: '{print $1}' /etc/passwd  # Custom delimiter
awk -F',' '{print $2}' data.csv   # CSV parsing

# Patterns and conditions
awk '/pattern/' file       # Print lines matching pattern
awk '$3 &gt; 100' file        # Print if column 3 &gt; 100
awk 'NR==5' file           # Print line 5
awk 'NR&gt;=5 &amp;&amp; NR&lt;=10' file # Print lines 5-10
awk 'length($0) &gt; 80' file # Print lines longer than 80 chars

# Calculations
awk '{sum+=$1} END {print sum}' file  # Sum first column
awk '{print $1*$2}' file   # Multiply columns 1 and 2

# Examples
awk -F: '{print $1}' /etc/passwd  # List usernames
ps aux | awk '{print $2,$11}'  # Print PID and command
df -h | awk '$5+0 &gt; 80 {print $0}'  # Disk usage &gt; 80%
netstat -an | awk '/ESTABLISHED/ {print $5}'  # Connected IPs
awk '{sum+=$1} END {print sum/NR}' data  # Average of column 1
</code></pre>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Log parsing and analysis</li>
<li>Data extraction from structured text</li>
<li>Quick calculations on columns</li>
<li>Report generation</li>
</ul>
<h3 id="head---display-beginning-of-file"><a class="header" href="#head---display-beginning-of-file">head - Display Beginning of File</a></h3>
<pre><code class="language-bash">head file.txt              # First 10 lines
head -n 20 file.txt        # First 20 lines
head -c 100 file.txt       # First 100 bytes
head -n -5 file.txt        # All but last 5 lines

# Examples
head -n 1 *.txt            # First line of each file
head /var/log/syslog       # Quick log preview
</code></pre>
<h3 id="tail---display-end-of-file"><a class="header" href="#tail---display-end-of-file">tail - Display End of File</a></h3>
<pre><code class="language-bash">tail file.txt              # Last 10 lines
tail -n 20 file.txt        # Last 20 lines
tail -f file.txt           # Follow file (live updates)
tail -F file.txt           # Follow with retry (if rotated)
tail -n +5 file.txt        # From line 5 to end

# Examples
tail -f /var/log/syslog    # Monitor system log
tail -n 100 -f app.log     # Follow last 100 lines
tail -f log | grep ERROR   # Filter live log stream
</code></pre>
<h3 id="sort---sort-lines"><a class="header" href="#sort---sort-lines">sort - Sort Lines</a></h3>
<pre><code class="language-bash">sort file.txt              # Alphabetical sort
sort -r file.txt           # Reverse sort
sort -n file.txt           # Numeric sort
sort -u file.txt           # Unique lines only
sort -k 2 file.txt         # Sort by column 2
sort -t: -k3 -n /etc/passwd  # Numeric sort by field 3

# Examples
sort -t',' -k2 -n data.csv # Sort CSV by second column
ls -l | sort -k 5 -n       # Sort files by size
history | sort | uniq -c   # Find most used commands
</code></pre>
<h3 id="uniq---report-unique-lines"><a class="header" href="#uniq---report-unique-lines">uniq - Report Unique Lines</a></h3>
<pre><code class="language-bash">uniq file.txt              # Remove adjacent duplicates
uniq -c file.txt           # Count occurrences
uniq -d file.txt           # Show only duplicates
uniq -u file.txt           # Show only unique lines
uniq -i file.txt           # Case-insensitive

# Examples (usually with sort)
sort file.txt | uniq       # Remove all duplicates
sort file.txt | uniq -c | sort -rn  # Frequency count
</code></pre>
<hr />
<h2 id="search-and-find"><a class="header" href="#search-and-find">Search and Find</a></h2>
<h3 id="find---search-for-files"><a class="header" href="#find---search-for-files">find - Search for Files</a></h3>
<pre><code class="language-bash"># By name
find . -name "file.txt"    # Find by exact name
find . -iname "*.txt"      # Case-insensitive name
find /var -name "*.log"    # Find in specific directory

# By type
find . -type f             # Find files
find . -type d             # Find directories
find . -type l             # Find symbolic links

# By size
find . -size +100M         # Files larger than 100MB
find . -size -1k           # Files smaller than 1KB
find . -empty              # Empty files/directories

# By time
find . -mtime -7           # Modified in last 7 days
find . -atime +30          # Accessed more than 30 days ago
find . -ctime -1           # Changed in last 24 hours
find . -mmin -60           # Modified in last 60 minutes

# By permissions
find . -perm 777           # Exactly 777 permissions
find . -perm -644          # At least 644 permissions
find . -user root          # Owned by root
find . -group www-data     # Owned by www-data group

# Actions
find . -name "*.tmp" -delete  # Delete found files
find . -name "*.sh" -exec chmod +x {} \;  # Execute command
find . -type f -exec wc -l {} +  # Count lines

# Examples
find /home -user john -name "*.pdf"  # User's PDF files
find . -name "*.log" -mtime +30 -delete  # Delete old logs
find /var/www -type f -perm 777  # Find world-writable files
find . -size +50M -size -100M    # Files between 50-100MB
find . -name "*.js" -exec grep -l "TODO" {} \;  # Find TODOs
</code></pre>
<h3 id="locate---quick-file-search"><a class="header" href="#locate---quick-file-search">locate - Quick File Search</a></h3>
<pre><code class="language-bash">locate filename            # Quick search in database
locate -i filename         # Case-insensitive
locate -c pattern          # Count matches
locate -b '\filename'      # Exact basename match

# Update database
sudo updatedb              # Refresh locate database

# Examples
locate nginx.conf          # Find nginx config
locate -r '\.conf$'        # All .conf files
</code></pre>
<h3 id="which---locate-command"><a class="header" href="#which---locate-command">which - Locate Command</a></h3>
<pre><code class="language-bash">which python               # Find command path
which -a python            # Show all matches

# Examples
which docker               # Find Docker binary
type python                # Alternative (bash builtin)
</code></pre>
<h3 id="whereis---locate-binarysourcemanual"><a class="header" href="#whereis---locate-binarysourcemanual">whereis - Locate Binary/Source/Manual</a></h3>
<pre><code class="language-bash">whereis ls                 # Find binary, source, man page
whereis -b ls              # Binary only
whereis -m ls              # Manual only
whereis -s ls              # Source only
</code></pre>
<hr />
<h2 id="process-management-1"><a class="header" href="#process-management-1">Process Management</a></h2>
<h3 id="ps---process-status"><a class="header" href="#ps---process-status">ps - Process Status</a></h3>
<pre><code class="language-bash"># Basic usage
ps                         # Current shell processes
ps aux                     # All processes (BSD style)
ps -ef                     # All processes (System V style)
ps -u username             # User's processes
ps -p 1234                 # Specific process by PID

# Detailed view
ps aux | grep nginx        # Find specific process
ps auxf                    # Process tree (forest)
ps -eo pid,user,%cpu,%mem,cmd  # Custom columns
ps --sort=-%mem            # Sort by memory usage
ps -C nginx                # Processes by command name

# Examples
ps aux | head              # Top processes
ps -eo pid,ppid,cmd,%mem,%cpu --sort=-%cpu | head  # CPU hogs
ps -U www-data             # Web server processes
</code></pre>
<h3 id="top---interactive-process-viewer"><a class="header" href="#top---interactive-process-viewer">top - Interactive Process Viewer</a></h3>
<pre><code class="language-bash">top                        # Launch interactive viewer
top -u username            # Show user's processes
top -p 1234                # Monitor specific PID
top -b -n 1                # Batch mode (one iteration)
top -d 5                   # Update every 5 seconds

# Interactive commands (while running)
# k - kill process
# r - renice (change priority)
# M - sort by memory
# P - sort by CPU
# q - quit
# h - help

# Examples
top -o %MEM                # Sort by memory (macOS)
top | head -20             # First 20 lines
</code></pre>
<h3 id="htop---enhanced-process-viewer"><a class="header" href="#htop---enhanced-process-viewer">htop - Enhanced Process Viewer</a></h3>
<pre><code class="language-bash">htop                       # Launch htop (if installed)
htop -u username           # Show user's processes
htop -p PID,PID            # Monitor specific PIDs

# Interactive features
# F9 - kill process
# F7/F8 - adjust priority
# F5 - tree view
# F3 - search
# F4 - filter
</code></pre>
<h3 id="kill---terminate-process"><a class="header" href="#kill---terminate-process">kill - Terminate Process</a></h3>
<pre><code class="language-bash"># By PID
kill 1234                  # Graceful termination (SIGTERM)
kill -9 1234               # Force kill (SIGKILL)
kill -15 1234              # Explicit SIGTERM
kill -HUP 1234             # Hangup signal (reload config)

# Signal list
kill -l                    # List all signals

# Examples
kill $(pidof firefox)      # Kill by process name
killall nginx              # Kill all nginx processes
pkill -u username          # Kill user's processes
</code></pre>
<h3 id="pkillkillall---kill-by-name"><a class="header" href="#pkillkillall---kill-by-name">pkill/killall - Kill by Name</a></h3>
<pre><code class="language-bash">pkill firefox              # Kill by process name
pkill -u username          # Kill user's processes
pkill -9 python            # Force kill all python processes
pkill -f "script.py"       # Kill by full command line

killall nginx              # Kill all nginx processes
killall -u username bash   # Kill user's bash sessions
</code></pre>
<h3 id="jobsbgfg---job-control"><a class="header" href="#jobsbgfg---job-control">jobs/bg/fg - Job Control</a></h3>
<pre><code class="language-bash"># Job control
command &amp;                  # Run in background
jobs                       # List background jobs
fg %1                      # Bring job 1 to foreground
bg %1                      # Resume job 1 in background
Ctrl+Z                     # Suspend current job
disown %1                  # Detach job from shell

# Examples
find / -name "*.log" &gt; /tmp/logs.txt &amp;  # Background search
sleep 100 &amp;                # Background sleep
jobs -l                    # List with PIDs
</code></pre>
<h3 id="nohup---run-immune-to-hangups"><a class="header" href="#nohup---run-immune-to-hangups">nohup - Run Immune to Hangups</a></h3>
<pre><code class="language-bash">nohup command &amp;            # Run detached from terminal
nohup ./script.sh &amp;        # Script continues after logout
nohup command &gt; output.log 2&gt;&amp;1 &amp;  # Redirect output

# Examples
nohup python server.py &gt; server.log 2&gt;&amp;1 &amp;
nohup long_running_task.sh &amp;
</code></pre>
<h3 id="systemctl---service-management"><a class="header" href="#systemctl---service-management">systemctl - Service Management</a></h3>
<pre><code class="language-bash"># Service operations
systemctl start nginx      # Start service
systemctl stop nginx       # Stop service
systemctl restart nginx    # Restart service
systemctl reload nginx     # Reload configuration
systemctl status nginx     # Service status
systemctl enable nginx     # Enable at boot
systemctl disable nginx    # Disable at boot

# System operations
systemctl reboot           # Reboot system
systemctl poweroff         # Shutdown system
systemctl suspend          # Suspend system

# Information
systemctl list-units       # List active units
systemctl list-unit-files  # List all unit files
systemctl --failed         # Show failed services
systemctl is-enabled nginx # Check if enabled
systemctl is-active nginx  # Check if running

# Examples
systemctl status sshd      # Check SSH status
systemctl restart apache2  # Restart web server
systemctl list-dependencies nginx  # Show dependencies
</code></pre>
<hr />
<h2 id="system-monitoring"><a class="header" href="#system-monitoring">System Monitoring</a></h2>
<h3 id="df---disk-free-space"><a class="header" href="#df---disk-free-space">df - Disk Free Space</a></h3>
<pre><code class="language-bash">df                         # Show disk usage
df -h                      # Human-readable sizes
df -i                      # Inode usage
df -T                      # Show filesystem type
df /home                   # Specific mount point

# Examples
df -h | grep -v tmpfs      # Exclude temporary filesystems
df -h --total              # Show total summary
</code></pre>
<h3 id="du---disk-usage"><a class="header" href="#du---disk-usage">du - Disk Usage</a></h3>
<pre><code class="language-bash">du                         # Directory space usage
du -h                      # Human-readable
du -sh *                   # Summary for each item
du -sh directory           # Total for directory
du -ah                     # All files (not just directories)
du --max-depth=1           # Limit directory depth

# Examples
du -sh /var/log            # Log directory size
du -h | sort -rh | head -10  # Top 10 largest directories
du -ch *.log | tail -1     # Total size of log files
</code></pre>
<h3 id="free---memory-usage"><a class="header" href="#free---memory-usage">free - Memory Usage</a></h3>
<pre><code class="language-bash">free                       # Show memory usage
free -h                    # Human-readable
free -m                    # In megabytes
free -g                    # In gigabytes
free -s 5                  # Update every 5 seconds

# Examples
free -h                    # Quick memory check
watch -n 1 free -h         # Monitor continuously
</code></pre>
<h3 id="vmstat---virtual-memory-statistics"><a class="header" href="#vmstat---virtual-memory-statistics">vmstat - Virtual Memory Statistics</a></h3>
<pre><code class="language-bash">vmstat                     # Memory, process, paging stats
vmstat 1                   # Update every second
vmstat 1 10                # 10 samples, 1 second apart
vmstat -s                  # Memory statistics
vmstat -d                  # Disk statistics

# Examples
vmstat 5                   # Monitor system stats
</code></pre>
<h3 id="iostat---io-statistics"><a class="header" href="#iostat---io-statistics">iostat - I/O Statistics</a></h3>
<pre><code class="language-bash">iostat                     # CPU and disk I/O stats
iostat -x                  # Extended statistics
iostat -d 1                # Disk stats every second
iostat -p sda              # Specific disk

# Examples
iostat -xz 1               # Extended, skip zero-activity
</code></pre>
<h3 id="netstat---network-statistics"><a class="header" href="#netstat---network-statistics">netstat - Network Statistics</a></h3>
<pre><code class="language-bash">netstat -tulpn             # Listening ports with programs
netstat -an                # All connections, numeric
netstat -r                 # Routing table
netstat -i                 # Network interfaces
netstat -s                 # Protocol statistics

# Examples
netstat -tulpn | grep :80  # Check port 80
netstat -ant | grep ESTABLISHED  # Active connections
</code></pre>
<h3 id="ss---socket-statistics-newer-netstat"><a class="header" href="#ss---socket-statistics-newer-netstat">ss - Socket Statistics (newer netstat)</a></h3>
<pre><code class="language-bash">ss -tulpn                  # Listening TCP/UDP ports
ss -ta                     # All TCP sockets
ss -ua                     # All UDP sockets
ss -s                      # Summary statistics
ss dst :80                 # Connections to port 80

# Examples
ss -t state established    # Established TCP connections
ss -o state established    # With timer info
ss -p | grep ssh           # SSH connections
</code></pre>
<h3 id="lsof---list-open-files"><a class="header" href="#lsof---list-open-files">lsof - List Open Files</a></h3>
<pre><code class="language-bash">lsof                       # All open files
lsof -u username           # User's open files
lsof -i :80                # Processes using port 80
lsof -i TCP:1-1024         # Processes on ports 1-1024
lsof /path/to/file         # What's accessing a file
lsof -c nginx              # Files opened by nginx
lsof -p 1234               # Files opened by PID

# Examples
lsof -i -P -n              # Network connections (no DNS)
lsof +D /var/log           # Everything under directory
lsof -t -i :8080           # PIDs using port 8080
</code></pre>
<hr />
<h2 id="user-management"><a class="header" href="#user-management">User Management</a></h2>
<h3 id="useradd---create-user"><a class="header" href="#useradd---create-user">useradd - Create User</a></h3>
<pre><code class="language-bash">useradd username           # Create user
useradd -m username        # Create with home directory
useradd -m -s /bin/bash username  # Specify shell
useradd -m -G group1,group2 user  # Add to groups
useradd -m -e 2024-12-31 user     # With expiry date

# Examples
useradd -m -s /bin/bash john
useradd -m -G sudo,docker admin
</code></pre>
<h3 id="usermod---modify-user"><a class="header" href="#usermod---modify-user">usermod - Modify User</a></h3>
<pre><code class="language-bash">usermod -aG sudo username  # Add to sudo group
usermod -s /bin/zsh user   # Change shell
usermod -L username        # Lock account
usermod -U username        # Unlock account
usermod -e 2024-12-31 user # Set expiry date

# Examples
usermod -aG docker username  # Add to docker group
usermod -d /new/home -m user # Change home directory
</code></pre>
<h3 id="userdel---delete-user"><a class="header" href="#userdel---delete-user">userdel - Delete User</a></h3>
<pre><code class="language-bash">userdel username           # Delete user
userdel -r username        # Delete user and home directory
</code></pre>
<h3 id="passwd---change-password"><a class="header" href="#passwd---change-password">passwd - Change Password</a></h3>
<pre><code class="language-bash">passwd                     # Change your password
passwd username            # Change user's password (as root)
passwd -l username         # Lock password
passwd -u username         # Unlock password
passwd -e username         # Expire password (force change)

# Examples
passwd john                # Set password for john
passwd -S john             # Show password status
</code></pre>
<h3 id="su---switch-user"><a class="header" href="#su---switch-user">su - Switch User</a></h3>
<pre><code class="language-bash">su                         # Switch to root
su username                # Switch to user
su - username              # Switch with environment
su -c "command" username   # Run command as user

# Examples
su - postgres              # Switch to postgres user
su -c "systemctl restart nginx" root
</code></pre>
<h3 id="sudo---execute-as-superuser"><a class="header" href="#sudo---execute-as-superuser">sudo - Execute as Superuser</a></h3>
<pre><code class="language-bash">sudo command               # Run command as root
sudo -u user command       # Run as specific user
sudo -i                    # Interactive root shell
sudo -s                    # Shell as root
sudo -l                    # List allowed commands
sudo -k                    # Invalidate cached credentials

# Examples
sudo apt update            # Update package lists
sudo -u www-data touch /var/www/file
sudo !!                    # Run last command with sudo
</code></pre>
<hr />
<h2 id="permissions"><a class="header" href="#permissions">Permissions</a></h2>
<h3 id="chmod---change-file-mode"><a class="header" href="#chmod---change-file-mode">chmod - Change File Mode</a></h3>
<pre><code class="language-bash"># Numeric mode
chmod 644 file             # rw-r--r--
chmod 755 file             # rwxr-xr-x
chmod 777 file             # rwxrwxrwx
chmod 600 file             # rw-------

# Symbolic mode
chmod u+x file             # Add execute for user
chmod g-w file             # Remove write for group
chmod o=r file             # Set others to read only
chmod a+r file             # Add read for all
chmod u+x,g+x file         # Multiple changes

# Recursive
chmod -R 755 directory     # Apply recursively

# Examples
chmod +x script.sh         # Make executable
chmod -R 755 /var/www      # Web directory permissions
chmod u+s file             # Set SUID bit
chmod g+s directory        # Set SGID bit
chmod +t directory         # Set sticky bit
</code></pre>
<p><strong>Permission numbers:</strong></p>
<ul>
<li>4 = read (r)</li>
<li>2 = write (w)</li>
<li>1 = execute (x)</li>
<li>Sum for each user/group/others</li>
</ul>
<h3 id="chown---change-ownership"><a class="header" href="#chown---change-ownership">chown - Change Ownership</a></h3>
<pre><code class="language-bash">chown user file            # Change owner
chown user:group file      # Change owner and group
chown -R user:group dir    # Recursive change
chown --reference=ref file # Copy ownership from reference

# Examples
chown www-data:www-data /var/www/html
chown -R mysql:mysql /var/lib/mysql
chown john:developers project/
</code></pre>
<h3 id="chgrp---change-group"><a class="header" href="#chgrp---change-group">chgrp - Change Group</a></h3>
<pre><code class="language-bash">chgrp group file           # Change group
chgrp -R group directory   # Recursive change

# Examples
chgrp www-data website/
chgrp -R developers /opt/project
</code></pre>
<h3 id="umask---default-permissions"><a class="header" href="#umask---default-permissions">umask - Default Permissions</a></h3>
<pre><code class="language-bash">umask                      # Show current umask
umask 022                  # Set umask (755 for dirs, 644 for files)
umask 002                  # Set umask (775 for dirs, 664 for files)

# Examples
umask 077                  # Private by default (700/600)
</code></pre>
<hr />
<h2 id="package-management"><a class="header" href="#package-management">Package Management</a></h2>
<h3 id="apt-debianubuntu"><a class="header" href="#apt-debianubuntu">APT (Debian/Ubuntu)</a></h3>
<pre><code class="language-bash"># Update
apt update                 # Update package lists
apt upgrade                # Upgrade packages
apt full-upgrade           # Upgrade + handle dependencies
apt dist-upgrade           # Distribution upgrade

# Install/Remove
apt install package        # Install package
apt install package1 package2  # Multiple packages
apt remove package         # Remove package
apt purge package          # Remove package and config
apt autoremove             # Remove unused dependencies

# Search and Info
apt search keyword         # Search packages
apt show package           # Package information
apt list --installed       # List installed packages
apt list --upgradable      # List upgradable packages

# Examples
apt install nginx          # Install web server
apt remove --purge apache2 # Complete removal
apt install build-essential git curl
</code></pre>
<h3 id="dnfyum-rhelfedoracentos"><a class="header" href="#dnfyum-rhelfedoracentos">DNF/YUM (RHEL/Fedora/CentOS)</a></h3>
<pre><code class="language-bash"># Update
dnf update                 # Update packages
dnf upgrade                # Synonym for update

# Install/Remove
dnf install package        # Install package
dnf remove package         # Remove package
dnf autoremove             # Remove orphaned dependencies

# Search and Info
dnf search keyword         # Search packages
dnf info package           # Package information
dnf list installed         # List installed packages

# Examples
dnf install httpd          # Install Apache
dnf groupinstall "Development Tools"
</code></pre>
<h3 id="snap-universal"><a class="header" href="#snap-universal">Snap (Universal)</a></h3>
<pre><code class="language-bash">snap install package       # Install snap package
snap remove package        # Remove package
snap refresh               # Update all snaps
snap list                  # List installed snaps
snap find keyword          # Search snaps

# Examples
snap install docker
snap install --classic code  # Classic confinement
</code></pre>
<hr />
<h2 id="network-commands"><a class="header" href="#network-commands">Network Commands</a></h2>
<h3 id="ip---network-configuration"><a class="header" href="#ip---network-configuration">ip - Network Configuration</a></h3>
<pre><code class="language-bash"># Address management
ip addr show               # Show all IP addresses
ip addr show eth0          # Show specific interface
ip addr add IP/MASK dev eth0  # Add IP address
ip addr del IP/MASK dev eth0  # Delete IP address

# Link management
ip link show               # Show network interfaces
ip link set eth0 up        # Bring interface up
ip link set eth0 down      # Bring interface down

# Route management
ip route show              # Show routing table
ip route add default via GATEWAY  # Add default route
ip route del default       # Delete default route

# Neighbor (ARP)
ip neigh show              # Show ARP table

# Examples
ip addr show               # Quick network overview
ip route get 8.8.8.8       # Show route to destination
ip link set eth0 mtu 9000  # Set MTU
</code></pre>
<h3 id="ping---test-connectivity"><a class="header" href="#ping---test-connectivity">ping - Test Connectivity</a></h3>
<pre><code class="language-bash">ping host                  # Ping host
ping -c 4 host             # Send 4 packets
ping -i 2 host             # 2 second interval
ping -s 1000 host          # 1000 byte packets
ping -W 1 host             # 1 second timeout

# Examples
ping -c 4 google.com       # Test internet connectivity
ping 192.168.1.1           # Test local gateway
</code></pre>
<h3 id="curl---transfer-data"><a class="header" href="#curl---transfer-data">curl - Transfer Data</a></h3>
<pre><code class="language-bash"># Basic requests
curl URL                   # GET request
curl -O URL                # Download file (keep name)
curl -o file.txt URL       # Download with custom name
curl -I URL                # Headers only
curl -L URL                # Follow redirects

# HTTP methods
curl -X POST URL           # POST request
curl -X PUT URL            # PUT request
curl -X DELETE URL         # DELETE request

# Data and headers
curl -d "param=value" URL  # POST data
curl -H "Header: Value" URL  # Custom header
curl -u user:pass URL      # Basic authentication
curl -b cookies.txt URL    # Send cookies
curl -c cookies.txt URL    # Save cookies

# Examples
curl -I https://google.com  # Check headers
curl -o page.html https://example.com
curl -X POST -H "Content-Type: application/json" -d '{"key":"value"}' API_URL
curl -u admin:password http://api.example.com
</code></pre>
<h3 id="wget---download-files"><a class="header" href="#wget---download-files">wget - Download Files</a></h3>
<pre><code class="language-bash">wget URL                   # Download file
wget -O filename URL       # Save with custom name
wget -c URL                # Continue interrupted download
wget -b URL                # Background download
wget -r URL                # Recursive download
wget --limit-rate=200k URL # Limit download speed
wget -i urls.txt           # Download multiple URLs

# Examples
wget https://example.com/file.iso
wget -c https://mirrors.kernel.org/ubuntu/ubuntu-22.04.iso
wget -r -np -k http://example.com  # Mirror website
</code></pre>
<h3 id="ssh---secure-shell"><a class="header" href="#ssh---secure-shell">ssh - Secure Shell</a></h3>
<pre><code class="language-bash">ssh user@host              # Connect to host
ssh -p 2222 user@host      # Custom port
ssh -i key.pem user@host   # Use specific key
ssh user@host command      # Run remote command
ssh -L 8080:localhost:80 user@host  # Local port forwarding
ssh -R 8080:localhost:80 user@host  # Remote port forwarding

# Examples
ssh john@192.168.1.100
ssh -i ~/.ssh/aws-key.pem ubuntu@ec2-instance
ssh user@host 'df -h'      # Check remote disk space
</code></pre>
<h3 id="scp---secure-copy"><a class="header" href="#scp---secure-copy">scp - Secure Copy</a></h3>
<pre><code class="language-bash">scp file user@host:/path   # Copy to remote
scp user@host:/path/file . # Copy from remote
scp -r directory user@host:/path  # Copy directory
scp -P 2222 file user@host:/path  # Custom port
scp -i key.pem file user@host:/path  # Specific key

# Examples
scp backup.tar.gz user@backup-server:/backups/
scp -r website/ user@server:/var/www/
scp user@server:/var/log/app.log ./logs/
</code></pre>
<h3 id="rsync---sync-files"><a class="header" href="#rsync---sync-files">rsync - Sync Files</a></h3>
<pre><code class="language-bash">rsync -av source/ dest/    # Archive and verbose
rsync -avz source/ user@host:dest/  # With compression
rsync -av --delete src/ dst/  # Delete in destination
rsync -av --progress src/ dst/  # Show progress
rsync -av --exclude="*.log" src/ dst/  # Exclude pattern

# Examples
rsync -avz ~/project/ backup-server:/backups/project/
rsync -av --delete /var/www/ /backup/www/
rsync -avz -e "ssh -p 2222" src/ user@host:dest/
</code></pre>
<hr />
<h2 id="service-management"><a class="header" href="#service-management">Service Management</a></h2>
<h3 id="journalctl---query-systemd-journal"><a class="header" href="#journalctl---query-systemd-journal">journalctl - Query Systemd Journal</a></h3>
<pre><code class="language-bash">journalctl                 # Show all logs
journalctl -f              # Follow logs (tail -f)
journalctl -u nginx        # Service logs
journalctl -u nginx -f     # Follow service logs
journalctl --since today   # Today's logs
journalctl --since "1 hour ago"  # Last hour
journalctl -p err          # Error priority and above
journalctl -k              # Kernel messages
journalctl -b              # Current boot logs
journalctl --disk-usage    # Disk usage by logs

# Examples
journalctl -u sshd -n 100  # Last 100 SSH log entries
journalctl --since "2024-01-01" --until "2024-01-31"
journalctl -u nginx --since yesterday
</code></pre>
<hr />
<h2 id="compression"><a class="header" href="#compression">Compression</a></h2>
<h3 id="tar---archive-files"><a class="header" href="#tar---archive-files">tar - Archive Files</a></h3>
<pre><code class="language-bash"># Create archives
tar -cvf archive.tar files # Create tar archive
tar -czvf archive.tar.gz files  # Create gzipped archive
tar -cjvf archive.tar.bz2 files # Create bzip2 archive
tar -cJvf archive.tar.xz files  # Create xz archive

# Extract archives
tar -xvf archive.tar       # Extract tar
tar -xzvf archive.tar.gz   # Extract gzipped
tar -xjvf archive.tar.bz2  # Extract bzip2
tar -xJvf archive.tar.xz   # Extract xz
tar -xzvf archive.tar.gz -C /dest  # Extract to directory

# List contents
tar -tvf archive.tar       # List contents
tar -tzvf archive.tar.gz   # List gzipped archive

# Examples
tar -czvf backup-$(date +%Y%m%d).tar.gz /home/user/
tar -xzvf website.tar.gz -C /var/www/
tar -czvf project.tar.gz --exclude='*.log' project/
</code></pre>
<h3 id="gzipgunzip---compress-files"><a class="header" href="#gzipgunzip---compress-files">gzip/gunzip - Compress Files</a></h3>
<pre><code class="language-bash">gzip file.txt              # Compress (creates file.txt.gz)
gzip -k file.txt           # Keep original
gzip -9 file.txt           # Maximum compression
gunzip file.txt.gz         # Decompress
gzip -l file.txt.gz        # List compression info

# Examples
gzip -r directory/         # Compress all files in directory
gzip -c file.txt &gt; file.txt.gz  # Keep original
</code></pre>
<h3 id="zipunzip---zip-archives"><a class="header" href="#zipunzip---zip-archives">zip/unzip - Zip Archives</a></h3>
<pre><code class="language-bash">zip archive.zip files      # Create zip
zip -r archive.zip dir/    # Recursive zip
unzip archive.zip          # Extract zip
unzip -l archive.zip       # List contents
unzip archive.zip -d /dest # Extract to directory

# Examples
zip -r backup.zip /home/user/Documents
unzip file.zip
zip -e secure.zip file     # Password protected
</code></pre>
<hr />
<h2 id="disk-management"><a class="header" href="#disk-management">Disk Management</a></h2>
<h3 id="fdisk---partition-disk"><a class="header" href="#fdisk---partition-disk">fdisk - Partition Disk</a></h3>
<pre><code class="language-bash">fdisk -l                   # List all disks and partitions
fdisk /dev/sda             # Open disk for partitioning

# Interactive commands (in fdisk):
# n - new partition
# d - delete partition
# p - print partition table
# w - write changes
# q - quit without saving
</code></pre>
<h3 id="mountumount---mount-filesystems"><a class="header" href="#mountumount---mount-filesystems">mount/umount - Mount Filesystems</a></h3>
<pre><code class="language-bash">mount                      # Show mounted filesystems
mount /dev/sda1 /mnt       # Mount partition
mount -t nfs server:/share /mnt  # Mount NFS
mount -o loop disk.iso /mnt # Mount ISO
umount /mnt                # Unmount
umount -l /mnt             # Lazy unmount

# Examples
mount /dev/sdb1 /media/usb
mount -t cifs //server/share /mnt -o username=user
mount --bind /source /dest # Bind mount
</code></pre>
<h3 id="mkfs---make-filesystem"><a class="header" href="#mkfs---make-filesystem">mkfs - Make Filesystem</a></h3>
<pre><code class="language-bash">mkfs.ext4 /dev/sda1        # Create ext4 filesystem
mkfs.xfs /dev/sda1         # Create XFS filesystem
mkfs.vfat /dev/sda1        # Create FAT filesystem

# Examples
mkfs.ext4 -L MyDisk /dev/sdb1  # With label
mkfs.ext4 -m 1 /dev/sdb1   # Reserve 1% for root
</code></pre>
<hr />
<h2 id="system-information-1"><a class="header" href="#system-information-1">System Information</a></h2>
<h3 id="uname---system-information"><a class="header" href="#uname---system-information">uname - System Information</a></h3>
<pre><code class="language-bash">uname -a                   # All information
uname -r                   # Kernel release
uname -m                   # Machine hardware
uname -o                   # Operating system
</code></pre>
<h3 id="lscpu---cpu-information"><a class="header" href="#lscpu---cpu-information">lscpu - CPU Information</a></h3>
<pre><code class="language-bash">lscpu                      # Detailed CPU info
lscpu | grep "CPU(s)"      # Number of CPUs
</code></pre>
<h3 id="lsblk---block-devices"><a class="header" href="#lsblk---block-devices">lsblk - Block Devices</a></h3>
<pre><code class="language-bash">lsblk                      # List block devices
lsblk -f                   # Show filesystems
lsblk -o NAME,SIZE,TYPE,MOUNTPOINT  # Custom columns
</code></pre>
<h3 id="lspci---pci-devices"><a class="header" href="#lspci---pci-devices">lspci - PCI Devices</a></h3>
<pre><code class="language-bash">lspci                      # List PCI devices
lspci -v                   # Verbose output
lspci | grep VGA           # Graphics card info
</code></pre>
<h3 id="lsusb---usb-devices"><a class="header" href="#lsusb---usb-devices">lsusb - USB Devices</a></h3>
<pre><code class="language-bash">lsusb                      # List USB devices
lsusb -v                   # Verbose output
</code></pre>
<h3 id="hostname---system-hostname"><a class="header" href="#hostname---system-hostname">hostname - System Hostname</a></h3>
<pre><code class="language-bash">hostname                   # Show hostname
hostname -I                # Show IP addresses
hostnamectl                # Detailed host information
hostnamectl set-hostname new-name  # Change hostname
</code></pre>
<h3 id="date---date-and-time"><a class="header" href="#date---date-and-time">date - Date and Time</a></h3>
<pre><code class="language-bash">date                       # Current date and time
date +%Y-%m-%d             # Custom format (2024-01-15)
date +%s                   # Unix timestamp
date -d "yesterday"        # Yesterday's date
date -d "next Monday"      # Next Monday

# Examples
date +%Y%m%d-%H%M%S        # 20240115-143025
date -d @1704067200        # Convert timestamp
</code></pre>
<h3 id="uptime---system-uptime"><a class="header" href="#uptime---system-uptime">uptime - System Uptime</a></h3>
<pre><code class="language-bash">uptime                     # How long system is running
uptime -p                  # Pretty format
uptime -s                  # Since when
</code></pre>
<hr />
<h2 id="practical-tips-and-best-practices"><a class="header" href="#practical-tips-and-best-practices">Practical Tips and Best Practices</a></h2>
<h3 id="command-chaining"><a class="header" href="#command-chaining">Command Chaining</a></h3>
<pre><code class="language-bash"># Sequential execution
command1 ; command2        # Run both regardless
command1 &amp;&amp; command2       # Run command2 if command1 succeeds
command1 || command2       # Run command2 if command1 fails

# Examples
apt update &amp;&amp; apt upgrade  # Update then upgrade
make || echo "Build failed"
cd /tmp &amp;&amp; rm -rf old_files
</code></pre>
<h3 id="redirection-and-pipes"><a class="header" href="#redirection-and-pipes">Redirection and Pipes</a></h3>
<pre><code class="language-bash"># Output redirection
command &gt; file             # Overwrite file
command &gt;&gt; file            # Append to file
command 2&gt; file            # Redirect stderr
command &gt; file 2&gt;&amp;1        # Redirect both stdout and stderr
command &amp;&gt; file            # Redirect both (shorthand)

# Input redirection
command &lt; file             # Read from file
command &lt;&lt; EOF             # Here document
multiline input
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="this-section-will-provide-an-overview-of-netfilter-and-its-role-in-packet-filtering"><a class="header" href="#this-section-will-provide-an-overview-of-netfilter-and-its-role-in-packet-filtering">This section will provide an overview of netfilter and its role in packet filtering.</a></h1>
<h1 id="netfilter"><a class="header" href="#netfilter">Netfilter</a></h1>
<p>Netfilter is a framework provided by the Linux kernel for packet filtering, network address translation (NAT), and other packet mangling. It allows system administrators to define rules for how packets should be handled by the kernel.</p>
<h2 id="key-concepts"><a class="header" href="#key-concepts">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Hooks</strong>: Netfilter provides hooks in the networking stack where packets can be intercepted and processed. The main hooks are:</p>
<ul>
<li><strong>PREROUTING</strong>: Before routing decisions are made.</li>
<li><strong>INPUT</strong>: For packets destined for the local system.</li>
<li><strong>FORWARD</strong>: For packets being routed through the system.</li>
<li><strong>OUTPUT</strong>: For packets generated by the local system.</li>
<li><strong>POSTROUTING</strong>: After routing decisions are made.</li>
</ul>
</li>
<li>
<p><strong>Tables</strong>: Netfilter organizes rules into tables, with the most common being:</p>
<ul>
<li><strong>filter</strong>: The default table for packet filtering.</li>
<li><strong>nat</strong>: Used for network address translation.</li>
<li><strong>mangle</strong>: Used for specialized packet alterations.</li>
</ul>
</li>
<li>
<p><strong>Chains</strong>: Each table contains chains, which are lists of rules that packets are checked against. Each rule specifies a target action (e.g., ACCEPT, DROP) when a packet matches.</p>
</li>
</ul>
<h2 id="common-commands"><a class="header" href="#common-commands">Common Commands</a></h2>
<ol>
<li>
<p><strong>List Rules</strong>: To view the current rules in a specific table, use:</p>
<pre><code class="language-bash">iptables -L
</code></pre>
</li>
<li>
<p><strong>Add a Rule</strong>: To add a new rule to a chain, use:</p>
<pre><code class="language-bash">iptables -A INPUT -p tcp --dport 80 -j ACCEPT
</code></pre>
</li>
<li>
<p><strong>Delete a Rule</strong>: To delete a specific rule, use:</p>
<pre><code class="language-bash">iptables -D INPUT -p tcp --dport 80 -j ACCEPT
</code></pre>
</li>
<li>
<p><strong>Save Rules</strong>: To save the current rules to a file, use:</p>
<pre><code class="language-bash">iptables-save &gt; /etc/iptables/rules.v4
</code></pre>
</li>
</ol>
<h2 id="applications"><a class="header" href="#applications">Applications</a></h2>
<p>Netfilter is widely used for:</p>
<ul>
<li><strong>Firewalling</strong>: Protecting systems from unauthorized access and attacks.</li>
<li><strong>NAT</strong>: Allowing multiple devices on a local network to share a single public IP address.</li>
<li><strong>Traffic Shaping</strong>: Managing and controlling the flow of network traffic.</li>
</ul>
<h2 id="conclusion-1"><a class="header" href="#conclusion-1">Conclusion</a></h2>
<p>Netfilter is a crucial component of the Linux networking stack, providing powerful capabilities for packet filtering and manipulation. Understanding how to configure and use netfilter effectively is essential for system administrators and network engineers.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tc"><a class="header" href="#tc">tc</a></h1>
<p><code>tc</code> (traffic control) is a utility in the Linux kernel used to configure Traffic Control in the network stack. It allows administrators to configure the queuing discipline (qdisc), which determines how packets are enqueued and dequeued from the network interface.</p>
<h3 id="important-components-of-tc"><a class="header" href="#important-components-of-tc">Important Components of <code>tc</code></a></h3>
<ol>
<li><strong>qdisc (Queuing Discipline)</strong>: The core component of <code>tc</code>, which defines the algorithm used to manage the packet queue. Examples include <code>pfifo_fast</code>, <code>fq_codel</code>, and <code>netem</code>.</li>
<li><strong>class</strong>: A way to create a hierarchy within a qdisc, allowing for more granular control over traffic. Classes can be used to apply different rules to different types of traffic.</li>
<li><strong>filter</strong>: Used to classify packets into different classes. Filters can match on various packet attributes, such as IP address, port number, or protocol.</li>
<li><strong>action</strong>: Defines what to do with packets that match a filter. Actions can include marking, mirroring, or redirecting packets.</li>
</ol>
<h3 id="uses-of-tc"><a class="header" href="#uses-of-tc">Uses of <code>tc</code></a></h3>
<ul>
<li><strong>Traffic Shaping</strong>: Control the rate of outgoing traffic to ensure that the network is not overwhelmed. This can be useful for managing bandwidth usage and ensuring fair distribution of network resources.</li>
<li><strong>Traffic Policing</strong>: Enforce limits on the rate of incoming traffic, dropping packets that exceed the specified rate. This can help protect against network abuse or attacks.</li>
<li><strong>Network Emulation</strong>: Simulate various network conditions, such as latency, packet loss, and jitter, to test the performance of applications under different scenarios.</li>
<li><strong>Quality of Service (QoS)</strong>: Prioritize certain types of traffic to ensure that critical applications receive the necessary bandwidth and low latency.</li>
</ul>
<p>By using <code>tc</code>, administrators can fine-tune network performance, improve reliability, and ensure that critical applications have the necessary resources to function optimally.</p>
<p>Add delay to all traffic on eth0</p>
<pre><code class="language-bash">sudo tc qdisc add dev eth0 root netem delay 100ms
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iptables"><a class="header" href="#iptables">iptables</a></h1>
<p>iptables is a user-space utility program that allows a system administrator to configure the IP packet filter rules of the Linux kernel firewall. It is a powerful tool for managing network traffic and enhancing security.</p>
<h2 id="key-concepts-1"><a class="header" href="#key-concepts-1">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Chains</strong>: A chain is a set of rules that iptables uses to determine the action to take on packets. There are three built-in chains: INPUT, OUTPUT, and FORWARD.</p>
</li>
<li>
<p><strong>Tables</strong>: iptables organizes rules into tables, with the most common being the filter table, which is used for packet filtering.</p>
</li>
<li>
<p><strong>Targets</strong>: Each rule in a chain specifies a target, which is the action to take when a packet matches the rule. Common targets include ACCEPT, DROP, and REJECT.</p>
</li>
</ul>
<h2 id="common-commands-1"><a class="header" href="#common-commands-1">Common Commands</a></h2>
<ol>
<li>
<p><strong>List Rules</strong>: To view the current rules in a specific chain, use:</p>
<pre><code class="language-bash">iptables -L
</code></pre>
</li>
<li>
<p><strong>Add a Rule</strong>: To add a new rule to a chain, use:</p>
<pre><code class="language-bash">iptables -A INPUT -s 192.168.1.1 -j ACCEPT
</code></pre>
</li>
<li>
<p><strong>Delete a Rule</strong>: To delete a specific rule, use:</p>
<pre><code class="language-bash">iptables -D INPUT -s 192.168.1.1 -j ACCEPT
</code></pre>
</li>
<li>
<p><strong>Save Rules</strong>: To save the current rules to a file, use:</p>
<pre><code class="language-bash">iptables-save &gt; /etc/iptables/rules.v4
</code></pre>
</li>
</ol>
<h2 id="applications-1"><a class="header" href="#applications-1">Applications</a></h2>
<p>iptables is widely used for:</p>
<ul>
<li><strong>Network Security</strong>: Protecting systems from unauthorized access and attacks.</li>
<li><strong>Traffic Control</strong>: Managing and controlling the flow of network traffic.</li>
<li><strong>Logging</strong>: Keeping track of network activity for analysis and troubleshooting.</li>
</ul>
<h2 id="conclusion-2"><a class="header" href="#conclusion-2">Conclusion</a></h2>
<p>iptables is an essential tool for network management and security in Linux environments. Understanding how to configure and use iptables effectively is crucial for system administrators and network engineers.</p>
<h1 id="eli10-what-is-iptables"><a class="header" href="#eli10-what-is-iptables">ELI10: What is iptables?</a></h1>
<p>iptables is like a set of rules for your computer's door. Just like you might have rules about who can come into your house or what they can bring, iptables helps your computer decide what kind of data can come in or go out.</p>
<p>Here’s a simple breakdown:</p>
<ul>
<li>
<p><strong>Chains</strong>: Think of these as different doors. Each door has its own set of rules. For example, one door might let in friends (INPUT), another might let out toys (OUTPUT), and a third might let things pass through without stopping (FORWARD).</p>
</li>
<li>
<p><strong>Tables</strong>: These are like the lists of rules for each door. The most common list is for filtering, which decides what gets to come in or go out.</p>
</li>
<li>
<p><strong>Targets</strong>: When something tries to come through a door, the rules tell it what to do. It might be allowed in (ACCEPT), told to go away (DROP), or asked to leave a message (REJECT).</p>
</li>
</ul>
<p>So, iptables is a way to keep your computer safe and make sure only the right data gets in and out!</p>
<h1 id="example-commands"><a class="header" href="#example-commands">Example Commands</a></h1>
<ol>
<li>
<p><strong>List Rules</strong>: To see what rules are set up, you can use:</p>
<pre><code class="language-bash">iptables -L
</code></pre>
</li>
<li>
<p><strong>Add a Rule</strong>: If you want to let a specific friend in, you can add a rule like this:</p>
<pre><code class="language-bash">iptables -A INPUT -s 192.168.1.1 -j ACCEPT
</code></pre>
</li>
<li>
<p><strong>Delete a Rule</strong>: If you want to remove a rule, you can do it like this:</p>
<pre><code class="language-bash">iptables -D INPUT -s 192.168.1.1 -j ACCEPT
</code></pre>
</li>
<li>
<p><strong>Save Rules</strong>: To keep your rules safe, you can save them to a file:</p>
<pre><code class="language-bash">iptables-save &gt; /etc/iptables/rules.v4
</code></pre>
</li>
</ol>
<h1 id="why-use-iptables"><a class="header" href="#why-use-iptables">Why Use iptables?</a></h1>
<p>Using iptables helps keep your computer safe from bad data and makes sure everything runs smoothly. It's like having a good security system for your digital home!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="android-development"><a class="header" href="#android-development">Android Development</a></h1>
<h2 id="overview-3"><a class="header" href="#overview-3">Overview</a></h2>
<p>Android is an open-source operating system based on the Linux kernel, designed primarily for mobile devices. It's the world's most popular mobile platform, powering billions of devices worldwide. Android development involves creating applications using Java, Kotlin, or C++ that run on Android devices.</p>
<h2 id="key-concepts-2"><a class="header" href="#key-concepts-2">Key Concepts</a></h2>
<h3 id="android-platform-architecture"><a class="header" href="#android-platform-architecture">Android Platform Architecture</a></h3>
<p>Android is built on a multi-layered architecture:</p>
<ol>
<li><strong>Linux Kernel</strong>: Foundation providing core system services</li>
<li><strong>Hardware Abstraction Layer (HAL)</strong>: Interface between hardware and software</li>
<li><strong>Android Runtime (ART)</strong>: Executes app bytecode with optimized performance</li>
<li><strong>Native C/C++ Libraries</strong>: Core system libraries (SQLite, OpenGL, etc.)</li>
<li><strong>Java API Framework</strong>: High-level APIs for app development</li>
<li><strong>System Apps</strong>: Pre-installed applications</li>
</ol>
<h3 id="core-components"><a class="header" href="#core-components">Core Components</a></h3>
<p>Android applications are built using four fundamental components:</p>
<ol>
<li><strong>Activities</strong>: Single screen with a user interface</li>
<li><strong>Services</strong>: Background operations without UI</li>
<li><strong>Broadcast Receivers</strong>: Respond to system-wide broadcast announcements</li>
<li><strong>Content Providers</strong>: Manage shared app data</li>
</ol>
<h2 id="development-environment"><a class="header" href="#development-environment">Development Environment</a></h2>
<h3 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h3>
<ul>
<li><strong>Java Development Kit (JDK)</strong>: Version 8 or higher</li>
<li><strong>Android Studio</strong>: Official IDE for Android development</li>
<li><strong>Android SDK</strong>: Software development kit with tools and APIs</li>
<li><strong>Gradle</strong>: Build automation system</li>
</ul>
<h3 id="installation-1"><a class="header" href="#installation-1">Installation</a></h3>
<pre><code class="language-bash"># Download Android Studio from https://developer.android.com/studio
# Install Android Studio and SDK through the setup wizard

# Verify installation
adb --version
</code></pre>
<h2 id="quick-start-1"><a class="header" href="#quick-start-1">Quick Start</a></h2>
<h3 id="creating-your-first-app"><a class="header" href="#creating-your-first-app">Creating Your First App</a></h3>
<pre><code class="language-kotlin">// MainActivity.kt
package com.example.myfirstapp

import android.os.Bundle
import androidx.appcompat.app.AppCompatActivity
import android.widget.TextView

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        val textView: TextView = findViewById(R.id.textView)
        textView.text = "Hello, Android!"
    }
}
</code></pre>
<pre><code class="language-xml">&lt;!-- res/layout/activity_main.xml --&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"&gt;
    
    &lt;TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello World!"
        android:textSize="24sp" /&gt;
        
&lt;/LinearLayout&gt;
</code></pre>
<h3 id="androidmanifestxml"><a class="header" href="#androidmanifestxml">AndroidManifest.xml</a></h3>
<p>Every Android app must have a manifest file:</p>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"&gt;
    
    &lt;application
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.AppCompat"&gt;
        
        &lt;activity android:name=".MainActivity"&gt;
            &lt;intent-filter&gt;
                &lt;action android:name="android.intent.action.MAIN" /&gt;
                &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
            &lt;/intent-filter&gt;
        &lt;/activity&gt;
    &lt;/application&gt;
    
    &lt;!-- Permissions --&gt;
    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
&lt;/manifest&gt;
</code></pre>
<h2 id="android-application-components"><a class="header" href="#android-application-components">Android Application Components</a></h2>
<h3 id="activities-lifecycle"><a class="header" href="#activities-lifecycle">Activities Lifecycle</a></h3>
<pre><code class="language-kotlin">class MyActivity : AppCompatActivity() {
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        // Initialize activity
        setContentView(R.layout.activity_my)
    }
    
    override fun onStart() {
        super.onStart()
        // Activity is becoming visible
    }
    
    override fun onResume() {
        super.onResume()
        // Activity is interactive
    }
    
    override fun onPause() {
        super.onPause()
        // Activity is losing focus
    }
    
    override fun onStop() {
        super.onStop()
        // Activity is no longer visible
    }
    
    override fun onDestroy() {
        super.onDestroy()
        // Activity is being destroyed
    }
}
</code></pre>
<h3 id="intents"><a class="header" href="#intents">Intents</a></h3>
<p>Intents are messaging objects used to request actions from other components:</p>
<pre><code class="language-kotlin">// Explicit Intent - Start specific activity
val intent = Intent(this, SecondActivity::class.java)
intent.putExtra("KEY_NAME", "value")
startActivity(intent)

// Implicit Intent - Let system find appropriate component
val browserIntent = Intent(Intent.ACTION_VIEW, Uri.parse("https://www.example.com"))
startActivity(browserIntent)

// Share content
val shareIntent = Intent().apply {
    action = Intent.ACTION_SEND
    putExtra(Intent.EXTRA_TEXT, "Check out this content!")
    type = "text/plain"
}
startActivity(Intent.createChooser(shareIntent, "Share via"))
</code></pre>
<h2 id="ui-development"><a class="header" href="#ui-development">UI Development</a></h2>
<h3 id="views-and-viewgroups"><a class="header" href="#views-and-viewgroups">Views and ViewGroups</a></h3>
<pre><code class="language-kotlin">// Programmatically create UI
val layout = LinearLayout(this).apply {
    orientation = LinearLayout.VERTICAL
    layoutParams = LinearLayout.LayoutParams(
        LinearLayout.LayoutParams.MATCH_PARENT,
        LinearLayout.LayoutParams.MATCH_PARENT
    )
}

val button = Button(this).apply {
    text = "Click Me"
    setOnClickListener {
        Toast.makeText(context, "Button clicked!", Toast.LENGTH_SHORT).show()
    }
}

layout.addView(button)
setContentView(layout)
</code></pre>
<h3 id="recyclerview-example"><a class="header" href="#recyclerview-example">RecyclerView Example</a></h3>
<pre><code class="language-kotlin">// Adapter
class MyAdapter(private val items: List&lt;String&gt;) : 
    RecyclerView.Adapter&lt;MyAdapter.ViewHolder&gt;() {
    
    class ViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val textView: TextView = view.findViewById(R.id.textView)
    }
    
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ViewHolder {
        val view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_layout, parent, false)
        return ViewHolder(view)
    }
    
    override fun onBindViewHolder(holder: ViewHolder, position: Int) {
        holder.textView.text = items[position]
    }
    
    override fun getItemCount() = items.size
}

// Usage in Activity
val recyclerView: RecyclerView = findViewById(R.id.recyclerView)
recyclerView.layoutManager = LinearLayoutManager(this)
recyclerView.adapter = MyAdapter(listOf("Item 1", "Item 2", "Item 3"))
</code></pre>
<h2 id="data-storage"><a class="header" href="#data-storage">Data Storage</a></h2>
<h3 id="sharedpreferences"><a class="header" href="#sharedpreferences">SharedPreferences</a></h3>
<pre><code class="language-kotlin">// Save data
val sharedPref = getSharedPreferences("MyPrefs", Context.MODE_PRIVATE)
with(sharedPref.edit()) {
    putString("username", "john_doe")
    putInt("score", 100)
    apply()
}

// Read data
val username = sharedPref.getString("username", "default")
val score = sharedPref.getInt("score", 0)
</code></pre>
<h3 id="room-database"><a class="header" href="#room-database">Room Database</a></h3>
<pre><code class="language-kotlin">// Entity
@Entity(tableName = "users")
data class User(
    @PrimaryKey(autoGenerate = true) val id: Int = 0,
    @ColumnInfo(name = "name") val name: String,
    @ColumnInfo(name = "email") val email: String
)

// DAO
@Dao
interface UserDao {
    @Query("SELECT * FROM users")
    fun getAllUsers(): List&lt;User&gt;
    
    @Insert
    fun insert(user: User)
    
    @Delete
    fun delete(user: User)
}

// Database
@Database(entities = [User::class], version = 1)
abstract class AppDatabase : RoomDatabase() {
    abstract fun userDao(): UserDao
}
</code></pre>
<h2 id="networking-2"><a class="header" href="#networking-2">Networking</a></h2>
<h3 id="retrofit-example"><a class="header" href="#retrofit-example">Retrofit Example</a></h3>
<pre><code class="language-kotlin">// API Interface
interface ApiService {
    @GET("users/{id}")
    suspend fun getUser(@Path("id") userId: Int): User
    
    @POST("users")
    suspend fun createUser(@Body user: User): User
}

// Implementation
val retrofit = Retrofit.Builder()
    .baseUrl("https://api.example.com/")
    .addConverterFactory(GsonConverterFactory.create())
    .build()

val apiService = retrofit.create(ApiService::class.java)

// Usage with Coroutines
lifecycleScope.launch {
    try {
        val user = apiService.getUser(1)
        // Update UI with user data
    } catch (e: Exception) {
        // Handle error
    }
}
</code></pre>
<h2 id="modern-android-development"><a class="header" href="#modern-android-development">Modern Android Development</a></h2>
<h3 id="jetpack-compose"><a class="header" href="#jetpack-compose">Jetpack Compose</a></h3>
<p>Jetpack Compose is Android's modern toolkit for building native UI:</p>
<pre><code class="language-kotlin">@Composable
fun Greeting(name: String) {
    Text(
        text = "Hello $name!",
        modifier = Modifier.padding(16.dp),
        style = MaterialTheme.typography.h4
    )
}

@Composable
fun Counter() {
    var count by remember { mutableStateOf(0) }
    
    Column(
        modifier = Modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text("Count: $count")
        Button(onClick = { count++ }) {
            Text("Increment")
        }
    }
}
</code></pre>
<h3 id="viewmodel"><a class="header" href="#viewmodel">ViewModel</a></h3>
<pre><code class="language-kotlin">class MyViewModel : ViewModel() {
    private val _uiState = MutableLiveData&lt;UiState&gt;()
    val uiState: LiveData&lt;UiState&gt; = _uiState
    
    fun loadData() {
        viewModelScope.launch {
            try {
                val data = repository.getData()
                _uiState.value = UiState.Success(data)
            } catch (e: Exception) {
                _uiState.value = UiState.Error(e.message)
            }
        }
    }
}

// Usage in Activity
class MainActivity : AppCompatActivity() {
    private val viewModel: MyViewModel by viewModels()
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        viewModel.uiState.observe(this) { state -&gt;
            when (state) {
                is UiState.Success -&gt; updateUI(state.data)
                is UiState.Error -&gt; showError(state.message)
            }
        }
    }
}
</code></pre>
<h2 id="testing"><a class="header" href="#testing">Testing</a></h2>
<h3 id="unit-tests"><a class="header" href="#unit-tests">Unit Tests</a></h3>
<pre><code class="language-kotlin">class CalculatorTest {
    @Test
    fun addition_isCorrect() {
        assertEquals(4, 2 + 2)
    }
    
    @Test
    fun viewModel_loadsData() = runTest {
        val viewModel = MyViewModel(FakeRepository())
        viewModel.loadData()
        
        val state = viewModel.uiState.value
        assertTrue(state is UiState.Success)
    }
}
</code></pre>
<h3 id="instrumented-tests"><a class="header" href="#instrumented-tests">Instrumented Tests</a></h3>
<pre><code class="language-kotlin">@RunWith(AndroidJUnit4::class)
class MainActivityTest {
    @get:Rule
    val activityRule = ActivityScenarioRule(MainActivity::class.java)
    
    @Test
    fun testButtonClick() {
        onView(withId(R.id.button))
            .perform(click())
        
        onView(withId(R.id.textView))
            .check(matches(withText("Button clicked!")))
    }
}
</code></pre>
<h2 id="build-configuration"><a class="header" href="#build-configuration">Build Configuration</a></h2>
<h3 id="buildgradle-module-level"><a class="header" href="#buildgradle-module-level">build.gradle (Module level)</a></h3>
<pre><code class="language-gradle">plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
}

android {
    namespace 'com.example.myapp'
    compileSdk 34
    
    defaultConfig {
        applicationId "com.example.myapp"
        minSdk 24
        targetSdk 34
        versionCode 1
        versionName "1.0"
    }
    
    buildTypes {
        release {
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

dependencies {
    implementation 'androidx.core:core-ktx:1.12.0'
    implementation 'androidx.appcompat:appcompat:1.6.1'
    implementation 'com.google.android.material:material:1.11.0'
    
    testImplementation 'junit:junit:4.13.2'
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
}
</code></pre>
<h2 id="best-practices-4"><a class="header" href="#best-practices-4">Best Practices</a></h2>
<ol>
<li><strong>Follow Material Design Guidelines</strong>: Use Material Components for consistent UI</li>
<li><strong>Handle Configuration Changes</strong>: Save state during rotation</li>
<li><strong>Use Architecture Components</strong>: ViewModel, LiveData, Room</li>
<li><strong>Implement Proper Error Handling</strong>: Never ignore exceptions</li>
<li><strong>Optimize Performance</strong>: Avoid blocking the main thread</li>
<li><strong>Test Your Code</strong>: Write unit and instrumented tests</li>
<li><strong>Follow Android Security Best Practices</strong>: Validate inputs, use encryption</li>
<li><strong>Support Multiple Screen Sizes</strong>: Use responsive layouts</li>
<li><strong>Handle Permissions Properly</strong>: Request permissions at runtime</li>
<li><strong>Keep Libraries Updated</strong>: Use latest stable versions</li>
</ol>
<h2 id="resources-1"><a class="header" href="#resources-1">Resources</a></h2>
<h3 id="documentation-2"><a class="header" href="#documentation-2">Documentation</a></h3>
<ul>
<li><a href="https://developer.android.com/">Android Developers</a></li>
<li><a href="https://developer.android.com/reference">Android API Reference</a></li>
<li><a href="https://kotlinlang.org/docs/home.html">Kotlin Documentation</a></li>
<li><a href="https://developer.android.com/jetpack/compose">Jetpack Compose</a></li>
</ul>
<h3 id="related-files"><a class="header" href="#related-files">Related Files</a></h3>
<ul>
<li><a href="android/internals.html">Android Internals</a> - Understanding Android architecture</li>
<li><a href="android/adb.html">ADB Commands</a> - Android Debug Bridge reference</li>
<li><a href="android/development.html">Development Guide</a> - Detailed development workflow</li>
</ul>
<h2 id="common-issues-1"><a class="header" href="#common-issues-1">Common Issues</a></h2>
<h3 id="gradle-sync-failed"><a class="header" href="#gradle-sync-failed">Gradle Sync Failed</a></h3>
<pre><code class="language-bash"># Clear Gradle cache
./gradlew clean
# Invalidate caches in Android Studio: File &gt; Invalidate Caches / Restart
</code></pre>
<h3 id="app-crashes-on-launch"><a class="header" href="#app-crashes-on-launch">App Crashes on Launch</a></h3>
<ul>
<li>Check Logcat for stack traces</li>
<li>Verify all required permissions are declared</li>
<li>Ensure ProGuard rules are correct for release builds</li>
</ul>
<h3 id="memory-leaks"><a class="header" href="#memory-leaks">Memory Leaks</a></h3>
<ul>
<li>Use LeakCanary for detection</li>
<li>Avoid holding Activity context in long-lived objects</li>
<li>Unregister listeners and callbacks</li>
</ul>
<h2 id="next-steps-1"><a class="header" href="#next-steps-1">Next Steps</a></h2>
<ol>
<li>Complete the <a href="android/development.html">Android Development Guide</a></li>
<li>Learn <a href="android/adb.html">ADB commands</a> for debugging</li>
<li>Study <a href="android/internals.html">Android Internals</a> for deeper understanding</li>
<li>Build sample projects to practice</li>
<li>Explore Jetpack Compose for modern UI development</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="android-internals"><a class="header" href="#android-internals">Android Internals</a></h1>
<h2 id="overview-4"><a class="header" href="#overview-4">Overview</a></h2>
<p>Android is an open-source operating system primarily designed for mobile devices such as smartphones and tablets. It is based on the Linux kernel and developed by Google. Understanding Android internals is crucial for developers who want to create efficient and optimized applications or modify the operating system itself.</p>
<h2 id="key-components"><a class="header" href="#key-components">Key Components</a></h2>
<h3 id="1-linux-kernel"><a class="header" href="#1-linux-kernel">1. Linux Kernel</a></h3>
<p>The Linux kernel is the core of the Android operating system. It provides essential system services such as process management, memory management, security, and hardware abstraction. The kernel also includes drivers for various hardware components like display, camera, and audio.</p>
<h3 id="2-hardware-abstraction-layer-hal"><a class="header" href="#2-hardware-abstraction-layer-hal">2. Hardware Abstraction Layer (HAL)</a></h3>
<p>The Hardware Abstraction Layer (HAL) defines a standard interface for hardware vendors to implement. It allows Android to communicate with the hardware-specific drivers in the Linux kernel. HAL modules are implemented as shared libraries and loaded by the Android system at runtime.</p>
<h3 id="3-android-runtime-art"><a class="header" href="#3-android-runtime-art">3. Android Runtime (ART)</a></h3>
<p>The Android Runtime (ART) is the managed runtime used by applications and some system services on Android. ART executes the Dalvik Executable (DEX) bytecode, which is compiled from Java source code. ART includes features like ahead-of-time (AOT) compilation, just-in-time (JIT) compilation, and garbage collection to improve performance and memory management.</p>
<h3 id="4-native-cc-libraries"><a class="header" href="#4-native-cc-libraries">4. Native C/C++ Libraries</a></h3>
<p>Android provides a set of native libraries written in C and C++ that are used by various components of the system. These libraries include:</p>
<ul>
<li><strong>Bionic</strong>: The standard C library (libc) for Android, derived from BSD's libc.</li>
<li><strong>SurfaceFlinger</strong>: A compositing window manager that renders the display surface.</li>
<li><strong>Media Framework</strong>: Provides support for playing and recording audio and video.</li>
<li><strong>SQLite</strong>: A lightweight relational database engine used for data storage.</li>
</ul>
<h3 id="5-application-framework"><a class="header" href="#5-application-framework">5. Application Framework</a></h3>
<p>The Application Framework provides a set of higher-level services and APIs that developers use to build applications. Key components of the application framework include:</p>
<ul>
<li><strong>Activity Manager</strong>: Manages the lifecycle of applications and activities.</li>
<li><strong>Content Providers</strong>: Manage access to structured data and provide a way to share data between applications.</li>
<li><strong>Resource Manager</strong>: Handles resources like strings, graphics, and layout files.</li>
<li><strong>Notification Manager</strong>: Allows applications to display notifications to the user.</li>
<li><strong>View System</strong>: Provides a set of UI components for building user interfaces.</li>
</ul>
<h3 id="6-system-applications"><a class="header" href="#6-system-applications">6. System Applications</a></h3>
<p>Android includes a set of core system applications that provide basic functionality to the user. These applications are written using the same APIs available to third-party developers. Examples of system applications include:</p>
<ul>
<li><strong>Phone</strong>: Manages phone calls and contacts.</li>
<li><strong>Messages</strong>: Handles SMS and MMS messaging.</li>
<li><strong>Browser</strong>: Provides web browsing capabilities.</li>
<li><strong>Settings</strong>: Allows users to configure system settings.</li>
</ul>
<h2 id="conclusion-3"><a class="header" href="#conclusion-3">Conclusion</a></h2>
<p>Understanding Android internals is essential for developers who want to create high-performance applications or contribute to the Android open-source project. By familiarizing yourself with the key components of the Android operating system, you can gain a deeper insight into how Android works and how to optimize your applications for better performance and user experience.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="android-development-guide"><a class="header" href="#android-development-guide">Android Development Guide</a></h1>
<h2 id="overview-5"><a class="header" href="#overview-5">Overview</a></h2>
<p>This guide covers the complete Android development workflow, from setting up Android Studio to building, debugging, and deploying applications. It focuses on practical development practices and tools that every Android developer should know.</p>
<h2 id="android-studio-setup"><a class="header" href="#android-studio-setup">Android Studio Setup</a></h2>
<h3 id="installation-2"><a class="header" href="#installation-2">Installation</a></h3>
<p>Android Studio is the official IDE for Android development, built on JetBrains' IntelliJ IDEA.</p>
<pre><code class="language-bash"># Download from https://developer.android.com/studio

# Linux installation
sudo tar -xzf android-studio-*.tar.gz -C /opt/
cd /opt/android-studio/bin
./studio.sh

# Add to PATH (optional)
echo 'export PATH=$PATH:/opt/android-studio/bin' &gt;&gt; ~/.bashrc
</code></pre>
<h3 id="initial-configuration-1"><a class="header" href="#initial-configuration-1">Initial Configuration</a></h3>
<ol>
<li><strong>Welcome Screen</strong>: Choose "Standard" installation</li>
<li><strong>SDK Components</strong>: Install latest Android SDK and tools</li>
<li><strong>Emulator</strong>: Install Android Emulator and system images</li>
<li><strong>Gradle</strong>: Let Android Studio manage Gradle installation</li>
</ol>
<h3 id="sdk-manager"><a class="header" href="#sdk-manager">SDK Manager</a></h3>
<pre><code class="language-bash"># Open SDK Manager: Tools &gt; SDK Manager

# Essential SDK Packages:
# - Android SDK Platform (latest)
# - Android SDK Build-Tools
# - Android Emulator
# - Android SDK Platform-Tools
# - Android SDK Tools

# Command-line SDK management
sdkmanager --list
sdkmanager "platform-tools" "platforms;android-34"
sdkmanager --update
</code></pre>
<h3 id="avd-manager"><a class="header" href="#avd-manager">AVD Manager</a></h3>
<p>Create virtual devices for testing:</p>
<pre><code class="language-bash"># Open AVD Manager: Tools &gt; AVD Manager

# Or use command line
avdmanager create avd -n Pixel_7 -k "system-images;android-34;google_apis;x86_64"
avdmanager list avd

# Start emulator from command line
emulator -avd Pixel_7
</code></pre>
<h2 id="project-structure"><a class="header" href="#project-structure">Project Structure</a></h2>
<h3 id="standard-android-project"><a class="header" href="#standard-android-project">Standard Android Project</a></h3>
<pre><code>MyApp/
├── app/
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/example/myapp/
│   │   │   │   ├── MainActivity.kt
│   │   │   │   ├── models/
│   │   │   │   ├── viewmodels/
│   │   │   │   └── repositories/
│   │   │   ├── res/
│   │   │   │   ├── layout/
│   │   │   │   ├── values/
│   │   │   │   ├── drawable/
│   │   │   │   ├── mipmap/
│   │   │   │   └── menu/
│   │   │   └── AndroidManifest.xml
│   │   ├── test/          # Unit tests
│   │   └── androidTest/   # Instrumented tests
│   ├── build.gradle
│   └── proguard-rules.pro
├── gradle/
├── build.gradle
├── settings.gradle
└── gradle.properties
</code></pre>
<h3 id="key-directories"><a class="header" href="#key-directories">Key Directories</a></h3>
<ul>
<li><strong>java/</strong>: Source code (Kotlin/Java)</li>
<li><strong>res/</strong>: Resources (layouts, strings, images)</li>
<li><strong>res/layout/</strong>: XML layout files</li>
<li><strong>res/values/</strong>: Strings, colors, dimensions, styles</li>
<li><strong>res/drawable/</strong>: Images and vector graphics</li>
<li><strong>res/mipmap/</strong>: App launcher icons</li>
<li><strong>AndroidManifest.xml</strong>: App configuration and permissions</li>
</ul>
<h2 id="activities"><a class="header" href="#activities">Activities</a></h2>
<h3 id="creating-an-activity"><a class="header" href="#creating-an-activity">Creating an Activity</a></h3>
<p>Activities represent a single screen in your app.</p>
<pre><code class="language-kotlin">// MainActivity.kt
package com.example.myapp

import android.os.Bundle
import android.widget.Button
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity

class MainActivity : AppCompatActivity() {
    
    private lateinit var textView: TextView
    private lateinit var button: Button
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        
        // Initialize views
        textView = findViewById(R.id.textView)
        button = findViewById(R.id.button)
        
        // Set click listener
        button.setOnClickListener {
            textView.text = "Button clicked!"
        }
    }
}
</code></pre>
<h3 id="activity-lifecycle"><a class="header" href="#activity-lifecycle">Activity Lifecycle</a></h3>
<pre><code class="language-kotlin">class MyActivity : AppCompatActivity() {
    
    private val TAG = "MyActivity"
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        Log.d(TAG, "onCreate called")
        setContentView(R.layout.activity_my)
        
        // Restore saved state
        savedInstanceState?.let {
            val savedText = it.getString("saved_text")
            textView.text = savedText
        }
    }
    
    override fun onStart() {
        super.onStart()
        Log.d(TAG, "onStart called")
        // Activity becoming visible
    }
    
    override fun onResume() {
        super.onResume()
        Log.d(TAG, "onResume called")
        // Activity in foreground, user can interact
        // Start animations, resume sensors
    }
    
    override fun onPause() {
        super.onPause()
        Log.d(TAG, "onPause called")
        // Activity losing focus
        // Pause animations, release sensors
    }
    
    override fun onStop() {
        super.onStop()
        Log.d(TAG, "onStop called")
        // Activity no longer visible
        // Release heavy resources
    }
    
    override fun onDestroy() {
        super.onDestroy()
        Log.d(TAG, "onDestroy called")
        // Activity being destroyed
        // Final cleanup
    }
    
    override fun onSaveInstanceState(outState: Bundle) {
        super.onSaveInstanceState(outState)
        // Save state before activity is killed
        outState.putString("saved_text", textView.text.toString())
    }
}
</code></pre>
<h3 id="registering-activities"><a class="header" href="#registering-activities">Registering Activities</a></h3>
<pre><code class="language-xml">&lt;!-- AndroidManifest.xml --&gt;
&lt;application&gt;
    &lt;!-- Launcher Activity --&gt;
    &lt;activity
        android:name=".MainActivity"
        android:exported="true"&gt;
        &lt;intent-filter&gt;
            &lt;action android:name="android.intent.action.MAIN" /&gt;
            &lt;category android:name="android.intent.category.LAUNCHER" /&gt;
        &lt;/intent-filter&gt;
    &lt;/activity&gt;
    
    &lt;!-- Other Activities --&gt;
    &lt;activity
        android:name=".SecondActivity"
        android:label="@string/second_activity_title"
        android:parentActivityName=".MainActivity" /&gt;
&lt;/application&gt;
</code></pre>
<h2 id="intents-1"><a class="header" href="#intents-1">Intents</a></h2>
<h3 id="explicit-intents"><a class="header" href="#explicit-intents">Explicit Intents</a></h3>
<p>Used to start specific components within your app:</p>
<pre><code class="language-kotlin">// Start another activity
val intent = Intent(this, SecondActivity::class.java)
startActivity(intent)

// Pass data to activity
val intent = Intent(this, DetailActivity::class.java).apply {
    putExtra("USER_ID", 12345)
    putExtra("USERNAME", "john_doe")
    putExtra("USER_DATA", userData) // Parcelable or Serializable
}
startActivity(intent)

// Receive data in target activity
class DetailActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        val userId = intent.getIntExtra("USER_ID", -1)
        val username = intent.getStringExtra("USERNAME")
        val userData = intent.getParcelableExtra&lt;UserData&gt;("USER_DATA")
    }
}
</code></pre>
<h3 id="activity-results"><a class="header" href="#activity-results">Activity Results</a></h3>
<pre><code class="language-kotlin">// Modern approach using Activity Result API
class MainActivity : AppCompatActivity() {
    
    private val getContent = registerForActivityResult(
        ActivityResultContracts.StartActivityForResult()
    ) { result -&gt;
        if (result.resultCode == Activity.RESULT_OK) {
            val data = result.data?.getStringExtra("RESULT_DATA")
            // Handle result
        }
    }
    
    private fun launchSecondActivity() {
        val intent = Intent(this, SecondActivity::class.java)
        getContent.launch(intent)
    }
}

// Return result from activity
class SecondActivity : AppCompatActivity() {
    
    private fun returnResult() {
        val resultIntent = Intent().apply {
            putExtra("RESULT_DATA", "Some result")
        }
        setResult(Activity.RESULT_OK, resultIntent)
        finish()
    }
}
</code></pre>
<h3 id="implicit-intents"><a class="header" href="#implicit-intents">Implicit Intents</a></h3>
<p>Used to request actions from other apps:</p>
<pre><code class="language-kotlin">// Open web page
val webpage = Uri.parse("https://www.example.com")
val intent = Intent(Intent.ACTION_VIEW, webpage)
startActivity(intent)

// Make phone call
val phoneNumber = Uri.parse("tel:1234567890")
val intent = Intent(Intent.ACTION_DIAL, phoneNumber)
startActivity(intent)

// Send email
val intent = Intent(Intent.ACTION_SENDTO).apply {
    data = Uri.parse("mailto:")
    putExtra(Intent.EXTRA_EMAIL, arrayOf("recipient@example.com"))
    putExtra(Intent.EXTRA_SUBJECT, "Email subject")
    putExtra(Intent.EXTRA_TEXT, "Email body")
}
startActivity(intent)

// Share content
val shareIntent = Intent().apply {
    action = Intent.ACTION_SEND
    putExtra(Intent.EXTRA_TEXT, "Check this out!")
    type = "text/plain"
}
startActivity(Intent.createChooser(shareIntent, "Share via"))

// Take photo
val takePictureIntent = Intent(MediaStore.ACTION_IMAGE_CAPTURE)
if (takePictureIntent.resolveActivity(packageManager) != null) {
    startActivity(takePictureIntent)
}

// Pick image from gallery
val pickPhotoIntent = Intent(Intent.ACTION_PICK, 
    MediaStore.Images.Media.EXTERNAL_CONTENT_URI)
startActivity(pickPhotoIntent)
</code></pre>
<h3 id="intent-filters"><a class="header" href="#intent-filters">Intent Filters</a></h3>
<pre><code class="language-xml">&lt;!-- Declare activity can handle specific actions --&gt;
&lt;activity android:name=".ShareActivity"&gt;
    &lt;intent-filter&gt;
        &lt;action android:name="android.intent.action.SEND" /&gt;
        &lt;category android:name="android.intent.category.DEFAULT" /&gt;
        &lt;data android:mimeType="text/plain" /&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;

&lt;!-- Handle custom URL scheme --&gt;
&lt;activity android:name=".DeepLinkActivity"&gt;
    &lt;intent-filter android:autoVerify="true"&gt;
        &lt;action android:name="android.intent.action.VIEW" /&gt;
        &lt;category android:name="android.intent.category.DEFAULT" /&gt;
        &lt;category android:name="android.intent.category.BROWSABLE" /&gt;
        &lt;data
            android:scheme="https"
            android:host="www.example.com"
            android:pathPrefix="/app" /&gt;
    &lt;/intent-filter&gt;
&lt;/activity&gt;
</code></pre>
<h2 id="layouts"><a class="header" href="#layouts">Layouts</a></h2>
<h3 id="xml-layouts"><a class="header" href="#xml-layouts">XML Layouts</a></h3>
<h4 id="linearlayout"><a class="header" href="#linearlayout">LinearLayout</a></h4>
<pre><code class="language-xml">&lt;!-- res/layout/activity_main.xml --&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp"&gt;
    
    &lt;TextView
        android:id="@+id/titleTextView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/title"
        android:textSize="24sp"
        android:textStyle="bold" /&gt;
    
    &lt;EditText
        android:id="@+id/nameEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:hint="@string/enter_name"
        android:inputType="textPersonName" /&gt;
    
    &lt;Button
        android:id="@+id/submitButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="16dp"
        android:text="@string/submit" /&gt;
    
&lt;/LinearLayout&gt;
</code></pre>
<h4 id="constraintlayout"><a class="header" href="#constraintlayout">ConstraintLayout</a></h4>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;
    
    &lt;TextView
        android:id="@+id/titleTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/title"
        android:textSize="24sp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="32dp" /&gt;
    
    &lt;ImageView
        android:id="@+id/imageView"
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:src="@drawable/placeholder"
        app:layout_constraintTop_toBottomOf="@id/titleTextView"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginTop="24dp" /&gt;
    
    &lt;Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/action"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginBottom="32dp" /&gt;
    
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;
</code></pre>
<h4 id="relativelayout"><a class="header" href="#relativelayout">RelativeLayout</a></h4>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="16dp"&gt;
    
    &lt;TextView
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:text="@string/header"
        android:textSize="20sp" /&gt;
    
    &lt;Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="@string/click_me" /&gt;
    
    &lt;TextView
        android:id="@+id/footer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/footer"
        android:gravity="center" /&gt;
    
&lt;/RelativeLayout&gt;
</code></pre>
<h4 id="framelayout"><a class="header" href="#framelayout">FrameLayout</a></h4>
<pre><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;FrameLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;
    
    &lt;!-- Background --&gt;
    &lt;ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/background"
        android:scaleType="centerCrop" /&gt;
    
    &lt;!-- Foreground content --&gt;
    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:orientation="vertical"
        android:padding="32dp"&gt;
        
        &lt;TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/welcome"
            android:textSize="32sp"
            android:textColor="@android:color/white" /&gt;
        
    &lt;/LinearLayout&gt;
    
&lt;/FrameLayout&gt;
</code></pre>
<h3 id="view-binding"><a class="header" href="#view-binding">View Binding</a></h3>
<p>Safer alternative to findViewById:</p>
<pre><code class="language-kotlin">// Enable in build.gradle
android {
    buildFeatures {
        viewBinding = true
    }
}

// Usage in Activity
class MainActivity : AppCompatActivity() {
    
    private lateinit var binding: ActivityMainBinding
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)
        
        // Access views directly
        binding.button.setOnClickListener {
            binding.textView.text = "Clicked!"
        }
    }
}

// Usage in Fragment
class MyFragment : Fragment() {
    
    private var _binding: FragmentMyBinding? = null
    private val binding get() = _binding!!
    
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        _binding = FragmentMyBinding.inflate(inflater, container, false)
        return binding.root
    }
    
    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}
</code></pre>
<h3 id="recyclerview"><a class="header" href="#recyclerview">RecyclerView</a></h3>
<pre><code class="language-kotlin">// Item layout: res/layout/item_user.xml
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="16dp"
    android:orientation="horizontal"&gt;
    
    &lt;TextView
        android:id="@+id/nameTextView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:textSize="18sp" /&gt;
    
&lt;/LinearLayout&gt;

// Data class
data class User(val id: Int, val name: String)

// Adapter
class UserAdapter(private val users: List&lt;User&gt;) : 
    RecyclerView.Adapter&lt;UserAdapter.UserViewHolder&gt;() {
    
    class UserViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val nameTextView: TextView = view.findViewById(R.id.nameTextView)
    }
    
    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): UserViewHolder {
        val view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_user, parent, false)
        return UserViewHolder(view)
    }
    
    override fun onBindViewHolder(holder: UserViewHolder, position: Int) {
        val user = users[position]
        holder.nameTextView.text = user.name
        holder.itemView.setOnClickListener {
            // Handle click
        }
    }
    
    override fun getItemCount() = users.size
}

// Usage
val recyclerView: RecyclerView = findViewById(R.id.recyclerView)
recyclerView.layoutManager = LinearLayoutManager(this)
recyclerView.adapter = UserAdapter(userList)
</code></pre>
<h2 id="fragments"><a class="header" href="#fragments">Fragments</a></h2>
<pre><code class="language-kotlin">// Fragment class
class MyFragment : Fragment() {
    
    private var _binding: FragmentMyBinding? = null
    private val binding get() = _binding!!
    
    override fun onCreateView(
        inflater: LayoutInflater,
        container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View {
        _binding = FragmentMyBinding.inflate(inflater, container, false)
        return binding.root
    }
    
    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        
        binding.button.setOnClickListener {
            // Handle click
        }
    }
    
    override fun onDestroyView() {
        super.onDestroyView()
        _binding = null
    }
}

// Add fragment to activity
supportFragmentManager.commit {
    setReorderingAllowed(true)
    add(R.id.fragment_container, MyFragment())
}

// Replace fragment
supportFragmentManager.commit {
    setReorderingAllowed(true)
    replace(R.id.fragment_container, AnotherFragment())
    addToBackStack("transaction_name")
}

// Pass arguments to fragment
val fragment = MyFragment().apply {
    arguments = Bundle().apply {
        putString("ARG_NAME", "value")
        putInt("ARG_ID", 123)
    }
}

// Retrieve arguments in fragment
val name = arguments?.getString("ARG_NAME")
val id = arguments?.getInt("ARG_ID")
</code></pre>
<h2 id="resources-2"><a class="header" href="#resources-2">Resources</a></h2>
<h3 id="strings"><a class="header" href="#strings">Strings</a></h3>
<pre><code class="language-xml">&lt;!-- res/values/strings.xml --&gt;
&lt;resources&gt;
    &lt;string name="app_name"&gt;My App&lt;/string&gt;
    &lt;string name="welcome_message"&gt;Welcome, %1$s!&lt;/string&gt;
    &lt;string name="items_count"&gt;You have %d items&lt;/string&gt;
    
    &lt;plurals name="number_of_items"&gt;
        &lt;item quantity="one"&gt;%d item&lt;/item&gt;
        &lt;item quantity="other"&gt;%d items&lt;/item&gt;
    &lt;/plurals&gt;
&lt;/resources&gt;

&lt;!-- Usage in code --&gt;
val welcome = getString(R.string.welcome_message, "John")
val count = getString(R.string.items_count, 5)
val plural = resources.getQuantityString(R.plurals.number_of_items, count, count)
</code></pre>
<h3 id="colors"><a class="header" href="#colors">Colors</a></h3>
<pre><code class="language-xml">&lt;!-- res/values/colors.xml --&gt;
&lt;resources&gt;
    &lt;color name="purple_200"&gt;#FFBB86FC&lt;/color&gt;
    &lt;color name="purple_500"&gt;#FF6200EE&lt;/color&gt;
    &lt;color name="purple_700"&gt;#FF3700B3&lt;/color&gt;
    &lt;color name="teal_200"&gt;#FF03DAC5&lt;/color&gt;
    &lt;color name="black"&gt;#FF000000&lt;/color&gt;
    &lt;color name="white"&gt;#FFFFFFFF&lt;/color&gt;
&lt;/resources&gt;
</code></pre>
<h3 id="dimensions"><a class="header" href="#dimensions">Dimensions</a></h3>
<pre><code class="language-xml">&lt;!-- res/values/dimens.xml --&gt;
&lt;resources&gt;
    &lt;dimen name="padding_small"&gt;8dp&lt;/dimen&gt;
    &lt;dimen name="padding_medium"&gt;16dp&lt;/dimen&gt;
    &lt;dimen name="padding_large"&gt;24dp&lt;/dimen&gt;
    &lt;dimen name="text_size_small"&gt;12sp&lt;/dimen&gt;
    &lt;dimen name="text_size_medium"&gt;16sp&lt;/dimen&gt;
    &lt;dimen name="text_size_large"&gt;20sp&lt;/dimen&gt;
&lt;/resources&gt;
</code></pre>
<h3 id="styles-and-themes"><a class="header" href="#styles-and-themes">Styles and Themes</a></h3>
<pre><code class="language-xml">&lt;!-- res/values/styles.xml --&gt;
&lt;resources&gt;
    &lt;!-- Base application theme --&gt;
    &lt;style name="AppTheme" parent="Theme.MaterialComponents.DayNight"&gt;
        &lt;item name="colorPrimary"&gt;@color/purple_500&lt;/item&gt;
        &lt;item name="colorPrimaryVariant"&gt;@color/purple_700&lt;/item&gt;
        &lt;item name="colorOnPrimary"&gt;@color/white&lt;/item&gt;
        &lt;item name="colorSecondary"&gt;@color/teal_200&lt;/item&gt;
    &lt;/style&gt;
    
    &lt;!-- Custom style --&gt;
    &lt;style name="CustomButton" parent="Widget.MaterialComponents.Button"&gt;
        &lt;item name="android:textColor"&gt;@color/white&lt;/item&gt;
        &lt;item name="backgroundTint"&gt;@color/purple_500&lt;/item&gt;
        &lt;item name="cornerRadius"&gt;8dp&lt;/item&gt;
    &lt;/style&gt;
&lt;/resources&gt;
</code></pre>
<h2 id="debugging"><a class="header" href="#debugging">Debugging</a></h2>
<h3 id="logcat"><a class="header" href="#logcat">Logcat</a></h3>
<pre><code class="language-kotlin">import android.util.Log

class MainActivity : AppCompatActivity() {
    
    companion object {
        private const val TAG = "MainActivity"
    }
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        // Different log levels
        Log.v(TAG, "Verbose message")   // Verbose
        Log.d(TAG, "Debug message")     // Debug
        Log.i(TAG, "Info message")      // Info
        Log.w(TAG, "Warning message")   // Warning
        Log.e(TAG, "Error message")     // Error
        
        // Log with exception
        try {
            // Code that might throw
        } catch (e: Exception) {
            Log.e(TAG, "Error occurred", e)
        }
    }
}
</code></pre>
<h3 id="breakpoints"><a class="header" href="#breakpoints">Breakpoints</a></h3>
<ol>
<li>Click left margin in code editor to set breakpoint</li>
<li>Run app in Debug mode (Shift + F9)</li>
<li>Use Debug panel to step through code:
<ul>
<li>Step Over (F8)</li>
<li>Step Into (F7)</li>
<li>Step Out (Shift + F8)</li>
<li>Resume (F9)</li>
</ul>
</li>
</ol>
<h3 id="layout-inspector"><a class="header" href="#layout-inspector">Layout Inspector</a></h3>
<pre><code>Tools &gt; Layout Inspector

- View hierarchy in real-time
- Inspect view properties
- Debug rendering issues
</code></pre>
<h2 id="build-and-deploy"><a class="header" href="#build-and-deploy">Build and Deploy</a></h2>
<h3 id="building-apk"><a class="header" href="#building-apk">Building APK</a></h3>
<pre><code class="language-bash"># Debug build
./gradlew assembleDebug

# Release build
./gradlew assembleRelease

# Install debug APK
./gradlew installDebug

# APK location
# Debug: app/build/outputs/apk/debug/app-debug.apk
# Release: app/build/outputs/apk/release/app-release.apk
</code></pre>
<h3 id="signing-configuration"><a class="header" href="#signing-configuration">Signing Configuration</a></h3>
<pre><code class="language-gradle">// app/build.gradle
android {
    signingConfigs {
        release {
            storeFile file("release-keystore.jks")
            storePassword "your_store_password"
            keyAlias "your_key_alias"
            keyPassword "your_key_password"
        }
    }
    
    buildTypes {
        release {
            signingConfig signingConfigs.release
            minifyEnabled true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'),
                         'proguard-rules.pro'
        }
    }
}
</code></pre>
<h3 id="proguard-rules"><a class="header" href="#proguard-rules">ProGuard Rules</a></h3>
<pre><code class="language-proguard"># app/proguard-rules.pro

# Keep model classes
-keep class com.example.app.models.** { *; }

# Keep Parcelable implementations
-keep class * implements android.os.Parcelable {
    public static final ** CREATOR;
}

# Gson
-keepattributes Signature
-keepattributes *Annotation*
-keep class com.google.gson.** { *; }

# Retrofit
-keepattributes Signature
-keepattributes Exceptions
-keep class retrofit2.** { *; }
</code></pre>
<h2 id="best-practices-5"><a class="header" href="#best-practices-5">Best Practices</a></h2>
<ol>
<li><strong>Use ConstraintLayout</strong> for complex, flat hierarchies</li>
<li><strong>Implement View Binding</strong> instead of findViewById</li>
<li><strong>Follow Material Design</strong> guidelines</li>
<li><strong>Use string resources</strong> instead of hardcoded strings</li>
<li><strong>Handle configuration changes</strong> properly</li>
<li><strong>Use Fragments</strong> for reusable UI components</li>
<li><strong>Implement proper error handling</strong> and user feedback</li>
<li><strong>Test on multiple devices</strong> and screen sizes</li>
<li><strong>Optimize layouts</strong> to reduce overdraw</li>
<li><strong>Use Android Architecture Components</strong> (ViewModel, LiveData, Room)</li>
</ol>
<h2 id="related-resources"><a class="header" href="#related-resources">Related Resources</a></h2>
<ul>
<li><a href="android/README.html">Android Overview</a></li>
<li><a href="android/internals.html">Android Internals</a></li>
<li><a href="android/adb.html">ADB Commands</a></li>
<li><a href="https://developer.android.com/">Official Android Documentation</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="android-debug-bridge-adb"><a class="header" href="#android-debug-bridge-adb">Android Debug Bridge (ADB)</a></h1>
<h2 id="overview-6"><a class="header" href="#overview-6">Overview</a></h2>
<p>Android Debug Bridge (ADB) is a versatile command-line tool that lets you communicate with an Android device. ADB facilitates a variety of device actions, such as installing and debugging apps, and it provides access to a Unix shell that you can use to run various commands on a device.</p>
<p>ADB is included in the Android SDK Platform Tools package and can be used with physical devices connected via USB or with emulators.</p>
<h2 id="installation-3"><a class="header" href="#installation-3">Installation</a></h2>
<h3 id="linuxmac"><a class="header" href="#linuxmac">Linux/Mac</a></h3>
<pre><code class="language-bash"># Install via Android SDK Platform Tools
# Or use package manager
sudo apt install adb  # Ubuntu/Debian
brew install android-platform-tools  # macOS

# Verify installation
adb version
</code></pre>
<h3 id="windows"><a class="header" href="#windows">Windows</a></h3>
<pre><code class="language-bash"># Download Android SDK Platform Tools from:
# https://developer.android.com/studio/releases/platform-tools

# Add to PATH and verify
adb version
</code></pre>
<h2 id="setup-and-connection"><a class="header" href="#setup-and-connection">Setup and Connection</a></h2>
<h3 id="enable-developer-options"><a class="header" href="#enable-developer-options">Enable Developer Options</a></h3>
<ol>
<li>Go to Settings &gt; About Phone</li>
<li>Tap "Build Number" 7 times</li>
<li>Go back to Settings &gt; Developer Options</li>
<li>Enable "USB Debugging"</li>
</ol>
<h3 id="connect-device-via-usb"><a class="header" href="#connect-device-via-usb">Connect Device via USB</a></h3>
<pre><code class="language-bash"># List connected devices
adb devices

# Output example:
# List of devices attached
# 1234567890ABCDEF    device
# emulator-5554       device

# Connect to specific device
adb -s 1234567890ABCDEF shell
</code></pre>
<h3 id="connect-device-via-wifi"><a class="header" href="#connect-device-via-wifi">Connect Device via WiFi</a></h3>
<pre><code class="language-bash"># Connect device via USB first, then:
# Get device IP address
adb shell ip addr show wlan0

# Enable TCP/IP mode on port 5555
adb tcpip 5555

# Disconnect USB and connect via WiFi
adb connect 192.168.1.100:5555

# Verify connection
adb devices

# Disconnect
adb disconnect 192.168.1.100:5555

# Return to USB mode
adb usb
</code></pre>
<h2 id="basic-commands-1"><a class="header" href="#basic-commands-1">Basic Commands</a></h2>
<h3 id="device-management"><a class="header" href="#device-management">Device Management</a></h3>
<pre><code class="language-bash"># List all connected devices
adb devices -l

# Start ADB server
adb start-server

# Kill ADB server
adb kill-server

# Restart ADB server
adb kill-server &amp;&amp; adb start-server

# Wait for device to be connected
adb wait-for-device

# Get device state
adb get-state

# Get device serial number
adb get-serialno
</code></pre>
<h3 id="device-information"><a class="header" href="#device-information">Device Information</a></h3>
<pre><code class="language-bash"># Get device model
adb shell getprop ro.product.model

# Get Android version
adb shell getprop ro.build.version.release

# Get device manufacturer
adb shell getprop ro.product.manufacturer

# Get device serial number
adb shell getprop ro.serialno

# Get device resolution
adb shell wm size

# Get device density
adb shell wm density

# Display all properties
adb shell getprop

# Get battery status
adb shell dumpsys battery

# Get CPU information
adb shell cat /proc/cpuinfo

# Get memory information
adb shell cat /proc/meminfo
</code></pre>
<h2 id="app-management"><a class="header" href="#app-management">App Management</a></h2>
<h3 id="installing-and-uninstalling-apps"><a class="header" href="#installing-and-uninstalling-apps">Installing and Uninstalling Apps</a></h3>
<pre><code class="language-bash"># Install APK
adb install app.apk

# Install APK to specific location
adb install -s /sdcard/app.apk

# Reinstall existing app (keep data)
adb install -r app.apk

# Install APK to SD card
adb install -s app.apk

# Uninstall app
adb uninstall com.example.app

# Uninstall app but keep data
adb uninstall -k com.example.app
</code></pre>
<h3 id="package-information"><a class="header" href="#package-information">Package Information</a></h3>
<pre><code class="language-bash"># List all packages
adb shell pm list packages

# List third-party packages
adb shell pm list packages -3

# List system packages
adb shell pm list packages -s

# Search for specific package
adb shell pm list packages | grep keyword

# Get path of installed package
adb shell pm path com.example.app

# Get app information
adb shell dumpsys package com.example.app

# Clear app data
adb shell pm clear com.example.app

# Enable/Disable app
adb shell pm enable com.example.app
adb shell pm disable com.example.app
</code></pre>
<h3 id="running-apps"><a class="header" href="#running-apps">Running Apps</a></h3>
<pre><code class="language-bash"># Start an activity
adb shell am start -n com.example.app/.MainActivity

# Start activity with data
adb shell am start -a android.intent.action.VIEW -d "https://example.com"

# Start service
adb shell am startservice com.example.app/.MyService

# Broadcast intent
adb shell am broadcast -a android.intent.action.BOOT_COMPLETED

# Force stop app
adb shell am force-stop com.example.app

# Kill app process
adb shell am kill com.example.app
</code></pre>
<h2 id="file-operations-1"><a class="header" href="#file-operations-1">File Operations</a></h2>
<h3 id="copying-files"><a class="header" href="#copying-files">Copying Files</a></h3>
<pre><code class="language-bash"># Copy file from device to computer
adb pull /sdcard/file.txt ~/Desktop/

# Copy file from computer to device
adb push ~/Desktop/file.txt /sdcard/

# Copy directory recursively
adb pull /sdcard/DCIM/ ~/Pictures/

# Copy with progress display
adb pull /sdcard/large_file.mp4 .

# Push multiple files
adb push file1.txt file2.txt /sdcard/
</code></pre>
<h3 id="file-system-navigation-1"><a class="header" href="#file-system-navigation-1">File System Navigation</a></h3>
<pre><code class="language-bash"># Access device shell
adb shell

# Navigate directories (once in shell)
cd /sdcard
ls -la
pwd

# Create directory
adb shell mkdir /sdcard/NewFolder

# Remove file
adb shell rm /sdcard/file.txt

# Remove directory
adb shell rm -r /sdcard/OldFolder

# Change file permissions
adb shell chmod 777 /sdcard/file.txt

# View file contents
adb shell cat /sdcard/file.txt

# Search for files
adb shell find /sdcard -name "*.txt"
</code></pre>
<h2 id="logging-and-debugging"><a class="header" href="#logging-and-debugging">Logging and Debugging</a></h2>
<h3 id="logcat-1"><a class="header" href="#logcat-1">Logcat</a></h3>
<pre><code class="language-bash"># View all logs
adb logcat

# Clear log buffer
adb logcat -c

# View logs with specific priority
adb logcat *:E  # Error
adb logcat *:W  # Warning
adb logcat *:I  # Info
adb logcat *:D  # Debug
adb logcat *:V  # Verbose

# Filter by tag
adb logcat -s MyApp

# Filter by multiple tags
adb logcat -s MyApp:D ActivityManager:W

# Save logs to file
adb logcat &gt; logfile.txt

# View logs with timestamp
adb logcat -v time

# View logs in different formats
adb logcat -v brief
adb logcat -v process
adb logcat -v tag
adb logcat -v thread
adb logcat -v raw
adb logcat -v long

# Filter using grep
adb logcat | grep "keyword"

# View specific buffer
adb logcat -b radio   # Radio/telephony logs
adb logcat -b events  # Event logs
adb logcat -b main    # Main application logs
adb logcat -b system  # System logs
adb logcat -b crash   # Crash logs

# Continuous monitoring with color
adb logcat -v color
</code></pre>
<h3 id="bug-reports"><a class="header" href="#bug-reports">Bug Reports</a></h3>
<pre><code class="language-bash"># Generate bug report
adb bugreport

# Save bug report to file
adb bugreport &gt; bugreport.txt

# Generate zipped bug report (Android 7.0+)
adb bugreport bugreport.zip
</code></pre>
<h2 id="screen-control"><a class="header" href="#screen-control">Screen Control</a></h2>
<h3 id="screenshots-and-screen-recording"><a class="header" href="#screenshots-and-screen-recording">Screenshots and Screen Recording</a></h3>
<pre><code class="language-bash"># Take screenshot
adb shell screencap /sdcard/screenshot.png
adb pull /sdcard/screenshot.png

# Take screenshot (one command)
adb exec-out screencap -p &gt; screenshot.png

# Record screen (Ctrl+C to stop)
adb shell screenrecord /sdcard/demo.mp4

# Record with time limit (max 180 seconds)
adb shell screenrecord --time-limit 30 /sdcard/demo.mp4

# Record with specific size
adb shell screenrecord --size 1280x720 /sdcard/demo.mp4

# Record with specific bitrate
adb shell screenrecord --bit-rate 6000000 /sdcard/demo.mp4

# Pull recorded video
adb pull /sdcard/demo.mp4
</code></pre>
<h3 id="screen-input"><a class="header" href="#screen-input">Screen Input</a></h3>
<pre><code class="language-bash"># Tap at coordinates (x, y)
adb shell input tap 500 1000

# Swipe from (x1,y1) to (x2,y2) over duration ms
adb shell input swipe 500 1000 500 200 300

# Type text
adb shell input text "Hello%sWorld"  # %s represents space

# Press key
adb shell input keyevent KEYCODE_HOME
adb shell input keyevent KEYCODE_BACK
adb shell input keyevent KEYCODE_MENU
adb shell input keyevent 3  # Home key (key code)

# Common key codes
# KEYCODE_HOME = 3
# KEYCODE_BACK = 4
# KEYCODE_MENU = 82
# KEYCODE_POWER = 26
# KEYCODE_VOLUME_UP = 24
# KEYCODE_VOLUME_DOWN = 25
</code></pre>
<h2 id="system-control"><a class="header" href="#system-control">System Control</a></h2>
<h3 id="power-management"><a class="header" href="#power-management">Power Management</a></h3>
<pre><code class="language-bash"># Reboot device
adb reboot

# Reboot to recovery mode
adb reboot recovery

# Reboot to bootloader
adb reboot bootloader

# Shutdown device (requires root)
adb shell reboot -p

# Wake up screen
adb shell input keyevent KEYCODE_WAKEUP

# Sleep screen
adb shell input keyevent KEYCODE_SLEEP
</code></pre>
<h3 id="network"><a class="header" href="#network">Network</a></h3>
<pre><code class="language-bash"># Check WiFi status
adb shell dumpsys wifi

# Enable WiFi
adb shell svc wifi enable

# Disable WiFi
adb shell svc wifi disable

# Check network connectivity
adb shell ping -c 4 google.com

# Get IP address
adb shell ip addr show wlan0

# Enable/Disable data
adb shell svc data enable
adb shell svc data disable
</code></pre>
<h3 id="settings"><a class="header" href="#settings">Settings</a></h3>
<pre><code class="language-bash"># Get setting value
adb shell settings get system screen_brightness

# Set setting value
adb shell settings put system screen_brightness 100

# Common settings namespaces:
# - system: User preferences
# - secure: Secure system settings
# - global: Device-wide settings

# Enable airplane mode
adb shell settings put global airplane_mode_on 1
adb shell am broadcast -a android.intent.action.AIRPLANE_MODE

# Disable animations (for testing)
adb shell settings put global window_animation_scale 0
adb shell settings put global transition_animation_scale 0
adb shell settings put global animator_duration_scale 0
</code></pre>
<h2 id="advanced-commands"><a class="header" href="#advanced-commands">Advanced Commands</a></h2>
<h3 id="dumpsys"><a class="header" href="#dumpsys">Dumpsys</a></h3>
<pre><code class="language-bash"># Get system information
adb shell dumpsys

# Battery information
adb shell dumpsys battery

# Memory usage
adb shell dumpsys meminfo
adb shell dumpsys meminfo com.example.app

# CPU usage
adb shell dumpsys cpuinfo

# Display information
adb shell dumpsys display

# Activity information
adb shell dumpsys activity

# Current activity
adb shell dumpsys activity activities | grep mResumedActivity

# Package information
adb shell dumpsys package com.example.app

# Window information
adb shell dumpsys window
</code></pre>
<h3 id="performance-monitoring"><a class="header" href="#performance-monitoring">Performance Monitoring</a></h3>
<pre><code class="language-bash"># Monitor CPU usage
adb shell top

# Monitor specific process
adb shell top | grep com.example.app

# Get process list
adb shell ps

# Get process info by name
adb shell ps | grep com.example.app

# Memory stats
adb shell procrank

# Disk usage
adb shell df

# Network statistics
adb shell netstat
</code></pre>
<h3 id="database-operations"><a class="header" href="#database-operations">Database Operations</a></h3>
<pre><code class="language-bash"># Access app database (requires root or debuggable app)
adb shell run-as com.example.app

# Navigate to database directory
cd /data/data/com.example.app/databases/

# Pull database
adb exec-out run-as com.example.app cat databases/mydb.db &gt; mydb.db

# Query database using sqlite3
adb shell "run-as com.example.app sqlite3 databases/mydb.db 'SELECT * FROM users;'"
</code></pre>
<h2 id="testing-and-automation"><a class="header" href="#testing-and-automation">Testing and Automation</a></h2>
<h3 id="monkey-testing"><a class="header" href="#monkey-testing">Monkey Testing</a></h3>
<pre><code class="language-bash"># Generate random events
adb shell monkey -p com.example.app 1000

# Monkey with specific event types
adb shell monkey -p com.example.app --pct-touch 70 --pct-motion 30 1000

# Monkey with seed (reproducible)
adb shell monkey -p com.example.app -s 100 1000

# Throttle events (delay in ms)
adb shell monkey -p com.example.app --throttle 500 1000

# Ignore crashes and continue
adb shell monkey -p com.example.app --ignore-crashes 1000
</code></pre>
<h3 id="ui-automator"><a class="header" href="#ui-automator">UI Automator</a></h3>
<pre><code class="language-bash"># Dump UI hierarchy
adb shell uiautomator dump

# Pull UI hierarchy XML
adb pull /sdcard/window_dump.xml

# Run UI Automator test
adb shell uiautomator runtest UiAutomatorTest.jar -c com.example.test.MyTest
</code></pre>
<h2 id="scripting-with-adb"><a class="header" href="#scripting-with-adb">Scripting with ADB</a></h2>
<h3 id="batch-operations"><a class="header" href="#batch-operations">Batch Operations</a></h3>
<pre><code class="language-bash">#!/bin/bash

# Install app on all connected devices
for device in $(adb devices | grep -v "List" | awk '{print $1}'); do
    echo "Installing on device: $device"
    adb -s $device install app.apk
done

# Clear app data on all devices
for device in $(adb devices | grep -v "List" | awk '{print $1}'); do
    echo "Clearing data on device: $device"
    adb -s $device shell pm clear com.example.app
done
</code></pre>
<h3 id="automated-screenshot-script"><a class="header" href="#automated-screenshot-script">Automated Screenshot Script</a></h3>
<pre><code class="language-bash">#!/bin/bash

# Take screenshot and save with timestamp
timestamp=$(date +"%Y%m%d_%H%M%S")
filename="screenshot_${timestamp}.png"

adb exec-out screencap -p &gt; "$filename"
echo "Screenshot saved: $filename"
</code></pre>
<h3 id="log-filtering-script"><a class="header" href="#log-filtering-script">Log Filtering Script</a></h3>
<pre><code class="language-bash">#!/bin/bash

# Monitor logs for specific package
package="com.example.app"
adb logcat | grep --line-buffered "$package" | while read line; do
    echo "[$(date +"%H:%M:%S")] $line"
done
</code></pre>
<h2 id="troubleshooting-1"><a class="header" href="#troubleshooting-1">Troubleshooting</a></h2>
<h3 id="common-issues-2"><a class="header" href="#common-issues-2">Common Issues</a></h3>
<p><strong>Device not detected:</strong></p>
<pre><code class="language-bash"># Check USB connection
lsusb  # Linux
system_profiler SPUSBDataType  # macOS

# Restart ADB
adb kill-server
adb start-server

# Check device authorization
# Accept the authorization prompt on device
</code></pre>
<p><strong>Permission denied:</strong></p>
<pre><code class="language-bash"># Check USB debugging is enabled
# Revoke USB debugging authorizations and reconnect
# Settings &gt; Developer Options &gt; Revoke USB Debugging Authorizations

# Linux: Add udev rules
sudo vim /etc/udev/rules.d/51-android.rules
# Add: SUBSYSTEM=="usb", ATTR{idVendor}=="18d1", MODE="0666", GROUP="plugdev"
sudo udevadm control --reload-rules
</code></pre>
<p><strong>Multiple devices:</strong></p>
<pre><code class="language-bash"># Specify device with -s flag
adb -s 1234567890ABCDEF shell

# Or use -d for physical device, -e for emulator
adb -d shell  # Physical device
adb -e shell  # Emulator
</code></pre>
<h2 id="best-practices-6"><a class="header" href="#best-practices-6">Best Practices</a></h2>
<ol>
<li>Always specify device with <code>-s</code> when multiple devices are connected</li>
<li>Use <code>adb wait-for-device</code> in scripts before commands</li>
<li>Clear logcat before testing: <code>adb logcat -c</code></li>
<li>Use appropriate log levels to reduce noise</li>
<li>Save important logs to files for later analysis</li>
<li>Be careful with <code>rm</code> commands - there's no undo</li>
<li>Test commands on emulator before using on physical device</li>
<li>Keep ADB updated with latest platform tools</li>
<li>Use <code>adb shell</code> for interactive sessions, direct commands for scripts</li>
<li>Always pull important data before performing system changes</li>
</ol>
<h2 id="security-considerations"><a class="header" href="#security-considerations">Security Considerations</a></h2>
<ul>
<li>Disable USB debugging when not in development</li>
<li>Be cautious when connecting to devices over WiFi</li>
<li>Don't leave ADB over TCP/IP enabled on public networks</li>
<li>Review USB debugging authorization requests carefully</li>
<li>Use secure, trusted computers for ADB connections</li>
<li>Never share bug reports publicly without reviewing contents first</li>
</ul>
<h2 id="references"><a class="header" href="#references">References</a></h2>
<ul>
<li><a href="https://developer.android.com/studio/command-line/adb">Official ADB Documentation</a></li>
<li><a href="https://adbshell.com/">ADB Shell Commands</a></li>
<li><a href="android/internals.html">Android Internals</a></li>
<li><a href="android/development.html">Development Guide</a></li>
</ul>
<h2 id="quick-reference-card"><a class="header" href="#quick-reference-card">Quick Reference Card</a></h2>
<pre><code class="language-bash"># Connection
adb devices                    # List devices
adb connect IP:5555           # Connect via WiFi

# Apps
adb install app.apk           # Install app
adb uninstall package.name    # Uninstall app
adb shell pm list packages    # List packages

# Files
adb push local remote         # Upload file
adb pull remote local         # Download file

# Shell
adb shell                     # Interactive shell
adb shell command             # Run single command

# Logs
adb logcat                    # View logs
adb logcat -c                 # Clear logs

# Screen
adb shell screencap /sdcard/s.png    # Screenshot
adb shell screenrecord /sdcard/v.mp4 # Record screen

# System
adb reboot                    # Reboot device
adb shell dumpsys battery     # Battery info
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="data-structures"><a class="header" href="#data-structures">Data Structures</a></h1>
<h2 id="overview-7"><a class="header" href="#overview-7">Overview</a></h2>
<p>A data structure is a specialized format for organizing, processing, retrieving, and storing data. Different data structures are suited for different kinds of applications, and some are highly specialized for specific tasks. Understanding data structures is fundamental to writing efficient algorithms and building scalable software systems.</p>
<h2 id="why-data-structures-matter"><a class="header" href="#why-data-structures-matter">Why Data Structures Matter</a></h2>
<ol>
<li><strong>Efficiency</strong>: Right data structure can dramatically improve performance</li>
<li><strong>Organization</strong>: Logical way to organize and manage data</li>
<li><strong>Reusability</strong>: Common patterns for solving problems</li>
<li><strong>Abstraction</strong>: Hide implementation details</li>
<li><strong>Optimization</strong>: Trade-offs between time and space complexity</li>
</ol>
<h2 id="classification-of-data-structures"><a class="header" href="#classification-of-data-structures">Classification of Data Structures</a></h2>
<h3 id="linear-data-structures"><a class="header" href="#linear-data-structures">Linear Data Structures</a></h3>
<p>Elements are arranged in sequential order:</p>
<ul>
<li>Arrays</li>
<li>Linked Lists</li>
<li>Stacks</li>
<li>Queues</li>
</ul>
<h3 id="non-linear-data-structures"><a class="header" href="#non-linear-data-structures">Non-Linear Data Structures</a></h3>
<p>Elements are arranged hierarchically or in a network:</p>
<ul>
<li>Trees</li>
<li>Graphs</li>
<li>Tries</li>
<li>Hash Tables</li>
</ul>
<h3 id="static-vs-dynamic"><a class="header" href="#static-vs-dynamic">Static vs Dynamic</a></h3>
<ul>
<li><strong>Static</strong>: Fixed size (arrays)</li>
<li><strong>Dynamic</strong>: Size can change (linked lists, dynamic arrays)</li>
</ul>
<h2 id="core-data-structures"><a class="header" href="#core-data-structures">Core Data Structures</a></h2>
<h3 id="1-arrays"><a class="header" href="#1-arrays">1. Arrays</a></h3>
<p>Contiguous memory locations storing elements of the same type.</p>
<pre><code class="language-python"># Array operations
arr = [1, 2, 3, 4, 5]

# Access - O(1)
element = arr[2]  # 3

# Insert at end - O(1) amortized
arr.append(6)

# Insert at position - O(n)
arr.insert(2, 10)

# Delete - O(n)
arr.remove(10)

# Search - O(n)
if 4 in arr:
    print("Found")

# 2D Array
matrix = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
]

# Access element
value = matrix[1][2]  # 6
</code></pre>
<p><strong>Time Complexity:</strong></p>
<ul>
<li>Access: O(1)</li>
<li>Search: O(n)</li>
<li>Insert: O(n)</li>
<li>Delete: O(n)</li>
</ul>
<p><strong>Space Complexity:</strong> O(n)</p>
<p>See: <a href="data_structures/arrays.html">Arrays</a></p>
<h3 id="2-linked-lists"><a class="header" href="#2-linked-lists">2. Linked Lists</a></h3>
<p>Nodes connected via pointers, allowing efficient insertion/deletion.</p>
<pre><code class="language-python">class Node:
    def __init__(self, data):
        self.data = data
        self.next = None

class LinkedList:
    def __init__(self):
        self.head = None
    
    def insert_at_beginning(self, data):
        new_node = Node(data)
        new_node.next = self.head
        self.head = new_node
    
    def insert_at_end(self, data):
        new_node = Node(data)
        
        if not self.head:
            self.head = new_node
            return
        
        current = self.head
        while current.next:
            current = current.next
        current.next = new_node
    
    def delete(self, key):
        current = self.head
        
        # Delete head
        if current and current.data == key:
            self.head = current.next
            return
        
        # Delete other node
        prev = None
        while current and current.data != key:
            prev = current
            current = current.next
        
        if current:
            prev.next = current.next
    
    def search(self, key):
        current = self.head
        while current:
            if current.data == key:
                return True
            current = current.next
        return False
    
    def display(self):
        elements = []
        current = self.head
        while current:
            elements.append(current.data)
            current = current.next
        return elements
</code></pre>
<p><strong>Types:</strong></p>
<ul>
<li>Singly Linked List</li>
<li>Doubly Linked List</li>
<li>Circular Linked List</li>
</ul>
<p><strong>Time Complexity:</strong></p>
<ul>
<li>Access: O(n)</li>
<li>Search: O(n)</li>
<li>Insert at beginning: O(1)</li>
<li>Insert at end: O(n) or O(1) with tail pointer</li>
<li>Delete: O(n)</li>
</ul>
<p>See: <a href="data_structures/linked_lists.html">Linked Lists</a></p>
<h3 id="3-stacks"><a class="header" href="#3-stacks">3. Stacks</a></h3>
<p>LIFO (Last In, First Out) structure.</p>
<pre><code class="language-python">class Stack:
    def __init__(self):
        self.items = []
    
    def push(self, item):
        """Add item to top - O(1)"""
        self.items.append(item)
    
    def pop(self):
        """Remove and return top item - O(1)"""
        if not self.is_empty():
            return self.items.pop()
        raise IndexError("Stack is empty")
    
    def peek(self):
        """Return top item without removing - O(1)"""
        if not self.is_empty():
            return self.items[-1]
        raise IndexError("Stack is empty")
    
    def is_empty(self):
        """Check if stack is empty - O(1)"""
        return len(self.items) == 0
    
    def size(self):
        """Return number of items - O(1)"""
        return len(self.items)

# Usage
stack = Stack()
stack.push(1)
stack.push(2)
stack.push(3)
print(stack.pop())    # 3
print(stack.peek())   # 2

# Applications
def is_balanced(expression):
    """Check if parentheses are balanced"""
    stack = []
    opening = "([{"
    closing = ")]}"
    pairs = {"(": ")", "[": "]", "{": "}"}
    
    for char in expression:
        if char in opening:
            stack.append(char)
        elif char in closing:
            if not stack or pairs[stack.pop()] != char:
                return False
    
    return len(stack) == 0

# Reverse string using stack
def reverse_string(s):
    stack = list(s)
    return ''.join(stack[::-1])
</code></pre>
<p><strong>Applications:</strong></p>
<ul>
<li>Function call stack</li>
<li>Undo/Redo operations</li>
<li>Expression evaluation</li>
<li>Backtracking algorithms</li>
<li>Browser history</li>
</ul>
<p>See: <a href="data_structures/stacks.html">Stacks</a></p>
<h3 id="4-queues"><a class="header" href="#4-queues">4. Queues</a></h3>
<p>FIFO (First In, First Out) structure.</p>
<pre><code class="language-python">from collections import deque

class Queue:
    def __init__(self):
        self.items = deque()
    
    def enqueue(self, item):
        """Add item to rear - O(1)"""
        self.items.append(item)
    
    def dequeue(self):
        """Remove and return front item - O(1)"""
        if not self.is_empty():
            return self.items.popleft()
        raise IndexError("Queue is empty")
    
    def front(self):
        """Return front item - O(1)"""
        if not self.is_empty():
            return self.items[0]
        raise IndexError("Queue is empty")
    
    def is_empty(self):
        """Check if queue is empty - O(1)"""
        return len(self.items) == 0
    
    def size(self):
        """Return number of items - O(1)"""
        return len(self.items)

# Priority Queue
import heapq

class PriorityQueue:
    def __init__(self):
        self.heap = []
    
    def push(self, item, priority):
        """Add item with priority - O(log n)"""
        heapq.heappush(self.heap, (priority, item))
    
    def pop(self):
        """Remove and return highest priority item - O(log n)"""
        if self.heap:
            return heapq.heappop(self.heap)[1]
        raise IndexError("Queue is empty")

# Circular Queue
class CircularQueue:
    def __init__(self, size):
        self.size = size
        self.queue = [None] * size
        self.front = self.rear = -1
    
    def enqueue(self, item):
        if (self.rear + 1) % self.size == self.front:
            raise Exception("Queue is full")
        
        if self.front == -1:
            self.front = 0
        
        self.rear = (self.rear + 1) % self.size
        self.queue[self.rear] = item
    
    def dequeue(self):
        if self.front == -1:
            raise Exception("Queue is empty")
        
        item = self.queue[self.front]
        
        if self.front == self.rear:
            self.front = self.rear = -1
        else:
            self.front = (self.front + 1) % self.size
        
        return item
</code></pre>
<p><strong>Types:</strong></p>
<ul>
<li>Simple Queue</li>
<li>Circular Queue</li>
<li>Priority Queue</li>
<li>Double-Ended Queue (Deque)</li>
</ul>
<p><strong>Applications:</strong></p>
<ul>
<li>Task scheduling</li>
<li>BFS traversal</li>
<li>Print queue</li>
<li>Buffer management</li>
<li>Async processing</li>
</ul>
<p>See: <a href="data_structures/queues.html">Queues</a></p>
<h3 id="5-hash-tables"><a class="header" href="#5-hash-tables">5. Hash Tables</a></h3>
<p>Key-value pairs with O(1) average-case operations.</p>
<pre><code class="language-python">class HashTable:
    def __init__(self, size=10):
        self.size = size
        self.table = [[] for _ in range(size)]
    
    def _hash(self, key):
        """Hash function - O(1)"""
        return hash(key) % self.size
    
    def insert(self, key, value):
        """Insert key-value pair - O(1) average"""
        index = self._hash(key)
        
        # Update if key exists
        for i, (k, v) in enumerate(self.table[index]):
            if k == key:
                self.table[index][i] = (key, value)
                return
        
        # Insert new key-value
        self.table[index].append((key, value))
    
    def get(self, key):
        """Get value by key - O(1) average"""
        index = self._hash(key)
        
        for k, v in self.table[index]:
            if k == key:
                return v
        
        raise KeyError(f"Key '{key}' not found")
    
    def delete(self, key):
        """Delete key-value pair - O(1) average"""
        index = self._hash(key)
        
        for i, (k, v) in enumerate(self.table[index]):
            if k == key:
                self.table[index].pop(i)
                return
        
        raise KeyError(f"Key '{key}' not found")
    
    def contains(self, key):
        """Check if key exists - O(1) average"""
        try:
            self.get(key)
            return True
        except KeyError:
            return False

# Python dict is a hash table
hash_map = {}
hash_map["name"] = "John"
hash_map["age"] = 30

# Counter using hash table
from collections import Counter
text = "hello world"
char_count = Counter(text)
</code></pre>
<p><strong>Collision Resolution:</strong></p>
<ul>
<li>Chaining (linked lists)</li>
<li>Open addressing (linear probing, quadratic probing, double hashing)</li>
</ul>
<p><strong>Time Complexity:</strong></p>
<ul>
<li>Average: O(1) for insert, delete, search</li>
<li>Worst: O(n) with many collisions</li>
</ul>
<p>See: <a href="data_structures/hash_tables.html">Hash Tables</a></p>
<h2 id="advanced-data-structures"><a class="header" href="#advanced-data-structures">Advanced Data Structures</a></h2>
<h3 id="6-trees"><a class="header" href="#6-trees">6. Trees</a></h3>
<p>Hierarchical structure with nodes connected by edges.</p>
<pre><code class="language-python">class TreeNode:
    def __init__(self, value):
        self.value = value
        self.left = None
        self.right = None

class BinarySearchTree:
    def __init__(self):
        self.root = None
    
    def insert(self, value):
        """Insert value - O(log n) average, O(n) worst"""
        if not self.root:
            self.root = TreeNode(value)
        else:
            self._insert_recursive(self.root, value)
    
    def _insert_recursive(self, node, value):
        if value &lt; node.value:
            if node.left is None:
                node.left = TreeNode(value)
            else:
                self._insert_recursive(node.left, value)
        else:
            if node.right is None:
                node.right = TreeNode(value)
            else:
                self._insert_recursive(node.right, value)
    
    def search(self, value):
        """Search for value - O(log n) average"""
        return self._search_recursive(self.root, value)
    
    def _search_recursive(self, node, value):
        if node is None or node.value == value:
            return node
        
        if value &lt; node.value:
            return self._search_recursive(node.left, value)
        return self._search_recursive(node.right, value)
    
    def inorder_traversal(self, node, result=None):
        """Inorder: Left -&gt; Root -&gt; Right"""
        if result is None:
            result = []
        
        if node:
            self.inorder_traversal(node.left, result)
            result.append(node.value)
            self.inorder_traversal(node.right, result)
        
        return result
</code></pre>
<p><strong>Types:</strong></p>
<ul>
<li>Binary Tree</li>
<li>Binary Search Tree</li>
<li>AVL Tree (self-balancing)</li>
<li>Red-Black Tree</li>
<li>B-Tree</li>
<li>Heap</li>
</ul>
<p>See: <a href="data_structures/../algorithms/trees.html">Trees documentation in algorithms</a></p>
<h3 id="7-graphs"><a class="header" href="#7-graphs">7. Graphs</a></h3>
<p>Network of nodes (vertices) connected by edges.</p>
<pre><code class="language-python"># Adjacency List representation
class Graph:
    def __init__(self):
        self.graph = {}
    
    def add_vertex(self, vertex):
        """Add vertex - O(1)"""
        if vertex not in self.graph:
            self.graph[vertex] = []
    
    def add_edge(self, v1, v2):
        """Add edge - O(1)"""
        if v1 in self.graph and v2 in self.graph:
            self.graph[v1].append(v2)
            self.graph[v2].append(v1)  # For undirected graph
    
    def bfs(self, start):
        """Breadth-First Search - O(V + E)"""
        visited = set()
        queue = [start]
        result = []
        
        while queue:
            vertex = queue.pop(0)
            if vertex not in visited:
                visited.add(vertex)
                result.append(vertex)
                queue.extend(self.graph[vertex])
        
        return result
    
    def dfs(self, start, visited=None):
        """Depth-First Search - O(V + E)"""
        if visited is None:
            visited = set()
        
        visited.add(start)
        result = [start]
        
        for neighbor in self.graph[start]:
            if neighbor not in visited:
                result.extend(self.dfs(neighbor, visited))
        
        return result

# Adjacency Matrix representation
class GraphMatrix:
    def __init__(self, num_vertices):
        self.num_vertices = num_vertices
        self.matrix = [[0] * num_vertices for _ in range(num_vertices)]
    
    def add_edge(self, v1, v2, weight=1):
        """Add edge with optional weight"""
        self.matrix[v1][v2] = weight
        self.matrix[v2][v1] = weight  # For undirected graph
</code></pre>
<p><strong>Types:</strong></p>
<ul>
<li>Directed/Undirected</li>
<li>Weighted/Unweighted</li>
<li>Cyclic/Acyclic</li>
<li>Connected/Disconnected</li>
</ul>
<p>See: <a href="data_structures/../algorithms/graphs.html">Graph algorithms</a></p>
<h2 id="choosing-the-right-data-structure"><a class="header" href="#choosing-the-right-data-structure">Choosing the Right Data Structure</a></h2>
<h3 id="array-vs-linked-list"><a class="header" href="#array-vs-linked-list">Array vs Linked List</a></h3>
<p><strong>Use Array when:</strong></p>
<ul>
<li>Need random access</li>
<li>Size is known and fixed</li>
<li>Memory is contiguous</li>
<li>Cache performance matters</li>
</ul>
<p><strong>Use Linked List when:</strong></p>
<ul>
<li>Frequent insertions/deletions</li>
<li>Size is unknown</li>
<li>Don't need random access</li>
<li>Memory fragmentation is acceptable</li>
</ul>
<h3 id="stack-vs-queue"><a class="header" href="#stack-vs-queue">Stack vs Queue</a></h3>
<p><strong>Use Stack for:</strong></p>
<ul>
<li>LIFO operations</li>
<li>Recursion simulation</li>
<li>Undo/redo functionality</li>
<li>Expression evaluation</li>
</ul>
<p><strong>Use Queue for:</strong></p>
<ul>
<li>FIFO operations</li>
<li>Scheduling</li>
<li>BFS traversal</li>
<li>Resource sharing</li>
</ul>
<h3 id="hash-table-vs-tree"><a class="header" href="#hash-table-vs-tree">Hash Table vs Tree</a></h3>
<p><strong>Use Hash Table when:</strong></p>
<ul>
<li>Need O(1) lookup</li>
<li>Order doesn't matter</li>
<li>No range queries needed</li>
<li>Keys are hashable</li>
</ul>
<p><strong>Use Tree when:</strong></p>
<ul>
<li>Need sorted order</li>
<li>Range queries required</li>
<li>Prefix searches (Trie)</li>
<li>Hierarchical data</li>
</ul>
<h2 id="performance-comparison"><a class="header" href="#performance-comparison">Performance Comparison</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Array</th><th>Linked List</th><th>Stack</th><th>Queue</th><th>Hash Table</th><th>BST</th></tr></thead><tbody>
<tr><td>Access</td><td>O(1)</td><td>O(n)</td><td>O(n)</td><td>O(n)</td><td>-</td><td>O(log n)</td></tr>
<tr><td>Search</td><td>O(n)</td><td>O(n)</td><td>O(n)</td><td>O(n)</td><td>O(1)*</td><td>O(log n)</td></tr>
<tr><td>Insert</td><td>O(n)</td><td>O(1)**</td><td>O(1)</td><td>O(1)</td><td>O(1)*</td><td>O(log n)</td></tr>
<tr><td>Delete</td><td>O(n)</td><td>O(1)**</td><td>O(1)</td><td>O(1)</td><td>O(1)*</td><td>O(log n)</td></tr>
</tbody></table>
</div>
<p>* Average case, ** At beginning/with reference</p>
<h2 id="common-operations"><a class="header" href="#common-operations">Common Operations</a></h2>
<h3 id="traversal-patterns"><a class="header" href="#traversal-patterns">Traversal Patterns</a></h3>
<pre><code class="language-python"># Array traversal
for i in range(len(arr)):
    process(arr[i])

# Linked list traversal
current = head
while current:
    process(current.data)
    current = current.next

# Tree traversal (recursion)
def traverse_tree(node):
    if node:
        traverse_tree(node.left)
        process(node.value)
        traverse_tree(node.right)

# Graph traversal (BFS)
def bfs(graph, start):
    visited = set()
    queue = [start]
    
    while queue:
        vertex = queue.pop(0)
        if vertex not in visited:
            visited.add(vertex)
            process(vertex)
            queue.extend(graph[vertex])
</code></pre>
<h3 id="searching-patterns"><a class="header" href="#searching-patterns">Searching Patterns</a></h3>
<pre><code class="language-python"># Linear search - O(n)
def linear_search(arr, target):
    for i, val in enumerate(arr):
        if val == target:
            return i
    return -1

# Binary search - O(log n)
def binary_search(arr, target):
    left, right = 0, len(arr) - 1
    
    while left &lt;= right:
        mid = (left + right) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1
    
    return -1

# Hash table search - O(1)
def hash_search(hash_table, key):
    return hash_table.get(key)
</code></pre>
<h2 id="real-world-applications"><a class="header" href="#real-world-applications">Real-World Applications</a></h2>
<h3 id="arrays"><a class="header" href="#arrays">Arrays</a></h3>
<ul>
<li>Database tables</li>
<li>Image processing (pixel arrays)</li>
<li>Dynamic programming tables</li>
<li>Buffer implementation</li>
</ul>
<h3 id="linked-lists"><a class="header" href="#linked-lists">Linked Lists</a></h3>
<ul>
<li>Music playlists</li>
<li>Browser history (doubly linked)</li>
<li>Undo functionality</li>
<li>Memory management (free lists)</li>
</ul>
<h3 id="stacks"><a class="header" href="#stacks">Stacks</a></h3>
<ul>
<li>Function call management</li>
<li>Expression evaluation</li>
<li>Backtracking (maze solving)</li>
<li>Browser back button</li>
</ul>
<h3 id="queues"><a class="header" href="#queues">Queues</a></h3>
<ul>
<li>Print spooling</li>
<li>CPU scheduling</li>
<li>BFS traversal</li>
<li>Message queues (async)</li>
</ul>
<h3 id="hash-tables"><a class="header" href="#hash-tables">Hash Tables</a></h3>
<ul>
<li>Database indexing</li>
<li>Caching</li>
<li>Symbol tables (compilers)</li>
<li>Spell checkers</li>
</ul>
<h3 id="trees"><a class="header" href="#trees">Trees</a></h3>
<ul>
<li>File systems</li>
<li>DOM (HTML)</li>
<li>Decision trees (AI)</li>
<li>Database indexing (B-trees)</li>
</ul>
<h3 id="graphs"><a class="header" href="#graphs">Graphs</a></h3>
<ul>
<li>Social networks</li>
<li>Maps and navigation</li>
<li>Network routing</li>
<li>Recommendation systems</li>
</ul>
<h2 id="interview-preparation"><a class="header" href="#interview-preparation">Interview Preparation</a></h2>
<h3 id="essential-topics"><a class="header" href="#essential-topics">Essential Topics</a></h3>
<ol>
<li>
<p><strong>Arrays and Strings</strong></p>
<ul>
<li>Two pointers</li>
<li>Sliding window</li>
<li>Prefix sums</li>
</ul>
</li>
<li>
<p><strong>Linked Lists</strong></p>
<ul>
<li>Reverse list</li>
<li>Detect cycle</li>
<li>Merge lists</li>
</ul>
</li>
<li>
<p><strong>Stacks and Queues</strong></p>
<ul>
<li>Valid parentheses</li>
<li>Min/max stack</li>
<li>Implement queue with stacks</li>
</ul>
</li>
<li>
<p><strong>Trees</strong></p>
<ul>
<li>Traversals</li>
<li>Height/depth</li>
<li>Lowest common ancestor</li>
</ul>
</li>
<li>
<p><strong>Graphs</strong></p>
<ul>
<li>BFS/DFS</li>
<li>Cycle detection</li>
<li>Shortest path</li>
</ul>
</li>
<li>
<p><strong>Hash Tables</strong></p>
<ul>
<li>Two sum</li>
<li>Group anagrams</li>
<li>LRU cache</li>
</ul>
</li>
</ol>
<h3 id="common-patterns"><a class="header" href="#common-patterns">Common Patterns</a></h3>
<ul>
<li><strong>Two Pointers</strong>: Array problems</li>
<li><strong>Fast/Slow Pointers</strong>: Linked list cycles</li>
<li><strong>Sliding Window</strong>: Subarray problems</li>
<li><strong>BFS/DFS</strong>: Tree/graph traversal</li>
<li><strong>Backtracking</strong>: Combinatorial problems</li>
<li><strong>Dynamic Programming</strong>: Optimization problems</li>
</ul>
<h2 id="available-resources-1"><a class="header" href="#available-resources-1">Available Resources</a></h2>
<p>Explore detailed guides for specific data structures:</p>
<ol>
<li><a href="data_structures/arrays.html">Arrays</a> - Array operations and techniques</li>
<li><a href="data_structures/linked_lists.html">Linked Lists</a> - Singly, doubly, circular lists</li>
<li><a href="data_structures/stacks.html">Stacks</a> - Stack implementation and applications</li>
<li><a href="data_structures/queues.html">Queues</a> - Queue types and use cases</li>
<li><a href="data_structures/hash_tables.html">Hash Tables</a> - Hashing and collision resolution</li>
</ol>
<p>Related algorithm topics:</p>
<ul>
<li><a href="data_structures/../algorithms/sorting.html">Sorting Algorithms</a></li>
<li><a href="data_structures/../algorithms/searching.html">Searching Algorithms</a></li>
<li><a href="data_structures/../algorithms/trees.html">Tree Algorithms</a></li>
<li><a href="data_structures/../algorithms/graphs.html">Graph Algorithms</a></li>
</ul>
<h2 id="best-practices-7"><a class="header" href="#best-practices-7">Best Practices</a></h2>
<ol>
<li><strong>Choose appropriately</strong>: Match data structure to problem</li>
<li><strong>Consider trade-offs</strong>: Time vs space complexity</li>
<li><strong>Test edge cases</strong>: Empty, single element, duplicates</li>
<li><strong>Optimize</strong>: Start simple, then optimize</li>
<li><strong>Document</strong>: Comment complex logic</li>
<li><strong>Practice</strong>: Regular coding practice</li>
<li><strong>Learn patterns</strong>: Recognize common patterns</li>
<li><strong>Understand internals</strong>: Know how they work</li>
</ol>
<h2 id="next-steps-2"><a class="header" href="#next-steps-2">Next Steps</a></h2>
<ol>
<li>Master the fundamental structures (array, linked list, stack, queue)</li>
<li>Practice implementing each structure from scratch</li>
<li>Solve problems using each data structure</li>
<li>Learn when to use each structure</li>
<li>Study advanced structures (trees, graphs, tries)</li>
<li>Practice on coding platforms (LeetCode, HackerRank)</li>
<li>Review time/space complexity for all operations</li>
<li>Work on real-world projects using these structures</li>
</ol>
<p>Remember: Understanding data structures is essential for writing efficient code and succeeding in technical interviews. Focus on understanding the concepts, not just memorizing implementations.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arrays-1"><a class="header" href="#arrays-1">Arrays</a></h1>
<h2 id="overview-8"><a class="header" href="#overview-8">Overview</a></h2>
<p>An array is a fundamental data structure that stores elements of the same type in contiguous memory locations. Arrays provide fast, constant-time access to elements using an index, making them one of the most commonly used data structures in programming.</p>
<h2 id="key-concepts-3"><a class="header" href="#key-concepts-3">Key Concepts</a></h2>
<h3 id="characteristics"><a class="header" href="#characteristics">Characteristics</a></h3>
<ul>
<li><strong>Fixed Size</strong>: Most arrays have a fixed size determined at creation</li>
<li><strong>Contiguous Memory</strong>: Elements stored sequentially in memory</li>
<li><strong>Index-Based</strong>: Access elements using zero-based indexing</li>
<li><strong>Homogeneous</strong>: All elements must be of the same type</li>
<li><strong>Fast Access</strong>: O(1) time complexity for accessing any element</li>
</ul>
<h3 id="memory-layout-1"><a class="header" href="#memory-layout-1">Memory Layout</a></h3>
<pre><code>Index:     0    1    2    3    4
Array:   | 10 | 20 | 30 | 40 | 50 |
Address: 1000 1004 1008 1012 1016  (for 4-byte integers)
</code></pre>
<h2 id="time-complexity"><a class="header" href="#time-complexity">Time Complexity</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time Complexity</th></tr></thead><tbody>
<tr><td><strong>Access</strong></td><td>O(1)</td></tr>
<tr><td><strong>Search</strong></td><td>O(n)</td></tr>
<tr><td><strong>Insert (at end)</strong></td><td>O(1) amortized*</td></tr>
<tr><td><strong>Insert (at position)</strong></td><td>O(n)</td></tr>
<tr><td><strong>Delete (at end)</strong></td><td>O(1)</td></tr>
<tr><td><strong>Delete (at position)</strong></td><td>O(n)</td></tr>
</tbody></table>
</div>
<p>*For dynamic arrays like Python lists or C++ vectors</p>
<h2 id="code-examples"><a class="header" href="#code-examples">Code Examples</a></h2>
<h3 id="python-1"><a class="header" href="#python-1">Python</a></h3>
<pre><code class="language-python"># Creating arrays
arr = [1, 2, 3, 4, 5]
arr_zeros = [0] * 10  # [0, 0, 0, ..., 0] (10 elements)

# Accessing elements
first = arr[0]        # 1
last = arr[-1]        # 5 (negative indexing)

# Modifying elements
arr[2] = 100          # [1, 2, 100, 4, 5]

# Slicing
sub = arr[1:4]        # [2, 100, 4]
reversed_arr = arr[::-1]  # [5, 4, 100, 2, 1]

# Common operations
arr.append(6)         # Add to end: [1, 2, 100, 4, 5, 6]
arr.insert(2, 99)     # Insert at index: [1, 2, 99, 100, 4, 5, 6]
arr.pop()             # Remove last: returns 6
arr.remove(99)        # Remove first occurrence of 99
length = len(arr)     # Get length

# Iteration
for element in arr:
    print(element)

for index, element in enumerate(arr):
    print(f"Index {index}: {element}")

# List comprehension
squares = [x**2 for x in range(10)]  # [0, 1, 4, 9, 16, ..., 81]
evens = [x for x in arr if x % 2 == 0]  # Filter even numbers

# 2D Arrays (Matrix)
matrix = [
    [1, 2, 3],
    [4, 5, 6],
    [7, 8, 9]
]
element = matrix[1][2]  # Access: 6
</code></pre>
<h3 id="javascript-1"><a class="header" href="#javascript-1">JavaScript</a></h3>
<pre><code class="language-javascript">// Creating arrays
let arr = [1, 2, 3, 4, 5];
let arr2 = new Array(10);  // Array with 10 undefined elements
let arr3 = Array.from({length: 5}, (_, i) =&gt; i);  // [0, 1, 2, 3, 4]

// Accessing and modifying
arr[0] = 100;
let last = arr[arr.length - 1];  // 5

// Common methods
arr.push(6);              // Add to end
arr.pop();                // Remove from end
arr.unshift(0);           // Add to beginning
arr.shift();              // Remove from beginning
arr.splice(2, 1, 99);     // Remove 1 element at index 2, insert 99

// Iteration
arr.forEach((element, index) =&gt; {
    console.log(index, element);
});

// Map, filter, reduce
let doubled = arr.map(x =&gt; x * 2);
let evens = arr.filter(x =&gt; x % 2 === 0);
let sum = arr.reduce((acc, x) =&gt; acc + x, 0);

// Find elements
let found = arr.find(x =&gt; x &gt; 3);     // First element &gt; 3
let index = arr.findIndex(x =&gt; x &gt; 3);  // Index of first element &gt; 3
let includes = arr.includes(3);       // true if 3 exists

// Sorting
arr.sort((a, b) =&gt; a - b);  // Ascending
arr.sort((a, b) =&gt; b - a);  // Descending

// Spread operator
let combined = [...arr, ...arr2];
let copy = [...arr];
</code></pre>
<h3 id="c-1"><a class="header" href="#c-1">C++</a></h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;array&gt;
using namespace std;

int main() {
    // Static array
    int arr[5] = {1, 2, 3, 4, 5};
    int size = sizeof(arr) / sizeof(arr[0]);  // 5

    // Access and modify
    arr[0] = 100;
    int last = arr[size - 1];

    // std::array (fixed size, safer)
    array&lt;int, 5&gt; std_arr = {1, 2, 3, 4, 5};
    std_arr[0] = 100;
    int sz = std_arr.size();

    // std::vector (dynamic array)
    vector&lt;int&gt; vec = {1, 2, 3, 4, 5};
    vec.push_back(6);         // Add to end
    vec.pop_back();           // Remove from end
    vec.insert(vec.begin() + 2, 99);  // Insert at index 2
    vec.erase(vec.begin() + 2);       // Remove at index 2

    // Iteration
    for (int i = 0; i &lt; vec.size(); i++) {
        cout &lt;&lt; vec[i] &lt;&lt; " ";
    }

    // Range-based for loop
    for (int x : vec) {
        cout &lt;&lt; x &lt;&lt; " ";
    }

    // 2D vector
    vector&lt;vector&lt;int&gt;&gt; matrix(3, vector&lt;int&gt;(4, 0));  // 3x4 matrix of zeros
    matrix[1][2] = 99;

    return 0;
}
</code></pre>
<h3 id="java-1"><a class="header" href="#java-1">Java</a></h3>
<pre><code class="language-java">import java.util.ArrayList;
import java.util.Arrays;

public class ArrayExamples {
    public static void main(String[] args) {
        // Static array
        int[] arr = {1, 2, 3, 4, 5};
        int[] arr2 = new int[10];  // 10 elements, initialized to 0

        // Access and modify
        arr[0] = 100;
        int length = arr.length;

        // ArrayList (dynamic array)
        ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();
        list.add(1);
        list.add(2);
        list.add(3);
        list.add(2, 99);  // Insert at index 2
        list.remove(2);   // Remove at index 2
        int element = list.get(1);  // Access index 1
        list.set(1, 100);           // Modify index 1

        // Iteration
        for (int i = 0; i &lt; list.size(); i++) {
            System.out.println(list.get(i));
        }

        for (int x : list) {
            System.out.println(x);
        }

        // Useful methods
        boolean contains = list.contains(3);
        int idx = list.indexOf(3);
        list.sort((a, b) -&gt; a - b);  // Sort

        // Arrays utility
        int[] arr3 = {3, 1, 4, 1, 5};
        Arrays.sort(arr3);
        int index = Arrays.binarySearch(arr3, 4);  // Binary search (sorted array)
    }
}
</code></pre>
<h2 id="common-algorithms"><a class="header" href="#common-algorithms">Common Algorithms</a></h2>
<h3 id="linear-search"><a class="header" href="#linear-search">Linear Search</a></h3>
<pre><code class="language-python">def linear_search(arr, target):
    for i in range(len(arr)):
        if arr[i] == target:
            return i
    return -1  # Not found

# Time: O(n), Space: O(1)
</code></pre>
<h3 id="binary-search-sorted-array"><a class="header" href="#binary-search-sorted-array">Binary Search (Sorted Array)</a></h3>
<pre><code class="language-python">def binary_search(arr, target):
    left, right = 0, len(arr) - 1

    while left &lt;= right:
        mid = left + (right - left) // 2  # Avoid overflow

        if arr[mid] == target:
            return mid
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1

    return -1  # Not found

# Time: O(log n), Space: O(1)
</code></pre>
<h3 id="two-pointers-technique"><a class="header" href="#two-pointers-technique">Two Pointers Technique</a></h3>
<pre><code class="language-python">def two_sum_sorted(arr, target):
    """Find two numbers that sum to target in sorted array"""
    left, right = 0, len(arr) - 1

    while left &lt; right:
        current_sum = arr[left] + arr[right]
        if current_sum == target:
            return [left, right]
        elif current_sum &lt; target:
            left += 1
        else:
            right -= 1

    return []  # Not found
</code></pre>
<h3 id="sliding-window"><a class="header" href="#sliding-window">Sliding Window</a></h3>
<pre><code class="language-python">def max_sum_subarray(arr, k):
    """Maximum sum of k consecutive elements"""
    if len(arr) &lt; k:
        return None

    # Compute sum of first window
    window_sum = sum(arr[:k])
    max_sum = window_sum

    # Slide the window
    for i in range(k, len(arr)):
        window_sum = window_sum - arr[i - k] + arr[i]
        max_sum = max(max_sum, window_sum)

    return max_sum

# Time: O(n), Space: O(1)
</code></pre>
<h3 id="kadanes-algorithm-maximum-subarray"><a class="header" href="#kadanes-algorithm-maximum-subarray">Kadane's Algorithm (Maximum Subarray)</a></h3>
<pre><code class="language-python">def max_subarray_sum(arr):
    """Find maximum sum of any contiguous subarray"""
    max_so_far = arr[0]
    max_ending_here = arr[0]

    for i in range(1, len(arr)):
        max_ending_here = max(arr[i], max_ending_here + arr[i])
        max_so_far = max(max_so_far, max_ending_here)

    return max_so_far

# Time: O(n), Space: O(1)
# Example: [-2, 1, -3, 4, -1, 2, 1, -5, 4] -&gt; 6 (subarray [4, -1, 2, 1])
</code></pre>
<h2 id="common-problems"><a class="header" href="#common-problems">Common Problems</a></h2>
<h3 id="reverse-an-array"><a class="header" href="#reverse-an-array">Reverse an Array</a></h3>
<pre><code class="language-python">def reverse(arr):
    left, right = 0, len(arr) - 1
    while left &lt; right:
        arr[left], arr[right] = arr[right], arr[left]
        left += 1
        right -= 1
    return arr
</code></pre>
<h3 id="rotate-array"><a class="header" href="#rotate-array">Rotate Array</a></h3>
<pre><code class="language-python">def rotate_right(arr, k):
    """Rotate array to the right by k positions"""
    n = len(arr)
    k = k % n  # Handle k &gt; n

    # Reverse entire array
    arr.reverse()
    # Reverse first k elements
    arr[:k] = reversed(arr[:k])
    # Reverse remaining elements
    arr[k:] = reversed(arr[k:])

    return arr

# Example: [1, 2, 3, 4, 5], k=2 -&gt; [4, 5, 1, 2, 3]
</code></pre>
<h3 id="remove-duplicates-sorted-array"><a class="header" href="#remove-duplicates-sorted-array">Remove Duplicates (Sorted Array)</a></h3>
<pre><code class="language-python">def remove_duplicates(arr):
    """Remove duplicates in-place, return new length"""
    if not arr:
        return 0

    write_index = 1
    for i in range(1, len(arr)):
        if arr[i] != arr[i - 1]:
            arr[write_index] = arr[i]
            write_index += 1

    return write_index
</code></pre>
<h2 id="best-practices-8"><a class="header" href="#best-practices-8">Best Practices</a></h2>
<h3 id="1-bounds-checking"><a class="header" href="#1-bounds-checking">1. Bounds Checking</a></h3>
<pre><code class="language-python"># Bad
if arr[i] &gt; 0:  # May cause IndexError

# Good
if i &lt; len(arr) and arr[i] &gt; 0:
</code></pre>
<h3 id="2-avoid-modifying-while-iterating"><a class="header" href="#2-avoid-modifying-while-iterating">2. Avoid Modifying While Iterating</a></h3>
<pre><code class="language-python"># Bad
for x in arr:
    if x % 2 == 0:
        arr.remove(x)  # Causes skipping

# Good
arr = [x for x in arr if x % 2 != 0]  # Create new list
</code></pre>
<h3 id="3-use-appropriate-data-structure"><a class="header" href="#3-use-appropriate-data-structure">3. Use Appropriate Data Structure</a></h3>
<ul>
<li>Need frequent insertions/deletions? Consider linked list</li>
<li>Need fast lookups? Consider hash table</li>
<li>Working with numerical data? Use NumPy arrays</li>
</ul>
<h2 id="eli10"><a class="header" href="#eli10">ELI10</a></h2>
<p>Think of an array like a row of mailboxes in an apartment building:</p>
<ul>
<li>Each mailbox has a number (index): 0, 1, 2, 3, ...</li>
<li>Each mailbox can hold one item (element)</li>
<li>To get mail from mailbox #3, you go directly to it - very fast!</li>
<li>All mailboxes are right next to each other in a line</li>
<li>You know exactly how many mailboxes there are</li>
</ul>
<p><strong>The cool part</strong>: You can instantly go to any mailbox by its number, no need to check all the other mailboxes first!</p>
<p><strong>The tricky part</strong>: If you want to add a new mailbox in the middle, you have to shift all the mailboxes after it to make room - that takes time!</p>
<h2 id="further-resources"><a class="header" href="#further-resources">Further Resources</a></h2>
<ul>
<li><a href="https://docs.python.org/3/tutorial/datastructures.html">Arrays in Python - Official Docs</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">MDN JavaScript Arrays</a></li>
<li><a href="https://en.cppreference.com/w/cpp/container/vector">C++ Vector Documentation</a></li>
<li><a href="https://leetcode.com/tag/array/">LeetCode Array Problems</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linked-lists-1"><a class="header" href="#linked-lists-1">Linked Lists</a></h1>
<h2 id="overview-9"><a class="header" href="#overview-9">Overview</a></h2>
<p>A linked list is a linear data structure where elements (nodes) are connected via pointers/references rather than stored in contiguous memory. Each node contains data and a reference to the next node, creating a chain-like structure.</p>
<h2 id="key-concepts-4"><a class="header" href="#key-concepts-4">Key Concepts</a></h2>
<h3 id="structure"><a class="header" href="#structure">Structure</a></h3>
<pre><code>    Head
     |
    Data -&gt; Next -&gt; Data -&gt; Next -&gt; Data -&gt; Next -&gt; None
</code></pre>
<h3 id="types"><a class="header" href="#types">Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Description</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>Singly Linked List</strong></td><td>Each node points to next node only</td><td>Standard, memory efficient</td></tr>
<tr><td><strong>Doubly Linked List</strong></td><td>Each node points to next and previous</td><td>Need bidirectional traversal</td></tr>
<tr><td><strong>Circular Linked List</strong></td><td>Last node points back to first</td><td>Round-robin scheduling</td></tr>
</tbody></table>
</div>
<h3 id="advantages-vs-arrays"><a class="header" href="#advantages-vs-arrays">Advantages vs Arrays</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Linked List</th><th>Array</th></tr></thead><tbody>
<tr><td><strong>Access</strong></td><td>O(n)</td><td>O(1)</td></tr>
<tr><td><strong>Insert/Delete at start</strong></td><td>O(1)</td><td>O(n)</td></tr>
<tr><td><strong>Insert/Delete in middle</strong></td><td>O(n) to find, O(1) to insert</td><td>O(n)</td></tr>
<tr><td><strong>Memory</strong></td><td>Flexible, dynamic</td><td>Fixed or expensive to resize</td></tr>
<tr><td><strong>Cache Efficiency</strong></td><td>Poor</td><td>Excellent</td></tr>
</tbody></table>
</div>
<h2 id="implementation"><a class="header" href="#implementation">Implementation</a></h2>
<h3 id="python---singly-linked-list"><a class="header" href="#python---singly-linked-list">Python - Singly Linked List</a></h3>
<pre><code class="language-python">class Node:
    def __init__(self, data):
        self.data = data
        self.next = None

class LinkedList:
    def __init__(self):
        self.head = None

    def append(self, data):
        """Add element to end"""
        new_node = Node(data)
        if not self.head:
            self.head = new_node
            return

        current = self.head
        while current.next:
            current = current.next
        current.next = new_node

    def prepend(self, data):
        """Add element to beginning"""
        new_node = Node(data)
        new_node.next = self.head
        self.head = new_node

    def insert_after(self, prev_data, data):
        """Insert after specific value"""
        current = self.head
        while current and current.data != prev_data:
            current = current.next

        if current:
            new_node = Node(data)
            new_node.next = current.next
            current.next = new_node

    def delete(self, data):
        """Remove first occurrence"""
        if not self.head:
            return

        # If head needs to be deleted
        if self.head.data == data:
            self.head = self.head.next
            return

        current = self.head
        while current.next and current.next.data != data:
            current = current.next

        if current.next:
            current.next = current.next.next

    def search(self, data):
        """Find element"""
        current = self.head
        while current:
            if current.data == data:
                return True
            current = current.next
        return False

    def display(self):
        """Print all elements"""
        elements = []
        current = self.head
        while current:
            elements.append(str(current.data))
            current = current.next
        print(" -&gt; ".join(elements) + " -&gt; None")

    def __len__(self):
        """Get length"""
        count = 0
        current = self.head
        while current:
            count += 1
            current = current.next
        return count

# Usage
ll = LinkedList()
ll.append(1)
ll.append(2)
ll.append(3)
ll.prepend(0)
ll.display()  # 0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; None
ll.delete(2)
ll.display()  # 0 -&gt; 1 -&gt; 3 -&gt; None
</code></pre>
<h3 id="python---doubly-linked-list"><a class="header" href="#python---doubly-linked-list">Python - Doubly Linked List</a></h3>
<pre><code class="language-python">class DNode:
    def __init__(self, data):
        self.data = data
        self.next = None
        self.prev = None

class DoublyLinkedList:
    def __init__(self):
        self.head = None

    def append(self, data):
        """Add to end"""
        new_node = DNode(data)
        if not self.head:
            self.head = new_node
            return

        current = self.head
        while current.next:
            current = current.next
        current.next = new_node
        new_node.prev = current

    def reverse_display(self):
        """Print in reverse"""
        if not self.head:
            return

        current = self.head
        while current.next:
            current = current.next

        elements = []
        while current:
            elements.append(str(current.data))
            current = current.prev
        print(" -&gt; ".join(elements) + " -&gt; None")
</code></pre>
<h3 id="javascript-2"><a class="header" href="#javascript-2">JavaScript</a></h3>
<pre><code class="language-javascript">class Node {
    constructor(data) {
        this.data = data;
        this.next = null;
    }
}

class LinkedList {
    constructor() {
        this.head = null;
    }

    append(data) {
        const newNode = new Node(data);
        if (!this.head) {
            this.head = newNode;
            return;
        }

        let current = this.head;
        while (current.next) {
            current = current.next;
        }
        current.next = newNode;
    }

    prepend(data) {
        const newNode = new Node(data);
        newNode.next = this.head;
        this.head = newNode;
    }

    delete(data) {
        if (!this.head) return;

        if (this.head.data === data) {
            this.head = this.head.next;
            return;
        }

        let current = this.head;
        while (current.next &amp;&amp; current.next.data !== data) {
            current = current.next;
        }

        if (current.next) {
            current.next = current.next.next;
        }
    }

    display() {
        let current = this.head;
        let result = [];
        while (current) {
            result.push(current.data);
            current = current.next;
        }
        console.log(result.join(" -&gt; ") + " -&gt; null");
    }
}

// Usage
const ll = new LinkedList();
ll.append(1);
ll.append(2);
ll.prepend(0);
ll.display();  // 0 -&gt; 1 -&gt; 2 -&gt; null
</code></pre>
<h3 id="c-2"><a class="header" href="#c-2">C++</a></h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
using namespace std;

struct Node {
    int data;
    Node* next;

    Node(int data) : data(data), next(nullptr) {}
};

class LinkedList {
private:
    Node* head;

public:
    LinkedList() : head(nullptr) {}

    void append(int data) {
        Node* newNode = new Node(data);
        if (!head) {
            head = newNode;
            return;
        }

        Node* current = head;
        while (current-&gt;next) {
            current = current-&gt;next;
        }
        current-&gt;next = newNode;
    }

    void prepend(int data) {
        Node* newNode = new Node(data);
        newNode-&gt;next = head;
        head = newNode;
    }

    void deleteNode(int data) {
        if (!head) return;

        if (head-&gt;data == data) {
            Node* temp = head;
            head = head-&gt;next;
            delete temp;
            return;
        }

        Node* current = head;
        while (current-&gt;next &amp;&amp; current-&gt;next-&gt;data != data) {
            current = current-&gt;next;
        }

        if (current-&gt;next) {
            Node* temp = current-&gt;next;
            current-&gt;next = current-&gt;next-&gt;next;
            delete temp;
        }
    }

    void display() {
        Node* current = head;
        while (current) {
            cout &lt;&lt; current-&gt;data &lt;&lt; " -&gt; ";
            current = current-&gt;next;
        }
        cout &lt;&lt; "null\n";
    }

    ~LinkedList() {
        Node* current = head;
        while (current) {
            Node* temp = current;
            current = current-&gt;next;
            delete temp;
        }
    }
};
</code></pre>
<h2 id="common-problems-1"><a class="header" href="#common-problems-1">Common Problems</a></h2>
<h3 id="reverse-a-linked-list"><a class="header" href="#reverse-a-linked-list">Reverse a Linked List</a></h3>
<pre><code class="language-python">def reverse(head):
    """Reverse entire linked list"""
    prev = None
    current = head

    while current:
        next_temp = current.next  # Save next
        current.next = prev       # Reverse link
        prev = current            # Move prev forward
        current = next_temp       # Move current forward

    return prev  # New head
</code></pre>
<h3 id="find-middle"><a class="header" href="#find-middle">Find Middle</a></h3>
<pre><code class="language-python">def find_middle(head):
    """Find middle node using slow/fast pointers"""
    slow = fast = head

    while fast and fast.next:
        slow = slow.next
        fast = fast.next.next

    return slow  # Slow pointer at middle
</code></pre>
<h3 id="detect-cycle"><a class="header" href="#detect-cycle">Detect Cycle</a></h3>
<pre><code class="language-python">def has_cycle(head):
    """Detect if linked list has cycle"""
    slow = fast = head

    while fast and fast.next:
        slow = slow.next
        fast = fast.next.next

        if slow == fast:  # Cycle detected
            return True

    return False
</code></pre>
<h3 id="merge-two-sorted-lists"><a class="header" href="#merge-two-sorted-lists">Merge Two Sorted Lists</a></h3>
<pre><code class="language-python">def merge_sorted(l1, l2):
    """Merge two sorted linked lists"""
    dummy = Node(0)
    current = dummy

    while l1 and l2:
        if l1.data &lt; l2.data:
            current.next = l1
            l1 = l1.next
        else:
            current.next = l2
            l2 = l2.next
        current = current.next

    # Attach remaining
    current.next = l1 if l1 else l2

    return dummy.next
</code></pre>
<h3 id="remove-nth-node-from-end"><a class="header" href="#remove-nth-node-from-end">Remove Nth Node from End</a></h3>
<pre><code class="language-python">def remove_nth_from_end(head, n):
    """Remove nth node from end"""
    dummy = Node(0)
    dummy.next = head
    first = second = dummy

    # Move first pointer n+1 steps ahead
    for i in range(n + 1):
        if not first:
            return head
        first = first.next

    # Move both until first reaches end
    while first:
        first = first.next
        second = second.next

    # Remove node
    second.next = second.next.next

    return dummy.next
</code></pre>
<h2 id="time-complexity-summary"><a class="header" href="#time-complexity-summary">Time Complexity Summary</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Singly</th><th>Doubly</th></tr></thead><tbody>
<tr><td><strong>Access</strong></td><td>O(n)</td><td>O(n)</td></tr>
<tr><td><strong>Search</strong></td><td>O(n)</td><td>O(n)</td></tr>
<tr><td><strong>Insert at head</strong></td><td>O(1)</td><td>O(1)</td></tr>
<tr><td><strong>Insert at tail</strong></td><td>O(n)</td><td>O(1)*</td></tr>
<tr><td><strong>Delete from head</strong></td><td>O(1)</td><td>O(1)</td></tr>
<tr><td><strong>Delete from tail</strong></td><td>O(n)</td><td>O(1)*</td></tr>
<tr><td><strong>Reverse</strong></td><td>O(n)</td><td>O(n)</td></tr>
</tbody></table>
</div>
<p>*With tail pointer</p>
<h2 id="best-practices-9"><a class="header" href="#best-practices-9">Best Practices</a></h2>
<h3 id="1-use-sentinel-nodes"><a class="header" href="#1-use-sentinel-nodes">1. Use Sentinel Nodes</a></h3>
<pre><code class="language-python"># Bad: Check for None multiple times
if head and head.next and head.next.next:
    ...

# Good: Use dummy node
dummy = Node(0)
dummy.next = head
current = dummy
# Now no need to check if current exists
</code></pre>
<h3 id="2-avoid-memory-leaks-c"><a class="header" href="#2-avoid-memory-leaks-c">2. Avoid Memory Leaks (C++)</a></h3>
<pre><code class="language-cpp">// Always delete removed nodes
Node* temp = current-&gt;next;
current-&gt;next = current-&gt;next-&gt;next;
delete temp;  // Free memory
</code></pre>
<h3 id="3-two-pointer-technique"><a class="header" href="#3-two-pointer-technique">3. Two-Pointer Technique</a></h3>
<pre><code class="language-python"># Many problems solved with slow/fast pointers:
# - Find middle
# - Detect cycle
# - Remove nth from end
</code></pre>
<h2 id="eli10-1"><a class="header" href="#eli10-1">ELI10</a></h2>
<p>Imagine a treasure hunt with clues:</p>
<ul>
<li>Each clue card (node) has treasure info and points to the next clue</li>
<li>You start at the first clue (head)</li>
<li>To find a specific clue, you must follow the chain - you can't jump!</li>
<li>To add a clue in the middle, you just change what one card points to</li>
<li>You don't need a big board to write all clues - they can be anywhere!</li>
</ul>
<p>The tricky part: You can only look at clues in order, you can't jump to the middle one directly like you could with an array.</p>
<h2 id="further-resources-1"><a class="header" href="#further-resources-1">Further Resources</a></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Linked_list">Linked List Wikipedia</a></li>
<li><a href="https://leetcode.com/tag/linked-list/">LeetCode Linked List Problems</a></li>
<li><a href="https://visualgo.net/en/list">Visual Algo - Linked List Visualizations</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stacks-1"><a class="header" href="#stacks-1">Stacks</a></h1>
<h2 id="overview-10"><a class="header" href="#overview-10">Overview</a></h2>
<p>A stack is a Last-In-First-Out (LIFO) data structure where elements are added and removed from the same end, called the top. Think of it like a stack of dinner plates - you put plates on top and take them from the top.</p>
<h2 id="key-concepts-5"><a class="header" href="#key-concepts-5">Key Concepts</a></h2>
<h3 id="lifo-principle"><a class="header" href="#lifo-principle">LIFO Principle</a></h3>
<pre><code>Push: 1 -&gt; 2 -&gt; 3

     3     Top (Last In)

     2

     1     First In


Pop: Returns 3 (First Out)
</code></pre>
<h2 id="operations--time-complexity"><a class="header" href="#operations--time-complexity">Operations &amp; Time Complexity</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time</th><th>Space</th></tr></thead><tbody>
<tr><td>Push</td><td>O(1)</td><td>O(n)</td></tr>
<tr><td>Pop</td><td>O(1)</td><td>-</td></tr>
<tr><td>Peek</td><td>O(1)</td><td>-</td></tr>
<tr><td>Is Empty</td><td>O(1)</td><td>-</td></tr>
<tr><td>Search</td><td>O(n)</td><td>-</td></tr>
</tbody></table>
</div>
<h2 id="implementation-python"><a class="header" href="#implementation-python">Implementation (Python)</a></h2>
<pre><code class="language-python">class Stack:
    def __init__(self):
        self.items = []

    def push(self, data):
        self.items.append(data)

    def pop(self):
        return self.items.pop() if not self.is_empty() else None

    def peek(self):
        return self.items[-1] if not self.is_empty() else None

    def is_empty(self):
        return len(self.items) == 0

    def size(self):
        return len(self.items)

# Using deque for O(1) operations
from collections import deque
stack = deque()
stack.append(1)  # Push O(1)
stack.pop()      # Pop O(1)
</code></pre>
<h2 id="common-problems-2"><a class="header" href="#common-problems-2">Common Problems</a></h2>
<h3 id="valid-parentheses"><a class="header" href="#valid-parentheses">Valid Parentheses</a></h3>
<pre><code class="language-python">def is_valid(s):
    stack = []
    pairs = {'(': ')', '[': ']', '{': '}'}

    for char in s:
        if char in pairs:
            stack.append(char)
        else:
            if not stack or pairs[stack.pop()] != char:
                return False

    return len(stack) == 0
</code></pre>
<h3 id="next-greater-element"><a class="header" href="#next-greater-element">Next Greater Element</a></h3>
<pre><code class="language-python">def next_greater(arr):
    stack = []
    result = [-1] * len(arr)

    for i in range(len(arr) - 1, -1, -1):
        while stack and stack[-1] &lt;= arr[i]:
            stack.pop()
        if stack:
            result[i] = stack[-1]
        stack.append(arr[i])

    return result
</code></pre>
<h3 id="postfix-evaluation"><a class="header" href="#postfix-evaluation">Postfix Evaluation</a></h3>
<pre><code class="language-python">def evaluate_postfix(expr):
    stack = []
    ops = {'+', '-', '*', '/'}

    for token in expr.split():
        if token not in ops:
            stack.append(int(token))
        else:
            b = stack.pop()
            a = stack.pop()
            if token == '+': stack.append(a + b)
            elif token == '-': stack.append(a - b)
            elif token == '*': stack.append(a * b)
            else: stack.append(a // b)

    return stack[0]
</code></pre>
<h2 id="real-world-uses"><a class="header" href="#real-world-uses">Real-World Uses</a></h2>
<ul>
<li><strong>Browser Back Button</strong>: Last visited page is first to go back to</li>
<li><strong>Function Call Stack</strong>: Each function call pushed, returns pop</li>
<li><strong>Undo/Redo</strong>: Last action undone first</li>
<li><strong>Expression Parsing</strong>: Manage operator precedence</li>
<li><strong>DFS (Depth-First Search)</strong>: Graph traversal</li>
</ul>
<h2 id="eli10-2"><a class="header" href="#eli10-2">ELI10</a></h2>
<p>Imagine a stack of dinner plates - you:</p>
<ul>
<li>Add new plates on <strong>top</strong></li>
<li>Take plates from <strong>top</strong></li>
<li>Can't grab from the middle without removing top plates</li>
</ul>
<p>That's LIFO! Last In = First Out. The last plate you put on is the first one you take off.</p>
<h2 id="further-resources-2"><a class="header" href="#further-resources-2">Further Resources</a></h2>
<ul>
<li><a href="https://leetcode.com/tag/stack/">LeetCode Stack Problems</a></li>
<li><a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)">Stack Wikipedia</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><p>A queue is a linear data structure that follows the First In First Out (FIFO) principle. This means that the first element added to the queue will be the first one to be removed. Queues are commonly used in scenarios where order needs to be preserved, such as in scheduling tasks, managing requests in a server, or handling asynchronous data.</p>
<h3 id="key-operations"><a class="header" href="#key-operations">Key Operations</a></h3>
<ol>
<li><strong>Enqueue</strong>: Add an element to the end of the queue.</li>
<li><strong>Dequeue</strong>: Remove an element from the front of the queue.</li>
<li><strong>Peek/Front</strong>: Get the element at the front of the queue without removing it.</li>
<li><strong>IsEmpty</strong>: Check if the queue is empty.</li>
<li><strong>Size</strong>: Get the number of elements in the queue.</li>
</ol>
<h3 id="types-of-queues"><a class="header" href="#types-of-queues">Types of Queues</a></h3>
<ul>
<li><strong>Simple Queue</strong>: Also known as a linear queue, where insertion happens at the rear and deletion happens at the front.</li>
<li><strong>Circular Queue</strong>: A more efficient queue where the last position is connected back to the first position to make a circle.</li>
<li><strong>Priority Queue</strong>: Each element is associated with a priority, and elements are served based on their priority.</li>
<li><strong>Double-ended Queue (Deque)</strong>: Insertion and deletion can happen at both the front and the rear of the queue.</li>
</ul>
<h3 id="applications-of-queues"><a class="header" href="#applications-of-queues">Applications of Queues</a></h3>
<ul>
<li><strong>CPU Scheduling</strong>: Managing processes in operating systems.</li>
<li><strong>Disk Scheduling</strong>: Managing I/O requests.</li>
<li><strong>Breadth-First Search (BFS)</strong>: Traversing or searching tree or graph data structures.</li>
<li><strong>Print Queue</strong>: Managing print jobs in a printer.</li>
</ul>
<p>Queues are fundamental data structures that are widely used in computer science and programming for managing ordered collections of items.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hash-tables-1"><a class="header" href="#hash-tables-1">Hash Tables</a></h1>
<h2 id="overview-11"><a class="header" href="#overview-11">Overview</a></h2>
<p>A hash table (hash map) stores key-value pairs with O(1) average-case lookup, insertion, and deletion. It uses a hash function to map keys to array indices.</p>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How It Works</a></h2>
<h3 id="hash-function"><a class="header" href="#hash-function">Hash Function</a></h3>
<p>Converts key to index:</p>
<pre><code>hash("name") = 5
hash(123) = 2
hash("email") = 5  (collision!)
</code></pre>
<h3 id="collision-resolution"><a class="header" href="#collision-resolution">Collision Resolution</a></h3>
<p><strong>Chaining</strong>: Store multiple values at same index</p>
<pre><code>Index 0: None
Index 1: None
Index 2: 123 -&gt; "John"
Index 3: 456 -&gt; "Jane" -&gt; 789 -&gt; "Jack"
</code></pre>
<p><strong>Open Addressing</strong>: Find next empty slot</p>
<pre><code>hash("a") = 5 (occupied)
Try 6, 7, 8... until empty
</code></pre>
<h2 id="operations"><a class="header" href="#operations">Operations</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Average</th><th>Worst</th></tr></thead><tbody>
<tr><td><strong>Get</strong></td><td>O(1)</td><td>O(n)</td></tr>
<tr><td><strong>Set</strong></td><td>O(1)</td><td>O(n)</td></tr>
<tr><td><strong>Delete</strong></td><td>O(1)</td><td>O(n)</td></tr>
</tbody></table>
</div>
<h2 id="python-implementation"><a class="header" href="#python-implementation">Python Implementation</a></h2>
<pre><code class="language-python"># Built-in dict
d = {"key": "value"}
d.get("key")  # O(1)
d["key"] = "new_value"
del d["key"]

# Custom
class HashTable:
    def __init__(self, size=10):
        self.table = [[] for _ in range(size)]

    def set(self, key, value):
        index = hash(key) % len(self.table)
        for i, (k, v) in enumerate(self.table[index]):
            if k == key:
                self.table[index][i] = (key, value)
                return
        self.table[index].append((key, value))

    def get(self, key):
        index = hash(key) % len(self.table)
        for k, v in self.table[index]:
            if k == key:
                return v
        return None
</code></pre>
<h2 id="common-problems-3"><a class="header" href="#common-problems-3">Common Problems</a></h2>
<h3 id="two-sum"><a class="header" href="#two-sum">Two Sum</a></h3>
<pre><code class="language-python">def two_sum(arr, target):
    seen = {}
    for num in arr:
        if target - num in seen:
            return [seen[target - num], arr.index(num)]
        seen[num] = arr.index(num)
    return []
</code></pre>
<h3 id="duplicate-detection"><a class="header" href="#duplicate-detection">Duplicate Detection</a></h3>
<pre><code class="language-python">def has_duplicates(arr):
    return len(arr) != len(set(arr))
</code></pre>
<h2 id="eli10-3"><a class="header" href="#eli10-3">ELI10</a></h2>
<p>Think of hash tables like library catalogs:</p>
<ul>
<li><strong>Hash function</strong> = catalog system (tells you which shelf)</li>
<li><strong>Index</strong> = shelf number</li>
<li><strong>Value</strong> = book</li>
</ul>
<p>Instead of searching every shelf, the system instantly tells you which one!</p>
<h2 id="further-resources-3"><a class="header" href="#further-resources-3">Further Resources</a></h2>
<ul>
<li><a href="https://leetcode.com/tag/hash-table/">LeetCode Hash Table</a></li>
<li><a href="https://en.wikipedia.org/wiki/Hash_table">Hash Table Wikipedia</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="algorithms"><a class="header" href="#algorithms">Algorithms</a></h1>
<h2 id="overview-12"><a class="header" href="#overview-12">Overview</a></h2>
<p>An algorithm is a step-by-step procedure or formula for solving a problem. In computer science, algorithms are fundamental to writing efficient and effective code. Understanding algorithms helps you choose the right approach for solving computational problems and optimize performance.</p>
<h2 id="what-is-an-algorithm"><a class="header" href="#what-is-an-algorithm">What is an Algorithm?</a></h2>
<p>An algorithm must have these characteristics:</p>
<ol>
<li><strong>Input</strong>: Zero or more inputs</li>
<li><strong>Output</strong>: At least one output</li>
<li><strong>Definiteness</strong>: Clear and unambiguous steps</li>
<li><strong>Finiteness</strong>: Must terminate after a finite number of steps</li>
<li><strong>Effectiveness</strong>: Steps must be basic enough to be executed</li>
</ol>
<h2 id="algorithm-analysis"><a class="header" href="#algorithm-analysis">Algorithm Analysis</a></h2>
<h3 id="time-complexity-1"><a class="header" href="#time-complexity-1">Time Complexity</a></h3>
<p>Time complexity measures how the runtime of an algorithm grows with input size.</p>
<pre><code class="language-python"># O(1) - Constant time
def get_first_element(arr):
    return arr[0] if arr else None

# O(n) - Linear time
def find_element(arr, target):
    for elem in arr:
        if elem == target:
            return True
    return False

# O(n²) - Quadratic time
def bubble_sort(arr):
    n = len(arr)
    for i in range(n):
        for j in range(n - i - 1):
            if arr[j] &gt; arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
    return arr

# O(log n) - Logarithmic time
def binary_search(arr, target):
    left, right = 0, len(arr) - 1
    while left &lt;= right:
        mid = (left + right) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1
    return -1

# O(n log n) - Linearithmic time
def merge_sort(arr):
    if len(arr) &lt;= 1:
        return arr
    mid = len(arr) // 2
    left = merge_sort(arr[:mid])
    right = merge_sort(arr[mid:])
    return merge(left, right)
</code></pre>
<h3 id="space-complexity"><a class="header" href="#space-complexity">Space Complexity</a></h3>
<p>Space complexity measures the amount of memory an algorithm uses.</p>
<pre><code class="language-python"># O(1) space - In-place
def reverse_array_inplace(arr):
    left, right = 0, len(arr) - 1
    while left &lt; right:
        arr[left], arr[right] = arr[right], arr[left]
        left += 1
        right -= 1

# O(n) space - Additional array
def reverse_array_new(arr):
    return arr[::-1]

# O(n) space - Recursion stack
def factorial(n):
    if n &lt;= 1:
        return 1
    return n * factorial(n - 1)
</code></pre>
<h2 id="algorithm-categories"><a class="header" href="#algorithm-categories">Algorithm Categories</a></h2>
<h3 id="1-sorting-algorithms"><a class="header" href="#1-sorting-algorithms">1. Sorting Algorithms</a></h3>
<p>Transform data into a specific order (ascending/descending).</p>
<p><strong>Common Sorting Algorithms:</strong></p>
<ul>
<li>Bubble Sort - O(n²)</li>
<li>Selection Sort - O(n²)</li>
<li>Insertion Sort - O(n²)</li>
<li>Merge Sort - O(n log n)</li>
<li>Quick Sort - O(n log n) average</li>
<li>Heap Sort - O(n log n)</li>
</ul>
<p>See: <a href="algorithms/sorting.html">Sorting Algorithms</a></p>
<h3 id="2-searching-algorithms"><a class="header" href="#2-searching-algorithms">2. Searching Algorithms</a></h3>
<p>Find specific elements in data structures.</p>
<p><strong>Common Searching Algorithms:</strong></p>
<ul>
<li>Linear Search - O(n)</li>
<li>Binary Search - O(log n)</li>
<li>Jump Search - O(√n)</li>
<li>Interpolation Search - O(log log n) average</li>
</ul>
<p>See: <a href="algorithms/searching.html">Searching Algorithms</a></p>
<h3 id="3-graph-algorithms"><a class="header" href="#3-graph-algorithms">3. Graph Algorithms</a></h3>
<p>Solve problems related to graph structures.</p>
<p><strong>Common Graph Algorithms:</strong></p>
<ul>
<li>Breadth-First Search (BFS)</li>
<li>Depth-First Search (DFS)</li>
<li>Dijkstra's Algorithm</li>
<li>Bellman-Ford Algorithm</li>
<li>Floyd-Warshall Algorithm</li>
<li>Kruskal's Algorithm</li>
<li>Prim's Algorithm</li>
</ul>
<p>See: <a href="algorithms/graphs.html">Graph Algorithms</a></p>
<h3 id="4-tree-algorithms"><a class="header" href="#4-tree-algorithms">4. Tree Algorithms</a></h3>
<p>Operations on tree data structures.</p>
<p><strong>Common Tree Algorithms:</strong></p>
<ul>
<li>Tree Traversals (Inorder, Preorder, Postorder, Level-order)</li>
<li>Binary Search Tree Operations</li>
<li>AVL Tree Balancing</li>
<li>Red-Black Tree Operations</li>
<li>Trie Operations</li>
</ul>
<p>See: <a href="algorithms/trees.html">Tree Algorithms</a></p>
<h3 id="5-dynamic-programming"><a class="header" href="#5-dynamic-programming">5. Dynamic Programming</a></h3>
<p>Break complex problems into simpler subproblems and store results.</p>
<p><strong>Classic DP Problems:</strong></p>
<ul>
<li>Fibonacci Sequence</li>
<li>Longest Common Subsequence</li>
<li>Knapsack Problem</li>
<li>Matrix Chain Multiplication</li>
<li>Edit Distance</li>
</ul>
<p>See: <a href="algorithms/dynamic_programming.html">Dynamic Programming</a></p>
<h3 id="6-greedy-algorithms"><a class="header" href="#6-greedy-algorithms">6. Greedy Algorithms</a></h3>
<p>Make locally optimal choices at each step.</p>
<p><strong>Common Greedy Problems:</strong></p>
<ul>
<li>Activity Selection</li>
<li>Huffman Coding</li>
<li>Fractional Knapsack</li>
<li>Coin Change (greedy variant)</li>
<li>Job Sequencing</li>
</ul>
<p>See: <a href="algorithms/greedy_algorithms.html">Greedy Algorithms</a></p>
<h3 id="7-divide-and-conquer"><a class="header" href="#7-divide-and-conquer">7. Divide and Conquer</a></h3>
<p>Divide problem into subproblems, solve recursively, combine results.</p>
<p><strong>Examples:</strong></p>
<ul>
<li>Merge Sort</li>
<li>Quick Sort</li>
<li>Binary Search</li>
<li>Strassen's Matrix Multiplication</li>
<li>Closest Pair of Points</li>
</ul>
<p>See: <a href="algorithms/divide_and_conquer.html">Divide and Conquer</a></p>
<h3 id="8-backtracking"><a class="header" href="#8-backtracking">8. Backtracking</a></h3>
<p>Try all possibilities and backtrack when stuck.</p>
<p><strong>Classic Problems:</strong></p>
<ul>
<li>N-Queens Problem</li>
<li>Sudoku Solver</li>
<li>Permutations and Combinations</li>
<li>Graph Coloring</li>
<li>Hamiltonian Path</li>
</ul>
<p>See: <a href="algorithms/backtracking.html">Backtracking</a></p>
<h3 id="9-recursion"><a class="header" href="#9-recursion">9. Recursion</a></h3>
<p>Function calls itself to solve problems.</p>
<p><strong>Examples:</strong></p>
<ul>
<li>Factorial</li>
<li>Fibonacci</li>
<li>Tower of Hanoi</li>
<li>Tree Traversals</li>
<li>Divide and Conquer algorithms</li>
</ul>
<p>See: <a href="algorithms/recursion.html">Recursion</a></p>
<h2 id="common-algorithm-patterns"><a class="header" href="#common-algorithm-patterns">Common Algorithm Patterns</a></h2>
<h3 id="two-pointers"><a class="header" href="#two-pointers">Two Pointers</a></h3>
<pre><code class="language-python"># Find pair with given sum in sorted array
def find_pair_with_sum(arr, target):
    left, right = 0, len(arr) - 1
    
    while left &lt; right:
        current_sum = arr[left] + arr[right]
        if current_sum == target:
            return (arr[left], arr[right])
        elif current_sum &lt; target:
            left += 1
        else:
            right -= 1
    
    return None

# Remove duplicates from sorted array
def remove_duplicates(arr):
    if not arr:
        return 0
    
    write_index = 1
    for read_index in range(1, len(arr)):
        if arr[read_index] != arr[read_index - 1]:
            arr[write_index] = arr[read_index]
            write_index += 1
    
    return write_index
</code></pre>
<h3 id="sliding-window-1"><a class="header" href="#sliding-window-1">Sliding Window</a></h3>
<pre><code class="language-python"># Maximum sum subarray of size k
def max_sum_subarray(arr, k):
    if len(arr) &lt; k:
        return None
    
    # Calculate sum of first window
    window_sum = sum(arr[:k])
    max_sum = window_sum
    
    # Slide window
    for i in range(k, len(arr)):
        window_sum = window_sum - arr[i - k] + arr[i]
        max_sum = max(max_sum, window_sum)
    
    return max_sum

# Longest substring without repeating characters
def longest_unique_substring(s):
    char_index = {}
    max_length = 0
    start = 0
    
    for end in range(len(s)):
        if s[end] in char_index and char_index[s[end]] &gt;= start:
            start = char_index[s[end]] + 1
        
        char_index[s[end]] = end
        max_length = max(max_length, end - start + 1)
    
    return max_length
</code></pre>
<h3 id="fast-and-slow-pointers"><a class="header" href="#fast-and-slow-pointers">Fast and Slow Pointers</a></h3>
<pre><code class="language-python"># Detect cycle in linked list
def has_cycle(head):
    if not head:
        return False
    
    slow = fast = head
    
    while fast and fast.next:
        slow = slow.next
        fast = fast.next.next
        
        if slow == fast:
            return True
    
    return False

# Find middle of linked list
def find_middle(head):
    slow = fast = head
    
    while fast and fast.next:
        slow = slow.next
        fast = fast.next.next
    
    return slow
</code></pre>
<h3 id="merge-intervals"><a class="header" href="#merge-intervals">Merge Intervals</a></h3>
<pre><code class="language-python"># Merge overlapping intervals
def merge_intervals(intervals):
    if not intervals:
        return []
    
    # Sort by start time
    intervals.sort(key=lambda x: x[0])
    merged = [intervals[0]]
    
    for current in intervals[1:]:
        last = merged[-1]
        
        if current[0] &lt;= last[1]:
            # Overlapping - merge
            merged[-1] = (last[0], max(last[1], current[1]))
        else:
            # Non-overlapping - add
            merged.append(current)
    
    return merged
</code></pre>
<h3 id="binary-search-pattern"><a class="header" href="#binary-search-pattern">Binary Search Pattern</a></h3>
<pre><code class="language-python"># Find first occurrence
def find_first(arr, target):
    left, right = 0, len(arr) - 1
    result = -1
    
    while left &lt;= right:
        mid = (left + right) // 2
        
        if arr[mid] == target:
            result = mid
            right = mid - 1  # Continue searching left
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1
    
    return result

# Find peak element
def find_peak(arr):
    left, right = 0, len(arr) - 1
    
    while left &lt; right:
        mid = (left + right) // 2
        
        if arr[mid] &gt; arr[mid + 1]:
            right = mid
        else:
            left = mid + 1
    
    return left
</code></pre>
<h2 id="problem-solving-approach"><a class="header" href="#problem-solving-approach">Problem-Solving Approach</a></h2>
<h3 id="1-understand-the-problem"><a class="header" href="#1-understand-the-problem">1. Understand the Problem</a></h3>
<ul>
<li>Read carefully</li>
<li>Identify inputs and outputs</li>
<li>Clarify constraints</li>
<li>Consider edge cases</li>
</ul>
<h3 id="2-plan-your-approach"><a class="header" href="#2-plan-your-approach">2. Plan Your Approach</a></h3>
<ul>
<li>Think of similar problems</li>
<li>Consider multiple solutions</li>
<li>Analyze time/space complexity</li>
<li>Choose appropriate data structures</li>
</ul>
<h3 id="3-implement"><a class="header" href="#3-implement">3. Implement</a></h3>
<ul>
<li>Write clean, readable code</li>
<li>Use meaningful variable names</li>
<li>Add comments for complex logic</li>
<li>Handle edge cases</li>
</ul>
<h3 id="4-test"><a class="header" href="#4-test">4. Test</a></h3>
<ul>
<li>Test with sample inputs</li>
<li>Test edge cases (empty, single element, large input)</li>
<li>Test boundary conditions</li>
<li>Verify correctness</li>
</ul>
<h3 id="5-optimize"><a class="header" href="#5-optimize">5. Optimize</a></h3>
<ul>
<li>Analyze bottlenecks</li>
<li>Consider trade-offs</li>
<li>Improve time/space complexity</li>
<li>Refactor for clarity</li>
</ul>
<h2 id="time-complexity-cheat-sheet"><a class="header" href="#time-complexity-cheat-sheet">Time Complexity Cheat Sheet</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Complexity</th><th>Name</th><th>Example</th></tr></thead><tbody>
<tr><td>O(1)</td><td>Constant</td><td>Array access, hash table lookup</td></tr>
<tr><td>O(log n)</td><td>Logarithmic</td><td>Binary search</td></tr>
<tr><td>O(n)</td><td>Linear</td><td>Linear search, array traversal</td></tr>
<tr><td>O(n log n)</td><td>Linearithmic</td><td>Merge sort, quick sort (average)</td></tr>
<tr><td>O(n²)</td><td>Quadratic</td><td>Bubble sort, nested loops</td></tr>
<tr><td>O(n³)</td><td>Cubic</td><td>Triple nested loops</td></tr>
<tr><td>O(2ⁿ)</td><td>Exponential</td><td>Recursive fibonacci</td></tr>
<tr><td>O(n!)</td><td>Factorial</td><td>Permutations</td></tr>
</tbody></table>
</div>
<h2 id="space-complexity-considerations"><a class="header" href="#space-complexity-considerations">Space Complexity Considerations</a></h2>
<ol>
<li><strong>In-place algorithms</strong>: O(1) space - modify input directly</li>
<li><strong>Recursion</strong>: O(n) space for call stack</li>
<li><strong>Memoization</strong>: Trade space for time</li>
<li><strong>Auxiliary data structures</strong>: Arrays, hash tables, etc.</li>
</ol>
<h2 id="interview-tips"><a class="header" href="#interview-tips">Interview Tips</a></h2>
<h3 id="common-algorithm-questions"><a class="header" href="#common-algorithm-questions">Common Algorithm Questions</a></h3>
<ol>
<li>
<p><strong>Arrays and Strings</strong></p>
<ul>
<li>Two Sum</li>
<li>Reverse String</li>
<li>Longest Substring</li>
<li>Array Rotation</li>
</ul>
</li>
<li>
<p><strong>Linked Lists</strong></p>
<ul>
<li>Reverse Linked List</li>
<li>Detect Cycle</li>
<li>Merge Two Lists</li>
<li>Find Middle</li>
</ul>
</li>
<li>
<p><strong>Trees and Graphs</strong></p>
<ul>
<li>Tree Traversals</li>
<li>Validate BST</li>
<li>Lowest Common Ancestor</li>
<li>Graph BFS/DFS</li>
</ul>
</li>
<li>
<p><strong>Dynamic Programming</strong></p>
<ul>
<li>Fibonacci</li>
<li>Climbing Stairs</li>
<li>Coin Change</li>
<li>Longest Increasing Subsequence</li>
</ul>
</li>
<li>
<p><strong>Sorting and Searching</strong></p>
<ul>
<li>Binary Search variants</li>
<li>Merge K Sorted Lists</li>
<li>Find Kth Largest</li>
<li>Quick Select</li>
</ul>
</li>
</ol>
<h3 id="best-practices-10"><a class="header" href="#best-practices-10">Best Practices</a></h3>
<ol>
<li><strong>Communication</strong>: Think aloud</li>
<li><strong>Clarification</strong>: Ask questions</li>
<li><strong>Examples</strong>: Work through examples</li>
<li><strong>Optimization</strong>: Discuss trade-offs</li>
<li><strong>Testing</strong>: Verify with test cases</li>
<li><strong>Edge Cases</strong>: Consider all scenarios</li>
<li><strong>Clean Code</strong>: Write readable code</li>
<li><strong>Time Management</strong>: Don't get stuck</li>
</ol>
<h2 id="practice-resources"><a class="header" href="#practice-resources">Practice Resources</a></h2>
<h3 id="online-platforms"><a class="header" href="#online-platforms">Online Platforms</a></h3>
<ul>
<li>LeetCode</li>
<li>HackerRank</li>
<li>CodeSignal</li>
<li>Project Euler</li>
<li>Codeforces</li>
<li>AtCoder</li>
</ul>
<h3 id="books-2"><a class="header" href="#books-2">Books</a></h3>
<ul>
<li>"Introduction to Algorithms" (CLRS)</li>
<li>"Algorithm Design Manual" (Skiena)</li>
<li>"Cracking the Coding Interview"</li>
<li>"Elements of Programming Interviews"</li>
</ul>
<h2 id="available-topics"><a class="header" href="#available-topics">Available Topics</a></h2>
<p>Explore detailed guides for specific algorithm types:</p>
<ol>
<li><a href="algorithms/big_o.html">Big O Notation</a> - Understanding algorithm complexity</li>
<li><a href="algorithms/sorting.html">Sorting Algorithms</a> - Comprehensive sorting guide</li>
<li><a href="algorithms/searching.html">Searching Algorithms</a> - Various search techniques</li>
<li><a href="algorithms/graphs.html">Graph Algorithms</a> - Graph traversal and algorithms</li>
<li><a href="algorithms/trees.html">Tree Algorithms</a> - Tree operations and traversals</li>
<li><a href="algorithms/dynamic_programming.html">Dynamic Programming</a> - DP patterns and problems</li>
<li><a href="algorithms/greedy_algorithms.html">Greedy Algorithms</a> - Greedy approach and examples</li>
<li><a href="algorithms/divide_and_conquer.html">Divide and Conquer</a> - D&amp;C strategy</li>
<li><a href="algorithms/backtracking.html">Backtracking</a> - Backtracking techniques</li>
<li><a href="algorithms/recursion.html">Recursion</a> - Recursive problem solving</li>
<li><a href="algorithms/heaps.html">Heaps</a> - Heap data structure and algorithms</li>
<li><a href="algorithms/tries.html">Tries</a> - Trie data structure and applications</li>
</ol>
<h2 id="quick-reference-2"><a class="header" href="#quick-reference-2">Quick Reference</a></h2>
<h3 id="most-important-algorithms-to-know"><a class="header" href="#most-important-algorithms-to-know">Most Important Algorithms to Know</a></h3>
<p><strong>Sorting:</strong></p>
<ul>
<li>Quick Sort</li>
<li>Merge Sort</li>
<li>Heap Sort</li>
</ul>
<p><strong>Searching:</strong></p>
<ul>
<li>Binary Search</li>
<li>Depth-First Search (DFS)</li>
<li>Breadth-First Search (BFS)</li>
</ul>
<p><strong>Graph:</strong></p>
<ul>
<li>Dijkstra's Algorithm</li>
<li>Topological Sort</li>
<li>Union-Find</li>
</ul>
<p><strong>Dynamic Programming:</strong></p>
<ul>
<li>0/1 Knapsack</li>
<li>Longest Common Subsequence</li>
<li>Edit Distance</li>
</ul>
<p><strong>String:</strong></p>
<ul>
<li>KMP Pattern Matching</li>
<li>Rabin-Karp</li>
<li>Trie Operations</li>
</ul>
<h2 id="next-steps-3"><a class="header" href="#next-steps-3">Next Steps</a></h2>
<ol>
<li>Review <a href="algorithms/big_o.html">Big O Notation</a> for complexity analysis</li>
<li>Practice with <a href="algorithms/sorting.html">Sorting</a> and <a href="algorithms/searching.html">Searching</a></li>
<li>Master <a href="algorithms/recursion.html">Recursion</a> fundamentals</li>
<li>Explore <a href="algorithms/dynamic_programming.html">Dynamic Programming</a></li>
<li>Study <a href="algorithms/graphs.html">Graph Algorithms</a> and <a href="algorithms/trees.html">Trees</a></li>
<li>Practice on coding platforms</li>
<li>Participate in coding contests</li>
<li>Review and optimize solutions</li>
</ol>
<p>Remember: The key to mastering algorithms is consistent practice and understanding the underlying patterns. Start with fundamentals and gradually tackle more complex problems.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="big-o-notation"><a class="header" href="#big-o-notation">Big O Notation</a></h1>
<p>Big O notation is a mathematical concept used to describe the performance or complexity of an algorithm. Specifically, it characterizes algorithms in terms of their time or space requirements in relation to the size of the input data. Understanding Big O notation is crucial for evaluating the efficiency of algorithms and making informed decisions about which algorithm to use in a given situation.</p>
<h2 id="key-concepts-6"><a class="header" href="#key-concepts-6">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Time Complexity</strong>: This refers to the amount of time an algorithm takes to complete as a function of the length of the input. It helps in understanding how the execution time increases with the size of the input.</p>
</li>
<li>
<p><strong>Space Complexity</strong>: This refers to the amount of memory an algorithm uses in relation to the input size. It is important to consider both time and space complexity when analyzing an algorithm.</p>
</li>
</ul>
<h2 id="common-big-o-notations"><a class="header" href="#common-big-o-notations">Common Big O Notations</a></h2>
<ol>
<li>
<p><strong>O(1)</strong>: Constant time complexity. The execution time does not change regardless of the input size. Example: Accessing an element in an array by index.</p>
</li>
<li>
<p><strong>O(log n)</strong>: Logarithmic time complexity. The execution time grows logarithmically as the input size increases. Example: Binary search in a sorted array.</p>
</li>
<li>
<p><strong>O(n)</strong>: Linear time complexity. The execution time grows linearly with the input size. Example: Iterating through an array.</p>
</li>
<li>
<p><strong>O(n log n)</strong>: Linearithmic time complexity. Common in efficient sorting algorithms like mergesort and heapsort.</p>
</li>
<li>
<p><strong>O(n^2)</strong>: Quadratic time complexity. The execution time grows quadratically with the input size. Example: Bubble sort or selection sort.</p>
</li>
<li>
<p><strong>O(2^n)</strong>: Exponential time complexity. The execution time doubles with each additional element in the input. Example: Solving the Fibonacci sequence using a naive recursive approach.</p>
</li>
<li>
<p><strong>O(n!)</strong>: Factorial time complexity. The execution time grows factorially with the input size. Example: Generating all permutations of a set.</p>
</li>
</ol>
<h2 id="conclusion-4"><a class="header" href="#conclusion-4">Conclusion</a></h2>
<p>Big O notation provides a high-level understanding of the efficiency of algorithms, allowing developers to compare and choose the most suitable algorithm for their needs. By analyzing both time and space complexity, one can make informed decisions that lead to better performance in software applications.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="recursion"><a class="header" href="#recursion">Recursion</a></h1>
<p>Recursion is a programming technique where a function calls itself in order to solve a problem. It is often used to break down complex problems into simpler subproblems.</p>
<h2 id="key-concepts-7"><a class="header" href="#key-concepts-7">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Base Case</strong>: The condition under which the recursion ends. It prevents infinite loops and allows the function to return a result.</p>
</li>
<li>
<p><strong>Recursive Case</strong>: The part of the function where the recursion occurs, typically involving a call to the same function with modified arguments.</p>
</li>
</ul>
<h2 id="common-recursive-algorithms"><a class="header" href="#common-recursive-algorithms">Common Recursive Algorithms</a></h2>
<ol>
<li>
<p><strong>Factorial Calculation</strong>: The factorial of a non-negative integer n is the product of all positive integers less than or equal to n. It can be defined recursively as:</p>
<ul>
<li><code>factorial(n) = n * factorial(n - 1)</code> with the base case <code>factorial(0) = 1</code>.</li>
</ul>
</li>
<li>
<p><strong>Fibonacci Sequence</strong>: The Fibonacci sequence is a series of numbers where each number is the sum of the two preceding ones. It can be defined recursively as:</p>
<ul>
<li><code>fibonacci(n) = fibonacci(n - 1) + fibonacci(n - 2)</code> with base cases <code>fibonacci(0) = 0</code> and <code>fibonacci(1) = 1</code>.</li>
</ul>
</li>
<li>
<p><strong>Binary Search</strong>: A search algorithm that finds the position of a target value within a sorted array. It can be implemented recursively by dividing the array in half:</p>
<ul>
<li>If the target is less than the middle element, search the left half; if greater, search the right half.</li>
</ul>
</li>
</ol>
<h2 id="applications-2"><a class="header" href="#applications-2">Applications</a></h2>
<p>Recursion is widely used in various applications, including:</p>
<ul>
<li><strong>Tree Traversals</strong>: Navigating through tree data structures using recursive methods.</li>
<li><strong>Backtracking Algorithms</strong>: Solving problems incrementally by trying partial solutions and then abandoning them if they fail to satisfy the conditions.</li>
<li><strong>Dynamic Programming</strong>: Many dynamic programming problems can be solved using recursive approaches with memoization to optimize performance.</li>
</ul>
<h2 id="conclusion-5"><a class="header" href="#conclusion-5">Conclusion</a></h2>
<p>Recursion is a powerful tool in programming that allows for elegant solutions to complex problems. Understanding how to effectively use recursion is essential for developing efficient algorithms in computer science and software engineering.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dynamic-programming"><a class="header" href="#dynamic-programming">Dynamic Programming</a></h1>
<h2 id="overview-13"><a class="header" href="#overview-13">Overview</a></h2>
<p>Dynamic Programming (DP) solves complex problems by breaking them into simpler subproblems, solving each once, and storing results to avoid recomputation. Essential for optimization problems.</p>
<h2 id="key-concepts-8"><a class="header" href="#key-concepts-8">Key Concepts</a></h2>
<p><strong>Optimal Substructure</strong>: Optimal solution built from optimal solutions of subproblems</p>
<p><strong>Overlapping Subproblems</strong>: Same subproblem computed multiple times</p>
<h2 id="approaches"><a class="header" href="#approaches">Approaches</a></h2>
<h3 id="memoization-top-down"><a class="header" href="#memoization-top-down">Memoization (Top-Down)</a></h3>
<pre><code class="language-python">def fib(n, memo={}):
    if n in memo:
        return memo[n]
    if n &lt;= 1:
        return n
    memo[n] = fib(n-1, memo) + fib(n-2, memo)
    return memo[n]
</code></pre>
<h3 id="tabulation-bottom-up"><a class="header" href="#tabulation-bottom-up">Tabulation (Bottom-Up)</a></h3>
<pre><code class="language-python">def fib(n):
    dp = [0] * (n + 1)
    dp[1] = 1
    for i in range(2, n + 1):
        dp[i] = dp[i-1] + dp[i-2]
    return dp[n]
</code></pre>
<h2 id="classic-problems"><a class="header" href="#classic-problems">Classic Problems</a></h2>
<h3 id="coin-change"><a class="header" href="#coin-change">Coin Change</a></h3>
<pre><code class="language-python">def coin_change(coins, amount):
    dp = [float('inf')] * (amount + 1)
    dp[0] = 0
    for coin in coins:
        for i in range(coin, amount + 1):
            dp[i] = min(dp[i], dp[i - coin] + 1)
    return dp[amount] if dp[amount] != float('inf') else -1
</code></pre>
<h3 id="knapsack"><a class="header" href="#knapsack">Knapsack</a></h3>
<pre><code class="language-python">def knapsack(weights, values, capacity):
    dp = [[0] * (capacity + 1) for _ in range(len(weights) + 1)]
    for i in range(1, len(weights) + 1):
        for w in range(capacity + 1):
            if weights[i-1] &lt;= w:
                dp[i][w] = max(
                    values[i-1] + dp[i-1][w - weights[i-1]],
                    dp[i-1][w]
                )
            else:
                dp[i][w] = dp[i-1][w]
    return dp[len(weights)][capacity]
</code></pre>
<h3 id="longest-common-subsequence"><a class="header" href="#longest-common-subsequence">Longest Common Subsequence</a></h3>
<pre><code class="language-python">def lcs(text1, text2):
    m, n = len(text1), len(text2)
    dp = [[0] * (n + 1) for _ in range(m + 1)]
    for i in range(1, m + 1):
        for j in range(1, n + 1):
            if text1[i-1] == text2[j-1]:
                dp[i][j] = dp[i-1][j-1] + 1
            else:
                dp[i][j] = max(dp[i-1][j], dp[i][j-1])
    return dp[m][n]
</code></pre>
<h3 id="edit-distance"><a class="header" href="#edit-distance">Edit Distance</a></h3>
<pre><code class="language-python">def editDistance(word1, word2):
    m, n = len(word1), len(word2)
    dp = [[0] * (n + 1) for _ in range(m + 1)]

    for i in range(m + 1):
        dp[i][0] = i
    for j in range(n + 1):
        dp[0][j] = j

    for i in range(1, m + 1):
        for j in range(1, n + 1):
            if word1[i-1] == word2[j-1]:
                dp[i][j] = dp[i-1][j-1]
            else:
                dp[i][j] = 1 + min(dp[i-1][j], dp[i][j-1], dp[i-1][j-1])

    return dp[m][n]
</code></pre>
<h2 id="patterns"><a class="header" href="#patterns">Patterns</a></h2>
<p>1D DP: <code>dp[i] = f(dp[i-1], dp[i-2], ...)</code>
2D DP: <code>dp[i][j] = f(dp[i-1][j], dp[i][j-1], ...)</code></p>
<h2 id="complexity"><a class="header" href="#complexity">Complexity</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Problem</th><th>Naive</th><th>DP</th></tr></thead><tbody>
<tr><td>Fibonacci</td><td>O(2^n)</td><td>O(n)</td></tr>
<tr><td>Coin Change</td><td>O(n^m)</td><td>O(n*m)</td></tr>
<tr><td>Knapsack</td><td>O(2^n)</td><td>O(n*w)</td></tr>
</tbody></table>
</div>
<h2 id="eli10-4"><a class="header" href="#eli10-4">ELI10</a></h2>
<p>DP is like climbing stairs - memorize steps you've already calculated instead of redoing them!</p>
<h2 id="further-resources-4"><a class="header" href="#further-resources-4">Further Resources</a></h2>
<ul>
<li>
<p><a href="https://leetcode.com/tag/dynamic-programming/">LeetCode DP Problems</a></p>
</li>
<li>
<p>[Key Concepts</p>
</li>
<li>
<p><strong>Overlapping Subproblems</strong>: Dynamic programming is applicable when the problem can be broken down into smaller, overlapping subproblems that can be solved independently. The results of these subproblems are stored to avoid redundant calculations.</p>
</li>
<li>
<p><strong>Optimal Substructure</strong>: A problem exhibits optimal substructure if an optimal solution to the problem can be constructed from optimal solutions to its subproblems. This property allows dynamic programming to build up solutions incrementally.</p>
</li>
</ul>
<h2 id="techniques"><a class="header" href="#techniques">Techniques</a></h2>
<ol>
<li>
<p><strong>Top-Down Approach (Memoization)</strong>: This approach involves solving the problem recursively and storing the results of subproblems in a table (or cache) to avoid redundant calculations. When a subproblem is encountered again, the stored result is used instead of recalculating it.</p>
</li>
<li>
<p><strong>Bottom-Up Approach (Tabulation)</strong>: In this approach, the problem is solved iteratively by filling up a table based on previously computed values. This method typically starts with the smallest subproblems and builds up to the solution of the original problem.</p>
</li>
</ol>
<h2 id="applications-3"><a class="header" href="#applications-3">Applications</a></h2>
<p>Dynamic programming is widely used in various applications, including:</p>
<ul>
<li>
<p><strong>Fibonacci Sequence</strong>: Calculating Fibonacci numbers can be optimized using dynamic programming to avoid exponential time complexity.</p>
</li>
<li>
<p><strong>Knapsack Problem</strong>: The 0/1 knapsack problem can be efficiently solved using dynamic programming techniques to maximize the total value of items that can be carried.</p>
</li>
<li>
<p><strong>Longest Common Subsequence</strong>: Finding the longest common subsequence between two strings can be accomplished using dynamic programming to build a solution based on previously computed subsequences.</p>
</li>
</ul>
<h2 id="conclusion-6"><a class="header" href="#conclusion-6">Conclusion</a></h2>
<p>Dynamic programming is a crucial technique in algorithm design that enables efficient solutions to problems with overlapping subproblems and optimal substructure. By leveraging memoization or tabulation, developers can significantly improve the performance of their algorithms, making dynamic programming an essential tool in computer science and software engineering.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="backtracking"><a class="header" href="#backtracking">Backtracking</a></h1>
<p>Backtracking is a general algorithmic technique that incrementally builds candidates for solutions and abandons a candidate as soon as it is determined that it cannot lead to a valid solution. It is often used for solving constraint satisfaction problems, such as puzzles, combinatorial problems, and optimization problems.</p>
<h2 id="key-concepts-9"><a class="header" href="#key-concepts-9">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Recursive Approach</strong>: Backtracking is typically implemented using recursion. The algorithm explores each possible option and recursively attempts to build a solution. If a solution is found, it is returned; if not, the algorithm backtracks to try the next option.</p>
</li>
<li>
<p><strong>State Space Tree</strong>: The process of backtracking can be visualized as a tree where each node represents a state of the solution. The root node represents the initial state, and each branch represents a choice made. The leaves of the tree represent complete solutions or dead ends.</p>
</li>
<li>
<p><strong>Pruning</strong>: One of the key advantages of backtracking is its ability to prune the search space. If a partial solution cannot lead to a valid complete solution, the algorithm can abandon that path early, thus saving time and resources.</p>
</li>
</ul>
<h2 id="applications-4"><a class="header" href="#applications-4">Applications</a></h2>
<p>Backtracking is widely used in various applications, including:</p>
<ul>
<li>
<p><strong>Puzzle Solving</strong>: Problems like Sudoku, N-Queens, and mazes can be efficiently solved using backtracking techniques.</p>
</li>
<li>
<p><strong>Combinatorial Problems</strong>: Generating permutations, combinations, and subsets of a set can be accomplished through backtracking.</p>
</li>
<li>
<p><strong>Graph Problems</strong>: Backtracking can be applied to find Hamiltonian paths, Eulerian paths, and other graph-related problems.</p>
</li>
</ul>
<h2 id="conclusion-7"><a class="header" href="#conclusion-7">Conclusion</a></h2>
<p>Backtracking is a powerful algorithmic technique that provides a systematic way to explore all possible solutions to a problem. By leveraging recursion and pruning, it can efficiently solve complex problems that would otherwise require exhaustive search methods.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="divide-and-conquer"><a class="header" href="#divide-and-conquer">Divide and Conquer</a></h1>
<p>Divide and conquer is a fundamental algorithmic technique that involves breaking a problem down into smaller subproblems, solving each subproblem independently, and then combining their solutions to solve the original problem. This approach is particularly effective for problems that can be recursively divided into similar subproblems.</p>
<h2 id="key-concepts-10"><a class="header" href="#key-concepts-10">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Divide</strong>: The problem is divided into smaller subproblems that are similar to the original problem but smaller in size. This step often involves identifying a base case for the recursion.</p>
</li>
<li>
<p><strong>Conquer</strong>: Each subproblem is solved independently, often using the same divide and conquer strategy recursively. If the subproblems are small enough, they may be solved directly.</p>
</li>
<li>
<p><strong>Combine</strong>: The solutions to the subproblems are combined to form a solution to the original problem. This step is crucial as it integrates the results of the smaller problems into a coherent solution.</p>
</li>
</ul>
<h2 id="applications-5"><a class="header" href="#applications-5">Applications</a></h2>
<p>Divide and conquer is widely used in various algorithms and applications, including:</p>
<ul>
<li>
<p><strong>Sorting Algorithms</strong>: Algorithms like Merge Sort and Quick Sort utilize the divide and conquer approach to sort elements efficiently.</p>
</li>
<li>
<p><strong>Searching Algorithms</strong>: Binary Search is a classic example of a divide and conquer algorithm that efficiently finds an element in a sorted array.</p>
</li>
<li>
<p><strong>Matrix Multiplication</strong>: Strassen's algorithm for matrix multiplication is another example where the divide and conquer technique is applied to reduce the complexity of the operation.</p>
</li>
</ul>
<h2 id="conclusion-8"><a class="header" href="#conclusion-8">Conclusion</a></h2>
<p>The divide and conquer strategy is a powerful tool in algorithm design, enabling efficient solutions to complex problems by breaking them down into manageable parts. Understanding this technique is essential for developing efficient algorithms in computer science and software engineering.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="greedy-algorithms"><a class="header" href="#greedy-algorithms">Greedy Algorithms</a></h1>
<p>Greedy algorithms are a class of algorithms that make locally optimal choices at each stage with the hope of finding a global optimum. They are often used for optimization problems where a solution can be built incrementally.</p>
<h2 id="key-concepts-11"><a class="header" href="#key-concepts-11">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Greedy Choice Property</strong>: A global optimum can be reached by selecting a local optimum. This property is essential for the effectiveness of greedy algorithms.</p>
</li>
<li>
<p><strong>Optimal Substructure</strong>: A problem exhibits optimal substructure if an optimal solution to the problem contains optimal solutions to its subproblems.</p>
</li>
</ul>
<h2 id="common-greedy-algorithms"><a class="header" href="#common-greedy-algorithms">Common Greedy Algorithms</a></h2>
<ol>
<li>
<p><strong>Activity Selection Problem</strong>: This problem involves selecting the maximum number of activities that don't overlap in time. The greedy choice is to always select the next activity that finishes the earliest.</p>
</li>
<li>
<p><strong>Huffman Coding</strong>: A compression algorithm that uses a greedy approach to assign variable-length codes to input characters, based on their frequencies.</p>
</li>
<li>
<p><strong>Kruskal's Algorithm</strong>: An algorithm for finding the minimum spanning tree of a graph by adding edges in increasing order of weight, ensuring no cycles are formed.</p>
</li>
<li>
<p><strong>Prim's Algorithm</strong>: Another algorithm for finding the minimum spanning tree, which grows the spanning tree one vertex at a time, always choosing the smallest edge that connects a vertex in the tree to a vertex outside the tree.</p>
</li>
</ol>
<h2 id="applications-6"><a class="header" href="#applications-6">Applications</a></h2>
<p>Greedy algorithms are widely used in various applications, including:</p>
<ul>
<li><strong>Network Routing</strong>: Finding the shortest path in a network.</li>
<li><strong>Resource Allocation</strong>: Distributing resources in a way that maximizes efficiency.</li>
<li><strong>Job Scheduling</strong>: Scheduling jobs on machines to minimize completion time.</li>
</ul>
<h2 id="conclusion-9"><a class="header" href="#conclusion-9">Conclusion</a></h2>
<p>Greedy algorithms provide a straightforward and efficient approach to solving optimization problems. While they do not always yield the optimal solution, they are often easier to implement and can be very effective for certain types of problems.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sorting-algorithms"><a class="header" href="#sorting-algorithms">Sorting Algorithms</a></h1>
<h2 id="overview-14"><a class="header" href="#overview-14">Overview</a></h2>
<p>Sorting arranges elements in order. Different algorithms have different trade-offs in speed, memory, and stability.</p>
<h2 id="common-algorithms-1"><a class="header" href="#common-algorithms-1">Common Algorithms</a></h2>
<h3 id="bubble-sort"><a class="header" href="#bubble-sort">Bubble Sort</a></h3>
<p><strong>Time</strong>: O(n²) | <strong>Space</strong>: O(1)</p>
<pre><code class="language-python">def bubble_sort(arr):
    n = len(arr)
    for i in range(n):
        for j in range(0, n - i - 1):
            if arr[j] &gt; arr[j + 1]:
                arr[j], arr[j + 1] = arr[j + 1], arr[j]
    return arr
</code></pre>
<h3 id="selection-sort"><a class="header" href="#selection-sort">Selection Sort</a></h3>
<p><strong>Time</strong>: O(n²) | <strong>Space</strong>: O(1)</p>
<pre><code class="language-python">def selection_sort(arr):
    for i in range(len(arr)):
        min_idx = i
        for j in range(i + 1, len(arr)):
            if arr[j] &lt; arr[min_idx]:
                min_idx = j
        arr[i], arr[min_idx] = arr[min_idx], arr[i]
    return arr
</code></pre>
<h3 id="insertion-sort"><a class="header" href="#insertion-sort">Insertion Sort</a></h3>
<p><strong>Time</strong>: O(n²) | <strong>Space</strong>: O(1) | <strong>Best</strong>: O(n)</p>
<pre><code class="language-python">def insertion_sort(arr):
    for i in range(1, len(arr)):
        key = arr[i]
        j = i - 1
        while j &gt;= 0 and arr[j] &gt; key:
            arr[j + 1] = arr[j]
            j -= 1
        arr[j + 1] = key
    return arr
</code></pre>
<h3 id="merge-sort"><a class="header" href="#merge-sort">Merge Sort</a></h3>
<p><strong>Time</strong>: O(n log n) | <strong>Space</strong>: O(n) | <strong>Stable</strong>: ✓</p>
<pre><code class="language-python">def merge_sort(arr):
    if len(arr) &lt;= 1:
        return arr

    mid = len(arr) // 2
    left = merge_sort(arr[:mid])
    right = merge_sort(arr[mid:])

    return merge(left, right)

def merge(left, right):
    result = []
    i = j = 0
    while i &lt; len(left) and j &lt; len(right):
        if left[i] &lt; right[j]:
            result.append(left[i])
            i += 1
        else:
            result.append(right[j])
            j += 1
    result.extend(left[i:])
    result.extend(right[j:])
    return result
</code></pre>
<h3 id="quick-sort"><a class="header" href="#quick-sort">Quick Sort</a></h3>
<p><strong>Time</strong>: O(n log n) avg, O(n²) worst | <strong>Space</strong>: O(log n)</p>
<pre><code class="language-python">def quick_sort(arr):
    if len(arr) &lt;= 1:
        return arr

    pivot = arr[len(arr) // 2]
    left = [x for x in arr if x &lt; pivot]
    middle = [x for x in arr if x == pivot]
    right = [x for x in arr if x &gt; pivot]

    return quick_sort(left) + middle + quick_sort(right)
</code></pre>
<h3 id="heap-sort"><a class="header" href="#heap-sort">Heap Sort</a></h3>
<p><strong>Time</strong>: O(n log n) | <strong>Space</strong>: O(1)</p>
<pre><code class="language-python">def heap_sort(arr):
    def heapify(arr, n, i):
        largest = i
        left = 2 * i + 1
        right = 2 * i + 2

        if left &lt; n and arr[left] &gt; arr[largest]:
            largest = left
        if right &lt; n and arr[right] &gt; arr[largest]:
            largest = right

        if largest != i:
            arr[i], arr[largest] = arr[largest], arr[i]
            heapify(arr, n, largest)

    n = len(arr)
    for i in range(n // 2 - 1, -1, -1):
        heapify(arr, n, i)

    for i in range(n - 1, 0, -1):
        arr[0], arr[i] = arr[i], arr[0]
        heapify(arr, i, 0)

    return arr
</code></pre>
<h2 id="comparison"><a class="header" href="#comparison">Comparison</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Algorithm</th><th>Best</th><th>Average</th><th>Worst</th><th>Space</th><th>Stable</th></tr></thead><tbody>
<tr><td><strong>Bubble</strong></td><td>O(n)</td><td>O(n²)</td><td>O(n²)</td><td>O(1)</td><td>✓</td></tr>
<tr><td><strong>Selection</strong></td><td>O(n²)</td><td>O(n²)</td><td>O(n²)</td><td>O(1)</td><td>✗</td></tr>
<tr><td><strong>Insertion</strong></td><td>O(n)</td><td>O(n²)</td><td>O(n²)</td><td>O(1)</td><td>✓</td></tr>
<tr><td><strong>Merge</strong></td><td>O(n log n)</td><td>O(n log n)</td><td>O(n log n)</td><td>O(n)</td><td>✓</td></tr>
<tr><td><strong>Quick</strong></td><td>O(n log n)</td><td>O(n log n)</td><td>O(n²)</td><td>O(log n)</td><td>✗</td></tr>
<tr><td><strong>Heap</strong></td><td>O(n log n)</td><td>O(n log n)</td><td>O(n log n)</td><td>O(1)</td><td>✗</td></tr>
</tbody></table>
</div>
<h2 id="when-to-use"><a class="header" href="#when-to-use">When to Use</a></h2>
<ul>
<li><strong>Insertion Sort</strong>: Small arrays, nearly sorted</li>
<li><strong>Merge Sort</strong>: Need stability, external sorting</li>
<li><strong>Quick Sort</strong>: General purpose, good cache</li>
<li><strong>Heap Sort</strong>: Guaranteed O(n log n), no extra space</li>
</ul>
<h2 id="python-built-in"><a class="header" href="#python-built-in">Python Built-in</a></h2>
<pre><code class="language-python"># Best for most cases
arr.sort()  # In-place, O(n log n)
sorted(arr)  # Returns new list

# Custom comparator
arr.sort(key=lambda x: x['age'])
</code></pre>
<h2 id="eli10-5"><a class="header" href="#eli10-5">ELI10</a></h2>
<p>Different sorting strategies:</p>
<ul>
<li><strong>Bubble</strong>: Compare neighbors (slow)</li>
<li><strong>Quick</strong>: Pick pivot, divide and conquer (fast)</li>
<li><strong>Merge</strong>: Split in half, merge back (reliable)</li>
</ul>
<p>Use built-in sorts unless learning!</p>
<h2 id="further-resources-5"><a class="header" href="#further-resources-5">Further Resources</a></h2>
<ul>
<li><a href="https://www.sortvisualizer.com/">Sorting Algorithms Visualized</a></li>
<li><a href="https://www.bigocheatsheet.com/">Big-O Cheatsheet</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="searching-algorithms"><a class="header" href="#searching-algorithms">Searching Algorithms</a></h1>
<h2 id="overview-15"><a class="header" href="#overview-15">Overview</a></h2>
<p>Searching algorithms help find elements in data structures. The choice depends on whether data is sorted and the size of the data.</p>
<h2 id="linear-search-1"><a class="header" href="#linear-search-1">Linear Search</a></h2>
<p><strong>Time</strong>: O(n) | <strong>Space</strong>: O(1) | <strong>Works on</strong>: Unsorted arrays</p>
<pre><code class="language-python">def linear_search(arr, target):
    for i in range(len(arr)):
        if arr[i] == target:
            return i
    return -1
</code></pre>
<p><strong>When to use</strong>: Small arrays, unsorted data</p>
<h2 id="binary-search"><a class="header" href="#binary-search">Binary Search</a></h2>
<p><strong>Time</strong>: O(log n) | <strong>Space</strong>: O(1) | <strong>Requires</strong>: Sorted array</p>
<pre><code class="language-python">def binary_search(arr, target):
    left, right = 0, len(arr) - 1

    while left &lt;= right:
        mid = left + (right - left) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1

    return -1  # Not found
</code></pre>
<h3 id="variations"><a class="header" href="#variations">Variations</a></h3>
<pre><code class="language-python"># Find first occurrence
def find_first(arr, target):
    left, right = 0, len(arr) - 1
    result = -1

    while left &lt;= right:
        mid = left + (right - left) // 2
        if arr[mid] == target:
            result = mid
            right = mid - 1  # Keep searching left
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1

    return result

# Find last occurrence
def find_last(arr, target):
    left, right = 0, len(arr) - 1
    result = -1

    while left &lt;= right:
        mid = left + (right - left) // 2
        if arr[mid] == target:
            result = mid
            left = mid + 1  # Keep searching right
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1

    return result
</code></pre>
<h2 id="two-pointer-technique"><a class="header" href="#two-pointer-technique">Two Pointer Technique</a></h2>
<p><strong>Time</strong>: O(n) | <strong>Space</strong>: O(1)</p>
<pre><code class="language-python">def two_sum(arr, target):
    """Find two numbers that sum to target"""
    left, right = 0, len(arr) - 1

    while left &lt; right:
        current_sum = arr[left] + arr[right]
        if current_sum == target:
            return [left, right]
        elif current_sum &lt; target:
            left += 1
        else:
            right -= 1

    return []
</code></pre>
<h2 id="jump-search"><a class="header" href="#jump-search">Jump Search</a></h2>
<p><strong>Time</strong>: O(n) | <strong>Space</strong>: O(1) | <strong>Requires</strong>: Sorted array</p>
<pre><code class="language-python">import math

def jump_search(arr, target):
    n = len(arr)
    step = int(math.sqrt(n))
    prev = 0

    # Find block where target is present
    while arr[min(step, n) - 1] &lt; target:
        prev = step
        step += int(math.sqrt(n))
        if prev &gt;= n:
            return -1

    # Linear search in block
    while arr[prev] &lt; target:
        prev += 1
        if prev == min(step, n):
            return -1

    # Check if target found
    if arr[prev] == target:
        return prev

    return -1
</code></pre>
<h2 id="interpolation-search"><a class="header" href="#interpolation-search">Interpolation Search</a></h2>
<p><strong>Time</strong>: O(log log n) average, O(n) worst | <strong>Requires</strong>: Sorted uniformly distributed data</p>
<pre><code class="language-python">def interpolation_search(arr, target):
    left, right = 0, len(arr) - 1

    while (left &lt;= right and
           target &gt;= arr[left] and
           target &lt;= arr[right]):

        # Estimate position
        pos = left + int((right - left) / (arr[right] - arr[left]) *
                        (target - arr[left]))

        if arr[pos] == target:
            return pos
        elif arr[pos] &lt; target:
            left = pos + 1
        else:
            right = pos - 1

    return -1
</code></pre>
<h2 id="exponential-search"><a class="header" href="#exponential-search">Exponential Search</a></h2>
<p><strong>Time</strong>: O(log n) | <strong>Space</strong>: O(1) | <strong>Requires</strong>: Sorted array</p>
<pre><code class="language-python">def exponential_search(arr, target):
    n = len(arr)

    # Find range
    i = 1
    while i &lt; n and arr[i] &lt; target:
        i *= 2

    # Binary search in range
    left = i // 2
    right = min(i, n - 1)

    while left &lt;= right:
        mid = left + (right - left) // 2
        if arr[mid] == target:
            return mid
        elif arr[mid] &lt; target:
            left = mid + 1
        else:
            right = mid - 1

    return -1
</code></pre>
<h2 id="sentinel-search"><a class="header" href="#sentinel-search">Sentinel Search</a></h2>
<p>Optimize linear search by eliminating boundary check:</p>
<pre><code class="language-python">def sentinel_search(arr, target):
    n = len(arr)
    last = arr[n - 1]
    arr[n - 1] = target

    i = 0
    while arr[i] != target:
        i += 1

    arr[n - 1] = last  # Restore

    if i &lt; n - 1 or last == target:
        return i
    return -1
</code></pre>
<h2 id="comparison-1"><a class="header" href="#comparison-1">Comparison</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Algorithm</th><th>Time (Avg)</th><th>Time (Worst)</th><th>Space</th><th>Requires Sorted</th></tr></thead><tbody>
<tr><td>Linear</td><td>O(n)</td><td>O(n)</td><td>O(1)</td><td>No</td></tr>
<tr><td>Binary</td><td>O(log n)</td><td>O(log n)</td><td>O(1)</td><td>Yes</td></tr>
<tr><td>Jump</td><td>O(n)</td><td>O(n)</td><td>O(1)</td><td>Yes</td></tr>
<tr><td>Interpolation</td><td>O(log log n)</td><td>O(n)</td><td>O(1)</td><td>Yes</td></tr>
<tr><td>Exponential</td><td>O(log n)</td><td>O(log n)</td><td>O(1)</td><td>Yes</td></tr>
</tbody></table>
</div>
<h2 id="key-takeaways"><a class="header" href="#key-takeaways">Key Takeaways</a></h2>
<ol>
<li><strong>Unsorted data?</strong> Use Linear Search or Hash Table</li>
<li><strong>Sorted data?</strong> Use Binary Search for O(log n)</li>
<li><strong>Uniformly distributed?</strong> Try Interpolation Search</li>
<li><strong>Need flexibility?</strong> Build a Hash Table for O(1) lookup</li>
</ol>
<h2 id="eli10-6"><a class="header" href="#eli10-6">ELI10</a></h2>
<p>Imagine finding a word in a dictionary:</p>
<ul>
<li><strong>Linear Search</strong>: Check every word from start (slow!)</li>
<li><strong>Binary Search</strong>: Open middle, go left or right, repeat (fast!)</li>
<li><strong>Interpolation</strong>: Estimate where word should be based on first letter</li>
</ul>
<p>Binary search is fastest for sorted data!</p>
<h2 id="further-resources-6"><a class="header" href="#further-resources-6">Further Resources</a></h2>
<ul>
<li><a href="https://leetcode.com/tag/binary-search/">LeetCode Binary Search</a></li>
<li><a href="https://visualgo.net/en/search">Searching Algorithms Visualization</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graphs-1"><a class="header" href="#graphs-1">Graphs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="trees-1"><a class="header" href="#trees-1">Trees</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="heaps"><a class="header" href="#heaps">Heaps</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tries"><a class="header" href="#tries">Tries</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="security-1"><a class="header" href="#security-1">Security</a></h1>
<p>Comprehensive security reference covering cryptography, authentication, and secure communications.</p>
<h2 id="cryptography"><a class="header" href="#cryptography">Cryptography</a></h2>
<h3 id="encryption"><a class="header" href="#encryption"><a href="security/encryption.html">Encryption</a></a></h3>
<ul>
<li>Symmetric encryption (AES, ChaCha20)</li>
<li>Asymmetric encryption (RSA, ECC)</li>
<li>Encryption modes and best practices</li>
<li>Key management</li>
</ul>
<h3 id="hashing"><a class="header" href="#hashing"><a href="security/hashing.html">Hashing</a></a></h3>
<ul>
<li>Cryptographic hash functions</li>
<li>SHA-256, SHA-3, BLAKE2</li>
<li>Password hashing (bcrypt, Argon2)</li>
<li>Hash-based applications</li>
</ul>
<h3 id="hmac"><a class="header" href="#hmac"><a href="security/hmac.html">HMAC</a></a></h3>
<ul>
<li>Hash-based Message Authentication Code</li>
<li>Message integrity and authenticity</li>
<li>HMAC construction and usage</li>
<li>Applications in APIs and tokens</li>
</ul>
<h2 id="authentication--signatures"><a class="header" href="#authentication--signatures">Authentication &amp; Signatures</a></h2>
<h3 id="digital-signatures"><a class="header" href="#digital-signatures"><a href="security/digital_signatures.html">Digital Signatures</a></a></h3>
<ul>
<li>RSA signatures</li>
<li>ECDSA (Elliptic Curve Digital Signature Algorithm)</li>
<li>EdDSA (Edwards-curve Digital Signature Algorithm)</li>
<li>Signature verification</li>
<li>Applications (code signing, documents)</li>
</ul>
<h3 id="certificates"><a class="header" href="#certificates"><a href="security/certificates.html">Certificates</a></a></h3>
<ul>
<li>X.509 certificates</li>
<li>Certificate Authorities (CAs)</li>
<li>Certificate chains and trust</li>
<li>Certificate management</li>
<li>Let's Encrypt and ACME protocol</li>
</ul>
<h2 id="secure-communications"><a class="header" href="#secure-communications">Secure Communications</a></h2>
<h3 id="ssltls"><a class="header" href="#ssltls"><a href="security/ssl_tls.html">SSL/TLS</a></a></h3>
<ul>
<li>TLS handshake process</li>
<li>Cipher suites</li>
<li>Certificate validation</li>
<li>TLS 1.2 vs TLS 1.3</li>
<li>Common vulnerabilities (BEAST, POODLE, Heartbleed)</li>
<li>Best practices and configuration</li>
</ul>
<h2 id="quick-reference-3"><a class="header" href="#quick-reference-3">Quick Reference</a></h2>
<h3 id="common-algorithms-2"><a class="header" href="#common-algorithms-2">Common Algorithms</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Algorithm</th><th>Type</th><th>Key Size</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>AES</strong></td><td>Symmetric</td><td>128/192/256-bit</td><td>General encryption</td></tr>
<tr><td><strong>ChaCha20</strong></td><td>Symmetric</td><td>256-bit</td><td>Mobile/embedded</td></tr>
<tr><td><strong>RSA</strong></td><td>Asymmetric</td><td>2048/4096-bit</td><td>Key exchange, signatures</td></tr>
<tr><td><strong>ECDSA</strong></td><td>Asymmetric</td><td>256-bit</td><td>Signatures (Bitcoin)</td></tr>
<tr><td><strong>SHA-256</strong></td><td>Hash</td><td>N/A</td><td>Checksums, Bitcoin</td></tr>
<tr><td><strong>bcrypt</strong></td><td>Password Hash</td><td>N/A</td><td>Password storage</td></tr>
<tr><td><strong>Argon2</strong></td><td>Password Hash</td><td>N/A</td><td>Password storage (modern)</td></tr>
</tbody></table>
</div>
<h3 id="security-best-practices"><a class="header" href="#security-best-practices">Security Best Practices</a></h3>
<ol>
<li>
<p><strong>Use Modern Algorithms</strong></p>
<ul>
<li>AES-256 for symmetric encryption</li>
<li>RSA-2048 minimum, prefer ECC</li>
<li>SHA-256 or SHA-3 for hashing</li>
<li>Argon2 for password hashing</li>
</ul>
</li>
<li>
<p><strong>Key Management</strong></p>
<ul>
<li>Generate strong random keys</li>
<li>Rotate keys regularly</li>
<li>Use HSM for critical keys</li>
<li>Never hardcode secrets</li>
</ul>
</li>
<li>
<p><strong>TLS Configuration</strong></p>
<ul>
<li>Use TLS 1.2 minimum (prefer 1.3)</li>
<li>Disable weak cipher suites</li>
<li>Enable Perfect Forward Secrecy</li>
<li>Use strong certificate chains</li>
</ul>
</li>
<li>
<p><strong>Password Storage</strong></p>
<ul>
<li>Never store plaintext passwords</li>
<li>Use bcrypt or Argon2</li>
<li>Add unique salt per password</li>
<li>Use appropriate work factors</li>
</ul>
</li>
<li>
<p><strong>API Security</strong></p>
<ul>
<li>Use HMAC for message integrity</li>
<li>Implement rate limiting</li>
<li>Use short-lived tokens</li>
<li>Validate all inputs</li>
</ul>
</li>
</ol>
<h2 id="common-tools"><a class="header" href="#common-tools">Common Tools</a></h2>
<pre><code class="language-bash"># OpenSSL
openssl enc -aes-256-cbc -in file.txt -out file.enc
openssl req -new -x509 -days 365 -key key.pem -out cert.pem

# Generate keys
ssh-keygen -t ed25519
openssl genrsa -out private.key 2048

# Hashing
sha256sum file.txt
openssl dgst -sha256 file.txt

# Certificate inspection
openssl x509 -in cert.pem -text -noout
openssl s_client -connect example.com:443
</code></pre>
<h2 id="related-topics"><a class="header" href="#related-topics">Related Topics</a></h2>
<ul>
<li>Network security (firewalls, VPNs)</li>
<li>Application security (OWASP Top 10)</li>
<li>Authentication protocols (OAuth, SAML)</li>
<li>Blockchain and cryptocurrencies</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cryptographic-hash-functions"><a class="header" href="#cryptographic-hash-functions">Cryptographic Hash Functions</a></h1>
<h2 id="overview-16"><a class="header" href="#overview-16">Overview</a></h2>
<p>A cryptographic hash function is a mathematical algorithm that takes an input (message) of any size and produces a fixed-size output (hash digest). Hash functions are one-way functions designed to be computationally infeasible to reverse.</p>
<h2 id="key-properties"><a class="header" href="#key-properties">Key Properties</a></h2>
<h3 id="1-deterministic"><a class="header" href="#1-deterministic">1. Deterministic</a></h3>
<p>Same input always produces the same output:</p>
<pre><code>hash("hello") = 2cf24dba5fb0a30e...
hash("hello") = 2cf24dba5fb0a30e...  (always the same)
</code></pre>
<h3 id="2-fast-computation"><a class="header" href="#2-fast-computation">2. Fast Computation</a></h3>
<p>Quick to compute hash for any input</p>
<h3 id="3-pre-image-resistance-one-way"><a class="header" href="#3-pre-image-resistance-one-way">3. Pre-image Resistance (One-way)</a></h3>
<p>Given hash <code>h</code>, computationally infeasible to find message <code>m</code> where <code>hash(m) = h</code></p>
<h3 id="4-collision-resistance"><a class="header" href="#4-collision-resistance">4. Collision Resistance</a></h3>
<p>Computationally infeasible to find two different messages <code>m1</code> and <code>m2</code> where:</p>
<pre><code>hash(m1) = hash(m2)
</code></pre>
<h3 id="5-avalanche-effect"><a class="header" href="#5-avalanche-effect">5. Avalanche Effect</a></h3>
<p>Small change in input drastically changes output:</p>
<pre><code>hash("hello")  = 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824
hash("helloX") = 9c70933a77f8d8d1eb5ba43c8f8c8b2e6f4c8e8a5b9e1b161e5c1fa7425e7304
</code></pre>
<h2 id="common-hash-functions"><a class="header" href="#common-hash-functions">Common Hash Functions</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Algorithm</th><th>Output Size</th><th>Status</th><th>Use Cases</th></tr></thead><tbody>
<tr><td><strong>MD5</strong></td><td>128 bits (16 bytes)</td><td>Broken</td><td>Checksums only</td></tr>
<tr><td><strong>SHA-1</strong></td><td>160 bits (20 bytes)</td><td>Deprecated</td><td>Legacy systems</td></tr>
<tr><td><strong>SHA-256</strong></td><td>256 bits (32 bytes)</td><td>Secure</td><td>General purpose</td></tr>
<tr><td><strong>SHA-512</strong></td><td>512 bits (64 bytes)</td><td>Secure</td><td>High security</td></tr>
<tr><td><strong>SHA-3</strong></td><td>Variable</td><td>Secure</td><td>Modern alternative</td></tr>
<tr><td><strong>BLAKE2</strong></td><td>Variable</td><td>Secure</td><td>Fast, modern</td></tr>
<tr><td><strong>BLAKE3</strong></td><td>256 bits</td><td>Secure</td><td>Fastest, modern</td></tr>
</tbody></table>
</div>
<h2 id="sha-256-secure-hash-algorithm-256"><a class="header" href="#sha-256-secure-hash-algorithm-256">SHA-256 (Secure Hash Algorithm 256)</a></h2>
<h3 id="algorithm-overview"><a class="header" href="#algorithm-overview">Algorithm Overview</a></h3>
<p>SHA-256 is part of the SHA-2 family, designed by the NSA and published in 2001.</p>
<p><strong>Process:</strong></p>
<ol>
<li>Pad message to multiple of 512 bits</li>
<li>Initialize hash values (8 x 32-bit words)</li>
<li>Process message in 512-bit chunks</li>
<li>Each chunk goes through 64 rounds of operations</li>
<li>Produce final 256-bit hash</li>
</ol>
<h3 id="using-sha-256"><a class="header" href="#using-sha-256">Using SHA-256</a></h3>
<h4 id="python-example"><a class="header" href="#python-example">Python Example</a></h4>
<pre><code class="language-python">import hashlib

# Hash a string
message = "Hello, World!"
hash_object = hashlib.sha256(message.encode())
hash_hex = hash_object.hexdigest()
print(f"SHA-256: {hash_hex}")
# Output: SHA-256: dffd6021bb2bd5b0af676290809ec3a53191dd81c7f70a4b28688a362182986f

# Hash a file
def hash_file(filename):
    sha256_hash = hashlib.sha256()
    with open(filename, "rb") as f:
        # Read file in chunks to handle large files
        for byte_block in iter(lambda: f.read(4096), b""):
            sha256_hash.update(byte_block)
    return sha256_hash.hexdigest()

file_hash = hash_file("document.pdf")
print(f"File hash: {file_hash}")

# Incremental hashing
hasher = hashlib.sha256()
hasher.update(b"Hello, ")
hasher.update(b"World!")
print(hasher.hexdigest())
# Same as hashing "Hello, World!" at once
</code></pre>
<h4 id="bashopenssl-example"><a class="header" href="#bashopenssl-example">Bash/OpenSSL Example</a></h4>
<pre><code class="language-bash"># Hash a string
echo -n "Hello, World!" | sha256sum
echo -n "Hello, World!" | openssl dgst -sha256

# Hash a file
sha256sum document.pdf
openssl dgst -sha256 document.pdf

# Verify file integrity
sha256sum document.pdf &gt; checksum.txt
sha256sum -c checksum.txt

# Hash multiple files
sha256sum *.pdf &gt; all_checksums.txt
</code></pre>
<h3 id="sha-256-output-format"><a class="header" href="#sha-256-output-format">SHA-256 Output Format</a></h3>
<pre><code>Input: "Hello, World!"

Binary (256 bits):
11011111111111010110000000100001...

Hexadecimal (64 characters):
dffd6021bb2bd5b0af676290809ec3a53191dd81c7f70a4b28688a362182986f

Base64 (44 characters):
3/1gIbsr1bCvZ2KQgJ7DpTGR3YHH9wpLKGiKNiGCmG8=
</code></pre>
<h2 id="sha-3-keccak"><a class="header" href="#sha-3-keccak">SHA-3 (Keccak)</a></h2>
<p>SHA-3 is based on a different construction (sponge function) than SHA-2, providing an alternative if SHA-2 is compromised.</p>
<h3 id="using-sha-3"><a class="header" href="#using-sha-3">Using SHA-3</a></h3>
<pre><code class="language-python">import hashlib

message = "Hello, World!"

# SHA-3 variants
sha3_256 = hashlib.sha3_256(message.encode()).hexdigest()
sha3_512 = hashlib.sha3_512(message.encode()).hexdigest()

print(f"SHA3-256: {sha3_256}")
print(f"SHA3-512: {sha3_512}")

# SHAKE (extendable output)
shake = hashlib.shake_256(message.encode())
# Get 32 bytes of output
print(f"SHAKE256: {shake.hexdigest(32)}")
</code></pre>
<h2 id="blake2"><a class="header" href="#blake2">BLAKE2</a></h2>
<p>Faster than SHA-2 and SHA-3, with built-in keyed hashing and salting support.</p>
<h3 id="using-blake2"><a class="header" href="#using-blake2">Using BLAKE2</a></h3>
<pre><code class="language-python">import hashlib

message = b"Hello, World!"

# BLAKE2b (optimized for 64-bit platforms)
blake2b = hashlib.blake2b(message).hexdigest()
print(f"BLAKE2b: {blake2b}")

# BLAKE2s (optimized for 8-32 bit platforms)
blake2s = hashlib.blake2s(message).hexdigest()
print(f"BLAKE2s: {blake2s}")

# Keyed hashing (MAC)
key = b"secret-key-123"
mac = hashlib.blake2b(message, key=key).hexdigest()
print(f"BLAKE2b MAC: {mac}")

# Custom digest size
digest = hashlib.blake2b(message, digest_size=16).hexdigest()
print(f"BLAKE2b-128: {digest}")

# With salt (for password hashing)
salt = b"random-salt-16bytes!"
h = hashlib.blake2b(message, salt=salt, digest_size=32)
print(f"BLAKE2b with salt: {h.hexdigest()}")
</code></pre>
<h2 id="password-hashing"><a class="header" href="#password-hashing">Password Hashing</a></h2>
<p><strong>WARNING</strong>: Never use fast hashes (SHA-256, MD5) for passwords! Use specialized password hashing functions.</p>
<h3 id="why-not-sha-256-for-passwords"><a class="header" href="#why-not-sha-256-for-passwords">Why Not SHA-256 for Passwords?</a></h3>
<pre><code class="language-python"># BAD - vulnerable to brute force
import hashlib
password = "password123"
hash = hashlib.sha256(password.encode()).hexdigest()
# Attacker can compute billions of SHA-256 hashes per second!
</code></pre>
<h3 id="password-hashing-requirements"><a class="header" href="#password-hashing-requirements">Password Hashing Requirements</a></h3>
<ol>
<li><strong>Slow</strong>: Intentionally slow to prevent brute force</li>
<li><strong>Salted</strong>: Random salt prevents rainbow tables</li>
<li><strong>Adaptive</strong>: Can increase work factor over time</li>
<li><strong>Memory-hard</strong>: Requires significant memory (for some algorithms)</li>
</ol>
<h2 id="bcrypt"><a class="header" href="#bcrypt">bcrypt</a></h2>
<h3 id="overview-17"><a class="header" href="#overview-17">Overview</a></h3>
<ul>
<li>Based on Blowfish cipher</li>
<li>Adaptive (configurable work factor)</li>
<li>Automatic salt generation</li>
<li>Maximum password length: 72 bytes</li>
</ul>
<h3 id="using-bcrypt"><a class="header" href="#using-bcrypt">Using bcrypt</a></h3>
<pre><code class="language-python">import bcrypt

# Hash a password
password = b"my_secure_password"
salt = bcrypt.gensalt(rounds=12)  # 2^12 iterations
hashed = bcrypt.hashpw(password, salt)
print(f"Hashed: {hashed}")
# Output: b'$2b$12$KIXx8Z9...'

# Verify password
if bcrypt.checkpw(password, hashed):
    print("Password matches!")
else:
    print("Invalid password")

# Increase work factor over time
def needs_rehash(hashed_password, min_rounds=12):
    # Extract current rounds from hash
    parts = hashed_password.decode().split('$')
    current_rounds = int(parts[2])
    return current_rounds &lt; min_rounds

# Complete example
def hash_password(password):
    return bcrypt.hashpw(password.encode(), bcrypt.gensalt(rounds=12))

def verify_password(password, hashed):
    return bcrypt.checkpw(password.encode(), hashed)

# Usage
user_password = "SuperSecret123!"
stored_hash = hash_password(user_password)

# Later, during login
login_password = "SuperSecret123!"
if verify_password(login_password, stored_hash):
    print("Login successful!")
</code></pre>
<h3 id="bcrypt-hash-format"><a class="header" href="#bcrypt-hash-format">bcrypt Hash Format</a></h3>
<pre><code>$2b$12$KIXx8Z9ByF7LHfG8z.yNH.Q5GF8Z9ByF7LHfG8z.yNH.Q5GF8Z9ByF7
 |  |  |                                                    |
 |  |  |                                                    |
 |  |  Salt (22 characters)                                Hash (31 chars)
 |  |
 |  Cost factor (2^12 iterations)
 |
 Algorithm identifier (2b = bcrypt)
</code></pre>
<h2 id="argon2"><a class="header" href="#argon2">Argon2</a></h2>
<h3 id="overview-18"><a class="header" href="#overview-18">Overview</a></h3>
<p>Winner of the Password Hashing Competition (2015). Memory-hard algorithm resistant to GPU/ASIC attacks.</p>
<p><strong>Variants:</strong></p>
<ul>
<li><strong>Argon2d</strong>: Resistant to GPU attacks (not side-channel resistant)</li>
<li><strong>Argon2i</strong>: Resistant to side-channel attacks</li>
<li><strong>Argon2id</strong>: Hybrid (recommended)</li>
</ul>
<h3 id="using-argon2"><a class="header" href="#using-argon2">Using Argon2</a></h3>
<pre><code class="language-python">from argon2 import PasswordHasher
from argon2.exceptions import VerifyMismatchError

# Create hasher with default parameters
ph = PasswordHasher()

# Hash password
password = "my_secure_password"
hashed = ph.hash(password)
print(f"Hashed: {hashed}")
# Output: $argon2id$v=19$m=65536,t=3,p=4$...

# Verify password
try:
    ph.verify(hashed, password)
    print("Password matches!")
except VerifyMismatchError:
    print("Invalid password")

# Check if hash needs rehashing (parameters changed)
if ph.check_needs_rehash(hashed):
    new_hash = ph.hash(password)
    # Update in database

# Custom parameters
from argon2 import PasswordHasher
custom_ph = PasswordHasher(
    time_cost=3,        # Number of iterations
    memory_cost=65536,  # Memory usage in KiB (64 MB)
    parallelism=4,      # Number of parallel threads
    hash_len=32,        # Hash length in bytes
    salt_len=16         # Salt length in bytes
)

hashed = custom_ph.hash(password)
</code></pre>
<h3 id="argon2-hash-format"><a class="header" href="#argon2-hash-format">Argon2 Hash Format</a></h3>
<pre><code>$argon2id$v=19$m=65536,t=3,p=4$c29tZXNhbHQ$hash_output_here
 |        |    |             |              |
 |        |    |             |              Hash output
 |        |    |             Salt (base64)
 |        |    Parameters (memory, time, parallelism)
 |        Version
 Variant (id, i, or d)
</code></pre>
<h3 id="argon2-parameters-guide"><a class="header" href="#argon2-parameters-guide">Argon2 Parameters Guide</a></h3>
<pre><code class="language-python"># Low security (fast, for testing)
time_cost=1, memory_cost=8192, parallelism=1

# Medium security (default)
time_cost=3, memory_cost=65536, parallelism=4

# High security
time_cost=5, memory_cost=262144, parallelism=8

# Extreme security
time_cost=10, memory_cost=1048576, parallelism=16
</code></pre>
<h2 id="salting"><a class="header" href="#salting">Salting</a></h2>
<p>A salt is random data added to passwords before hashing to prevent rainbow table attacks.</p>
<h3 id="without-salt-vulnerable"><a class="header" href="#without-salt-vulnerable">Without Salt (Vulnerable)</a></h3>
<pre><code class="language-python"># BAD - Same password = Same hash
hash("password123") = "abc123..."
hash("password123") = "abc123..."  # Attacker can precompute!
</code></pre>
<h3 id="with-salt-secure"><a class="header" href="#with-salt-secure">With Salt (Secure)</a></h3>
<pre><code class="language-python"># GOOD - Same password = Different hashes
hash("password123" + "random_salt_1") = "xyz789..."
hash("password123" + "random_salt_2") = "def456..."
</code></pre>
<h3 id="implementing-salt"><a class="header" href="#implementing-salt">Implementing Salt</a></h3>
<pre><code class="language-python">import hashlib
import os

def hash_password_with_salt(password):
    # Generate random salt (16 bytes = 128 bits)
    salt = os.urandom(16)
    
    # Combine password and salt
    pwdhash = hashlib.pbkdf2_hmac('sha256', 
                                  password.encode(), 
                                  salt, 
                                  100000)  # iterations
    
    # Store both salt and hash
    return salt + pwdhash

def verify_password(stored_password, provided_password):
    # Extract salt (first 16 bytes)
    salt = stored_password[:16]
    
    # Extract hash (remaining bytes)
    stored_hash = stored_password[16:]
    
    # Hash provided password with same salt
    pwdhash = hashlib.pbkdf2_hmac('sha256',
                                  provided_password.encode(),
                                  salt,
                                  100000)
    
    return pwdhash == stored_hash

# Usage
password = "my_password"
stored = hash_password_with_salt(password)

# Verify
if verify_password(stored, "my_password"):
    print("Correct password")
</code></pre>
<h2 id="pbkdf2-password-based-key-derivation-function-2"><a class="header" href="#pbkdf2-password-based-key-derivation-function-2">PBKDF2 (Password-Based Key Derivation Function 2)</a></h2>
<p>Standard algorithm for deriving cryptographic keys from passwords.</p>
<pre><code class="language-python">import hashlib

password = b"my_password"
salt = b"random_salt_123"

# Derive key
key = hashlib.pbkdf2_hmac(
    'sha256',           # Hash algorithm
    password,           # Password
    salt,               # Salt
    100000,             # Iterations
    dklen=32            # Desired key length in bytes
)

print(f"Derived key: {key.hex()}")

# For password storage
def store_password(password):
    salt = os.urandom(16)
    hash = hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100000)
    # Store: salt + hash
    return salt.hex() + '$' + hash.hex()

def check_password(password, stored):
    salt_hex, hash_hex = stored.split('$')
    salt = bytes.fromhex(salt_hex)
    hash = bytes.fromhex(hash_hex)
    
    new_hash = hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100000)
    return new_hash == hash
</code></pre>
<h2 id="use-cases"><a class="header" href="#use-cases">Use Cases</a></h2>
<h3 id="1-file-integrity-verification"><a class="header" href="#1-file-integrity-verification">1. File Integrity Verification</a></h3>
<pre><code class="language-bash"># Create checksum
sha256sum important_file.pdf &gt; checksum.txt

# Later, verify file hasn't changed
sha256sum -c checksum.txt
</code></pre>
<h3 id="2-git-commits"><a class="header" href="#2-git-commits">2. Git Commits</a></h3>
<p>Git uses SHA-1 (moving to SHA-256) to identify commits:</p>
<pre><code class="language-bash">git log --oneline
# a1b2c3d Fix bug in authentication
</code></pre>
<h3 id="3-digital-signatures"><a class="header" href="#3-digital-signatures">3. Digital Signatures</a></h3>
<p>Hash the message first, then sign the hash:</p>
<pre><code>message -&gt; hash -&gt; encrypt with private key -&gt; signature
</code></pre>
<h3 id="4-proof-of-work-blockchain"><a class="header" href="#4-proof-of-work-blockchain">4. Proof of Work (Blockchain)</a></h3>
<pre><code class="language-python">import hashlib
import time

def mine_block(data, difficulty=4):
    nonce = 0
    target = "0" * difficulty
    
    while True:
        message = f"{data}{nonce}"
        hash = hashlib.sha256(message.encode()).hexdigest()
        
        if hash.startswith(target):
            return nonce, hash
        
        nonce += 1

# Mine a block (find hash starting with 0000)
data = "Block data here"
nonce, hash = mine_block(data, difficulty=4)
print(f"Nonce: {nonce}, Hash: {hash}")
</code></pre>
<h3 id="5-message-deduplication"><a class="header" href="#5-message-deduplication">5. Message Deduplication</a></h3>
<pre><code class="language-python">import hashlib

def deduplicate_messages(messages):
    seen_hashes = set()
    unique_messages = []
    
    for msg in messages:
        msg_hash = hashlib.sha256(msg.encode()).hexdigest()
        if msg_hash not in seen_hashes:
            seen_hashes.add(msg_hash)
            unique_messages.append(msg)
    
    return unique_messages
</code></pre>
<h3 id="6-content-addressable-storage"><a class="header" href="#6-content-addressable-storage">6. Content-Addressable Storage</a></h3>
<pre><code class="language-python">import hashlib
import os

class ContentAddressableStorage:
    def __init__(self, storage_dir):
        self.storage_dir = storage_dir
        os.makedirs(storage_dir, exist_ok=True)
    
    def store(self, data):
        # Hash determines storage location
        hash = hashlib.sha256(data).hexdigest()
        path = os.path.join(self.storage_dir, hash)
        
        with open(path, 'wb') as f:
            f.write(data)
        
        return hash
    
    def retrieve(self, hash):
        path = os.path.join(self.storage_dir, hash)
        with open(path, 'rb') as f:
            return f.read()

# Usage
cas = ContentAddressableStorage('/tmp/cas')
content = b"Important document content"
hash = cas.store(content)
retrieved = cas.retrieve(hash)
</code></pre>
<h2 id="hash-comparison"><a class="header" href="#hash-comparison">Hash Comparison</a></h2>
<h3 id="performance-benchmark-python"><a class="header" href="#performance-benchmark-python">Performance Benchmark (Python)</a></h3>
<pre><code class="language-python">import hashlib
import time

data = b"x" * 1000000  # 1 MB of data

algorithms = ['md5', 'sha1', 'sha256', 'sha512', 'sha3_256', 'blake2b']

for algo in algorithms:
    start = time.time()
    for _ in range(100):
        hashlib.new(algo, data).digest()
    elapsed = time.time() - start
    print(f"{algo:12} {elapsed:.3f}s")

# Typical results:
# md5          0.125s  (fastest, but insecure)
# sha1         0.156s  (fast, but deprecated)
# blake2b      0.187s  (fast and secure)
# sha256       0.234s  (standard, secure)
# sha512       0.187s  (fast on 64-bit, secure)
# sha3_256     0.876s  (slower, secure)
</code></pre>
<h2 id="security-considerations-1"><a class="header" href="#security-considerations-1">Security Considerations</a></h2>
<h3 id="1-never-use-md5-or-sha-1-for-security"><a class="header" href="#1-never-use-md5-or-sha-1-for-security">1. Never Use MD5 or SHA-1 for Security</a></h3>
<pre><code class="language-python"># VULNERABLE - collision attacks exist
md5_hash = hashlib.md5(data).hexdigest()
sha1_hash = hashlib.sha1(data).hexdigest()

# USE INSTEAD
sha256_hash = hashlib.sha256(data).hexdigest()
</code></pre>
<h3 id="2-always-salt-passwords"><a class="header" href="#2-always-salt-passwords">2. Always Salt Passwords</a></h3>
<pre><code class="language-python"># BAD
password_hash = hashlib.sha256(password.encode()).hexdigest()

# GOOD
import bcrypt
password_hash = bcrypt.hashpw(password.encode(), bcrypt.gensalt())
</code></pre>
<h3 id="3-use-appropriate-hash-for-use-case"><a class="header" href="#3-use-appropriate-hash-for-use-case">3. Use Appropriate Hash for Use Case</a></h3>
<pre><code>File integrity:     SHA-256, BLAKE2
Password storage:   bcrypt, Argon2, PBKDF2
General purpose:    SHA-256, SHA-3, BLAKE2
High performance:   BLAKE2, BLAKE3
Cryptographic:      SHA-256, SHA-3
</code></pre>
<h3 id="4-timing-attacks"><a class="header" href="#4-timing-attacks">4. Timing Attacks</a></h3>
<pre><code class="language-python"># VULNERABLE - timing attack
if hash1 == hash2:
    return True

# SAFE - constant time comparison
import hmac
if hmac.compare_digest(hash1, hash2):
    return True
</code></pre>
<h3 id="5-hash-length-extension-attacks"><a class="header" href="#5-hash-length-extension-attacks">5. Hash Length Extension Attacks</a></h3>
<p>SHA-256 is vulnerable to length extension attacks. Use HMAC instead for authentication:</p>
<pre><code class="language-python"># VULNERABLE
auth_tag = sha256(secret + message)

# SAFE
import hmac
auth_tag = hmac.new(secret, message, hashlib.sha256).digest()
</code></pre>
<h2 id="best-practices-11"><a class="header" href="#best-practices-11">Best Practices</a></h2>
<h3 id="1-password-hashing-checklist"><a class="header" href="#1-password-hashing-checklist">1. Password Hashing Checklist</a></h3>
<pre><code class="language-python"># ✓ Use specialized password hash (bcrypt, Argon2)
# ✓ Use random salt (automatic in bcrypt/Argon2)
# ✓ Use sufficient work factor
# ✓ Use constant-time comparison
# ✓ Plan for rehashing when parameters change

from argon2 import PasswordHasher
import hmac

ph = PasswordHasher()

def hash_password(password):
    return ph.hash(password)

def verify_password(password, hash):
    try:
        ph.verify(hash, password)
        return True
    except:
        return False
</code></pre>
<h3 id="2-file-integrity"><a class="header" href="#2-file-integrity">2. File Integrity</a></h3>
<pre><code class="language-bash"># Generate checksums for all files
find . -type f -exec sha256sum {} \; &gt; checksums.txt

# Verify later
sha256sum -c checksums.txt
</code></pre>
<h3 id="3-secure-random-salt-generation"><a class="header" href="#3-secure-random-salt-generation">3. Secure Random Salt Generation</a></h3>
<pre><code class="language-python">import os

# Use cryptographically secure random
salt = os.urandom(16)  # 128 bits

# DON'T use regular random module
import random
salt = random.randbytes(16)  # NOT SECURE!
</code></pre>
<h3 id="4-database-schema-for-passwords"><a class="header" href="#4-database-schema-for-passwords">4. Database Schema for Passwords</a></h3>
<pre><code class="language-sql">CREATE TABLE users (
    id INT PRIMARY KEY,
    username VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,  -- Store full hash string
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    password_updated_at TIMESTAMP
);

-- bcrypt example:
-- password_hash: $2b$12$KIXx8Z9ByF7LHfG8z.yNH.Q5GF8Z9ByF7...

-- Argon2 example:
-- password_hash: $argon2id$v=19$m=65536,t=3,p=4$c29tZXNhbHQ$...
</code></pre>
<h2 id="common-mistakes"><a class="header" href="#common-mistakes">Common Mistakes</a></h2>
<h3 id="1-double-hashing"><a class="header" href="#1-double-hashing">1. Double Hashing</a></h3>
<pre><code class="language-python"># BAD - doesn't increase security
hash1 = sha256(password)
hash2 = sha256(hash1)  # No benefit!

# GOOD - use proper password hashing
hash = bcrypt.hashpw(password, bcrypt.gensalt())
</code></pre>
<h3 id="2-homemade-crypto"><a class="header" href="#2-homemade-crypto">2. Homemade Crypto</a></h3>
<pre><code class="language-python"># BAD - creating your own hash function
def my_hash(data):
    result = 0
    for byte in data:
        result = (result * 31 + byte) % 1000000007
    return result

# GOOD - use standard algorithms
import hashlib
hash = hashlib.sha256(data).hexdigest()
</code></pre>
<h3 id="3-insufficient-work-factor"><a class="header" href="#3-insufficient-work-factor">3. Insufficient Work Factor</a></h3>
<pre><code class="language-python"># BAD - too fast, vulnerable to brute force
hash = bcrypt.hashpw(password, bcrypt.gensalt(rounds=4))  # 2^4 = 16 iterations

# GOOD - sufficient work factor
hash = bcrypt.hashpw(password, bcrypt.gensalt(rounds=12))  # 2^12 = 4096 iterations
</code></pre>
<h2 id="eli10-7"><a class="header" href="#eli10-7">ELI10</a></h2>
<p>A hash function is like a magic blender for data:</p>
<ol>
<li><strong>You put something in</strong>: "Hello, World!"</li>
<li><strong>It blends it up</strong>: The blender scrambles everything</li>
<li><strong>You get a unique smoothie</strong>: "dffd6021bb2b..."</li>
</ol>
<p>Special properties:</p>
<ul>
<li><strong>Always the same</strong>: Same ingredients = Same smoothie</li>
<li><strong>One-way</strong>: Can't un-blend the smoothie to get ingredients back</li>
<li><strong>Tiny changes matter</strong>: "Hello, World!" vs "Hello, World?" = Completely different smoothies</li>
<li><strong>Same size</strong>: Whether you blend a strawberry or a watermelon, you always get the same size cup</li>
</ul>
<p><strong>For passwords</strong>, we use special slow blenders (bcrypt, Argon2):</p>
<ul>
<li>Regular blender: Makes 1 million smoothies per second (easy to guess passwords!)</li>
<li>Password blender: Makes 10 smoothies per second (hard to guess passwords!)</li>
</ul>
<p><strong>Salt</strong> is like adding random spices:</p>
<ul>
<li>Without salt: Everyone who uses "password123" gets the same smoothie</li>
<li>With salt: Everyone gets different random spices, so same password = different smoothies</li>
</ul>
<h2 id="further-resources-7"><a class="header" href="#further-resources-7">Further Resources</a></h2>
<ul>
<li><a href="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf">SHA-256 Specification (NIST)</a></li>
<li><a href="https://password-hashing.net/">Password Hashing Competition</a></li>
<li><a href="https://www.rfc-editor.org/rfc/rfc9106.html">Argon2 RFC 9106</a></li>
<li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html">OWASP Password Storage Cheat Sheet</a></li>
<li><a href="https://blog.skullsecurity.org/2012/everything-you-need-to-know-about-hash-length-extension-attacks">Hash Length Extension Attacks</a></li>
<li><a href="https://github.com/pyca/bcrypt/">bcrypt Documentation</a></li>
<li><a href="https://argon2-cffi.readthedocs.io/">Argon2 Documentation</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="encryption-1"><a class="header" href="#encryption-1">Encryption</a></h1>
<h2 id="overview-19"><a class="header" href="#overview-19">Overview</a></h2>
<p>Encryption converts readable data (plaintext) into unreadable data (ciphertext) using mathematical algorithms and keys. Only those with the correct key can decrypt it.</p>
<h2 id="types-of-encryption"><a class="header" href="#types-of-encryption">Types of Encryption</a></h2>
<h3 id="symmetric-encryption"><a class="header" href="#symmetric-encryption">Symmetric Encryption</a></h3>
<p>Same key encrypts and decrypts:</p>
<pre><code>Plaintext + Key  [Encrypt] &gt; Ciphertext
Ciphertext + Key  [Decrypt] &gt; Plaintext
</code></pre>
<p><strong>Algorithms</strong>:</p>
<ul>
<li><strong>AES</strong> (Advanced Encryption Standard): Industry standard, 128/192/256-bit keys</li>
<li><strong>ChaCha20</strong>: Modern, fast, secure</li>
<li><strong>DES</strong>: Obsolete, 56-bit key (too short)</li>
</ul>
<p><strong>When to use</strong>: Database encryption, file encryption, internal communication</p>
<h3 id="asymmetric-encryption"><a class="header" href="#asymmetric-encryption">Asymmetric Encryption</a></h3>
<p>Different keys for encryption/decryption:</p>
<pre><code>Plaintext + Public Key  [Encrypt] &gt; Ciphertext
Ciphertext + Private Key  [Decrypt] &gt; Plaintext
</code></pre>
<p><strong>Algorithms</strong>:</p>
<ul>
<li><strong>RSA</strong>: Based on factoring difficulty, 2048/4096-bit keys</li>
<li><strong>ECC</strong> (Elliptic Curve): Shorter keys, same security as RSA</li>
<li><strong>Diffie-Hellman</strong>: Key exchange, not encryption</li>
</ul>
<p><strong>When to use</strong>: HTTPS, email encryption, digital signatures</p>
<h2 id="key-concepts-12"><a class="header" href="#key-concepts-12">Key Concepts</a></h2>
<h3 id="key-size"><a class="header" href="#key-size">Key Size</a></h3>
<pre><code>More bits = More security but slower

AES-128: 2^128 possible keys (feasible to break with quantum)
AES-256: 2^256 possible keys (quantum-resistant)
RSA-2048: H112-bit symmetric equivalent
ECC-256: H256-bit symmetric equivalent
</code></pre>
<h3 id="modes-of-operation-symmetric"><a class="header" href="#modes-of-operation-symmetric">Modes of Operation (Symmetric)</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Mode</th><th>Use</th><th>Properties</th></tr></thead><tbody>
<tr><td><strong>ECB</strong></td><td>L Never</td><td>Reveals patterns</td></tr>
<tr><td><strong>CBC</strong></td><td>File encryption</td><td>Needs IV, not parallel</td></tr>
<tr><td><strong>CTR</strong></td><td>Streaming</td><td>Parallelizable</td></tr>
<tr><td><strong>GCM</strong></td><td>Authenticated encryption</td><td>Authentication built-in</td></tr>
</tbody></table>
</div>
<h3 id="initialization-vector-iv"><a class="header" href="#initialization-vector-iv">Initialization Vector (IV)</a></h3>
<p>Random value ensuring same plaintext produces different ciphertext:</p>
<pre><code>Plaintext: "Hello"
IV1 + Key  [AES-CBC] &gt; "xK#$%"
IV2 + Key  [AES-CBC] &gt; "mN&amp;*@"  (different!)
</code></pre>
<h2 id="code-examples-1"><a class="header" href="#code-examples-1">Code Examples</a></h2>
<h3 id="python---symmetric-aes"><a class="header" href="#python---symmetric-aes">Python - Symmetric (AES)</a></h3>
<pre><code class="language-python">from cryptography.fernet import Fernet

# Generate key (keep secret!)
key = Fernet.generate_key()  # Save this securely
cipher = Fernet(key)

# Encrypt
plaintext = b"Secret message"
ciphertext = cipher.encrypt(plaintext)  # b'gAAAAABl...'

# Decrypt
plaintext = cipher.decrypt(ciphertext)  # b"Secret message"
</code></pre>
<h3 id="python---asymmetric-rsa"><a class="header" href="#python---asymmetric-rsa">Python - Asymmetric (RSA)</a></h3>
<pre><code class="language-python">from cryptography.hazmat.primitives.asymmetric import rsa, padding
from cryptography.hazmat.primitives import hashes

# Generate key pair
private_key = rsa.generate_private_key(
    public_exponent=65537,
    key_size=2048,
)
public_key = private_key.public_key()

# Encrypt with public key
ciphertext = public_key.encrypt(
    b"Secret",
    padding.OAEP(hashing=hashes.SHA256())
)

# Decrypt with private key
plaintext = private_key.decrypt(
    ciphertext,
    padding.OAEP(hashing=hashes.SHA256())
)
</code></pre>
<h3 id="javascript---aes-encryption"><a class="header" href="#javascript---aes-encryption">JavaScript - AES Encryption</a></h3>
<pre><code class="language-javascript">import crypto from 'crypto';

// Encrypt
const key = crypto.randomBytes(32);  // 256-bit key
const iv = crypto.randomBytes(16);   // 128-bit IV
const cipher = crypto.createCipheriv('aes-256-cbc', key, iv);

let ciphertext = cipher.update('Secret', 'utf8', 'hex');
ciphertext += cipher.final('hex');

// Decrypt
const decipher = crypto.createDecipheriv('aes-256-cbc', key, iv);
let plaintext = decipher.update(ciphertext, 'hex', 'utf8');
plaintext += decipher.final('utf8');
</code></pre>
<h2 id="common-algorithms-comparison"><a class="header" href="#common-algorithms-comparison">Common Algorithms Comparison</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Algorithm</th><th>Type</th><th>Speed</th><th>Security</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>AES</strong></td><td>Symmetric</td><td>Fast</td><td>Very good</td><td>General encryption</td></tr>
<tr><td><strong>ChaCha20</strong></td><td>Symmetric</td><td>Very fast</td><td>Very good</td><td>Mobile/streaming</td></tr>
<tr><td><strong>RSA</strong></td><td>Asymmetric</td><td>Slow</td><td>Good</td><td>Key exchange, signatures</td></tr>
<tr><td><strong>ECC</strong></td><td>Asymmetric</td><td>Medium</td><td>Excellent</td><td>HTTPS, signatures</td></tr>
<tr><td><strong>DES</strong></td><td>Symmetric</td><td>Fast</td><td>L Broken</td><td>Legacy only</td></tr>
</tbody></table>
</div>
<h2 id="attacks-on-encryption"><a class="header" href="#attacks-on-encryption">Attacks on Encryption</a></h2>
<h3 id="brute-force"><a class="header" href="#brute-force">Brute Force</a></h3>
<p>Try all possible keys:</p>
<pre><code>Defense: Use strong key (256-bit AES)
Cost: 2^256 operations (infeasible)
</code></pre>
<h3 id="side-channel-attacks"><a class="header" href="#side-channel-attacks">Side-Channel Attacks</a></h3>
<p>Extract info from timing, power usage:</p>
<pre><code>Defense: Constant-time operations
</code></pre>
<h3 id="weak-random-number-generator"><a class="header" href="#weak-random-number-generator">Weak Random Number Generator</a></h3>
<p>Predictable keys:</p>
<pre><code>Defense: Use cryptographically secure RNG
</code></pre>
<h3 id="quantum-computing"><a class="header" href="#quantum-computing">Quantum Computing</a></h3>
<p>Threatens RSA, but not AES:</p>
<pre><code>Current RSA: 2048-bit
Post-quantum: Need other algorithms
AES-256: Still secure against quantum
</code></pre>
<h2 id="best-practices-12"><a class="header" href="#best-practices-12">Best Practices</a></h2>
<h3 id="1-choose-right-algorithm"><a class="header" href="#1-choose-right-algorithm">1. Choose Right Algorithm</a></h3>
<pre><code> AES-256 for symmetric
 RSA-2048/ECC-256 for asymmetric
 DES, MD5, SHA-1 (deprecated)
</code></pre>
<h3 id="2-secure-key-storage"><a class="header" href="#2-secure-key-storage">2. Secure Key Storage</a></h3>
<pre><code class="language-python"># Bad: Hardcoded key
key = "supersecret123"

# Good: Load from secure storage
key = os.environ.get('ENCRYPTION_KEY')
# Or use key management service (AWS KMS, HashiCorp Vault)
</code></pre>
<h3 id="3-use-authenticated-encryption"><a class="header" href="#3-use-authenticated-encryption">3. Use Authenticated Encryption</a></h3>
<pre><code class="language-python"># Use modes that verify integrity (GCM, authenticated encryption)
# Don't just encrypt without authentication
</code></pre>
<h3 id="4-random-ivs"><a class="header" href="#4-random-ivs">4. Random IVs</a></h3>
<pre><code class="language-python"># Generate new IV for each encryption
iv = os.urandom(16)  # Different each time
</code></pre>
<h2 id="key-exchange"><a class="header" href="#key-exchange">Key Exchange</a></h2>
<h3 id="diffie-hellman"><a class="header" href="#diffie-hellman">Diffie-Hellman</a></h3>
<p>Agree on shared secret over insecure channel:</p>
<pre><code>Alice: chooses a, sends: g^a mod p
Bob:   chooses b, sends: g^b mod p

Shared secret:
Alice: (g^b)^a mod p = g^ab mod p
Bob:   (g^a)^b mod p = g^ab mod p
</code></pre>
<h3 id="tls-handshake"><a class="header" href="#tls-handshake">TLS Handshake</a></h3>
<pre><code>1. Client hello
2. Server hello + certificate (contains public key)
3. Client generates pre-master secret, encrypts with public key
4. Both derive session key from pre-master secret
5. Encrypted communication begins
</code></pre>
<h2 id="eli10-8"><a class="header" href="#eli10-8">ELI10</a></h2>
<p>Think of encryption as a locked box:</p>
<p><strong>Symmetric</strong>:</p>
<ul>
<li>Same key locks and unlocks</li>
<li>Fast but you need to share the key somehow</li>
<li>Like: "Secret code 42" for both locking and unlocking</li>
</ul>
<p><strong>Asymmetric</strong>:</p>
<ul>
<li>Public key locks, private key unlocks</li>
<li>Like: Anyone can put a message in a mailbox (public), but only owner has the key (private)</li>
</ul>
<p><strong>Why both?</strong>:</p>
<ul>
<li>Asymmetric slower but solves key-sharing problem</li>
<li>Use asymmetric to exchange a symmetric key</li>
<li>Then use fast symmetric key for actual data</li>
</ul>
<h2 id="further-resources-8"><a class="header" href="#further-resources-8">Further Resources</a></h2>
<ul>
<li><a href="https://cryptography.io/">Cryptography.io Python</a></li>
<li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Cryptographic_Storage_Cheat_Sheet.html">OWASP Encryption Cheatsheet</a></li>
<li><a href="https://www.youtube.com/watch?v=Z8M2BTscoD4">3Blue1Brown Public Key Cryptography</a></li>
<li><a href="https://en.wikipedia.org/wiki/Advanced_Encryption_Standard">AES Explained</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="digital-signatures-1"><a class="header" href="#digital-signatures-1">Digital Signatures</a></h1>
<h2 id="overview-20"><a class="header" href="#overview-20">Overview</a></h2>
<p>A digital signature is a cryptographic mechanism that provides:</p>
<ul>
<li><strong>Authentication</strong>: Proves who created the signature</li>
<li><strong>Integrity</strong>: Detects any changes to the signed data</li>
<li><strong>Non-repudiation</strong>: Signer cannot deny signing (unlike HMAC)</li>
</ul>
<p>Digital signatures use <strong>asymmetric cryptography</strong> (public/private key pairs).</p>
<h2 id="digital-signature-vs-hmac"><a class="header" href="#digital-signature-vs-hmac">Digital Signature vs HMAC</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Digital Signature</th><th>HMAC</th></tr></thead><tbody>
<tr><td><strong>Keys</strong></td><td>Public/Private key pair</td><td>Shared secret key</td></tr>
<tr><td><strong>Verification</strong></td><td>Anyone with public key</td><td>Only parties with secret</td></tr>
<tr><td><strong>Non-repudiation</strong></td><td>Yes</td><td>No</td></tr>
<tr><td><strong>Performance</strong></td><td>Slower</td><td>Faster</td></tr>
<tr><td><strong>Key distribution</strong></td><td>Public key can be shared</td><td>Secret must be protected</td></tr>
<tr><td><strong>Use case</strong></td><td>Documents, software, certificates</td><td>API auth, sessions</td></tr>
</tbody></table>
</div>
<h2 id="how-digital-signatures-work"><a class="header" href="#how-digital-signatures-work">How Digital Signatures Work</a></h2>
<h3 id="signing-process"><a class="header" href="#signing-process">Signing Process</a></h3>
<pre><code>1. Hash the message
   Message → Hash Function → Digest

2. Encrypt digest with private key
   Digest → Private Key → Signature

3. Attach signature to message
   Message + Signature → Signed Document
</code></pre>
<h3 id="verification-process"><a class="header" href="#verification-process">Verification Process</a></h3>
<pre><code>1. Hash the received message
   Message → Hash Function → Digest₁

2. Decrypt signature with public key
   Signature → Public Key → Digest₂

3. Compare digests
   If Digest₁ == Digest₂ → Valid Signature
</code></pre>
<h3 id="visual-representation"><a class="header" href="#visual-representation">Visual Representation</a></h3>
<pre><code>SIGNING:
                    Message
                       |
                   Hash (SHA-256)
                       |
                    Digest
                       |
            Encrypt with Private Key
                       |
                   Signature
                       |
            Message + Signature


VERIFICATION:
            Message + Signature
                |           |
                |           |
           Hash (SHA-256)   Decrypt with Public Key
                |           |
             Digest₁     Digest₂
                |           |
                +-----+-----+
                      |
                  Compare
                      |
                Valid/Invalid
</code></pre>
<h2 id="rsa-signatures"><a class="header" href="#rsa-signatures">RSA Signatures</a></h2>
<h3 id="rsa-algorithm-overview"><a class="header" href="#rsa-algorithm-overview">RSA Algorithm Overview</a></h3>
<p>RSA uses modular arithmetic with large prime numbers:</p>
<ul>
<li><strong>Key Generation</strong>: Create public (e, n) and private (d, n) keys</li>
<li><strong>Signing</strong>: signature = (hash)^d mod n</li>
<li><strong>Verification</strong>: hash = (signature)^e mod n</li>
</ul>
<h3 id="generating-rsa-keys"><a class="header" href="#generating-rsa-keys">Generating RSA Keys</a></h3>
<h4 id="python-cryptography-library"><a class="header" href="#python-cryptography-library">Python (cryptography library)</a></h4>
<pre><code class="language-python">from cryptography.hazmat.primitives.asymmetric import rsa
from cryptography.hazmat.primitives import serialization

# Generate private key
private_key = rsa.generate_private_key(
    public_exponent=65537,
    key_size=2048,  # 2048 or 4096 bits
)

# Generate public key
public_key = private_key.public_key()

# Save private key
pem_private = private_key.private_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PrivateFormat.PKCS8,
    encryption_algorithm=serialization.NoEncryption()
)

with open('private_key.pem', 'wb') as f:
    f.write(pem_private)

# Save public key
pem_public = public_key.public_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PublicFormat.SubjectPublicKeyInfo
)

with open('public_key.pem', 'wb') as f:
    f.write(pem_public)
</code></pre>
<h4 id="openssl-bash"><a class="header" href="#openssl-bash">OpenSSL (Bash)</a></h4>
<pre><code class="language-bash"># Generate private key (2048-bit RSA)
openssl genrsa -out private_key.pem 2048

# Generate private key with password protection
openssl genrsa -aes256 -out private_key.pem 2048

# Extract public key from private key
openssl rsa -in private_key.pem -pubout -out public_key.pem

# Generate 4096-bit key (more secure)
openssl genrsa -out private_key.pem 4096

# View key details
openssl rsa -in private_key.pem -text -noout
</code></pre>
<h3 id="signing-with-rsa"><a class="header" href="#signing-with-rsa">Signing with RSA</a></h3>
<h4 id="python-example-1"><a class="header" href="#python-example-1">Python Example</a></h4>
<pre><code class="language-python">from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import padding
from cryptography.hazmat.primitives import serialization

# Load private key
with open('private_key.pem', 'rb') as f:
    private_key = serialization.load_pem_private_key(
        f.read(),
        password=None
    )

# Message to sign
message = b"This is an important document"

# Sign message (RSA-PSS with SHA-256)
signature = private_key.sign(
    message,
    padding.PSS(
        mgf=padding.MGF1(hashes.SHA256()),
        salt_length=padding.PSS.MAX_LENGTH
    ),
    hashes.SHA256()
)

print(f"Signature: {signature.hex()}")
print(f"Signature length: {len(signature)} bytes")

# Save signature
with open('signature.bin', 'wb') as f:
    f.write(signature)
</code></pre>
<h4 id="openssl-example"><a class="header" href="#openssl-example">OpenSSL Example</a></h4>
<pre><code class="language-bash"># Sign a file
openssl dgst -sha256 -sign private_key.pem -out signature.bin document.txt

# Sign with different hash algorithms
openssl dgst -sha512 -sign private_key.pem -out signature.bin document.txt

# Create detached signature
openssl dgst -sha256 -sign private_key.pem -out document.sig document.pdf
</code></pre>
<h3 id="verifying-rsa-signatures"><a class="header" href="#verifying-rsa-signatures">Verifying RSA Signatures</a></h3>
<h4 id="python-example-2"><a class="header" href="#python-example-2">Python Example</a></h4>
<pre><code class="language-python">from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import padding
from cryptography.hazmat.primitives import serialization
from cryptography.exceptions import InvalidSignature

# Load public key
with open('public_key.pem', 'rb') as f:
    public_key = serialization.load_pem_public_key(f.read())

# Load signature
with open('signature.bin', 'rb') as f:
    signature = f.read()

# Message to verify
message = b"This is an important document"

# Verify signature
try:
    public_key.verify(
        signature,
        message,
        padding.PSS(
            mgf=padding.MGF1(hashes.SHA256()),
            salt_length=padding.PSS.MAX_LENGTH
        ),
        hashes.SHA256()
    )
    print("✓ Signature is valid!")
except InvalidSignature:
    print("✗ Invalid signature!")

# Complete example
def verify_document(public_key_path, document, signature):
    with open(public_key_path, 'rb') as f:
        public_key = serialization.load_pem_public_key(f.read())
    
    try:
        public_key.verify(
            signature,
            document,
            padding.PSS(
                mgf=padding.MGF1(hashes.SHA256()),
                salt_length=padding.PSS.MAX_LENGTH
            ),
            hashes.SHA256()
        )
        return True
    except InvalidSignature:
        return False
</code></pre>
<h4 id="openssl-example-1"><a class="header" href="#openssl-example-1">OpenSSL Example</a></h4>
<pre><code class="language-bash"># Verify signature
openssl dgst -sha256 -verify public_key.pem -signature signature.bin document.txt

# Output:
# Verified OK  (if valid)
# Verification Failure  (if invalid)

# Verify detached signature
openssl dgst -sha256 -verify public_key.pem -signature document.sig document.pdf
</code></pre>
<h3 id="rsa-padding-schemes"><a class="header" href="#rsa-padding-schemes">RSA Padding Schemes</a></h3>
<h4 id="pkcs1-v15-legacy"><a class="header" href="#pkcs1-v15-legacy">PKCS#1 v1.5 (Legacy)</a></h4>
<pre><code class="language-python">from cryptography.hazmat.primitives.asymmetric import padding

# Sign with PKCS#1 v1.5 (not recommended)
signature = private_key.sign(
    message,
    padding.PKCS1v15(),
    hashes.SHA256()
)
</code></pre>
<h4 id="pss-recommended"><a class="header" href="#pss-recommended">PSS (Recommended)</a></h4>
<pre><code class="language-python"># Sign with PSS (Probabilistic Signature Scheme)
signature = private_key.sign(
    message,
    padding.PSS(
        mgf=padding.MGF1(hashes.SHA256()),
        salt_length=padding.PSS.MAX_LENGTH
    ),
    hashes.SHA256()
)
</code></pre>
<h2 id="ecdsa-elliptic-curve-digital-signature-algorithm"><a class="header" href="#ecdsa-elliptic-curve-digital-signature-algorithm">ECDSA (Elliptic Curve Digital Signature Algorithm)</a></h2>
<h3 id="overview-21"><a class="header" href="#overview-21">Overview</a></h3>
<p>ECDSA provides equivalent security to RSA with much smaller keys:</p>
<ul>
<li><strong>RSA 2048-bit</strong> ≈ <strong>ECDSA 224-bit</strong></li>
<li><strong>RSA 3072-bit</strong> ≈ <strong>ECDSA 256-bit</strong></li>
<li><strong>RSA 15360-bit</strong> ≈ <strong>ECDSA 512-bit</strong></li>
</ul>
<p><strong>Benefits:</strong></p>
<ul>
<li>Smaller keys</li>
<li>Faster signing</li>
<li>Less bandwidth</li>
<li>Less storage</li>
</ul>
<h3 id="common-curves"><a class="header" href="#common-curves">Common Curves</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Curve</th><th>Bits</th><th>Security</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>P-256</strong> (secp256r1)</td><td>256</td><td>~128-bit</td><td>General purpose, TLS</td></tr>
<tr><td><strong>P-384</strong> (secp384r1)</td><td>384</td><td>~192-bit</td><td>High security</td></tr>
<tr><td><strong>P-521</strong> (secp521r1)</td><td>521</td><td>~256-bit</td><td>Maximum security</td></tr>
<tr><td><strong>secp256k1</strong></td><td>256</td><td>~128-bit</td><td>Bitcoin, cryptocurrencies</td></tr>
</tbody></table>
</div>
<h3 id="generating-ecdsa-keys"><a class="header" href="#generating-ecdsa-keys">Generating ECDSA Keys</a></h3>
<h4 id="python-example-3"><a class="header" href="#python-example-3">Python Example</a></h4>
<pre><code class="language-python">from cryptography.hazmat.primitives.asymmetric import ec
from cryptography.hazmat.primitives import serialization

# Generate private key (P-256 curve)
private_key = ec.generate_private_key(ec.SECP256R1())

# Extract public key
public_key = private_key.public_key()

# Save private key
pem_private = private_key.private_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PrivateFormat.PKCS8,
    encryption_algorithm=serialization.NoEncryption()
)

with open('ec_private_key.pem', 'wb') as f:
    f.write(pem_private)

# Save public key
pem_public = public_key.public_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PublicFormat.SubjectPublicKeyInfo
)

with open('ec_public_key.pem', 'wb') as f:
    f.write(pem_public)

# Different curves
# P-256 (most common)
key_p256 = ec.generate_private_key(ec.SECP256R1())

# P-384 (higher security)
key_p384 = ec.generate_private_key(ec.SECP384R1())

# P-521 (maximum security)
key_p521 = ec.generate_private_key(ec.SECP521R1())

# secp256k1 (Bitcoin)
key_secp256k1 = ec.generate_private_key(ec.SECP256K1())
</code></pre>
<h4 id="openssl-example-2"><a class="header" href="#openssl-example-2">OpenSSL Example</a></h4>
<pre><code class="language-bash"># Generate EC private key (P-256)
openssl ecparam -name prime256v1 -genkey -noout -out ec_private_key.pem

# Generate with P-384
openssl ecparam -name secp384r1 -genkey -noout -out ec_private_key.pem

# Generate with P-521
openssl ecparam -name secp521r1 -genkey -noout -out ec_private_key.pem

# Extract public key
openssl ec -in ec_private_key.pem -pubout -out ec_public_key.pem

# View key details
openssl ec -in ec_private_key.pem -text -noout

# List available curves
openssl ecparam -list_curves
</code></pre>
<h3 id="signing-with-ecdsa"><a class="header" href="#signing-with-ecdsa">Signing with ECDSA</a></h3>
<h4 id="python-example-4"><a class="header" href="#python-example-4">Python Example</a></h4>
<pre><code class="language-python">from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import ec
from cryptography.hazmat.primitives import serialization

# Load private key
with open('ec_private_key.pem', 'rb') as f:
    private_key = serialization.load_pem_private_key(
        f.read(),
        password=None
    )

# Message to sign
message = b"ECDSA signature example"

# Sign message
signature = private_key.sign(
    message,
    ec.ECDSA(hashes.SHA256())
)

print(f"ECDSA Signature: {signature.hex()}")
print(f"Signature length: {len(signature)} bytes")

# For P-256, signature is ~64 bytes (vs ~256 bytes for RSA-2048!)
</code></pre>
<h4 id="openssl-example-3"><a class="header" href="#openssl-example-3">OpenSSL Example</a></h4>
<pre><code class="language-bash"># Sign with ECDSA
openssl dgst -sha256 -sign ec_private_key.pem -out ecdsa_signature.bin document.txt

# Verify ECDSA signature
openssl dgst -sha256 -verify ec_public_key.pem -signature ecdsa_signature.bin document.txt
</code></pre>
<h3 id="verifying-ecdsa-signatures"><a class="header" href="#verifying-ecdsa-signatures">Verifying ECDSA Signatures</a></h3>
<pre><code class="language-python">from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import ec
from cryptography.hazmat.primitives import serialization
from cryptography.exceptions import InvalidSignature

# Load public key
with open('ec_public_key.pem', 'rb') as f:
    public_key = serialization.load_pem_public_key(f.read())

# Message and signature
message = b"ECDSA signature example"

with open('ecdsa_signature.bin', 'rb') as f:
    signature = f.read()

# Verify signature
try:
    public_key.verify(
        signature,
        message,
        ec.ECDSA(hashes.SHA256())
    )
    print("✓ ECDSA signature is valid!")
except InvalidSignature:
    print("✗ Invalid ECDSA signature!")
</code></pre>
<h2 id="eddsa-edwards-curve-digital-signature-algorithm"><a class="header" href="#eddsa-edwards-curve-digital-signature-algorithm">EdDSA (Edwards-curve Digital Signature Algorithm)</a></h2>
<h3 id="overview-22"><a class="header" href="#overview-22">Overview</a></h3>
<p>EdDSA is a modern signature scheme designed for high performance and security.</p>
<p><strong>Ed25519</strong> (most common):</p>
<ul>
<li>256-bit keys</li>
<li>Fast signing and verification</li>
<li>Deterministic (no random number needed)</li>
<li>Resistant to side-channel attacks</li>
</ul>
<h3 id="generating-ed25519-keys"><a class="header" href="#generating-ed25519-keys">Generating Ed25519 Keys</a></h3>
<pre><code class="language-python">from cryptography.hazmat.primitives.asymmetric import ed25519
from cryptography.hazmat.primitives import serialization

# Generate private key
private_key = ed25519.Ed25519PrivateKey.generate()

# Extract public key
public_key = private_key.public_key()

# Save private key
pem_private = private_key.private_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PrivateFormat.PKCS8,
    encryption_algorithm=serialization.NoEncryption()
)

with open('ed25519_private_key.pem', 'wb') as f:
    f.write(pem_private)

# Save public key
pem_public = public_key.public_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PublicFormat.SubjectPublicKeyInfo
)

with open('ed25519_public_key.pem', 'wb') as f:
    f.write(pem_public)

# Raw bytes format (32 bytes each)
private_bytes = private_key.private_bytes(
    encoding=serialization.Encoding.Raw,
    format=serialization.PrivateFormat.Raw,
    encryption_algorithm=serialization.NoEncryption()
)

public_bytes = public_key.public_bytes(
    encoding=serialization.Encoding.Raw,
    format=serialization.PublicFormat.Raw
)

print(f"Private key: {private_bytes.hex()} ({len(private_bytes)} bytes)")
print(f"Public key: {public_bytes.hex()} ({len(public_bytes)} bytes)")
</code></pre>
<h3 id="signing-with-ed25519"><a class="header" href="#signing-with-ed25519">Signing with Ed25519</a></h3>
<pre><code class="language-python">from cryptography.hazmat.primitives.asymmetric import ed25519

# Generate key
private_key = ed25519.Ed25519PrivateKey.generate()

# Message to sign
message = b"Ed25519 is fast and secure!"

# Sign (deterministic, no hash function needed)
signature = private_key.sign(message)

print(f"Ed25519 Signature: {signature.hex()}")
print(f"Signature length: {len(signature)} bytes")  # Always 64 bytes

# Verify
public_key = private_key.public_key()

try:
    public_key.verify(signature, message)
    print("✓ Signature valid!")
except:
    print("✗ Invalid signature!")
</code></pre>
<h3 id="performance-comparison-1"><a class="header" href="#performance-comparison-1">Performance Comparison</a></h3>
<pre><code class="language-python">import time
from cryptography.hazmat.primitives.asymmetric import rsa, ec, ed25519
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import padding

message = b"Performance test message"

# RSA
rsa_key = rsa.generate_private_key(public_exponent=65537, key_size=2048)
start = time.time()
for _ in range(1000):
    sig = rsa_key.sign(message, padding.PSS(mgf=padding.MGF1(hashes.SHA256()), 
                       salt_length=padding.PSS.MAX_LENGTH), hashes.SHA256())
rsa_time = time.time() - start

# ECDSA
ec_key = ec.generate_private_key(ec.SECP256R1())
start = time.time()
for _ in range(1000):
    sig = ec_key.sign(message, ec.ECDSA(hashes.SHA256()))
ecdsa_time = time.time() - start

# Ed25519
ed_key = ed25519.Ed25519PrivateKey.generate()
start = time.time()
for _ in range(1000):
    sig = ed_key.sign(message)
ed25519_time = time.time() - start

print(f"RSA-2048:  {rsa_time:.3f}s")
print(f"ECDSA-256: {ecdsa_time:.3f}s")
print(f"Ed25519:   {ed25519_time:.3f}s")

# Typical results:
# RSA-2048:  5.234s  (slowest)
# ECDSA-256: 1.876s  (fast)
# Ed25519:   0.156s  (fastest!)
</code></pre>
<h2 id="signature-verification"><a class="header" href="#signature-verification">Signature Verification</a></h2>
<h3 id="complete-verification-example"><a class="header" href="#complete-verification-example">Complete Verification Example</a></h3>
<pre><code class="language-python">from cryptography.hazmat.primitives import serialization
from cryptography.hazmat.primitives.asymmetric import rsa, padding
from cryptography.hazmat.primitives import hashes
from cryptography.exceptions import InvalidSignature

class DocumentSigner:
    def __init__(self, private_key_path=None, public_key_path=None):
        if private_key_path:
            with open(private_key_path, 'rb') as f:
                self.private_key = serialization.load_pem_private_key(
                    f.read(),
                    password=None
                )
        
        if public_key_path:
            with open(public_key_path, 'rb') as f:
                self.public_key = serialization.load_pem_public_key(f.read())
    
    def sign_document(self, document):
        signature = self.private_key.sign(
            document,
            padding.PSS(
                mgf=padding.MGF1(hashes.SHA256()),
                salt_length=padding.PSS.MAX_LENGTH
            ),
            hashes.SHA256()
        )
        return signature
    
    def verify_document(self, document, signature):
        try:
            self.public_key.verify(
                signature,
                document,
                padding.PSS(
                    mgf=padding.MGF1(hashes.SHA256()),
                    salt_length=padding.PSS.MAX_LENGTH
                ),
                hashes.SHA256()
            )
            return True, "Signature is valid"
        except InvalidSignature:
            return False, "Invalid signature - document may be tampered"
        except Exception as e:
            return False, f"Verification error: {str(e)}"
    
    def sign_file(self, filepath, signature_path):
        with open(filepath, 'rb') as f:
            document = f.read()
        
        signature = self.sign_document(document)
        
        with open(signature_path, 'wb') as f:
            f.write(signature)
        
        return signature
    
    def verify_file(self, filepath, signature_path):
        with open(filepath, 'rb') as f:
            document = f.read()
        
        with open(signature_path, 'rb') as f:
            signature = f.read()
        
        return self.verify_document(document, signature)

# Usage
# Signing
signer = DocumentSigner(private_key_path='private_key.pem')
document = b"Important contract: Alice pays Bob $1000"
signature = signer.sign_document(document)

# Verification
verifier = DocumentSigner(public_key_path='public_key.pem')
is_valid, message = verifier.verify_document(document, signature)
print(f"{message}")

# File signing
signer.sign_file('contract.pdf', 'contract.pdf.sig')
is_valid, message = verifier.verify_file('contract.pdf', 'contract.pdf.sig')
print(f"Contract verification: {message}")
</code></pre>
<h2 id="code-signing"><a class="header" href="#code-signing">Code Signing</a></h2>
<h3 id="signing-softwarescripts"><a class="header" href="#signing-softwarescripts">Signing Software/Scripts</a></h3>
<pre><code class="language-bash"># Sign a Python script
openssl dgst -sha256 -sign private_key.pem -out script.py.sig script.py

# Create a signed package
tar -czf package.tar.gz files/
openssl dgst -sha256 -sign private_key.pem -out package.tar.gz.sig package.tar.gz

# Verification script
#!/bin/bash
FILE=$1
SIG=$2
PUBKEY=$3

openssl dgst -sha256 -verify $PUBKEY -signature $SIG $FILE

if [ $? -eq 0 ]; then
    echo "✓ Signature verified - safe to run"
else
    echo "✗ Invalid signature - DO NOT RUN"
    exit 1
fi
</code></pre>
<h3 id="python-code-signing-example"><a class="header" href="#python-code-signing-example">Python Code Signing Example</a></h3>
<pre><code class="language-python">import os
import hashlib
from cryptography.hazmat.primitives import serialization
from cryptography.hazmat.primitives.asymmetric import rsa, padding
from cryptography.hazmat.primitives import hashes

class CodeSigner:
    def __init__(self, private_key_path):
        with open(private_key_path, 'rb') as f:
            self.private_key = serialization.load_pem_private_key(
                f.read(),
                password=None
            )
    
    def sign_file(self, filepath):
        # Read file
        with open(filepath, 'rb') as f:
            code = f.read()
        
        # Generate signature
        signature = self.private_key.sign(
            code,
            padding.PSS(
                mgf=padding.MGF1(hashes.SHA256()),
                salt_length=padding.PSS.MAX_LENGTH
            ),
            hashes.SHA256()
        )
        
        # Save signature
        sig_path = filepath + '.sig'
        with open(sig_path, 'wb') as f:
            f.write(signature)
        
        print(f"✓ Signed: {filepath}")
        print(f"✓ Signature: {sig_path}")
        
        return signature

class CodeVerifier:
    def __init__(self, public_key_path):
        with open(public_key_path, 'rb') as f:
            self.public_key = serialization.load_pem_public_key(f.read())
    
    def verify_file(self, filepath):
        sig_path = filepath + '.sig'
        
        # Read file and signature
        with open(filepath, 'rb') as f:
            code = f.read()
        
        with open(sig_path, 'rb') as f:
            signature = f.read()
        
        # Verify
        try:
            self.public_key.verify(
                signature,
                code,
                padding.PSS(
                    mgf=padding.MGF1(hashes.SHA256()),
                    salt_length=padding.PSS.MAX_LENGTH
                ),
                hashes.SHA256()
            )
            print(f"✓ Signature valid for {filepath}")
            return True
        except:
            print(f"✗ Invalid signature for {filepath}")
            return False

# Usage
signer = CodeSigner('private_key.pem')
signer.sign_file('important_script.py')

verifier = CodeVerifier('public_key.pem')
if verifier.verify_file('important_script.py'):
    # Safe to execute
    exec(open('important_script.py').read())
</code></pre>
<h3 id="macos-code-signing"><a class="header" href="#macos-code-signing">macOS Code Signing</a></h3>
<pre><code class="language-bash"># Sign application
codesign -s "Developer ID" MyApp.app

# Verify signature
codesign -v MyApp.app

# Deep verification
codesign -v --deep MyApp.app

# Display signature info
codesign -d -vv MyApp.app
</code></pre>
<h3 id="windows-code-signing"><a class="header" href="#windows-code-signing">Windows Code Signing</a></h3>
<pre><code class="language-powershell"># Sign executable with certificate
signtool sign /f certificate.pfx /p password /t http://timestamp.server.com app.exe

# Verify signature
signtool verify /pa app.exe
</code></pre>
<h2 id="security-considerations-2"><a class="header" href="#security-considerations-2">Security Considerations</a></h2>
<h3 id="1-key-size"><a class="header" href="#1-key-size">1. Key Size</a></h3>
<pre><code>RSA:
- Minimum: 2048 bits
- Recommended: 3072 bits
- High security: 4096 bits

ECDSA:
- Minimum: 256 bits (P-256)
- Recommended: 384 bits (P-384)
- High security: 521 bits (P-521)

Ed25519:
- Fixed: 256 bits (equivalent to ~128-bit security)
</code></pre>
<h3 id="2-hash-function"><a class="header" href="#2-hash-function">2. Hash Function</a></h3>
<pre><code class="language-python"># GOOD - SHA-256 or better
signature = private_key.sign(message, padding.PSS(...), hashes.SHA256())

# BETTER - SHA-512
signature = private_key.sign(message, padding.PSS(...), hashes.SHA512())

# BAD - SHA-1 (broken!)
signature = private_key.sign(message, padding.PSS(...), hashes.SHA1())
</code></pre>
<h3 id="3-random-number-generation"><a class="header" href="#3-random-number-generation">3. Random Number Generation</a></h3>
<pre><code class="language-python"># ECDSA requires good randomness
# Python's cryptography library handles this automatically

# NEVER implement your own random number generator!
# Use os.urandom() or secrets module for any manual crypto
import secrets
random_bytes = secrets.token_bytes(32)
</code></pre>
<h3 id="4-private-key-protection"><a class="header" href="#4-private-key-protection">4. Private Key Protection</a></h3>
<pre><code class="language-python"># Encrypt private key with password
from cryptography.hazmat.primitives import serialization

encrypted_pem = private_key.private_bytes(
    encoding=serialization.Encoding.PEM,
    format=serialization.PrivateFormat.PKCS8,
    encryption_algorithm=serialization.BestAvailableEncryption(b'strong-password')
)

# Load encrypted key
with open('encrypted_key.pem', 'rb') as f:
    private_key = serialization.load_pem_private_key(
        f.read(),
        password=b'strong-password'
    )
</code></pre>
<h3 id="5-signature-malleability"><a class="header" href="#5-signature-malleability">5. Signature Malleability</a></h3>
<pre><code>Some signature schemes allow multiple valid signatures for the same message.

Ed25519: NOT malleable (good!)
ECDSA: Can be malleable (use canonical form)
RSA-PSS: Probabilistic (different signatures each time, but all valid)
</code></pre>
<h2 id="best-practices-13"><a class="header" href="#best-practices-13">Best Practices</a></h2>
<h3 id="1-use-modern-algorithms"><a class="header" href="#1-use-modern-algorithms">1. Use Modern Algorithms</a></h3>
<pre><code>✓ RSA-PSS (not PKCS#1 v1.5)
✓ ECDSA with P-256 or better
✓ Ed25519 (best choice for new systems)
✗ DSA (obsolete)
✗ RSA with PKCS#1 v1.5 (vulnerable)
</code></pre>
<h3 id="2-protect-private-keys"><a class="header" href="#2-protect-private-keys">2. Protect Private Keys</a></h3>
<pre><code>- Never commit to version control
- Use hardware security modules (HSM) for critical keys
- Use key management services (AWS KMS, Azure Key Vault)
- Encrypt keys at rest
- Limit access with proper permissions
</code></pre>
<h3 id="3-include-metadata"><a class="header" href="#3-include-metadata">3. Include Metadata</a></h3>
<pre><code class="language-python">import json
import time

def create_signed_document(content, private_key):
    metadata = {
        'content': content,
        'timestamp': int(time.time()),
        'signer': 'John Doe',
        'version': '1.0'
    }
    
    message = json.dumps(metadata, sort_keys=True).encode()
    signature = private_key.sign(message, ...)
    
    return {
        'metadata': metadata,
        'signature': signature.hex()
    }
</code></pre>
<h3 id="4-timestamp-signatures"><a class="header" href="#4-timestamp-signatures">4. Timestamp Signatures</a></h3>
<pre><code class="language-python"># Include timestamp to prevent replay attacks
import time

def sign_with_timestamp(message, private_key):
    timestamp = str(int(time.time()))
    data = f"{timestamp}:{message}".encode()
    signature = private_key.sign(data, ...)
    
    return {
        'message': message,
        'timestamp': timestamp,
        'signature': signature.hex()
    }

def verify_with_timestamp(signed_data, public_key, max_age=3600):
    timestamp = int(signed_data['timestamp'])
    current = int(time.time())
    
    # Check if too old
    if current - timestamp &gt; max_age:
        return False, "Signature expired"
    
    # Verify signature
    data = f"{signed_data['timestamp']}:{signed_data['message']}".encode()
    # ... verify logic
</code></pre>
<h2 id="common-mistakes-1"><a class="header" href="#common-mistakes-1">Common Mistakes</a></h2>
<h3 id="1-signing-hash-vs-message"><a class="header" href="#1-signing-hash-vs-message">1. Signing Hash vs Message</a></h3>
<pre><code class="language-python"># WRONG - signing hash manually
hash_digest = hashlib.sha256(message).digest()
signature = private_key.sign(hash_digest, ...)  # May not work!

# RIGHT - let library handle hashing
signature = private_key.sign(message, ..., hashes.SHA256())
</code></pre>
<h3 id="2-not-validating-signatures"><a class="header" href="#2-not-validating-signatures">2. Not Validating Signatures</a></h3>
<pre><code class="language-python"># WRONG - trusting unsigned data
data = receive_data()
process(data)  # Danger!

# RIGHT - verify signature first
data, signature = receive_data_and_signature()
if verify_signature(data, signature):
    process(data)
else:
    reject()
</code></pre>
<h3 id="3-exposing-private-keys"><a class="header" href="#3-exposing-private-keys">3. Exposing Private Keys</a></h3>
<pre><code class="language-python"># WRONG
private_key = "-----BEGIN PRIVATE KEY-----\n..."  # Hardcoded!

# RIGHT
import os
key_path = os.environ.get('PRIVATE_KEY_PATH')
with open(key_path, 'rb') as f:
    private_key = load_key(f.read())
</code></pre>
<h2 id="eli10-9"><a class="header" href="#eli10-9">ELI10</a></h2>
<p>Digital signatures are like a special seal that only you can make:</p>
<p><strong>Regular signature (on paper):</strong></p>
<ul>
<li>Anyone can try to copy your signature</li>
<li>Hard to prove it's really yours</li>
</ul>
<p><strong>Digital signature:</strong></p>
<ol>
<li>You have a special "stamp" that only you own (private key)</li>
<li>Anyone can see your "stamp pattern" (public key)</li>
<li>When you sign a document:
<ul>
<li>You use your secret stamp to make a unique mark</li>
<li>This mark is different for every document</li>
</ul>
</li>
<li>Others can verify:
<ul>
<li>They use your public stamp pattern</li>
<li>If it matches, they know YOU signed it</li>
<li>Nobody else could have made that exact mark!</li>
</ul>
</li>
</ol>
<p><strong>Why it's secure:</strong></p>
<ul>
<li>Your secret stamp is like a lock that only you can use</li>
<li>The public pattern lets others check your work</li>
<li>Even if someone copies the signed document, they can't change it without your secret stamp!</li>
</ul>
<p><strong>Real-world example:</strong>
When you download software, the developer signs it:</p>
<ul>
<li>✓ You can verify it's really from them</li>
<li>✓ Nobody tampered with the software</li>
<li>✓ The developer can't deny they released it</li>
</ul>
<p><strong>Different from HMAC:</strong></p>
<ul>
<li>HMAC: Shared secret (like both having the same password)</li>
<li>Digital Signature: Private/public keys (like a lock and key everyone can see fits)</li>
</ul>
<h2 id="further-resources-9"><a class="header" href="#further-resources-9">Further Resources</a></h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=wXB-V_Keiu8">RSA Cryptography Explained</a></li>
<li><a href="https://blog.cloudflare.com/ecdsa-the-digital-signature-algorithm-of-a-better-internet/">ECDSA Deep Dive</a></li>
<li><a href="https://ed25519.cr.yp.to/">Ed25519 Specification</a></li>
<li><a href="https://csrc.nist.gov/publications/detail/fips/186/4/final">Digital Signatures Standard (DSS)</a></li>
<li><a href="https://www.schneier.com/books/cryptography-engineering/">Cryptography Engineering (Book)</a></li>
<li><a href="https://cryptography.io/en/latest/">Python Cryptography Library</a></li>
<li><a href="https://www.openssl.org/docs/man1.1.1/man1/">OpenSSL Command Reference</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="x509-certificates-and-pki"><a class="header" href="#x509-certificates-and-pki">X.509 Certificates and PKI</a></h1>
<h2 id="overview-23"><a class="header" href="#overview-23">Overview</a></h2>
<p>X.509 certificates are digital documents that bind public keys to identities. They enable:</p>
<ul>
<li><strong>Authentication</strong>: Verify identity of servers/users</li>
<li><strong>Encryption</strong>: Establish secure connections</li>
<li><strong>Trust</strong>: Chain of trust through Certificate Authorities</li>
</ul>
<h2 id="x509-certificate-structure"><a class="header" href="#x509-certificate-structure">X.509 Certificate Structure</a></h2>
<h3 id="basic-components"><a class="header" href="#basic-components">Basic Components</a></h3>
<pre><code>Certificate:
  ├── Version (v3)
  ├── Serial Number (unique identifier)
  ├── Signature Algorithm (SHA-256 with RSA)
  ├── Issuer (who issued the certificate)
  ├── Validity Period
  │   ├── Not Before (start date)
  │   └── Not After (expiration date)
  ├── Subject (who the certificate is for)
  ├── Subject Public Key Info
  │   ├── Algorithm (RSA, ECDSA, etc.)
  │   └── Public Key (actual key data)
  ├── Extensions (v3)
  │   ├── Key Usage
  │   ├── Subject Alternative Names (SANs)
  │   ├── Basic Constraints
  │   └── Authority Key Identifier
  └── Signature (CA's signature)
</code></pre>
<h3 id="certificate-fields"><a class="header" href="#certificate-fields">Certificate Fields</a></h3>
<pre><code>Subject: CN=example.com, O=Example Inc, C=US
  CN = Common Name (domain or person name)
  O  = Organization
  OU = Organizational Unit
  C  = Country
  ST = State/Province
  L  = Locality/City

Issuer: CN=Let's Encrypt Authority, O=Let's Encrypt, C=US
  (Who signed this certificate)

Validity:
  Not Before: Jan 1 00:00:00 2024 GMT
  Not After:  Apr 1 23:59:59 2024 GMT
  (Certificate valid period)

Public Key Algorithm: RSA 2048-bit
  (Type and size of public key)

Signature Algorithm: SHA-256 with RSA
  (How CA signed the certificate)
</code></pre>
<h3 id="visual-representation-1"><a class="header" href="#visual-representation-1">Visual Representation</a></h3>
<pre><code>┌─────────────────────────────────────┐
│      X.509 Certificate              │
├─────────────────────────────────────┤
│ Version: 3                          │
│ Serial: 04:92:7f:63:ab:02:1e...     │
│                                     │
│ Issuer: CN=Let's Encrypt           │
│ Subject: CN=example.com             │
│                                     │
│ Valid: 2024-01-01 to 2024-04-01    │
│                                     │
│ Public Key: [RSA 2048-bit]         │
│   65537                             │
│   00:b8:7f:4e:91...                │
│                                     │
│ Extensions:                         │
│   - Key Usage: Digital Signature   │
│   - SANs: example.com, *.example.com│
│   - Basic Constraints: CA:FALSE    │
│                                     │
│ Signature Algorithm: sha256RSA     │
│ Signature: [CA's signature]        │
│   3a:7b:8c:9d...                   │
└─────────────────────────────────────┘
</code></pre>
<h2 id="certificate-creation"><a class="header" href="#certificate-creation">Certificate Creation</a></h2>
<h3 id="creating-a-self-signed-certificate"><a class="header" href="#creating-a-self-signed-certificate">Creating a Self-Signed Certificate</a></h3>
<h4 id="openssl-bash-1"><a class="header" href="#openssl-bash-1">OpenSSL (Bash)</a></h4>
<pre><code class="language-bash"># Generate private key and self-signed certificate in one command
openssl req -x509 -newkey rsa:2048 -keyout key.pem -out cert.pem -days 365 -nodes \
  -subj "/C=US/ST=California/L=San Francisco/O=Example Inc/CN=example.com"

# Breakdown:
# -x509: Create self-signed certificate
# -newkey rsa:2048: Generate new 2048-bit RSA key
# -keyout: Output private key file
# -out: Output certificate file
# -days: Certificate validity period
# -nodes: Don't encrypt private key
# -subj: Certificate subject information

# View certificate details
openssl x509 -in cert.pem -text -noout

# Generate key and certificate separately
openssl genrsa -out key.pem 2048
openssl req -new -x509 -key key.pem -out cert.pem -days 365 \
  -subj "/CN=example.com"
</code></pre>
<h4 id="python-2"><a class="header" href="#python-2">Python</a></h4>
<pre><code class="language-python">from cryptography import x509
from cryptography.x509.oid import NameOID, ExtensionOID
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import rsa
from cryptography.hazmat.primitives import serialization
import datetime

# Generate private key
private_key = rsa.generate_private_key(
    public_exponent=65537,
    key_size=2048,
)

# Create subject and issuer (same for self-signed)
subject = issuer = x509.Name([
    x509.NameAttribute(NameOID.COUNTRY_NAME, "US"),
    x509.NameAttribute(NameOID.STATE_OR_PROVINCE_NAME, "California"),
    x509.NameAttribute(NameOID.LOCALITY_NAME, "San Francisco"),
    x509.NameAttribute(NameOID.ORGANIZATION_NAME, "Example Inc"),
    x509.NameAttribute(NameOID.COMMON_NAME, "example.com"),
])

# Build certificate
cert = x509.CertificateBuilder().subject_name(
    subject
).issuer_name(
    issuer
).public_key(
    private_key.public_key()
).serial_number(
    x509.random_serial_number()
).not_valid_before(
    datetime.datetime.utcnow()
).not_valid_after(
    datetime.datetime.utcnow() + datetime.timedelta(days=365)
).add_extension(
    x509.SubjectAlternativeName([
        x509.DNSName("example.com"),
        x509.DNSName("www.example.com"),
    ]),
    critical=False,
).sign(private_key, hashes.SHA256())

# Save certificate
with open("cert.pem", "wb") as f:
    f.write(cert.public_bytes(serialization.Encoding.PEM))

# Save private key
with open("key.pem", "wb") as f:
    f.write(private_key.private_bytes(
        encoding=serialization.Encoding.PEM,
        format=serialization.PrivateFormat.PKCS8,
        encryption_algorithm=serialization.NoEncryption()
    ))

print("Certificate created successfully!")
</code></pre>
<h3 id="creating-a-certificate-signing-request-csr"><a class="header" href="#creating-a-certificate-signing-request-csr">Creating a Certificate Signing Request (CSR)</a></h3>
<h4 id="openssl"><a class="header" href="#openssl">OpenSSL</a></h4>
<pre><code class="language-bash"># Generate private key
openssl genrsa -out server.key 2048

# Create CSR
openssl req -new -key server.key -out server.csr \
  -subj "/C=US/ST=CA/L=San Francisco/O=Example Inc/CN=example.com"

# View CSR
openssl req -in server.csr -text -noout

# Create CSR with Subject Alternative Names (using config file)
cat &gt; san.cnf &lt;&lt;-END
[req]
default_bits = 2048
prompt = no
default_md = sha256
distinguished_name = dn
req_extensions = v3_req

[dn]
C=US
ST=CA
L=San Francisco
O=Example Inc
CN=example.com

[v3_req]
subjectAltName = @alt_names

[alt_names]
DNS.1 = example.com
DNS.2 = www.example.com
DNS.3 = *.example.com
END

openssl req -new -key server.key -out server.csr -config san.cnf

# Verify CSR
openssl req -in server.csr -noout -verify
</code></pre>
<h4 id="python-3"><a class="header" href="#python-3">Python</a></h4>
<pre><code class="language-python">from cryptography import x509
from cryptography.x509.oid import NameOID
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import rsa
from cryptography.hazmat.primitives import serialization

# Generate private key
private_key = rsa.generate_private_key(
    public_exponent=65537,
    key_size=2048,
)

# Build CSR
csr = x509.CertificateSigningRequestBuilder().subject_name(x509.Name([
    x509.NameAttribute(NameOID.COUNTRY_NAME, "US"),
    x509.NameAttribute(NameOID.STATE_OR_PROVINCE_NAME, "California"),
    x509.NameAttribute(NameOID.ORGANIZATION_NAME, "Example Inc"),
    x509.NameAttribute(NameOID.COMMON_NAME, "example.com"),
])).add_extension(
    x509.SubjectAlternativeName([
        x509.DNSName("example.com"),
        x509.DNSName("www.example.com"),
        x509.DNSName("*.example.com"),
    ]),
    critical=False,
).sign(private_key, hashes.SHA256())

# Save CSR
with open("server.csr", "wb") as f:
    f.write(csr.public_bytes(serialization.Encoding.PEM))

print("CSR created successfully!")
</code></pre>
<h2 id="certificate-authorities-cas"><a class="header" href="#certificate-authorities-cas">Certificate Authorities (CAs)</a></h2>
<h3 id="ca-hierarchy"><a class="header" href="#ca-hierarchy">CA Hierarchy</a></h3>
<pre><code>┌────────────────────────────┐
│      Root CA               │
│   (Self-signed)            │
│   Trust Anchor             │
└─────────────┬──────────────┘
              │
    ┌─────────┴─────────┐
    │                   │
┌───▼──────────┐  ┌────▼───────────┐
│ Intermediate │  │ Intermediate   │
│ CA #1        │  │ CA #2          │
└───┬──────────┘  └────┬───────────┘
    │                  │
┌───▼──────┐     ┌────▼──────┐
│ End-User │     │ End-User  │
│ Cert #1  │     │ Cert #2   │
└──────────┘     └───────────┘
</code></pre>
<h3 id="trust-chain"><a class="header" href="#trust-chain">Trust Chain</a></h3>
<pre><code>End-user certificate (example.com)
  ↓ Issued by
Intermediate CA certificate
  ↓ Issued by
Root CA certificate (in browser trust store)
  ✓ Trusted
</code></pre>
<h3 id="setting-up-a-ca"><a class="header" href="#setting-up-a-ca">Setting Up a CA</a></h3>
<h4 id="create-root-ca"><a class="header" href="#create-root-ca">Create Root CA</a></h4>
<pre><code class="language-bash"># Generate Root CA private key
openssl genrsa -aes256 -out rootCA.key 4096

# Create Root CA certificate
openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 3650 \
  -out rootCA.crt \
  -subj "/C=US/ST=CA/O=Example Inc/CN=Example Root CA"

# View Root CA certificate
openssl x509 -in rootCA.crt -text -noout
</code></pre>
<h4 id="sign-certificate-with-ca"><a class="header" href="#sign-certificate-with-ca">Sign Certificate with CA</a></h4>
<pre><code class="language-bash"># You have: server.csr (from earlier)
# You have: rootCA.key and rootCA.crt

# Create extensions configuration
echo "
[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment
subjectAltName = @alt_names

[ alt_names ]
DNS.1 = example.com
DNS.2 = www.example.com
DNS.3 = *.example.com
" &gt; server_ext.cnf

# Sign CSR with CA
openssl x509 -req -in server.csr \
  -CA rootCA.crt -CAkey rootCA.key -CAcreateserial \
  -out server.crt -days 365 -sha256 \
  -extfile server_ext.cnf -extensions v3_req

# View signed certificate
openssl x509 -in server.crt -text -noout

# Verify certificate against CA
openssl verify -CAfile rootCA.crt server.crt
</code></pre>
<h4 id="python-ca-implementation"><a class="header" href="#python-ca-implementation">Python CA Implementation</a></h4>
<pre><code class="language-python">from cryptography import x509
from cryptography.x509.oid import NameOID, ExtensionOID
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.asymmetric import rsa
from cryptography.hazmat.primitives import serialization
import datetime

class CertificateAuthority:
    def __init__(self):
        # Generate CA private key
        self.ca_key = rsa.generate_private_key(
            public_exponent=65537,
            key_size=4096,
        )

        # Create CA certificate
        subject = issuer = x509.Name([
            x509.NameAttribute(NameOID.COUNTRY_NAME, "US"),
            x509.NameAttribute(NameOID.ORGANIZATION_NAME, "Example Inc"),
            x509.NameAttribute(NameOID.COMMON_NAME, "Example Root CA"),
        ])

        self.ca_cert = x509.CertificateBuilder().subject_name(
            subject
        ).issuer_name(
            issuer
        ).public_key(
            self.ca_key.public_key()
        ).serial_number(
            x509.random_serial_number()
        ).not_valid_before(
            datetime.datetime.utcnow()
        ).not_valid_after(
            datetime.datetime.utcnow() + datetime.timedelta(days=3650)
        ).add_extension(
            x509.BasicConstraints(ca=True, path_length=None),
            critical=True,
        ).add_extension(
            x509.KeyUsage(
                digital_signature=True,
                key_cert_sign=True,
                crl_sign=True,
                key_encipherment=False,
                content_commitment=False,
                data_encipherment=False,
                key_agreement=False,
                encipher_only=False,
                decipher_only=False,
            ),
            critical=True,
        ).sign(self.ca_key, hashes.SHA256())

    def issue_certificate(self, csr, validity_days=365):
        """Issue a certificate from a CSR"""
        cert = x509.CertificateBuilder().subject_name(
            csr.subject
        ).issuer_name(
            self.ca_cert.subject
        ).public_key(
            csr.public_key()
        ).serial_number(
            x509.random_serial_number()
        ).not_valid_before(
            datetime.datetime.utcnow()
        ).not_valid_after(
            datetime.datetime.utcnow() + datetime.timedelta(days=validity_days)
        ).add_extension(
            x509.BasicConstraints(ca=False, path_length=None),
            critical=True,
        ).add_extension(
            x509.KeyUsage(
                digital_signature=True,
                key_encipherment=True,
                key_cert_sign=False,
                crl_sign=False,
                content_commitment=False,
                data_encipherment=False,
                key_agreement=False,
                encipher_only=False,
                decipher_only=False,
            ),
            critical=True,
        )

        # Copy extensions from CSR
        for extension in csr.extensions:
            cert = cert.add_extension(extension.value, extension.critical)

        # Sign with CA key
        return cert.sign(self.ca_key, hashes.SHA256())

    def save_ca_cert(self, filename):
        with open(filename, "wb") as f:
            f.write(self.ca_cert.public_bytes(serialization.Encoding.PEM))

    def save_ca_key(self, filename, password=None):
        encryption = serialization.NoEncryption()
        if password:
            encryption = serialization.BestAvailableEncryption(password)

        with open(filename, "wb") as f:
            f.write(self.ca_key.private_bytes(
                encoding=serialization.Encoding.PEM,
                format=serialization.PrivateFormat.PKCS8,
                encryption_algorithm=encryption
            ))

# Usage
ca = CertificateAuthority()
ca.save_ca_cert("ca.crt")
ca.save_ca_key("ca.key", password=b"secure-password")

# Load and sign a CSR
with open("server.csr", "rb") as f:
    csr = x509.load_pem_x509_csr(f.read())

cert = ca.issue_certificate(csr, validity_days=365)

with open("server.crt", "wb") as f:
    f.write(cert.public_bytes(serialization.Encoding.PEM))

print("Certificate issued successfully!")
</code></pre>
<h2 id="certificate-chains"><a class="header" href="#certificate-chains">Certificate Chains</a></h2>
<h3 id="understanding-certificate-chains"><a class="header" href="#understanding-certificate-chains">Understanding Certificate Chains</a></h3>
<pre><code>┌─────────────────────────────────┐
│  Server Certificate             │
│  Subject: CN=example.com        │
│  Issuer: CN=Intermediate CA     │
│  [Public Key]                   │
│  [Signature by Intermediate]    │
└────────────┬────────────────────┘
             │ Verified by
┌────────────▼────────────────────┐
│  Intermediate Certificate       │
│  Subject: CN=Intermediate CA    │
│  Issuer: CN=Root CA             │
│  [Public Key]                   │
│  [Signature by Root]            │
└────────────┬────────────────────┘
             │ Verified by
┌────────────▼────────────────────┐
│  Root Certificate               │
│  Subject: CN=Root CA            │
│  Issuer: CN=Root CA (self)      │
│  [Public Key]                   │
│  [Self Signature]               │
│  ✓ In Trust Store               │
└─────────────────────────────────┘
</code></pre>
<h3 id="building-certificate-chain"><a class="header" href="#building-certificate-chain">Building Certificate Chain</a></h3>
<pre><code class="language-bash"># Create chain file (server cert + intermediate cert)
cat server.crt intermediate.crt &gt; fullchain.pem

# Or with root CA (not usually needed)
cat server.crt intermediate.crt rootCA.crt &gt; fullchain.pem

# Verify chain
openssl verify -CAfile rootCA.crt -untrusted intermediate.crt server.crt

# Display certificate chain
openssl s_client -connect example.com:443 -showcerts
</code></pre>
<h3 id="verifying-certificate-chain-in-python"><a class="header" href="#verifying-certificate-chain-in-python">Verifying Certificate Chain in Python</a></h3>
<pre><code class="language-python">from cryptography import x509
from cryptography.hazmat.primitives import serialization
from cryptography.hazmat.primitives.asymmetric import padding
from cryptography.hazmat.primitives import hashes
from cryptography.exceptions import InvalidSignature

def verify_certificate_chain(cert_chain):
    """
    Verify a certificate chain
    cert_chain: list of certificates [leaf, intermediate, ..., root]
    """
    for i in range(len(cert_chain) - 1):
        cert = cert_chain[i]
        issuer_cert = cert_chain[i + 1]

        # Verify issuer name matches
        if cert.issuer != issuer_cert.subject:
            return False, f"Issuer mismatch at level {i}"

        # Verify signature
        try:
            issuer_public_key = issuer_cert.public_key()
            issuer_public_key.verify(
                cert.signature,
                cert.tbs_certificate_bytes,
                padding.PKCS1v15(),
                cert.signature_hash_algorithm,
            )
        except InvalidSignature:
            return False, f"Invalid signature at level {i}"

        # Verify validity period
        import datetime
        now = datetime.datetime.utcnow()
        if now &lt; cert.not_valid_before or now &gt; cert.not_valid_after:
            return False, f"Certificate expired or not yet valid at level {i}"

    return True, "Chain verified successfully"

# Load certificates
certs = []
for cert_file in ['server.crt', 'intermediate.crt', 'root.crt']:
    with open(cert_file, 'rb') as f:
        cert = x509.load_pem_x509_certificate(f.read())
        certs.append(cert)

# Verify chain
is_valid, message = verify_certificate_chain(certs)
print(message)
</code></pre>
<h2 id="lets-encrypt"><a class="header" href="#lets-encrypt">Let's Encrypt</a></h2>
<h3 id="overview-24"><a class="header" href="#overview-24">Overview</a></h3>
<p>Let's Encrypt is a free, automated Certificate Authority providing:</p>
<ul>
<li>Free SSL/TLS certificates</li>
<li>90-day validity (encourages automation)</li>
<li>Domain Validation (DV) only</li>
<li>Automated renewal</li>
</ul>
<h3 id="acme-protocol"><a class="header" href="#acme-protocol">ACME Protocol</a></h3>
<pre><code>1. Client requests certificate for example.com

2. Let's Encrypt challenges ownership:
   - HTTP-01: Place file at http://example.com/.well-known/acme-challenge/
   - DNS-01: Add TXT record to _acme-challenge.example.com
   - TLS-ALPN-01: Configure TLS server with special certificate

3. Let's Encrypt verifies challenge

4. If successful, issues certificate

5. Client installs certificate

6. Automated renewal before 90-day expiration
</code></pre>
<h3 id="using-certbot"><a class="header" href="#using-certbot">Using Certbot</a></h3>
<pre><code class="language-bash"># Install certbot
sudo apt-get install certbot

# Obtain certificate (standalone)
sudo certbot certonly --standalone -d example.com -d www.example.com

# Obtain certificate (webroot - site already running)
sudo certbot certonly --webroot -w /var/www/html -d example.com

# Obtain certificate (DNS challenge)
sudo certbot certonly --manual --preferred-challenges dns -d example.com

# Obtain certificate (with automatic nginx configuration)
sudo certbot --nginx -d example.com -d www.example.com

# Obtain certificate (with automatic apache configuration)
sudo certbot --apache -d example.com

# List certificates
sudo certbot certificates

# Renew certificates (dry run)
sudo certbot renew --dry-run

# Renew certificates
sudo certbot renew

# Revoke certificate
sudo certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem

# Delete certificate
sudo certbot delete --cert-name example.com
</code></pre>
<h3 id="automated-renewal"><a class="header" href="#automated-renewal">Automated Renewal</a></h3>
<pre><code class="language-bash"># Add to crontab (check renewal twice daily)
0 0,12 * * * certbot renew --quiet

# Systemd timer (if using systemd)
sudo systemctl enable certbot-renew.timer
sudo systemctl start certbot-renew.timer

# Test renewal
sudo certbot renew --dry-run
</code></pre>
<h3 id="using-acmesh-alternative"><a class="header" href="#using-acmesh-alternative">Using acme.sh (Alternative)</a></h3>
<pre><code class="language-bash"># Install acme.sh
curl https://get.acme.sh | sh

# Issue certificate (HTTP validation)
acme.sh --issue -d example.com -w /var/www/html

# Issue certificate (DNS validation with Cloudflare)
export CF_Key="your-cloudflare-api-key"
export CF_Email="your@email.com"
acme.sh --issue --dns dns_cf -d example.com -d *.example.com

# Install certificate
acme.sh --install-cert -d example.com \
  --key-file /etc/nginx/ssl/example.com.key \
  --fullchain-file /etc/nginx/ssl/example.com.crt \
  --reloadcmd "systemctl reload nginx"

# Renew all certificates
acme.sh --renew-all

# Force renew
acme.sh --renew -d example.com --force
</code></pre>
<h2 id="certificate-management"><a class="header" href="#certificate-management">Certificate Management</a></h2>
<h3 id="certificate-inspection"><a class="header" href="#certificate-inspection">Certificate Inspection</a></h3>
<pre><code class="language-bash"># View certificate details
openssl x509 -in cert.pem -text -noout

# View certificate dates
openssl x509 -in cert.pem -noout -dates

# View certificate subject
openssl x509 -in cert.pem -noout -subject

# View certificate issuer
openssl x509 -in cert.pem -noout -issuer

# View certificate fingerprint
openssl x509 -in cert.pem -noout -fingerprint -sha256

# Check certificate and key match
openssl x509 -noout -modulus -in cert.pem | openssl md5
openssl rsa -noout -modulus -in key.pem | openssl md5
# If md5 hashes match, cert and key are paired

# View certificate from server
openssl s_client -connect example.com:443 -showcerts

# Check certificate expiration
echo | openssl s_client -connect example.com:443 2&gt;/dev/null | \
  openssl x509 -noout -dates
</code></pre>
<h3 id="python-certificate-tools"><a class="header" href="#python-certificate-tools">Python Certificate Tools</a></h3>
<pre><code class="language-python">from cryptography import x509
from cryptography.hazmat.primitives import serialization
import datetime

def inspect_certificate(cert_path):
    with open(cert_path, 'rb') as f:
        cert = x509.load_pem_x509_certificate(f.read())

    print("Certificate Information:")
    print(f"Subject: {cert.subject.rfc4514_string()}")
    print(f"Issuer: {cert.issuer.rfc4514_string()}")
    print(f"Serial Number: {cert.serial_number}")
    print(f"Not Valid Before: {cert.not_valid_before}")
    print(f"Not Valid After: {cert.not_valid_after}")
    print(f"Signature Algorithm: {cert.signature_algorithm_oid._name}")

    # Check if expired
    now = datetime.datetime.utcnow()
    days_until_expiry = (cert.not_valid_after - now).days

    if now &gt; cert.not_valid_after:
        print("⚠ Certificate EXPIRED!")
    elif days_until_expiry &lt; 30:
        print(f"⚠ Certificate expires soon ({days_until_expiry} days)")
    else:
        print(f"✓ Certificate valid ({days_until_expiry} days remaining)")

    # Subject Alternative Names
    try:
        san_ext = cert.extensions.get_extension_for_oid(
            x509.oid.ExtensionOID.SUBJECT_ALTERNATIVE_NAME
        )
        print(f"SANs: {', '.join([dns.value for dns in san_ext.value])}")
    except x509.ExtensionNotFound:
        print("No SANs found")

    return cert

# Usage
cert = inspect_certificate('cert.pem')
</code></pre>
<h3 id="certificate-monitoring"><a class="header" href="#certificate-monitoring">Certificate Monitoring</a></h3>
<pre><code class="language-python">import ssl
import socket
from datetime import datetime

def check_certificate_expiry(hostname, port=443):
    """Check SSL certificate expiration"""
    context = ssl.create_default_context()

    with socket.create_connection((hostname, port)) as sock:
        with context.wrap_socket(sock, server_hostname=hostname) as ssock:
            cert = ssock.getpeercert()

            # Parse expiration date
            expires = datetime.strptime(
                cert['notAfter'],
                '%b %d %H:%M:%S %Y %GMT'
            )

            days_remaining = (expires - datetime.now()).days

            print(f"Certificate for {hostname}:")
            print(f"  Subject: {dict(x[0] for x in cert['subject'])['commonName']}")
            print(f"  Issuer: {dict(x[0] for x in cert['issuer'])['commonName']}")
            print(f"  Expires: {expires}")
            print(f"  Days remaining: {days_remaining}")

            if days_remaining &lt; 0:
                print("  ⚠ EXPIRED!")
            elif days_remaining &lt; 30:
                print("  ⚠ Expiring soon!")
            else:
                print("  ✓ Valid")

            return days_remaining

# Check multiple sites
sites = ['google.com', 'github.com', 'example.com']
for site in sites:
    try:
        check_certificate_expiry(site)
        print()
    except Exception as e:
        print(f"Error checking {site}: {e}\n")
</code></pre>
<h3 id="certificate-renewal-strategy"><a class="header" href="#certificate-renewal-strategy">Certificate Renewal Strategy</a></h3>
<pre><code class="language-bash">#!/bin/bash
# certificate-renewal.sh

# Check certificate expiration
check_expiry() {
    local domain=$1
    local days_until_expiry=$(echo | openssl s_client -connect $domain:443 2&gt;/dev/null | \
        openssl x509 -noout -checkend 2592000)  # 30 days

    if [ $? -eq 0 ]; then
        echo "$domain: Certificate valid for at least 30 days"
        return 0
    else
        echo "$domain: Certificate expires within 30 days!"
        return 1
    fi
}

# Renew if needed
renew_certificate() {
    local domain=$1

    if ! check_expiry $domain; then
        echo "Renewing certificate for $domain..."
        certbot renew --cert-name $domain

        if [ $? -eq 0 ]; then
            echo "Certificate renewed successfully"
            systemctl reload nginx
        else
            echo "Certificate renewal failed!"
            # Send alert
        fi
    fi
}

# Check all domains
for domain in example.com api.example.com www.example.com; do
    renew_certificate $domain
done
</code></pre>
<h2 id="certificate-revocation"><a class="header" href="#certificate-revocation">Certificate Revocation</a></h2>
<h3 id="certificate-revocation-lists-crl"><a class="header" href="#certificate-revocation-lists-crl">Certificate Revocation Lists (CRL)</a></h3>
<pre><code class="language-bash"># Download CRL
wget http://crl.example.com/example.crl

# View CRL
openssl crl -in example.crl -text -noout

# Check if certificate is revoked
openssl verify -crl_check -CRLfile example.crl -CAfile ca.crt cert.pem
</code></pre>
<h3 id="online-certificate-status-protocol-ocsp"><a class="header" href="#online-certificate-status-protocol-ocsp">Online Certificate Status Protocol (OCSP)</a></h3>
<pre><code class="language-bash"># Get OCSP responder URL from certificate
openssl x509 -in cert.pem -noout -ocsp_uri

# Check certificate status via OCSP
openssl ocsp -issuer ca.crt -cert cert.pem \
  -url http://ocsp.example.com \
  -resp_text

# OCSP stapling check
openssl s_client -connect example.com:443 -status
</code></pre>
<h3 id="revoking-certificate"><a class="header" href="#revoking-certificate">Revoking Certificate</a></h3>
<pre><code class="language-bash"># Revoke with certbot
sudo certbot revoke --cert-path /etc/letsencrypt/live/example.com/cert.pem

# Revoke with reason
sudo certbot revoke --cert-path cert.pem --reason keycompromise

# Revoke with custom CA
openssl ca -config ca.conf -revoke cert.pem -keyfile ca.key -cert ca.crt

# Generate CRL
openssl ca -config ca.conf -gencrl -out crl.pem
</code></pre>
<h2 id="security-considerations-3"><a class="header" href="#security-considerations-3">Security Considerations</a></h2>
<h3 id="1-key-size-1"><a class="header" href="#1-key-size-1">1. Key Size</a></h3>
<pre><code>RSA:
  Minimum: 2048 bits
  Recommended: 3072-4096 bits

ECDSA:
  Recommended: P-256 (256-bit)
  High security: P-384 (384-bit)

Ed25519:
  Fixed: 256-bit (recommended for new deployments)
</code></pre>
<h3 id="2-certificate-validity-period"><a class="header" href="#2-certificate-validity-period">2. Certificate Validity Period</a></h3>
<pre><code>Modern best practices:
- Maximum: 398 days (13 months) - enforced by browsers
- Recommended: 90 days (Let's Encrypt default)
- Automated renewal: Essential for short validity

Historical:
- Before 2020: Up to 2-3 years
- 2020: 398 days maximum
- Trend: Shorter validity periods
</code></pre>
<h3 id="3-subject-alternative-names-sans"><a class="header" href="#3-subject-alternative-names-sans">3. Subject Alternative Names (SANs)</a></h3>
<pre><code class="language-bash"># Include all domain variants
subjectAltName = DNS:example.com,DNS:www.example.com,DNS:*.example.com

# Don't rely on Common Name (CN) - deprecated
# Always use SANs
</code></pre>
<h3 id="4-certificate-pinning"><a class="header" href="#4-certificate-pinning">4. Certificate Pinning</a></h3>
<pre><code class="language-python">import ssl
import hashlib
import socket

def verify_certificate_pinning(hostname, expected_fingerprints):
    """Verify certificate matches expected fingerprint"""
    context = ssl.create_default_context()

    with socket.create_connection((hostname, 443)) as sock:
        with context.wrap_socket(sock, server_hostname=hostname) as ssock:
            cert_der = ssock.getpeercert(binary_form=True)
            fingerprint = hashlib.sha256(cert_der).hexdigest()

            if fingerprint in expected_fingerprints:
                print(f"✓ Certificate pinning verified")
                return True
            else:
                print(f"✗ Certificate pinning failed!")
                print(f"  Expected: {expected_fingerprints}")
                print(f"  Got: {fingerprint}")
                return False

# Usage
expected_pins = [
    'a1b2c3d4e5f6...',  # Primary certificate
    '9a8b7c6d5e4f...',  # Backup certificate
]

verify_certificate_pinning('example.com', expected_pins)
</code></pre>
<h2 id="best-practices-14"><a class="header" href="#best-practices-14">Best Practices</a></h2>
<h3 id="1-automate-certificate-management"><a class="header" href="#1-automate-certificate-management">1. Automate Certificate Management</a></h3>
<pre><code>✓ Use Let's Encrypt for free certificates
✓ Automate renewal (certbot, acme.sh)
✓ Monitor expiration dates
✓ Test renewal process regularly
✓ Use short validity periods (90 days)
</code></pre>
<h3 id="2-secure-private-keys"><a class="header" href="#2-secure-private-keys">2. Secure Private Keys</a></h3>
<pre><code class="language-bash"># Restrict permissions
chmod 600 private.key

# Use hardware security modules (HSM) for critical keys
# Use encrypted private keys
openssl rsa -aes256 -in private.key -out private_encrypted.key

# Never commit to version control
echo "*.key" &gt;&gt; .gitignore
echo "*.pem" &gt;&gt; .gitignore
</code></pre>
<h3 id="3-use-strong-cryptography"><a class="header" href="#3-use-strong-cryptography">3. Use Strong Cryptography</a></h3>
<pre><code>✓ RSA 2048-bit minimum (prefer 3072+)
✓ ECDSA P-256 or better
✓ SHA-256 or SHA-512 for signatures
✗ Avoid MD5, SHA-1
✗ Avoid RSA &lt;2048 bits
</code></pre>
<h3 id="4-implement-certificate-transparency"><a class="header" href="#4-implement-certificate-transparency">4. Implement Certificate Transparency</a></h3>
<pre><code class="language-bash"># Check if certificate is in CT logs
curl https://crt.sh/?q=example.com

# Monitor for unauthorized certificates
# Use tools like certstream, certificate-transparency-go
</code></pre>
<h2 id="common-mistakes-2"><a class="header" href="#common-mistakes-2">Common Mistakes</a></h2>
<h3 id="1-expired-certificates"><a class="header" href="#1-expired-certificates">1. Expired Certificates</a></h3>
<pre><code>Problem: Certificate expires unexpectedly
Solution: Automate monitoring and renewal
</code></pre>
<h3 id="2-missing-intermediate-certificates"><a class="header" href="#2-missing-intermediate-certificates">2. Missing Intermediate Certificates</a></h3>
<pre><code>Problem: Browser shows untrusted certificate
Solution: Include full chain (server + intermediate certs)

# Correct chain order
cat server.crt intermediate.crt &gt; fullchain.pem
</code></pre>
<h3 id="3-certificate-name-mismatch"><a class="header" href="#3-certificate-name-mismatch">3. Certificate Name Mismatch</a></h3>
<pre><code>Problem: Certificate for wrong domain
Solution: Use proper SANs

# Include all domains
subjectAltName = DNS:example.com,DNS:www.example.com
</code></pre>
<h3 id="4-insecure-private-key"><a class="header" href="#4-insecure-private-key">4. Insecure Private Key</a></h3>
<pre><code>Problem: Private key readable by all users
Solution: Restrict permissions

chmod 600 private.key
chown root:root private.key
</code></pre>
<h2 id="eli10-10"><a class="header" href="#eli10-10">ELI10</a></h2>
<p>Certificates are like ID cards for websites:</p>
<p><strong>Without certificates:</strong></p>
<ul>
<li>You visit "bank.com"</li>
<li>How do you know it's really your bank?</li>
<li>Attackers could pretend to be your bank!</li>
</ul>
<p><strong>With certificates:</strong></p>
<ol>
<li>
<p><strong>Website has ID card</strong> (certificate)</p>
<ul>
<li>Says: "I'm bank.com"</li>
<li>Has a special seal (signature)</li>
</ul>
</li>
<li>
<p><strong>Trusted Authority</strong> (CA like Let's Encrypt)</p>
<ul>
<li>Like a government issuing passports</li>
<li>Checks: "Yes, you really own bank.com"</li>
<li>Adds their official seal</li>
</ul>
</li>
<li>
<p><strong>Your browser checks</strong>:</p>
<ul>
<li>Is the ID card real? ✓</li>
<li>Is it expired? ✓</li>
<li>Does it match the website name? ✓</li>
<li>Is the seal from a trusted authority? ✓</li>
</ul>
</li>
<li>
<p><strong>Chain of Trust</strong>:</p>
<pre><code>Browser trusts → Root CA
Root CA trusts → Intermediate CA
Intermediate CA trusts → Website Certificate
Therefore, Browser trusts → Website!
</code></pre>
</li>
</ol>
<p><strong>Let's Encrypt made it:</strong></p>
<ul>
<li>Free (used to cost $$$)</li>
<li>Automatic (renews itself)</li>
<li>Easy (simple commands)</li>
</ul>
<p><strong>Real-world analogy:</strong></p>
<ul>
<li>Certificate = Passport</li>
<li>CA = Government passport office</li>
<li>Browser = Border control checking passports</li>
<li>Expiration date = Passport validity</li>
<li>Renewal = Getting new passport before expiry</li>
</ul>
<h2 id="further-resources-10"><a class="header" href="#further-resources-10">Further Resources</a></h2>
<ul>
<li><a href="https://letsencrypt.org/docs/">Let's Encrypt Documentation</a></li>
<li><a href="https://tools.ietf.org/html/rfc5280">X.509 Certificate Format (RFC 5280)</a></li>
<li><a href="https://tools.ietf.org/html/rfc8555">ACME Protocol (RFC 8555)</a></li>
<li><a href="https://certificate.transparency.dev/">Certificate Transparency</a></li>
<li><a href="https://www.ssllabs.com/ssltest/">SSL Labs Server Test</a></li>
<li><a href="https://certbot.eff.org/docs/">Certbot Documentation</a></li>
<li><a href="https://www.feistyduck.com/library/openssl-cookbook/">OpenSSL Cookbook</a></li>
<li><a href="https://en.wikipedia.org/wiki/Public_key_infrastructure">Public Key Infrastructure (PKI) Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ssltls-secure-sockets-layer--transport-layer-security"><a class="header" href="#ssltls-secure-sockets-layer--transport-layer-security">SSL/TLS (Secure Sockets Layer / Transport Layer Security)</a></h1>
<h2 id="overview-25"><a class="header" href="#overview-25">Overview</a></h2>
<p>TLS (Transport Layer Security) is a cryptographic protocol that provides secure communication over networks. SSL is the predecessor to TLS (now deprecated).</p>
<p><strong>Key Features:</strong></p>
<ul>
<li><strong>Confidentiality</strong>: Encryption prevents eavesdropping</li>
<li><strong>Integrity</strong>: Detects message tampering</li>
<li><strong>Authentication</strong>: Verifies server (and optionally client) identity</li>
</ul>
<h2 id="ssltls-history"><a class="header" href="#ssltls-history">SSL/TLS History</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Year</th><th>Status</th><th>Notes</th></tr></thead><tbody>
<tr><td><strong>SSL 1.0</strong></td><td>-</td><td>Never released</td><td>Internal Netscape protocol</td></tr>
<tr><td><strong>SSL 2.0</strong></td><td>1995</td><td>Deprecated</td><td>Serious security flaws</td></tr>
<tr><td><strong>SSL 3.0</strong></td><td>1996</td><td>Deprecated</td><td>POODLE attack (2014)</td></tr>
<tr><td><strong>TLS 1.0</strong></td><td>1999</td><td>Deprecated</td><td>Similar to SSL 3.0</td></tr>
<tr><td><strong>TLS 1.1</strong></td><td>2006</td><td>Deprecated</td><td>Minor improvements</td></tr>
<tr><td><strong>TLS 1.2</strong></td><td>2008</td><td>Secure</td><td>Currently widely used</td></tr>
<tr><td><strong>TLS 1.3</strong></td><td>2018</td><td>Secure</td><td>Modern, fastest, most secure</td></tr>
</tbody></table>
</div>
<h2 id="tls-handshake-tls-12"><a class="header" href="#tls-handshake-tls-12">TLS Handshake (TLS 1.2)</a></h2>
<h3 id="full-handshake-process"><a class="header" href="#full-handshake-process">Full Handshake Process</a></h3>
<pre><code>Client                                Server

1. ClientHello              --------&gt;
   - TLS version
   - Cipher suites
   - Random bytes
   - Extensions

                            &lt;--------  2. ServerHello
                                          - Chosen cipher suite
                                          - Random bytes
                                          - Session ID
                                       
                                       3. Certificate
                                          - Server certificate chain
                                       
                                       4. ServerKeyExchange
                                          - Key exchange parameters
                                       
                                       5. ServerHelloDone

6. ClientKeyExchange        --------&gt;
   - Pre-master secret (encrypted)

7. ChangeCipherSpec         --------&gt;
   - Switch to encrypted communication

8. Finished                 --------&gt;
   - Verification message (encrypted)

                            &lt;--------  9. ChangeCipherSpec

                            &lt;--------  10. Finished

11. Encrypted Application Data &lt;---&gt; Encrypted Application Data
</code></pre>
<h3 id="detailed-steps"><a class="header" href="#detailed-steps">Detailed Steps</a></h3>
<h4 id="1-clienthello"><a class="header" href="#1-clienthello">1. ClientHello</a></h4>
<pre><code>Client → Server:

TLS Version: 1.2
Cipher Suites:
  - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
  - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
  - TLS_RSA_WITH_AES_128_CBC_SHA256
Random: [28 bytes client random]
Session ID: [empty for new session]
Extensions:
  - server_name: example.com
  - supported_groups: P-256, P-384
  - signature_algorithms: RSA-PSS-SHA256, ECDSA-SHA256
</code></pre>
<h4 id="2-serverhello"><a class="header" href="#2-serverhello">2. ServerHello</a></h4>
<pre><code>Server → Client:

TLS Version: 1.2
Cipher Suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
Random: [28 bytes server random]
Session ID: [32 bytes for session resumption]
Extensions:
  - renegotiation_info
  - extended_master_secret
</code></pre>
<h4 id="3-certificate"><a class="header" href="#3-certificate">3. Certificate</a></h4>
<pre><code>Server → Client:

Certificate Chain:
  1. Server certificate (example.com)
  2. Intermediate CA certificate
  [Root CA not sent - client has it]
</code></pre>
<h4 id="4-serverkeyexchange-for-ecdhe"><a class="header" href="#4-serverkeyexchange-for-ecdhe">4. ServerKeyExchange (for ECDHE)</a></h4>
<pre><code>Server → Client:

Curve: P-256
Public Key: [server's ephemeral ECDH public key]
Signature: [signed with server's private key]
</code></pre>
<h4 id="5-clientkeyexchange"><a class="header" href="#5-clientkeyexchange">5. ClientKeyExchange</a></h4>
<pre><code>Client → Server:

Pre-master Secret:
  [Encrypted with server's public key (RSA) OR
   Client's ephemeral ECDH public key (ECDHE)]
</code></pre>
<h4 id="6-master-secret-derivation"><a class="header" href="#6-master-secret-derivation">6. Master Secret Derivation</a></h4>
<pre><code>Both compute:

Master Secret = PRF(
  pre-master secret,
  "master secret",
  ClientHello.random + ServerHello.random
)

Then derive:
  - Client write MAC key
  - Server write MAC key
  - Client write encryption key
  - Server write encryption key
  - Client write IV
  - Server write IV
</code></pre>
<h3 id="visual-tls-12-handshake"><a class="header" href="#visual-tls-12-handshake">Visual TLS 1.2 Handshake</a></h3>
<pre><code>┌────────┐                           ┌────────┐
│ Client │                           │ Server │
└───┬────┘                           └───┬────┘
    │                                    │
    │ ClientHello                        │
    │ (ciphers, random, SNI)             │
    ├───────────────────────────────────&gt;│
    │                                    │
    │                   ServerHello      │
    │              (chosen cipher, random)│
    │&lt;───────────────────────────────────┤
    │                                    │
    │                 Certificate        │
    │         (server cert chain)        │
    │&lt;───────────────────────────────────┤
    │                                    │
    │            ServerKeyExchange       │
    │        (DH params, signature)      │
    │&lt;───────────────────────────────────┤
    │                                    │
    │            ServerHelloDone         │
    │&lt;───────────────────────────────────┤
    │                                    │
    │ ClientKeyExchange                  │
    │ (pre-master secret)                │
    ├───────────────────────────────────&gt;│
    │                                    │
    │ ChangeCipherSpec                   │
    ├───────────────────────────────────&gt;│
    │                                    │
    │ Finished (encrypted)               │
    ├───────────────────────────────────&gt;│
    │                                    │
    │            ChangeCipherSpec        │
    │&lt;───────────────────────────────────┤
    │                                    │
    │         Finished (encrypted)       │
    │&lt;───────────────────────────────────┤
    │                                    │
    │ Application Data (encrypted)       │
    │&lt;──────────────────────────────────&gt;│
    │                                    │
</code></pre>
<h2 id="tls-13-handshake"><a class="header" href="#tls-13-handshake">TLS 1.3 Handshake</a></h2>
<p>TLS 1.3 is <strong>faster</strong> - only 1 round-trip (vs 2 in TLS 1.2):</p>
<pre><code>Client                                Server

1. ClientHello              --------&gt;
   - Key share (DH)
   - Supported versions
   - Cipher suites

                            &lt;--------  2. ServerHello
                                          - Key share (DH)
                                          - Chosen cipher
                                       
                                       {Certificate}*
                                       {CertificateVerify}*
                                       {Finished}
                                       [Application Data]

{Finished}                  --------&gt;

[Application Data]          &lt;-------&gt;  [Application Data]

* Encrypted with handshake traffic keys
[] Encrypted with application traffic keys
</code></pre>
<h3 id="key-differences-tls-13-vs-12"><a class="header" href="#key-differences-tls-13-vs-12">Key Differences TLS 1.3 vs 1.2</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>TLS 1.2</th><th>TLS 1.3</th></tr></thead><tbody>
<tr><td><strong>Round trips</strong></td><td>2-RTT</td><td>1-RTT</td></tr>
<tr><td><strong>0-RTT mode</strong></td><td>No</td><td>Yes (with risks)</td></tr>
<tr><td><strong>Cipher suites</strong></td><td>Many (weak ones)</td><td>Only 5 strong ones</td></tr>
<tr><td><strong>Key exchange</strong></td><td>RSA, DHE, ECDHE</td><td>Only (EC)DHE</td></tr>
<tr><td><strong>Encryption</strong></td><td>After handshake</td><td>Most of handshake encrypted</td></tr>
<tr><td><strong>Performance</strong></td><td>Slower</td><td>Faster</td></tr>
<tr><td><strong>Security</strong></td><td>Vulnerable configs</td><td>Secure by default</td></tr>
</tbody></table>
</div>
<h3 id="tls-13-improvements"><a class="header" href="#tls-13-improvements">TLS 1.3 Improvements</a></h3>
<ol>
<li><strong>Faster handshake</strong> (1-RTT instead of 2-RTT)</li>
<li><strong>0-RTT mode</strong> (resume with no round trips)</li>
<li><strong>Removed weak crypto</strong> (RC4, MD5, SHA-1, RSA key exchange)</li>
<li><strong>Forward secrecy</strong> (mandatory ECDHE)</li>
<li><strong>Encrypted handshake</strong> (server certificate encrypted)</li>
<li><strong>Simplified cipher suites</strong></li>
</ol>
<h2 id="cipher-suites"><a class="header" href="#cipher-suites">Cipher Suites</a></h2>
<h3 id="cipher-suite-format-tls-12"><a class="header" href="#cipher-suite-format-tls-12">Cipher Suite Format (TLS 1.2)</a></h3>
<pre><code>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
|   |     |   |    |       |   |
|   |     |   |    |       |   +-- MAC algorithm (SHA-256)
|   |     |   |    |       +------ AEAD mode (GCM)
|   |     |   |    +-------------- Encryption (AES-128)
|   |     |   +------------------- "WITH"
|   |     +----------------------- Authentication (RSA)
|   +----------------------------- Key exchange (ECDHE)
+--------------------------------- Protocol (TLS)
</code></pre>
<h3 id="common-cipher-suites-tls-12"><a class="header" href="#common-cipher-suites-tls-12">Common Cipher Suites (TLS 1.2)</a></h3>
<h4 id="strong--recommended"><a class="header" href="#strong--recommended">Strong &amp; Recommended</a></h4>
<pre><code>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
</code></pre>
<h4 id="weak-avoid"><a class="header" href="#weak-avoid">Weak (Avoid)</a></h4>
<pre><code>TLS_RSA_WITH_RC4_128_SHA                    # RC4 broken
TLS_RSA_WITH_3DES_EDE_CBC_SHA               # 3DES weak
TLS_RSA_WITH_AES_128_CBC_SHA                # CBC mode, no forward secrecy
TLS_DHE_RSA_WITH_AES_128_CBC_SHA256         # CBC mode
</code></pre>
<h3 id="cipher-suite-components"><a class="header" href="#cipher-suite-components">Cipher Suite Components</a></h3>
<h4 id="1-key-exchange"><a class="header" href="#1-key-exchange">1. Key Exchange</a></h4>
<pre><code>RSA:     No forward secrecy (deprecated)
DHE:     Diffie-Hellman Ephemeral (slow)
ECDHE:   Elliptic Curve DHE (fast, forward secrecy) ✓
</code></pre>
<h4 id="2-authentication"><a class="header" href="#2-authentication">2. Authentication</a></h4>
<pre><code>RSA:     RSA certificate
ECDSA:   Elliptic Curve certificate (smaller, faster)
DSA:     Digital Signature Algorithm (obsolete)
</code></pre>
<h4 id="3-encryption"><a class="header" href="#3-encryption">3. Encryption</a></h4>
<pre><code>AES-128-GCM:      Fast, secure, hardware accelerated ✓
AES-256-GCM:      Higher security ✓
ChaCha20-Poly1305: Fast on mobile (no AES hardware) ✓
AES-CBC:          Vulnerable to padding oracles (avoid)
3DES:             Obsolete (avoid)
RC4:              Broken (never use)
</code></pre>
<h4 id="4-mac-message-authentication-code"><a class="header" href="#4-mac-message-authentication-code">4. MAC (Message Authentication Code)</a></h4>
<pre><code>SHA-256:  Secure ✓
SHA-384:  Secure ✓
SHA-1:    Weak (avoid)
MD5:      Broken (never use)

Note: AEAD modes (GCM, ChaCha20-Poly1305) don't need separate MAC
</code></pre>
<h3 id="tls-13-cipher-suites-simplified"><a class="header" href="#tls-13-cipher-suites-simplified">TLS 1.3 Cipher Suites (Simplified)</a></h3>
<pre><code>TLS_AES_128_GCM_SHA256
TLS_AES_256_GCM_SHA384
TLS_CHACHA20_POLY1305_SHA256
TLS_AES_128_CCM_SHA256
TLS_AES_128_CCM_8_SHA256
</code></pre>
<p>Only 5 cipher suites! Key exchange and auth determined separately.</p>
<h2 id="configuring-tls"><a class="header" href="#configuring-tls">Configuring TLS</a></h2>
<h3 id="nginx-configuration"><a class="header" href="#nginx-configuration">Nginx Configuration</a></h3>
<pre><code class="language-nginx">server {
    listen 443 ssl http2;
    server_name example.com;

    # Certificates
    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;

    # TLS versions
    ssl_protocols TLSv1.2 TLSv1.3;

    # Cipher suites (TLS 1.2)
    ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305';
    ssl_prefer_server_ciphers on;

    # DH parameters (for DHE cipher suites)
    ssl_dhparam /etc/nginx/dhparam.pem;

    # OCSP Stapling
    ssl_stapling on;
    ssl_stapling_verify on;
    ssl_trusted_certificate /etc/letsencrypt/live/example.com/chain.pem;

    # Session tickets
    ssl_session_timeout 1d;
    ssl_session_cache shared:SSL:50m;
    ssl_session_tickets off;

    # HSTS (HTTP Strict Transport Security)
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;

    location / {
        root /var/www/html;
    }
}

# Redirect HTTP to HTTPS
server {
    listen 80;
    server_name example.com;
    return 301 https://$server_name$request_uri;
}
</code></pre>
<h3 id="apache-configuration"><a class="header" href="#apache-configuration">Apache Configuration</a></h3>
<pre><code class="language-apache">&lt;VirtualHost *:443&gt;
    ServerName example.com
    
    # Certificates
    SSLCertificateFile /etc/letsencrypt/live/example.com/cert.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/example.com/privkey.pem
    SSLCertificateChainFile /etc/letsencrypt/live/example.com/chain.pem
    
    # TLS versions
    SSLProtocol -all +TLSv1.2 +TLSv1.3
    
    # Cipher suites
    SSLCipherSuite ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305
    SSLHonorCipherOrder on
    
    # OCSP Stapling
    SSLUseStapling on
    SSLStaplingCache "shmcb:logs/ssl_stapling(32768)"
    
    # HSTS
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    
    DocumentRoot /var/www/html
&lt;/VirtualHost&gt;

# Redirect HTTP to HTTPS
&lt;VirtualHost *:80&gt;
    ServerName example.com
    Redirect permanent / https://example.com/
&lt;/VirtualHost&gt;
</code></pre>
<h3 id="python-https-server"><a class="header" href="#python-https-server">Python HTTPS Server</a></h3>
<pre><code class="language-python">import http.server
import ssl

# Simple HTTPS server
server_address = ('0.0.0.0', 4443)
httpd = http.server.HTTPServer(server_address, http.server.SimpleHTTPRequestHandler)

# Create SSL context
context = ssl.SSLContext(ssl.PROTOCOL_TLS_SERVER)
context.load_cert_chain('cert.pem', 'key.pem')

# Optional: Configure cipher suites
context.set_ciphers('ECDHE+AESGCM:ECDHE+CHACHA20:DHE+AESGCM:DHE+CHACHA20:!aNULL:!MD5:!DSS')

# Wrap socket with TLS
httpd.socket = context.wrap_socket(httpd.socket, server_side=True)

print("Server running on https://localhost:4443")
httpd.serve_forever()
</code></pre>
<h3 id="python-client-with-tls"><a class="header" href="#python-client-with-tls">Python Client with TLS</a></h3>
<pre><code class="language-python">import ssl
import socket

def https_request(hostname, path='/'):
    # Create SSL context
    context = ssl.create_default_context()
    
    # Optional: Verify certificate
    # context.check_hostname = True
    # context.verify_mode = ssl.CERT_REQUIRED
    
    # Optional: Pin certificate
    # context.load_verify_locations('ca-bundle.crt')
    
    # Connect
    with socket.create_connection((hostname, 443)) as sock:
        with context.wrap_socket(sock, server_hostname=hostname) as ssock:
            # Send HTTP request
            request = f"GET {path} HTTP/1.1\r\nHost: {hostname}\r\nConnection: close\r\n\r\n"
            ssock.send(request.encode())
            
            # Receive response
            response = b''
            while True:
                data = ssock.recv(4096)
                if not data:
                    break
                response += data
            
            return response.decode()

# Usage
response = https_request('example.com', '/')
print(response)
</code></pre>
<h3 id="using-python-requests-library"><a class="header" href="#using-python-requests-library">Using Python Requests Library</a></h3>
<pre><code class="language-python">import requests

# Basic HTTPS request (verifies certificates by default)
response = requests.get('https://example.com')

# Disable certificate verification (not recommended!)
response = requests.get('https://example.com', verify=False)

# Use custom CA bundle
response = requests.get('https://example.com', verify='/path/to/ca-bundle.crt')

# Client certificate authentication
response = requests.get('https://example.com', 
                       cert=('client.crt', 'client.key'))

# Specify TLS version
import ssl
from requests.adapters import HTTPAdapter
from urllib3.util.ssl_ import create_urllib3_context

class TLSAdapter(HTTPAdapter):
    def init_poolmanager(self, *args, **kwargs):
        ctx = create_urllib3_context()
        ctx.minimum_version = ssl.TLSVersion.TLSv1_2
        ctx.maximum_version = ssl.TLSVersion.TLSv1_3
        kwargs['ssl_context'] = ctx
        return super().init_poolmanager(*args, **kwargs)

session = requests.Session()
session.mount('https://', TLSAdapter())
response = session.get('https://example.com')
</code></pre>
<h2 id="testing-tls-configuration"><a class="header" href="#testing-tls-configuration">Testing TLS Configuration</a></h2>
<h3 id="openssl-command-line-tests"><a class="header" href="#openssl-command-line-tests">OpenSSL Command-Line Tests</a></h3>
<pre><code class="language-bash"># Connect to server and show TLS info
openssl s_client -connect example.com:443 -servername example.com

# Test specific TLS version
openssl s_client -connect example.com:443 -tls1_2
openssl s_client -connect example.com:443 -tls1_3

# Test if old protocols are disabled
openssl s_client -connect example.com:443 -ssl3  # Should fail
openssl s_client -connect example.com:443 -tls1  # Should fail
openssl s_client -connect example.com:443 -tls1_1  # Should fail

# Test specific cipher suite
openssl s_client -connect example.com:443 -cipher 'ECDHE-RSA-AES128-GCM-SHA256'

# Show certificate chain
openssl s_client -connect example.com:443 -showcerts

# Check OCSP stapling
openssl s_client -connect example.com:443 -status

# Check certificate expiration
echo | openssl s_client -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates

# Full connection info
openssl s_client -connect example.com:443 -servername example.com &lt;/dev/null | grep -E 'Protocol|Cipher'
</code></pre>
<h3 id="testing-tools"><a class="header" href="#testing-tools">Testing Tools</a></h3>
<h4 id="nmap"><a class="header" href="#nmap">nmap</a></h4>
<pre><code class="language-bash"># Scan TLS versions
nmap --script ssl-enum-ciphers -p 443 example.com

# Check for vulnerabilities
nmap --script ssl-* -p 443 example.com
</code></pre>
<h4 id="testsslsh"><a class="header" href="#testsslsh">testssl.sh</a></h4>
<pre><code class="language-bash"># Install
git clone https://github.com/drwetter/testssl.sh.git
cd testssl.sh

# Run comprehensive test
./testssl.sh https://example.com

# Test specific features
./testssl.sh --protocols https://example.com
./testssl.sh --ciphers https://example.com
./testssl.sh --vulnerabilities https://example.com
</code></pre>
<h4 id="ssl-labs"><a class="header" href="#ssl-labs">SSL Labs</a></h4>
<pre><code class="language-bash"># Online tool (web interface)
# https://www.ssllabs.com/ssltest/

# API
curl "https://api.ssllabs.com/api/v3/analyze?host=example.com"
</code></pre>
<h3 id="python-tls-testing"><a class="header" href="#python-tls-testing">Python TLS Testing</a></h3>
<pre><code class="language-python">import ssl
import socket

def test_tls_version(hostname, port=443):
    """Test TLS versions supported by server"""
    versions = {
        'TLS 1.0': ssl.PROTOCOL_TLSv1,
        'TLS 1.1': ssl.PROTOCOL_TLSv1_1,
        'TLS 1.2': ssl.PROTOCOL_TLSv1_2,
        'TLS 1.3': ssl.PROTOCOL_TLS,  # Tries highest available
    }
    
    for version_name, protocol in versions.items():
        try:
            context = ssl.SSLContext(protocol)
            with socket.create_connection((hostname, port), timeout=5) as sock:
                with context.wrap_socket(sock, server_hostname=hostname) as ssock:
                    print(f"✓ {version_name}: Supported (cipher: {ssock.cipher()[0]})")
        except Exception as e:
            print(f"✗ {version_name}: Not supported")

def get_certificate_info(hostname, port=443):
    """Get server certificate information"""
    context = ssl.create_default_context()
    
    with socket.create_connection((hostname, port)) as sock:
        with context.wrap_socket(sock, server_hostname=hostname) as ssock:
            cert = ssock.getpeercert()
            
            print(f"Subject: {dict(x[0] for x in cert['subject'])}")
            print(f"Issuer: {dict(x[0] for x in cert['issuer'])}")
            print(f"Version: {cert['version']}")
            print(f"Serial: {cert['serialNumber']}")
            print(f"Not Before: {cert['notBefore']}")
            print(f"Not After: {cert['notAfter']}")
            print(f"SANs: {', '.join([x[1] for x in cert.get('subjectAltName', [])])}")
            print(f"TLS Version: {ssock.version()}")
            print(f"Cipher: {ssock.cipher()}")

# Usage
test_tls_version('example.com')
print()
get_certificate_info('example.com')
</code></pre>
<h2 id="common-tls-vulnerabilities"><a class="header" href="#common-tls-vulnerabilities">Common TLS Vulnerabilities</a></h2>
<h3 id="1-poodle-padding-oracle-on-downgraded-legacy-encryption"><a class="header" href="#1-poodle-padding-oracle-on-downgraded-legacy-encryption">1. POODLE (Padding Oracle On Downgraded Legacy Encryption)</a></h3>
<p><strong>Attack</strong>: Forces downgrade to SSL 3.0, exploits CBC padding</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-nginx"># Disable SSL 3.0
ssl_protocols TLSv1.2 TLSv1.3;
</code></pre>
<h3 id="2-beast-browser-exploit-against-ssltls"><a class="header" href="#2-beast-browser-exploit-against-ssltls">2. BEAST (Browser Exploit Against SSL/TLS)</a></h3>
<p><strong>Attack</strong>: Exploits CBC mode in TLS 1.0</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-nginx"># Disable TLS 1.0, use modern cipher suites
ssl_protocols TLSv1.2 TLSv1.3;
ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:...';
</code></pre>
<h3 id="3-crime-compression-ratio-info-leak-made-easy"><a class="header" href="#3-crime-compression-ratio-info-leak-made-easy">3. CRIME (Compression Ratio Info-leak Made Easy)</a></h3>
<p><strong>Attack</strong>: Exploits TLS compression</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-nginx"># Disable TLS compression (usually disabled by default)
ssl_compression off;
</code></pre>
<h3 id="4-heartbleed"><a class="header" href="#4-heartbleed">4. Heartbleed</a></h3>
<p><strong>Attack</strong>: Buffer over-read in OpenSSL heartbeat extension</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-bash"># Update OpenSSL
sudo apt-get update
sudo apt-get upgrade openssl

# Check version (must be &gt; 1.0.1g)
openssl version
</code></pre>
<h3 id="5-logjam"><a class="header" href="#5-logjam">5. Logjam</a></h3>
<p><strong>Attack</strong>: Weakness in DHE key exchange with small primes</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-bash"># Generate strong DH parameters
openssl dhparam -out /etc/nginx/dhparam.pem 2048

# Configure nginx
ssl_dhparam /etc/nginx/dhparam.pem;
</code></pre>
<h3 id="6-freak-factoring-rsa-export-keys"><a class="header" href="#6-freak-factoring-rsa-export-keys">6. FREAK (Factoring RSA Export Keys)</a></h3>
<p><strong>Attack</strong>: Forces use of weak export-grade encryption</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-nginx"># Disable export ciphers
ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:...';  # No EXPORT
</code></pre>
<h3 id="7-drown-decrypting-rsa-with-obsolete-and-weakened-encryption"><a class="header" href="#7-drown-decrypting-rsa-with-obsolete-and-weakened-encryption">7. DROWN (Decrypting RSA with Obsolete and Weakened eNcryption)</a></h3>
<p><strong>Attack</strong>: Exploits SSLv2 to break TLS</p>
<p><strong>Mitigation</strong>:</p>
<pre><code class="language-bash"># Ensure SSLv2 is disabled everywhere
# Check with:
nmap --script ssl-enum-ciphers -p 443 example.com
</code></pre>
<h3 id="checking-for-vulnerabilities"><a class="header" href="#checking-for-vulnerabilities">Checking for Vulnerabilities</a></h3>
<pre><code class="language-bash"># Using testssl.sh
./testssl.sh --vulnerabilities https://example.com

# Using nmap
nmap --script ssl-heartbleed,ssl-poodle,ssl-dh-params -p 443 example.com
</code></pre>
<h2 id="best-practices-15"><a class="header" href="#best-practices-15">Best Practices</a></h2>
<h3 id="1-protocol-configuration"><a class="header" href="#1-protocol-configuration">1. Protocol Configuration</a></h3>
<pre><code class="language-nginx"># ✓ GOOD - Only modern protocols
ssl_protocols TLSv1.2 TLSv1.3;

# ✗ BAD - Includes old protocols
ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
</code></pre>
<h3 id="2-cipher-suite-selection"><a class="header" href="#2-cipher-suite-selection">2. Cipher Suite Selection</a></h3>
<pre><code class="language-nginx"># ✓ GOOD - Strong, forward-secret ciphers
ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-CHACHA20-POLY1305';

# ✗ BAD - Includes weak ciphers
ssl_ciphers 'ALL:!aNULL:!MD5';
</code></pre>
<h3 id="3-certificate-management"><a class="header" href="#3-certificate-management">3. Certificate Management</a></h3>
<pre><code class="language-bash"># ✓ Use certificates from trusted CA (Let's Encrypt)
# ✓ Automate renewal
# ✓ Monitor expiration
# ✓ Include full certificate chain
# ✗ Don't use self-signed in production
# ✗ Don't let certificates expire
</code></pre>
<h3 id="4-hsts-http-strict-transport-security"><a class="header" href="#4-hsts-http-strict-transport-security">4. HSTS (HTTP Strict Transport Security)</a></h3>
<pre><code class="language-nginx"># Enforce HTTPS for all subdomains
add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
</code></pre>
<h3 id="5-ocsp-stapling"><a class="header" href="#5-ocsp-stapling">5. OCSP Stapling</a></h3>
<pre><code class="language-nginx"># Enable OCSP stapling for faster certificate validation
ssl_stapling on;
ssl_stapling_verify on;
ssl_trusted_certificate /path/to/chain.pem;
</code></pre>
<h3 id="6-session-management"><a class="header" href="#6-session-management">6. Session Management</a></h3>
<pre><code class="language-nginx"># Session resumption (performance)
ssl_session_timeout 1d;
ssl_session_cache shared:SSL:50m;

# Disable session tickets (forward secrecy)
ssl_session_tickets off;
</code></pre>
<h3 id="7-perfect-forward-secrecy"><a class="header" href="#7-perfect-forward-secrecy">7. Perfect Forward Secrecy</a></h3>
<pre><code>Use ECDHE or DHE key exchange:
- ECDHE: Fast, modern
- DHE: Slower, but compatible

Avoid RSA key exchange (no forward secrecy)
</code></pre>
<h3 id="8-regular-updates"><a class="header" href="#8-regular-updates">8. Regular Updates</a></h3>
<pre><code class="language-bash"># Keep OpenSSL updated
sudo apt-get update
sudo apt-get upgrade openssl libssl-dev

# Keep web server updated
sudo apt-get upgrade nginx  # or apache2
</code></pre>
<h3 id="9-monitoring-and-testing"><a class="header" href="#9-monitoring-and-testing">9. Monitoring and Testing</a></h3>
<pre><code class="language-bash"># Regular security scans
./testssl.sh https://example.com

# Monitor certificate expiration
curl https://crt.sh/?q=example.com

# Check SSL Labs rating
curl "https://api.ssllabs.com/api/v3/analyze?host=example.com"
</code></pre>
<h2 id="security-checklist"><a class="header" href="#security-checklist">Security Checklist</a></h2>
<pre><code>Certificate:
  [✓] Valid and not expired
  [✓] From trusted CA
  [✓] Matches domain name
  [✓] Includes full chain
  [✓] Strong key (RSA 2048+ or ECDSA P-256+)

Protocol:
  [✓] TLS 1.2 minimum
  [✓] TLS 1.3 enabled
  [✓] SSL 3.0 disabled
  [✓] TLS 1.0/1.1 disabled

Cipher Suites:
  [✓] Only strong ciphers
  [✓] Forward secrecy (ECDHE)
  [✓] AEAD modes (GCM, ChaCha20-Poly1305)
  [✓] No weak ciphers (RC4, 3DES, etc.)

Headers:
  [✓] HSTS enabled
  [✓] Secure cookie flags

Features:
  [✓] OCSP stapling enabled
  [✓] Session tickets disabled
  [✓] HTTP → HTTPS redirect

Vulnerabilities:
  [✓] Not vulnerable to POODLE
  [✓] Not vulnerable to BEAST
  [✓] Not vulnerable to Heartbleed
  [✓] Not vulnerable to Logjam
  [✓] Not vulnerable to FREAK
  [✓] Not vulnerable to DROWN
</code></pre>
<h2 id="common-mistakes-3"><a class="header" href="#common-mistakes-3">Common Mistakes</a></h2>
<h3 id="1-mixed-content"><a class="header" href="#1-mixed-content">1. Mixed Content</a></h3>
<pre><code class="language-html">&lt;!-- BAD - Loading HTTP resource on HTTPS page --&gt;
&lt;script src="http://example.com/script.js"&gt;&lt;/script&gt;

&lt;!-- GOOD - Use HTTPS --&gt;
&lt;script src="https://example.com/script.js"&gt;&lt;/script&gt;

&lt;!-- BETTER - Protocol-relative URL --&gt;
&lt;script src="//example.com/script.js"&gt;&lt;/script&gt;
</code></pre>
<h3 id="2-weak-cipher-configuration"><a class="header" href="#2-weak-cipher-configuration">2. Weak Cipher Configuration</a></h3>
<pre><code class="language-nginx"># BAD - Allows weak ciphers
ssl_ciphers 'ALL:!aNULL:!MD5';

# GOOD - Only strong ciphers
ssl_ciphers 'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384';
</code></pre>
<h3 id="3-missing-certificate-chain"><a class="header" href="#3-missing-certificate-chain">3. Missing Certificate Chain</a></h3>
<pre><code class="language-nginx"># BAD - Only server certificate
ssl_certificate /path/to/cert.pem;

# GOOD - Full chain (server + intermediate)
ssl_certificate /path/to/fullchain.pem;
</code></pre>
<h3 id="4-expired-certificates"><a class="header" href="#4-expired-certificates">4. Expired Certificates</a></h3>
<pre><code class="language-bash"># Check expiration regularly
echo | openssl s_client -connect example.com:443 2&gt;/dev/null | openssl x509 -noout -dates

# Automate renewal
certbot renew
</code></pre>
<h3 id="5-not-redirecting-http-to-https"><a class="header" href="#5-not-redirecting-http-to-https">5. Not Redirecting HTTP to HTTPS</a></h3>
<pre><code class="language-nginx"># Missing HTTP → HTTPS redirect leaves users vulnerable

# GOOD - Redirect all HTTP to HTTPS
server {
    listen 80;
    server_name example.com;
    return 301 https://$server_name$request_uri;
}
</code></pre>
<h2 id="eli10-11"><a class="header" href="#eli10-11">ELI10</a></h2>
<p>TLS is like a secure tunnel for internet communication:</p>
<p><strong>Without TLS (HTTP):</strong></p>
<pre><code>You: "My password is abc123"
  ↓ (anyone can read this!)
Server: "OK, logged in"
</code></pre>
<p>Bad guys can see everything!</p>
<p><strong>With TLS (HTTPS):</strong></p>
<pre><code>Step 1: Build a secure tunnel
  You: "Let's talk securely!"
  Server: "Here's my ID card" (certificate)
  You: "OK, I trust you"
  Both: [Create secret code together]

Step 2: Talk through tunnel
  You: "xf9#k2@..." (encrypted password)
  ↓ (looks like gibberish to bad guys!)
  Server: "p8#nz..." (encrypted response)
</code></pre>
<p><strong>The Handshake (making friends):</strong></p>
<ol>
<li><strong>You</strong>: "Hi! I speak TLS 1.2 and TLS 1.3"</li>
<li><strong>Server</strong>: "Great! Let's use TLS 1.3. Here's my ID card"</li>
<li><strong>You</strong>: "ID looks good! Here's a secret number"</li>
<li><strong>Server</strong>: "Got it! Here's my secret number"</li>
<li><strong>Both</strong>: "Let's mix our secrets to make a key!"</li>
<li><strong>Both</strong>: "Tunnel ready! Let's talk!"</li>
</ol>
<p><strong>Why it's secure:</strong></p>
<ul>
<li><strong>Encryption</strong>: Messages look like random gibberish</li>
<li><strong>Authentication</strong>: Server proves it's really who it claims to be</li>
<li><strong>Integrity</strong>: Detect if someone changes messages</li>
</ul>
<p><strong>TLS 1.3 is better:</strong></p>
<ul>
<li>Faster (1 handshake step instead of 2)</li>
<li>More secure (removed old, weak options)</li>
<li>Simpler (fewer choices = fewer mistakes)</li>
</ul>
<p><strong>Real-world analogy:</strong></p>
<ul>
<li>HTTP = Postcard (anyone can read it)</li>
<li>HTTPS = Sealed letter with signature (secure and verified)</li>
</ul>
<h2 id="further-resources-11"><a class="header" href="#further-resources-11">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc8446">TLS 1.3 RFC 8446</a></li>
<li><a href="https://tools.ietf.org/html/rfc5246">TLS 1.2 RFC 5246</a></li>
<li><a href="https://ssl-config.mozilla.org/">Mozilla SSL Configuration Generator</a></li>
<li><a href="https://www.ssllabs.com/ssltest/">SSL Labs Server Test</a></li>
<li><a href="https://github.com/drwetter/testssl.sh">testssl.sh GitHub</a></li>
<li><a href="https://cheatsheetseries.owasp.org/cheatsheets/Transport_Layer_Protection_Cheat_Sheet.html">OWASP TLS Cheat Sheet</a></li>
<li><a href="https://hpbn.co/">High Performance Browser Networking (Book)</a></li>
<li><a href="https://tls.ulfheim.net/">TLS Illustrated</a></li>
<li><a href="https://blog.cloudflare.com/rfc-8446-aka-tls-1-3/">Cloudflare TLS 1.3 Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hmac-hash-based-message-authentication-code"><a class="header" href="#hmac-hash-based-message-authentication-code">HMAC (Hash-based Message Authentication Code)</a></h1>
<h2 id="overview-26"><a class="header" href="#overview-26">Overview</a></h2>
<p>HMAC is a mechanism for message authentication using cryptographic hash functions. It provides both <strong>data integrity</strong> (message hasn't been altered) and <strong>authentication</strong> (message came from someone with the secret key).</p>
<h2 id="hmac-construction"><a class="header" href="#hmac-construction">HMAC Construction</a></h2>
<h3 id="formula"><a class="header" href="#formula">Formula</a></h3>
<pre><code>HMAC(K, m) = H((K' ⊕ opad) || H((K' ⊕ ipad) || m))
</code></pre>
<p>Where:</p>
<ul>
<li><strong>K</strong> = secret key</li>
<li><strong>m</strong> = message</li>
<li><strong>H</strong> = cryptographic hash function (SHA-256, SHA-512, etc.)</li>
<li><strong>K'</strong> = key derived from K (padded/hashed to block size)</li>
<li><strong>⊕</strong> = XOR operation</li>
<li><strong>||</strong> = concatenation</li>
<li><strong>opad</strong> = outer padding (0x5c repeated)</li>
<li><strong>ipad</strong> = inner padding (0x36 repeated)</li>
</ul>
<h3 id="simplified-steps"><a class="header" href="#simplified-steps">Simplified Steps</a></h3>
<pre><code>1. If key is longer than block size, hash it
2. If key is shorter than block size, pad with zeros
3. XOR key with inner padding (ipad)
4. Append message to result
5. Hash the result (inner hash)
6. XOR key with outer padding (opad)
7. Append inner hash to result
8. Hash the result (outer hash) = HMAC
</code></pre>
<h3 id="visual-representation-2"><a class="header" href="#visual-representation-2">Visual Representation</a></h3>
<pre><code>        Secret Key
             |
      +------+------+
      |             |
    XOR ipad     XOR opad
      |             |
      + Message     |
      |             |
   Hash (inner)     |
      |             |
      +-------------+
            |
         Hash (outer)
            |
          HMAC
</code></pre>
<h2 id="why-hmac-instead-of-hashkey--message"><a class="header" href="#why-hmac-instead-of-hashkey--message">Why HMAC Instead of Hash(Key + Message)?</a></h2>
<h3 id="vulnerable-approaches"><a class="header" href="#vulnerable-approaches">Vulnerable Approaches</a></h3>
<pre><code class="language-python"># VULNERABLE 1: Simple concatenation
tag = sha256(key + message)
# Vulnerable to length extension attacks!

# VULNERABLE 2: Wrong order
tag = sha256(message + key)
# Attacker can append data!

# SECURE: Use HMAC
tag = hmac.new(key, message, sha256).digest()
</code></pre>
<h3 id="length-extension-attack-example"><a class="header" href="#length-extension-attack-example">Length Extension Attack Example</a></h3>
<pre><code class="language-python"># With SHA-256 concatenation (VULNERABLE)
original = sha256(key + message)
# Attacker can compute: sha256(key + message + attacker_data)
# WITHOUT knowing the key!

# With HMAC (SECURE)
original = hmac(key, message)
# Attacker CANNOT extend the message without knowing the key
</code></pre>
<h2 id="using-hmac"><a class="header" href="#using-hmac">Using HMAC</a></h2>
<h3 id="python-examples"><a class="header" href="#python-examples">Python Examples</a></h3>
<h4 id="basic-hmac"><a class="header" href="#basic-hmac">Basic HMAC</a></h4>
<pre><code class="language-python">import hmac
import hashlib

# Create HMAC
key = b"secret-key-12345"
message = b"Important message"

# HMAC-SHA256
mac = hmac.new(key, message, hashlib.sha256)
tag = mac.hexdigest()
print(f"HMAC-SHA256: {tag}")

# HMAC-SHA512
mac = hmac.new(key, message, hashlib.sha512)
tag = mac.hexdigest()
print(f"HMAC-SHA512: {tag}")

# Digest as bytes
tag_bytes = hmac.new(key, message, hashlib.sha256).digest()
print(f"HMAC (bytes): {tag_bytes}")
</code></pre>
<h4 id="verify-hmac"><a class="header" href="#verify-hmac">Verify HMAC</a></h4>
<pre><code class="language-python">import hmac
import hashlib

def create_hmac(key, message):
    return hmac.new(key, message, hashlib.sha256).digest()

def verify_hmac(key, message, received_tag):
    expected_tag = hmac.new(key, message, hashlib.sha256).digest()
    # Use constant-time comparison to prevent timing attacks
    return hmac.compare_digest(expected_tag, received_tag)

# Usage
key = b"secret-key"
message = b"Transfer $100 to Alice"

# Create tag
tag = create_hmac(key, message)
print(f"Tag: {tag.hex()}")

# Verify tag (correct)
if verify_hmac(key, message, tag):
    print("Message is authentic!")

# Verify tag (tampered message)
tampered = b"Transfer $999 to Alice"
if not verify_hmac(key, tampered, tag):
    print("Message has been tampered with!")
</code></pre>
<h4 id="incremental-hmac"><a class="header" href="#incremental-hmac">Incremental HMAC</a></h4>
<pre><code class="language-python">import hmac
import hashlib

# For large messages
mac = hmac.new(b"secret-key", digestmod=hashlib.sha256)

# Update incrementally
mac.update(b"Part 1 of message ")
mac.update(b"Part 2 of message ")
mac.update(b"Part 3 of message")

tag = mac.hexdigest()
print(f"Incremental HMAC: {tag}")

# Equivalent to
mac_full = hmac.new(b"secret-key", 
                    b"Part 1 of message Part 2 of message Part 3 of message",
                    hashlib.sha256)
print(f"Full HMAC: {mac_full.hexdigest()}")
</code></pre>
<h3 id="opensslbash-examples"><a class="header" href="#opensslbash-examples">OpenSSL/Bash Examples</a></h3>
<pre><code class="language-bash"># Generate HMAC-SHA256
echo -n "Important message" | openssl dgst -sha256 -hmac "secret-key"

# HMAC-SHA512
echo -n "Important message" | openssl dgst -sha512 -hmac "secret-key"

# HMAC of a file
openssl dgst -sha256 -hmac "secret-key" document.pdf

# Output in different formats
echo -n "message" | openssl dgst -sha256 -hmac "key" -hex
echo -n "message" | openssl dgst -sha256 -hmac "key" -binary | base64
</code></pre>
<h3 id="javascript-example"><a class="header" href="#javascript-example">JavaScript Example</a></h3>
<pre><code class="language-javascript">const crypto = require('crypto');

// Create HMAC
const key = 'secret-key-12345';
const message = 'Important message';

const hmac = crypto.createHmac('sha256', key);
hmac.update(message);
const tag = hmac.digest('hex');

console.log(`HMAC-SHA256: ${tag}`);

// Verify HMAC
function verifyHMAC(key, message, receivedTag) {
    const expectedTag = crypto.createHmac('sha256', key)
                             .update(message)
                             .digest('hex');
    
    // Constant-time comparison
    return crypto.timingSafeEqual(
        Buffer.from(expectedTag, 'hex'),
        Buffer.from(receivedTag, 'hex')
    );
}
</code></pre>
<h2 id="message-authentication"><a class="header" href="#message-authentication">Message Authentication</a></h2>
<h3 id="sending-authenticated-messages"><a class="header" href="#sending-authenticated-messages">Sending Authenticated Messages</a></h3>
<pre><code class="language-python">import hmac
import hashlib
import json

class AuthenticatedMessage:
    def __init__(self, shared_key):
        self.key = shared_key
    
    def send(self, message):
        # Create HMAC tag
        tag = hmac.new(self.key, message.encode(), hashlib.sha256).hexdigest()
        
        # Package message with tag
        package = {
            'message': message,
            'hmac': tag
        }
        return json.dumps(package)
    
    def receive(self, package_json):
        # Unpack message
        package = json.loads(package_json)
        message = package['message']
        received_tag = package['hmac']
        
        # Verify HMAC
        expected_tag = hmac.new(self.key, message.encode(), hashlib.sha256).hexdigest()
        
        if hmac.compare_digest(expected_tag, received_tag):
            return message, True
        else:
            return None, False

# Usage
shared_key = b"shared-secret-key-between-alice-and-bob"

# Alice sends message
alice = AuthenticatedMessage(shared_key)
package = alice.send("Transfer $100 to Bob")
print(f"Sent: {package}")

# Bob receives message
bob = AuthenticatedMessage(shared_key)
message, is_authentic = bob.receive(package)

if is_authentic:
    print(f"Authentic message: {message}")
else:
    print("Warning: Message tampered!")

# Attacker tries to tamper
tampered_package = package.replace("$100", "$999")
message, is_authentic = bob.receive(tampered_package)
print(f"Tampered authentic: {is_authentic}")  # False
</code></pre>
<h2 id="integrity-verification"><a class="header" href="#integrity-verification">Integrity Verification</a></h2>
<h3 id="file-integrity-with-hmac"><a class="header" href="#file-integrity-with-hmac">File Integrity with HMAC</a></h3>
<pre><code class="language-python">import hmac
import hashlib
import os

class FileIntegrityChecker:
    def __init__(self, key):
        self.key = key
    
    def compute_file_hmac(self, filepath):
        mac = hmac.new(self.key, digestmod=hashlib.sha256)
        
        with open(filepath, 'rb') as f:
            while chunk := f.read(8192):
                mac.update(chunk)
        
        return mac.hexdigest()
    
    def create_manifest(self, files):
        manifest = {}
        for filepath in files:
            manifest[filepath] = self.compute_file_hmac(filepath)
        return manifest
    
    def verify_files(self, manifest):
        results = {}
        for filepath, expected_hmac in manifest.items():
            if not os.path.exists(filepath):
                results[filepath] = "MISSING"
            else:
                actual_hmac = self.compute_file_hmac(filepath)
                if hmac.compare_digest(expected_hmac, actual_hmac):
                    results[filepath] = "OK"
                else:
                    results[filepath] = "MODIFIED"
        return results

# Usage
checker = FileIntegrityChecker(b"integrity-check-key")

# Create manifest
files = ['config.json', 'app.py', 'data.db']
manifest = checker.create_manifest(files)
print("Manifest created:", manifest)

# Later, verify files
results = checker.verify_files(manifest)
for file, status in results.items():
    print(f"{file}: {status}")
</code></pre>
<h2 id="api-authentication"><a class="header" href="#api-authentication">API Authentication</a></h2>
<h3 id="api-request-signing"><a class="header" href="#api-request-signing">API Request Signing</a></h3>
<pre><code class="language-python">import hmac
import hashlib
import time
import requests
from urllib.parse import urlencode

class APIClient:
    def __init__(self, api_key, api_secret):
        self.api_key = api_key
        self.api_secret = api_secret.encode()
    
    def generate_signature(self, method, path, params):
        # Create string to sign
        timestamp = str(int(time.time()))
        params['timestamp'] = timestamp
        params['api_key'] = self.api_key
        
        # Sort parameters
        sorted_params = sorted(params.items())
        query_string = urlencode(sorted_params)
        
        # String to sign: METHOD + PATH + QUERY_STRING
        message = f"{method}{path}{query_string}"
        
        # Generate HMAC signature
        signature = hmac.new(
            self.api_secret,
            message.encode(),
            hashlib.sha256
        ).hexdigest()
        
        return signature, timestamp
    
    def make_request(self, method, path, params=None):
        if params is None:
            params = {}
        
        # Generate signature
        signature, timestamp = self.generate_signature(method, path, params)
        
        # Add authentication headers
        headers = {
            'X-API-Key': self.api_key,
            'X-API-Signature': signature,
            'X-API-Timestamp': timestamp
        }
        
        # Make request
        url = f"https://api.example.com{path}"
        response = requests.request(method, url, params=params, headers=headers)
        
        return response

# Server-side verification
class APIServer:
    def __init__(self):
        # In practice, look up secret from database based on API key
        self.api_secrets = {
            'key123': b'secret123'
        }
    
    def verify_signature(self, api_key, signature, timestamp, method, path, params):
        # Check timestamp (prevent replay attacks)
        current_time = int(time.time())
        request_time = int(timestamp)
        
        if abs(current_time - request_time) &gt; 300:  # 5 minutes
            return False, "Request expired"
        
        # Get API secret
        if api_key not in self.api_secrets:
            return False, "Invalid API key"
        
        api_secret = self.api_secrets[api_key]
        
        # Reconstruct signed message
        params['timestamp'] = timestamp
        params['api_key'] = api_key
        sorted_params = sorted(params.items())
        query_string = urlencode(sorted_params)
        message = f"{method}{path}{query_string}"
        
        # Compute expected signature
        expected_signature = hmac.new(
            api_secret,
            message.encode(),
            hashlib.sha256
        ).hexdigest()
        
        # Compare signatures (constant time)
        if hmac.compare_digest(expected_signature, signature):
            return True, "Valid"
        else:
            return False, "Invalid signature"

# Usage
client = APIClient('key123', 'secret123')
response = client.make_request('GET', '/api/users', {'limit': 10})
</code></pre>
<h3 id="rest-api-with-hmac-authentication"><a class="header" href="#rest-api-with-hmac-authentication">REST API with HMAC Authentication</a></h3>
<pre><code class="language-python">from flask import Flask, request, jsonify
import hmac
import hashlib

app = Flask(__name__)

API_SECRETS = {
    'client1': b'secret1',
    'client2': b'secret2'
}

def verify_hmac_signature():
    api_key = request.headers.get('X-API-Key')
    signature = request.headers.get('X-Signature')
    
    if not api_key or not signature:
        return False
    
    if api_key not in API_SECRETS:
        return False
    
    # Reconstruct signed data
    # Method + Path + Body (for POST/PUT)
    data = request.method + request.path
    
    if request.data:
        data += request.data.decode()
    
    # Compute expected signature
    expected = hmac.new(
        API_SECRETS[api_key],
        data.encode(),
        hashlib.sha256
    ).hexdigest()
    
    return hmac.compare_digest(expected, signature)

@app.route('/api/data', methods=['POST'])
def post_data():
    if not verify_hmac_signature():
        return jsonify({'error': 'Unauthorized'}), 401
    
    # Process request
    data = request.json
    return jsonify({'status': 'success', 'data': data})

# Client request example
import requests
import hmac
import hashlib

api_key = 'client1'
api_secret = b'secret1'
url = 'http://localhost:5000/api/data'
payload = {'key': 'value'}

# Create signature
data = 'POST' + '/api/data' + json.dumps(payload)
signature = hmac.new(api_secret, data.encode(), hashlib.sha256).hexdigest()

headers = {
    'X-API-Key': api_key,
    'X-Signature': signature,
    'Content-Type': 'application/json'
}

response = requests.post(url, json=payload, headers=headers)
</code></pre>
<h2 id="jwt-json-web-tokens"><a class="header" href="#jwt-json-web-tokens">JWT (JSON Web Tokens)</a></h2>
<p>JWTs use HMAC (or RSA) for signature verification.</p>
<h3 id="jwt-structure"><a class="header" href="#jwt-structure">JWT Structure</a></h3>
<pre><code>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
|                                      |                                                                                |                                              |
            Header                                              Payload                                                              Signature
</code></pre>
<h3 id="jwt-with-hmac"><a class="header" href="#jwt-with-hmac">JWT with HMAC</a></h3>
<pre><code class="language-python">import hmac
import hashlib
import json
import base64

class JWT:
    def __init__(self, secret):
        self.secret = secret.encode()
    
    def base64url_encode(self, data):
        return base64.urlsafe_b64encode(data).rstrip(b'=').decode()
    
    def base64url_decode(self, data):
        padding = 4 - len(data) % 4
        data += '=' * padding
        return base64.urlsafe_b64decode(data)
    
    def create_token(self, payload):
        # Header
        header = {
            'alg': 'HS256',
            'typ': 'JWT'
        }
        
        # Encode header and payload
        header_encoded = self.base64url_encode(json.dumps(header).encode())
        payload_encoded = self.base64url_encode(json.dumps(payload).encode())
        
        # Create signature
        message = f"{header_encoded}.{payload_encoded}".encode()
        signature = hmac.new(self.secret, message, hashlib.sha256).digest()
        signature_encoded = self.base64url_encode(signature)
        
        # Combine
        token = f"{header_encoded}.{payload_encoded}.{signature_encoded}"
        return token
    
    def verify_token(self, token):
        try:
            parts = token.split('.')
            if len(parts) != 3:
                return None, False
            
            header_encoded, payload_encoded, signature_encoded = parts
            
            # Verify signature
            message = f"{header_encoded}.{payload_encoded}".encode()
            expected_signature = hmac.new(self.secret, message, hashlib.sha256).digest()
            received_signature = self.base64url_decode(signature_encoded)
            
            if not hmac.compare_digest(expected_signature, received_signature):
                return None, False
            
            # Decode payload
            payload = json.loads(self.base64url_decode(payload_encoded))
            return payload, True
            
        except Exception as e:
            return None, False

# Usage
jwt = JWT('my-secret-key')

# Create token
payload = {
    'user_id': 12345,
    'username': 'john_doe',
    'exp': int(time.time()) + 3600  # Expires in 1 hour
}

token = jwt.create_token(payload)
print(f"JWT: {token}")

# Verify token
payload, is_valid = jwt.verify_token(token)
if is_valid:
    print(f"Valid token! User: {payload['username']}")
else:
    print("Invalid token!")

# Using PyJWT library (recommended)
import jwt as pyjwt

# Create token
token = pyjwt.encode(payload, 'my-secret-key', algorithm='HS256')

# Verify token
try:
    decoded = pyjwt.decode(token, 'my-secret-key', algorithms=['HS256'])
    print(f"Valid! Payload: {decoded}")
except pyjwt.InvalidTokenError:
    print("Invalid token!")
</code></pre>
<h2 id="hmac-vs-other-macs"><a class="header" href="#hmac-vs-other-macs">HMAC vs Other MACs</a></h2>
<h3 id="comparison-2"><a class="header" href="#comparison-2">Comparison</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>HMAC</th><th>CBC-MAC</th><th>GMAC</th><th>Poly1305</th></tr></thead><tbody>
<tr><td><strong>Based on</strong></td><td>Hash function</td><td>Block cipher</td><td>Block cipher</td><td>Universal hash</td></tr>
<tr><td><strong>Performance</strong></td><td>Moderate</td><td>Slow</td><td>Fast</td><td>Very fast</td></tr>
<tr><td><strong>Key reuse</strong></td><td>Safe</td><td>Dangerous</td><td>Safe</td><td>One-time key</td></tr>
<tr><td><strong>Standardized</strong></td><td>Yes (RFC 2104)</td><td>Yes</td><td>Yes (GCM)</td><td>Yes (ChaCha20)</td></tr>
<tr><td><strong>Use case</strong></td><td>General purpose</td><td>Legacy</td><td>AEAD</td><td>Modern crypto</td></tr>
</tbody></table>
</div>
<h3 id="hmac-sha256-vs-hmac-sha512"><a class="header" href="#hmac-sha256-vs-hmac-sha512">HMAC-SHA256 vs HMAC-SHA512</a></h3>
<pre><code class="language-python">import hmac
import hashlib
import time

message = b"x" * 1000000  # 1 MB
key = b"secret-key"

# HMAC-SHA256
start = time.time()
for _ in range(100):
    hmac.new(key, message, hashlib.sha256).digest()
print(f"HMAC-SHA256: {time.time() - start:.3f}s")

# HMAC-SHA512
start = time.time()
for _ in range(100):
    hmac.new(key, message, hashlib.sha512).digest()
print(f"HMAC-SHA512: {time.time() - start:.3f}s")

# Output sizes
print(f"SHA256 output: {len(hmac.new(key, b'test', hashlib.sha256).digest())} bytes")
print(f"SHA512 output: {len(hmac.new(key, b'test', hashlib.sha512).digest())} bytes")
</code></pre>
<h2 id="security-considerations-4"><a class="header" href="#security-considerations-4">Security Considerations</a></h2>
<h3 id="1-key-length"><a class="header" href="#1-key-length">1. Key Length</a></h3>
<pre><code class="language-python"># Minimum key length = hash output size
# SHA-256: minimum 32 bytes
# SHA-512: minimum 64 bytes

# GOOD
key = os.urandom(32)  # 256 bits for HMAC-SHA256

# BAD - too short
key = b"secret"  # Only 48 bits!

# Better - derive from password
from hashlib import pbkdf2_hmac
key = pbkdf2_hmac('sha256', b'user-password', b'salt', 100000)
</code></pre>
<h3 id="2-constant-time-comparison"><a class="header" href="#2-constant-time-comparison">2. Constant-Time Comparison</a></h3>
<pre><code class="language-python"># VULNERABLE - timing attack
if computed_hmac == received_hmac:
    return True

# SECURE - constant time comparison
import hmac
if hmac.compare_digest(computed_hmac, received_hmac):
    return True
</code></pre>
<h3 id="3-prevent-replay-attacks"><a class="header" href="#3-prevent-replay-attacks">3. Prevent Replay Attacks</a></h3>
<pre><code class="language-python">import time

def verify_request(hmac_tag, timestamp, max_age=300):
    # Verify HMAC first
    if not verify_hmac(hmac_tag):
        return False
    
    # Check timestamp (prevent replays)
    current_time = int(time.time())
    request_time = int(timestamp)
    
    if abs(current_time - request_time) &gt; max_age:
        return False  # Request too old
    
    # Optional: Track used nonces to prevent replay
    # if nonce in used_nonces:
    #     return False
    
    return True
</code></pre>
<h3 id="4-use-separate-keys"><a class="header" href="#4-use-separate-keys">4. Use Separate Keys</a></h3>
<pre><code class="language-python"># BAD - same key for different purposes
encryption_key = b"shared-key"
hmac_key = b"shared-key"

# GOOD - derive separate keys
from hashlib import sha256

master_key = b"master-secret-key"
encryption_key = sha256(master_key + b"encryption").digest()
hmac_key = sha256(master_key + b"authentication").digest()

# BETTER - use HKDF (HMAC-based Key Derivation)
from cryptography.hazmat.primitives import hashes
from cryptography.hazmat.primitives.kdf.hkdf import HKDF

master_key = b"master-secret-key"

hkdf = HKDF(
    algorithm=hashes.SHA256(),
    length=32,
    salt=None,
    info=b'encryption',
)
encryption_key = hkdf.derive(master_key)

hkdf = HKDF(
    algorithm=hashes.SHA256(),
    length=32,
    salt=None,
    info=b'authentication',
)
hmac_key = hkdf.derive(master_key)
</code></pre>
<h3 id="5-truncation"><a class="header" href="#5-truncation">5. Truncation</a></h3>
<pre><code class="language-python"># Full HMAC (recommended)
mac = hmac.new(key, message, hashlib.sha256).digest()  # 32 bytes

# Truncated HMAC (if needed)
mac_truncated = hmac.new(key, message, hashlib.sha256).digest()[:16]  # 16 bytes

# Minimum recommended: 128 bits (16 bytes)
# Never go below 80 bits (10 bytes)
</code></pre>
<h2 id="best-practices-16"><a class="header" href="#best-practices-16">Best Practices</a></h2>
<h3 id="1-always-use-hmac-for-message-authentication"><a class="header" href="#1-always-use-hmac-for-message-authentication">1. Always Use HMAC for Message Authentication</a></h3>
<pre><code class="language-python"># ✓ Use HMAC
tag = hmac.new(key, message, hashlib.sha256).digest()

# ✗ Don't use simple hash
tag = hashlib.sha256(key + message).digest()  # Vulnerable!
</code></pre>
<h3 id="2-choose-appropriate-hash-function"><a class="header" href="#2-choose-appropriate-hash-function">2. Choose Appropriate Hash Function</a></h3>
<pre><code class="language-python"># Modern: SHA-256 or SHA-512
hmac.new(key, message, hashlib.sha256)

# Avoid: MD5 or SHA-1
hmac.new(key, message, hashlib.md5)  # Don't use!
</code></pre>
<h3 id="3-protect-the-key"><a class="header" href="#3-protect-the-key">3. Protect the Key</a></h3>
<pre><code class="language-python"># Store keys securely
# - Use environment variables
# - Use key management service (AWS KMS, etc.)
# - Never hardcode in source code
# - Never commit to version control

import os
key = os.environ.get('HMAC_KEY').encode()

# Rotate keys periodically
# Support multiple active keys during rotation
</code></pre>
<h3 id="4-include-all-relevant-data"><a class="header" href="#4-include-all-relevant-data">4. Include All Relevant Data</a></h3>
<pre><code class="language-python"># Sign complete context
data = {
    'timestamp': timestamp,
    'user_id': user_id,
    'action': action,
    'nonce': nonce
}

message = json.dumps(data, sort_keys=True).encode()
signature = hmac.new(key, message, hashlib.sha256).hexdigest()
</code></pre>
<h2 id="common-mistakes-4"><a class="header" href="#common-mistakes-4">Common Mistakes</a></h2>
<h3 id="1-using--for-comparison"><a class="header" href="#1-using--for-comparison">1. Using == for Comparison</a></h3>
<pre><code class="language-python"># WRONG - timing attack
if hmac1 == hmac2:
    pass

# RIGHT - constant time
if hmac.compare_digest(hmac1, hmac2):
    pass
</code></pre>
<h3 id="2-not-including-timestamp"><a class="header" href="#2-not-including-timestamp">2. Not Including Timestamp</a></h3>
<pre><code class="language-python"># WRONG - vulnerable to replay
signature = hmac.new(key, message, sha256).hexdigest()

# RIGHT - include timestamp
data = f"{timestamp}:{message}"
signature = hmac.new(key, data.encode(), sha256).hexdigest()
</code></pre>
<h3 id="3-wrong-key-derivation"><a class="header" href="#3-wrong-key-derivation">3. Wrong Key Derivation</a></h3>
<pre><code class="language-python"># WRONG - weak key
key = b"password"

# RIGHT - derive from password
from hashlib import pbkdf2_hmac
key = pbkdf2_hmac('sha256', b'password', b'salt', 100000)
</code></pre>
<h2 id="eli10-12"><a class="header" href="#eli10-12">ELI10</a></h2>
<p>HMAC is like a secret handshake for messages:</p>
<p>Imagine you and your best friend have a secret code:</p>
<ol>
<li>You write a message: "Meet at the treehouse at 3pm"</li>
<li>You add your secret code and mix it all together in a special way</li>
<li>You get a "stamp": <code>a7f9e4b2...</code></li>
<li>You send: message + stamp</li>
</ol>
<p>When your friend receives it:</p>
<ol>
<li>They take the message</li>
<li>They add the SAME secret code and mix it the SAME way</li>
<li>They get their own stamp</li>
<li>If their stamp matches yours, they know:
<ul>
<li>The message really came from you (only you know the code!)</li>
<li>Nobody changed the message (the stamp would be different!)</li>
</ul>
</li>
</ol>
<p><strong>Why not just put the secret code in the message?</strong></p>
<ul>
<li>Anyone could copy your code!</li>
</ul>
<p><strong>Why not just hash the message?</strong></p>
<ul>
<li>Anyone could make their own hash!</li>
</ul>
<p><strong>HMAC is special because:</strong></p>
<ul>
<li>You need the secret code to make the stamp</li>
<li>Even a tiny change makes a completely different stamp</li>
<li>Nobody can make the right stamp without knowing your secret code!</li>
</ul>
<p><strong>Real-world example:</strong>
When you log into a website, your browser and the server use HMAC to:</p>
<ul>
<li>Make sure messages aren't tampered with</li>
<li>Prove who sent the message</li>
<li>Keep your session secure!</li>
</ul>
<h2 id="further-resources-12"><a class="header" href="#further-resources-12">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc2104">RFC 2104 - HMAC Specification</a></li>
<li><a href="https://csrc.nist.gov/publications/detail/fips/198/1/final">HMAC Security Analysis</a></li>
<li><a href="https://tools.ietf.org/html/rfc7519">JWT Specification (RFC 7519)</a></li>
<li><a href="https://owasp.org/www-project-api-security/">API Authentication Best Practices</a></li>
<li><a href="https://codahale.com/a-lesson-in-timing-attacks/">Timing Attack Prevention</a></li>
<li><a href="https://tools.ietf.org/html/rfc5869">HKDF Specification (RFC 5869)</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wifi"><a class="header" href="#wifi">Wifi</a></h1>
<p>Welcome to the Wifi section of the notes. Here, you will find comprehensive information about various aspects of Wifi technology, including its basics, standards, security, and more.</p>
<h2 id="table-of-contents-4"><a class="header" href="#table-of-contents-4">Table of Contents</a></h2>
<ul>
<li><a href="wifi/basics.html">Wifi Basics</a></li>
<li><a href="wifi/standards.html">Wifi Standards</a></li>
<li><a href="wifi/security.html">Wifi Security</a></li>
<li><a href="wifi/scanning.html">Scanning</a></li>
<li><a href="wifi/roaming.html">Roaming</a></li>
<li><a href="wifi/qos_management.html">QoS Management</a></li>
</ul>
<p>Explore the topics to gain a deeper understanding of Wifi technology and its applications.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wifi-basics"><a class="header" href="#wifi-basics">Wifi Basics</a></h1>
<h2 id="aggregation"><a class="header" href="#aggregation">Aggregation</a></h2>
<p>Aggregation in Wi-Fi refers to the process of combining multiple data frames into a single transmission unit. This technique is used to improve the efficiency and throughput of wireless networks by reducing the overhead associated with each individual frame transmission. There are two main types of aggregation in Wi-Fi:</p>
<ol>
<li>
<p><strong>A-MPDU (Aggregated MAC Protocol Data Unit)</strong>:</p>
<ul>
<li>Combines multiple MAC frames into a single PHY (Physical Layer) frame.</li>
<li>Reduces the inter-frame spacing and acknowledgment overhead.</li>
<li>Improves throughput by allowing multiple frames to be sent in a single transmission burst.</li>
</ul>
</li>
<li>
<p><strong>A-MSDU (Aggregated MAC Service Data Unit)</strong>:</p>
<ul>
<li>Combines multiple MSDUs (MAC Service Data Units) into a single MPDU (MAC Protocol Data Unit).</li>
<li>Reduces the overhead by aggregating data at the MAC layer before it is passed to the PHY layer.</li>
<li>Increases efficiency by reducing the number of headers and acknowledgments required.</li>
</ul>
</li>
</ol>
<p>Both A-MPDU and A-MSDU are supported in 802.11n and later standards, such as 802.11ac and 802.11ax. These aggregation techniques are particularly beneficial in high-throughput and high-density environments, where they help to maximize the use of available bandwidth and improve overall network performance.</p>
<h2 id="wifi-bands"><a class="header" href="#wifi-bands">Wifi Bands</a></h2>
<h3 id="24-ghz"><a class="header" href="#24-ghz">2.4 GHz</a></h3>
<ul>
<li>802.11a</li>
<li>802.11b</li>
<li>802.11g</li>
</ul>
<p>The 2.4 GHz band is one of the most commonly used frequency bands for Wi-Fi communication. It is known for its longer range and better penetration through obstacles such as walls and floors. However, it is also more susceptible to interference from other devices, such as microwaves, cordless phones, and Bluetooth devices, which operate in the same frequency range.</p>
<h3 id="channels-in-24-ghz-band"><a class="header" href="#channels-in-24-ghz-band">Channels in 2.4 GHz Band</a></h3>
<p>The 2.4 GHz band is divided into multiple channels, each with a specific frequency range. The channels are spaced 5 MHz apart, but due to the width of the channels (22 MHz), there is significant overlap between adjacent channels. This can lead to interference if multiple networks are operating on overlapping channels. The commonly used channels in the 2.4 GHz band are:</p>
<ul>
<li><strong>Channel 1</strong>: 2.412 GHz</li>
<li><strong>Channel 2</strong>: 2.417 GHz</li>
<li><strong>Channel 3</strong>: 2.422 GHz</li>
<li><strong>Channel 4</strong>: 2.427 GHz</li>
<li><strong>Channel 5</strong>: 2.432 GHz</li>
<li><strong>Channel 6</strong>: 2.437 GHz</li>
<li><strong>Channel 7</strong>: 2.442 GHz</li>
<li><strong>Channel 8</strong>: 2.447 GHz</li>
<li><strong>Channel 9</strong>: 2.452 GHz</li>
<li><strong>Channel 10</strong>: 2.457 GHz</li>
<li><strong>Channel 11</strong>: 2.462 GHz</li>
</ul>
<p>In some regions, additional channels are available:</p>
<ul>
<li><strong>Channel 12</strong>: 2.467 GHz</li>
<li><strong>Channel 13</strong>: 2.472 GHz</li>
<li><strong>Channel 14</strong>: 2.484 GHz (only available in Japan)</li>
</ul>
<p>To minimize interference, it is recommended to use non-overlapping channels. In the 2.4 GHz band, the non-overlapping channels are typically channels 1, 6, and 11. By configuring Wi-Fi networks to operate on these channels, interference can be reduced, leading to improved performance and reliability.</p>
<h3 id="5-ghz"><a class="header" href="#5-ghz">5 GHz</a></h3>
<ul>
<li>802.11a</li>
<li>802.11n</li>
<li>802.11ac</li>
<li>802.11ax</li>
</ul>
<h3 id="channels-in-5-ghz-band"><a class="header" href="#channels-in-5-ghz-band">Channels in 5 GHz Band</a></h3>
<p>The 5 GHz band offers a larger number of channels compared to the 2.4 GHz band, which helps to reduce interference and congestion. The channels in the 5 GHz band are spaced 20 MHz apart, and there are several non-overlapping channels available. This band is divided into several sub-bands, each with its own set of channels:</p>
<ul>
<li>
<p><strong>UNII-1 (5150-5250 MHz)</strong>:</p>
<ul>
<li>Channel 36: 5.180 GHz</li>
<li>Channel 40: 5.200 GHz</li>
<li>Channel 44: 5.220 GHz</li>
<li>Channel 48: 5.240 GHz</li>
</ul>
</li>
<li>
<p><strong>UNII-2 (5250-5350 MHz)</strong>:</p>
<ul>
<li>Channel 52: 5.260 GHz</li>
<li>Channel 56: 5.280 GHz</li>
<li>Channel 60: 5.300 GHz</li>
<li>Channel 64: 5.320 GHz</li>
</ul>
</li>
<li>
<p><strong>UNII-2 Extended (5470-5725 MHz)</strong>:</p>
<ul>
<li>Channel 100: 5.500 GHz</li>
<li>Channel 104: 5.520 GHz</li>
<li>Channel 108: 5.540 GHz</li>
<li>Channel 112: 5.560 GHz</li>
<li>Channel 116: 5.580 GHz</li>
<li>Channel 120: 5.600 GHz</li>
<li>Channel 124: 5.620 GHz</li>
<li>Channel 128: 5.640 GHz</li>
<li>Channel 132: 5.660 GHz</li>
<li>Channel 136: 5.680 GHz</li>
<li>Channel 140: 5.700 GHz</li>
<li>Channel 144: 5.720 GHz</li>
</ul>
</li>
<li>
<p><strong>UNII-3 (5725-5850 MHz)</strong>:</p>
<ul>
<li>Channel 149: 5.745 GHz</li>
<li>Channel 153: 5.765 GHz</li>
<li>Channel 157: 5.785 GHz</li>
<li>Channel 161: 5.805 GHz</li>
<li>Channel 165: 5.825 GHz</li>
</ul>
</li>
</ul>
<p>The 5 GHz band is less crowded than the 2.4 GHz band and offers higher data rates and lower latency. However, it has a shorter range and less ability to penetrate obstacles such as walls and floors. The use of non-overlapping channels in the 5 GHz band helps to minimize interference and improve overall network performance. Additionally, Dynamic Frequency Selection (DFS) is used in some channels to avoid interference with radar systems.</p>
<h3 id="6-ghz"><a class="header" href="#6-ghz">6 GHz</a></h3>
<ul>
<li>802.11ax</li>
<li>802.11be</li>
</ul>
<h3 id="channels-in-6-ghz-band"><a class="header" href="#channels-in-6-ghz-band">Channels in 6 GHz Band</a></h3>
<p>The 6 GHz band is a new addition to the Wi-Fi spectrum, providing even more channels and bandwidth for wireless communication. This band is divided into several sub-bands, each with its own set of channels. The channels in the 6 GHz band are spaced 20 MHz apart, similar to the 5 GHz band, and there are numerous non-overlapping channels available. The 6 GHz band offers higher data rates, lower latency, and reduced interference compared to the 2.4 GHz and 5 GHz bands.</p>
<ul>
<li>
<p><strong>UNII-5 (5925-6425 MHz)</strong>:</p>
<ul>
<li>Channel 1: 5.925 GHz</li>
<li>Channel 5: 5.945 GHz</li>
<li>Channel 9: 5.965 GHz</li>
<li>Channel 13: 5.985 GHz</li>
<li>Channel 17: 6.005 GHz</li>
<li>Channel 21: 6.025 GHz</li>
<li>Channel 25: 6.045 GHz</li>
<li>Channel 29: 6.065 GHz</li>
<li>Channel 33: 6.085 GHz</li>
<li>Channel 37: 6.105 GHz</li>
<li>Channel 41: 6.125 GHz</li>
<li>Channel 45: 6.145 GHz</li>
<li>Channel 49: 6.165 GHz</li>
<li>Channel 53: 6.185 GHz</li>
<li>Channel 57: 6.205 GHz</li>
<li>Channel 61: 6.225 GHz</li>
<li>Channel 65: 6.245 GHz</li>
<li>Channel 69: 6.265 GHz</li>
<li>Channel 73: 6.285 GHz</li>
<li>Channel 77: 6.305 GHz</li>
<li>Channel 81: 6.325 GHz</li>
<li>Channel 85: 6.345 GHz</li>
<li>Channel 89: 6.365 GHz</li>
<li>Channel 93: 6.385 GHz</li>
<li>Channel 97: 6.405 GHz</li>
<li>Channel 101: 6.425 GHz</li>
</ul>
</li>
<li>
<p><strong>UNII-6 (6425-6525 MHz)</strong>:</p>
<ul>
<li>Channel 105: 6.445 GHz</li>
<li>Channel 109: 6.465 GHz</li>
<li>Channel 113: 6.485 GHz</li>
<li>Channel 117: 6.505 GHz</li>
<li>Channel 121: 6.525 GHz</li>
</ul>
</li>
<li>
<p><strong>UNII-7 (6525-6875 MHz)</strong>:</p>
<ul>
<li>Channel 125: 6.545 GHz</li>
<li>Channel 129: 6.565 GHz</li>
<li>Channel 133: 6.585 GHz</li>
<li>Channel 137: 6.605 GHz</li>
<li>Channel 141: 6.625 GHz</li>
<li>Channel 145: 6.645 GHz</li>
<li>Channel 149: 6.665 GHz</li>
<li>Channel 153: 6.685 GHz</li>
<li>Channel 157: 6.705 GHz</li>
<li>Channel 161: 6.725 GHz</li>
<li>Channel 165: 6.745 GHz</li>
<li>Channel 169: 6.765 GHz</li>
<li>Channel 173: 6.785 GHz</li>
<li>Channel 177: 6.805 GHz</li>
<li>Channel 181: 6.825 GHz</li>
<li>Channel 185: 6.845 GHz</li>
<li>Channel 189: 6.865 GHz</li>
<li>Channel 193: 6.885 GHz</li>
<li>Channel 197: 6.905 GHz</li>
<li>Channel 201: 6.925 GHz</li>
<li>Channel 205: 6.945 GHz</li>
<li>Channel 209: 6.965 GHz</li>
<li>Channel 213: 6.985 GHz</li>
</ul>
</li>
<li>
<p><strong>UNII-8 (6875-7125 MHz)</strong>:</p>
<ul>
<li>Channel 217: 7.005 GHz</li>
<li>Channel 221: 7.025 GHz</li>
<li>Channel 225: 7.045 GHz</li>
<li>Channel 229: 7.065 GHz</li>
<li>Channel 233: 7.085 GHz</li>
<li>Channel 237: 7.105 GHz</li>
<li>Channel 241: 7.125 GHz</li>
</ul>
</li>
</ul>
<p>The 6 GHz band is expected to significantly enhance Wi-Fi performance, especially in dense environments, by providing more spectrum and reducing congestion. Devices that support the 6 GHz band can take advantage of these additional channels to achieve faster speeds and more reliable connections.</p>
<h2 id="wifi-channel-width"><a class="header" href="#wifi-channel-width">Wifi channel width</a></h2>
<p>Wi-Fi channel width refers to the size of the frequency band that a Wi-Fi signal occupies. The channel width determines the data rate and the amount of data that can be transmitted over the network. Wider channels can carry more data, but they are also more susceptible to interference and congestion. The most common channel widths in Wi-Fi are 20 MHz, 40 MHz, 80 MHz, and 160 MHz.</p>
<h3 id="20-mhz-channels"><a class="header" href="#20-mhz-channels">20 MHz Channels</a></h3>
<p>20 MHz is the standard channel width for Wi-Fi and is widely used in both 2.4 GHz and 5 GHz bands. It provides a good balance between range and throughput. A 20 MHz channel is less likely to experience interference from other devices and networks, making it a reliable choice for most applications.</p>
<h3 id="40-mhz-channels"><a class="header" href="#40-mhz-channels">40 MHz Channels</a></h3>
<p>40 MHz channels are used to increase the data rate by bonding two adjacent 20 MHz channels. This effectively doubles the bandwidth, allowing for higher throughput. However, 40 MHz channels are more prone to interference, especially in the crowded 2.4 GHz band. In the 5 GHz band, 40 MHz channels are more practical due to the availability of more non-overlapping channels.</p>
<h3 id="80-mhz-channels"><a class="header" href="#80-mhz-channels">80 MHz Channels</a></h3>
<p>80 MHz channels further increase the data rate by bonding four adjacent 20 MHz channels. This provides even higher throughput, making it suitable for applications that require high data rates, such as HD video streaming and online gaming. However, 80 MHz channels are more susceptible to interference and are typically used in the 5 GHz and 6 GHz bands where more spectrum is available.</p>
<h3 id="160-mhz-channels"><a class="header" href="#160-mhz-channels">160 MHz Channels</a></h3>
<p>160 MHz channels offer the highest data rates by bonding eight adjacent 20 MHz channels. This channel width is ideal for applications that demand extremely high throughput, such as virtual reality (VR) and large file transfers. However, 160 MHz channels are highly susceptible to interference and are only practical in the 5 GHz and 6 GHz bands with sufficient spectrum availability.</p>
<h3 id="channel-width-selection"><a class="header" href="#channel-width-selection">Channel Width Selection</a></h3>
<p>The choice of channel width depends on the specific requirements of the network and the environment. In dense environments with many Wi-Fi networks, narrower channels (20 MHz or 40 MHz) are preferred to minimize interference. In less congested environments, wider channels (80 MHz or 160 MHz) can be used to achieve higher data rates.</p>
<h3 id="impact-on-performance"><a class="header" href="#impact-on-performance">Impact on Performance</a></h3>
<p>Wider channels can significantly improve Wi-Fi performance by increasing the data rate and reducing latency. However, they also require more spectrum and are more vulnerable to interference. It is essential to balance the need for higher throughput with the potential for increased interference when selecting the appropriate channel width for a Wi-Fi network.</p>
<p>In summary, Wi-Fi channel width plays a crucial role in determining the performance and reliability of a wireless network. Understanding the trade-offs between different channel widths can help optimize the network for specific applications and environments.</p>
<h2 id="identifying-channel-width-from-beacon-frames"><a class="header" href="#identifying-channel-width-from-beacon-frames">Identifying Channel Width from Beacon Frames</a></h2>
<p>To identify the channel width from Wi-Fi beacon frames, you need to analyze the information elements (IEs) within the beacon frame. Beacon frames are periodically transmitted by access points (APs) to announce the presence of a Wi-Fi network. These frames contain various IEs that provide information about the network, including the channel width.</p>
<h3 id="steps-to-identify-channel-width"><a class="header" href="#steps-to-identify-channel-width">Steps to Identify Channel Width</a></h3>
<ol>
<li>
<p><strong>Capture Beacon Frames</strong>:
Use a Wi-Fi packet capture tool (e.g., Wireshark) to capture beacon frames from the Wi-Fi network. Ensure that your capture device supports the frequency bands and channel widths used by the network.</p>
</li>
<li>
<p><strong>Locate the HT Capabilities IE</strong>:
In the captured beacon frame, locate the "HT Capabilities" information element. This IE is present in 802.11n and later standards and provides information about the supported channel widths.</p>
</li>
<li>
<p><strong>Check Supported Channel Widths</strong>:
Within the HT Capabilities IE, look for the "Supported Channel Width Set" field. This field indicates whether the AP supports 20 MHz, 40 MHz, or both channel widths. The field is typically represented as:</p>
<ul>
<li><code>0</code>: 20 MHz only</li>
<li><code>1</code>: 20 MHz and 40 MHz</li>
</ul>
</li>
<li>
<p><strong>Locate the VHT Capabilities IE</strong>:
For 802.11ac networks, locate the "VHT Capabilities" information element. This IE provides information about the supported channel widths for very high throughput (VHT) networks.</p>
</li>
<li>
<p><strong>Check VHT Supported Channel Widths</strong>:
Within the VHT Capabilities IE, look for the "Supported Channel Width Set" field. This field indicates whether the AP supports 20 MHz, 40 MHz, 80 MHz, or 160 MHz channel widths. The field is typically represented as:</p>
<ul>
<li><code>0</code>: 20 MHz and 40 MHz</li>
<li><code>1</code>: 80 MHz</li>
<li><code>2</code>: 160 MHz and 80+80 MHz</li>
</ul>
</li>
<li>
<p><strong>Analyze HE Capabilities IE</strong>:
For 802.11ax (Wi-Fi 6) networks, locate the "HE Capabilities" information element. This IE provides information about the supported channel widths for high-efficiency (HE) networks.</p>
</li>
<li>
<p><strong>Check HE Supported Channel Widths</strong>:
Within the HE Capabilities IE, look for the "Supported Channel Width Set" field. This field indicates whether the AP supports 20 MHz, 40 MHz, 80 MHz, 160 MHz, or 80+80 MHz channel widths.</p>
</li>
</ol>
<h3 id="example"><a class="header" href="#example">Example</a></h3>
<p>Here is an example of how to identify the channel width from a beacon frame using Wireshark:</p>
<ol>
<li>Open Wireshark and start capturing packets on the desired Wi-Fi interface.</li>
<li>Filter the captured packets to display only beacon frames using the filter: <code>wlan.fc.type_subtype == 0x08</code>.</li>
<li>Select a beacon frame from the list and expand the "IEEE 802.11 wireless LAN management frame" section.</li>
<li>Locate the "HT Capabilities" IE and check the "Supported Channel Width Set" field.</li>
<li>If applicable, locate the "VHT Capabilities" IE and check the "Supported Channel Width Set" field.</li>
<li>If applicable, locate the "HE Capabilities" IE and check the "Supported Channel Width Set" field.</li>
</ol>
<p>By following these steps, you can determine the channel width supported by the Wi-Fi network from the beacon frames.</p>
<h3 id="tools"><a class="header" href="#tools">Tools</a></h3>
<ul>
<li><strong>Wireshark</strong>: A popular network protocol analyzer that can capture and analyze Wi-Fi packets, including beacon frames.</li>
<li><strong>Aircrack-ng</strong>: A suite of tools for capturing and analyzing Wi-Fi packets, including airodump-ng for capturing beacon frames.</li>
</ul>
<p>Understanding the channel width from beacon frames can help optimize Wi-Fi network performance and troubleshoot connectivity issues. By analyzing the beacon frames, you can gain insights into the network's capabilities and configuration.</p>
<h3 id="types-of-frames-in-wi-fi"><a class="header" href="#types-of-frames-in-wi-fi">Types of Frames in Wi-Fi</a></h3>
<p>Wi-Fi communication relies on the exchange of various types of frames between devices. These frames are categorized into three main types: management frames, control frames, and data frames. Each type of frame serves a specific purpose in the operation and maintenance of the Wi-Fi network.</p>
<ol>
<li>
<p><strong>Management Frames</strong>:
Management frames are used to establish and maintain connections between devices in a Wi-Fi network. They facilitate the discovery, authentication, and association processes. Common types of management frames include:</p>
<ul>
<li><strong>Beacon Frames</strong>: Broadcasted periodically by access points (APs) to announce the presence and capabilities of the network.</li>
<li><strong>Probe Request Frames</strong>: Sent by clients to discover available networks.</li>
<li><strong>Probe Response Frames</strong>: Sent by APs in response to probe requests, providing information about the network.</li>
<li><strong>Authentication Frames</strong>: Used to initiate the authentication process between a client and an AP.</li>
<li><strong>Deauthentication Frames</strong>: Used to terminate an existing authentication.</li>
<li><strong>Association Request Frames</strong>: Sent by clients to request association with an AP.</li>
<li><strong>Association Response Frames</strong>: Sent by APs in response to association requests, indicating acceptance or rejection.</li>
<li><strong>Disassociation Frames</strong>: Used to terminate an existing association.</li>
</ul>
</li>
<li>
<p><strong>Control Frames</strong>:
Control frames assist in the delivery of data frames and help manage access to the wireless medium. They ensure that data frames are transmitted efficiently and without collisions. Common types of control frames include:</p>
<ul>
<li><strong>Request to Send (RTS) Frames</strong>: Used to request permission to send data, helping to avoid collisions in a busy network.</li>
<li><strong>Clear to Send (CTS) Frames</strong>: Sent in response to RTS frames, granting permission to send data.</li>
<li><strong>Acknowledgment (ACK) Frames</strong>: Sent to confirm the successful receipt of data frames.</li>
<li><strong>Power Save Poll (PS-Poll) Frames</strong>: Used by clients in power-saving mode to request buffered data from the AP.</li>
</ul>
</li>
<li>
<p><strong>Data Frames</strong>:
Data frames carry the actual data payload between devices in a Wi-Fi network. They are used for the transmission of user data, such as web pages, emails, and file transfers. Data frames can also include additional information, such as quality of service (QoS) parameters, to prioritize certain types of traffic. Common types of data frames include:</p>
<ul>
<li><strong>Data Frames</strong>: Carry user data between devices.</li>
<li><strong>Null Data Frames</strong>: Used for power management, indicating that a device is awake or entering sleep mode.</li>
<li><strong>QoS Data Frames</strong>: Include QoS parameters to prioritize certain types of traffic, such as voice or video.</li>
</ul>
</li>
</ol>
<p>Understanding the different types of frames in Wi-Fi is essential for analyzing and troubleshooting wireless networks. Each frame type plays a crucial role in the overall operation and performance of the network, ensuring reliable and efficient communication between devices.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wifi-standards"><a class="header" href="#wifi-standards">Wifi Standards</a></h1>
<h2 id="80211"><a class="header" href="#80211">802.11</a></h2>
<h3 id="80211a"><a class="header" href="#80211a">802.11a</a></h3>
<ul>
<li>Released: 1999</li>
<li>Frequency: 5 GHz</li>
<li>Maximum Speed: 54 Mbps</li>
<li>Notes: First standard to use OFDM (Orthogonal Frequency Division Multiplexing).</li>
</ul>
<h3 id="80211b"><a class="header" href="#80211b">802.11b</a></h3>
<ul>
<li>Released: 1999</li>
<li>Frequency: 2.4 GHz</li>
<li>Maximum Speed: 11 Mbps</li>
<li>Notes: Uses DSSS (Direct Sequence Spread Spectrum) modulation.</li>
</ul>
<h3 id="80211g"><a class="header" href="#80211g">802.11g</a></h3>
<ul>
<li>Released: 2003</li>
<li>Frequency: 2.4 GHz</li>
<li>Maximum Speed: 54 Mbps</li>
<li>Notes: Backward compatible with 802.11b, uses OFDM.</li>
</ul>
<h3 id="80211n"><a class="header" href="#80211n">802.11n</a></h3>
<ul>
<li>Released: 2009</li>
<li>Frequency: 2.4 GHz and 5 GHz</li>
<li>Maximum Speed: 600 Mbps</li>
<li>Notes: Introduced MIMO (Multiple Input Multiple Output) technology.</li>
</ul>
<h3 id="80211ac"><a class="header" href="#80211ac">802.11ac</a></h3>
<ul>
<li>Released: 2013</li>
<li>Frequency: 5 GHz</li>
<li>Maximum Speed: 1.3 Gbps</li>
<li>Notes: Uses wider channels (80 or 160 MHz) and more spatial streams.</li>
</ul>
<h3 id="80211ax"><a class="header" href="#80211ax">802.11ax</a></h3>
<ul>
<li>Released: 2019</li>
<li>Frequency: 2.4 GHz and 5 GHz</li>
<li>Maximum Speed: 9.6 Gbps</li>
<li>Notes: Also known as Wi-Fi 6, introduces OFDMA (Orthogonal Frequency Division Multiple Access) and improved efficiency in dense environments.</li>
</ul>
<h3 id="80211be"><a class="header" href="#80211be">802.11be</a></h3>
<ul>
<li>Released: 2024</li>
<li>Frequency: 6 GHz</li>
<li>Maximum Speed: 48 Gbps</li>
<li>Notes: Also known as Wi-Fi 7, introduces EHT (Extremely High Throughput) technology.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wi-fi-security"><a class="header" href="#wi-fi-security">Wi-Fi Security</a></h1>
<p>Wi-Fi security is crucial for protecting wireless networks from unauthorized access and ensuring the confidentiality and integrity of data transmitted over the air. There are several wireless security protocols and mechanisms that have been developed over the years to enhance the security of Wi-Fi networks. Here are some of the most common wireless security protocols:</p>
<h3 id="wep-wired-equivalent-privacy"><a class="header" href="#wep-wired-equivalent-privacy">WEP (Wired Equivalent Privacy)</a></h3>
<ul>
<li><strong>Introduced</strong>: 1997</li>
<li><strong>Encryption</strong>: RC4 stream cipher</li>
<li><strong>Key Length</strong>: 40-bit or 104-bit</li>
<li><strong>Notes</strong>: WEP was the first security protocol for Wi-Fi networks, designed to provide a level of security comparable to that of a wired network. However, it has significant vulnerabilities and is considered insecure. It is no longer recommended for use.</li>
</ul>
<h3 id="wpa-wi-fi-protected-access"><a class="header" href="#wpa-wi-fi-protected-access">WPA (Wi-Fi Protected Access)</a></h3>
<ul>
<li><strong>Introduced</strong>: 2003</li>
<li><strong>Encryption</strong>: TKIP (Temporal Key Integrity Protocol)</li>
<li><strong>Key Length</strong>: 128-bit</li>
<li><strong>Notes</strong>: WPA was introduced as an interim solution to address the weaknesses of WEP. It uses TKIP to improve encryption and includes mechanisms for key management and integrity checking. While more secure than WEP, WPA has been largely replaced by WPA2.</li>
</ul>
<h3 id="wpa2-wi-fi-protected-access-ii"><a class="header" href="#wpa2-wi-fi-protected-access-ii">WPA2 (Wi-Fi Protected Access II)</a></h3>
<ul>
<li><strong>Introduced</strong>: 2004</li>
<li><strong>Encryption</strong>: AES (Advanced Encryption Standard)</li>
<li><strong>Key Length</strong>: 128-bit</li>
<li><strong>Notes</strong>: WPA2 is the most widely used Wi-Fi security protocol today. It uses AES for encryption, which is considered highly secure. WPA2 also includes support for CCMP (Counter Mode with Cipher Block Chaining Message Authentication Code Protocol) for data integrity and confidentiality. It is recommended for all modern Wi-Fi networks.</li>
</ul>
<h4 id="technical-details"><a class="header" href="#technical-details">Technical Details</a></h4>
<p>WPA2 operates in two modes: Personal (WPA2-PSK) and Enterprise (WPA2-Enterprise).</p>
<ol>
<li>
<p><strong>WPA2-Personal (Pre-Shared Key - PSK)</strong>:</p>
<ul>
<li>Uses a pre-shared key for authentication.</li>
<li>Suitable for home and small office networks.</li>
<li>The pre-shared key is used to derive the Pairwise Transient Key (PTK), which is used for encrypting data between the client and the access point.</li>
</ul>
</li>
<li>
<p><strong>WPA2-Enterprise</strong>:</p>
<ul>
<li>Uses 802.1X authentication with an external RADIUS server.</li>
<li>Suitable for enterprise and large networks.</li>
<li>Provides individual authentication credentials for each user.</li>
<li>Supports various Extensible Authentication Protocol (EAP) methods, such as EAP-TLS, EAP-TTLS, and PEAP.</li>
</ul>
</li>
</ol>
<h4 id="key-management"><a class="header" href="#key-management">Key Management</a></h4>
<p>WPA2 uses a robust key management framework to ensure secure communication:</p>
<ul>
<li><strong>Pairwise Master Key (PMK)</strong>: Derived from the pre-shared key (PSK) in WPA2-Personal or obtained through 802.1X authentication in WPA2-Enterprise.</li>
<li><strong>Pairwise Transient Key (PTK)</strong>: Derived from the PMK, the client MAC address, the access point MAC address, and nonces exchanged during the 4-way handshake. The PTK is used to encrypt unicast traffic between the client and the access point.</li>
<li><strong>Group Temporal Key (GTK)</strong>: Used to encrypt broadcast and multicast traffic. The GTK is generated by the access point and distributed to clients during the 4-way handshake.</li>
</ul>
<h4 id="4-way-handshake"><a class="header" href="#4-way-handshake">4-Way Handshake</a></h4>
<p>The 4-way handshake is a crucial process in WPA2 that ensures the secure exchange of encryption keys between the client and the access point:</p>
<ol>
<li><strong>Message 1</strong>: The access point sends an ANonce (a random number) to the client.</li>
<li><strong>Message 2</strong>: The client generates an SNonce (another random number) and uses it, along with the ANonce, to derive the PTK. The client then sends the SNonce to the access point.</li>
<li><strong>Message 3</strong>: The access point uses the SNonce and ANonce to derive the PTK. It then sends the GTK (encrypted with the PTK) and a message integrity code (MIC) to the client.</li>
<li><strong>Message 4</strong>: The client sends an acknowledgment to the access point, indicating that it has successfully installed the PTK and GTK.</li>
</ol>
<h4 id="authentication-and-key-management-akm-suites"><a class="header" href="#authentication-and-key-management-akm-suites">Authentication and Key Management (AKM) Suites</a></h4>
<p>WPA2 supports various AKM suites to provide flexibility in authentication methods:</p>
<ul>
<li><strong>PSK (Pre-Shared Key)</strong>: Used in WPA2-Personal for simple passphrase-based authentication.</li>
<li><strong>802.1X</strong>: Used in WPA2-Enterprise for authentication with a RADIUS server.</li>
<li><strong>FT (Fast Transition)</strong>: Also known as 802.11r, used to enable fast roaming between access points without re-authentication.</li>
<li><strong>SAE (Simultaneous Authentication of Equals)</strong>: Introduced in WPA3 but can be used in WPA2 for enhanced security.</li>
</ul>
<h4 id="frames-in-wpa2"><a class="header" href="#frames-in-wpa2">Frames in WPA2</a></h4>
<p>WPA2 uses several types of frames to manage security and encryption:</p>
<ul>
<li><strong>Authentication Frames</strong>: Used to initiate the authentication process between the client and the access point.</li>
<li><strong>Association Frames</strong>: Used to establish a connection between the client and the access point.</li>
<li><strong>EAPOL (Extensible Authentication Protocol over LAN) Frames</strong>: Used during the 4-way handshake to exchange nonces and encryption keys.</li>
<li><strong>Data Frames</strong>: Encrypted using the PTK for unicast traffic and the GTK for broadcast/multicast traffic.</li>
</ul>
<p>By understanding the technical details and mechanisms of WPA2, users and network administrators can ensure robust security for their Wi-Fi networks, protecting against unauthorized access and ensuring the confidentiality and integrity of their data.</p>
<h3 id="wpa3-wi-fi-protected-access-iii"><a class="header" href="#wpa3-wi-fi-protected-access-iii">WPA3 (Wi-Fi Protected Access III)</a></h3>
<ul>
<li><strong>Introduced</strong>: 2018</li>
<li><strong>Encryption</strong>: AES with GCMP (Galois/Counter Mode Protocol)</li>
<li><strong>Key Length</strong>: 128-bit or 192-bit</li>
<li><strong>Notes</strong>: WPA3 is the latest Wi-Fi security protocol, designed to provide enhanced security features over WPA2. It includes improvements such as Simultaneous Authentication of Equals (SAE) for stronger password-based authentication, forward secrecy to protect data even if a key is compromised, and improved protection against brute-force attacks. WPA3 is recommended for new Wi-Fi networks and devices.</li>
</ul>
<h4 id="key-management-1"><a class="header" href="#key-management-1">Key Management</a></h4>
<p>WPA3 introduces a more robust key management framework to enhance security:</p>
<ul>
<li><strong>Simultaneous Authentication of Equals (SAE)</strong>: A secure key establishment protocol that replaces the pre-shared key (PSK) method used in WPA2-Personal. SAE provides protection against offline dictionary attacks and ensures forward secrecy.</li>
<li><strong>Pairwise Master Key (PMK)</strong>: Derived from the SAE process in WPA3-Personal or obtained through 802.1X authentication in WPA3-Enterprise.</li>
<li><strong>Pairwise Transient Key (PTK)</strong>: Derived from the PMK, the client MAC address, the access point MAC address, and nonces exchanged during the 4-way handshake. The PTK is used to encrypt unicast traffic between the client and the access point.</li>
<li><strong>Group Temporal Key (GTK)</strong>: Used to encrypt broadcast and multicast traffic. The GTK is generated by the access point and distributed to clients during the 4-way handshake.</li>
</ul>
<h4 id="4-way-handshake-1"><a class="header" href="#4-way-handshake-1">4-Way Handshake</a></h4>
<p>The 4-way handshake in WPA3 is similar to WPA2 but includes enhancements for improved security:</p>
<ol>
<li><strong>Message 1</strong>: The access point sends an ANonce (a random number) to the client.</li>
<li><strong>Message 2</strong>: The client generates an SNonce (another random number) and uses it, along with the ANonce, to derive the PTK. The client then sends the SNonce to the access point.</li>
<li><strong>Message 3</strong>: The access point uses the SNonce and ANonce to derive the PTK. It then sends the GTK (encrypted with the PTK) and a message integrity code (MIC) to the client.</li>
<li><strong>Message 4</strong>: The client sends an acknowledgment to the access point, indicating that it has successfully installed the PTK and GTK.</li>
</ol>
<h4 id="authentication-and-key-management-akm-suites-1"><a class="header" href="#authentication-and-key-management-akm-suites-1">Authentication and Key Management (AKM) Suites</a></h4>
<p>WPA3 supports various AKM suites to provide flexibility in authentication methods:</p>
<ul>
<li><strong>SAE (Simultaneous Authentication of Equals)</strong>: Used in WPA3-Personal for secure password-based authentication.</li>
<li><strong>802.1X</strong>: Used in WPA3-Enterprise for authentication with a RADIUS server.</li>
<li><strong>Suite B</strong>: A set of cryptographic algorithms approved by the National Security Agency (NSA) for use in high-security environments. Suite B includes support for 192-bit encryption keys and elliptic curve cryptography (ECC).</li>
</ul>
<h4 id="frames-in-wpa3"><a class="header" href="#frames-in-wpa3">Frames in WPA3</a></h4>
<p>WPA3 uses several types of frames to manage security and encryption:</p>
<ul>
<li><strong>Authentication Frames</strong>: Used to initiate the authentication process between the client and the access point.</li>
<li><strong>Association Frames</strong>: Used to establish a connection between the client and the access point.</li>
<li><strong>EAPOL (Extensible Authentication Protocol over LAN) Frames</strong>: Used during the 4-way handshake to exchange nonces and encryption keys.</li>
<li><strong>Data Frames</strong>: Encrypted using the PTK for unicast traffic and the GTK for broadcast/multicast traffic.</li>
</ul>
<p>By understanding the technical details and mechanisms of WPA3, users and network administrators can ensure robust security for their Wi-Fi networks, protecting against unauthorized access and ensuring the confidentiality and integrity of their data.</p>
<h3 id="8021x-port-based-network-access-control"><a class="header" href="#8021x-port-based-network-access-control">802.1X (Port-Based Network Access Control)</a></h3>
<ul>
<li><strong>Introduced</strong>: 2001</li>
<li><strong>Authentication</strong>: EAP (Extensible Authentication Protocol)</li>
<li><strong>Notes</strong>: 802.1X is a network access control protocol that provides an authentication framework for wired and wireless networks. It is commonly used in enterprise environments to authenticate users and devices before granting access to the network. 802.1X can be used in conjunction with WPA2 and WPA3 for enhanced security.</li>
</ul>
<h4 id="technical-details-1"><a class="header" href="#technical-details-1">Technical Details</a></h4>
<p>802.1X operates at the data link layer (Layer 2) of the OSI model and uses the Extensible Authentication Protocol (EAP) to facilitate authentication. The protocol involves three main components:</p>
<ol>
<li><strong>Supplicant</strong>: The device (e.g., a laptop or smartphone) that requests access to the network.</li>
<li><strong>Authenticator</strong>: The network device (e.g., a switch or wireless access point) that controls access to the network.</li>
<li><strong>Authentication Server</strong>: The server (e.g., a RADIUS server) that validates the credentials of the supplicant.</li>
</ol>
<h4 id="authentication-process"><a class="header" href="#authentication-process">Authentication Process</a></h4>
<p>The 802.1X authentication process involves the following steps:</p>
<ol>
<li><strong>Initialization</strong>: The supplicant connects to the network and the authenticator detects the connection.</li>
<li><strong>EAPOL-Start</strong>: The supplicant sends an EAPOL-Start frame to the authenticator to initiate the authentication process.</li>
<li><strong>EAP-Request/Identity</strong>: The authenticator responds with an EAP-Request/Identity frame, asking the supplicant for its identity.</li>
<li><strong>EAP-Response/Identity</strong>: The supplicant replies with an EAP-Response/Identity frame, providing its identity to the authenticator.</li>
<li><strong>RADIUS Access-Request</strong>: The authenticator forwards the identity information to the authentication server in a RADIUS Access-Request message.</li>
<li><strong>RADIUS Access-Challenge</strong>: The authentication server may respond with a RADIUS Access-Challenge message, requesting additional information (e.g., a password or token).</li>
<li><strong>EAP-Request/Challenge</strong>: The authenticator forwards the challenge to the supplicant in an EAP-Request/Challenge frame.</li>
<li><strong>EAP-Response/Challenge</strong>: The supplicant responds with the requested information in an EAP-Response/Challenge frame.</li>
<li><strong>RADIUS Access-Accept</strong>: If the authentication server successfully validates the credentials, it sends a RADIUS Access-Accept message to the authenticator.</li>
<li><strong>EAP-Success</strong>: The authenticator informs the supplicant of successful authentication with an EAP-Success frame.</li>
<li><strong>Port Authorization</strong>: The authenticator grants access to the network by opening the port for the supplicant.</li>
</ol>
<h4 id="frames-in-8021x"><a class="header" href="#frames-in-8021x">Frames in 802.1X</a></h4>
<p>802.1X uses several types of frames to manage the authentication process:</p>
<ul>
<li>
<p><strong>EAPOL (Extensible Authentication Protocol over LAN) Frames</strong>: Used for communication between the supplicant and the authenticator.</p>
<ul>
<li><strong>EAPOL-Start</strong>: Initiates the authentication process.</li>
<li><strong>EAPOL-Logoff</strong>: Terminates the authentication session.</li>
<li><strong>EAPOL-Key</strong>: Used for key management in WPA/WPA2/WPA3.</li>
<li><strong>EAPOL-Packet</strong>: Carries EAP messages between the supplicant and the authenticator.</li>
</ul>
</li>
<li>
<p><strong>EAP (Extensible Authentication Protocol) Frames</strong>: Used for communication between the supplicant and the authentication server.</p>
<ul>
<li><strong>EAP-Request</strong>: Sent by the authenticator to request information from the supplicant.</li>
<li><strong>EAP-Response</strong>: Sent by the supplicant in response to an EAP-Request.</li>
<li><strong>EAP-Success</strong>: Indicates successful authentication.</li>
<li><strong>EAP-Failure</strong>: Indicates failed authentication.</li>
</ul>
</li>
</ul>
<h4 id="authentication-and-key-management-akm-suites-2"><a class="header" href="#authentication-and-key-management-akm-suites-2">Authentication and Key Management (AKM) Suites</a></h4>
<p>802.1X supports various AKM suites to provide flexibility in authentication methods:</p>
<ul>
<li><strong>EAP-TLS (Transport Layer Security)</strong>: Uses client and server certificates for mutual authentication.</li>
<li><strong>EAP-TTLS (Tunneled Transport Layer Security)</strong>: Establishes a secure tunnel using server certificates, then uses another authentication method (e.g., PAP, CHAP) within the tunnel.</li>
<li><strong>PEAP (Protected Extensible Authentication Protocol)</strong>: Similar to EAP-TTLS, but uses a different method for establishing the secure tunnel.</li>
<li><strong>EAP-MSCHAPv2 (Microsoft Challenge Handshake Authentication Protocol version 2)</strong>: Uses a password-based authentication mechanism.</li>
<li><strong>EAP-SIM (Subscriber Identity Module)</strong>: Uses the SIM card in mobile devices for authentication.</li>
</ul>
<p>By understanding the technical details and mechanisms of 802.1X, users and network administrators can ensure robust security for their wired and wireless networks, protecting against unauthorized access and ensuring the confidentiality and integrity of their data.</p>
<h3 id="wps-wi-fi-protected-setup"><a class="header" href="#wps-wi-fi-protected-setup">WPS (Wi-Fi Protected Setup)</a></h3>
<ul>
<li><strong>Introduced</strong>: 2007</li>
<li><strong>Notes</strong>: WPS is a network security standard designed to simplify the process of connecting devices to a Wi-Fi network. It allows users to connect to a network by pressing a button on the router or entering a PIN. However, WPS has known vulnerabilities and can be exploited by attackers to gain unauthorized access to the network. It is recommended to disable WPS if security is a concern.</li>
</ul>
<h3 id="mac-address-filtering"><a class="header" href="#mac-address-filtering">MAC Address Filtering</a></h3>
<ul>
<li><strong>Notes</strong>: MAC address filtering is a security measure that allows only devices with specific MAC addresses to connect to the Wi-Fi network. While it can provide an additional layer of security, it is not foolproof, as MAC addresses can be spoofed by attackers. It should be used in conjunction with other security measures.</li>
</ul>
<h3 id="guest-networks"><a class="header" href="#guest-networks">Guest Networks</a></h3>
<ul>
<li><strong>Notes</strong>: Many modern routers support the creation of guest networks, which provide a separate Wi-Fi network for visitors. Guest networks can be isolated from the main network, preventing guests from accessing sensitive resources. This is a useful feature for enhancing security in both home and business environments.</li>
</ul>
<p>By understanding and implementing these Wi-Fi security protocols and mechanisms, users and network administrators can protect their wireless networks from unauthorized access and ensure the confidentiality and integrity of their data.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wi-fi-scanning"><a class="header" href="#wi-fi-scanning">Wi-Fi Scanning</a></h1>
<p>Wi-Fi scanning is the process of identifying available wireless networks within range of a Wi-Fi-enabled device. This process is essential for connecting to Wi-Fi networks, troubleshooting connectivity issues, and optimizing network performance. Wi-Fi scanning can be performed using various tools and techniques, and it typically involves the following steps:</p>
<ol>
<li>
<p><strong>Initiate Scan</strong>:
The Wi-Fi-enabled device sends out probe request frames to discover available networks. These frames are broadcasted on different channels to ensure that all nearby networks are detected.</p>
</li>
<li>
<p><strong>Receive Probe Responses</strong>:
Access points (APs) within range respond to the probe request frames with probe response frames. These frames contain information about the network, such as the Service Set Identifier (SSID), supported data rates, security protocols, and other capabilities.</p>
</li>
<li>
<p><strong>Analyze Beacon Frames</strong>:
In addition to probe responses, the device can also listen for beacon frames that are periodically broadcasted by APs. Beacon frames contain similar information to probe responses and help the device identify available networks.</p>
</li>
<li>
<p><strong>Compile Network List</strong>:
The device compiles a list of available networks based on the received probe responses and beacon frames. This list includes details such as the SSID, signal strength (RSSI), channel, and security type of each network.</p>
</li>
<li>
<p><strong>Select Network</strong>:
The user or device selects a network from the list to connect to. The selection can be based on various factors, such as signal strength, network name, or security requirements.</p>
</li>
</ol>
<h3 id="tools-for-wi-fi-scanning"><a class="header" href="#tools-for-wi-fi-scanning">Tools for Wi-Fi Scanning</a></h3>
<p>Several tools and utilities can be used for Wi-Fi scanning, including:</p>
<ul>
<li><strong>Wireshark</strong>: A network protocol analyzer that can capture and analyze Wi-Fi packets, including probe requests, probe responses, and beacon frames.</li>
<li><strong>NetSpot</strong>: A Wi-Fi survey and analysis tool that provides detailed information about available networks, including signal strength, channel usage, and security settings.</li>
<li><strong>inSSIDer</strong>: A Wi-Fi scanner that displays information about nearby networks, such as SSID, signal strength, channel, and security type.</li>
<li><strong>Acrylic Wi-Fi</strong>: A Wi-Fi scanner and analyzer that provides real-time information about available networks, including signal strength, channel usage, and network performance metrics.</li>
</ul>
<h3 id="importance-of-wi-fi-scanning"><a class="header" href="#importance-of-wi-fi-scanning">Importance of Wi-Fi Scanning</a></h3>
<p>Wi-Fi scanning is crucial for several reasons:</p>
<ul>
<li><strong>Network Discovery</strong>: It allows users to discover available networks and choose the best one to connect to.</li>
<li><strong>Troubleshooting</strong>: It helps identify connectivity issues, such as weak signals, interference, or misconfigured settings.</li>
<li><strong>Optimization</strong>: It provides insights into network performance and helps optimize the configuration, such as selecting the best channel to minimize interference.</li>
<li><strong>Security</strong>: It helps identify unauthorized or rogue access points that may pose a security threat to the network.</li>
</ul>
<p>By understanding and utilizing Wi-Fi scanning techniques, users and network administrators can ensure reliable and efficient wireless connectivity.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="roaming"><a class="header" href="#roaming">Roaming</a></h1>
<h2 id="80211r"><a class="header" href="#80211r">802.11r</a></h2>
<ul>
<li>Also known as Fast BSS Transition (FT).</li>
<li>Released: 2008.</li>
<li>Purpose: Improves the speed of the handoff process between access points.</li>
<li>Notes: Reduces the time required for re-authentication when a device moves from one AP to another.</li>
</ul>
<h3 id="technical-details-of-80211r"><a class="header" href="#technical-details-of-80211r">Technical Details of 802.11r</a></h3>
<p>802.11r, also known as Fast BSS Transition (FT), is a standard that aims to improve the handoff process between access points (APs) in a wireless network. This is particularly important for applications that require seamless connectivity, such as VoIP (Voice over IP) and real-time video streaming. Here are some key technical details:</p>
<ol>
<li>
<p><strong>Key Caching</strong>:</p>
<ul>
<li>802.11r introduces the concept of key caching, which allows a client device to reuse the Pairwise Master Key (PMK) from a previous connection when roaming to a new AP. This reduces the time required for re-authentication.</li>
</ul>
</li>
<li>
<p><strong>Fast Transition (FT) Protocol</strong>:</p>
<ul>
<li>The FT protocol defines two methods for fast transitions: over-the-air and over-the-DS (Distribution System).
<ul>
<li><strong>Over-the-Air</strong>: The client communicates directly with the target AP to perform the handoff.</li>
<li><strong>Over-the-DS</strong>: The client communicates with the target AP through the current AP, using the wired network (DS) as an intermediary.</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>Reduced Latency</strong>:</p>
<ul>
<li>By minimizing the time required for re-authentication and key exchange, 802.11r significantly reduces the latency associated with roaming. This is crucial for maintaining the quality of real-time applications.</li>
</ul>
</li>
<li>
<p><strong>FT Initial Mobility Domain Association</strong>:</p>
<ul>
<li>When a client first associates with an AP in an 802.11r-enabled network, it performs an FT Initial Mobility Domain Association. This process establishes the necessary security context and prepares the client for fast transitions within the mobility domain.</li>
</ul>
</li>
<li>
<p><strong>Mobility Domain Information Element (MDIE)</strong>:</p>
<ul>
<li>The MDIE is included in the beacon frames and probe responses of 802.11r-enabled APs. It provides information about the mobility domain, allowing client devices to identify and connect to APs that support fast transitions.</li>
</ul>
</li>
<li>
<p><strong>Fast BSS Transition Information Element (FTIE)</strong>:</p>
<ul>
<li>The FTIE is used during the authentication and reassociation processes to carry the necessary cryptographic information for fast transitions. It ensures that the security context is properly established and maintained during the handoff.</li>
</ul>
</li>
<li>
<p><strong>Compatibility</strong>:</p>
<ul>
<li>802.11r is designed to be backward compatible with non-802.11r devices. APs can support both 802.11r and non-802.11r clients simultaneously, ensuring a smooth transition for devices that do not support the standard.</li>
</ul>
</li>
</ol>
<p>By implementing these technical features, 802.11r enhances the efficiency and reliability of the roaming process, providing a better user experience in environments with multiple access points.</p>
<h2 id="80211k"><a class="header" href="#80211k">802.11k</a></h2>
<ul>
<li>Also known as Radio Resource Management (RRM).</li>
<li>Released: 2008.</li>
<li>Purpose: Provides mechanisms for measuring and reporting the radio environment.</li>
<li>Notes: Helps devices make better roaming decisions by providing information about neighboring APs.</li>
</ul>
<h3 id="technical-details-of-80211k"><a class="header" href="#technical-details-of-80211k">Technical Details of 802.11k</a></h3>
<p>802.11k, also known as Radio Resource Management (RRM), is a standard that provides mechanisms for measuring and reporting the radio environment. This information helps client devices make better roaming decisions by providing data about neighboring access points (APs). Here are some key technical details:</p>
<ol>
<li>
<p><strong>Neighbor Reports</strong>:</p>
<ul>
<li>802.11k enables APs to provide neighbor reports to client devices. These reports contain information about nearby APs, including their signal strength, channel, and supported data rates. This helps clients identify the best AP to roam to.</li>
</ul>
</li>
<li>
<p><strong>Beacon Reports</strong>:</p>
<ul>
<li>Client devices can request beacon reports from APs. These reports include details about the beacons received from neighboring APs, such as signal strength and channel utilization. This information assists clients in making informed roaming decisions.</li>
</ul>
</li>
<li>
<p><strong>Channel Load Reports</strong>:</p>
<ul>
<li>APs can provide channel load reports, which indicate the level of traffic on a particular channel. This helps client devices avoid congested channels and select APs operating on less crowded frequencies.</li>
</ul>
</li>
<li>
<p><strong>Noise Histogram Reports</strong>:</p>
<ul>
<li>Noise histogram reports provide information about the noise levels on different channels. By analyzing these reports, client devices can avoid channels with high levels of interference, improving overall network performance.</li>
</ul>
</li>
<li>
<p><strong>Transmit Stream/Category Measurement Reports</strong>:</p>
<ul>
<li>These reports provide data on the performance of specific traffic streams or categories. This helps client devices assess the quality of service (QoS) provided by different APs and make better roaming decisions based on their specific needs.</li>
</ul>
</li>
<li>
<p><strong>Location Tracking</strong>:</p>
<ul>
<li>802.11k supports location tracking features, allowing APs to track the location of client devices within the network. This information can be used to optimize network performance and improve the accuracy of neighbor reports.</li>
</ul>
</li>
<li>
<p><strong>Link Measurement Reports</strong>:</p>
<ul>
<li>Link measurement reports provide detailed information about the quality of the wireless link between the client device and the AP. This includes metrics such as signal-to-noise ratio (SNR) and packet error rate (PER), which help clients evaluate the performance of their current connection and potential target APs.</li>
</ul>
</li>
</ol>
<p>By implementing these technical features, 802.11k enhances the ability of client devices to make informed roaming decisions, leading to improved network performance and a better user experience in environments with multiple access points.</p>
<h2 id="80211v"><a class="header" href="#80211v">802.11v</a></h2>
<ul>
<li>Also known as Wireless Network Management.</li>
<li>Released: 2011.</li>
<li>Purpose: Enhances network management by providing mechanisms for configuring client devices.</li>
<li>Notes: Includes features like BSS Transition Management, which helps devices roam more efficiently.</li>
</ul>
<h3 id="technical-details-of-80211v"><a class="header" href="#technical-details-of-80211v">Technical Details of 802.11v</a></h3>
<p>802.11v, also known as Wireless Network Management, is a standard that enhances network management by providing mechanisms for configuring client devices. This standard includes several features that improve the efficiency and performance of wireless networks. Here are some key technical details:</p>
<ol>
<li>
<p><strong>BSS Transition Management</strong>:</p>
<ul>
<li>802.11v provides BSS Transition Management, which helps client devices make better roaming decisions. APs can suggest the best APs for clients to roam to, based on factors like signal strength and load.</li>
</ul>
</li>
<li>
<p><strong>Network Assisted Power Savings</strong>:</p>
<ul>
<li>This feature allows APs to provide information to client devices about the best times to enter power-saving modes. By coordinating power-saving activities, 802.11v helps extend battery life for client devices.</li>
</ul>
</li>
<li>
<p><strong>Traffic Filtering Service (TFS)</strong>:</p>
<ul>
<li>TFS enables APs to filter traffic for client devices, reducing the amount of unnecessary data that clients need to process. This helps improve the efficiency of the network and reduces power consumption for client devices.</li>
</ul>
</li>
<li>
<p><strong>Wireless Network Management (WNM) Sleep Mode</strong>:</p>
<ul>
<li>WNM Sleep Mode allows client devices to enter a low-power sleep state while remaining connected to the network. APs can buffer data for sleeping clients and deliver it when they wake up, improving power efficiency without sacrificing connectivity.</li>
</ul>
</li>
<li>
<p><strong>Diagnostic and Reporting</strong>:</p>
<ul>
<li>802.11v includes mechanisms for diagnostic and reporting, allowing APs and client devices to exchange information about network performance and issues. This helps network administrators identify and resolve problems more quickly.</li>
</ul>
</li>
<li>
<p><strong>Location Services</strong>:</p>
<ul>
<li>The standard supports location services, enabling APs to provide location-based information to client devices. This can be used for applications like asset tracking and location-based services.</li>
</ul>
</li>
</ol>
<p>By implementing these technical features, 802.11v enhances the management and performance of wireless networks, leading to improved efficiency, better power management, and a more reliable user experience in environments with multiple access points.</p>
<h2 id="80211w"><a class="header" href="#80211w">802.11w</a></h2>
<ul>
<li>Also known as Protected Management Frames (PMF).</li>
<li>Released: 2009.</li>
<li>Purpose: Enhances the security of management frames.</li>
<li>Notes: Protects against certain types of attacks, such as deauthentication and disassociation attacks.</li>
</ul>
<h3 id="technical-details-of-80211w"><a class="header" href="#technical-details-of-80211w">Technical Details of 802.11w</a></h3>
<p>802.11w, also known as Protected Management Frames (PMF), is a standard that enhances the security of management frames in wireless networks. This standard provides mechanisms to protect against certain types of attacks, such as deauthentication and disassociation attacks. Here are some key technical details:</p>
<ol>
<li>
<p><strong>Management Frame Protection</strong>:</p>
<ul>
<li>802.11w provides protection for management frames, which are used for network control and signaling. By securing these frames, the standard helps prevent attackers from disrupting network operations.</li>
</ul>
</li>
<li>
<p><strong>Protected Management Frames (PMF)</strong>:</p>
<ul>
<li>PMF ensures that management frames are both encrypted and authenticated. This prevents unauthorized devices from injecting malicious management frames into the network.</li>
</ul>
</li>
<li>
<p><strong>Robust Security Network (RSN) Associations</strong>:</p>
<ul>
<li>802.11w requires the use of RSN associations, which provide a secure method for devices to join the network. This includes the use of cryptographic techniques to protect the integrity and confidentiality of management frames.</li>
</ul>
</li>
<li>
<p><strong>Replay Protection</strong>:</p>
<ul>
<li>The standard includes mechanisms to protect against replay attacks, where an attacker captures and retransmits management frames to disrupt network operations. By using sequence numbers and timestamps, 802.11w ensures that management frames cannot be reused maliciously.</li>
</ul>
</li>
<li>
<p><strong>Deauthentication and Disassociation Protection</strong>:</p>
<ul>
<li>802.11w specifically addresses deauthentication and disassociation attacks, where an attacker forces a device to disconnect from the network. By securing these management frames, the standard helps maintain stable and reliable network connections.</li>
</ul>
</li>
</ol>
<p>By implementing these technical features, 802.11w enhances the security of wireless networks, protecting against various types of attacks and ensuring the integrity and reliability of network operations.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="qos-management"><a class="header" href="#qos-management">QoS Management</a></h1>
<h2 id="qos-map"><a class="header" href="#qos-map">QoS Map</a></h2>
<h2 id="mscs"><a class="header" href="#mscs">MSCS</a></h2>
<h2 id="scs"><a class="header" href="#scs">SCS</a></h2>
<h2 id="dscp-policy"><a class="header" href="#dscp-policy">DSCP Policy</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="machine-learning"><a class="header" href="#machine-learning">Machine Learning</a></h1>
<p>A comprehensive guide to machine learning concepts, algorithms, and implementations.</p>
<h2 id="table-of-contents-5"><a class="header" href="#table-of-contents-5">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/./supervised_learning.html">Supervised Learning</a> - Classification, regression, and supervised algorithms</li>
<li><a href="machine_learning/./unsupervised_learning.html">Unsupervised Learning</a> - Clustering and dimensionality reduction</li>
<li><a href="machine_learning/./reinforcement_learning.html">Reinforcement Learning</a> - RL concepts, Q-learning, and policy gradients</li>
<li><a href="machine_learning/./deep_learning.html">Deep Learning</a> - Neural networks, CNNs, RNNs, and training techniques</li>
<li><a href="machine_learning/./deep_reinforcement_learning.html">Deep Reinforcement Learning</a> - DQN, A3C, PPO, and advanced RL</li>
<li><a href="machine_learning/./generative_models.html">Generative Models</a> - GANs, VAEs, and flow-based models</li>
<li><a href="machine_learning/./deep_generative_models.html">Deep Generative Models</a> - Advanced generative architectures</li>
<li><a href="machine_learning/./transfer_learning.html">Transfer Learning</a> - Pre-training, fine-tuning, and domain adaptation</li>
<li><a href="machine_learning/./hugging_face.html">Hugging Face</a> - Transformers library, models, and datasets</li>
<li><a href="machine_learning/./interesting_papers.html">Interesting Papers</a> - Key ML papers and summaries</li>
</ol>
<h2 id="overview-27"><a class="header" href="#overview-27">Overview</a></h2>
<p>Machine Learning is a field of artificial intelligence that focuses on building systems that learn from data. The field can be broadly categorized into:</p>
<h3 id="supervised-learning"><a class="header" href="#supervised-learning">Supervised Learning</a></h3>
<p>Learning from labeled data where each example has an input-output pair. The goal is to learn a mapping from inputs to outputs.</p>
<ul>
<li><strong>Classification</strong>: Predicting discrete categories (e.g., spam/not spam)</li>
<li><strong>Regression</strong>: Predicting continuous values (e.g., house prices)</li>
</ul>
<h3 id="unsupervised-learning"><a class="header" href="#unsupervised-learning">Unsupervised Learning</a></h3>
<p>Learning patterns from unlabeled data without explicit output labels.</p>
<ul>
<li><strong>Clustering</strong>: Grouping similar data points together</li>
<li><strong>Dimensionality Reduction</strong>: Reducing the number of features while preserving information</li>
<li><strong>Anomaly Detection</strong>: Identifying outliers in data</li>
</ul>
<h3 id="reinforcement-learning"><a class="header" href="#reinforcement-learning">Reinforcement Learning</a></h3>
<p>Learning through interaction with an environment to maximize cumulative rewards.</p>
<ul>
<li><strong>Model-free RL</strong>: Learning without modeling the environment</li>
<li><strong>Model-based RL</strong>: Learning a model of the environment</li>
<li><strong>Deep RL</strong>: Combining deep learning with reinforcement learning</li>
</ul>
<h2 id="key-concepts-13"><a class="header" href="#key-concepts-13">Key Concepts</a></h2>
<h3 id="the-machine-learning-pipeline"><a class="header" href="#the-machine-learning-pipeline">The Machine Learning Pipeline</a></h3>
<pre><code class="language-python">import numpy as np
from sklearn.model_selection import train_test_split
from sklearn.preprocessing import StandardScaler
from sklearn.linear_model import LogisticRegression
from sklearn.metrics import accuracy_score, classification_report

# 1. Load and prepare data
X, y = load_data()  # Features and labels

# 2. Split data
X_train, X_test, y_train, y_test = train_test_split(
    X, y, test_size=0.2, random_state=42
)

# 3. Preprocess data
scaler = StandardScaler()
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)

# 4. Train model
model = LogisticRegression()
model.fit(X_train_scaled, y_train)

# 5. Evaluate
y_pred = model.predict(X_test_scaled)
print(f"Accuracy: {accuracy_score(y_test, y_pred):.4f}")
print(classification_report(y_test, y_pred))
</code></pre>
<h3 id="bias-variance-tradeoff"><a class="header" href="#bias-variance-tradeoff">Bias-Variance Tradeoff</a></h3>
<p>The bias-variance tradeoff is a fundamental concept in machine learning:</p>
<ul>
<li><strong>Bias</strong>: Error from overly simplistic assumptions (underfitting)</li>
<li><strong>Variance</strong>: Error from sensitivity to small fluctuations in training data (overfitting)</li>
<li><strong>Total Error</strong> = Bias² + Variance + Irreducible Error</li>
</ul>
<pre><code class="language-python">import matplotlib.pyplot as plt
from sklearn.model_selection import learning_curve

def plot_learning_curve(estimator, X, y):
    train_sizes, train_scores, val_scores = learning_curve(
        estimator, X, y, cv=5, n_jobs=-1,
        train_sizes=np.linspace(0.1, 1.0, 10)
    )
    
    train_mean = np.mean(train_scores, axis=1)
    train_std = np.std(train_scores, axis=1)
    val_mean = np.mean(val_scores, axis=1)
    val_std = np.std(val_scores, axis=1)
    
    plt.figure(figsize=(10, 6))
    plt.plot(train_sizes, train_mean, label='Training score')
    plt.plot(train_sizes, val_mean, label='Validation score')
    plt.fill_between(train_sizes, train_mean - train_std, 
                     train_mean + train_std, alpha=0.1)
    plt.fill_between(train_sizes, val_mean - val_std, 
                     val_mean + val_std, alpha=0.1)
    plt.xlabel('Training Set Size')
    plt.ylabel('Score')
    plt.legend()
    plt.title('Learning Curve')
    plt.show()
</code></pre>
<h3 id="cross-validation"><a class="header" href="#cross-validation">Cross-Validation</a></h3>
<p>Cross-validation helps assess model performance and reduce overfitting:</p>
<pre><code class="language-python">from sklearn.model_selection import cross_val_score, KFold

# K-Fold Cross-Validation
kfold = KFold(n_splits=5, shuffle=True, random_state=42)
scores = cross_val_score(model, X, y, cv=kfold, scoring='accuracy')
print(f"Cross-validation scores: {scores}")
print(f"Mean accuracy: {scores.mean():.4f} (+/- {scores.std() * 2:.4f})")

# Stratified K-Fold (maintains class distribution)
from sklearn.model_selection import StratifiedKFold
skfold = StratifiedKFold(n_splits=5, shuffle=True, random_state=42)
scores = cross_val_score(model, X, y, cv=skfold, scoring='accuracy')
</code></pre>
<h3 id="regularization"><a class="header" href="#regularization">Regularization</a></h3>
<p>Regularization techniques help prevent overfitting:</p>
<p><strong>L1 Regularization (Lasso)</strong>: Encourages sparsity</p>
<pre><code>Loss = MSE + λ * Σ|w_i|
</code></pre>
<p><strong>L2 Regularization (Ridge)</strong>: Penalizes large weights</p>
<pre><code>Loss = MSE + λ * Σw_i²
</code></pre>
<p><strong>Elastic Net</strong>: Combines L1 and L2</p>
<pre><code>Loss = MSE + λ₁ * Σ|w_i| + λ₂ * Σw_i²
</code></pre>
<pre><code class="language-python">from sklearn.linear_model import Lasso, Ridge, ElasticNet

# L1 Regularization
lasso = Lasso(alpha=0.1)
lasso.fit(X_train, y_train)

# L2 Regularization
ridge = Ridge(alpha=1.0)
ridge.fit(X_train, y_train)

# Elastic Net
elastic = ElasticNet(alpha=0.1, l1_ratio=0.5)
elastic.fit(X_train, y_train)
</code></pre>
<h3 id="feature-engineering"><a class="header" href="#feature-engineering">Feature Engineering</a></h3>
<p>Feature engineering is crucial for model performance:</p>
<pre><code class="language-python">import pandas as pd
from sklearn.preprocessing import PolynomialFeatures, OneHotEncoder

# Polynomial features
poly = PolynomialFeatures(degree=2, include_bias=False)
X_poly = poly.fit_transform(X)

# One-hot encoding for categorical variables
encoder = OneHotEncoder(sparse=False, drop='first')
X_encoded = encoder.fit_transform(df[['category1', 'category2']])

# Feature scaling
from sklearn.preprocessing import MinMaxScaler, RobustScaler

# Min-Max scaling (0 to 1)
minmax_scaler = MinMaxScaler()
X_minmax = minmax_scaler.fit_transform(X)

# Robust scaling (uses median and IQR)
robust_scaler = RobustScaler()
X_robust = robust_scaler.fit_transform(X)
</code></pre>
<h3 id="hyperparameter-tuning"><a class="header" href="#hyperparameter-tuning">Hyperparameter Tuning</a></h3>
<pre><code class="language-python">from sklearn.model_selection import GridSearchCV, RandomizedSearchCV
from sklearn.ensemble import RandomForestClassifier

# Grid Search
param_grid = {
    'n_estimators': [100, 200, 300],
    'max_depth': [10, 20, 30, None],
    'min_samples_split': [2, 5, 10],
    'min_samples_leaf': [1, 2, 4]
}

grid_search = GridSearchCV(
    RandomForestClassifier(),
    param_grid,
    cv=5,
    scoring='accuracy',
    n_jobs=-1
)
grid_search.fit(X_train, y_train)
print(f"Best parameters: {grid_search.best_params_}")

# Randomized Search (faster for large parameter spaces)
from scipy.stats import randint, uniform

param_distributions = {
    'n_estimators': randint(100, 500),
    'max_depth': randint(10, 50),
    'min_samples_split': randint(2, 20),
    'min_samples_leaf': randint(1, 10)
}

random_search = RandomizedSearchCV(
    RandomForestClassifier(),
    param_distributions,
    n_iter=100,
    cv=5,
    random_state=42,
    n_jobs=-1
)
random_search.fit(X_train, y_train)
</code></pre>
<h2 id="evaluation-metrics"><a class="header" href="#evaluation-metrics">Evaluation Metrics</a></h2>
<h3 id="classification-metrics"><a class="header" href="#classification-metrics">Classification Metrics</a></h3>
<pre><code class="language-python">from sklearn.metrics import (
    accuracy_score, precision_score, recall_score, f1_score,
    confusion_matrix, roc_auc_score, roc_curve
)

# Basic metrics
accuracy = accuracy_score(y_test, y_pred)
precision = precision_score(y_test, y_pred, average='weighted')
recall = recall_score(y_test, y_pred, average='weighted')
f1 = f1_score(y_test, y_pred, average='weighted')

# Confusion matrix
cm = confusion_matrix(y_test, y_pred)
print(cm)

# ROC-AUC
y_proba = model.predict_proba(X_test)[:, 1]
auc = roc_auc_score(y_test, y_proba)
fpr, tpr, thresholds = roc_curve(y_test, y_proba)

# Plot ROC curve
plt.figure(figsize=(8, 6))
plt.plot(fpr, tpr, label=f'ROC curve (AUC = {auc:.2f})')
plt.plot([0, 1], [0, 1], 'k--', label='Random classifier')
plt.xlabel('False Positive Rate')
plt.ylabel('True Positive Rate')
plt.title('ROC Curve')
plt.legend()
plt.show()
</code></pre>
<h3 id="regression-metrics"><a class="header" href="#regression-metrics">Regression Metrics</a></h3>
<pre><code class="language-python">from sklearn.metrics import mean_squared_error, mean_absolute_error, r2_score

# Mean Squared Error
mse = mean_squared_error(y_test, y_pred)
rmse = np.sqrt(mse)

# Mean Absolute Error
mae = mean_absolute_error(y_test, y_pred)

# R² Score
r2 = r2_score(y_test, y_pred)

print(f"RMSE: {rmse:.4f}")
print(f"MAE: {mae:.4f}")
print(f"R² Score: {r2:.4f}")
</code></pre>
<h2 id="common-pitfalls-and-best-practices"><a class="header" href="#common-pitfalls-and-best-practices">Common Pitfalls and Best Practices</a></h2>
<h3 id="1-data-leakage"><a class="header" href="#1-data-leakage">1. Data Leakage</a></h3>
<p>Ensure test data doesn't leak into training:</p>
<pre><code class="language-python"># WRONG: Scaling before splitting
X_scaled = scaler.fit_transform(X)
X_train, X_test = train_test_split(X_scaled)

# CORRECT: Fit scaler only on training data
X_train, X_test = train_test_split(X)
X_train_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)
</code></pre>
<h3 id="2-class-imbalance"><a class="header" href="#2-class-imbalance">2. Class Imbalance</a></h3>
<p>Handle imbalanced datasets:</p>
<pre><code class="language-python">from imblearn.over_sampling import SMOTE
from imblearn.under_sampling import RandomUnderSampler

# SMOTE (Synthetic Minority Over-sampling)
smote = SMOTE(random_state=42)
X_resampled, y_resampled = smote.fit_resample(X_train, y_train)

# Class weights
model = LogisticRegression(class_weight='balanced')
</code></pre>
<h3 id="3-feature-selection"><a class="header" href="#3-feature-selection">3. Feature Selection</a></h3>
<p>Remove irrelevant features:</p>
<pre><code class="language-python">from sklearn.feature_selection import (
    SelectKBest, f_classif, RFE, SelectFromModel
)

# Univariate feature selection
selector = SelectKBest(f_classif, k=10)
X_selected = selector.fit_transform(X_train, y_train)

# Recursive Feature Elimination
rfe = RFE(estimator=LogisticRegression(), n_features_to_select=10)
X_rfe = rfe.fit_transform(X_train, y_train)

# Model-based selection
sfm = SelectFromModel(RandomForestClassifier(), threshold='median')
X_sfm = sfm.fit_transform(X_train, y_train)
</code></pre>
<h2 id="resources-3"><a class="header" href="#resources-3">Resources</a></h2>
<ul>
<li>
<p><strong>Books</strong>:</p>
<ul>
<li>"Pattern Recognition and Machine Learning" by Christopher Bishop</li>
<li>"The Elements of Statistical Learning" by Hastie, Tibshirani, and Friedman</li>
<li>"Deep Learning" by Goodfellow, Bengio, and Courville</li>
</ul>
</li>
<li>
<p><strong>Courses</strong>:</p>
<ul>
<li>Andrew Ng's Machine Learning Course (Coursera)</li>
<li>Fast.ai Practical Deep Learning</li>
<li>Stanford CS229: Machine Learning</li>
</ul>
</li>
<li>
<p><strong>Libraries</strong>:</p>
<ul>
<li>scikit-learn: Traditional ML algorithms</li>
<li>PyTorch: Deep learning framework</li>
<li>TensorFlow/Keras: Deep learning framework</li>
<li>XGBoost/LightGBM: Gradient boosting</li>
<li>Hugging Face: Transformers and NLP</li>
</ul>
</li>
</ul>
<h2 id="quick-reference-4"><a class="header" href="#quick-reference-4">Quick Reference</a></h2>
<h3 id="model-selection-guide"><a class="header" href="#model-selection-guide">Model Selection Guide</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Problem Type</th><th>Recommended Models</th></tr></thead><tbody>
<tr><td>Linear separable data</td><td>Logistic Regression, SVM (linear)</td></tr>
<tr><td>Non-linear data</td><td>Random Forest, XGBoost, Neural Networks</td></tr>
<tr><td>High-dimensional data</td><td>Ridge/Lasso Regression, SVM</td></tr>
<tr><td>Small dataset</td><td>SVM, Naive Bayes, Linear Models</td></tr>
<tr><td>Large dataset</td><td>SGD-based models, Deep Learning</td></tr>
<tr><td>Interpretability needed</td><td>Linear Models, Decision Trees</td></tr>
<tr><td>Image data</td><td>CNNs, Vision Transformers</td></tr>
<tr><td>Text data</td><td>Transformers, RNNs, TF-IDF + Classical ML</td></tr>
<tr><td>Time series</td><td>RNNs, LSTMs, Transformers, ARIMA</td></tr>
<tr><td>Tabular data</td><td>XGBoost, LightGBM, Random Forest</td></tr>
</tbody></table>
</div>
<h3 id="performance-optimization"><a class="header" href="#performance-optimization">Performance Optimization</a></h3>
<pre><code class="language-python"># Use efficient data structures
import pandas as pd
df = pd.read_csv('data.csv', dtype={'col1': 'category'})

# Parallel processing
from joblib import Parallel, delayed
results = Parallel(n_jobs=-1)(delayed(process)(x) for x in data)

# Batch processing for large datasets
def batch_process(data, batch_size=1000):
    for i in range(0, len(data), batch_size):
        batch = data[i:i+batch_size]
        yield process_batch(batch)

# Use generators for memory efficiency
def data_generator(file_path):
    for chunk in pd.read_csv(file_path, chunksize=1000):
        yield chunk
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deep-learning"><a class="header" href="#deep-learning">Deep Learning</a></h1>
<p>Deep learning uses artificial neural networks with multiple layers to learn hierarchical representations of data.</p>
<h2 id="table-of-contents-6"><a class="header" href="#table-of-contents-6">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/deep_learning.html#neural-networks-fundamentals">Neural Networks Fundamentals</a></li>
<li><a href="machine_learning/deep_learning.html#activation-functions">Activation Functions</a></li>
<li><a href="machine_learning/deep_learning.html#loss-functions">Loss Functions</a></li>
<li><a href="machine_learning/deep_learning.html#optimization">Optimization</a></li>
<li><a href="machine_learning/deep_learning.html#regularization">Regularization</a></li>
<li><a href="machine_learning/deep_learning.html#convolutional-neural-networks">Convolutional Neural Networks (CNNs)</a></li>
<li><a href="machine_learning/deep_learning.html#recurrent-neural-networks">Recurrent Neural Networks (RNNs)</a></li>
<li><a href="machine_learning/deep_learning.html#attention-mechanisms">Attention Mechanisms</a></li>
<li><a href="machine_learning/deep_learning.html#batch-normalization">Batch Normalization</a></li>
<li><a href="machine_learning/deep_learning.html#advanced-architectures">Advanced Architectures</a></li>
</ol>
<h2 id="neural-networks-fundamentals"><a class="header" href="#neural-networks-fundamentals">Neural Networks Fundamentals</a></h2>
<h3 id="perceptron"><a class="header" href="#perceptron">Perceptron</a></h3>
<p>The basic building block of neural networks.</p>
<p><strong>Mathematical Formulation:</strong></p>
<pre><code>y = f(Σ(w_i * x_i) + b)
</code></pre>
<p>Where:</p>
<ul>
<li>x_i: inputs</li>
<li>w_i: weights</li>
<li>b: bias</li>
<li>f: activation function</li>
</ul>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
import numpy as np

# Simple perceptron
class Perceptron(nn.Module):
    def __init__(self, input_dim):
        super(Perceptron, self).__init__()
        self.linear = nn.Linear(input_dim, 1)
        self.sigmoid = nn.Sigmoid()
    
    def forward(self, x):
        return self.sigmoid(self.linear(x))

# Example usage
input_dim = 4
model = Perceptron(input_dim)
x = torch.randn(32, input_dim)
output = model(x)
print(f"Output shape: {output.shape}")
</code></pre>
<h3 id="multi-layer-perceptron-mlp"><a class="header" href="#multi-layer-perceptron-mlp">Multi-Layer Perceptron (MLP)</a></h3>
<pre><code class="language-python">class MLP(nn.Module):
    def __init__(self, input_dim, hidden_dims, output_dim):
        super(MLP, self).__init__()
        
        layers = []
        prev_dim = input_dim
        
        # Hidden layers
        for hidden_dim in hidden_dims:
            layers.append(nn.Linear(prev_dim, hidden_dim))
            layers.append(nn.ReLU())
            prev_dim = hidden_dim
        
        # Output layer
        layers.append(nn.Linear(prev_dim, output_dim))
        
        self.network = nn.Sequential(*layers)
    
    def forward(self, x):
        return self.network(x)

# Example: 3-layer MLP
model = MLP(input_dim=10, hidden_dims=[64, 32], output_dim=2)
x = torch.randn(16, 10)
output = model(x)
print(f"Output shape: {output.shape}")
</code></pre>
<h3 id="backpropagation"><a class="header" href="#backpropagation">Backpropagation</a></h3>
<p><strong>Forward Pass:</strong></p>
<pre><code>z^[l] = W^[l] · a^[l-1] + b^[l]
a^[l] = g^[l](z^[l])
</code></pre>
<p><strong>Backward Pass (Chain Rule):</strong></p>
<pre><code>dL/dW^[l] = dL/da^[l] · da^[l]/dz^[l] · dz^[l]/dW^[l]
</code></pre>
<pre><code class="language-python"># Manual backpropagation example
class SimpleNN:
    def __init__(self, input_size, hidden_size, output_size):
        self.W1 = np.random.randn(input_size, hidden_size) * 0.01
        self.b1 = np.zeros((1, hidden_size))
        self.W2 = np.random.randn(hidden_size, output_size) * 0.01
        self.b2 = np.zeros((1, output_size))
    
    def sigmoid(self, z):
        return 1 / (1 + np.exp(-z))
    
    def sigmoid_derivative(self, a):
        return a * (1 - a)
    
    def forward(self, X):
        self.z1 = np.dot(X, self.W1) + self.b1
        self.a1 = self.sigmoid(self.z1)
        self.z2 = np.dot(self.a1, self.W2) + self.b2
        self.a2 = self.sigmoid(self.z2)
        return self.a2
    
    def backward(self, X, y, learning_rate=0.01):
        m = X.shape[0]
        
        # Output layer gradients
        dz2 = self.a2 - y
        dW2 = (1/m) * np.dot(self.a1.T, dz2)
        db2 = (1/m) * np.sum(dz2, axis=0, keepdims=True)
        
        # Hidden layer gradients
        dz1 = np.dot(dz2, self.W2.T) * self.sigmoid_derivative(self.a1)
        dW1 = (1/m) * np.dot(X.T, dz1)
        db1 = (1/m) * np.sum(dz1, axis=0, keepdims=True)
        
        # Update weights
        self.W2 -= learning_rate * dW2
        self.b2 -= learning_rate * db2
        self.W1 -= learning_rate * dW1
        self.b1 -= learning_rate * db1
</code></pre>
<h2 id="activation-functions"><a class="header" href="#activation-functions">Activation Functions</a></h2>
<h3 id="common-activation-functions"><a class="header" href="#common-activation-functions">Common Activation Functions</a></h3>
<pre><code class="language-python">import torch.nn.functional as F

# ReLU (Rectified Linear Unit)
def relu(x):
    return torch.max(torch.zeros_like(x), x)

# Leaky ReLU
def leaky_relu(x, alpha=0.01):
    return torch.where(x &gt; 0, x, alpha * x)

# Sigmoid
def sigmoid(x):
    return 1 / (1 + torch.exp(-x))

# Tanh
def tanh(x):
    return torch.tanh(x)

# Softmax (for multi-class classification)
def softmax(x, dim=-1):
    exp_x = torch.exp(x - torch.max(x, dim=dim, keepdim=True)[0])
    return exp_x / torch.sum(exp_x, dim=dim, keepdim=True)

# GELU (Gaussian Error Linear Unit)
def gelu(x):
    return 0.5 * x * (1 + torch.tanh(np.sqrt(2/np.pi) * (x + 0.044715 * x**3)))

# Swish/SiLU
def swish(x):
    return x * torch.sigmoid(x)

# Visualization
x = torch.linspace(-5, 5, 100)
activations = {
    'ReLU': F.relu(x),
    'Leaky ReLU': F.leaky_relu(x, 0.1),
    'Sigmoid': torch.sigmoid(x),
    'Tanh': torch.tanh(x),
    'GELU': F.gelu(x),
    'Swish': x * torch.sigmoid(x)
}

import matplotlib.pyplot as plt
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
for ax, (name, y) in zip(axes.flatten(), activations.items()):
    ax.plot(x.numpy(), y.numpy())
    ax.set_title(name)
    ax.grid(True)
    ax.axhline(y=0, color='k', linestyle='--', alpha=0.3)
    ax.axvline(x=0, color='k', linestyle='--', alpha=0.3)
plt.tight_layout()
plt.show()
</code></pre>
<h2 id="loss-functions"><a class="header" href="#loss-functions">Loss Functions</a></h2>
<h3 id="classification-losses"><a class="header" href="#classification-losses">Classification Losses</a></h3>
<pre><code class="language-python"># Binary Cross-Entropy
def binary_cross_entropy(predictions, targets):
    return -torch.mean(targets * torch.log(predictions + 1e-8) + 
                      (1 - targets) * torch.log(1 - predictions + 1e-8))

# Categorical Cross-Entropy
def categorical_cross_entropy(predictions, targets):
    return -torch.mean(torch.sum(targets * torch.log(predictions + 1e-8), dim=1))

# Focal Loss (for imbalanced datasets)
class FocalLoss(nn.Module):
    def __init__(self, alpha=1, gamma=2):
        super(FocalLoss, self).__init__()
        self.alpha = alpha
        self.gamma = gamma
    
    def forward(self, inputs, targets):
        ce_loss = F.cross_entropy(inputs, targets, reduction='none')
        pt = torch.exp(-ce_loss)
        focal_loss = self.alpha * (1 - pt) ** self.gamma * ce_loss
        return focal_loss.mean()

# Using PyTorch built-in losses
criterion_bce = nn.BCELoss()
criterion_ce = nn.CrossEntropyLoss()
criterion_nll = nn.NLLLoss()

# Example
predictions = torch.rand(32, 10)
targets = torch.randint(0, 10, (32,))
loss = criterion_ce(predictions, targets)
</code></pre>
<h3 id="regression-losses"><a class="header" href="#regression-losses">Regression Losses</a></h3>
<pre><code class="language-python"># Mean Squared Error (MSE)
criterion_mse = nn.MSELoss()

# Mean Absolute Error (MAE)
criterion_mae = nn.L1Loss()

# Smooth L1 Loss (Huber Loss)
criterion_smooth = nn.SmoothL1Loss()

# Custom loss example
class CustomRegressionLoss(nn.Module):
    def __init__(self):
        super(CustomRegressionLoss, self).__init__()
    
    def forward(self, predictions, targets):
        mse = torch.mean((predictions - targets) ** 2)
        mae = torch.mean(torch.abs(predictions - targets))
        return mse + 0.1 * mae
</code></pre>
<h2 id="optimization"><a class="header" href="#optimization">Optimization</a></h2>
<h3 id="optimizers"><a class="header" href="#optimizers">Optimizers</a></h3>
<pre><code class="language-python"># Stochastic Gradient Descent (SGD)
optimizer_sgd = optim.SGD(model.parameters(), lr=0.01, momentum=0.9)

# Adam (Adaptive Moment Estimation)
optimizer_adam = optim.Adam(model.parameters(), lr=0.001, betas=(0.9, 0.999))

# AdamW (Adam with weight decay)
optimizer_adamw = optim.AdamW(model.parameters(), lr=0.001, weight_decay=0.01)

# RMSprop
optimizer_rmsprop = optim.RMSprop(model.parameters(), lr=0.001, alpha=0.99)

# Adagrad
optimizer_adagrad = optim.Adagrad(model.parameters(), lr=0.01)

# Training loop
def train_epoch(model, dataloader, criterion, optimizer, device):
    model.train()
    total_loss = 0
    
    for batch_idx, (data, target) in enumerate(dataloader):
        data, target = data.to(device), target.to(device)
        
        # Forward pass
        optimizer.zero_grad()
        output = model(data)
        loss = criterion(output, target)
        
        # Backward pass
        loss.backward()
        
        # Gradient clipping (optional)
        torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)
        
        # Update weights
        optimizer.step()
        
        total_loss += loss.item()
    
    return total_loss / len(dataloader)
</code></pre>
<h3 id="learning-rate-scheduling"><a class="header" href="#learning-rate-scheduling">Learning Rate Scheduling</a></h3>
<pre><code class="language-python">from torch.optim.lr_scheduler import (
    StepLR, ExponentialLR, CosineAnnealingLR, 
    ReduceLROnPlateau, OneCycleLR
)

# Step decay
scheduler_step = StepLR(optimizer, step_size=10, gamma=0.1)

# Exponential decay
scheduler_exp = ExponentialLR(optimizer, gamma=0.95)

# Cosine annealing
scheduler_cosine = CosineAnnealingLR(optimizer, T_max=100, eta_min=1e-6)

# Reduce on plateau
scheduler_plateau = ReduceLROnPlateau(
    optimizer, mode='min', factor=0.1, patience=10, verbose=True
)

# One Cycle Policy
scheduler_onecycle = OneCycleLR(
    optimizer, max_lr=0.01, epochs=100, steps_per_epoch=len(train_loader)
)

# Usage in training loop
for epoch in range(num_epochs):
    train_loss = train_epoch(model, train_loader, criterion, optimizer, device)
    val_loss = validate(model, val_loader, criterion, device)
    
    # Step the scheduler
    scheduler_plateau.step(val_loss)  # For ReduceLROnPlateau
    # OR
    scheduler_step.step()  # For other schedulers
    
    print(f"Epoch {epoch}: LR = {optimizer.param_groups[0]['lr']:.6f}")
</code></pre>
<h2 id="regularization-1"><a class="header" href="#regularization-1">Regularization</a></h2>
<h3 id="dropout"><a class="header" href="#dropout">Dropout</a></h3>
<pre><code class="language-python">class MLPWithDropout(nn.Module):
    def __init__(self, input_dim, hidden_dims, output_dim, dropout_rate=0.5):
        super(MLPWithDropout, self).__init__()
        
        layers = []
        prev_dim = input_dim
        
        for hidden_dim in hidden_dims:
            layers.append(nn.Linear(prev_dim, hidden_dim))
            layers.append(nn.ReLU())
            layers.append(nn.Dropout(dropout_rate))
            prev_dim = hidden_dim
        
        layers.append(nn.Linear(prev_dim, output_dim))
        self.network = nn.Sequential(*layers)
    
    def forward(self, x):
        return self.network(x)

# Dropout variants
dropout = nn.Dropout(p=0.5)  # Standard dropout
dropout_2d = nn.Dropout2d(p=0.5)  # For Conv2d
dropout_3d = nn.Dropout3d(p=0.5)  # For Conv3d
alpha_dropout = nn.AlphaDropout(p=0.5)  # For SELU activation
</code></pre>
<h3 id="weight-decay-l2-regularization"><a class="header" href="#weight-decay-l2-regularization">Weight Decay (L2 Regularization)</a></h3>
<pre><code class="language-python"># Weight decay in optimizer
optimizer = optim.Adam(model.parameters(), lr=0.001, weight_decay=0.01)

# Manual L2 regularization
def l2_regularization(model, lambda_l2=0.01):
    l2_loss = 0
    for param in model.parameters():
        l2_loss += torch.norm(param, 2)
    return lambda_l2 * l2_loss

# In training loop
loss = criterion(output, target) + l2_regularization(model)
</code></pre>
<h3 id="early-stopping"><a class="header" href="#early-stopping">Early Stopping</a></h3>
<pre><code class="language-python">class EarlyStopping:
    def __init__(self, patience=10, min_delta=0, mode='min'):
        self.patience = patience
        self.min_delta = min_delta
        self.mode = mode
        self.counter = 0
        self.best_score = None
        self.early_stop = False
    
    def __call__(self, val_loss):
        score = -val_loss if self.mode == 'min' else val_loss
        
        if self.best_score is None:
            self.best_score = score
        elif score &lt; self.best_score + self.min_delta:
            self.counter += 1
            if self.counter &gt;= self.patience:
                self.early_stop = True
        else:
            self.best_score = score
            self.counter = 0
        
        return self.early_stop

# Usage
early_stopping = EarlyStopping(patience=10)

for epoch in range(num_epochs):
    train_loss = train_epoch(model, train_loader, criterion, optimizer, device)
    val_loss = validate(model, val_loader, criterion, device)
    
    if early_stopping(val_loss):
        print(f"Early stopping at epoch {epoch}")
        break
</code></pre>
<h2 id="convolutional-neural-networks"><a class="header" href="#convolutional-neural-networks">Convolutional Neural Networks</a></h2>
<p>CNNs are specialized for processing grid-like data (images, videos).</p>
<h3 id="basic-cnn-architecture"><a class="header" href="#basic-cnn-architecture">Basic CNN Architecture</a></h3>
<pre><code class="language-python">class SimpleCNN(nn.Module):
    def __init__(self, num_classes=10):
        super(SimpleCNN, self).__init__()
        
        # Convolutional layers
        self.conv1 = nn.Conv2d(3, 32, kernel_size=3, padding=1)
        self.conv2 = nn.Conv2d(32, 64, kernel_size=3, padding=1)
        self.conv3 = nn.Conv2d(64, 128, kernel_size=3, padding=1)
        
        # Pooling
        self.pool = nn.MaxPool2d(2, 2)
        
        # Fully connected layers
        self.fc1 = nn.Linear(128 * 4 * 4, 512)
        self.fc2 = nn.Linear(512, num_classes)
        
        # Dropout
        self.dropout = nn.Dropout(0.5)
    
    def forward(self, x):
        # Conv block 1
        x = self.pool(F.relu(self.conv1(x)))  # 32x32 -&gt; 16x16
        
        # Conv block 2
        x = self.pool(F.relu(self.conv2(x)))  # 16x16 -&gt; 8x8
        
        # Conv block 3
        x = self.pool(F.relu(self.conv3(x)))  # 8x8 -&gt; 4x4
        
        # Flatten
        x = x.view(x.size(0), -1)
        
        # Fully connected
        x = F.relu(self.fc1(x))
        x = self.dropout(x)
        x = self.fc2(x)
        
        return x

# Example usage
model = SimpleCNN(num_classes=10)
x = torch.randn(4, 3, 32, 32)  # Batch of 4 RGB 32x32 images
output = model(x)
print(f"Output shape: {output.shape}")  # [4, 10]
</code></pre>
<h3 id="modern-cnn-architectures"><a class="header" href="#modern-cnn-architectures">Modern CNN Architectures</a></h3>
<h4 id="resnet-residual-networks"><a class="header" href="#resnet-residual-networks">ResNet (Residual Networks)</a></h4>
<pre><code class="language-python">class ResidualBlock(nn.Module):
    def __init__(self, in_channels, out_channels, stride=1):
        super(ResidualBlock, self).__init__()
        
        self.conv1 = nn.Conv2d(in_channels, out_channels, 3, stride, padding=1, bias=False)
        self.bn1 = nn.BatchNorm2d(out_channels)
        self.conv2 = nn.Conv2d(out_channels, out_channels, 3, 1, padding=1, bias=False)
        self.bn2 = nn.BatchNorm2d(out_channels)
        
        self.shortcut = nn.Sequential()
        if stride != 1 or in_channels != out_channels:
            self.shortcut = nn.Sequential(
                nn.Conv2d(in_channels, out_channels, 1, stride, bias=False),
                nn.BatchNorm2d(out_channels)
            )
    
    def forward(self, x):
        residual = x
        
        out = F.relu(self.bn1(self.conv1(x)))
        out = self.bn2(self.conv2(out))
        out += self.shortcut(residual)
        out = F.relu(out)
        
        return out

class ResNet(nn.Module):
    def __init__(self, num_blocks, num_classes=10):
        super(ResNet, self).__init__()
        
        self.conv1 = nn.Conv2d(3, 64, 3, 1, padding=1, bias=False)
        self.bn1 = nn.BatchNorm2d(64)
        
        self.layer1 = self._make_layer(64, 64, num_blocks[0], stride=1)
        self.layer2 = self._make_layer(64, 128, num_blocks[1], stride=2)
        self.layer3 = self._make_layer(128, 256, num_blocks[2], stride=2)
        self.layer4 = self._make_layer(256, 512, num_blocks[3], stride=2)
        
        self.avgpool = nn.AdaptiveAvgPool2d((1, 1))
        self.fc = nn.Linear(512, num_classes)
    
    def _make_layer(self, in_channels, out_channels, num_blocks, stride):
        layers = []
        layers.append(ResidualBlock(in_channels, out_channels, stride))
        for _ in range(1, num_blocks):
            layers.append(ResidualBlock(out_channels, out_channels))
        return nn.Sequential(*layers)
    
    def forward(self, x):
        x = F.relu(self.bn1(self.conv1(x)))
        x = self.layer1(x)
        x = self.layer2(x)
        x = self.layer3(x)
        x = self.layer4(x)
        x = self.avgpool(x)
        x = x.view(x.size(0), -1)
        x = self.fc(x)
        return x

# ResNet-18
model = ResNet([2, 2, 2, 2])
</code></pre>
<h4 id="inception-module"><a class="header" href="#inception-module">Inception Module</a></h4>
<pre><code class="language-python">class InceptionModule(nn.Module):
    def __init__(self, in_channels, out_1x1, red_3x3, out_3x3, red_5x5, out_5x5, out_pool):
        super(InceptionModule, self).__init__()
        
        # 1x1 conv branch
        self.branch1 = nn.Sequential(
            nn.Conv2d(in_channels, out_1x1, kernel_size=1),
            nn.ReLU()
        )
        
        # 3x3 conv branch
        self.branch2 = nn.Sequential(
            nn.Conv2d(in_channels, red_3x3, kernel_size=1),
            nn.ReLU(),
            nn.Conv2d(red_3x3, out_3x3, kernel_size=3, padding=1),
            nn.ReLU()
        )
        
        # 5x5 conv branch
        self.branch3 = nn.Sequential(
            nn.Conv2d(in_channels, red_5x5, kernel_size=1),
            nn.ReLU(),
            nn.Conv2d(red_5x5, out_5x5, kernel_size=5, padding=2),
            nn.ReLU()
        )
        
        # Max pooling branch
        self.branch4 = nn.Sequential(
            nn.MaxPool2d(kernel_size=3, stride=1, padding=1),
            nn.Conv2d(in_channels, out_pool, kernel_size=1),
            nn.ReLU()
        )
    
    def forward(self, x):
        branch1 = self.branch1(x)
        branch2 = self.branch2(x)
        branch3 = self.branch3(x)
        branch4 = self.branch4(x)
        
        return torch.cat([branch1, branch2, branch3, branch4], dim=1)
</code></pre>
<h3 id="advanced-cnn-techniques"><a class="header" href="#advanced-cnn-techniques">Advanced CNN Techniques</a></h3>
<pre><code class="language-python"># Depthwise Separable Convolution
class DepthwiseSeparableConv(nn.Module):
    def __init__(self, in_channels, out_channels, kernel_size=3):
        super(DepthwiseSeparableConv, self).__init__()
        
        # Depthwise convolution
        self.depthwise = nn.Conv2d(
            in_channels, in_channels, kernel_size, 
            padding=kernel_size//2, groups=in_channels
        )
        
        # Pointwise convolution
        self.pointwise = nn.Conv2d(in_channels, out_channels, 1)
    
    def forward(self, x):
        x = self.depthwise(x)
        x = self.pointwise(x)
        return x

# Squeeze-and-Excitation Block
class SEBlock(nn.Module):
    def __init__(self, channels, reduction=16):
        super(SEBlock, self).__init__()
        self.squeeze = nn.AdaptiveAvgPool2d(1)
        self.excitation = nn.Sequential(
            nn.Linear(channels, channels // reduction, bias=False),
            nn.ReLU(),
            nn.Linear(channels // reduction, channels, bias=False),
            nn.Sigmoid()
        )
    
    def forward(self, x):
        b, c, _, _ = x.size()
        y = self.squeeze(x).view(b, c)
        y = self.excitation(y).view(b, c, 1, 1)
        return x * y.expand_as(x)
</code></pre>
<h2 id="recurrent-neural-networks"><a class="header" href="#recurrent-neural-networks">Recurrent Neural Networks</a></h2>
<p>RNNs process sequential data by maintaining hidden state.</p>
<h3 id="basic-rnn"><a class="header" href="#basic-rnn">Basic RNN</a></h3>
<pre><code class="language-python">class SimpleRNN(nn.Module):
    def __init__(self, input_size, hidden_size, output_size, num_layers=1):
        super(SimpleRNN, self).__init__()
        self.hidden_size = hidden_size
        self.num_layers = num_layers
        
        self.rnn = nn.RNN(input_size, hidden_size, num_layers, batch_first=True)
        self.fc = nn.Linear(hidden_size, output_size)
    
    def forward(self, x):
        # x shape: (batch, seq_len, input_size)
        h0 = torch.zeros(self.num_layers, x.size(0), self.hidden_size).to(x.device)
        
        # RNN output
        out, hn = self.rnn(x, h0)
        # out shape: (batch, seq_len, hidden_size)
        
        # Use last time step
        out = self.fc(out[:, -1, :])
        return out

# Example
model = SimpleRNN(input_size=10, hidden_size=64, output_size=2)
x = torch.randn(32, 20, 10)  # (batch, seq_len, features)
output = model(x)
print(f"Output shape: {output.shape}")  # [32, 2]
</code></pre>
<h3 id="lstm-long-short-term-memory"><a class="header" href="#lstm-long-short-term-memory">LSTM (Long Short-Term Memory)</a></h3>
<pre><code class="language-python">class LSTMModel(nn.Module):
    def __init__(self, input_size, hidden_size, output_size, num_layers=2, dropout=0.2):
        super(LSTMModel, self).__init__()
        self.hidden_size = hidden_size
        self.num_layers = num_layers
        
        self.lstm = nn.LSTM(
            input_size, hidden_size, num_layers,
            batch_first=True, dropout=dropout if num_layers &gt; 1 else 0
        )
        self.fc = nn.Linear(hidden_size, output_size)
    
    def forward(self, x):
        # Initialize hidden and cell states
        h0 = torch.zeros(self.num_layers, x.size(0), self.hidden_size).to(x.device)
        c0 = torch.zeros(self.num_layers, x.size(0), self.hidden_size).to(x.device)
        
        # LSTM forward
        out, (hn, cn) = self.lstm(x, (h0, c0))
        
        # Use last time step
        out = self.fc(out[:, -1, :])
        return out

# Bidirectional LSTM
class BiLSTM(nn.Module):
    def __init__(self, input_size, hidden_size, output_size, num_layers=2):
        super(BiLSTM, self).__init__()
        
        self.lstm = nn.LSTM(
            input_size, hidden_size, num_layers,
            batch_first=True, bidirectional=True
        )
        # Multiply by 2 for bidirectional
        self.fc = nn.Linear(hidden_size * 2, output_size)
    
    def forward(self, x):
        out, _ = self.lstm(x)
        out = self.fc(out[:, -1, :])
        return out
</code></pre>
<h3 id="gru-gated-recurrent-unit"><a class="header" href="#gru-gated-recurrent-unit">GRU (Gated Recurrent Unit)</a></h3>
<pre><code class="language-python">class GRUModel(nn.Module):
    def __init__(self, input_size, hidden_size, output_size, num_layers=2, dropout=0.2):
        super(GRUModel, self).__init__()
        self.hidden_size = hidden_size
        self.num_layers = num_layers
        
        self.gru = nn.GRU(
            input_size, hidden_size, num_layers,
            batch_first=True, dropout=dropout if num_layers &gt; 1 else 0
        )
        self.fc = nn.Linear(hidden_size, output_size)
    
    def forward(self, x):
        h0 = torch.zeros(self.num_layers, x.size(0), self.hidden_size).to(x.device)
        out, hn = self.gru(x, h0)
        out = self.fc(out[:, -1, :])
        return out

# Comparison
models = {
    'RNN': SimpleRNN(10, 64, 2),
    'LSTM': LSTMModel(10, 64, 2),
    'GRU': GRUModel(10, 64, 2)
}

for name, model in models.items():
    params = sum(p.numel() for p in model.parameters())
    print(f"{name} parameters: {params}")
</code></pre>
<h2 id="attention-mechanisms"><a class="header" href="#attention-mechanisms">Attention Mechanisms</a></h2>
<p>Attention allows models to focus on relevant parts of the input.</p>
<h3 id="self-attention"><a class="header" href="#self-attention">Self-Attention</a></h3>
<pre><code class="language-python">class SelfAttention(nn.Module):
    def __init__(self, embed_dim, num_heads=8):
        super(SelfAttention, self).__init__()
        self.embed_dim = embed_dim
        self.num_heads = num_heads
        self.head_dim = embed_dim // num_heads
        
        assert self.head_dim * num_heads == embed_dim, "embed_dim must be divisible by num_heads"
        
        self.query = nn.Linear(embed_dim, embed_dim)
        self.key = nn.Linear(embed_dim, embed_dim)
        self.value = nn.Linear(embed_dim, embed_dim)
        self.out = nn.Linear(embed_dim, embed_dim)
    
    def forward(self, x, mask=None):
        batch_size = x.size(0)
        
        # Linear projections
        Q = self.query(x).view(batch_size, -1, self.num_heads, self.head_dim).transpose(1, 2)
        K = self.key(x).view(batch_size, -1, self.num_heads, self.head_dim).transpose(1, 2)
        V = self.value(x).view(batch_size, -1, self.num_heads, self.head_dim).transpose(1, 2)
        
        # Scaled dot-product attention
        scores = torch.matmul(Q, K.transpose(-2, -1)) / np.sqrt(self.head_dim)
        
        if mask is not None:
            scores = scores.masked_fill(mask == 0, -1e9)
        
        attention_weights = F.softmax(scores, dim=-1)
        attention_output = torch.matmul(attention_weights, V)
        
        # Concatenate heads
        attention_output = attention_output.transpose(1, 2).contiguous()
        attention_output = attention_output.view(batch_size, -1, self.embed_dim)
        
        # Final linear layer
        output = self.out(attention_output)
        return output, attention_weights

# Example
attention = SelfAttention(embed_dim=512, num_heads=8)
x = torch.randn(32, 10, 512)  # (batch, seq_len, embed_dim)
output, weights = attention(x)
print(f"Output shape: {output.shape}")
print(f"Attention weights shape: {weights.shape}")
</code></pre>
<h3 id="transformer-block"><a class="header" href="#transformer-block">Transformer Block</a></h3>
<pre><code class="language-python">class TransformerBlock(nn.Module):
    def __init__(self, embed_dim, num_heads, ff_dim, dropout=0.1):
        super(TransformerBlock, self).__init__()
        
        self.attention = nn.MultiheadAttention(embed_dim, num_heads, dropout=dropout)
        self.norm1 = nn.LayerNorm(embed_dim)
        self.norm2 = nn.LayerNorm(embed_dim)
        
        self.feed_forward = nn.Sequential(
            nn.Linear(embed_dim, ff_dim),
            nn.ReLU(),
            nn.Dropout(dropout),
            nn.Linear(ff_dim, embed_dim)
        )
        
        self.dropout = nn.Dropout(dropout)
    
    def forward(self, x, mask=None):
        # Multi-head attention
        attn_output, _ = self.attention(x, x, x, attn_mask=mask)
        x = self.norm1(x + self.dropout(attn_output))
        
        # Feed-forward
        ff_output = self.feed_forward(x)
        x = self.norm2(x + self.dropout(ff_output))
        
        return x
</code></pre>
<h2 id="batch-normalization"><a class="header" href="#batch-normalization">Batch Normalization</a></h2>
<p>Normalizes layer inputs to improve training.</p>
<pre><code class="language-python">class ConvBNReLU(nn.Module):
    def __init__(self, in_channels, out_channels):
        super(ConvBNReLU, self).__init__()
        self.conv = nn.Conv2d(in_channels, out_channels, 3, padding=1)
        self.bn = nn.BatchNorm2d(out_channels)
        self.relu = nn.ReLU()
    
    def forward(self, x):
        return self.relu(self.bn(self.conv(x)))

# Other normalization techniques
# Layer Normalization (better for RNNs/Transformers)
layer_norm = nn.LayerNorm(normalized_shape=[128])

# Group Normalization
group_norm = nn.GroupNorm(num_groups=8, num_channels=64)

# Instance Normalization (used in style transfer)
instance_norm = nn.InstanceNorm2d(num_features=64)
</code></pre>
<h2 id="advanced-architectures"><a class="header" href="#advanced-architectures">Advanced Architectures</a></h2>
<h3 id="vision-transformer-vit"><a class="header" href="#vision-transformer-vit">Vision Transformer (ViT)</a></h3>
<pre><code class="language-python">class PatchEmbedding(nn.Module):
    def __init__(self, img_size=224, patch_size=16, in_channels=3, embed_dim=768):
        super(PatchEmbedding, self).__init__()
        self.num_patches = (img_size // patch_size) ** 2
        self.proj = nn.Conv2d(in_channels, embed_dim, kernel_size=patch_size, stride=patch_size)
    
    def forward(self, x):
        x = self.proj(x)  # (B, embed_dim, H/P, W/P)
        x = x.flatten(2)  # (B, embed_dim, num_patches)
        x = x.transpose(1, 2)  # (B, num_patches, embed_dim)
        return x

class VisionTransformer(nn.Module):
    def __init__(self, img_size=224, patch_size=16, num_classes=1000, 
                 embed_dim=768, depth=12, num_heads=12):
        super(VisionTransformer, self).__init__()
        
        self.patch_embed = PatchEmbedding(img_size, patch_size, 3, embed_dim)
        num_patches = self.patch_embed.num_patches
        
        self.cls_token = nn.Parameter(torch.zeros(1, 1, embed_dim))
        self.pos_embed = nn.Parameter(torch.zeros(1, num_patches + 1, embed_dim))
        
        self.blocks = nn.ModuleList([
            TransformerBlock(embed_dim, num_heads, embed_dim * 4)
            for _ in range(depth)
        ])
        
        self.norm = nn.LayerNorm(embed_dim)
        self.head = nn.Linear(embed_dim, num_classes)
    
    def forward(self, x):
        B = x.shape[0]
        x = self.patch_embed(x)
        
        cls_tokens = self.cls_token.expand(B, -1, -1)
        x = torch.cat([cls_tokens, x], dim=1)
        x = x + self.pos_embed
        
        for block in self.blocks:
            x = block(x)
        
        x = self.norm(x)
        x = x[:, 0]  # Use cls token
        x = self.head(x)
        
        return x
</code></pre>
<h2 id="practical-tips"><a class="header" href="#practical-tips">Practical Tips</a></h2>
<ol>
<li><strong>Initialize Weights Properly</strong>: Use Xavier/He initialization</li>
<li><strong>Monitor Gradients</strong>: Check for vanishing/exploding gradients</li>
<li><strong>Use Mixed Precision Training</strong>: Faster training with similar accuracy</li>
<li><strong>Data Augmentation</strong>: Improves generalization</li>
<li><strong>Gradient Accumulation</strong>: Train with larger effective batch sizes</li>
<li><strong>Model Checkpointing</strong>: Save best models during training</li>
</ol>
<pre><code class="language-python"># Mixed precision training
from torch.cuda.amp import autocast, GradScaler

scaler = GradScaler()

for epoch in range(num_epochs):
    for data, target in train_loader:
        optimizer.zero_grad()
        
        with autocast():
            output = model(data)
            loss = criterion(output, target)
        
        scaler.scale(loss).backward()
        scaler.step(optimizer)
        scaler.update()
</code></pre>
<h2 id="resources-4"><a class="header" href="#resources-4">Resources</a></h2>
<ul>
<li>"Deep Learning" by Goodfellow, Bengio, and Courville</li>
<li>PyTorch Documentation: https://pytorch.org/docs/</li>
<li>TensorFlow Documentation: https://www.tensorflow.org/</li>
<li>Papers with Code: https://paperswithcode.com/</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="neural-networks"><a class="header" href="#neural-networks">Neural Networks</a></h1>
<h2 id="overview-28"><a class="header" href="#overview-28">Overview</a></h2>
<p>A neural network is a machine learning model inspired by biological brains. It consists of interconnected nodes (neurons) organized in layers that learn patterns from data.</p>
<h2 id="basic-architecture"><a class="header" href="#basic-architecture">Basic Architecture</a></h2>
<pre><code>Input Layer    Hidden Layers          Output Layer
     o              o                    o
     o              o                    o
     o              o                    o
     o              o
     o              o                    o
     o              o
   [n inputs]   [hidden units]   [output units]
</code></pre>
<h2 id="key-components-1"><a class="header" href="#key-components-1">Key Components</a></h2>
<h3 id="neurons"><a class="header" href="#neurons">Neurons</a></h3>
<p>Each neuron applies transformation: <strong>output = activation(weights * inputs + bias)</strong></p>
<h3 id="activation-functions-1"><a class="header" href="#activation-functions-1">Activation Functions</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Function</th><th>Formula</th><th>Range</th><th>Use Case</th></tr></thead><tbody>
<tr><td>ReLU</td><td>max(0, x)</td><td>[0, infinity)</td><td>Hidden layers</td></tr>
<tr><td>Sigmoid</td><td>1/(1+e^-x)</td><td>(0, 1)</td><td>Binary classification</td></tr>
<tr><td>Tanh</td><td>(e^x - e^-x)/(e^x + e^-x)</td><td>(-1, 1)</td><td>Hidden layers</td></tr>
<tr><td>Softmax</td><td>e^xi / Sum(e^xj)</td><td>(0, 1) probabilities</td><td>Multi-class output</td></tr>
<tr><td>Linear</td><td>x</td><td>(-infinity, infinity)</td><td>Regression output</td></tr>
</tbody></table>
</div>
<h3 id="layers"><a class="header" href="#layers">Layers</a></h3>
<ol>
<li><strong>Input Layer</strong>: Raw data (28x28 pixels, word embeddings, etc.)</li>
<li><strong>Hidden Layers</strong>: Learn complex patterns through non-linear transformations</li>
<li><strong>Output Layer</strong>: Final predictions</li>
</ol>
<h2 id="training-process"><a class="header" href="#training-process">Training Process</a></h2>
<h3 id="forward-pass"><a class="header" href="#forward-pass">Forward Pass</a></h3>
<p>Input flows through network:</p>
<pre><code>x -&gt; w1 + b1 -&gt; activation -&gt; ... -&gt; output
</code></pre>
<h3 id="loss-function"><a class="header" href="#loss-function">Loss Function</a></h3>
<p>Measures prediction error:</p>
<ul>
<li><strong>MSE</strong> (regression): Mean squared error</li>
<li><strong>Cross-Entropy</strong> (classification): Measures probability difference</li>
</ul>
<h3 id="backpropagation-1"><a class="header" href="#backpropagation-1">Backpropagation</a></h3>
<p>Calculates gradients and updates weights:</p>
<pre><code>1. Compute loss
2. Calculate gradients (d(loss)/d(weights))
3. Update weights: w = w - learning_rate * gradient
4. Repeat
</code></pre>
<h3 id="optimizers-1"><a class="header" href="#optimizers-1">Optimizers</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Optimizer</th><th>Learning</th><th>Best For</th></tr></thead><tbody>
<tr><td>SGD</td><td>Fixed or decaying</td><td>Simple tasks</td></tr>
<tr><td>Momentum</td><td>Accelerated</td><td>Faster convergence</td></tr>
<tr><td>Adam</td><td>Adaptive</td><td>Most modern tasks</td></tr>
<tr><td>RMSprop</td><td>Adaptive</td><td>Deep networks</td></tr>
</tbody></table>
</div>
<h2 id="code-example-pytorch"><a class="header" href="#code-example-pytorch">Code Example (PyTorch)</a></h2>
<pre><code class="language-python">import torch
import torch.nn as nn
from torch.optim import Adam

# Define network
class NeuralNetwork(nn.Module):
    def __init__(self, input_size, hidden_size, output_size):
        super().__init__()
        self.fc1 = nn.Linear(input_size, hidden_size)
        self.relu = nn.ReLU()
        self.fc2 = nn.Linear(hidden_size, output_size)

    def forward(self, x):
        x = self.fc1(x)
        x = self.relu(x)
        x = self.fc2(x)
        return x

# Create network
model = NeuralNetwork(input_size=784, hidden_size=128, output_size=10)
criterion = nn.CrossEntropyLoss()
optimizer = Adam(model.parameters(), lr=0.001)

# Training loop
for epoch in range(10):
    for batch_x, batch_y in train_loader:
        # Forward pass
        outputs = model(batch_x)
        loss = criterion(outputs, batch_y)

        # Backward pass
        optimizer.zero_grad()
        loss.backward()
        optimizer.step()
</code></pre>
<h2 id="network-types"><a class="header" href="#network-types">Network Types</a></h2>
<h3 id="feedforward-neural-networks-fnn"><a class="header" href="#feedforward-neural-networks-fnn">Feedforward Neural Networks (FNN)</a></h3>
<ul>
<li>Data flows one direction only</li>
<li>Simplest type, works for structured data</li>
</ul>
<h3 id="convolutional-neural-networks-cnn"><a class="header" href="#convolutional-neural-networks-cnn">Convolutional Neural Networks (CNN)</a></h3>
<ul>
<li>Specialized for image processing</li>
<li>Uses filters to extract spatial features</li>
<li>Reduces parameters through weight sharing</li>
</ul>
<h3 id="recurrent-neural-networks-rnn"><a class="header" href="#recurrent-neural-networks-rnn">Recurrent Neural Networks (RNN)</a></h3>
<ul>
<li>Processes sequences (text, time series)</li>
<li>Maintains hidden state between inputs</li>
<li>Variants: LSTM, GRU (better long-term memory)</li>
</ul>
<h3 id="transformers"><a class="header" href="#transformers">Transformers</a></h3>
<ul>
<li>Attention-based architecture</li>
<li>Parallel processing of sequences</li>
<li>Powers modern LLMs (GPT, BERT)</li>
</ul>
<h2 id="hyperparameters"><a class="header" href="#hyperparameters">Hyperparameters</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Parameter</th><th>Impact</th><th>Typical Values</th></tr></thead><tbody>
<tr><td>Learning Rate</td><td>Convergence speed, stability</td><td>0.001 - 0.1</td></tr>
<tr><td>Batch Size</td><td>Memory, stability</td><td>32 - 256</td></tr>
<tr><td>Hidden Units</td><td>Capacity</td><td>64 - 2048</td></tr>
<tr><td>Epochs</td><td>Training duration</td><td>10 - 100</td></tr>
<tr><td>Dropout</td><td>Regularization</td><td>0.3 - 0.5</td></tr>
</tbody></table>
</div>
<h2 id="training-tips"><a class="header" href="#training-tips">Training Tips</a></h2>
<h3 id="1-data-preprocessing"><a class="header" href="#1-data-preprocessing">1. Data Preprocessing</a></h3>
<pre><code class="language-python"># Normalize inputs
mean = X_train.mean()
std = X_train.std()
X_train = (X_train - mean) / std
</code></pre>
<h3 id="2-early-stopping"><a class="header" href="#2-early-stopping">2. Early Stopping</a></h3>
<pre><code class="language-python"># Stop if validation loss doesn't improve
if val_loss &gt; best_loss:
    patience -= 1
    if patience == 0:
        break
best_loss = min(best_loss, val_loss)
</code></pre>
<h3 id="3-learning-rate-scheduling"><a class="header" href="#3-learning-rate-scheduling">3. Learning Rate Scheduling</a></h3>
<pre><code class="language-python"># Decrease learning rate over time
scheduler = torch.optim.lr_scheduler.StepLR(optimizer, step_size=10, gamma=0.1)
for epoch in range(100):
    # train...
    scheduler.step()
</code></pre>
<h3 id="4-regularization"><a class="header" href="#4-regularization">4. Regularization</a></h3>
<ul>
<li><strong>L1/L2</strong>: Penalize large weights</li>
<li><strong>Dropout</strong>: Randomly disable neurons</li>
<li><strong>Batch Normalization</strong>: Normalize activations</li>
</ul>
<h2 id="common-issues-3"><a class="header" href="#common-issues-3">Common Issues</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Problem</th><th>Cause</th><th>Solution</th></tr></thead><tbody>
<tr><td>Underfitting</td><td>Model too simple</td><td>Increase hidden units, epochs</td></tr>
<tr><td>Overfitting</td><td>Model too complex</td><td>Add dropout, L2 regularization</td></tr>
<tr><td>Vanishing Gradients</td><td>Gradients -&gt; 0</td><td>Use ReLU, batch norm</td></tr>
<tr><td>Exploding Gradients</td><td>Gradients -&gt; infinity</td><td>Gradient clipping</td></tr>
</tbody></table>
</div>
<h2 id="modern-architectures"><a class="header" href="#modern-architectures">Modern Architectures</a></h2>
<h3 id="resnet-residual-networks-1"><a class="header" href="#resnet-residual-networks-1">ResNet (Residual Networks)</a></h3>
<p>Skip connections prevent vanishing gradients in deep networks</p>
<h3 id="attention-mechanisms-1"><a class="header" href="#attention-mechanisms-1">Attention Mechanisms</a></h3>
<p>Query-Key-Value mechanism enables transformers</p>
<h3 id="vision-transformers-vit"><a class="header" href="#vision-transformers-vit">Vision Transformers (ViT)</a></h3>
<p>Apply transformer architecture to image patches</p>
<h2 id="eli10-13"><a class="header" href="#eli10-13">ELI10</a></h2>
<p>Think of a neural network like learning to draw:</p>
<ol>
<li><strong>Input Layer</strong>: You see a cat</li>
<li><strong>Hidden Layers</strong>: Brain recognizes ears -&gt; whiskers -&gt; tail (learns patterns)</li>
<li><strong>Output Layer</strong>: Brain says "This is a cat!"</li>
</ol>
<p>The network learns by:</p>
<ul>
<li>Making predictions (forward pass)</li>
<li>Checking if wrong (loss)</li>
<li>Adjusting "how to recognize cats" (backprop)</li>
<li>Repeating until accurate</li>
</ul>
<p>More hidden layers = learns more complex patterns!</p>
<h2 id="further-resources-13"><a class="header" href="#further-resources-13">Further Resources</a></h2>
<ul>
<li><a href="https://playground.tensorflow.org/">Neural Networks Visualization</a></li>
<li><a href="https://www.youtube.com/watch?v=aircAruvnKk">3Blue1Brown Neural Networks Series</a></li>
<li><a href="https://pytorch.org/tutorials/">PyTorch Tutorials</a></li>
<li><a href="https://www.deeplearningbook.org/">Deep Learning Book</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="supervised-learning-1"><a class="header" href="#supervised-learning-1">Supervised Learning</a></h1>
<p>Supervised learning is a type of machine learning where the model learns from labeled training data to make predictions on unseen data.</p>
<h2 id="table-of-contents-7"><a class="header" href="#table-of-contents-7">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/supervised_learning.html#classification">Classification</a></li>
<li><a href="machine_learning/supervised_learning.html#regression">Regression</a></li>
<li><a href="machine_learning/supervised_learning.html#linear-models">Linear Models</a></li>
<li><a href="machine_learning/supervised_learning.html#tree-based-models">Tree-Based Models</a></li>
<li><a href="machine_learning/supervised_learning.html#support-vector-machines">Support Vector Machines</a></li>
<li><a href="machine_learning/supervised_learning.html#ensemble-methods">Ensemble Methods</a></li>
<li><a href="machine_learning/supervised_learning.html#naive-bayes">Naive Bayes</a></li>
<li><a href="machine_learning/supervised_learning.html#k-nearest-neighbors">K-Nearest Neighbors</a></li>
</ol>
<h2 id="classification"><a class="header" href="#classification">Classification</a></h2>
<p>Classification predicts discrete class labels. The goal is to learn a decision boundary that separates different classes.</p>
<h3 id="binary-classification"><a class="header" href="#binary-classification">Binary Classification</a></h3>
<pre><code class="language-python">import numpy as np
from sklearn.datasets import make_classification
from sklearn.model_selection import train_test_split
from sklearn.linear_model import LogisticRegression
from sklearn.metrics import accuracy_score, confusion_matrix, classification_report

# Generate synthetic data
X, y = make_classification(n_samples=1000, n_features=20, n_classes=2, random_state=42)
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# Train logistic regression
model = LogisticRegression(max_iter=1000)
model.fit(X_train, y_train)

# Predictions
y_pred = model.predict(X_test)
y_proba = model.predict_proba(X_test)

# Evaluation
print(f"Accuracy: {accuracy_score(y_test, y_pred):.4f}")
print("\nConfusion Matrix:")
print(confusion_matrix(y_test, y_pred))
print("\nClassification Report:")
print(classification_report(y_test, y_pred))
</code></pre>
<h3 id="multi-class-classification"><a class="header" href="#multi-class-classification">Multi-class Classification</a></h3>
<pre><code class="language-python">from sklearn.datasets import make_classification
from sklearn.ensemble import RandomForestClassifier

# Generate multi-class data
X, y = make_classification(
    n_samples=1000,
    n_features=20,
    n_classes=5,
    n_informative=15,
    random_state=42
)

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

# Random Forest for multi-class
rf = RandomForestClassifier(n_estimators=100, random_state=42)
rf.fit(X_train, y_train)

# One-vs-Rest (OvR) strategy
from sklearn.multiclass import OneVsRestClassifier
from sklearn.svm import SVC

ovr = OneVsRestClassifier(SVC(kernel='rbf'))
ovr.fit(X_train, y_train)

# One-vs-One (OvO) strategy
from sklearn.multiclass import OneVsOneClassifier
ovo = OneVsOneClassifier(SVC(kernel='rbf'))
ovo.fit(X_train, y_train)
</code></pre>
<h3 id="imbalanced-classification"><a class="header" href="#imbalanced-classification">Imbalanced Classification</a></h3>
<pre><code class="language-python">from imblearn.over_sampling import SMOTE, ADASYN
from imblearn.under_sampling import RandomUnderSampler, TomekLinks
from imblearn.combine import SMOTETomek
from sklearn.utils.class_weight import compute_class_weight

# SMOTE - Synthetic Minority Over-sampling Technique
smote = SMOTE(random_state=42)
X_resampled, y_resampled = smote.fit_resample(X_train, y_train)

# ADASYN - Adaptive Synthetic Sampling
adasyn = ADASYN(random_state=42)
X_resampled, y_resampled = adasyn.fit_resample(X_train, y_train)

# Combined approach
smote_tomek = SMOTETomek(random_state=42)
X_resampled, y_resampled = smote_tomek.fit_resample(X_train, y_train)

# Class weights
class_weights = compute_class_weight('balanced', classes=np.unique(y_train), y=y_train)
model = LogisticRegression(class_weight='balanced')
model.fit(X_train, y_train)

# Custom threshold
y_proba = model.predict_proba(X_test)[:, 1]
threshold = 0.3  # Lower threshold for minority class
y_pred_custom = (y_proba &gt;= threshold).astype(int)
</code></pre>
<h2 id="regression"><a class="header" href="#regression">Regression</a></h2>
<p>Regression predicts continuous values. The goal is to learn a function that maps inputs to outputs.</p>
<h3 id="linear-regression"><a class="header" href="#linear-regression">Linear Regression</a></h3>
<p>Mathematical formulation:</p>
<pre><code>y = β₀ + β₁x₁ + β₂x₂ + ... + βₙxₙ + ε
</code></pre>
<p>Where:</p>
<ul>
<li>y is the target variable</li>
<li>x₁, x₂, ..., xₙ are features</li>
<li>β₀, β₁, ..., βₙ are coefficients</li>
<li>ε is the error term</li>
</ul>
<pre><code class="language-python">from sklearn.linear_model import LinearRegression
from sklearn.datasets import make_regression
from sklearn.metrics import mean_squared_error, r2_score, mean_absolute_error

# Generate regression data
X, y = make_regression(n_samples=1000, n_features=10, noise=10, random_state=42)
X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)

# Train linear regression
lr = LinearRegression()
lr.fit(X_train, y_train)

# Predictions
y_pred = lr.predict(X_test)

# Evaluation
mse = mean_squared_error(y_test, y_pred)
rmse = np.sqrt(mse)
mae = mean_absolute_error(y_test, y_pred)
r2 = r2_score(y_test, y_pred)

print(f"RMSE: {rmse:.4f}")
print(f"MAE: {mae:.4f}")
print(f"R² Score: {r2:.4f}")

# Coefficients
print("\nCoefficients:", lr.coef_)
print("Intercept:", lr.intercept_)
</code></pre>
<h3 id="polynomial-regression"><a class="header" href="#polynomial-regression">Polynomial Regression</a></h3>
<pre><code class="language-python">from sklearn.preprocessing import PolynomialFeatures
from sklearn.pipeline import Pipeline

# Create polynomial features
poly_features = PolynomialFeatures(degree=3, include_bias=False)
X_poly = poly_features.fit_transform(X_train)

# Using Pipeline
poly_model = Pipeline([
    ('poly_features', PolynomialFeatures(degree=3)),
    ('linear_regression', LinearRegression())
])

poly_model.fit(X_train, y_train)
y_pred_poly = poly_model.predict(X_test)

# Compare with linear
from sklearn.metrics import mean_squared_error
print(f"Linear RMSE: {np.sqrt(mean_squared_error(y_test, y_pred)):.4f}")
print(f"Polynomial RMSE: {np.sqrt(mean_squared_error(y_test, y_pred_poly)):.4f}")
</code></pre>
<h3 id="regularized-regression"><a class="header" href="#regularized-regression">Regularized Regression</a></h3>
<p><strong>Ridge Regression (L2):</strong></p>
<pre><code>Loss = Σ(y - ŷ)² + λΣβ²
</code></pre>
<p><strong>Lasso Regression (L1):</strong></p>
<pre><code>Loss = Σ(y - ŷ)² + λΣ|β|
</code></pre>
<p><strong>Elastic Net:</strong></p>
<pre><code>Loss = Σ(y - ŷ)² + λ₁Σ|β| + λ₂Σβ²
</code></pre>
<pre><code class="language-python">from sklearn.linear_model import Ridge, Lasso, ElasticNet, LassoCV, RidgeCV

# Ridge Regression
ridge = Ridge(alpha=1.0)
ridge.fit(X_train, y_train)
y_pred_ridge = ridge.predict(X_test)

# Lasso Regression (feature selection)
lasso = Lasso(alpha=0.1)
lasso.fit(X_train, y_train)
y_pred_lasso = lasso.predict(X_test)

# Check which features were selected by Lasso
feature_importance = np.abs(lasso.coef_)
selected_features = np.where(feature_importance &gt; 0)[0]
print(f"Selected features: {selected_features}")

# Elastic Net
elastic = ElasticNet(alpha=0.1, l1_ratio=0.5)
elastic.fit(X_train, y_train)

# Cross-validated alpha selection
ridge_cv = RidgeCV(alphas=[0.1, 1.0, 10.0, 100.0])
ridge_cv.fit(X_train, y_train)
print(f"Best alpha: {ridge_cv.alpha_}")

lasso_cv = LassoCV(alphas=[0.01, 0.1, 1.0, 10.0], cv=5)
lasso_cv.fit(X_train, y_train)
print(f"Best alpha: {lasso_cv.alpha_}")
</code></pre>
<h2 id="linear-models"><a class="header" href="#linear-models">Linear Models</a></h2>
<h3 id="logistic-regression"><a class="header" href="#logistic-regression">Logistic Regression</a></h3>
<p>Binary classification using the sigmoid function:</p>
<pre><code>P(y=1|x) = 1 / (1 + e^(-z))
where z = β₀ + β₁x₁ + ... + βₙxₙ
</code></pre>
<pre><code class="language-python">from sklearn.linear_model import LogisticRegression

# Binary classification
log_reg = LogisticRegression(
    penalty='l2',
    C=1.0,  # Inverse of regularization strength
    solver='lbfgs',
    max_iter=1000
)
log_reg.fit(X_train, y_train)

# Get probabilities
probabilities = log_reg.predict_proba(X_test)
print("Class probabilities shape:", probabilities.shape)

# Decision boundary
decision_scores = log_reg.decision_function(X_test)
print("Decision scores shape:", decision_scores.shape)

# Multi-class logistic regression
multi_log_reg = LogisticRegression(multi_class='multinomial', solver='lbfgs')
multi_log_reg.fit(X_train, y_train)
</code></pre>
<h3 id="perceptron-1"><a class="header" href="#perceptron-1">Perceptron</a></h3>
<pre><code class="language-python">from sklearn.linear_model import Perceptron

# Simple perceptron
perceptron = Perceptron(max_iter=1000, tol=1e-3, random_state=42)
perceptron.fit(X_train, y_train)
y_pred = perceptron.predict(X_test)

# Custom perceptron implementation
class CustomPerceptron:
    def __init__(self, learning_rate=0.01, n_iterations=1000):
        self.lr = learning_rate
        self.n_iterations = n_iterations
        self.weights = None
        self.bias = None
    
    def fit(self, X, y):
        n_samples, n_features = X.shape
        self.weights = np.zeros(n_features)
        self.bias = 0
        
        # Convert labels to -1 and 1
        y_ = np.where(y &lt;= 0, -1, 1)
        
        for _ in range(self.n_iterations):
            for idx, x_i in enumerate(X):
                linear_output = np.dot(x_i, self.weights) + self.bias
                y_predicted = np.sign(linear_output)
                
                # Update weights if misclassified
                update = self.lr * (y_[idx] - y_predicted)
                self.weights += update * x_i
                self.bias += update
    
    def predict(self, X):
        linear_output = np.dot(X, self.weights) + self.bias
        return np.sign(linear_output)

# Train custom perceptron
custom_perc = CustomPerceptron()
custom_perc.fit(X_train, y_train)
</code></pre>
<h2 id="tree-based-models"><a class="header" href="#tree-based-models">Tree-Based Models</a></h2>
<h3 id="decision-trees"><a class="header" href="#decision-trees">Decision Trees</a></h3>
<pre><code class="language-python">from sklearn.tree import DecisionTreeClassifier, DecisionTreeRegressor
from sklearn.tree import export_graphviz
import graphviz

# Classification tree
dt_clf = DecisionTreeClassifier(
    max_depth=5,
    min_samples_split=10,
    min_samples_leaf=5,
    criterion='gini'  # or 'entropy'
)
dt_clf.fit(X_train, y_train)

# Regression tree
dt_reg = DecisionTreeRegressor(
    max_depth=5,
    min_samples_split=10,
    min_samples_leaf=5
)
dt_reg.fit(X_train, y_train)

# Feature importance
importances = dt_clf.feature_importances_
indices = np.argsort(importances)[::-1]
print("Feature ranking:")
for i in range(min(10, len(indices))):
    print(f"{i+1}. Feature {indices[i]} ({importances[indices[i]]:.4f})")

# Visualize tree
dot_data = export_graphviz(
    dt_clf,
    out_file=None,
    feature_names=[f'feature_{i}' for i in range(X_train.shape[1])],
    class_names=['class_0', 'class_1'],
    filled=True,
    rounded=True
)
# graph = graphviz.Source(dot_data)
</code></pre>
<h3 id="random-forest"><a class="header" href="#random-forest">Random Forest</a></h3>
<pre><code class="language-python">from sklearn.ensemble import RandomForestClassifier, RandomForestRegressor

# Random Forest Classifier
rf_clf = RandomForestClassifier(
    n_estimators=100,
    max_depth=10,
    min_samples_split=10,
    min_samples_leaf=4,
    max_features='sqrt',  # or 'log2', None
    bootstrap=True,
    oob_score=True,  # Out-of-bag score
    n_jobs=-1,
    random_state=42
)
rf_clf.fit(X_train, y_train)

# Out-of-bag score
print(f"OOB Score: {rf_clf.oob_score_:.4f}")

# Random Forest Regressor
rf_reg = RandomForestRegressor(
    n_estimators=100,
    max_depth=10,
    n_jobs=-1,
    random_state=42
)
rf_reg.fit(X_train, y_train)

# Feature importance
feature_importance = pd.DataFrame({
    'feature': [f'feature_{i}' for i in range(X_train.shape[1])],
    'importance': rf_clf.feature_importances_
}).sort_values('importance', ascending=False)
print(feature_importance.head(10))
</code></pre>
<h3 id="gradient-boosting"><a class="header" href="#gradient-boosting">Gradient Boosting</a></h3>
<pre><code class="language-python">from sklearn.ensemble import GradientBoostingClassifier, GradientBoostingRegressor

# Gradient Boosting Classifier
gb_clf = GradientBoostingClassifier(
    n_estimators=100,
    learning_rate=0.1,
    max_depth=3,
    subsample=0.8,
    random_state=42
)
gb_clf.fit(X_train, y_train)

# Gradient Boosting Regressor
gb_reg = GradientBoostingRegressor(
    n_estimators=100,
    learning_rate=0.1,
    max_depth=3,
    random_state=42
)
gb_reg.fit(X_train, y_train)

# Feature importance
print("Feature importances:", gb_clf.feature_importances_)
</code></pre>
<h3 id="xgboost"><a class="header" href="#xgboost">XGBoost</a></h3>
<pre><code class="language-python">import xgboost as xgb
from xgboost import XGBClassifier, XGBRegressor

# XGBoost Classifier
xgb_clf = XGBClassifier(
    n_estimators=100,
    max_depth=6,
    learning_rate=0.1,
    subsample=0.8,
    colsample_bytree=0.8,
    objective='binary:logistic',
    random_state=42
)
xgb_clf.fit(X_train, y_train)

# XGBoost Regressor
xgb_reg = XGBRegressor(
    n_estimators=100,
    max_depth=6,
    learning_rate=0.1,
    subsample=0.8,
    colsample_bytree=0.8,
    random_state=42
)
xgb_reg.fit(X_train, y_train)

# Using DMatrix for better performance
dtrain = xgb.DMatrix(X_train, label=y_train)
dtest = xgb.DMatrix(X_test, label=y_test)

params = {
    'max_depth': 6,
    'eta': 0.1,
    'objective': 'binary:logistic',
    'eval_metric': 'auc'
}

# Train with early stopping
evals = [(dtrain, 'train'), (dtest, 'test')]
bst = xgb.train(
    params,
    dtrain,
    num_boost_round=1000,
    evals=evals,
    early_stopping_rounds=50,
    verbose_eval=False
)

# Predictions
y_pred_proba = bst.predict(dtest)
</code></pre>
<h3 id="lightgbm"><a class="header" href="#lightgbm">LightGBM</a></h3>
<pre><code class="language-python">import lightgbm as lgb

# LightGBM Classifier
lgb_clf = lgb.LGBMClassifier(
    n_estimators=100,
    max_depth=6,
    learning_rate=0.1,
    num_leaves=31,
    subsample=0.8,
    colsample_bytree=0.8,
    random_state=42
)
lgb_clf.fit(X_train, y_train)

# Using Dataset for better performance
train_data = lgb.Dataset(X_train, label=y_train)
test_data = lgb.Dataset(X_test, label=y_test, reference=train_data)

params = {
    'objective': 'binary',
    'metric': 'auc',
    'num_leaves': 31,
    'learning_rate': 0.1,
    'feature_fraction': 0.8,
    'bagging_fraction': 0.8,
    'bagging_freq': 5
}

# Train
gbm = lgb.train(
    params,
    train_data,
    num_boost_round=1000,
    valid_sets=[test_data],
    callbacks=[lgb.early_stopping(stopping_rounds=50)]
)
</code></pre>
<h2 id="support-vector-machines"><a class="header" href="#support-vector-machines">Support Vector Machines</a></h2>
<p>SVM finds the hyperplane that maximizes the margin between classes.</p>
<p><strong>Mathematical Formulation:</strong></p>
<pre><code>Minimize: (1/2)||w||² + C·Σξᵢ
Subject to: yᵢ(w·xᵢ + b) ≥ 1 - ξᵢ, ξᵢ ≥ 0
</code></pre>
<h3 id="linear-svm"><a class="header" href="#linear-svm">Linear SVM</a></h3>
<pre><code class="language-python">from sklearn.svm import SVC, LinearSVC

# Linear SVM
linear_svm = LinearSVC(C=1.0, max_iter=10000)
linear_svm.fit(X_train, y_train)

# SVC with linear kernel
svc_linear = SVC(kernel='linear', C=1.0)
svc_linear.fit(X_train, y_train)
</code></pre>
<h3 id="non-linear-svm-with-kernels"><a class="header" href="#non-linear-svm-with-kernels">Non-linear SVM with Kernels</a></h3>
<pre><code class="language-python"># RBF (Radial Basis Function) kernel
svc_rbf = SVC(kernel='rbf', C=1.0, gamma='scale')
svc_rbf.fit(X_train, y_train)

# Polynomial kernel
svc_poly = SVC(kernel='poly', degree=3, C=1.0)
svc_poly.fit(X_train, y_train)

# Sigmoid kernel
svc_sigmoid = SVC(kernel='sigmoid', C=1.0)
svc_sigmoid.fit(X_train, y_train)

# Custom kernel
def custom_kernel(X, Y):
    return np.dot(X, Y.T)

svc_custom = SVC(kernel=custom_kernel)
svc_custom.fit(X_train, y_train)
</code></pre>
<h3 id="svm-for-regression"><a class="header" href="#svm-for-regression">SVM for Regression</a></h3>
<pre><code class="language-python">from sklearn.svm import SVR

# Support Vector Regression
svr = SVR(kernel='rbf', C=1.0, epsilon=0.1)
svr.fit(X_train, y_train)
y_pred_svr = svr.predict(X_test)

# Linear SVR
from sklearn.svm import LinearSVR
linear_svr = LinearSVR(epsilon=0.1, C=1.0)
linear_svr.fit(X_train, y_train)
</code></pre>
<h2 id="ensemble-methods"><a class="header" href="#ensemble-methods">Ensemble Methods</a></h2>
<h3 id="bagging"><a class="header" href="#bagging">Bagging</a></h3>
<pre><code class="language-python">from sklearn.ensemble import BaggingClassifier, BaggingRegressor
from sklearn.tree import DecisionTreeClassifier

# Bagging with decision trees
bagging_clf = BaggingClassifier(
    base_estimator=DecisionTreeClassifier(),
    n_estimators=100,
    max_samples=0.8,
    max_features=0.8,
    bootstrap=True,
    oob_score=True,
    n_jobs=-1,
    random_state=42
)
bagging_clf.fit(X_train, y_train)
print(f"OOB Score: {bagging_clf.oob_score_:.4f}")
</code></pre>
<h3 id="boosting"><a class="header" href="#boosting">Boosting</a></h3>
<p><strong>AdaBoost:</strong></p>
<pre><code class="language-python">from sklearn.ensemble import AdaBoostClassifier, AdaBoostRegressor

# AdaBoost Classifier
ada_clf = AdaBoostClassifier(
    base_estimator=DecisionTreeClassifier(max_depth=1),
    n_estimators=100,
    learning_rate=1.0,
    random_state=42
)
ada_clf.fit(X_train, y_train)

# AdaBoost Regressor
ada_reg = AdaBoostRegressor(
    base_estimator=DecisionTreeRegressor(max_depth=3),
    n_estimators=100,
    learning_rate=1.0,
    random_state=42
)
ada_reg.fit(X_train, y_train)
</code></pre>
<h3 id="stacking"><a class="header" href="#stacking">Stacking</a></h3>
<pre><code class="language-python">from sklearn.ensemble import StackingClassifier, StackingRegressor
from sklearn.linear_model import LogisticRegression
from sklearn.tree import DecisionTreeClassifier
from sklearn.svm import SVC
from sklearn.naive_bayes import GaussianNB

# Define base models
base_models = [
    ('lr', LogisticRegression()),
    ('dt', DecisionTreeClassifier()),
    ('svc', SVC(probability=True)),
    ('nb', GaussianNB())
]

# Stacking Classifier
stacking_clf = StackingClassifier(
    estimators=base_models,
    final_estimator=LogisticRegression(),
    cv=5
)
stacking_clf.fit(X_train, y_train)

# Stacking Regressor
from sklearn.linear_model import Ridge, Lasso
from sklearn.tree import DecisionTreeRegressor

reg_base_models = [
    ('ridge', Ridge()),
    ('lasso', Lasso()),
    ('dt', DecisionTreeRegressor())
]

stacking_reg = StackingRegressor(
    estimators=reg_base_models,
    final_estimator=Ridge(),
    cv=5
)
stacking_reg.fit(X_train, y_train)
</code></pre>
<h3 id="voting"><a class="header" href="#voting">Voting</a></h3>
<pre><code class="language-python">from sklearn.ensemble import VotingClassifier, VotingRegressor

# Hard voting
voting_clf_hard = VotingClassifier(
    estimators=base_models,
    voting='hard'
)
voting_clf_hard.fit(X_train, y_train)

# Soft voting (uses predicted probabilities)
voting_clf_soft = VotingClassifier(
    estimators=base_models,
    voting='soft'
)
voting_clf_soft.fit(X_train, y_train)

# Voting Regressor
voting_reg = VotingRegressor(estimators=reg_base_models)
voting_reg.fit(X_train, y_train)
</code></pre>
<h2 id="naive-bayes"><a class="header" href="#naive-bayes">Naive Bayes</a></h2>
<p>Based on Bayes' theorem with the "naive" assumption of feature independence:</p>
<pre><code>P(y|x₁,...,xₙ) = P(y)·P(x₁,...,xₙ|y) / P(x₁,...,xₙ)
</code></pre>
<h3 id="gaussian-naive-bayes"><a class="header" href="#gaussian-naive-bayes">Gaussian Naive Bayes</a></h3>
<pre><code class="language-python">from sklearn.naive_bayes import GaussianNB

# Gaussian NB (assumes features follow normal distribution)
gnb = GaussianNB()
gnb.fit(X_train, y_train)
y_pred = gnb.predict(X_test)
y_proba = gnb.predict_proba(X_test)
</code></pre>
<h3 id="multinomial-naive-bayes"><a class="header" href="#multinomial-naive-bayes">Multinomial Naive Bayes</a></h3>
<pre><code class="language-python">from sklearn.naive_bayes import MultinomialNB
from sklearn.feature_extraction.text import CountVectorizer

# Example with text data
texts = ["I love this", "This is bad", "Great product", "Terrible experience"]
labels = [1, 0, 1, 0]

vectorizer = CountVectorizer()
X_text = vectorizer.fit_transform(texts)

mnb = MultinomialNB(alpha=1.0)
mnb.fit(X_text, labels)
</code></pre>
<h3 id="bernoulli-naive-bayes"><a class="header" href="#bernoulli-naive-bayes">Bernoulli Naive Bayes</a></h3>
<pre><code class="language-python">from sklearn.naive_bayes import BernoulliNB

# Bernoulli NB (for binary/boolean features)
bnb = BernoulliNB(alpha=1.0)
bnb.fit(X_train, y_train)
</code></pre>
<h2 id="k-nearest-neighbors"><a class="header" href="#k-nearest-neighbors">K-Nearest Neighbors</a></h2>
<p>KNN is a non-parametric method that classifies based on the k nearest training examples.</p>
<pre><code class="language-python">from sklearn.neighbors import KNeighborsClassifier, KNeighborsRegressor

# KNN Classifier
knn_clf = KNeighborsClassifier(
    n_neighbors=5,
    weights='uniform',  # or 'distance'
    algorithm='auto',  # 'ball_tree', 'kd_tree', 'brute'
    metric='minkowski',
    p=2  # p=2 for Euclidean, p=1 for Manhattan
)
knn_clf.fit(X_train, y_train)

# Distance-weighted KNN
knn_weighted = KNeighborsClassifier(n_neighbors=5, weights='distance')
knn_weighted.fit(X_train, y_train)

# KNN Regressor
knn_reg = KNeighborsRegressor(n_neighbors=5, weights='distance')
knn_reg.fit(X_train, y_train)

# Find optimal k
from sklearn.model_selection import cross_val_score

k_range = range(1, 31)
k_scores = []
for k in k_range:
    knn = KNeighborsClassifier(n_neighbors=k)
    scores = cross_val_score(knn, X_train, y_train, cv=5, scoring='accuracy')
    k_scores.append(scores.mean())

optimal_k = k_range[np.argmax(k_scores)]
print(f"Optimal k: {optimal_k}")
</code></pre>
<h2 id="model-comparison"><a class="header" href="#model-comparison">Model Comparison</a></h2>
<pre><code class="language-python">from sklearn.model_selection import cross_validate
import pandas as pd

# Define models to compare
models = {
    'Logistic Regression': LogisticRegression(),
    'Decision Tree': DecisionTreeClassifier(),
    'Random Forest': RandomForestClassifier(),
    'SVM': SVC(),
    'KNN': KNeighborsClassifier(),
    'Naive Bayes': GaussianNB(),
    'XGBoost': XGBClassifier()
}

# Compare models
results = []
for name, model in models.items():
    cv_results = cross_validate(
        model, X_train, y_train,
        cv=5,
        scoring=['accuracy', 'precision', 'recall', 'f1'],
        return_train_score=True
    )
    
    results.append({
        'Model': name,
        'Train Accuracy': cv_results['train_accuracy'].mean(),
        'Test Accuracy': cv_results['test_accuracy'].mean(),
        'Precision': cv_results['test_precision'].mean(),
        'Recall': cv_results['test_recall'].mean(),
        'F1': cv_results['test_f1'].mean()
    })

# Display results
comparison_df = pd.DataFrame(results)
comparison_df = comparison_df.sort_values('Test Accuracy', ascending=False)
print(comparison_df)
</code></pre>
<h2 id="practical-tips-1"><a class="header" href="#practical-tips-1">Practical Tips</a></h2>
<h3 id="1-data-preprocessing-1"><a class="header" href="#1-data-preprocessing-1">1. Data Preprocessing</a></h3>
<pre><code class="language-python">from sklearn.preprocessing import StandardScaler, MinMaxScaler
from sklearn.impute import SimpleImputer

# Handle missing values
imputer = SimpleImputer(strategy='mean')  # or 'median', 'most_frequent'
X_imputed = imputer.fit_transform(X)

# Feature scaling (important for SVM, KNN, Neural Networks)
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X_train)
X_test_scaled = scaler.transform(X_test)
</code></pre>
<h3 id="2-feature-selection"><a class="header" href="#2-feature-selection">2. Feature Selection</a></h3>
<pre><code class="language-python">from sklearn.feature_selection import SelectKBest, f_classif, RFE

# Univariate selection
selector = SelectKBest(f_classif, k=10)
X_selected = selector.fit_transform(X_train, y_train)

# Recursive Feature Elimination
rfe = RFE(estimator=RandomForestClassifier(), n_features_to_select=10)
X_rfe = rfe.fit_transform(X_train, y_train)
</code></pre>
<h3 id="3-pipeline"><a class="header" href="#3-pipeline">3. Pipeline</a></h3>
<pre><code class="language-python">from sklearn.pipeline import Pipeline
from sklearn.preprocessing import StandardScaler
from sklearn.decomposition import PCA

# Create pipeline
pipe = Pipeline([
    ('scaler', StandardScaler()),
    ('pca', PCA(n_components=10)),
    ('classifier', LogisticRegression())
])

pipe.fit(X_train, y_train)
y_pred = pipe.predict(X_test)
</code></pre>
<h3 id="4-hyperparameter-tuning"><a class="header" href="#4-hyperparameter-tuning">4. Hyperparameter Tuning</a></h3>
<pre><code class="language-python">from sklearn.model_selection import GridSearchCV, RandomizedSearchCV

# Grid search
param_grid = {
    'C': [0.1, 1, 10],
    'kernel': ['rbf', 'linear'],
    'gamma': ['scale', 'auto']
}

grid_search = GridSearchCV(SVC(), param_grid, cv=5, scoring='accuracy')
grid_search.fit(X_train, y_train)
print(f"Best parameters: {grid_search.best_params_}")
</code></pre>
<h2 id="resources-5"><a class="header" href="#resources-5">Resources</a></h2>
<ul>
<li>scikit-learn documentation: https://scikit-learn.org/</li>
<li>XGBoost documentation: https://xgboost.readthedocs.io/</li>
<li>LightGBM documentation: https://lightgbm.readthedocs.io/</li>
<li>"Introduction to Statistical Learning" by James et al.</li>
<li>"Pattern Recognition and Machine Learning" by Bishop</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unsupervised-learning-1"><a class="header" href="#unsupervised-learning-1">Unsupervised Learning</a></h1>
<p>Unsupervised learning discovers hidden patterns in data without labeled outputs.</p>
<h2 id="table-of-contents-8"><a class="header" href="#table-of-contents-8">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/unsupervised_learning.html#clustering">Clustering</a></li>
<li><a href="machine_learning/unsupervised_learning.html#dimensionality-reduction">Dimensionality Reduction</a></li>
<li><a href="machine_learning/unsupervised_learning.html#anomaly-detection">Anomaly Detection</a></li>
<li><a href="machine_learning/unsupervised_learning.html#density-estimation">Density Estimation</a></li>
<li><a href="machine_learning/unsupervised_learning.html#association-rules">Association Rules</a></li>
</ol>
<h2 id="clustering"><a class="header" href="#clustering">Clustering</a></h2>
<p>Clustering groups similar data points together without predefined labels.</p>
<h3 id="k-means-clustering"><a class="header" href="#k-means-clustering">K-Means Clustering</a></h3>
<p>K-Means partitions data into k clusters by minimizing within-cluster variance.</p>
<p><strong>Algorithm:</strong></p>
<ol>
<li>Initialize k centroids randomly</li>
<li>Assign each point to nearest centroid</li>
<li>Update centroids as mean of assigned points</li>
<li>Repeat steps 2-3 until convergence</li>
</ol>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
from sklearn.cluster import KMeans
from sklearn.datasets import make_blobs

# Generate synthetic data
X, y_true = make_blobs(n_samples=300, centers=4, cluster_std=0.6, random_state=42)

# K-Means clustering
kmeans = KMeans(n_clusters=4, random_state=42, n_init=10)
kmeans.fit(X)

# Predictions
y_pred = kmeans.predict(X)
centers = kmeans.cluster_centers_

# Visualization
plt.figure(figsize=(10, 6))
plt.scatter(X[:, 0], X[:, 1], c=y_pred, cmap='viridis', alpha=0.6)
plt.scatter(centers[:, 0], centers[:, 1], c='red', marker='X', s=200, edgecolors='black')
plt.title('K-Means Clustering')
plt.xlabel('Feature 1')
plt.ylabel('Feature 2')
plt.show()

# Cluster characteristics
print(f"Cluster centers:\n{centers}")
print(f"Inertia (sum of squared distances): {kmeans.inertia_:.2f}")
</code></pre>
<h3 id="choosing-optimal-k"><a class="header" href="#choosing-optimal-k">Choosing Optimal K</a></h3>
<p><strong>Elbow Method:</strong></p>
<pre><code class="language-python">from sklearn.metrics import silhouette_score

# Elbow method
inertias = []
silhouettes = []
K_range = range(2, 11)

for k in K_range:
    kmeans = KMeans(n_clusters=k, random_state=42, n_init=10)
    kmeans.fit(X)
    inertias.append(kmeans.inertia_)
    silhouettes.append(silhouette_score(X, kmeans.labels_))

# Plot elbow curve
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(15, 5))

ax1.plot(K_range, inertias, 'bo-')
ax1.set_xlabel('Number of clusters (k)')
ax1.set_ylabel('Inertia')
ax1.set_title('Elbow Method')
ax1.grid(True)

ax2.plot(K_range, silhouettes, 'ro-')
ax2.set_xlabel('Number of clusters (k)')
ax2.set_ylabel('Silhouette Score')
ax2.set_title('Silhouette Analysis')
ax2.grid(True)

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="k-means"><a class="header" href="#k-means">K-Means++</a></h3>
<p>Improved initialization for K-Means:</p>
<pre><code class="language-python"># K-Means++ (default in scikit-learn)
kmeans_plus = KMeans(n_clusters=4, init='k-means++', random_state=42)
kmeans_plus.fit(X)

# Mini-batch K-Means (faster for large datasets)
from sklearn.cluster import MiniBatchKMeans

mini_kmeans = MiniBatchKMeans(n_clusters=4, random_state=42, batch_size=100)
mini_kmeans.fit(X)
</code></pre>
<h3 id="hierarchical-clustering"><a class="header" href="#hierarchical-clustering">Hierarchical Clustering</a></h3>
<p>Builds a tree of clusters (dendrogram).</p>
<p><strong>Agglomerative (Bottom-up):</strong></p>
<pre><code class="language-python">from sklearn.cluster import AgglomerativeClustering
from scipy.cluster.hierarchy import dendrogram, linkage
from scipy.spatial.distance import pdist

# Agglomerative clustering
agg_clustering = AgglomerativeClustering(
    n_clusters=4,
    linkage='ward'  # 'complete', 'average', 'single'
)
y_pred_agg = agg_clustering.fit_predict(X)

# Create dendrogram
Z = linkage(X, method='ward')
plt.figure(figsize=(12, 6))
dendrogram(Z)
plt.title('Hierarchical Clustering Dendrogram')
plt.xlabel('Sample Index')
plt.ylabel('Distance')
plt.show()

# Different linkage methods
linkage_methods = ['ward', 'complete', 'average', 'single']
for method in linkage_methods:
    agg = AgglomerativeClustering(n_clusters=4, linkage=method)
    labels = agg.fit_predict(X)
    print(f"{method.capitalize()} linkage - Silhouette: {silhouette_score(X, labels):.3f}")
</code></pre>
<h3 id="dbscan"><a class="header" href="#dbscan">DBSCAN</a></h3>
<p>Density-Based Spatial Clustering finds core samples of high density.</p>
<pre><code class="language-python">from sklearn.cluster import DBSCAN

# DBSCAN
dbscan = DBSCAN(eps=0.5, min_samples=5)
y_pred_dbscan = dbscan.fit_predict(X)

# Number of clusters (excluding noise points labeled as -1)
n_clusters = len(set(y_pred_dbscan)) - (1 if -1 in y_pred_dbscan else 0)
n_noise = list(y_pred_dbscan).count(-1)

print(f"Number of clusters: {n_clusters}")
print(f"Number of noise points: {n_noise}")

# Visualization
plt.figure(figsize=(10, 6))
unique_labels = set(y_pred_dbscan)
colors = [plt.cm.Spectral(each) for each in np.linspace(0, 1, len(unique_labels))]

for k, col in zip(unique_labels, colors):
    if k == -1:
        col = [0, 0, 0, 1]  # Black for noise
    
    class_member_mask = (y_pred_dbscan == k)
    xy = X[class_member_mask]
    plt.plot(xy[:, 0], xy[:, 1], 'o', markerfacecolor=tuple(col),
             markeredgecolor='k', markersize=6)

plt.title(f'DBSCAN Clustering\n{n_clusters} clusters, {n_noise} noise points')
plt.show()

# Grid search for optimal parameters
from sklearn.model_selection import ParameterGrid

param_grid = {
    'eps': [0.3, 0.5, 0.7, 1.0],
    'min_samples': [3, 5, 10]
}

best_score = -1
best_params = None

for params in ParameterGrid(param_grid):
    dbscan = DBSCAN(**params)
    labels = dbscan.fit_predict(X)
    
    # Skip if all points are noise or only one cluster
    if len(set(labels)) &lt;= 1:
        continue
    
    score = silhouette_score(X, labels)
    if score &gt; best_score:
        best_score = score
        best_params = params

print(f"Best parameters: {best_params}")
print(f"Best silhouette score: {best_score:.3f}")
</code></pre>
<h3 id="hdbscan"><a class="header" href="#hdbscan">HDBSCAN</a></h3>
<p>Hierarchical DBSCAN with better parameter selection:</p>
<pre><code class="language-python"># pip install hdbscan
import hdbscan

# HDBSCAN
clusterer = hdbscan.HDBSCAN(min_cluster_size=5, min_samples=3)
y_pred_hdbscan = clusterer.fit_predict(X)

# Cluster probabilities
probabilities = clusterer.probabilities_

print(f"Number of clusters: {len(set(y_pred_hdbscan)) - (1 if -1 in y_pred_hdbscan else 0)}")
print(f"Noise points: {list(y_pred_hdbscan).count(-1)}")
</code></pre>
<h3 id="gaussian-mixture-models"><a class="header" href="#gaussian-mixture-models">Gaussian Mixture Models</a></h3>
<p>GMM assumes data is generated from a mixture of Gaussian distributions.</p>
<pre><code class="language-python">from sklearn.mixture import GaussianMixture

# Gaussian Mixture Model
gmm = GaussianMixture(
    n_components=4,
    covariance_type='full',  # 'tied', 'diag', 'spherical'
    random_state=42
)
gmm.fit(X)

# Predictions (hard clustering)
y_pred_gmm = gmm.predict(X)

# Soft clustering (probabilities)
probabilities = gmm.predict_proba(X)
print("Shape of probabilities:", probabilities.shape)

# Model parameters
print(f"Means:\n{gmm.means_}")
print(f"Covariances shape: {gmm.covariances_.shape}")
print(f"Weights: {gmm.weights_}")

# Bayesian Information Criterion (BIC) for model selection
n_components_range = range(2, 11)
bic_scores = []
aic_scores = []

for n_components in n_components_range:
    gmm = GaussianMixture(n_components=n_components, random_state=42)
    gmm.fit(X)
    bic_scores.append(gmm.bic(X))
    aic_scores.append(gmm.aic(X))

plt.figure(figsize=(10, 6))
plt.plot(n_components_range, bic_scores, 'bo-', label='BIC')
plt.plot(n_components_range, aic_scores, 'rs-', label='AIC')
plt.xlabel('Number of components')
plt.ylabel('Information Criterion')
plt.title('GMM Model Selection')
plt.legend()
plt.grid(True)
plt.show()

optimal_components = n_components_range[np.argmin(bic_scores)]
print(f"Optimal number of components: {optimal_components}")
</code></pre>
<h3 id="mean-shift"><a class="header" href="#mean-shift">Mean Shift</a></h3>
<p>Finds clusters by locating peaks in density.</p>
<pre><code class="language-python">from sklearn.cluster import MeanShift, estimate_bandwidth

# Estimate bandwidth
bandwidth = estimate_bandwidth(X, quantile=0.2, n_samples=500)

# Mean Shift clustering
ms = MeanShift(bandwidth=bandwidth, bin_seeding=True)
ms.fit(X)
y_pred_ms = ms.labels_
cluster_centers = ms.cluster_centers_

n_clusters = len(np.unique(y_pred_ms))
print(f"Number of clusters: {n_clusters}")
</code></pre>
<h3 id="spectral-clustering"><a class="header" href="#spectral-clustering">Spectral Clustering</a></h3>
<p>Uses eigenvalues of similarity matrix for clustering.</p>
<pre><code class="language-python">from sklearn.cluster import SpectralClustering

# Spectral clustering
spectral = SpectralClustering(
    n_clusters=4,
    affinity='rbf',  # 'nearest_neighbors', 'precomputed'
    assign_labels='discretize',  # 'kmeans'
    random_state=42
)
y_pred_spectral = spectral.fit_predict(X)

# Custom affinity matrix
from sklearn.metrics.pairwise import rbf_kernel
affinity_matrix = rbf_kernel(X, gamma=1.0)
spectral_custom = SpectralClustering(n_clusters=4, affinity='precomputed')
y_pred_spectral_custom = spectral_custom.fit_predict(affinity_matrix)
</code></pre>
<h2 id="dimensionality-reduction"><a class="header" href="#dimensionality-reduction">Dimensionality Reduction</a></h2>
<p>Reducing the number of features while preserving important information.</p>
<h3 id="principal-component-analysis-pca"><a class="header" href="#principal-component-analysis-pca">Principal Component Analysis (PCA)</a></h3>
<p>PCA finds orthogonal directions of maximum variance.</p>
<p><strong>Mathematical Formulation:</strong></p>
<pre><code>Maximize: Var(Xw) subject to ||w|| = 1
</code></pre>
<pre><code class="language-python">from sklearn.decomposition import PCA
from sklearn.datasets import load_digits

# Load high-dimensional data
digits = load_digits()
X = digits.data  # 64 features (8x8 images)
y = digits.target

# PCA
pca = PCA(n_components=2)
X_pca = pca.fit_transform(X)

# Explained variance
print(f"Explained variance ratio: {pca.explained_variance_ratio_}")
print(f"Total explained variance: {pca.explained_variance_ratio_.sum():.3f}")

# Visualization
plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_pca[:, 0], X_pca[:, 1], c=y, cmap='tab10', alpha=0.6)
plt.colorbar(scatter)
plt.xlabel(f'PC1 ({pca.explained_variance_ratio_[0]:.2%} variance)')
plt.ylabel(f'PC2 ({pca.explained_variance_ratio_[1]:.2%} variance)')
plt.title('PCA of Digits Dataset')
plt.show()

# Determine number of components
pca_full = PCA()
pca_full.fit(X)

# Cumulative explained variance
cumsum_var = np.cumsum(pca_full.explained_variance_ratio_)
n_components_95 = np.argmax(cumsum_var &gt;= 0.95) + 1

plt.figure(figsize=(10, 6))
plt.plot(range(1, len(cumsum_var) + 1), cumsum_var, 'bo-')
plt.axhline(y=0.95, color='r', linestyle='--', label='95% variance')
plt.axvline(x=n_components_95, color='g', linestyle='--', 
            label=f'{n_components_95} components')
plt.xlabel('Number of Components')
plt.ylabel('Cumulative Explained Variance')
plt.title('PCA Explained Variance')
plt.legend()
plt.grid(True)
plt.show()

print(f"Components needed for 95% variance: {n_components_95}")

# Incremental PCA for large datasets
from sklearn.decomposition import IncrementalPCA

ipca = IncrementalPCA(n_components=10, batch_size=100)
X_ipca = ipca.fit_transform(X)

# Kernel PCA for non-linear dimensionality reduction
from sklearn.decomposition import KernelPCA

kpca = KernelPCA(n_components=2, kernel='rbf', gamma=0.04)
X_kpca = kpca.fit_transform(X)
</code></pre>
<h3 id="t-sne"><a class="header" href="#t-sne">t-SNE</a></h3>
<p>t-Distributed Stochastic Neighbor Embedding for visualization.</p>
<pre><code class="language-python">from sklearn.manifold import TSNE

# t-SNE
tsne = TSNE(
    n_components=2,
    perplexity=30,
    learning_rate=200,
    n_iter=1000,
    random_state=42
)
X_tsne = tsne.fit_transform(X)

# Visualization
plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_tsne[:, 0], X_tsne[:, 1], c=y, cmap='tab10', alpha=0.6)
plt.colorbar(scatter)
plt.title('t-SNE of Digits Dataset')
plt.xlabel('t-SNE 1')
plt.ylabel('t-SNE 2')
plt.show()

# Try different perplexities
fig, axes = plt.subplots(2, 2, figsize=(15, 15))
perplexities = [5, 30, 50, 100]

for ax, perplexity in zip(axes.ravel(), perplexities):
    tsne = TSNE(n_components=2, perplexity=perplexity, random_state=42)
    X_embedded = tsne.fit_transform(X)
    
    scatter = ax.scatter(X_embedded[:, 0], X_embedded[:, 1], c=y, 
                        cmap='tab10', alpha=0.6)
    ax.set_title(f'Perplexity = {perplexity}')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="umap"><a class="header" href="#umap">UMAP</a></h3>
<p>Uniform Manifold Approximation and Projection (faster than t-SNE).</p>
<pre><code class="language-python"># pip install umap-learn
import umap

# UMAP
reducer = umap.UMAP(
    n_components=2,
    n_neighbors=15,
    min_dist=0.1,
    metric='euclidean',
    random_state=42
)
X_umap = reducer.fit_transform(X)

# Visualization
plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_umap[:, 0], X_umap[:, 1], c=y, cmap='tab10', alpha=0.6)
plt.colorbar(scatter)
plt.title('UMAP of Digits Dataset')
plt.xlabel('UMAP 1')
plt.ylabel('UMAP 2')
plt.show()

# Compare PCA, t-SNE, and UMAP
fig, axes = plt.subplots(1, 3, figsize=(18, 5))

methods = [
    ('PCA', X_pca),
    ('t-SNE', X_tsne),
    ('UMAP', X_umap)
]

for ax, (name, X_reduced) in zip(axes, methods):
    scatter = ax.scatter(X_reduced[:, 0], X_reduced[:, 1], c=y, 
                        cmap='tab10', alpha=0.6)
    ax.set_title(name)
    ax.set_xlabel(f'{name} 1')
    ax.set_ylabel(f'{name} 2')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="linear-discriminant-analysis-lda"><a class="header" href="#linear-discriminant-analysis-lda">Linear Discriminant Analysis (LDA)</a></h3>
<p>Supervised dimensionality reduction that maximizes class separability.</p>
<pre><code class="language-python">from sklearn.discriminant_analysis import LinearDiscriminantAnalysis

# LDA (requires labels)
lda = LinearDiscriminantAnalysis(n_components=2)
X_lda = lda.fit_transform(X, y)

# Explained variance ratio
print(f"Explained variance ratio: {lda.explained_variance_ratio_}")

# Visualization
plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_lda[:, 0], X_lda[:, 1], c=y, cmap='tab10', alpha=0.6)
plt.colorbar(scatter)
plt.xlabel(f'LD1 ({lda.explained_variance_ratio_[0]:.2%})')
plt.ylabel(f'LD2 ({lda.explained_variance_ratio_[1]:.2%})')
plt.title('LDA of Digits Dataset')
plt.show()
</code></pre>
<h3 id="autoencoders"><a class="header" href="#autoencoders">Autoencoders</a></h3>
<p>Neural network-based dimensionality reduction.</p>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
from torch.utils.data import DataLoader, TensorDataset

# Define autoencoder
class Autoencoder(nn.Module):
    def __init__(self, input_dim, encoding_dim):
        super(Autoencoder, self).__init__()
        
        # Encoder
        self.encoder = nn.Sequential(
            nn.Linear(input_dim, 128),
            nn.ReLU(),
            nn.Linear(128, 64),
            nn.ReLU(),
            nn.Linear(64, encoding_dim)
        )
        
        # Decoder
        self.decoder = nn.Sequential(
            nn.Linear(encoding_dim, 64),
            nn.ReLU(),
            nn.Linear(64, 128),
            nn.ReLU(),
            nn.Linear(128, input_dim),
            nn.Sigmoid()
        )
    
    def forward(self, x):
        encoded = self.encoder(x)
        decoded = self.decoder(encoded)
        return decoded
    
    def encode(self, x):
        return self.encoder(x)

# Prepare data
X_normalized = (X - X.min()) / (X.max() - X.min())
X_tensor = torch.FloatTensor(X_normalized)
dataset = TensorDataset(X_tensor, X_tensor)
dataloader = DataLoader(dataset, batch_size=32, shuffle=True)

# Initialize model
input_dim = X.shape[1]
encoding_dim = 2
model = Autoencoder(input_dim, encoding_dim)
criterion = nn.MSELoss()
optimizer = optim.Adam(model.parameters(), lr=0.001)

# Train
n_epochs = 50
for epoch in range(n_epochs):
    total_loss = 0
    for batch_x, _ in dataloader:
        optimizer.zero_grad()
        outputs = model(batch_x)
        loss = criterion(outputs, batch_x)
        loss.backward()
        optimizer.step()
        total_loss += loss.item()
    
    if (epoch + 1) % 10 == 0:
        print(f'Epoch [{epoch+1}/{n_epochs}], Loss: {total_loss/len(dataloader):.4f}')

# Get encoded representations
model.eval()
with torch.no_grad():
    X_encoded = model.encode(X_tensor).numpy()

# Visualization
plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_encoded[:, 0], X_encoded[:, 1], c=y, cmap='tab10', alpha=0.6)
plt.colorbar(scatter)
plt.title('Autoencoder Dimensionality Reduction')
plt.xlabel('Encoded Dimension 1')
plt.ylabel('Encoded Dimension 2')
plt.show()
</code></pre>
<h3 id="non-negative-matrix-factorization-nmf"><a class="header" href="#non-negative-matrix-factorization-nmf">Non-negative Matrix Factorization (NMF)</a></h3>
<p>Decomposes data into non-negative components.</p>
<pre><code class="language-python">from sklearn.decomposition import NMF

# NMF (requires non-negative data)
X_nonneg = X - X.min() + 1e-10
nmf = NMF(n_components=10, init='random', random_state=42, max_iter=500)
W = nmf.fit_transform(X_nonneg)  # Coefficient matrix
H = nmf.components_  # Component matrix

print(f"Reconstruction error: {nmf.reconstruction_err_:.2f}")
print(f"W shape: {W.shape}, H shape: {H.shape}")

# Visualize components
fig, axes = plt.subplots(2, 5, figsize=(15, 6))
for i, ax in enumerate(axes.ravel()):
    ax.imshow(H[i].reshape(8, 8), cmap='gray')
    ax.set_title(f'Component {i+1}')
    ax.axis('off')
plt.tight_layout()
plt.show()
</code></pre>
<h3 id="truncated-svd"><a class="header" href="#truncated-svd">Truncated SVD</a></h3>
<p>Similar to PCA but works with sparse matrices.</p>
<pre><code class="language-python">from sklearn.decomposition import TruncatedSVD

# Truncated SVD
svd = TruncatedSVD(n_components=10, random_state=42)
X_svd = svd.fit_transform(X)

print(f"Explained variance ratio: {svd.explained_variance_ratio_}")
print(f"Total explained variance: {svd.explained_variance_ratio_.sum():.3f}")
</code></pre>
<h2 id="anomaly-detection"><a class="header" href="#anomaly-detection">Anomaly Detection</a></h2>
<p>Identifying unusual patterns that don't conform to expected behavior.</p>
<h3 id="isolation-forest"><a class="header" href="#isolation-forest">Isolation Forest</a></h3>
<pre><code class="language-python">from sklearn.ensemble import IsolationForest

# Isolation Forest
iso_forest = IsolationForest(
    n_estimators=100,
    contamination=0.1,  # Expected proportion of outliers
    random_state=42
)
y_pred_outliers = iso_forest.fit_predict(X)

# -1 for outliers, 1 for inliers
n_outliers = (y_pred_outliers == -1).sum()
print(f"Number of outliers detected: {n_outliers}")

# Anomaly scores
anomaly_scores = iso_forest.score_samples(X)

# Visualization
plt.figure(figsize=(10, 6))
scatter = plt.scatter(X_pca[:, 0], X_pca[:, 1], c=anomaly_scores, cmap='RdYlGn')
plt.colorbar(scatter, label='Anomaly Score')
plt.title('Isolation Forest Anomaly Scores')
plt.xlabel('PC1')
plt.ylabel('PC2')
plt.show()
</code></pre>
<h3 id="local-outlier-factor-lof"><a class="header" href="#local-outlier-factor-lof">Local Outlier Factor (LOF)</a></h3>
<pre><code class="language-python">from sklearn.neighbors import LocalOutlierFactor

# Local Outlier Factor
lof = LocalOutlierFactor(n_neighbors=20, contamination=0.1)
y_pred_lof = lof.fit_predict(X)

# Negative outlier factor (lower values = more anomalous)
outlier_scores = lof.negative_outlier_factor_

n_outliers = (y_pred_lof == -1).sum()
print(f"Number of outliers detected: {n_outliers}")
</code></pre>
<h3 id="one-class-svm"><a class="header" href="#one-class-svm">One-Class SVM</a></h3>
<pre><code class="language-python">from sklearn.svm import OneClassSVM

# One-Class SVM
oc_svm = OneClassSVM(nu=0.1, kernel='rbf', gamma='auto')
y_pred_oc = oc_svm.fit_predict(X)

n_outliers = (y_pred_oc == -1).sum()
print(f"Number of outliers detected: {n_outliers}")
</code></pre>
<h3 id="elliptic-envelope"><a class="header" href="#elliptic-envelope">Elliptic Envelope</a></h3>
<pre><code class="language-python">from sklearn.covariance import EllipticEnvelope

# Elliptic Envelope (assumes Gaussian distribution)
elliptic = EllipticEnvelope(contamination=0.1, random_state=42)
y_pred_elliptic = elliptic.fit_predict(X)

n_outliers = (y_pred_elliptic == -1).sum()
print(f"Number of outliers detected: {n_outliers}")
</code></pre>
<h2 id="density-estimation"><a class="header" href="#density-estimation">Density Estimation</a></h2>
<p>Estimating the probability density function of data.</p>
<h3 id="kernel-density-estimation"><a class="header" href="#kernel-density-estimation">Kernel Density Estimation</a></h3>
<pre><code class="language-python">from sklearn.neighbors import KernelDensity

# Kernel Density Estimation
kde = KernelDensity(kernel='gaussian', bandwidth=0.5)
kde.fit(X)

# Score samples (log-likelihood)
log_density = kde.score_samples(X)

# Sample from the learned distribution
samples = kde.sample(100, random_state=42)

# Visualization (for 2D data)
if X.shape[1] == 2:
    xx, yy = np.meshgrid(np.linspace(X[:, 0].min(), X[:, 0].max(), 100),
                         np.linspace(X[:, 1].min(), X[:, 1].max(), 100))
    Z = np.exp(kde.score_samples(np.c_[xx.ravel(), yy.ravel()]))
    Z = Z.reshape(xx.shape)
    
    plt.figure(figsize=(10, 6))
    plt.contourf(xx, yy, Z, levels=20, cmap='viridis', alpha=0.6)
    plt.scatter(X[:, 0], X[:, 1], c='red', alpha=0.3, s=10)
    plt.colorbar(label='Density')
    plt.title('Kernel Density Estimation')
    plt.show()
</code></pre>
<h2 id="association-rules"><a class="header" href="#association-rules">Association Rules</a></h2>
<p>Finding interesting relationships between variables.</p>
<h3 id="apriori-algorithm"><a class="header" href="#apriori-algorithm">Apriori Algorithm</a></h3>
<pre><code class="language-python"># pip install mlxtend
from mlxtend.frequent_patterns import apriori, association_rules
import pandas as pd

# Example transaction data
transactions = [
    ['milk', 'bread', 'butter'],
    ['milk', 'bread'],
    ['milk', 'butter'],
    ['bread', 'butter'],
    ['milk', 'bread', 'butter', 'cheese'],
    ['milk', 'cheese'],
    ['bread', 'cheese']
]

# Convert to one-hot encoded DataFrame
from mlxtend.preprocessing import TransactionEncoder

te = TransactionEncoder()
te_array = te.fit(transactions).transform(transactions)
df = pd.DataFrame(te_array, columns=te.columns_)

# Find frequent itemsets
frequent_itemsets = apriori(df, min_support=0.3, use_colnames=True)
print("Frequent Itemsets:")
print(frequent_itemsets)

# Generate association rules
rules = association_rules(frequent_itemsets, metric='confidence', min_threshold=0.5)
print("\nAssociation Rules:")
print(rules[['antecedents', 'consequents', 'support', 'confidence', 'lift']])

# Filter interesting rules
interesting_rules = rules[(rules['lift'] &gt; 1) &amp; (rules['confidence'] &gt; 0.6)]
print("\nInteresting Rules:")
print(interesting_rules)
</code></pre>
<h2 id="clustering-evaluation-metrics"><a class="header" href="#clustering-evaluation-metrics">Clustering Evaluation Metrics</a></h2>
<pre><code class="language-python">from sklearn.metrics import (
    silhouette_score, davies_bouldin_score, 
    calinski_harabasz_score, adjusted_rand_score
)

# Silhouette Score (higher is better, range: [-1, 1])
silhouette = silhouette_score(X, y_pred)

# Davies-Bouldin Index (lower is better)
davies_bouldin = davies_bouldin_score(X, y_pred)

# Calinski-Harabasz Index (higher is better)
calinski_harabasz = calinski_harabasz_score(X, y_pred)

# Adjusted Rand Index (if true labels available)
ari = adjusted_rand_score(y_true, y_pred)

print(f"Silhouette Score: {silhouette:.3f}")
print(f"Davies-Bouldin Index: {davies_bouldin:.3f}")
print(f"Calinski-Harabasz Index: {calinski_harabasz:.3f}")
print(f"Adjusted Rand Index: {ari:.3f}")

# Silhouette analysis per sample
from sklearn.metrics import silhouette_samples

silhouette_vals = silhouette_samples(X, y_pred)

# Visualize silhouette scores
fig, ax = plt.subplots(figsize=(10, 6))
y_lower = 10

for i in range(len(set(y_pred))):
    cluster_silhouette_vals = silhouette_vals[y_pred == i]
    cluster_silhouette_vals.sort()
    
    size_cluster_i = cluster_silhouette_vals.shape[0]
    y_upper = y_lower + size_cluster_i
    
    ax.fill_betweenx(np.arange(y_lower, y_upper),
                     0, cluster_silhouette_vals,
                     alpha=0.7)
    
    ax.text(-0.05, y_lower + 0.5 * size_cluster_i, str(i))
    y_lower = y_upper + 10

ax.set_xlabel("Silhouette Coefficient")
ax.set_ylabel("Cluster")
ax.axvline(x=silhouette, color="red", linestyle="--")
ax.set_title("Silhouette Analysis")
plt.show()
</code></pre>
<h2 id="practical-tips-2"><a class="header" href="#practical-tips-2">Practical Tips</a></h2>
<h3 id="1-feature-scaling"><a class="header" href="#1-feature-scaling">1. Feature Scaling</a></h3>
<pre><code class="language-python"># Always scale features for distance-based methods
from sklearn.preprocessing import StandardScaler

scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
</code></pre>
<h3 id="2-handling-high-dimensional-data"><a class="header" href="#2-handling-high-dimensional-data">2. Handling High-Dimensional Data</a></h3>
<pre><code class="language-python"># Apply dimensionality reduction before clustering
pca = PCA(n_components=0.95)  # Keep 95% variance
X_reduced = pca.fit_transform(X_scaled)
kmeans = KMeans(n_clusters=4)
kmeans.fit(X_reduced)
</code></pre>
<h3 id="3-visualizing-clusters"><a class="header" href="#3-visualizing-clusters">3. Visualizing Clusters</a></h3>
<pre><code class="language-python">def plot_clusters_3d(X, labels, title='3D Cluster Visualization'):
    from mpl_toolkits.mplot3d import Axes3D
    
    # Reduce to 3D if needed
    if X.shape[1] &gt; 3:
        pca = PCA(n_components=3)
        X = pca.fit_transform(X)
    
    fig = plt.figure(figsize=(12, 8))
    ax = fig.add_subplot(111, projection='3d')
    scatter = ax.scatter(X[:, 0], X[:, 1], X[:, 2], c=labels, cmap='viridis')
    ax.set_title(title)
    plt.colorbar(scatter)
    plt.show()
</code></pre>
<h2 id="resources-6"><a class="header" href="#resources-6">Resources</a></h2>
<ul>
<li>scikit-learn documentation: https://scikit-learn.org/</li>
<li>"Pattern Recognition and Machine Learning" by Christopher Bishop</li>
<li>"Introduction to Data Mining" by Tan, Steinbach, Kumar</li>
<li>UMAP documentation: https://umap-learn.readthedocs.io/</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reinforcement-learning-1"><a class="header" href="#reinforcement-learning-1">Reinforcement Learning</a></h1>
<p>Reinforcement Learning (RL) is about learning to make decisions by interacting with an environment to maximize cumulative reward.</p>
<h2 id="table-of-contents-9"><a class="header" href="#table-of-contents-9">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/reinforcement_learning.html#core-concepts">Core Concepts</a></li>
<li><a href="machine_learning/reinforcement_learning.html#markov-decision-processes">Markov Decision Processes</a></li>
<li><a href="machine_learning/reinforcement_learning.html#dynamic-programming">Dynamic Programming</a></li>
<li><a href="machine_learning/reinforcement_learning.html#monte-carlo-methods">Monte Carlo Methods</a></li>
<li><a href="machine_learning/reinforcement_learning.html#temporal-difference-learning">Temporal Difference Learning</a></li>
<li><a href="machine_learning/reinforcement_learning.html#q-learning">Q-Learning</a></li>
<li><a href="machine_learning/reinforcement_learning.html#sarsa">SARSA</a></li>
<li><a href="machine_learning/reinforcement_learning.html#policy-gradient-methods">Policy Gradient Methods</a></li>
<li><a href="machine_learning/reinforcement_learning.html#actor-critic-methods">Actor-Critic Methods</a></li>
<li><a href="machine_learning/reinforcement_learning.html#multi-armed-bandits">Multi-Armed Bandits</a></li>
</ol>
<h2 id="core-concepts"><a class="header" href="#core-concepts">Core Concepts</a></h2>
<h3 id="the-rl-framework"><a class="header" href="#the-rl-framework">The RL Framework</a></h3>
<p><strong>Key Components:</strong></p>
<ul>
<li><strong>Agent</strong>: The learner/decision maker</li>
<li><strong>Environment</strong>: What the agent interacts with</li>
<li><strong>State (s)</strong>: Current situation</li>
<li><strong>Action (a)</strong>: What the agent can do</li>
<li><strong>Reward (r)</strong>: Feedback signal</li>
<li><strong>Policy (π)</strong>: Strategy for selecting actions</li>
<li><strong>Value Function (V)</strong>: Expected future reward from a state</li>
<li><strong>Q-Function (Q)</strong>: Expected future reward for state-action pairs</li>
</ul>
<p><strong>Mathematical Framework:</strong></p>
<pre><code>At each time step t:
- Agent observes state s_t
- Agent takes action a_t
- Environment transitions to s_{t+1}
- Agent receives reward r_{t+1}
</code></pre>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

# Simple RL environment example
class GridWorld:
    def __init__(self, size=5):
        self.size = size
        self.state = (0, 0)
        self.goal = (size-1, size-1)
        
    def reset(self):
        self.state = (0, 0)
        return self.state
    
    def step(self, action):
        # Actions: 0=up, 1=right, 2=down, 3=left
        x, y = self.state
        
        if action == 0:  # up
            x = max(0, x - 1)
        elif action == 1:  # right
            y = min(self.size - 1, y + 1)
        elif action == 2:  # down
            x = min(self.size - 1, x + 1)
        elif action == 3:  # left
            y = max(0, y - 1)
        
        self.state = (x, y)
        
        # Reward
        if self.state == self.goal:
            reward = 1.0
            done = True
        else:
            reward = -0.01  # Small penalty for each step
            done = False
        
        return self.state, reward, done
    
    def render(self):
        grid = np.zeros((self.size, self.size))
        grid[self.state] = 1
        grid[self.goal] = 0.5
        plt.imshow(grid, cmap='hot')
        plt.title(f'State: {self.state}')
        plt.show()

# Example usage
env = GridWorld(size=5)
state = env.reset()
print(f"Initial state: {state}")

# Take random actions
for _ in range(5):
    action = np.random.randint(0, 4)
    state, reward, done = env.step(action)
    print(f"State: {state}, Reward: {reward}, Done: {done}")
    if done:
        break
</code></pre>
<h3 id="return-and-discounting"><a class="header" href="#return-and-discounting">Return and Discounting</a></h3>
<p><strong>Return (G_t)</strong>: Total cumulative reward from time t</p>
<pre><code>G_t = R_{t+1} + γR_{t+2} + γ²R_{t+3} + ... = Σ_{k=0}^∞ γ^k R_{t+k+1}
</code></pre>
<p>Where γ (gamma) is the discount factor (0 ≤ γ ≤ 1):</p>
<ul>
<li>γ = 0: Only immediate rewards matter</li>
<li>γ = 1: All future rewards equally important</li>
<li>γ closer to 1: More far-sighted agent</li>
</ul>
<pre><code class="language-python">def calculate_return(rewards, gamma=0.99):
    """Calculate discounted return from a list of rewards"""
    G = 0
    returns = []
    for r in reversed(rewards):
        G = r + gamma * G
        returns.insert(0, G)
    return returns

# Example
rewards = [1, 0, 0, 1, 0]
returns = calculate_return(rewards, gamma=0.9)
print(f"Rewards: {rewards}")
print(f"Returns: {returns}")
</code></pre>
<h2 id="markov-decision-processes"><a class="header" href="#markov-decision-processes">Markov Decision Processes</a></h2>
<p>An MDP is defined by a tuple (S, A, P, R, γ):</p>
<ul>
<li><strong>S</strong>: Set of states</li>
<li><strong>A</strong>: Set of actions</li>
<li><strong>P</strong>: Transition probability P(s'|s,a)</li>
<li><strong>R</strong>: Reward function R(s,a,s')</li>
<li><strong>γ</strong>: Discount factor</li>
</ul>
<p><strong>Markov Property</strong>: Future depends only on current state, not history</p>
<pre><code>P(s_{t+1}|s_t, a_t, s_{t-1}, a_{t-1}, ...) = P(s_{t+1}|s_t, a_t)
</code></pre>
<pre><code class="language-python">class MDP:
    def __init__(self, states, actions, transitions, rewards, gamma=0.99):
        self.states = states
        self.actions = actions
        self.transitions = transitions  # P(s'|s,a)
        self.rewards = rewards          # R(s,a,s')
        self.gamma = gamma
    
    def get_transition_prob(self, state, action, next_state):
        return self.transitions.get((state, action, next_state), 0.0)
    
    def get_reward(self, state, action, next_state):
        return self.rewards.get((state, action, next_state), 0.0)

# Example: Simple MDP
states = ['s0', 's1', 's2']
actions = ['a0', 'a1']

transitions = {
    ('s0', 'a0', 's1'): 0.8,
    ('s0', 'a0', 's0'): 0.2,
    ('s0', 'a1', 's2'): 0.9,
    ('s0', 'a1', 's0'): 0.1,
    ('s1', 'a0', 's2'): 1.0,
    ('s2', 'a0', 's2'): 1.0,
}

rewards = {
    ('s0', 'a0', 's1'): -1,
    ('s0', 'a1', 's2'): 10,
    ('s1', 'a0', 's2'): 5,
}

mdp = MDP(states, actions, transitions, rewards)
</code></pre>
<h3 id="value-functions"><a class="header" href="#value-functions">Value Functions</a></h3>
<p><strong>State-Value Function V^π(s):</strong></p>
<pre><code>V^π(s) = E_π[G_t | S_t = s]
       = E_π[Σ_{k=0}^∞ γ^k R_{t+k+1} | S_t = s]
</code></pre>
<p><strong>Action-Value Function Q^π(s,a):</strong></p>
<pre><code>Q^π(s,a) = E_π[G_t | S_t = s, A_t = a]
</code></pre>
<p><strong>Bellman Equations:</strong></p>
<pre><code>V^π(s) = Σ_a π(a|s) Σ_{s',r} p(s',r|s,a)[r + γV^π(s')]
Q^π(s,a) = Σ_{s',r} p(s',r|s,a)[r + γΣ_{a'} π(a'|s')Q^π(s',a')]
</code></pre>
<p><strong>Optimal Value Functions:</strong></p>
<pre><code>V*(s) = max_π V^π(s) = max_a Q*(s,a)
Q*(s,a) = E[R_{t+1} + γV*(S_{t+1}) | S_t=s, A_t=a]
</code></pre>
<h2 id="dynamic-programming-1"><a class="header" href="#dynamic-programming-1">Dynamic Programming</a></h2>
<p>DP methods assume full knowledge of the MDP.</p>
<h3 id="policy-evaluation"><a class="header" href="#policy-evaluation">Policy Evaluation</a></h3>
<p>Compute value function for a given policy.</p>
<pre><code class="language-python">def policy_evaluation(policy, mdp, theta=1e-6):
    """
    Evaluate a policy using iterative policy evaluation
    
    Args:
        policy: dict mapping states to action probabilities
        mdp: MDP object
        theta: convergence threshold
    """
    V = {s: 0 for s in mdp.states}
    
    while True:
        delta = 0
        for s in mdp.states:
            v = V[s]
            new_v = 0
            
            # Sum over actions
            for a in mdp.actions:
                action_prob = policy.get((s, a), 0)
                
                # Sum over next states
                for s_prime in mdp.states:
                    trans_prob = mdp.get_transition_prob(s, a, s_prime)
                    reward = mdp.get_reward(s, a, s_prime)
                    new_v += action_prob * trans_prob * (reward + mdp.gamma * V[s_prime])
            
            V[s] = new_v
            delta = max(delta, abs(v - V[s]))
        
        if delta &lt; theta:
            break
    
    return V

# Example: Uniform random policy
random_policy = {
    ('s0', 'a0'): 0.5,
    ('s0', 'a1'): 0.5,
    ('s1', 'a0'): 1.0,
    ('s2', 'a0'): 1.0,
}

V = policy_evaluation(random_policy, mdp)
print("State values:", V)
</code></pre>
<h3 id="policy-iteration"><a class="header" href="#policy-iteration">Policy Iteration</a></h3>
<pre><code class="language-python">def policy_iteration(mdp, theta=1e-6):
    """
    Find optimal policy using policy iteration
    """
    # Initialize random policy
    policy = {}
    for s in mdp.states:
        action = np.random.choice(mdp.actions)
        for a in mdp.actions:
            policy[(s, a)] = 1.0 if a == action else 0.0
    
    while True:
        # Policy Evaluation
        V = policy_evaluation(policy, mdp, theta)
        
        # Policy Improvement
        policy_stable = True
        
        for s in mdp.states:
            old_action = None
            for a in mdp.actions:
                if policy.get((s, a), 0) == 1.0:
                    old_action = a
                    break
            
            # Find best action
            action_values = {}
            for a in mdp.actions:
                q = 0
                for s_prime in mdp.states:
                    trans_prob = mdp.get_transition_prob(s, a, s_prime)
                    reward = mdp.get_reward(s, a, s_prime)
                    q += trans_prob * (reward + mdp.gamma * V[s_prime])
                action_values[a] = q
            
            best_action = max(action_values, key=action_values.get)
            
            # Update policy
            for a in mdp.actions:
                policy[(s, a)] = 1.0 if a == best_action else 0.0
            
            if best_action != old_action:
                policy_stable = False
        
        if policy_stable:
            break
    
    return policy, V

optimal_policy, optimal_V = policy_iteration(mdp)
print("Optimal policy:", optimal_policy)
print("Optimal values:", optimal_V)
</code></pre>
<h3 id="value-iteration"><a class="header" href="#value-iteration">Value Iteration</a></h3>
<pre><code class="language-python">def value_iteration(mdp, theta=1e-6):
    """
    Find optimal policy using value iteration
    """
    V = {s: 0 for s in mdp.states}
    
    while True:
        delta = 0
        for s in mdp.states:
            v = V[s]
            
            # Find max over actions
            action_values = []
            for a in mdp.actions:
                q = 0
                for s_prime in mdp.states:
                    trans_prob = mdp.get_transition_prob(s, a, s_prime)
                    reward = mdp.get_reward(s, a, s_prime)
                    q += trans_prob * (reward + mdp.gamma * V[s_prime])
                action_values.append(q)
            
            V[s] = max(action_values) if action_values else 0
            delta = max(delta, abs(v - V[s]))
        
        if delta &lt; theta:
            break
    
    # Extract policy
    policy = {}
    for s in mdp.states:
        action_values = {}
        for a in mdp.actions:
            q = 0
            for s_prime in mdp.states:
                trans_prob = mdp.get_transition_prob(s, a, s_prime)
                reward = mdp.get_reward(s, a, s_prime)
                q += trans_prob * (reward + mdp.gamma * V[s_prime])
            action_values[a] = q
        
        best_action = max(action_values, key=action_values.get)
        for a in mdp.actions:
            policy[(s, a)] = 1.0 if a == best_action else 0.0
    
    return policy, V

optimal_policy, optimal_V = value_iteration(mdp)
</code></pre>
<h2 id="monte-carlo-methods"><a class="header" href="#monte-carlo-methods">Monte Carlo Methods</a></h2>
<p>MC methods learn from complete episodes without needing environment model.</p>
<h3 id="first-visit-mc-prediction"><a class="header" href="#first-visit-mc-prediction">First-Visit MC Prediction</a></h3>
<pre><code class="language-python">def first_visit_mc_prediction(env, policy, num_episodes=1000, gamma=0.99):
    """
    Estimate state-value function using first-visit MC
    """
    returns = {s: [] for s in env.states}
    V = {s: 0 for s in env.states}
    
    for episode in range(num_episodes):
        # Generate episode
        episode_data = []
        state = env.reset()
        done = False
        
        while not done:
            action = policy[state]
            next_state, reward, done = env.step(action)
            episode_data.append((state, action, reward))
            state = next_state
        
        # Calculate returns
        G = 0
        visited_states = set()
        
        for t in reversed(range(len(episode_data))):
            state, action, reward = episode_data[t]
            G = reward + gamma * G
            
            # First-visit: only update if state not seen earlier
            if state not in visited_states:
                returns[state].append(G)
                V[state] = np.mean(returns[state])
                visited_states.add(state)
    
    return V

# Example usage with GridWorld
env = GridWorld(size=4)
# Define a simple policy
policy = {state: np.random.randint(0, 4) for state in 
          [(i, j) for i in range(4) for j in range(4)]}

V = first_visit_mc_prediction(env, policy, num_episodes=10000)
</code></pre>
<h3 id="monte-carlo-control-epsilon-greedy"><a class="header" href="#monte-carlo-control-epsilon-greedy">Monte Carlo Control (Epsilon-Greedy)</a></h3>
<pre><code class="language-python">def mc_control_epsilon_greedy(env, num_episodes=10000, gamma=0.99, epsilon=0.1):
    """
    Monte Carlo control with epsilon-greedy policy
    """
    Q = {}
    returns = {}
    
    # Initialize Q-values
    for state in env.get_all_states():
        for action in range(env.num_actions):
            Q[(state, action)] = 0
            returns[(state, action)] = []
    
    for episode in range(num_episodes):
        # Generate episode with epsilon-greedy policy
        episode_data = []
        state = env.reset()
        done = False
        
        while not done:
            # Epsilon-greedy action selection
            if np.random.random() &lt; epsilon:
                action = np.random.randint(0, env.num_actions)
            else:
                q_values = [Q.get((state, a), 0) for a in range(env.num_actions)]
                action = np.argmax(q_values)
            
            next_state, reward, done = env.step(action)
            episode_data.append((state, action, reward))
            state = next_state
        
        # Update Q-values
        G = 0
        visited = set()
        
        for t in reversed(range(len(episode_data))):
            state, action, reward = episode_data[t]
            G = reward + gamma * G
            
            if (state, action) not in visited:
                returns[(state, action)].append(G)
                Q[(state, action)] = np.mean(returns[(state, action)])
                visited.add((state, action))
    
    # Extract policy
    policy = {}
    for state in env.get_all_states():
        q_values = [Q.get((state, a), 0) for a in range(env.num_actions)]
        policy[state] = np.argmax(q_values)
    
    return policy, Q
</code></pre>
<h2 id="temporal-difference-learning"><a class="header" href="#temporal-difference-learning">Temporal Difference Learning</a></h2>
<p>TD methods learn from incomplete episodes by bootstrapping.</p>
<h3 id="td0-prediction"><a class="header" href="#td0-prediction">TD(0) Prediction</a></h3>
<p><strong>TD Update Rule:</strong></p>
<pre><code>V(S_t) ← V(S_t) + α[R_{t+1} + γV(S_{t+1}) - V(S_t)]
</code></pre>
<p>Where:</p>
<ul>
<li>α is the learning rate</li>
<li>R_{t+1} + γV(S_{t+1}) is the TD target</li>
<li>δ_t = R_{t+1} + γV(S_{t+1}) - V(S_t) is the TD error</li>
</ul>
<pre><code class="language-python">def td_0_prediction(env, policy, num_episodes=1000, alpha=0.1, gamma=0.99):
    """
    TD(0) prediction for estimating state values
    """
    V = {s: 0 for s in env.get_all_states()}
    
    for episode in range(num_episodes):
        state = env.reset()
        done = False
        
        while not done:
            action = policy[state]
            next_state, reward, done = env.step(action)
            
            # TD update
            if not done:
                td_target = reward + gamma * V[next_state]
            else:
                td_target = reward
            
            td_error = td_target - V[state]
            V[state] += alpha * td_error
            
            state = next_state
    
    return V
</code></pre>
<h3 id="tdλ---eligibility-traces"><a class="header" href="#tdλ---eligibility-traces">TD(λ) - Eligibility Traces</a></h3>
<pre><code class="language-python">def td_lambda_prediction(env, policy, num_episodes=1000, 
                        alpha=0.1, gamma=0.99, lambda_=0.9):
    """
    TD(λ) prediction with eligibility traces
    """
    V = {s: 0 for s in env.get_all_states()}
    
    for episode in range(num_episodes):
        E = {s: 0 for s in env.get_all_states()}  # Eligibility traces
        state = env.reset()
        done = False
        
        while not done:
            action = policy[state]
            next_state, reward, done = env.step(action)
            
            # Calculate TD error
            if not done:
                td_error = reward + gamma * V[next_state] - V[state]
            else:
                td_error = reward - V[state]
            
            # Update eligibility trace for current state
            E[state] += 1
            
            # Update all states
            for s in env.get_all_states():
                V[s] += alpha * td_error * E[s]
                E[s] *= gamma * lambda_
            
            state = next_state
    
    return V
</code></pre>
<h2 id="q-learning"><a class="header" href="#q-learning">Q-Learning</a></h2>
<p>Q-Learning is an off-policy TD control algorithm.</p>
<p><strong>Q-Learning Update:</strong></p>
<pre><code>Q(S_t, A_t) ← Q(S_t, A_t) + α[R_{t+1} + γ max_a Q(S_{t+1}, a) - Q(S_t, A_t)]
</code></pre>
<pre><code class="language-python">class QLearningAgent:
    def __init__(self, state_space, action_space, alpha=0.1, gamma=0.99, epsilon=0.1):
        self.state_space = state_space
        self.action_space = action_space
        self.alpha = alpha
        self.gamma = gamma
        self.epsilon = epsilon
        
        # Initialize Q-table
        self.q_table = {}
        for state in state_space:
            for action in action_space:
                self.q_table[(state, action)] = 0.0
    
    def get_action(self, state, training=True):
        """Epsilon-greedy action selection"""
        if training and np.random.random() &lt; self.epsilon:
            return np.random.choice(self.action_space)
        else:
            q_values = [self.q_table.get((state, a), 0) for a in self.action_space]
            return self.action_space[np.argmax(q_values)]
    
    def update(self, state, action, reward, next_state, done):
        """Q-learning update"""
        # Current Q-value
        current_q = self.q_table[(state, action)]
        
        # Maximum Q-value for next state
        if not done:
            max_next_q = max([self.q_table.get((next_state, a), 0) 
                            for a in self.action_space])
        else:
            max_next_q = 0
        
        # Q-learning update
        td_target = reward + self.gamma * max_next_q
        td_error = td_target - current_q
        self.q_table[(state, action)] += self.alpha * td_error
        
        return td_error
    
    def train(self, env, num_episodes=1000):
        """Train the agent"""
        episode_rewards = []
        
        for episode in range(num_episodes):
            state = env.reset()
            total_reward = 0
            done = False
            
            while not done:
                action = self.get_action(state, training=True)
                next_state, reward, done = env.step(action)
                
                self.update(state, action, reward, next_state, done)
                
                state = next_state
                total_reward += reward
            
            episode_rewards.append(total_reward)
            
            # Decay epsilon
            self.epsilon = max(0.01, self.epsilon * 0.995)
            
            if (episode + 1) % 100 == 0:
                avg_reward = np.mean(episode_rewards[-100:])
                print(f"Episode {episode + 1}, Avg Reward: {avg_reward:.2f}, Epsilon: {self.epsilon:.3f}")
        
        return episode_rewards

# Example usage
env = GridWorld(size=5)
state_space = [(i, j) for i in range(5) for j in range(5)]
action_space = [0, 1, 2, 3]  # up, right, down, left

agent = QLearningAgent(state_space, action_space)
rewards = agent.train(env, num_episodes=5000)

# Plot learning curve
plt.figure(figsize=(10, 6))
plt.plot(np.convolve(rewards, np.ones(100)/100, mode='valid'))
plt.xlabel('Episode')
plt.ylabel('Average Reward (100 episodes)')
plt.title('Q-Learning Training Progress')
plt.grid(True)
plt.show()
</code></pre>
<h3 id="double-q-learning"><a class="header" href="#double-q-learning">Double Q-Learning</a></h3>
<p>Reduces maximization bias in Q-learning.</p>
<pre><code class="language-python">class DoubleQLearningAgent:
    def __init__(self, state_space, action_space, alpha=0.1, gamma=0.99, epsilon=0.1):
        self.state_space = state_space
        self.action_space = action_space
        self.alpha = alpha
        self.gamma = gamma
        self.epsilon = epsilon
        
        # Two Q-tables
        self.q_table_1 = {(s, a): 0.0 for s in state_space for a in action_space}
        self.q_table_2 = {(s, a): 0.0 for s in state_space for a in action_space}
    
    def get_action(self, state, training=True):
        """Epsilon-greedy using average of both Q-tables"""
        if training and np.random.random() &lt; self.epsilon:
            return np.random.choice(self.action_space)
        else:
            q_values = [(self.q_table_1[(state, a)] + self.q_table_2[(state, a)]) / 2 
                       for a in self.action_space]
            return self.action_space[np.argmax(q_values)]
    
    def update(self, state, action, reward, next_state, done):
        """Double Q-learning update"""
        # Randomly choose which Q-table to update
        if np.random.random() &lt; 0.5:
            q_table_update = self.q_table_1
            q_table_target = self.q_table_2
        else:
            q_table_update = self.q_table_2
            q_table_target = self.q_table_1
        
        current_q = q_table_update[(state, action)]
        
        if not done:
            # Use one Q-table to select action, other to evaluate
            best_action = max(self.action_space, 
                            key=lambda a: q_table_update[(next_state, a)])
            max_next_q = q_table_target[(next_state, best_action)]
        else:
            max_next_q = 0
        
        td_target = reward + self.gamma * max_next_q
        td_error = td_target - current_q
        q_table_update[(state, action)] += self.alpha * td_error
        
        return td_error
</code></pre>
<h2 id="sarsa"><a class="header" href="#sarsa">SARSA</a></h2>
<p>SARSA is an on-policy TD control algorithm.</p>
<p><strong>SARSA Update:</strong></p>
<pre><code>Q(S_t, A_t) ← Q(S_t, A_t) + α[R_{t+1} + γQ(S_{t+1}, A_{t+1}) - Q(S_t, A_t)]
</code></pre>
<pre><code class="language-python">class SARSAAgent:
    def __init__(self, state_space, action_space, alpha=0.1, gamma=0.99, epsilon=0.1):
        self.state_space = state_space
        self.action_space = action_space
        self.alpha = alpha
        self.gamma = gamma
        self.epsilon = epsilon
        
        # Initialize Q-table
        self.q_table = {(s, a): 0.0 for s in state_space for a in action_space}
    
    def get_action(self, state, training=True):
        """Epsilon-greedy action selection"""
        if training and np.random.random() &lt; self.epsilon:
            return np.random.choice(self.action_space)
        else:
            q_values = [self.q_table[(state, a)] for a in self.action_space]
            return self.action_space[np.argmax(q_values)]
    
    def update(self, state, action, reward, next_state, next_action, done):
        """SARSA update"""
        current_q = self.q_table[(state, action)]
        
        if not done:
            next_q = self.q_table[(next_state, next_action)]
        else:
            next_q = 0
        
        td_target = reward + self.gamma * next_q
        td_error = td_target - current_q
        self.q_table[(state, action)] += self.alpha * td_error
        
        return td_error
    
    def train(self, env, num_episodes=1000):
        """Train the agent"""
        episode_rewards = []
        
        for episode in range(num_episodes):
            state = env.reset()
            action = self.get_action(state, training=True)
            total_reward = 0
            done = False
            
            while not done:
                next_state, reward, done = env.step(action)
                next_action = self.get_action(next_state, training=True)
                
                self.update(state, action, reward, next_state, next_action, done)
                
                state = next_state
                action = next_action
                total_reward += reward
            
            episode_rewards.append(total_reward)
            self.epsilon = max(0.01, self.epsilon * 0.995)
        
        return episode_rewards
</code></pre>
<h2 id="policy-gradient-methods"><a class="header" href="#policy-gradient-methods">Policy Gradient Methods</a></h2>
<p>Policy gradient methods directly optimize the policy.</p>
<h3 id="reinforce-algorithm"><a class="header" href="#reinforce-algorithm">REINFORCE Algorithm</a></h3>
<p><strong>Policy Gradient Theorem:</strong></p>
<pre><code>∇_θ J(θ) = E_π[∇_θ log π(a|s,θ) Q^π(s,a)]
</code></pre>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
import torch.nn.functional as F

class PolicyNetwork(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dim=64):
        super(PolicyNetwork, self).__init__()
        self.fc1 = nn.Linear(state_dim, hidden_dim)
        self.fc2 = nn.Linear(hidden_dim, hidden_dim)
        self.fc3 = nn.Linear(hidden_dim, action_dim)
    
    def forward(self, x):
        x = F.relu(self.fc1(x))
        x = F.relu(self.fc2(x))
        x = F.softmax(self.fc3(x), dim=-1)
        return x

class REINFORCEAgent:
    def __init__(self, state_dim, action_dim, lr=0.001, gamma=0.99):
        self.gamma = gamma
        self.policy_net = PolicyNetwork(state_dim, action_dim)
        self.optimizer = optim.Adam(self.policy_net.parameters(), lr=lr)
        
        self.saved_log_probs = []
        self.rewards = []
    
    def select_action(self, state):
        """Select action using current policy"""
        state = torch.FloatTensor(state).unsqueeze(0)
        probs = self.policy_net(state)
        action_dist = torch.distributions.Categorical(probs)
        action = action_dist.sample()
        
        # Save log probability for training
        self.saved_log_probs.append(action_dist.log_prob(action))
        
        return action.item()
    
    def update(self):
        """Update policy using REINFORCE"""
        R = 0
        returns = []
        
        # Calculate returns
        for r in reversed(self.rewards):
            R = r + self.gamma * R
            returns.insert(0, R)
        
        # Normalize returns
        returns = torch.tensor(returns)
        returns = (returns - returns.mean()) / (returns.std() + 1e-8)
        
        # Calculate loss
        policy_loss = []
        for log_prob, R in zip(self.saved_log_probs, returns):
            policy_loss.append(-log_prob * R)
        
        # Update policy
        self.optimizer.zero_grad()
        policy_loss = torch.stack(policy_loss).sum()
        policy_loss.backward()
        self.optimizer.step()
        
        # Clear saved values
        self.saved_log_probs = []
        self.rewards = []
        
        return policy_loss.item()
    
    def train(self, env, num_episodes=1000):
        """Train the agent"""
        episode_rewards = []
        
        for episode in range(num_episodes):
            state = env.reset()
            total_reward = 0
            done = False
            
            while not done:
                action = self.select_action(state)
                next_state, reward, done = env.step(action)
                
                self.rewards.append(reward)
                state = next_state
                total_reward += reward
            
            # Update policy after episode
            loss = self.update()
            episode_rewards.append(total_reward)
            
            if (episode + 1) % 100 == 0:
                avg_reward = np.mean(episode_rewards[-100:])
                print(f"Episode {episode + 1}, Avg Reward: {avg_reward:.2f}")
        
        return episode_rewards
</code></pre>
<h2 id="actor-critic-methods"><a class="header" href="#actor-critic-methods">Actor-Critic Methods</a></h2>
<p>Combine value-based and policy-based methods.</p>
<h3 id="advantage-actor-critic-a2c"><a class="header" href="#advantage-actor-critic-a2c">Advantage Actor-Critic (A2C)</a></h3>
<pre><code class="language-python">class ActorCritic(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dim=64):
        super(ActorCritic, self).__init__()
        
        self.shared = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU()
        )
        
        # Actor (policy)
        self.actor = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, action_dim),
            nn.Softmax(dim=-1)
        )
        
        # Critic (value function)
        self.critic = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, 1)
        )
    
    def forward(self, x):
        shared_features = self.shared(x)
        action_probs = self.actor(shared_features)
        state_value = self.critic(shared_features)
        return action_probs, state_value

class A2CAgent:
    def __init__(self, state_dim, action_dim, lr=0.001, gamma=0.99):
        self.gamma = gamma
        self.model = ActorCritic(state_dim, action_dim)
        self.optimizer = optim.Adam(self.model.parameters(), lr=lr)
    
    def select_action(self, state):
        """Select action and get state value"""
        state = torch.FloatTensor(state).unsqueeze(0)
        action_probs, state_value = self.model(state)
        action_dist = torch.distributions.Categorical(action_probs)
        action = action_dist.sample()
        
        return action.item(), action_dist.log_prob(action), state_value
    
    def train_step(self, log_prob, value, reward, next_value, done):
        """Single training step"""
        # Calculate advantage
        if done:
            td_target = reward
        else:
            td_target = reward + self.gamma * next_value
        
        advantage = td_target - value
        
        # Actor loss (policy gradient)
        actor_loss = -log_prob * advantage.detach()
        
        # Critic loss (value function)
        critic_loss = F.mse_loss(value, torch.tensor([td_target]))
        
        # Total loss
        loss = actor_loss + critic_loss
        
        # Update
        self.optimizer.zero_grad()
        loss.backward()
        self.optimizer.step()
        
        return loss.item()
</code></pre>
<h2 id="multi-armed-bandits"><a class="header" href="#multi-armed-bandits">Multi-Armed Bandits</a></h2>
<p>Simplified RL problem with one state.</p>
<h3 id="epsilon-greedy-bandit"><a class="header" href="#epsilon-greedy-bandit">Epsilon-Greedy Bandit</a></h3>
<pre><code class="language-python">class EpsilonGreedyBandit:
    def __init__(self, n_arms, epsilon=0.1):
        self.n_arms = n_arms
        self.epsilon = epsilon
        self.q_values = np.zeros(n_arms)  # Estimated action values
        self.action_counts = np.zeros(n_arms)  # Number of times each action selected
    
    def select_action(self):
        """Epsilon-greedy action selection"""
        if np.random.random() &lt; self.epsilon:
            return np.random.randint(self.n_arms)
        else:
            return np.argmax(self.q_values)
    
    def update(self, action, reward):
        """Update Q-value estimate"""
        self.action_counts[action] += 1
        alpha = 1 / self.action_counts[action]
        self.q_values[action] += alpha * (reward - self.q_values[action])

# Test bandit
true_rewards = [0.1, 0.5, 0.3, 0.7, 0.2]
bandit = EpsilonGreedyBandit(n_arms=5, epsilon=0.1)

total_reward = 0
for t in range(1000):
    action = bandit.select_action()
    reward = true_rewards[action] + np.random.normal(0, 0.1)
    bandit.update(action, reward)
    total_reward += reward

print(f"True rewards: {true_rewards}")
print(f"Estimated rewards: {bandit.q_values}")
print(f"Total reward: {total_reward:.2f}")
</code></pre>
<h3 id="upper-confidence-bound-ucb"><a class="header" href="#upper-confidence-bound-ucb">Upper Confidence Bound (UCB)</a></h3>
<pre><code class="language-python">class UCBBandit:
    def __init__(self, n_arms, c=2):
        self.n_arms = n_arms
        self.c = c
        self.q_values = np.zeros(n_arms)
        self.action_counts = np.zeros(n_arms)
        self.t = 0
    
    def select_action(self):
        """UCB action selection"""
        self.t += 1
        
        # Select each arm at least once
        if 0 in self.action_counts:
            return np.argmin(self.action_counts)
        
        # UCB formula
        ucb_values = self.q_values + self.c * np.sqrt(np.log(self.t) / self.action_counts)
        return np.argmax(ucb_values)
    
    def update(self, action, reward):
        """Update Q-value estimate"""
        self.action_counts[action] += 1
        alpha = 1 / self.action_counts[action]
        self.q_values[action] += alpha * (reward - self.q_values[action])
</code></pre>
<h2 id="practical-tips-3"><a class="header" href="#practical-tips-3">Practical Tips</a></h2>
<ol>
<li><strong>Start Simple</strong>: Begin with simple environments and algorithms</li>
<li><strong>Hyperparameter Tuning</strong>: Learning rate, discount factor, and exploration rate are crucial</li>
<li><strong>Experience Replay</strong>: Store and replay past experiences (covered in deep RL)</li>
<li><strong>Reward Shaping</strong>: Design rewards carefully to guide learning</li>
<li><strong>Exploration vs Exploitation</strong>: Balance is key for good performance</li>
<li><strong>Curriculum Learning</strong>: Start with easy tasks and gradually increase difficulty</li>
</ol>
<h2 id="resources-7"><a class="header" href="#resources-7">Resources</a></h2>
<ul>
<li>"Reinforcement Learning: An Introduction" by Sutton and Barto</li>
<li>OpenAI Gym: https://gym.openai.com/</li>
<li>Stable Baselines3: https://stable-baselines3.readthedocs.io/</li>
<li>David Silver's RL Course: https://www.davidsilver.uk/teaching/</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deep-reinforcement-learning"><a class="header" href="#deep-reinforcement-learning">Deep Reinforcement Learning</a></h1>
<p>Deep RL combines deep learning with reinforcement learning to handle high-dimensional state and action spaces.</p>
<h2 id="table-of-contents-10"><a class="header" href="#table-of-contents-10">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/deep_reinforcement_learning.html#deep-q-networks-dqn">Deep Q-Networks (DQN)</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#policy-gradient-methods">Policy Gradient Methods</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#actor-critic-methods">Actor-Critic Methods</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#a3c">A3C (Asynchronous Advantage Actor-Critic)</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#ppo">PPO (Proximal Policy Optimization)</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#ddpg">DDPG (Deep Deterministic Policy Gradient)</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#sac">SAC (Soft Actor-Critic)</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#td3">TD3 (Twin Delayed DDPG)</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#model-based-rl">Model-Based RL</a></li>
<li><a href="machine_learning/deep_reinforcement_learning.html#multi-agent-rl">Multi-Agent RL</a></li>
</ol>
<h2 id="deep-q-networks-dqn"><a class="header" href="#deep-q-networks-dqn">Deep Q-Networks (DQN)</a></h2>
<p>DQN uses deep neural networks to approximate Q-values for high-dimensional states.</p>
<h3 id="basic-dqn"><a class="header" href="#basic-dqn">Basic DQN</a></h3>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
import torch.nn.functional as F
import numpy as np
from collections import deque, namedtuple
import random

# Q-Network
class QNetwork(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dims=[128, 128]):
        super(QNetwork, self).__init__()
        
        layers = []
        prev_dim = state_dim
        
        for hidden_dim in hidden_dims:
            layers.append(nn.Linear(prev_dim, hidden_dim))
            layers.append(nn.ReLU())
            prev_dim = hidden_dim
        
        layers.append(nn.Linear(prev_dim, action_dim))
        self.network = nn.Sequential(*layers)
    
    def forward(self, state):
        return self.network(state)

# Experience Replay Buffer
class ReplayBuffer:
    def __init__(self, capacity=100000):
        self.buffer = deque(maxlen=capacity)
        self.experience = namedtuple('Experience', 
                                    ['state', 'action', 'reward', 'next_state', 'done'])
    
    def push(self, state, action, reward, next_state, done):
        self.buffer.append(self.experience(state, action, reward, next_state, done))
    
    def sample(self, batch_size):
        experiences = random.sample(self.buffer, batch_size)
        
        states = torch.FloatTensor([e.state for e in experiences])
        actions = torch.LongTensor([e.action for e in experiences])
        rewards = torch.FloatTensor([e.reward for e in experiences])
        next_states = torch.FloatTensor([e.next_state for e in experiences])
        dones = torch.FloatTensor([e.done for e in experiences])
        
        return states, actions, rewards, next_states, dones
    
    def __len__(self):
        return len(self.buffer)

# DQN Agent
class DQNAgent:
    def __init__(self, state_dim, action_dim, lr=0.001, gamma=0.99, 
                 epsilon=1.0, epsilon_decay=0.995, epsilon_min=0.01,
                 buffer_size=100000, batch_size=64, target_update_freq=10):
        self.state_dim = state_dim
        self.action_dim = action_dim
        self.gamma = gamma
        self.epsilon = epsilon
        self.epsilon_decay = epsilon_decay
        self.epsilon_min = epsilon_min
        self.batch_size = batch_size
        self.target_update_freq = target_update_freq
        
        # Q-Networks
        self.q_network = QNetwork(state_dim, action_dim)
        self.target_network = QNetwork(state_dim, action_dim)
        self.target_network.load_state_dict(self.q_network.state_dict())
        
        self.optimizer = optim.Adam(self.q_network.parameters(), lr=lr)
        self.replay_buffer = ReplayBuffer(buffer_size)
        
        self.steps = 0
    
    def select_action(self, state, training=True):
        """Epsilon-greedy action selection"""
        if training and random.random() &lt; self.epsilon:
            return random.randint(0, self.action_dim - 1)
        
        with torch.no_grad():
            state = torch.FloatTensor(state).unsqueeze(0)
            q_values = self.q_network(state)
            return q_values.argmax(1).item()
    
    def train_step(self):
        """Single training step"""
        if len(self.replay_buffer) &lt; self.batch_size:
            return None
        
        # Sample batch
        states, actions, rewards, next_states, dones = self.replay_buffer.sample(self.batch_size)
        
        # Current Q values
        current_q_values = self.q_network(states).gather(1, actions.unsqueeze(1)).squeeze()
        
        # Target Q values
        with torch.no_grad():
            next_q_values = self.target_network(next_states).max(1)[0]
            target_q_values = rewards + (1 - dones) * self.gamma * next_q_values
        
        # Compute loss
        loss = F.mse_loss(current_q_values, target_q_values)
        
        # Optimize
        self.optimizer.zero_grad()
        loss.backward()
        torch.nn.utils.clip_grad_norm_(self.q_network.parameters(), 1.0)
        self.optimizer.step()
        
        # Update target network
        self.steps += 1
        if self.steps % self.target_update_freq == 0:
            self.target_network.load_state_dict(self.q_network.state_dict())
        
        # Decay epsilon
        self.epsilon = max(self.epsilon_min, self.epsilon * self.epsilon_decay)
        
        return loss.item()
    
    def train(self, env, num_episodes=1000, max_steps=1000):
        """Train the agent"""
        episode_rewards = []
        
        for episode in range(num_episodes):
            state = env.reset()
            total_reward = 0
            
            for step in range(max_steps):
                # Select and perform action
                action = self.select_action(state, training=True)
                next_state, reward, done, _ = env.step(action)
                
                # Store transition
                self.replay_buffer.push(state, action, reward, next_state, done)
                
                # Train
                loss = self.train_step()
                
                state = next_state
                total_reward += reward
                
                if done:
                    break
            
            episode_rewards.append(total_reward)
            
            if (episode + 1) % 10 == 0:
                avg_reward = np.mean(episode_rewards[-10:])
                print(f"Episode {episode+1}, Avg Reward: {avg_reward:.2f}, "
                      f"Epsilon: {self.epsilon:.3f}")
        
        return episode_rewards
</code></pre>
<h3 id="double-dqn"><a class="header" href="#double-dqn">Double DQN</a></h3>
<p>Reduces overestimation bias in Q-learning.</p>
<pre><code class="language-python">class DoubleDQNAgent(DQNAgent):
    def train_step(self):
        """Double DQN training step"""
        if len(self.replay_buffer) &lt; self.batch_size:
            return None
        
        states, actions, rewards, next_states, dones = self.replay_buffer.sample(self.batch_size)
        
        # Current Q values
        current_q_values = self.q_network(states).gather(1, actions.unsqueeze(1)).squeeze()
        
        # Double DQN: use online network to select actions, target network to evaluate
        with torch.no_grad():
            # Select actions using online network
            next_actions = self.q_network(next_states).argmax(1)
            # Evaluate using target network
            next_q_values = self.target_network(next_states).gather(1, next_actions.unsqueeze(1)).squeeze()
            target_q_values = rewards + (1 - dones) * self.gamma * next_q_values
        
        # Compute loss
        loss = F.mse_loss(current_q_values, target_q_values)
        
        # Optimize
        self.optimizer.zero_grad()
        loss.backward()
        torch.nn.utils.clip_grad_norm_(self.q_network.parameters(), 1.0)
        self.optimizer.step()
        
        # Update target network
        self.steps += 1
        if self.steps % self.target_update_freq == 0:
            self.target_network.load_state_dict(self.q_network.state_dict())
        
        self.epsilon = max(self.epsilon_min, self.epsilon * self.epsilon_decay)
        
        return loss.item()
</code></pre>
<h3 id="dueling-dqn"><a class="header" href="#dueling-dqn">Dueling DQN</a></h3>
<p>Separates value and advantage functions.</p>
<pre><code class="language-python">class DuelingQNetwork(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dim=128):
        super(DuelingQNetwork, self).__init__()
        
        # Feature extraction
        self.feature = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU()
        )
        
        # Value stream
        self.value_stream = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, 1)
        )
        
        # Advantage stream
        self.advantage_stream = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, action_dim)
        )
    
    def forward(self, state):
        features = self.feature(state)
        value = self.value_stream(features)
        advantages = self.advantage_stream(features)
        
        # Q(s,a) = V(s) + (A(s,a) - mean(A(s,a)))
        q_values = value + (advantages - advantages.mean(dim=1, keepdim=True))
        return q_values
</code></pre>
<h3 id="prioritized-experience-replay"><a class="header" href="#prioritized-experience-replay">Prioritized Experience Replay</a></h3>
<pre><code class="language-python">class PrioritizedReplayBuffer:
    def __init__(self, capacity=100000, alpha=0.6):
        self.capacity = capacity
        self.alpha = alpha
        self.buffer = []
        self.priorities = np.zeros(capacity, dtype=np.float32)
        self.position = 0
    
    def push(self, state, action, reward, next_state, done):
        max_priority = self.priorities.max() if self.buffer else 1.0
        
        if len(self.buffer) &lt; self.capacity:
            self.buffer.append((state, action, reward, next_state, done))
        else:
            self.buffer[self.position] = (state, action, reward, next_state, done)
        
        self.priorities[self.position] = max_priority
        self.position = (self.position + 1) % self.capacity
    
    def sample(self, batch_size, beta=0.4):
        if len(self.buffer) == self.capacity:
            priorities = self.priorities
        else:
            priorities = self.priorities[:self.position]
        
        # Calculate sampling probabilities
        probabilities = priorities ** self.alpha
        probabilities /= probabilities.sum()
        
        # Sample indices
        indices = np.random.choice(len(self.buffer), batch_size, p=probabilities)
        
        # Importance sampling weights
        total = len(self.buffer)
        weights = (total * probabilities[indices]) ** (-beta)
        weights /= weights.max()
        
        # Get experiences
        experiences = [self.buffer[idx] for idx in indices]
        states = torch.FloatTensor([e[0] for e in experiences])
        actions = torch.LongTensor([e[1] for e in experiences])
        rewards = torch.FloatTensor([e[2] for e in experiences])
        next_states = torch.FloatTensor([e[3] for e in experiences])
        dones = torch.FloatTensor([e[4] for e in experiences])
        weights = torch.FloatTensor(weights)
        
        return states, actions, rewards, next_states, dones, indices, weights
    
    def update_priorities(self, indices, priorities):
        for idx, priority in zip(indices, priorities):
            self.priorities[idx] = priority
    
    def __len__(self):
        return len(self.buffer)
</code></pre>
<h2 id="policy-gradient-methods-1"><a class="header" href="#policy-gradient-methods-1">Policy Gradient Methods</a></h2>
<h3 id="reinforce-with-baseline"><a class="header" href="#reinforce-with-baseline">REINFORCE with Baseline</a></h3>
<pre><code class="language-python">class PolicyNetwork(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dim=128):
        super(PolicyNetwork, self).__init__()
        
        self.network = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, action_dim),
            nn.Softmax(dim=-1)
        )
    
    def forward(self, state):
        return self.network(state)

class ValueNetwork(nn.Module):
    def __init__(self, state_dim, hidden_dim=128):
        super(ValueNetwork, self).__init__()
        
        self.network = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, 1)
        )
    
    def forward(self, state):
        return self.network(state)

class REINFORCEWithBaseline:
    def __init__(self, state_dim, action_dim, lr=0.001, gamma=0.99):
        self.gamma = gamma
        
        self.policy_net = PolicyNetwork(state_dim, action_dim)
        self.value_net = ValueNetwork(state_dim)
        
        self.policy_optimizer = optim.Adam(self.policy_net.parameters(), lr=lr)
        self.value_optimizer = optim.Adam(self.value_net.parameters(), lr=lr)
        
        self.saved_log_probs = []
        self.saved_values = []
        self.rewards = []
    
    def select_action(self, state):
        state = torch.FloatTensor(state).unsqueeze(0)
        
        # Get action probabilities and value
        probs = self.policy_net(state)
        value = self.value_net(state)
        
        # Sample action
        action_dist = torch.distributions.Categorical(probs)
        action = action_dist.sample()
        
        # Save log prob and value
        self.saved_log_probs.append(action_dist.log_prob(action))
        self.saved_values.append(value)
        
        return action.item()
    
    def train_step(self):
        R = 0
        returns = []
        
        # Calculate returns
        for r in reversed(self.rewards):
            R = r + self.gamma * R
            returns.insert(0, R)
        
        returns = torch.tensor(returns)
        returns = (returns - returns.mean()) / (returns.std() + 1e-8)
        
        policy_losses = []
        value_losses = []
        
        # Calculate losses
        for log_prob, value, R in zip(self.saved_log_probs, self.saved_values, returns):
            advantage = R - value.item()
            
            # Policy loss (REINFORCE with baseline)
            policy_losses.append(-log_prob * advantage)
            
            # Value loss
            value_losses.append(F.mse_loss(value, torch.tensor([[R]])))
        
        # Update policy network
        self.policy_optimizer.zero_grad()
        policy_loss = torch.stack(policy_losses).sum()
        policy_loss.backward()
        self.policy_optimizer.step()
        
        # Update value network
        self.value_optimizer.zero_grad()
        value_loss = torch.stack(value_losses).sum()
        value_loss.backward()
        self.value_optimizer.step()
        
        # Clear saved values
        self.saved_log_probs = []
        self.saved_values = []
        self.rewards = []
        
        return policy_loss.item(), value_loss.item()
</code></pre>
<h2 id="actor-critic-methods-1"><a class="header" href="#actor-critic-methods-1">Actor-Critic Methods</a></h2>
<h3 id="advantage-actor-critic-a2c-1"><a class="header" href="#advantage-actor-critic-a2c-1">Advantage Actor-Critic (A2C)</a></h3>
<pre><code class="language-python">class ActorCritic(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dim=128):
        super(ActorCritic, self).__init__()
        
        # Shared layers
        self.shared = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU()
        )
        
        # Actor head
        self.actor = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, action_dim),
            nn.Softmax(dim=-1)
        )
        
        # Critic head
        self.critic = nn.Sequential(
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, 1)
        )
    
    def forward(self, state):
        shared_features = self.shared(state)
        action_probs = self.actor(shared_features)
        state_value = self.critic(shared_features)
        return action_probs, state_value

class A2CAgent:
    def __init__(self, state_dim, action_dim, lr=0.001, gamma=0.99, 
                 value_coef=0.5, entropy_coef=0.01):
        self.gamma = gamma
        self.value_coef = value_coef
        self.entropy_coef = entropy_coef
        
        self.model = ActorCritic(state_dim, action_dim)
        self.optimizer = optim.Adam(self.model.parameters(), lr=lr)
    
    def select_action(self, state):
        state = torch.FloatTensor(state).unsqueeze(0)
        action_probs, state_value = self.model(state)
        
        action_dist = torch.distributions.Categorical(action_probs)
        action = action_dist.sample()
        
        return action.item(), action_dist.log_prob(action), action_dist.entropy(), state_value
    
    def train_step(self, states, actions, rewards, next_states, dones):
        """Train on a batch of experiences"""
        states = torch.FloatTensor(states)
        actions = torch.LongTensor(actions)
        rewards = torch.FloatTensor(rewards)
        next_states = torch.FloatTensor(next_states)
        dones = torch.FloatTensor(dones)
        
        # Get action probabilities and values
        action_probs, values = self.model(states)
        _, next_values = self.model(next_states)
        
        # Calculate advantages
        td_targets = rewards + (1 - dones) * self.gamma * next_values.squeeze()
        advantages = td_targets - values.squeeze()
        
        # Actor loss
        action_dist = torch.distributions.Categorical(action_probs)
        log_probs = action_dist.log_prob(actions)
        actor_loss = -(log_probs * advantages.detach()).mean()
        
        # Critic loss
        critic_loss = F.mse_loss(values.squeeze(), td_targets.detach())
        
        # Entropy bonus (encourages exploration)
        entropy = action_dist.entropy().mean()
        
        # Total loss
        loss = actor_loss + self.value_coef * critic_loss - self.entropy_coef * entropy
        
        # Optimize
        self.optimizer.zero_grad()
        loss.backward()
        torch.nn.utils.clip_grad_norm_(self.model.parameters(), 0.5)
        self.optimizer.step()
        
        return loss.item(), actor_loss.item(), critic_loss.item(), entropy.item()
</code></pre>
<h2 id="a3c"><a class="header" href="#a3c">A3C</a></h2>
<p>Asynchronous Advantage Actor-Critic uses multiple parallel workers.</p>
<pre><code class="language-python">import torch.multiprocessing as mp

class A3CAgent:
    def __init__(self, state_dim, action_dim, lr=0.001, gamma=0.99):
        self.state_dim = state_dim
        self.action_dim = action_dim
        self.gamma = gamma
        
        # Global network (shared across workers)
        self.global_model = ActorCritic(state_dim, action_dim)
        self.global_model.share_memory()
        
        self.optimizer = optim.Adam(self.global_model.parameters(), lr=lr)
    
    def worker(self, worker_id, env_fn, num_episodes=1000):
        """Worker process for A3C"""
        local_model = ActorCritic(self.state_dim, self.action_dim)
        env = env_fn()
        
        for episode in range(num_episodes):
            state = env.reset()
            done = False
            
            states, actions, rewards = [], [], []
            
            while not done:
                # Sync local model with global model
                local_model.load_state_dict(self.global_model.state_dict())
                
                # Select action
                state_tensor = torch.FloatTensor(state).unsqueeze(0)
                action_probs, _ = local_model(state_tensor)
                action_dist = torch.distributions.Categorical(action_probs)
                action = action_dist.sample()
                
                # Take action
                next_state, reward, done, _ = env.step(action.item())
                
                # Store transition
                states.append(state)
                actions.append(action.item())
                rewards.append(reward)
                
                state = next_state
                
                # Update global network periodically
                if len(states) &gt;= 20 or done:
                    self._update_global(local_model, states, actions, rewards, next_state, done)
                    states, actions, rewards = [], [], []
    
    def _update_global(self, local_model, states, actions, rewards, next_state, done):
        """Update global network using local gradients"""
        states_tensor = torch.FloatTensor(states)
        actions_tensor = torch.LongTensor(actions)
        
        # Calculate returns
        R = 0
        if not done:
            _, next_value = local_model(torch.FloatTensor(next_state).unsqueeze(0))
            R = next_value.item()
        
        returns = []
        for r in reversed(rewards):
            R = r + self.gamma * R
            returns.insert(0, R)
        returns = torch.FloatTensor(returns)
        
        # Calculate loss
        action_probs, values = local_model(states_tensor)
        action_dist = torch.distributions.Categorical(action_probs)
        log_probs = action_dist.log_prob(actions_tensor)
        
        advantages = returns - values.squeeze()
        actor_loss = -(log_probs * advantages.detach()).mean()
        critic_loss = advantages.pow(2).mean()
        entropy = action_dist.entropy().mean()
        
        loss = actor_loss + 0.5 * critic_loss - 0.01 * entropy
        
        # Update global network
        self.optimizer.zero_grad()
        loss.backward()
        
        # Transfer gradients to global network
        for local_param, global_param in zip(local_model.parameters(), 
                                             self.global_model.parameters()):
            if global_param.grad is None:
                global_param.grad = local_param.grad
            else:
                global_param.grad += local_param.grad
        
        self.optimizer.step()
    
    def train(self, env_fn, num_workers=4, num_episodes=1000):
        """Train using multiple parallel workers"""
        processes = []
        
        for worker_id in range(num_workers):
            p = mp.Process(target=self.worker, args=(worker_id, env_fn, num_episodes))
            p.start()
            processes.append(p)
        
        for p in processes:
            p.join()
</code></pre>
<h2 id="ppo"><a class="header" href="#ppo">PPO</a></h2>
<p>Proximal Policy Optimization is a policy gradient method with clipped objective.</p>
<pre><code class="language-python">class PPOAgent:
    def __init__(self, state_dim, action_dim, lr=0.0003, gamma=0.99, 
                 epsilon=0.2, value_coef=0.5, entropy_coef=0.01, 
                 epochs=10, batch_size=64):
        self.gamma = gamma
        self.epsilon = epsilon
        self.value_coef = value_coef
        self.entropy_coef = entropy_coef
        self.epochs = epochs
        self.batch_size = batch_size
        
        self.model = ActorCritic(state_dim, action_dim)
        self.optimizer = optim.Adam(self.model.parameters(), lr=lr)
        
        # Storage for rollouts
        self.states = []
        self.actions = []
        self.rewards = []
        self.values = []
        self.log_probs = []
        self.dones = []
    
    def select_action(self, state):
        """Select action using current policy"""
        state_tensor = torch.FloatTensor(state).unsqueeze(0)
        
        with torch.no_grad():
            action_probs, value = self.model(state_tensor)
        
        action_dist = torch.distributions.Categorical(action_probs)
        action = action_dist.sample()
        log_prob = action_dist.log_prob(action)
        
        return action.item(), log_prob.item(), value.item()
    
    def store_transition(self, state, action, reward, log_prob, value, done):
        """Store transition in buffer"""
        self.states.append(state)
        self.actions.append(action)
        self.rewards.append(reward)
        self.log_probs.append(log_prob)
        self.values.append(value)
        self.dones.append(done)
    
    def compute_gae(self, next_value, gamma=0.99, lam=0.95):
        """Compute Generalized Advantage Estimation"""
        advantages = []
        gae = 0
        
        values = self.values + [next_value]
        
        for t in reversed(range(len(self.rewards))):
            delta = self.rewards[t] + gamma * values[t + 1] * (1 - self.dones[t]) - values[t]
            gae = delta + gamma * lam * (1 - self.dones[t]) * gae
            advantages.insert(0, gae)
        
        returns = [adv + val for adv, val in zip(advantages, self.values)]
        
        return advantages, returns
    
    def update(self, next_state):
        """PPO update"""
        # Get next value for GAE
        with torch.no_grad():
            next_state_tensor = torch.FloatTensor(next_state).unsqueeze(0)
            _, next_value = self.model(next_state_tensor)
            next_value = next_value.item()
        
        # Compute advantages and returns
        advantages, returns = self.compute_gae(next_value)
        
        # Convert to tensors
        states = torch.FloatTensor(self.states)
        actions = torch.LongTensor(self.actions)
        old_log_probs = torch.FloatTensor(self.log_probs)
        advantages = torch.FloatTensor(advantages)
        returns = torch.FloatTensor(returns)
        
        # Normalize advantages
        advantages = (advantages - advantages.mean()) / (advantages.std() + 1e-8)
        
        # PPO update for multiple epochs
        for _ in range(self.epochs):
            # Get current policy
            action_probs, values = self.model(states)
            action_dist = torch.distributions.Categorical(action_probs)
            log_probs = action_dist.log_prob(actions)
            entropy = action_dist.entropy()
            
            # Ratio for clipping
            ratio = torch.exp(log_probs - old_log_probs)
            
            # Clipped surrogate objective
            surr1 = ratio * advantages
            surr2 = torch.clamp(ratio, 1 - self.epsilon, 1 + self.epsilon) * advantages
            actor_loss = -torch.min(surr1, surr2).mean()
            
            # Value loss
            critic_loss = F.mse_loss(values.squeeze(), returns)
            
            # Entropy bonus
            entropy_loss = -entropy.mean()
            
            # Total loss
            loss = actor_loss + self.value_coef * critic_loss + self.entropy_coef * entropy_loss
            
            # Update
            self.optimizer.zero_grad()
            loss.backward()
            torch.nn.utils.clip_grad_norm_(self.model.parameters(), 0.5)
            self.optimizer.step()
        
        # Clear buffers
        self.states = []
        self.actions = []
        self.rewards = []
        self.values = []
        self.log_probs = []
        self.dones = []
        
        return loss.item()
</code></pre>
<h2 id="ddpg"><a class="header" href="#ddpg">DDPG</a></h2>
<p>Deep Deterministic Policy Gradient for continuous action spaces.</p>
<pre><code class="language-python">class Actor(nn.Module):
    def __init__(self, state_dim, action_dim, max_action, hidden_dim=256):
        super(Actor, self).__init__()
        
        self.network = nn.Sequential(
            nn.Linear(state_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, action_dim),
            nn.Tanh()
        )
        self.max_action = max_action
    
    def forward(self, state):
        return self.max_action * self.network(state)

class Critic(nn.Module):
    def __init__(self, state_dim, action_dim, hidden_dim=256):
        super(Critic, self).__init__()
        
        self.network = nn.Sequential(
            nn.Linear(state_dim + action_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, 1)
        )
    
    def forward(self, state, action):
        return self.network(torch.cat([state, action], dim=1))

class DDPGAgent:
    def __init__(self, state_dim, action_dim, max_action, lr=0.001, 
                 gamma=0.99, tau=0.005, noise_std=0.1):
        self.gamma = gamma
        self.tau = tau
        self.noise_std = noise_std
        self.max_action = max_action
        
        # Actor networks
        self.actor = Actor(state_dim, action_dim, max_action)
        self.actor_target = Actor(state_dim, action_dim, max_action)
        self.actor_target.load_state_dict(self.actor.state_dict())
        self.actor_optimizer = optim.Adam(self.actor.parameters(), lr=lr)
        
        # Critic networks
        self.critic = Critic(state_dim, action_dim)
        self.critic_target = Critic(state_dim, action_dim)
        self.critic_target.load_state_dict(self.critic.state_dict())
        self.critic_optimizer = optim.Adam(self.critic.parameters(), lr=lr)
        
        self.replay_buffer = ReplayBuffer()
    
    def select_action(self, state, training=True):
        """Select action with optional exploration noise"""
        state = torch.FloatTensor(state).unsqueeze(0)
        
        with torch.no_grad():
            action = self.actor(state).cpu().numpy()[0]
        
        if training:
            noise = np.random.normal(0, self.noise_std, size=action.shape)
            action = np.clip(action + noise, -self.max_action, self.max_action)
        
        return action
    
    def train_step(self, batch_size=64):
        """Single DDPG training step"""
        if len(self.replay_buffer) &lt; batch_size:
            return None, None
        
        # Sample batch
        states, actions, rewards, next_states, dones = self.replay_buffer.sample(batch_size)
        
        # Update critic
        with torch.no_grad():
            next_actions = self.actor_target(next_states)
            target_q = self.critic_target(next_states, next_actions)
            target_q = rewards.unsqueeze(1) + (1 - dones.unsqueeze(1)) * self.gamma * target_q
        
        current_q = self.critic(states, actions)
        critic_loss = F.mse_loss(current_q, target_q)
        
        self.critic_optimizer.zero_grad()
        critic_loss.backward()
        self.critic_optimizer.step()
        
        # Update actor
        actor_loss = -self.critic(states, self.actor(states)).mean()
        
        self.actor_optimizer.zero_grad()
        actor_loss.backward()
        self.actor_optimizer.step()
        
        # Soft update target networks
        self._soft_update(self.actor, self.actor_target)
        self._soft_update(self.critic, self.critic_target)
        
        return actor_loss.item(), critic_loss.item()
    
    def _soft_update(self, source, target):
        """Soft update of target network"""
        for source_param, target_param in zip(source.parameters(), target.parameters()):
            target_param.data.copy_(
                self.tau * source_param.data + (1 - self.tau) * target_param.data
            )
</code></pre>
<h2 id="sac"><a class="header" href="#sac">SAC</a></h2>
<p>Soft Actor-Critic with entropy maximization.</p>
<pre><code class="language-python">class SACAgent:
    def __init__(self, state_dim, action_dim, max_action, lr=0.0003, 
                 gamma=0.99, tau=0.005, alpha=0.2):
        self.gamma = gamma
        self.tau = tau
        self.alpha = alpha  # Temperature parameter
        self.max_action = max_action
        
        # Actor (stochastic policy)
        self.actor = Actor(state_dim, action_dim, max_action)
        self.actor_optimizer = optim.Adam(self.actor.parameters(), lr=lr)
        
        # Two Q-functions (critics)
        self.critic_1 = Critic(state_dim, action_dim)
        self.critic_2 = Critic(state_dim, action_dim)
        self.critic_1_optimizer = optim.Adam(self.critic_1.parameters(), lr=lr)
        self.critic_2_optimizer = optim.Adam(self.critic_2.parameters(), lr=lr)
        
        # Target critics
        self.critic_1_target = Critic(state_dim, action_dim)
        self.critic_2_target = Critic(state_dim, action_dim)
        self.critic_1_target.load_state_dict(self.critic_1.state_dict())
        self.critic_2_target.load_state_dict(self.critic_2.state_dict())
        
        self.replay_buffer = ReplayBuffer()
    
    def train_step(self, batch_size=256):
        """SAC training step"""
        if len(self.replay_buffer) &lt; batch_size:
            return None
        
        states, actions, rewards, next_states, dones = self.replay_buffer.sample(batch_size)
        
        # Update critics
        with torch.no_grad():
            next_actions, next_log_probs = self.actor.sample(next_states)
            target_q1 = self.critic_1_target(next_states, next_actions)
            target_q2 = self.critic_2_target(next_states, next_actions)
            target_q = torch.min(target_q1, target_q2) - self.alpha * next_log_probs
            target_q = rewards.unsqueeze(1) + (1 - dones.unsqueeze(1)) * self.gamma * target_q
        
        current_q1 = self.critic_1(states, actions)
        current_q2 = self.critic_2(states, actions)
        
        critic_1_loss = F.mse_loss(current_q1, target_q)
        critic_2_loss = F.mse_loss(current_q2, target_q)
        
        self.critic_1_optimizer.zero_grad()
        critic_1_loss.backward()
        self.critic_1_optimizer.step()
        
        self.critic_2_optimizer.zero_grad()
        critic_2_loss.backward()
        self.critic_2_optimizer.step()
        
        # Update actor
        new_actions, log_probs = self.actor.sample(states)
        q1 = self.critic_1(states, new_actions)
        q2 = self.critic_2(states, new_actions)
        q = torch.min(q1, q2)
        
        actor_loss = (self.alpha * log_probs - q).mean()
        
        self.actor_optimizer.zero_grad()
        actor_loss.backward()
        self.actor_optimizer.step()
        
        # Soft update target networks
        self._soft_update(self.critic_1, self.critic_1_target)
        self._soft_update(self.critic_2, self.critic_2_target)
        
        return actor_loss.item(), critic_1_loss.item(), critic_2_loss.item()
</code></pre>
<h2 id="td3"><a class="header" href="#td3">TD3</a></h2>
<p>Twin Delayed Deep Deterministic Policy Gradient.</p>
<pre><code class="language-python">class TD3Agent(DDPGAgent):
    def __init__(self, state_dim, action_dim, max_action, lr=0.001, 
                 gamma=0.99, tau=0.005, policy_noise=0.2, 
                 noise_clip=0.5, policy_delay=2):
        super().__init__(state_dim, action_dim, max_action, lr, gamma, tau)
        
        # Twin critics
        self.critic_2 = Critic(state_dim, action_dim)
        self.critic_2_target = Critic(state_dim, action_dim)
        self.critic_2_target.load_state_dict(self.critic_2.state_dict())
        self.critic_2_optimizer = optim.Adam(self.critic_2.parameters(), lr=lr)
        
        self.policy_noise = policy_noise
        self.noise_clip = noise_clip
        self.policy_delay = policy_delay
        self.total_iterations = 0
    
    def train_step(self, batch_size=64):
        """TD3 training step"""
        self.total_iterations += 1
        
        if len(self.replay_buffer) &lt; batch_size:
            return None, None
        
        states, actions, rewards, next_states, dones = self.replay_buffer.sample(batch_size)
        
        # Update critics
        with torch.no_grad():
            # Target policy smoothing
            noise = torch.randn_like(actions) * self.policy_noise
            noise = torch.clamp(noise, -self.noise_clip, self.noise_clip)
            
            next_actions = self.actor_target(next_states)
            next_actions = torch.clamp(next_actions + noise, -self.max_action, self.max_action)
            
            # Twin Q targets
            target_q1 = self.critic_target(next_states, next_actions)
            target_q2 = self.critic_2_target(next_states, next_actions)
            target_q = torch.min(target_q1, target_q2)
            target_q = rewards.unsqueeze(1) + (1 - dones.unsqueeze(1)) * self.gamma * target_q
        
        current_q1 = self.critic(states, actions)
        current_q2 = self.critic_2(states, actions)
        
        critic_1_loss = F.mse_loss(current_q1, target_q)
        critic_2_loss = F.mse_loss(current_q2, target_q)
        
        self.critic_optimizer.zero_grad()
        critic_1_loss.backward()
        self.critic_optimizer.step()
        
        self.critic_2_optimizer.zero_grad()
        critic_2_loss.backward()
        self.critic_2_optimizer.step()
        
        # Delayed policy updates
        actor_loss = None
        if self.total_iterations % self.policy_delay == 0:
            # Update actor
            actor_loss = -self.critic(states, self.actor(states)).mean()
            
            self.actor_optimizer.zero_grad()
            actor_loss.backward()
            self.actor_optimizer.step()
            
            # Soft update target networks
            self._soft_update(self.actor, self.actor_target)
            self._soft_update(self.critic, self.critic_target)
            self._soft_update(self.critic_2, self.critic_2_target)
        
        return actor_loss.item() if actor_loss else None, critic_1_loss.item()
</code></pre>
<h2 id="practical-tips-4"><a class="header" href="#practical-tips-4">Practical Tips</a></h2>
<ol>
<li><strong>Hyperparameter Tuning</strong>: Learning rates, discount factors crucial</li>
<li><strong>Reward Scaling</strong>: Normalize rewards for stable training</li>
<li><strong>Network Architecture</strong>: Start simple, increase complexity as needed</li>
<li><strong>Exploration</strong>: Balance exploration vs exploitation</li>
<li><strong>Curriculum Learning</strong>: Start with easier tasks</li>
<li><strong>Distributed Training</strong>: Use parallel environments for faster learning</li>
</ol>
<h2 id="resources-8"><a class="header" href="#resources-8">Resources</a></h2>
<ul>
<li>OpenAI Spinning Up: https://spinningup.openai.com/</li>
<li>Stable Baselines3: https://stable-baselines3.readthedocs.io/</li>
<li>"Deep Reinforcement Learning Hands-On" by Maxim Lapan</li>
<li>DeepMind papers: https://www.deepmind.com/research</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generative-models"><a class="header" href="#generative-models">Generative Models</a></h1>
<p>Generative models learn to create new data samples that resemble the training data distribution.</p>
<h2 id="table-of-contents-11"><a class="header" href="#table-of-contents-11">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/generative_models.html#introduction">Introduction</a></li>
<li><a href="machine_learning/generative_models.html#generative-adversarial-networks">Generative Adversarial Networks (GANs)</a></li>
<li><a href="machine_learning/generative_models.html#variational-autoencoders">Variational Autoencoders (VAEs)</a></li>
<li><a href="machine_learning/generative_models.html#normalizing-flows">Normalizing Flows</a></li>
<li><a href="machine_learning/generative_models.html#autoregressive-models">Autoregressive Models</a></li>
<li><a href="machine_learning/generative_models.html#energy-based-models">Energy-Based Models</a></li>
<li><a href="machine_learning/generative_models.html#diffusion-models">Diffusion Models</a></li>
</ol>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p><strong>Types of Generative Models:</strong></p>
<ul>
<li><strong>Explicit Density</strong>: Models that define explicit probability distribution (VAE, Flow models)</li>
<li><strong>Implicit Density</strong>: Models that can sample without explicit density (GANs)</li>
<li><strong>Tractable</strong>: Can compute exact likelihoods (Autoregressive, Flow models)</li>
<li><strong>Approximate</strong>: Use approximate inference (VAEs)</li>
</ul>
<h2 id="generative-adversarial-networks"><a class="header" href="#generative-adversarial-networks">Generative Adversarial Networks</a></h2>
<p>GANs use two networks competing against each other: Generator and Discriminator.</p>
<h3 id="basic-gan"><a class="header" href="#basic-gan">Basic GAN</a></h3>
<p><strong>Objective Function:</strong></p>
<pre><code>min_G max_D V(D,G) = E_x[log D(x)] + E_z[log(1 - D(G(z)))]
</code></pre>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
import torchvision
import torchvision.transforms as transforms
from torch.utils.data import DataLoader

# Generator Network
class Generator(nn.Module):
    def __init__(self, latent_dim=100, img_shape=(1, 28, 28)):
        super(Generator, self).__init__()
        self.img_shape = img_shape
        
        def block(in_feat, out_feat, normalize=True):
            layers = [nn.Linear(in_feat, out_feat)]
            if normalize:
                layers.append(nn.BatchNorm1d(out_feat))
            layers.append(nn.LeakyReLU(0.2))
            return layers
        
        self.model = nn.Sequential(
            *block(latent_dim, 128, normalize=False),
            *block(128, 256),
            *block(256, 512),
            *block(512, 1024),
            nn.Linear(1024, int(np.prod(img_shape))),
            nn.Tanh()
        )
    
    def forward(self, z):
        img = self.model(z)
        img = img.view(img.size(0), *self.img_shape)
        return img

# Discriminator Network
class Discriminator(nn.Module):
    def __init__(self, img_shape=(1, 28, 28)):
        super(Discriminator, self).__init__()
        
        self.model = nn.Sequential(
            nn.Linear(int(np.prod(img_shape)), 512),
            nn.LeakyReLU(0.2),
            nn.Dropout(0.3),
            nn.Linear(512, 256),
            nn.LeakyReLU(0.2),
            nn.Dropout(0.3),
            nn.Linear(256, 1),
            nn.Sigmoid()
        )
    
    def forward(self, img):
        img_flat = img.view(img.size(0), -1)
        validity = self.model(img_flat)
        return validity

# Training GAN
class GANTrainer:
    def __init__(self, generator, discriminator, latent_dim=100, 
                 lr=0.0002, betas=(0.5, 0.999)):
        self.generator = generator
        self.discriminator = discriminator
        self.latent_dim = latent_dim
        
        # Optimizers
        self.optimizer_G = optim.Adam(generator.parameters(), lr=lr, betas=betas)
        self.optimizer_D = optim.Adam(discriminator.parameters(), lr=lr, betas=betas)
        
        # Loss function
        self.adversarial_loss = nn.BCELoss()
    
    def train_step(self, real_imgs):
        batch_size = real_imgs.size(0)
        
        # Adversarial ground truths
        valid = torch.ones(batch_size, 1)
        fake = torch.zeros(batch_size, 1)
        
        # ---------------------
        #  Train Discriminator
        # ---------------------
        self.optimizer_D.zero_grad()
        
        # Loss for real images
        real_loss = self.adversarial_loss(self.discriminator(real_imgs), valid)
        
        # Loss for fake images
        z = torch.randn(batch_size, self.latent_dim)
        fake_imgs = self.generator(z)
        fake_loss = self.adversarial_loss(self.discriminator(fake_imgs.detach()), fake)
        
        # Total discriminator loss
        d_loss = (real_loss + fake_loss) / 2
        d_loss.backward()
        self.optimizer_D.step()
        
        # -----------------
        #  Train Generator
        # -----------------
        self.optimizer_G.zero_grad()
        
        # Generate fake images
        z = torch.randn(batch_size, self.latent_dim)
        gen_imgs = self.generator(z)
        
        # Generator loss (fool discriminator)
        g_loss = self.adversarial_loss(self.discriminator(gen_imgs), valid)
        g_loss.backward()
        self.optimizer_G.step()
        
        return d_loss.item(), g_loss.item()
    
    def train(self, dataloader, num_epochs=100):
        """Train GAN"""
        for epoch in range(num_epochs):
            for i, (imgs, _) in enumerate(dataloader):
                d_loss, g_loss = self.train_step(imgs)
                
                if i % 100 == 0:
                    print(f"[Epoch {epoch}/{num_epochs}] [Batch {i}] "
                          f"[D loss: {d_loss:.4f}] [G loss: {g_loss:.4f}]")
            
            # Sample images
            if epoch % 10 == 0:
                self.sample_images(epoch)
    
    def sample_images(self, epoch, n_row=10):
        """Generate and save sample images"""
        z = torch.randn(n_row**2, self.latent_dim)
        gen_imgs = self.generator(z)
        
        import torchvision.utils as vutils
        vutils.save_image(gen_imgs.data, f"images/epoch_{epoch}.png", 
                         nrow=n_row, normalize=True)

# Example usage
img_shape = (1, 28, 28)
generator = Generator(latent_dim=100, img_shape=img_shape)
discriminator = Discriminator(img_shape=img_shape)

trainer = GANTrainer(generator, discriminator)
# trainer.train(dataloader, num_epochs=100)
</code></pre>
<h3 id="deep-convolutional-gan-dcgan"><a class="header" href="#deep-convolutional-gan-dcgan">Deep Convolutional GAN (DCGAN)</a></h3>
<pre><code class="language-python">class DCGANGenerator(nn.Module):
    def __init__(self, latent_dim=100, channels=3):
        super(DCGANGenerator, self).__init__()
        
        self.init_size = 4
        self.l1 = nn.Linear(latent_dim, 128 * self.init_size ** 2)
        
        self.conv_blocks = nn.Sequential(
            nn.BatchNorm2d(128),
            nn.Upsample(scale_factor=2),  # 4x4 -&gt; 8x8
            nn.Conv2d(128, 128, 3, stride=1, padding=1),
            nn.BatchNorm2d(128),
            nn.LeakyReLU(0.2),
            
            nn.Upsample(scale_factor=2),  # 8x8 -&gt; 16x16
            nn.Conv2d(128, 64, 3, stride=1, padding=1),
            nn.BatchNorm2d(64),
            nn.LeakyReLU(0.2),
            
            nn.Upsample(scale_factor=2),  # 16x16 -&gt; 32x32
            nn.Conv2d(64, channels, 3, stride=1, padding=1),
            nn.Tanh()
        )
    
    def forward(self, z):
        out = self.l1(z)
        out = out.view(out.shape[0], 128, self.init_size, self.init_size)
        img = self.conv_blocks(out)
        return img

class DCGANDiscriminator(nn.Module):
    def __init__(self, channels=3):
        super(DCGANDiscriminator, self).__init__()
        
        def discriminator_block(in_filters, out_filters, bn=True):
            block = [nn.Conv2d(in_filters, out_filters, 3, 2, 1),
                    nn.LeakyReLU(0.2),
                    nn.Dropout2d(0.25)]
            if bn:
                block.append(nn.BatchNorm2d(out_filters))
            return block
        
        self.model = nn.Sequential(
            *discriminator_block(channels, 16, bn=False),  # 32x32 -&gt; 16x16
            *discriminator_block(16, 32),                   # 16x16 -&gt; 8x8
            *discriminator_block(32, 64),                   # 8x8 -&gt; 4x4
            *discriminator_block(64, 128),                  # 4x4 -&gt; 2x2
        )
        
        # Output layer
        ds_size = 2
        self.adv_layer = nn.Sequential(
            nn.Linear(128 * ds_size ** 2, 1),
            nn.Sigmoid()
        )
    
    def forward(self, img):
        out = self.model(img)
        out = out.view(out.shape[0], -1)
        validity = self.adv_layer(out)
        return validity
</code></pre>
<h3 id="conditional-gan-cgan"><a class="header" href="#conditional-gan-cgan">Conditional GAN (cGAN)</a></h3>
<pre><code class="language-python">class ConditionalGenerator(nn.Module):
    def __init__(self, latent_dim=100, n_classes=10, img_shape=(1, 28, 28)):
        super(ConditionalGenerator, self).__init__()
        self.img_shape = img_shape
        
        self.label_emb = nn.Embedding(n_classes, n_classes)
        
        def block(in_feat, out_feat, normalize=True):
            layers = [nn.Linear(in_feat, out_feat)]
            if normalize:
                layers.append(nn.BatchNorm1d(out_feat))
            layers.append(nn.LeakyReLU(0.2))
            return layers
        
        self.model = nn.Sequential(
            *block(latent_dim + n_classes, 128, normalize=False),
            *block(128, 256),
            *block(256, 512),
            *block(512, 1024),
            nn.Linear(1024, int(np.prod(img_shape))),
            nn.Tanh()
        )
    
    def forward(self, noise, labels):
        # Concatenate label embedding and noise
        gen_input = torch.cat((self.label_emb(labels), noise), -1)
        img = self.model(gen_input)
        img = img.view(img.size(0), *self.img_shape)
        return img

class ConditionalDiscriminator(nn.Module):
    def __init__(self, n_classes=10, img_shape=(1, 28, 28)):
        super(ConditionalDiscriminator, self).__init__()
        
        self.label_embedding = nn.Embedding(n_classes, n_classes)
        
        self.model = nn.Sequential(
            nn.Linear(n_classes + int(np.prod(img_shape)), 512),
            nn.LeakyReLU(0.2),
            nn.Dropout(0.3),
            nn.Linear(512, 256),
            nn.LeakyReLU(0.2),
            nn.Dropout(0.3),
            nn.Linear(256, 1),
            nn.Sigmoid()
        )
    
    def forward(self, img, labels):
        # Concatenate label embedding and image
        d_in = torch.cat((img.view(img.size(0), -1), self.label_embedding(labels)), -1)
        validity = self.model(d_in)
        return validity
</code></pre>
<h3 id="wasserstein-gan-wgan"><a class="header" href="#wasserstein-gan-wgan">Wasserstein GAN (WGAN)</a></h3>
<pre><code class="language-python">class WGANTrainer:
    def __init__(self, generator, discriminator, latent_dim=100, 
                 lr=0.00005, n_critic=5, clip_value=0.01):
        self.generator = generator
        self.discriminator = discriminator
        self.latent_dim = latent_dim
        self.n_critic = n_critic
        self.clip_value = clip_value
        
        # RMSprop optimizers
        self.optimizer_G = optim.RMSprop(generator.parameters(), lr=lr)
        self.optimizer_D = optim.RMSprop(discriminator.parameters(), lr=lr)
    
    def train_step(self, real_imgs):
        batch_size = real_imgs.size(0)
        
        # ---------------------
        #  Train Discriminator
        # ---------------------
        self.optimizer_D.zero_grad()
        
        # Sample noise
        z = torch.randn(batch_size, self.latent_dim)
        fake_imgs = self.generator(z).detach()
        
        # Wasserstein loss
        loss_D = -torch.mean(self.discriminator(real_imgs)) + \
                  torch.mean(self.discriminator(fake_imgs))
        
        loss_D.backward()
        self.optimizer_D.step()
        
        # Clip weights
        for p in self.discriminator.parameters():
            p.data.clamp_(-self.clip_value, self.clip_value)
        
        # Train generator every n_critic iterations
        if self.n_critic &gt; 0:
            self.n_critic -= 1
            return loss_D.item(), None
        
        # -----------------
        #  Train Generator
        # -----------------
        self.optimizer_G.zero_grad()
        
        z = torch.randn(batch_size, self.latent_dim)
        gen_imgs = self.generator(z)
        
        # Generator loss
        loss_G = -torch.mean(self.discriminator(gen_imgs))
        
        loss_G.backward()
        self.optimizer_G.step()
        
        self.n_critic = 5  # Reset
        
        return loss_D.item(), loss_G.item()
</code></pre>
<h3 id="stylegan-concepts"><a class="header" href="#stylegan-concepts">StyleGAN Concepts</a></h3>
<pre><code class="language-python">class StyleGANGenerator(nn.Module):
    """Simplified StyleGAN architecture"""
    def __init__(self, latent_dim=512, style_dim=512, n_mlp=8):
        super(StyleGANGenerator, self).__init__()
        
        # Mapping network (converts z to w)
        layers = []
        for i in range(n_mlp):
            layers.append(nn.Linear(latent_dim if i == 0 else style_dim, style_dim))
            layers.append(nn.LeakyReLU(0.2))
        self.mapping = nn.Sequential(*layers)
        
        # Synthesis network (generates image from w)
        self.const_input = nn.Parameter(torch.randn(1, 512, 4, 4))
        
        # Progressive layers with AdaIN
        self.prog_blocks = nn.ModuleList()
        self.style_blocks = nn.ModuleList()
        
        channels = [512, 512, 512, 256, 128, 64, 32]
        for i in range(len(channels) - 1):
            self.prog_blocks.append(
                nn.Sequential(
                    nn.Upsample(scale_factor=2),
                    nn.Conv2d(channels[i], channels[i+1], 3, padding=1),
                    nn.LeakyReLU(0.2)
                )
            )
            self.style_blocks.append(
                nn.Linear(style_dim, channels[i+1] * 2)  # For AdaIN
            )
        
        self.to_rgb = nn.Conv2d(channels[-1], 3, 1)
    
    def forward(self, z):
        # Map to style space
        w = self.mapping(z)
        
        # Start with constant
        x = self.const_input.repeat(z.size(0), 1, 1, 1)
        
        # Apply progressive blocks with style modulation
        for prog_block, style_block in zip(self.prog_blocks, self.style_blocks):
            x = prog_block(x)
            
            # AdaIN (Adaptive Instance Normalization)
            style = style_block(w).unsqueeze(2).unsqueeze(3)
            style_mean, style_std = style.chunk(2, 1)
            
            x = F.instance_norm(x)
            x = x * (style_std + 1) + style_mean
        
        # Convert to RGB
        img = self.to_rgb(x)
        return torch.tanh(img)
</code></pre>
<h2 id="variational-autoencoders"><a class="header" href="#variational-autoencoders">Variational Autoencoders</a></h2>
<p>VAEs learn a latent representation by maximizing a variational lower bound on the data likelihood.</p>
<p><strong>Objective (ELBO):</strong></p>
<pre><code>log p(x) ≥ E_q[log p(x|z)] - KL(q(z|x) || p(z))
</code></pre>
<h3 id="basic-vae"><a class="header" href="#basic-vae">Basic VAE</a></h3>
<pre><code class="language-python">class VAE(nn.Module):
    def __init__(self, input_dim=784, latent_dim=20, hidden_dim=400):
        super(VAE, self).__init__()
        
        # Encoder
        self.fc1 = nn.Linear(input_dim, hidden_dim)
        self.fc_mu = nn.Linear(hidden_dim, latent_dim)
        self.fc_logvar = nn.Linear(hidden_dim, latent_dim)
        
        # Decoder
        self.fc3 = nn.Linear(latent_dim, hidden_dim)
        self.fc4 = nn.Linear(hidden_dim, input_dim)
    
    def encode(self, x):
        """Encode input to latent distribution parameters"""
        h = F.relu(self.fc1(x))
        mu = self.fc_mu(h)
        logvar = self.fc_logvar(h)
        return mu, logvar
    
    def reparameterize(self, mu, logvar):
        """Reparameterization trick"""
        std = torch.exp(0.5 * logvar)
        eps = torch.randn_like(std)
        return mu + eps * std
    
    def decode(self, z):
        """Decode latent to output"""
        h = F.relu(self.fc3(z))
        return torch.sigmoid(self.fc4(h))
    
    def forward(self, x):
        mu, logvar = self.encode(x.view(-1, 784))
        z = self.reparameterize(mu, logvar)
        recon = self.decode(z)
        return recon, mu, logvar

def vae_loss(recon_x, x, mu, logvar):
    """VAE loss function"""
    # Reconstruction loss (binary cross-entropy)
    BCE = F.binary_cross_entropy(recon_x, x.view(-1, 784), reduction='sum')
    
    # KL divergence
    KLD = -0.5 * torch.sum(1 + logvar - mu.pow(2) - logvar.exp())
    
    return BCE + KLD

# Training
model = VAE()
optimizer = optim.Adam(model.parameters(), lr=0.001)

def train_vae(model, dataloader, num_epochs=10):
    model.train()
    for epoch in range(num_epochs):
        train_loss = 0
        for batch_idx, (data, _) in enumerate(dataloader):
            optimizer.zero_grad()
            
            recon_batch, mu, logvar = model(data)
            loss = vae_loss(recon_batch, data, mu, logvar)
            
            loss.backward()
            train_loss += loss.item()
            optimizer.step()
            
            if batch_idx % 100 == 0:
                print(f'Epoch: {epoch} [{batch_idx * len(data)}/{len(dataloader.dataset)}] '
                      f'Loss: {loss.item() / len(data):.4f}')
        
        print(f'Epoch {epoch} Average loss: {train_loss / len(dataloader.dataset):.4f}')
</code></pre>
<h3 id="convolutional-vae"><a class="header" href="#convolutional-vae">Convolutional VAE</a></h3>
<pre><code class="language-python">class ConvVAE(nn.Module):
    def __init__(self, latent_dim=128, channels=3):
        super(ConvVAE, self).__init__()
        
        # Encoder
        self.encoder = nn.Sequential(
            nn.Conv2d(channels, 32, 4, 2, 1),  # 32x32 -&gt; 16x16
            nn.ReLU(),
            nn.Conv2d(32, 64, 4, 2, 1),        # 16x16 -&gt; 8x8
            nn.ReLU(),
            nn.Conv2d(64, 128, 4, 2, 1),       # 8x8 -&gt; 4x4
            nn.ReLU(),
            nn.Conv2d(128, 256, 4, 2, 1),      # 4x4 -&gt; 2x2
            nn.ReLU()
        )
        
        self.fc_mu = nn.Linear(256 * 2 * 2, latent_dim)
        self.fc_logvar = nn.Linear(256 * 2 * 2, latent_dim)
        
        # Decoder
        self.fc_decode = nn.Linear(latent_dim, 256 * 2 * 2)
        
        self.decoder = nn.Sequential(
            nn.ConvTranspose2d(256, 128, 4, 2, 1),  # 2x2 -&gt; 4x4
            nn.ReLU(),
            nn.ConvTranspose2d(128, 64, 4, 2, 1),   # 4x4 -&gt; 8x8
            nn.ReLU(),
            nn.ConvTranspose2d(64, 32, 4, 2, 1),    # 8x8 -&gt; 16x16
            nn.ReLU(),
            nn.ConvTranspose2d(32, channels, 4, 2, 1),  # 16x16 -&gt; 32x32
            nn.Sigmoid()
        )
    
    def encode(self, x):
        h = self.encoder(x)
        h = h.view(h.size(0), -1)
        return self.fc_mu(h), self.fc_logvar(h)
    
    def reparameterize(self, mu, logvar):
        std = torch.exp(0.5 * logvar)
        eps = torch.randn_like(std)
        return mu + eps * std
    
    def decode(self, z):
        h = self.fc_decode(z)
        h = h.view(h.size(0), 256, 2, 2)
        return self.decoder(h)
    
    def forward(self, x):
        mu, logvar = self.encode(x)
        z = self.reparameterize(mu, logvar)
        return self.decode(z), mu, logvar
</code></pre>
<h3 id="beta-vae"><a class="header" href="#beta-vae">Beta-VAE</a></h3>
<pre><code class="language-python">def beta_vae_loss(recon_x, x, mu, logvar, beta=4.0):
    """Beta-VAE loss with adjustable KL weight"""
    # Reconstruction loss
    BCE = F.binary_cross_entropy(recon_x, x.view(-1, 784), reduction='sum')
    
    # KL divergence with beta weight
    KLD = -0.5 * torch.sum(1 + logvar - mu.pow(2) - logvar.exp())
    
    return BCE + beta * KLD
</code></pre>
<h2 id="normalizing-flows"><a class="header" href="#normalizing-flows">Normalizing Flows</a></h2>
<p>Flow models use invertible transformations to model complex distributions.</p>
<h3 id="simple-flow"><a class="header" href="#simple-flow">Simple Flow</a></h3>
<pre><code class="language-python">class CouplingLayer(nn.Module):
    """Affine coupling layer"""
    def __init__(self, dim, hidden_dim=256):
        super(CouplingLayer, self).__init__()
        self.dim = dim
        self.split = dim // 2
        
        # Scale and translate networks
        self.scale_net = nn.Sequential(
            nn.Linear(self.split, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, dim - self.split),
            nn.Tanh()
        )
        
        self.translate_net = nn.Sequential(
            nn.Linear(self.split, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, dim - self.split)
        )
    
    def forward(self, x, reverse=False):
        x1, x2 = x[:, :self.split], x[:, self.split:]
        
        if not reverse:
            # Forward pass
            s = self.scale_net(x1)
            t = self.translate_net(x1)
            y2 = x2 * torch.exp(s) + t
            y = torch.cat([x1, y2], dim=1)
            log_det = torch.sum(s, dim=1)
        else:
            # Inverse pass
            s = self.scale_net(x1)
            t = self.translate_net(x1)
            y2 = (x2 - t) * torch.exp(-s)
            y = torch.cat([x1, y2], dim=1)
            log_det = -torch.sum(s, dim=1)
        
        return y, log_det

class NormalizingFlow(nn.Module):
    def __init__(self, dim, num_layers=8):
        super(NormalizingFlow, self).__init__()
        
        self.layers = nn.ModuleList([
            CouplingLayer(dim) for _ in range(num_layers)
        ])
    
    def forward(self, x, reverse=False):
        log_det_sum = 0
        
        layers = reversed(self.layers) if reverse else self.layers
        
        for layer in layers:
            x, log_det = layer(x, reverse=reverse)
            log_det_sum += log_det
        
        return x, log_det_sum
    
    def log_prob(self, x):
        """Compute log probability"""
        z, log_det = self.forward(x, reverse=False)
        
        # Base distribution (standard normal)
        log_prob_z = -0.5 * (z ** 2 + np.log(2 * np.pi)).sum(dim=1)
        
        return log_prob_z + log_det
</code></pre>
<h2 id="autoregressive-models"><a class="header" href="#autoregressive-models">Autoregressive Models</a></h2>
<p>Generate data sequentially, one element at a time.</p>
<h3 id="pixelcnn"><a class="header" href="#pixelcnn">PixelCNN</a></h3>
<pre><code class="language-python">class MaskedConv2d(nn.Conv2d):
    """Masked convolution for autoregressive generation"""
    def __init__(self, mask_type, *args, **kwargs):
        super(MaskedConv2d, self).__init__(*args, **kwargs)
        self.register_buffer('mask', torch.zeros_like(self.weight))
        
        self.mask[:, :, :self.kernel_size[0] // 2] = 1
        self.mask[:, :, self.kernel_size[0] // 2, :self.kernel_size[1] // 2] = 1
        
        if mask_type == 'A':
            # Mask type A: exclude center pixel
            self.mask[:, :, self.kernel_size[0] // 2, self.kernel_size[1] // 2] = 0
    
    def forward(self, x):
        self.weight.data *= self.mask
        return super(MaskedConv2d, self).forward(x)

class PixelCNN(nn.Module):
    def __init__(self, n_channels=1, n_filters=64, n_layers=7):
        super(PixelCNN, self).__init__()
        
        self.layers = nn.ModuleList()
        
        # First layer (mask type A)
        self.layers.append(
            nn.Sequential(
                MaskedConv2d('A', n_channels, n_filters, 7, padding=3),
                nn.BatchNorm2d(n_filters),
                nn.ReLU()
            )
        )
        
        # Hidden layers (mask type B)
        for _ in range(n_layers):
            self.layers.append(
                nn.Sequential(
                    MaskedConv2d('B', n_filters, n_filters, 7, padding=3),
                    nn.BatchNorm2d(n_filters),
                    nn.ReLU()
                )
            )
        
        # Output layer
        self.output = nn.Conv2d(n_filters, n_channels * 256, 1)
    
    def forward(self, x):
        for layer in self.layers:
            x = layer(x)
        
        x = self.output(x)
        
        # Reshape for pixel-wise softmax
        b, _, h, w = x.size()
        x = x.view(b, 256, -1, h, w)
        
        return x
</code></pre>
<h2 id="energy-based-models"><a class="header" href="#energy-based-models">Energy-Based Models</a></h2>
<p>Model probability as energy function: p(x) ∝ exp(-E(x))</p>
<pre><code class="language-python">class EnergyBasedModel(nn.Module):
    def __init__(self, input_dim):
        super(EnergyBasedModel, self).__init__()
        
        self.energy_net = nn.Sequential(
            nn.Linear(input_dim, 256),
            nn.ReLU(),
            nn.Linear(256, 256),
            nn.ReLU(),
            nn.Linear(256, 1)
        )
    
    def energy(self, x):
        """Compute energy E(x)"""
        return self.energy_net(x)
    
    def sample_langevin(self, x, n_steps=100, step_size=0.01):
        """Sample using Langevin dynamics"""
        x = x.clone().detach().requires_grad_(True)
        
        for _ in range(n_steps):
            energy = self.energy(x).sum()
            grad = torch.autograd.grad(energy, x)[0]
            
            noise = torch.randn_like(x) * np.sqrt(step_size * 2)
            x = x - step_size * grad + noise
        
        return x.detach()
</code></pre>
<h2 id="diffusion-models"><a class="header" href="#diffusion-models">Diffusion Models</a></h2>
<p>Gradually add noise then learn to denoise.</p>
<h3 id="ddpm-denoising-diffusion-probabilistic-models"><a class="header" href="#ddpm-denoising-diffusion-probabilistic-models">DDPM (Denoising Diffusion Probabilistic Models)</a></h3>
<pre><code class="language-python">class DiffusionModel(nn.Module):
    def __init__(self, timesteps=1000):
        super(DiffusionModel, self).__init__()
        self.timesteps = timesteps
        
        # Linear beta schedule
        self.betas = torch.linspace(0.0001, 0.02, timesteps)
        self.alphas = 1 - self.betas
        self.alphas_cumprod = torch.cumprod(self.alphas, dim=0)
        
        # Noise prediction network (U-Net)
        self.noise_predictor = self._build_unet()
    
    def _build_unet(self):
        """Simple U-Net for noise prediction"""
        # Simplified version
        return nn.Sequential(
            nn.Conv2d(3, 64, 3, padding=1),
            nn.ReLU(),
            nn.Conv2d(64, 64, 3, padding=1),
            nn.ReLU(),
            nn.Conv2d(64, 3, 3, padding=1)
        )
    
    def q_sample(self, x0, t, noise=None):
        """Forward diffusion: add noise to x0"""
        if noise is None:
            noise = torch.randn_like(x0)
        
        sqrt_alphas_cumprod_t = self.alphas_cumprod[t].sqrt()
        sqrt_one_minus_alphas_cumprod_t = (1 - self.alphas_cumprod[t]).sqrt()
        
        return sqrt_alphas_cumprod_t * x0 + sqrt_one_minus_alphas_cumprod_t * noise
    
    def p_sample(self, xt, t):
        """Reverse diffusion: denoise xt"""
        # Predict noise
        predicted_noise = self.noise_predictor(xt)
        
        # Compute x_{t-1}
        alpha_t = self.alphas[t]
        alpha_cumprod_t = self.alphas_cumprod[t]
        beta_t = self.betas[t]
        
        x0_pred = (xt - ((1 - alpha_t) / (1 - alpha_cumprod_t).sqrt()) * predicted_noise) / alpha_t.sqrt()
        
        if t &gt; 0:
            noise = torch.randn_like(xt)
            x_prev = x0_pred * alpha_t.sqrt() + (1 - alpha_t).sqrt() * noise
        else:
            x_prev = x0_pred
        
        return x_prev
    
    def sample(self, shape):
        """Generate samples"""
        device = next(self.parameters()).device
        
        # Start from random noise
        x = torch.randn(shape).to(device)
        
        # Iteratively denoise
        for t in reversed(range(self.timesteps)):
            x = self.p_sample(x, t)
        
        return x
</code></pre>
<h2 id="evaluation-metrics-1"><a class="header" href="#evaluation-metrics-1">Evaluation Metrics</a></h2>
<pre><code class="language-python"># Inception Score (IS)
def inception_score(imgs, splits=10):
    """Higher is better"""
    from torchvision.models import inception_v3
    
    inception_model = inception_v3(pretrained=True, transform_input=False)
    inception_model.eval()
    
    # Get predictions
    with torch.no_grad():
        preds = inception_model(imgs)
        preds = F.softmax(preds, dim=1)
    
    # Compute IS
    split_scores = []
    for k in range(splits):
        part = preds[k * (len(preds) // splits): (k + 1) * (len(preds) // splits)]
        py = part.mean(dim=0)
        scores = []
        for i in range(part.shape[0]):
            pyx = part[i]
            scores.append((pyx * (torch.log(pyx) - torch.log(py))).sum())
        split_scores.append(torch.exp(torch.mean(torch.stack(scores))))
    
    return torch.mean(torch.stack(split_scores)), torch.std(torch.stack(split_scores))

# Fréchet Inception Distance (FID)
def calculate_fid(real_imgs, fake_imgs):
    """Lower is better"""
    # Extract features using Inception network
    # Calculate mean and covariance
    # Compute FID score
    pass
</code></pre>
<h2 id="practical-tips-5"><a class="header" href="#practical-tips-5">Practical Tips</a></h2>
<ol>
<li><strong>GAN Training</strong>: Balance G and D, use label smoothing, add noise to inputs</li>
<li><strong>VAE</strong>: Choose appropriate beta value, use warm-up for KL term</li>
<li><strong>Stability</strong>: Monitor losses, use spectral normalization</li>
<li><strong>Architecture</strong>: Start simple, gradually add complexity</li>
<li><strong>Evaluation</strong>: Use multiple metrics (IS, FID, visual inspection)</li>
</ol>
<h2 id="resources-9"><a class="header" href="#resources-9">Resources</a></h2>
<ul>
<li>"Generative Deep Learning" by David Foster</li>
<li>OpenAI papers: https://openai.com/research/</li>
<li>Distill.pub: https://distill.pub/</li>
<li>Papers with Code: https://paperswithcode.com/</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deep-generative-models"><a class="header" href="#deep-generative-models">Deep Generative Models</a></h1>
<p>Advanced architectures and techniques for generating high-quality data.</p>
<h2 id="table-of-contents-12"><a class="header" href="#table-of-contents-12">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/deep_generative_models.html#transformer-based-generative-models">Transformer-based Generative Models</a></li>
<li><a href="machine_learning/deep_generative_models.html#diffusion-models">Diffusion Models</a></li>
<li><a href="machine_learning/deep_generative_models.html#vector-quantized-models">Vector Quantized Models</a></li>
<li><a href="machine_learning/deep_generative_models.html#nerf-and-3d-generation">NeRF and 3D Generation</a></li>
<li><a href="machine_learning/deep_generative_models.html#multimodal-generative-models">Multimodal Generative Models</a></li>
</ol>
<h2 id="transformer-based-generative-models"><a class="header" href="#transformer-based-generative-models">Transformer-based Generative Models</a></h2>
<h3 id="gpt-generative-pre-trained-transformer"><a class="header" href="#gpt-generative-pre-trained-transformer">GPT (Generative Pre-trained Transformer)</a></h3>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.nn.functional as F
import math

class MultiHeadAttention(nn.Module):
    def __init__(self, d_model, num_heads, dropout=0.1):
        super(MultiHeadAttention, self).__init__()
        assert d_model % num_heads == 0
        
        self.d_model = d_model
        self.num_heads = num_heads
        self.d_k = d_model // num_heads
        
        self.W_q = nn.Linear(d_model, d_model)
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)
        self.W_o = nn.Linear(d_model, d_model)
        
        self.dropout = nn.Dropout(dropout)
    
    def forward(self, query, key, value, mask=None):
        batch_size = query.size(0)
        
        # Linear projections
        Q = self.W_q(query).view(batch_size, -1, self.num_heads, self.d_k).transpose(1, 2)
        K = self.W_k(key).view(batch_size, -1, self.num_heads, self.d_k).transpose(1, 2)
        V = self.W_v(value).view(batch_size, -1, self.num_heads, self.d_k).transpose(1, 2)
        
        # Scaled dot-product attention
        scores = torch.matmul(Q, K.transpose(-2, -1)) / math.sqrt(self.d_k)
        
        if mask is not None:
            scores = scores.masked_fill(mask == 0, -1e9)
        
        attn_weights = F.softmax(scores, dim=-1)
        attn_weights = self.dropout(attn_weights)
        
        context = torch.matmul(attn_weights, V)
        
        # Concatenate heads
        context = context.transpose(1, 2).contiguous().view(batch_size, -1, self.d_model)
        
        # Final linear projection
        output = self.W_o(context)
        
        return output, attn_weights

class FeedForward(nn.Module):
    def __init__(self, d_model, d_ff, dropout=0.1):
        super(FeedForward, self).__init__()
        self.linear1 = nn.Linear(d_model, d_ff)
        self.linear2 = nn.Linear(d_ff, d_model)
        self.dropout = nn.Dropout(dropout)
    
    def forward(self, x):
        return self.linear2(self.dropout(F.gelu(self.linear1(x))))

class TransformerBlock(nn.Module):
    def __init__(self, d_model, num_heads, d_ff, dropout=0.1):
        super(TransformerBlock, self).__init__()
        
        self.attention = MultiHeadAttention(d_model, num_heads, dropout)
        self.feed_forward = FeedForward(d_model, d_ff, dropout)
        
        self.norm1 = nn.LayerNorm(d_model)
        self.norm2 = nn.LayerNorm(d_model)
        
        self.dropout1 = nn.Dropout(dropout)
        self.dropout2 = nn.Dropout(dropout)
    
    def forward(self, x, mask=None):
        # Multi-head attention with residual connection
        attn_output, _ = self.attention(x, x, x, mask)
        x = self.norm1(x + self.dropout1(attn_output))
        
        # Feed-forward with residual connection
        ff_output = self.feed_forward(x)
        x = self.norm2(x + self.dropout2(ff_output))
        
        return x

class GPTModel(nn.Module):
    def __init__(self, vocab_size, d_model=768, num_heads=12, num_layers=12, 
                 d_ff=3072, max_seq_length=1024, dropout=0.1):
        super(GPTModel, self).__init__()
        
        self.d_model = d_model
        self.max_seq_length = max_seq_length
        
        # Token and position embeddings
        self.token_embedding = nn.Embedding(vocab_size, d_model)
        self.position_embedding = nn.Embedding(max_seq_length, d_model)
        
        # Transformer blocks
        self.blocks = nn.ModuleList([
            TransformerBlock(d_model, num_heads, d_ff, dropout)
            for _ in range(num_layers)
        ])
        
        # Output projection
        self.ln_f = nn.LayerNorm(d_model)
        self.head = nn.Linear(d_model, vocab_size, bias=False)
        
        self.dropout = nn.Dropout(dropout)
    
    def forward(self, input_ids, targets=None):
        batch_size, seq_length = input_ids.size()
        
        # Create position ids
        position_ids = torch.arange(seq_length, dtype=torch.long, device=input_ids.device)
        position_ids = position_ids.unsqueeze(0).expand_as(input_ids)
        
        # Embeddings
        token_embeds = self.token_embedding(input_ids)
        position_embeds = self.position_embedding(position_ids)
        x = self.dropout(token_embeds + position_embeds)
        
        # Causal mask
        mask = torch.tril(torch.ones(seq_length, seq_length, device=input_ids.device))
        mask = mask.view(1, 1, seq_length, seq_length)
        
        # Transformer blocks
        for block in self.blocks:
            x = block(x, mask)
        
        # Output
        x = self.ln_f(x)
        logits = self.head(x)
        
        loss = None
        if targets is not None:
            loss = F.cross_entropy(logits.view(-1, logits.size(-1)), targets.view(-1))
        
        return logits, loss
    
    def generate(self, input_ids, max_new_tokens=50, temperature=1.0, top_k=None):
        """Generate text autoregressively"""
        for _ in range(max_new_tokens):
            # Crop context if needed
            idx_cond = input_ids if input_ids.size(1) &lt;= self.max_seq_length else input_ids[:, -self.max_seq_length:]
            
            # Forward pass
            logits, _ = self.forward(idx_cond)
            logits = logits[:, -1, :] / temperature
            
            # Top-k sampling
            if top_k is not None:
                v, _ = torch.topk(logits, min(top_k, logits.size(-1)))
                logits[logits &lt; v[:, [-1]]] = -float('Inf')
            
            # Sample
            probs = F.softmax(logits, dim=-1)
            next_token = torch.multinomial(probs, num_samples=1)
            
            # Append
            input_ids = torch.cat([input_ids, next_token], dim=1)
        
        return input_ids

# Training example
model = GPTModel(vocab_size=50257, d_model=768, num_heads=12, num_layers=12)
optimizer = torch.optim.AdamW(model.parameters(), lr=6e-4, betas=(0.9, 0.95))

def train_step(input_ids, targets):
    optimizer.zero_grad()
    logits, loss = model(input_ids, targets)
    loss.backward()
    torch.nn.utils.clip_grad_norm_(model.parameters(), 1.0)
    optimizer.step()
    return loss.item()
</code></pre>
<h3 id="vision-transformer-for-generation-vit-vqgan"><a class="header" href="#vision-transformer-for-generation-vit-vqgan">Vision Transformer for Generation (ViT-VQGAN)</a></h3>
<pre><code class="language-python">class VisionTransformerGenerator(nn.Module):
    def __init__(self, img_size=256, patch_size=16, embed_dim=768, num_heads=12, depth=12):
        super(VisionTransformerGenerator, self).__init__()
        
        self.patch_size = patch_size
        self.num_patches = (img_size // patch_size) ** 2
        
        # Patch embedding
        self.patch_embed = nn.Conv2d(3, embed_dim, kernel_size=patch_size, stride=patch_size)
        
        # Position embedding
        self.pos_embed = nn.Parameter(torch.zeros(1, self.num_patches, embed_dim))
        
        # Transformer blocks
        self.blocks = nn.ModuleList([
            TransformerBlock(embed_dim, num_heads, embed_dim * 4)
            for _ in range(depth)
        ])
        
        # Decoder
        self.decoder = nn.Sequential(
            nn.ConvTranspose2d(embed_dim, 512, 4, 2, 1),
            nn.ReLU(),
            nn.ConvTranspose2d(512, 256, 4, 2, 1),
            nn.ReLU(),
            nn.ConvTranspose2d(256, 128, 4, 2, 1),
            nn.ReLU(),
            nn.ConvTranspose2d(128, 64, 4, 2, 1),
            nn.ReLU(),
            nn.ConvTranspose2d(64, 3, 4, 2, 1),
            nn.Tanh()
        )
    
    def forward(self, x):
        # Patch embedding
        x = self.patch_embed(x)
        x = x.flatten(2).transpose(1, 2)
        
        # Add position embedding
        x = x + self.pos_embed
        
        # Transformer blocks
        for block in self.blocks:
            x = block(x)
        
        # Reshape for decoder
        b, n, c = x.shape
        h = w = int(math.sqrt(n))
        x = x.transpose(1, 2).reshape(b, c, h, w)
        
        # Decode
        x = self.decoder(x)
        
        return x
</code></pre>
<h2 id="diffusion-models-1"><a class="header" href="#diffusion-models-1">Diffusion Models</a></h2>
<h3 id="improved-ddpm"><a class="header" href="#improved-ddpm">Improved DDPM</a></h3>
<pre><code class="language-python">class ImprovedDDPM(nn.Module):
    def __init__(self, img_channels=3, base_channels=128, timesteps=1000):
        super(ImprovedDDPM, self).__init__()
        
        self.timesteps = timesteps
        
        # Variance schedule (cosine)
        self.betas = self._cosine_beta_schedule(timesteps)
        self.alphas = 1.0 - self.betas
        self.alphas_cumprod = torch.cumprod(self.alphas, dim=0)
        self.alphas_cumprod_prev = F.pad(self.alphas_cumprod[:-1], (1, 0), value=1.0)
        
        # U-Net architecture
        self.time_embed = nn.Sequential(
            nn.Linear(base_channels, base_channels * 4),
            nn.SiLU(),
            nn.Linear(base_channels * 4, base_channels * 4)
        )
        
        # Encoder
        self.down1 = self._make_down_block(img_channels, base_channels)
        self.down2 = self._make_down_block(base_channels, base_channels * 2)
        self.down3 = self._make_down_block(base_channels * 2, base_channels * 4)
        
        # Bottleneck
        self.mid = self._make_res_block(base_channels * 4)
        
        # Decoder
        self.up3 = self._make_up_block(base_channels * 4, base_channels * 2)
        self.up2 = self._make_up_block(base_channels * 2, base_channels)
        self.up1 = self._make_up_block(base_channels, img_channels)
    
    def _cosine_beta_schedule(self, timesteps, s=0.008):
        """Cosine schedule for betas"""
        steps = timesteps + 1
        x = torch.linspace(0, timesteps, steps)
        alphas_cumprod = torch.cos(((x / timesteps) + s) / (1 + s) * math.pi * 0.5) ** 2
        alphas_cumprod = alphas_cumprod / alphas_cumprod[0]
        betas = 1 - (alphas_cumprod[1:] / alphas_cumprod[:-1])
        return torch.clip(betas, 0.0001, 0.9999)
    
    def _make_down_block(self, in_channels, out_channels):
        return nn.Sequential(
            nn.Conv2d(in_channels, out_channels, 3, padding=1),
            nn.GroupNorm(8, out_channels),
            nn.SiLU(),
            nn.Conv2d(out_channels, out_channels, 3, padding=1),
            nn.GroupNorm(8, out_channels),
            nn.SiLU(),
            nn.MaxPool2d(2)
        )
    
    def _make_up_block(self, in_channels, out_channels):
        return nn.Sequential(
            nn.Upsample(scale_factor=2),
            nn.Conv2d(in_channels, out_channels, 3, padding=1),
            nn.GroupNorm(8, out_channels),
            nn.SiLU(),
            nn.Conv2d(out_channels, out_channels, 3, padding=1),
            nn.GroupNorm(8, out_channels),
            nn.SiLU()
        )
    
    def _make_res_block(self, channels):
        return nn.Sequential(
            nn.Conv2d(channels, channels, 3, padding=1),
            nn.GroupNorm(8, channels),
            nn.SiLU(),
            nn.Conv2d(channels, channels, 3, padding=1),
            nn.GroupNorm(8, channels),
            nn.SiLU()
        )
    
    def forward(self, x, t):
        """Predict noise"""
        # Time embedding
        t_emb = self._get_timestep_embedding(t, x.device)
        t_emb = self.time_embed(t_emb)
        
        # U-Net forward
        h1 = self.down1(x)
        h2 = self.down2(h1)
        h3 = self.down3(h2)
        
        h = self.mid(h3)
        
        h = self.up3(h + h3)
        h = self.up2(h + h2)
        h = self.up1(h + h1)
        
        return h
    
    def _get_timestep_embedding(self, timesteps, device, dim=128):
        """Sinusoidal positional embedding"""
        half_dim = dim // 2
        emb = math.log(10000) / (half_dim - 1)
        emb = torch.exp(torch.arange(half_dim, device=device) * -emb)
        emb = timesteps[:, None] * emb[None, :]
        emb = torch.cat([torch.sin(emb), torch.cos(emb)], dim=-1)
        return emb
    
    @torch.no_grad()
    def sample(self, batch_size, img_size, device):
        """DDPM sampling"""
        # Start from random noise
        img = torch.randn(batch_size, 3, img_size, img_size, device=device)
        
        for t in reversed(range(self.timesteps)):
            t_batch = torch.full((batch_size,), t, device=device, dtype=torch.long)
            
            # Predict noise
            predicted_noise = self.forward(img, t_batch)
            
            # Compute x_{t-1}
            alpha_t = self.alphas[t]
            alpha_cumprod_t = self.alphas_cumprod[t]
            beta_t = self.betas[t]
            
            if t &gt; 0:
                noise = torch.randn_like(img)
            else:
                noise = torch.zeros_like(img)
            
            img = (1 / alpha_t.sqrt()) * (img - ((1 - alpha_t) / (1 - alpha_cumprod_t).sqrt()) * predicted_noise)
            img = img + beta_t.sqrt() * noise
        
        return img
</code></pre>
<h3 id="latent-diffusion-models-stable-diffusion"><a class="header" href="#latent-diffusion-models-stable-diffusion">Latent Diffusion Models (Stable Diffusion)</a></h3>
<pre><code class="language-python">class LatentDiffusion(nn.Module):
    def __init__(self, vae, unet, text_encoder):
        super(LatentDiffusion, self).__init__()
        
        self.vae = vae  # VAE for encoding/decoding images
        self.unet = unet  # U-Net for denoising in latent space
        self.text_encoder = text_encoder  # CLIP text encoder
        
        self.timesteps = 1000
        self.betas = torch.linspace(0.0001, 0.02, self.timesteps)
        self.alphas = 1.0 - self.betas
        self.alphas_cumprod = torch.cumprod(self.alphas, dim=0)
    
    def forward(self, images, text_embeddings, t):
        """Training forward pass"""
        # Encode images to latent space
        with torch.no_grad():
            latents = self.vae.encode(images)
        
        # Add noise
        noise = torch.randn_like(latents)
        noisy_latents = self._add_noise(latents, noise, t)
        
        # Predict noise conditioned on text
        predicted_noise = self.unet(noisy_latents, t, text_embeddings)
        
        # Loss
        loss = F.mse_loss(predicted_noise, noise)
        
        return loss
    
    def _add_noise(self, latents, noise, t):
        """Add noise according to schedule"""
        sqrt_alpha_prod = self.alphas_cumprod[t] ** 0.5
        sqrt_one_minus_alpha_prod = (1 - self.alphas_cumprod[t]) ** 0.5
        
        return sqrt_alpha_prod * latents + sqrt_one_minus_alpha_prod * noise
    
    @torch.no_grad()
    def generate(self, text, batch_size=1, guidance_scale=7.5):
        """Text-to-image generation"""
        # Encode text
        text_embeddings = self.text_encoder(text)
        
        # Start from random noise in latent space
        latents = torch.randn(batch_size, 4, 64, 64)
        
        # Denoising loop
        for t in reversed(range(self.timesteps)):
            t_batch = torch.full((batch_size,), t)
            
            # Predict noise with and without conditioning (classifier-free guidance)
            noise_pred_text = self.unet(latents, t_batch, text_embeddings)
            noise_pred_uncond = self.unet(latents, t_batch, None)
            
            # Apply guidance
            noise_pred = noise_pred_uncond + guidance_scale * (noise_pred_text - noise_pred_uncond)
            
            # Update latents
            latents = self._denoise_step(latents, noise_pred, t)
        
        # Decode latents to images
        images = self.vae.decode(latents)
        
        return images
    
    def _denoise_step(self, latents, noise, t):
        """Single denoising step"""
        alpha_t = self.alphas[t]
        alpha_cumprod_t = self.alphas_cumprod[t]
        beta_t = self.betas[t]
        
        pred_original = (latents - ((1 - alpha_t) / (1 - alpha_cumprod_t).sqrt()) * noise) / alpha_t.sqrt()
        
        if t &gt; 0:
            noise = torch.randn_like(latents)
            latents = pred_original * alpha_t.sqrt() + (1 - alpha_t).sqrt() * noise
        else:
            latents = pred_original
        
        return latents
</code></pre>
<h2 id="vector-quantized-models"><a class="header" href="#vector-quantized-models">Vector Quantized Models</a></h2>
<h3 id="vq-vae"><a class="header" href="#vq-vae">VQ-VAE</a></h3>
<pre><code class="language-python">class VectorQuantizer(nn.Module):
    def __init__(self, num_embeddings, embedding_dim, commitment_cost=0.25):
        super(VectorQuantizer, self).__init__()
        
        self.embedding_dim = embedding_dim
        self.num_embeddings = num_embeddings
        self.commitment_cost = commitment_cost
        
        self.embeddings = nn.Embedding(num_embeddings, embedding_dim)
        self.embeddings.weight.data.uniform_(-1/num_embeddings, 1/num_embeddings)
    
    def forward(self, inputs):
        # Flatten input
        flat_input = inputs.view(-1, self.embedding_dim)
        
        # Calculate distances
        distances = (torch.sum(flat_input**2, dim=1, keepdim=True)
                    + torch.sum(self.embeddings.weight**2, dim=1)
                    - 2 * torch.matmul(flat_input, self.embeddings.weight.t()))
        
        # Get closest embeddings
        encoding_indices = torch.argmin(distances, dim=1).unsqueeze(1)
        encodings = torch.zeros(encoding_indices.shape[0], self.num_embeddings, device=inputs.device)
        encodings.scatter_(1, encoding_indices, 1)
        
        # Quantize
        quantized = torch.matmul(encodings, self.embeddings.weight)
        quantized = quantized.view_as(inputs)
        
        # Loss
        e_latent_loss = F.mse_loss(quantized.detach(), inputs)
        q_latent_loss = F.mse_loss(quantized, inputs.detach())
        loss = q_latent_loss + self.commitment_cost * e_latent_loss
        
        # Straight-through estimator
        quantized = inputs + (quantized - inputs).detach()
        
        return quantized, loss, encoding_indices

class VQVAE(nn.Module):
    def __init__(self, num_embeddings=512, embedding_dim=64):
        super(VQVAE, self).__init__()
        
        # Encoder
        self.encoder = nn.Sequential(
            nn.Conv2d(3, 64, 4, 2, 1),
            nn.ReLU(),
            nn.Conv2d(64, 128, 4, 2, 1),
            nn.ReLU(),
            nn.Conv2d(128, embedding_dim, 3, 1, 1)
        )
        
        # Vector quantizer
        self.vq = VectorQuantizer(num_embeddings, embedding_dim)
        
        # Decoder
        self.decoder = nn.Sequential(
            nn.ConvTranspose2d(embedding_dim, 128, 3, 1, 1),
            nn.ReLU(),
            nn.ConvTranspose2d(128, 64, 4, 2, 1),
            nn.ReLU(),
            nn.ConvTranspose2d(64, 3, 4, 2, 1),
            nn.Tanh()
        )
    
    def forward(self, x):
        z = self.encoder(x)
        quantized, vq_loss, _ = self.vq(z)
        recon = self.decoder(quantized)
        
        recon_loss = F.mse_loss(recon, x)
        
        return recon, recon_loss + vq_loss
</code></pre>
<h2 id="nerf-and-3d-generation"><a class="header" href="#nerf-and-3d-generation">NeRF and 3D Generation</a></h2>
<h3 id="neural-radiance-fields"><a class="header" href="#neural-radiance-fields">Neural Radiance Fields</a></h3>
<pre><code class="language-python">class NeRF(nn.Module):
    def __init__(self, pos_dim=3, dir_dim=3, hidden_dim=256):
        super(NeRF, self).__init__()
        
        # Position encoding
        self.pos_encoder = self._positional_encoding
        self.dir_encoder = self._positional_encoding
        
        # MLP for density and features
        self.density_net = nn.Sequential(
            nn.Linear(pos_dim * 2 * 10, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim),
            nn.ReLU(),
            nn.Linear(hidden_dim, hidden_dim + 1)  # density + features
        )
        
        # MLP for color
        self.color_net = nn.Sequential(
            nn.Linear(hidden_dim + dir_dim * 2 * 4, hidden_dim // 2),
            nn.ReLU(),
            nn.Linear(hidden_dim // 2, 3),
            nn.Sigmoid()
        )
    
    def _positional_encoding(self, x, L=10):
        """Positional encoding for coordinates"""
        encoding = []
        for l in range(L):
            encoding.append(torch.sin(2**l * math.pi * x))
            encoding.append(torch.cos(2**l * math.pi * x))
        return torch.cat(encoding, dim=-1)
    
    def forward(self, positions, directions):
        # Encode positions and directions
        pos_enc = self.pos_encoder(positions)
        dir_enc = self.dir_encoder(directions)
        
        # Get density and features
        density_features = self.density_net(pos_enc)
        density = F.relu(density_features[:, :1])
        features = density_features[:, 1:]
        
        # Get color
        color_input = torch.cat([features, dir_enc], dim=-1)
        color = self.color_net(color_input)
        
        return density, color
    
    def render_rays(self, ray_origins, ray_directions, near=2.0, far=6.0, n_samples=64):
        """Volume rendering along rays"""
        # Sample points along rays
        t_vals = torch.linspace(near, far, n_samples, device=ray_origins.device)
        points = ray_origins[:, None, :] + ray_directions[:, None, :] * t_vals[None, :, None]
        
        # Flatten for network
        points_flat = points.reshape(-1, 3)
        dirs_flat = ray_directions[:, None, :].expand_as(points).reshape(-1, 3)
        
        # Get density and color
        density, color = self.forward(points_flat, dirs_flat)
        
        # Reshape
        density = density.reshape(points.shape[0], n_samples)
        color = color.reshape(points.shape[0], n_samples, 3)
        
        # Volume rendering
        dists = t_vals[1:] - t_vals[:-1]
        dists = torch.cat([dists, torch.tensor([1e10], device=dists.device)])
        
        alpha = 1.0 - torch.exp(-density * dists)
        transmittance = torch.cumprod(1.0 - alpha + 1e-10, dim=-1)
        transmittance = torch.cat([torch.ones_like(transmittance[:, :1]), transmittance[:, :-1]], dim=-1)
        
        weights = alpha * transmittance
        rgb = torch.sum(weights[:, :, None] * color, dim=1)
        
        return rgb
</code></pre>
<h2 id="multimodal-generative-models"><a class="header" href="#multimodal-generative-models">Multimodal Generative Models</a></h2>
<h3 id="clip-guided-generation"><a class="header" href="#clip-guided-generation">CLIP-guided Generation</a></h3>
<pre><code class="language-python">class CLIPGuidedGenerator:
    def __init__(self, generator, clip_model):
        self.generator = generator
        self.clip_model = clip_model
    
    def generate(self, text_prompt, num_steps=100, lr=0.1):
        """Generate image guided by CLIP text embedding"""
        # Encode text
        with torch.no_grad():
            text_features = self.clip_model.encode_text(text_prompt)
        
        # Start with random latent
        latent = torch.randn(1, 512, requires_grad=True)
        optimizer = torch.optim.Adam([latent], lr=lr)
        
        for step in range(num_steps):
            optimizer.zero_grad()
            
            # Generate image
            image = self.generator(latent)
            
            # Encode image with CLIP
            image_features = self.clip_model.encode_image(image)
            
            # CLIP loss (maximize similarity)
            loss = -torch.cosine_similarity(text_features, image_features).mean()
            
            loss.backward()
            optimizer.step()
            
            if step % 10 == 0:
                print(f"Step {step}, Loss: {loss.item():.4f}")
        
        # Generate final image
        with torch.no_grad():
            final_image = self.generator(latent)
        
        return final_image
</code></pre>
<h2 id="practical-tips-6"><a class="header" href="#practical-tips-6">Practical Tips</a></h2>
<ol>
<li><strong>Model Size</strong>: Start small, scale up gradually</li>
<li><strong>Training Stability</strong>: Use gradient clipping, EMA</li>
<li><strong>Quality Metrics</strong>: FID, IS, LPIPS for evaluation</li>
<li><strong>Computational Efficiency</strong>: Use mixed precision, model parallelism</li>
<li><strong>Fine-tuning</strong>: Transfer from pre-trained models</li>
</ol>
<h2 id="resources-10"><a class="header" href="#resources-10">Resources</a></h2>
<ul>
<li>Stable Diffusion: https://github.com/CompVis/stable-diffusion</li>
<li>DALL-E 2 paper: https://arxiv.org/abs/2204.06125</li>
<li>Imagen paper: https://arxiv.org/abs/2205.11487</li>
<li>NeRF: https://www.matthewtancik.com/nerf</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transfer-learning"><a class="header" href="#transfer-learning">Transfer Learning</a></h1>
<p>Transfer learning leverages knowledge from pre-trained models to solve new tasks with limited data.</p>
<h2 id="table-of-contents-13"><a class="header" href="#table-of-contents-13">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/transfer_learning.html#introduction">Introduction</a></li>
<li><a href="machine_learning/transfer_learning.html#pre-training-strategies">Pre-training Strategies</a></li>
<li><a href="machine_learning/transfer_learning.html#fine-tuning-techniques">Fine-tuning Techniques</a></li>
<li><a href="machine_learning/transfer_learning.html#domain-adaptation">Domain Adaptation</a></li>
<li><a href="machine_learning/transfer_learning.html#few-shot-learning">Few-Shot Learning</a></li>
<li><a href="machine_learning/transfer_learning.html#model-distillation">Model Distillation</a></li>
</ol>
<h2 id="introduction-1"><a class="header" href="#introduction-1">Introduction</a></h2>
<p><strong>Key Concepts:</strong></p>
<ul>
<li><strong>Pre-training</strong>: Training on large dataset for general features</li>
<li><strong>Fine-tuning</strong>: Adapting pre-trained model to specific task</li>
<li><strong>Feature Extraction</strong>: Using pre-trained model as fixed feature extractor</li>
<li><strong>Domain Shift</strong>: Difference between source and target distributions</li>
</ul>
<p><strong>When to Use Transfer Learning:</strong></p>
<ul>
<li>Limited target data</li>
<li>Similar source and target tasks</li>
<li>Computational constraints</li>
<li>Need for faster convergence</li>
</ul>
<h2 id="pre-training-strategies"><a class="header" href="#pre-training-strategies">Pre-training Strategies</a></h2>
<h3 id="self-supervised-pre-training"><a class="header" href="#self-supervised-pre-training">Self-Supervised Pre-training</a></h3>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
import torchvision.models as models
import torchvision.transforms as transforms

# Contrastive Learning (SimCLR)
class SimCLR(nn.Module):
    def __init__(self, base_encoder, projection_dim=128):
        super(SimCLR, self).__init__()
        
        self.encoder = base_encoder
        
        # Remove classification head
        self.encoder.fc = nn.Identity()
        
        # Projection head
        self.projection = nn.Sequential(
            nn.Linear(512, 512),
            nn.ReLU(),
            nn.Linear(512, projection_dim)
        )
    
    def forward(self, x):
        h = self.encoder(x)
        z = self.projection(h)
        return F.normalize(z, dim=1)

def contrastive_loss(z_i, z_j, temperature=0.5):
    """NT-Xent loss for contrastive learning"""
    batch_size = z_i.shape[0]
    
    # Concatenate representations
    z = torch.cat([z_i, z_j], dim=0)
    
    # Compute similarity matrix
    similarity_matrix = torch.matmul(z, z.T) / temperature
    
    # Create labels
    labels = torch.arange(batch_size, device=z.device)
    labels = torch.cat([labels + batch_size, labels])
    
    # Mask out self-similarity
    mask = torch.eye(2 * batch_size, device=z.device).bool()
    similarity_matrix = similarity_matrix.masked_fill(mask, -float('inf'))
    
    # Compute loss
    loss = F.cross_entropy(similarity_matrix, labels)
    
    return loss

# Training SimCLR
def train_simclr(model, train_loader, num_epochs=100):
    optimizer = optim.Adam(model.parameters(), lr=0.001)
    
    for epoch in range(num_epochs):
        total_loss = 0
        
        for (x1, x2), _ in train_loader:  # x1, x2 are augmented views
            optimizer.zero_grad()
            
            # Get representations
            z1 = model(x1)
            z2 = model(x2)
            
            # Compute loss
            loss = contrastive_loss(z1, z2)
            
            loss.backward()
            optimizer.step()
            
            total_loss += loss.item()
        
        print(f"Epoch {epoch+1}, Loss: {total_loss/len(train_loader):.4f}")
    
    return model

# Create augmented pairs
class ContrastiveTransform:
    def __init__(self):
        self.transform = transforms.Compose([
            transforms.RandomResizedCrop(224),
            transforms.RandomHorizontalFlip(),
            transforms.ColorJitter(0.4, 0.4, 0.4, 0.1),
            transforms.RandomGrayscale(p=0.2),
            transforms.ToTensor(),
            transforms.Normalize([0.485, 0.456, 0.406], [0.229, 0.224, 0.225])
        ])
    
    def __call__(self, x):
        return self.transform(x), self.transform(x)
</code></pre>
<h3 id="masked-language-modeling-bert-style"><a class="header" href="#masked-language-modeling-bert-style">Masked Language Modeling (BERT-style)</a></h3>
<pre><code class="language-python">class MaskedLanguageModel(nn.Module):
    def __init__(self, vocab_size, d_model=768, num_heads=12, num_layers=12):
        super(MaskedLanguageModel, self).__init__()
        
        self.embedding = nn.Embedding(vocab_size, d_model)
        self.position_embedding = nn.Embedding(512, d_model)
        
        encoder_layer = nn.TransformerEncoderLayer(d_model, num_heads, dim_feedforward=3072)
        self.transformer = nn.TransformerEncoder(encoder_layer, num_layers)
        
        self.lm_head = nn.Linear(d_model, vocab_size)
    
    def forward(self, input_ids, attention_mask=None):
        # Embeddings
        seq_length = input_ids.size(1)
        position_ids = torch.arange(seq_length, device=input_ids.device).unsqueeze(0)
        
        embeddings = self.embedding(input_ids) + self.position_embedding(position_ids)
        
        # Transformer
        hidden_states = self.transformer(embeddings.transpose(0, 1)).transpose(0, 1)
        
        # Prediction
        logits = self.lm_head(hidden_states)
        
        return logits

def mask_tokens(inputs, tokenizer, mlm_probability=0.15):
    """Prepare masked tokens for MLM"""
    labels = inputs.clone()
    
    # Create random mask
    probability_matrix = torch.full(labels.shape, mlm_probability)
    masked_indices = torch.bernoulli(probability_matrix).bool()
    
    # Only mask non-special tokens
    special_tokens_mask = tokenizer.get_special_tokens_mask(
        labels.tolist(), already_has_special_tokens=True
    )
    probability_matrix.masked_fill_(torch.tensor(special_tokens_mask, dtype=torch.bool), value=0.0)
    masked_indices = torch.bernoulli(probability_matrix).bool()
    
    # Set labels for non-masked tokens to -100
    labels[~masked_indices] = -100
    
    # Replace masked tokens
    # 80% [MASK], 10% random, 10% original
    indices_replaced = torch.bernoulli(torch.full(labels.shape, 0.8)).bool() &amp; masked_indices
    inputs[indices_replaced] = tokenizer.mask_token_id
    
    indices_random = torch.bernoulli(torch.full(labels.shape, 0.5)).bool() &amp; masked_indices &amp; ~indices_replaced
    random_words = torch.randint(len(tokenizer), labels.shape, dtype=torch.long)
    inputs[indices_random] = random_words[indices_random]
    
    return inputs, labels

# Training loop
def train_mlm(model, train_loader, tokenizer, num_epochs=10):
    optimizer = optim.Adam(model.parameters(), lr=5e-5)
    criterion = nn.CrossEntropyLoss(ignore_index=-100)
    
    for epoch in range(num_epochs):
        total_loss = 0
        
        for batch in train_loader:
            input_ids = batch['input_ids']
            
            # Mask tokens
            masked_inputs, labels = mask_tokens(input_ids, tokenizer)
            
            # Forward pass
            logits = model(masked_inputs)
            
            # Compute loss
            loss = criterion(logits.view(-1, logits.size(-1)), labels.view(-1))
            
            # Backward pass
            optimizer.zero_grad()
            loss.backward()
            optimizer.step()
            
            total_loss += loss.item()
        
        print(f"Epoch {epoch+1}, Loss: {total_loss/len(train_loader):.4f}")
</code></pre>
<h2 id="fine-tuning-techniques"><a class="header" href="#fine-tuning-techniques">Fine-tuning Techniques</a></h2>
<h3 id="standard-fine-tuning"><a class="header" href="#standard-fine-tuning">Standard Fine-tuning</a></h3>
<pre><code class="language-python">def fine_tune_model(pretrained_model, train_loader, val_loader, num_classes, num_epochs=10):
    """Fine-tune pre-trained model on new task"""
    
    # Load pre-trained model
    model = models.resnet50(pretrained=True)
    
    # Replace classification head
    num_features = model.fc.in_features
    model.fc = nn.Linear(num_features, num_classes)
    
    # Optimizer with different learning rates
    params = [
        {'params': model.fc.parameters(), 'lr': 1e-3},  # New layer: higher LR
        {'params': [p for n, p in model.named_parameters() if 'fc' not in n], 
         'lr': 1e-4}  # Pre-trained layers: lower LR
    ]
    optimizer = optim.Adam(params)
    criterion = nn.CrossEntropyLoss()
    
    # Training loop
    best_val_acc = 0
    for epoch in range(num_epochs):
        # Training
        model.train()
        train_loss = 0
        
        for images, labels in train_loader:
            optimizer.zero_grad()
            outputs = model(images)
            loss = criterion(outputs, labels)
            loss.backward()
            optimizer.step()
            train_loss += loss.item()
        
        # Validation
        model.eval()
        correct = 0
        total = 0
        
        with torch.no_grad():
            for images, labels in val_loader:
                outputs = model(images)
                _, predicted = torch.max(outputs, 1)
                total += labels.size(0)
                correct += (predicted == labels).sum().item()
        
        val_acc = 100 * correct / total
        print(f"Epoch {epoch+1}, Train Loss: {train_loss/len(train_loader):.4f}, "
              f"Val Acc: {val_acc:.2f}%")
        
        # Save best model
        if val_acc &gt; best_val_acc:
            best_val_acc = val_acc
            torch.save(model.state_dict(), 'best_model.pth')
    
    return model
</code></pre>
<h3 id="progressive-unfreezing"><a class="header" href="#progressive-unfreezing">Progressive Unfreezing</a></h3>
<pre><code class="language-python">def progressive_unfreezing(model, train_loader, num_epochs=20, unfreeze_every=5):
    """Gradually unfreeze layers during fine-tuning"""
    
    # Initially freeze all layers
    for param in model.parameters():
        param.requires_grad = False
    
    # Only train classification head
    for param in model.fc.parameters():
        param.requires_grad = True
    
    optimizer = optim.Adam(filter(lambda p: p.requires_grad, model.parameters()), lr=1e-3)
    criterion = nn.CrossEntropyLoss()
    
    # Get layer groups (from top to bottom)
    layer_groups = [
        model.fc,
        model.layer4,
        model.layer3,
        model.layer2,
        model.layer1
    ]
    
    for epoch in range(num_epochs):
        # Unfreeze next layer group
        if epoch % unfreeze_every == 0 and epoch &gt; 0:
            group_idx = min(epoch // unfreeze_every, len(layer_groups) - 1)
            print(f"Unfreezing layer group {group_idx}")
            
            for param in layer_groups[group_idx].parameters():
                param.requires_grad = True
            
            # Update optimizer
            optimizer = optim.Adam(filter(lambda p: p.requires_grad, model.parameters()), 
                                 lr=1e-3 / (2 ** group_idx))
        
        # Training
        model.train()
        for images, labels in train_loader:
            optimizer.zero_grad()
            outputs = model(images)
            loss = criterion(outputs, labels)
            loss.backward()
            optimizer.step()
</code></pre>
<h3 id="discriminative-learning-rates"><a class="header" href="#discriminative-learning-rates">Discriminative Learning Rates</a></h3>
<pre><code class="language-python">def get_discriminative_lr_params(model, base_lr=1e-3, lr_mult=2.6):
    """Different learning rates for different layers"""
    
    params = []
    
    # Get all layer names
    layer_names = [name for name, _ in model.named_parameters()]
    
    # Group layers
    num_layers = len(layer_names)
    
    for idx, (name, param) in enumerate(model.named_parameters()):
        # Exponentially decreasing learning rate from top to bottom
        layer_lr = base_lr * (lr_mult ** (num_layers - idx - 1))
        params.append({'params': param, 'lr': layer_lr})
    
    return params

# Usage
model = models.resnet50(pretrained=True)
params = get_discriminative_lr_params(model)
optimizer = optim.Adam(params)
</code></pre>
<h3 id="adapter-layers"><a class="header" href="#adapter-layers">Adapter Layers</a></h3>
<pre><code class="language-python">class AdapterLayer(nn.Module):
    """Lightweight adapter for efficient fine-tuning"""
    def __init__(self, input_dim, bottleneck_dim=64):
        super(AdapterLayer, self).__init__()
        
        self.down_project = nn.Linear(input_dim, bottleneck_dim)
        self.up_project = nn.Linear(bottleneck_dim, input_dim)
        self.activation = nn.ReLU()
    
    def forward(self, x):
        residual = x
        x = self.down_project(x)
        x = self.activation(x)
        x = self.up_project(x)
        return x + residual

class ModelWithAdapters(nn.Module):
    """Add adapters to pre-trained model"""
    def __init__(self, base_model, adapter_dim=64):
        super(ModelWithAdapters, self).__init__()
        
        self.base_model = base_model
        
        # Freeze base model
        for param in base_model.parameters():
            param.requires_grad = False
        
        # Add adapters after each transformer block
        self.adapters = nn.ModuleList([
            AdapterLayer(768, adapter_dim)  # Assuming 768 hidden dim
            for _ in range(12)  # For each layer
        ])
    
    def forward(self, x):
        # Forward through base model with adapters
        for i, (layer, adapter) in enumerate(zip(self.base_model.layers, self.adapters)):
            x = layer(x)
            x = adapter(x)
        
        return x
</code></pre>
<h3 id="lora-low-rank-adaptation"><a class="header" href="#lora-low-rank-adaptation">LoRA (Low-Rank Adaptation)</a></h3>
<pre><code class="language-python">class LoRALayer(nn.Module):
    """Low-Rank Adaptation layer"""
    def __init__(self, input_dim, output_dim, rank=4, alpha=1):
        super(LoRALayer, self).__init__()
        
        self.rank = rank
        self.alpha = alpha
        
        # Low-rank matrices
        self.lora_A = nn.Parameter(torch.randn(input_dim, rank) * 0.01)
        self.lora_B = nn.Parameter(torch.zeros(rank, output_dim))
        
        self.scaling = alpha / rank
    
    def forward(self, x):
        # Low-rank update: x @ A @ B
        return (x @ self.lora_A @ self.lora_B) * self.scaling

class LinearWithLoRA(nn.Module):
    """Linear layer with LoRA adaptation"""
    def __init__(self, linear_layer, rank=4):
        super(LinearWithLoRA, self).__init__()
        
        self.linear = linear_layer
        
        # Freeze original weights
        self.linear.weight.requires_grad = False
        if self.linear.bias is not None:
            self.linear.bias.requires_grad = False
        
        # Add LoRA
        self.lora = LoRALayer(
            self.linear.in_features,
            self.linear.out_features,
            rank=rank
        )
    
    def forward(self, x):
        return self.linear(x) + self.lora(x)

def add_lora_to_model(model, rank=4):
    """Add LoRA to all linear layers"""
    for name, module in model.named_modules():
        if isinstance(module, nn.Linear):
            parent_name = '.'.join(name.split('.')[:-1])
            child_name = name.split('.')[-1]
            
            parent = dict(model.named_modules())[parent_name] if parent_name else model
            setattr(parent, child_name, LinearWithLoRA(module, rank))
    
    return model
</code></pre>
<h2 id="domain-adaptation"><a class="header" href="#domain-adaptation">Domain Adaptation</a></h2>
<h3 id="domain-adversarial-neural-network-dann"><a class="header" href="#domain-adversarial-neural-network-dann">Domain Adversarial Neural Network (DANN)</a></h3>
<pre><code class="language-python">class GradientReversalLayer(torch.autograd.Function):
    """Gradient reversal layer for domain adaptation"""
    @staticmethod
    def forward(ctx, x, alpha):
        ctx.alpha = alpha
        return x.view_as(x)
    
    @staticmethod
    def backward(ctx, grad_output):
        return -ctx.alpha * grad_output, None

class DomainAdversarialNetwork(nn.Module):
    def __init__(self, feature_extractor, num_classes, num_domains=2):
        super(DomainAdversarialNetwork, self).__init__()
        
        self.feature_extractor = feature_extractor
        
        # Label classifier
        self.label_classifier = nn.Sequential(
            nn.Linear(512, 256),
            nn.ReLU(),
            nn.Dropout(0.5),
            nn.Linear(256, num_classes)
        )
        
        # Domain classifier
        self.domain_classifier = nn.Sequential(
            nn.Linear(512, 256),
            nn.ReLU(),
            nn.Dropout(0.5),
            nn.Linear(256, num_domains)
        )
    
    def forward(self, x, alpha=1.0):
        # Extract features
        features = self.feature_extractor(x)
        
        # Label prediction
        label_pred = self.label_classifier(features)
        
        # Domain prediction with gradient reversal
        reversed_features = GradientReversalLayer.apply(features, alpha)
        domain_pred = self.domain_classifier(reversed_features)
        
        return label_pred, domain_pred

def train_dann(model, source_loader, target_loader, num_epochs=50):
    """Train DANN for domain adaptation"""
    optimizer = optim.Adam(model.parameters(), lr=0.001)
    label_criterion = nn.CrossEntropyLoss()
    domain_criterion = nn.CrossEntropyLoss()
    
    for epoch in range(num_epochs):
        model.train()
        
        for (source_data, source_labels), (target_data, _) in zip(source_loader, target_loader):
            batch_size = source_data.size(0)
            
            # Compute alpha for gradient reversal
            p = float(epoch) / num_epochs
            alpha = 2. / (1. + np.exp(-10 * p)) - 1
            
            # Source domain
            source_label_pred, source_domain_pred = model(source_data, alpha)
            source_label_loss = label_criterion(source_label_pred, source_labels)
            source_domain_loss = domain_criterion(
                source_domain_pred,
                torch.zeros(batch_size, dtype=torch.long)
            )
            
            # Target domain
            _, target_domain_pred = model(target_data, alpha)
            target_domain_loss = domain_criterion(
                target_domain_pred,
                torch.ones(target_data.size(0), dtype=torch.long)
            )
            
            # Total loss
            loss = source_label_loss + source_domain_loss + target_domain_loss
            
            optimizer.zero_grad()
            loss.backward()
            optimizer.step()
        
        print(f"Epoch {epoch+1}, Loss: {loss.item():.4f}")
</code></pre>
<h3 id="maximum-mean-discrepancy-mmd"><a class="header" href="#maximum-mean-discrepancy-mmd">Maximum Mean Discrepancy (MMD)</a></h3>
<pre><code class="language-python">def mmd_loss(source_features, target_features, kernel='rbf', gamma=1.0):
    """Compute MMD between source and target distributions"""
    
    def gaussian_kernel(x, y, gamma):
        """RBF kernel"""
        x_size = x.size(0)
        y_size = y.size(0)
        dim = x.size(1)
        
        x = x.unsqueeze(1)  # (x_size, 1, dim)
        y = y.unsqueeze(0)  # (1, y_size, dim)
        
        tiled_x = x.expand(x_size, y_size, dim)
        tiled_y = y.expand(x_size, y_size, dim)
        
        kernel_input = (tiled_x - tiled_y).pow(2).sum(2)
        return torch.exp(-gamma * kernel_input)
    
    # Compute kernels
    xx = gaussian_kernel(source_features, source_features, gamma).mean()
    yy = gaussian_kernel(target_features, target_features, gamma).mean()
    xy = gaussian_kernel(source_features, target_features, gamma).mean()
    
    # MMD
    return xx + yy - 2 * xy

class MMDDomainAdaptation(nn.Module):
    def __init__(self, feature_extractor, num_classes):
        super(MMDDomainAdaptation, self).__init__()
        self.feature_extractor = feature_extractor
        self.classifier = nn.Linear(512, num_classes)
    
    def forward(self, x):
        features = self.feature_extractor(x)
        output = self.classifier(features)
        return output, features

def train_mmd(model, source_loader, target_loader, num_epochs=50, lambda_mmd=0.1):
    """Train with MMD for domain adaptation"""
    optimizer = optim.Adam(model.parameters(), lr=0.001)
    criterion = nn.CrossEntropyLoss()
    
    for epoch in range(num_epochs):
        for (source_data, source_labels), (target_data, _) in zip(source_loader, target_loader):
            optimizer.zero_grad()
            
            # Forward pass
            source_pred, source_features = model(source_data)
            _, target_features = model(target_data)
            
            # Classification loss
            class_loss = criterion(source_pred, source_labels)
            
            # MMD loss
            mmd = mmd_loss(source_features, target_features)
            
            # Total loss
            loss = class_loss + lambda_mmd * mmd
            
            loss.backward()
            optimizer.step()
</code></pre>
<h2 id="few-shot-learning"><a class="header" href="#few-shot-learning">Few-Shot Learning</a></h2>
<h3 id="prototypical-networks"><a class="header" href="#prototypical-networks">Prototypical Networks</a></h3>
<pre><code class="language-python">class PrototypicalNetwork(nn.Module):
    def __init__(self, encoder):
        super(PrototypicalNetwork, self).__init__()
        self.encoder = encoder
    
    def forward(self, support_set, support_labels, query_set, n_way, k_shot):
        """
        support_set: (n_way * k_shot, C, H, W)
        query_set: (n_query, C, H, W)
        """
        # Encode support and query sets
        support_embeddings = self.encoder(support_set)
        query_embeddings = self.encoder(query_set)
        
        # Compute prototypes (class centroids)
        prototypes = []
        for c in range(n_way):
            class_embeddings = support_embeddings[c * k_shot:(c + 1) * k_shot]
            prototype = class_embeddings.mean(dim=0)
            prototypes.append(prototype)
        
        prototypes = torch.stack(prototypes)
        
        # Compute distances
        distances = torch.cdist(query_embeddings, prototypes)
        
        # Convert to probabilities
        log_p_y = F.log_softmax(-distances, dim=1)
        
        return log_p_y

def train_prototypical(model, train_loader, num_episodes=1000, n_way=5, k_shot=5):
    """Train prototypical network"""
    optimizer = optim.Adam(model.parameters(), lr=0.001)
    
    for episode in range(num_episodes):
        # Sample episode
        support_set, support_labels, query_set, query_labels = train_loader.sample_episode(n_way, k_shot)
        
        # Forward pass
        log_p_y = model(support_set, support_labels, query_set, n_way, k_shot)
        
        # Loss
        loss = F.nll_loss(log_p_y, query_labels)
        
        # Backward pass
        optimizer.zero_grad()
        loss.backward()
        optimizer.step()
        
        if episode % 100 == 0:
            print(f"Episode {episode}, Loss: {loss.item():.4f}")
</code></pre>
<h3 id="maml-model-agnostic-meta-learning"><a class="header" href="#maml-model-agnostic-meta-learning">MAML (Model-Agnostic Meta-Learning)</a></h3>
<pre><code class="language-python">class MAML:
    def __init__(self, model, inner_lr=0.01, outer_lr=0.001):
        self.model = model
        self.inner_lr = inner_lr
        self.outer_optimizer = optim.Adam(model.parameters(), lr=outer_lr)
    
    def inner_update(self, support_x, support_y, num_steps=5):
        """Adapt model on support set"""
        # Clone model for inner loop
        adapted_params = {name: param.clone() for name, param in self.model.named_parameters()}
        
        for step in range(num_steps):
            # Forward pass with adapted parameters
            logits = self.model(support_x)
            loss = F.cross_entropy(logits, support_y)
            
            # Compute gradients
            grads = torch.autograd.grad(loss, adapted_params.values(), create_graph=True)
            
            # Update adapted parameters
            adapted_params = {
                name: param - self.inner_lr * grad
                for (name, param), grad in zip(adapted_params.items(), grads)
            }
        
        return adapted_params
    
    def meta_update(self, tasks):
        """Meta-update on batch of tasks"""
        self.outer_optimizer.zero_grad()
        
        meta_loss = 0
        
        for support_x, support_y, query_x, query_y in tasks:
            # Inner loop: adapt to task
            adapted_params = self.inner_update(support_x, support_y)
            
            # Outer loop: evaluate on query set
            with torch.set_grad_enabled(True):
                query_logits = self.model.forward_with_params(query_x, adapted_params)
                task_loss = F.cross_entropy(query_logits, query_y)
                meta_loss += task_loss
        
        # Meta-gradient step
        meta_loss /= len(tasks)
        meta_loss.backward()
        self.outer_optimizer.step()
        
        return meta_loss.item()
</code></pre>
<h2 id="model-distillation"><a class="header" href="#model-distillation">Model Distillation</a></h2>
<p>Knowledge distillation transfers knowledge from large teacher to small student.</p>
<pre><code class="language-python">class DistillationTrainer:
    def __init__(self, teacher_model, student_model, temperature=3.0, alpha=0.5):
        self.teacher = teacher_model
        self.student = student_model
        self.temperature = temperature
        self.alpha = alpha
        
        # Freeze teacher
        for param in self.teacher.parameters():
            param.requires_grad = False
        
        self.teacher.eval()
    
    def distillation_loss(self, student_logits, teacher_logits, labels):
        """Compute distillation loss"""
        # Hard loss (student vs true labels)
        hard_loss = F.cross_entropy(student_logits, labels)
        
        # Soft loss (student vs teacher)
        soft_student = F.log_softmax(student_logits / self.temperature, dim=1)
        soft_teacher = F.softmax(teacher_logits / self.temperature, dim=1)
        soft_loss = F.kl_div(soft_student, soft_teacher, reduction='batchmean')
        soft_loss *= self.temperature ** 2
        
        # Combined loss
        loss = self.alpha * hard_loss + (1 - self.alpha) * soft_loss
        
        return loss
    
    def train(self, train_loader, num_epochs=10):
        """Train student with distillation"""
        optimizer = optim.Adam(self.student.parameters(), lr=0.001)
        
        for epoch in range(num_epochs):
            self.student.train()
            total_loss = 0
            
            for images, labels in train_loader:
                # Teacher predictions
                with torch.no_grad():
                    teacher_logits = self.teacher(images)
                
                # Student predictions
                student_logits = self.student(images)
                
                # Distillation loss
                loss = self.distillation_loss(student_logits, teacher_logits, labels)
                
                # Backward pass
                optimizer.zero_grad()
                loss.backward()
                optimizer.step()
                
                total_loss += loss.item()
            
            print(f"Epoch {epoch+1}, Loss: {total_loss/len(train_loader):.4f}")

# Example usage
teacher = models.resnet50(pretrained=True)
student = models.resnet18(pretrained=False)

trainer = DistillationTrainer(teacher, student, temperature=3.0, alpha=0.5)
# trainer.train(train_loader, num_epochs=10)
</code></pre>
<h2 id="practical-tips-7"><a class="header" href="#practical-tips-7">Practical Tips</a></h2>
<ol>
<li><strong>Start with Pre-trained Models</strong>: Use ImageNet, BERT, GPT weights</li>
<li><strong>Learning Rate</strong>: Use smaller LR for pre-trained layers</li>
<li><strong>Gradual Unfreezing</strong>: Unfreeze layers progressively</li>
<li><strong>Data Augmentation</strong>: Critical when fine-tuning with limited data</li>
<li><strong>Early Stopping</strong>: Monitor validation to prevent overfitting</li>
<li><strong>Adapter Methods</strong>: More efficient than full fine-tuning</li>
</ol>
<h2 id="resources-11"><a class="header" href="#resources-11">Resources</a></h2>
<ul>
<li>Hugging Face Transformers: https://huggingface.co/transformers/</li>
<li>timm (PyTorch Image Models): https://github.com/rwightman/pytorch-image-models</li>
<li>"Transfer Learning" book by Tan et al.</li>
<li>Papers with Code Transfer Learning: https://paperswithcode.com/task/transfer-learning</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transformers-1"><a class="header" href="#transformers-1">Transformers</a></h1>
<p>Transformers are a type of deep learning model introduced in the paper "Attention is All You Need" by Vaswani et al. in 2017. They have revolutionized the field of natural language processing (NLP) and have been widely adopted in various applications, including machine translation, text summarization, and sentiment analysis.</p>
<h2 id="key-concepts-14"><a class="header" href="#key-concepts-14">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Attention Mechanism</strong>: The core innovation of transformers is the self-attention mechanism, which allows the model to weigh the importance of different words in a sentence when making predictions. This enables the model to capture long-range dependencies and relationships between words more effectively than previous architectures like RNNs and LSTMs.</p>
</li>
<li>
<p><strong>Encoder-Decoder Architecture</strong>: The transformer model consists of two main components: the encoder and the decoder. The encoder processes the input data and generates a set of attention-based representations, while the decoder uses these representations to produce the output sequence.</p>
</li>
<li>
<p><strong>Positional Encoding</strong>: Since transformers do not have a built-in notion of sequence order (unlike RNNs), they use positional encodings to inject information about the position of each word in the input sequence. This allows the model to understand the order of words.</p>
</li>
</ul>
<h2 id="attention-mechanism-deep-dive"><a class="header" href="#attention-mechanism-deep-dive">Attention Mechanism: Deep Dive</a></h2>
<p>The attention mechanism is the heart of the transformer architecture. It allows the model to focus on different parts of the input sequence when processing each element. Let's explore this in detail with mathematical formulations and PyTorch implementations.</p>
<h3 id="scaled-dot-product-attention"><a class="header" href="#scaled-dot-product-attention">Scaled Dot-Product Attention</a></h3>
<p>The fundamental building block of transformer attention is the <strong>Scaled Dot-Product Attention</strong>. Given three matrices:</p>
<ul>
<li><strong>Q</strong> (Query): What we're looking for</li>
<li><strong>K</strong> (Key): What we're matching against</li>
<li><strong>V</strong> (Value): The actual information we want to retrieve</li>
</ul>
<p>The attention mechanism computes:</p>
<pre><code>Attention(Q, K, V) = softmax(QK^T / √d_k) V
</code></pre>
<p>Where:</p>
<ul>
<li><code>d_k</code> is the dimension of the key vectors</li>
<li>The division by <code>√d_k</code> is scaling to prevent the dot products from growing too large</li>
<li><code>softmax</code> normalizes the scores to create a probability distribution</li>
</ul>
<h4 id="pytorch-implementation-scaled-dot-product-attention"><a class="header" href="#pytorch-implementation-scaled-dot-product-attention">PyTorch Implementation: Scaled Dot-Product Attention</a></h4>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.nn.functional as F
import math

def scaled_dot_product_attention(query, key, value, mask=None):
    """
    Compute scaled dot-product attention.

    Args:
        query: Query tensor of shape (batch_size, num_heads, seq_len_q, d_k)
        key: Key tensor of shape (batch_size, num_heads, seq_len_k, d_k)
        value: Value tensor of shape (batch_size, num_heads, seq_len_v, d_v)
        mask: Optional mask tensor

    Returns:
        output: Attention output (batch_size, num_heads, seq_len_q, d_v)
        attention_weights: Attention weights (batch_size, num_heads, seq_len_q, seq_len_k)
    """
    # Get the dimension of keys
    d_k = query.size(-1)

    # Step 1: Compute Q @ K^T
    # query: (batch, heads, seq_len_q, d_k)
    # key.transpose(-2, -1): (batch, heads, d_k, seq_len_k)
    # scores: (batch, heads, seq_len_q, seq_len_k)
    scores = torch.matmul(query, key.transpose(-2, -1))
    print(f"After Q @ K^T - Shape: {scores.shape}")
    print(f"Sample scores (first 3x3):\n{scores[0, 0, :3, :3]}\n")

    # Step 2: Scale by sqrt(d_k)
    scores = scores / math.sqrt(d_k)
    print(f"After scaling by √{d_k} = {math.sqrt(d_k):.2f}")
    print(f"Scaled scores (first 3x3):\n{scores[0, 0, :3, :3]}\n")

    # Step 3: Apply mask (if provided)
    if mask is not None:
        scores = scores.masked_fill(mask == 0, -1e9)
        print(f"After masking - Shape: {scores.shape}")

    # Step 4: Apply softmax to get attention weights
    # Softmax is applied over the last dimension (seq_len_k)
    attention_weights = F.softmax(scores, dim=-1)
    print(f"Attention weights - Shape: {attention_weights.shape}")
    print(f"Sample attention weights (first 3x3):\n{attention_weights[0, 0, :3, :3]}")
    print(f"Sum of first row (should be 1.0): {attention_weights[0, 0, 0].sum()}\n")

    # Step 5: Multiply by values
    # attention_weights: (batch, heads, seq_len_q, seq_len_k)
    # value: (batch, heads, seq_len_v, d_v)  [seq_len_v == seq_len_k]
    # output: (batch, heads, seq_len_q, d_v)
    output = torch.matmul(attention_weights, value)
    print(f"Final output - Shape: {output.shape}\n")

    return output, attention_weights


# Example: Let's trace through a simple example
batch_size = 2
num_heads = 1
seq_len = 4
d_k = 8
d_v = 8

# Create sample tensors
torch.manual_seed(42)
query = torch.randn(batch_size, num_heads, seq_len, d_k)
key = torch.randn(batch_size, num_heads, seq_len, d_k)
value = torch.randn(batch_size, num_heads, seq_len, d_v)

print("="*60)
print("SCALED DOT-PRODUCT ATTENTION - STEP BY STEP")
print("="*60)
print(f"Query shape: {query.shape}")
print(f"Key shape: {key.shape}")
print(f"Value shape: {value.shape}\n")

output, attn_weights = scaled_dot_product_attention(query, key, value)

print(f"Final output shape: {output.shape}")
print(f"Final attention weights shape: {attn_weights.shape}")
</code></pre>
<p><strong>Output explanation:</strong></p>
<pre><code>============================================================
SCALED DOT-PRODUCT ATTENTION - STEP BY STEP
============================================================
Query shape: torch.Size([2, 1, 4, 8])
Key shape: torch.Size([2, 1, 4, 8])
Value shape: torch.Size([2, 1, 4, 8])

After Q @ K^T - Shape: torch.Size([2, 1, 4, 4])
Sample scores (first 3x3):
tensor([[ 0.6240, -1.2613,  1.4199],
        [-1.8847,  4.0367, -0.5234],
        [ 2.1563, -2.5678,  0.8234]])

After scaling by √8 = 2.83
Scaled scores (first 3x3):
tensor([[ 0.2207, -0.4460,  0.5021],
        [-0.6661,  1.4271, -0.1850],
        [ 0.7624, -0.9078,  0.2911]])

Attention weights - Shape: torch.Size([2, 1, 4, 4])
Sample attention weights (first 3x3):
tensor([[0.2789, 0.1425, 0.3672],
        [0.1056, 0.8236, 0.1680],
        [0.3924, 0.0731, 0.2458]])
Sum of first row (should be 1.0): 1.0

Final output - Shape: torch.Size([2, 1, 4, 8])
</code></pre>
<h3 id="understanding-the-matrix-operations"><a class="header" href="#understanding-the-matrix-operations">Understanding the Matrix Operations</a></h3>
<p>Let's break down what's happening at each step:</p>
<ol>
<li>
<p><strong>Query-Key Dot Product (Q @ K^T)</strong>:</p>
<ul>
<li>Each query vector (row in Q) is compared against all key vectors (rows in K)</li>
<li>The dot product measures similarity: higher values = more similar</li>
<li>Shape: <code>(batch, heads, seq_len_q, d_k) @ (batch, heads, d_k, seq_len_k) → (batch, heads, seq_len_q, seq_len_k)</code></li>
</ul>
</li>
<li>
<p><strong>Scaling</strong>:</p>
<ul>
<li>Dividing by <code>√d_k</code> prevents the dot products from becoming too large</li>
<li>Large dot products → very small gradients after softmax → slow learning</li>
<li>This is crucial for stable training</li>
</ul>
</li>
<li>
<p><strong>Softmax</strong>:</p>
<ul>
<li>Converts raw scores into a probability distribution</li>
<li>Each row sums to 1.0</li>
<li>Higher scores get higher probabilities (attention weights)</li>
</ul>
</li>
<li>
<p><strong>Weighted Sum (Attention @ Value)</strong>:</p>
<ul>
<li>Uses attention weights to create a weighted combination of value vectors</li>
<li>Each output position is a mixture of all value vectors</li>
<li>The weights determine how much each value contributes</li>
</ul>
</li>
</ol>
<h3 id="multi-head-attention"><a class="header" href="#multi-head-attention">Multi-Head Attention</a></h3>
<p>Multi-head attention runs multiple attention operations in parallel, allowing the model to attend to different aspects of the input simultaneously.</p>
<pre><code class="language-python">class MultiHeadAttention(nn.Module):
    def __init__(self, d_model, num_heads):
        """
        Multi-Head Attention module.

        Args:
            d_model: Total dimension of the model (e.g., 512)
            num_heads: Number of attention heads (e.g., 8)
        """
        super(MultiHeadAttention, self).__init__()
        assert d_model % num_heads == 0, "d_model must be divisible by num_heads"

        self.d_model = d_model
        self.num_heads = num_heads
        self.d_k = d_model // num_heads  # Dimension per head

        # Linear projections for Q, K, V
        self.W_q = nn.Linear(d_model, d_model)  # Query projection
        self.W_k = nn.Linear(d_model, d_model)  # Key projection
        self.W_v = nn.Linear(d_model, d_model)  # Value projection

        # Output projection
        self.W_o = nn.Linear(d_model, d_model)

    def split_heads(self, x):
        """
        Split the last dimension into (num_heads, d_k).
        Transpose to get shape: (batch_size, num_heads, seq_len, d_k)
        """
        batch_size, seq_len, d_model = x.size()
        # Reshape to (batch_size, seq_len, num_heads, d_k)
        x = x.view(batch_size, seq_len, self.num_heads, self.d_k)
        # Transpose to (batch_size, num_heads, seq_len, d_k)
        return x.transpose(1, 2)

    def combine_heads(self, x):
        """
        Inverse of split_heads.
        Input: (batch_size, num_heads, seq_len, d_k)
        Output: (batch_size, seq_len, d_model)
        """
        batch_size, num_heads, seq_len, d_k = x.size()
        # Transpose to (batch_size, seq_len, num_heads, d_k)
        x = x.transpose(1, 2).contiguous()
        # Reshape to (batch_size, seq_len, d_model)
        return x.view(batch_size, seq_len, self.d_model)

    def forward(self, query, key, value, mask=None):
        """
        Forward pass of multi-head attention.

        Args:
            query: (batch_size, seq_len_q, d_model)
            key: (batch_size, seq_len_k, d_model)
            value: (batch_size, seq_len_v, d_model)
            mask: Optional mask

        Returns:
            output: (batch_size, seq_len_q, d_model)
            attention_weights: (batch_size, num_heads, seq_len_q, seq_len_k)
        """
        batch_size = query.size(0)

        # Step 1: Linear projections
        # Each of these operations: (batch, seq_len, d_model) → (batch, seq_len, d_model)
        Q = self.W_q(query)
        K = self.W_k(key)
        V = self.W_v(value)

        print(f"\n{'='*60}")
        print("MULTI-HEAD ATTENTION - DETAILED STEPS")
        print(f"{'='*60}")
        print(f"Input shapes - Q: {query.shape}, K: {key.shape}, V: {value.shape}")
        print(f"\nAfter linear projections:")
        print(f"Q: {Q.shape}, K: {K.shape}, V: {V.shape}")

        # Step 2: Split into multiple heads
        # (batch, seq_len, d_model) → (batch, num_heads, seq_len, d_k)
        Q = self.split_heads(Q)
        K = self.split_heads(K)
        V = self.split_heads(V)

        print(f"\nAfter splitting into {self.num_heads} heads:")
        print(f"Q: {Q.shape}, K: {K.shape}, V: {V.shape}")
        print(f"Each head has dimension: {self.d_k}")

        # Step 3: Scaled dot-product attention
        # For each head: (batch, 1, seq_len_q, d_k) with (batch, 1, seq_len_k, d_k)
        d_k = Q.size(-1)
        scores = torch.matmul(Q, K.transpose(-2, -1)) / math.sqrt(d_k)

        if mask is not None:
            scores = scores.masked_fill(mask == 0, -1e9)

        attention_weights = F.softmax(scores, dim=-1)
        output = torch.matmul(attention_weights, V)

        print(f"\nAfter attention computation:")
        print(f"Attention scores: {scores.shape}")
        print(f"Attention weights: {attention_weights.shape}")
        print(f"Attention output: {output.shape}")

        # Step 4: Concatenate heads
        # (batch, num_heads, seq_len, d_k) → (batch, seq_len, d_model)
        output = self.combine_heads(output)
        print(f"\nAfter combining heads: {output.shape}")

        # Step 5: Final linear projection
        # (batch, seq_len, d_model) → (batch, seq_len, d_model)
        output = self.W_o(output)
        print(f"After final projection: {output.shape}")
        print(f"{'='*60}\n")

        return output, attention_weights


# Example usage with detailed tracking
d_model = 512
num_heads = 8
batch_size = 2
seq_len = 10

# Create sample input
x = torch.randn(batch_size, seq_len, d_model)

# Initialize multi-head attention
mha = MultiHeadAttention(d_model, num_heads)

# Forward pass (using x for query, key, and value - this is self-attention)
output, attn_weights = mha(x, x, x)

print(f"\nFinal Results:")
print(f"Input shape: {x.shape}")
print(f"Output shape: {output.shape}")
print(f"Attention weights shape: {attn_weights.shape}")
print(f"\nAttention weights for first head, first query position:")
print(attn_weights[0, 0, 0, :])  # Should sum to 1.0
print(f"Sum: {attn_weights[0, 0, 0, :].sum()}")
</code></pre>
<h3 id="visualizing-attention-a-concrete-example"><a class="header" href="#visualizing-attention-a-concrete-example">Visualizing Attention: A Concrete Example</a></h3>
<p>Let's see how attention works on actual text:</p>
<pre><code class="language-python">import torch
import torch.nn.functional as F

# Simple example: "The cat sat on the mat"
sentence = ["The", "cat", "sat", "on", "the", "mat"]
seq_len = len(sentence)
d_model = 4  # Small for visualization

# Create simple embeddings (normally these would be learned)
# Each word gets a random vector
torch.manual_seed(42)
embeddings = torch.randn(1, seq_len, d_model)

# Simple attention (1 head for clarity)
class SimpleAttention(nn.Module):
    def __init__(self, d_model):
        super().__init__()
        self.W_q = nn.Linear(d_model, d_model)
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)

    def forward(self, x):
        Q = self.W_q(x)
        K = self.W_k(x)
        V = self.W_v(x)

        d_k = Q.size(-1)
        scores = torch.matmul(Q, K.transpose(-2, -1)) / torch.sqrt(torch.tensor(d_k, dtype=torch.float32))
        attn_weights = F.softmax(scores, dim=-1)
        output = torch.matmul(attn_weights, V)

        return output, attn_weights

# Create and run the attention
attn = SimpleAttention(d_model)
output, weights = attn(embeddings)

# Visualize attention weights
print("Attention Weight Matrix:")
print("(Each row shows where that word 'attends to')\n")
print("        ", "  ".join(f"{w:&gt;5}" for w in sentence))
print("-" * 50)
for i, word in enumerate(sentence):
    print(f"{word:&gt;7} |", "  ".join(f"{weights[0, i, j].item():5.3f}" for j in range(seq_len)))

print("\nInterpretation:")
print("- Each row represents a query word")
print("- Each column represents a key word")
print("- Values show how much the query word 'attends to' each key word")
print("- Higher values = stronger attention")
print("- Each row sums to 1.0")
</code></pre>
<h3 id="masked-attention-for-decoder"><a class="header" href="#masked-attention-for-decoder">Masked Attention (for Decoder)</a></h3>
<p>In the decoder, we use masked attention to prevent positions from attending to future positions:</p>
<pre><code class="language-python">def create_causal_mask(seq_len):
    """
    Create a causal mask for decoder self-attention.
    Prevents attending to future positions.

    Returns a lower triangular matrix:
    [[1, 0, 0, 0],
     [1, 1, 0, 0],
     [1, 1, 1, 0],
     [1, 1, 1, 1]]
    """
    mask = torch.tril(torch.ones(seq_len, seq_len))
    return mask.unsqueeze(0).unsqueeze(0)  # Add batch and head dimensions


# Example with masking
seq_len = 4
mask = create_causal_mask(seq_len)

print("Causal Mask:")
print(mask[0, 0])
print("\nThis ensures that:")
print("- Position 0 can only see position 0")
print("- Position 1 can see positions 0-1")
print("- Position 2 can see positions 0-2")
print("- Position 3 can see all positions 0-3")

# Apply masked attention
query = torch.randn(1, 1, seq_len, 8)
key = torch.randn(1, 1, seq_len, 8)
value = torch.randn(1, 1, seq_len, 8)

output, attn_weights = scaled_dot_product_attention(query, key, value, mask)

print("\nAttention weights with masking:")
print(attn_weights[0, 0])
print("\nNotice how future positions (upper triangle) have ~0 attention weight")
</code></pre>
<h3 id="complete-self-attention-layer-with-pytorch"><a class="header" href="#complete-self-attention-layer-with-pytorch">Complete Self-Attention Layer with PyTorch</a></h3>
<p>Here's a complete implementation you can use in practice:</p>
<pre><code class="language-python">import torch
import torch.nn as nn
import math

class SelfAttention(nn.Module):
    """
    Complete self-attention layer with all components.
    """
    def __init__(self, d_model, num_heads, dropout=0.1):
        super().__init__()
        assert d_model % num_heads == 0

        self.d_model = d_model
        self.num_heads = num_heads
        self.d_k = d_model // num_heads

        # Combined QKV projection (more efficient)
        self.qkv_proj = nn.Linear(d_model, 3 * d_model)
        self.out_proj = nn.Linear(d_model, d_model)
        self.dropout = nn.Dropout(dropout)

    def forward(self, x, mask=None):
        batch_size, seq_len, d_model = x.shape

        # Project to Q, K, V all at once
        qkv = self.qkv_proj(x)  # (batch, seq_len, 3 * d_model)

        # Split into Q, K, V and reshape for multi-head
        qkv = qkv.reshape(batch_size, seq_len, 3, self.num_heads, self.d_k)
        qkv = qkv.permute(2, 0, 3, 1, 4)  # (3, batch, heads, seq_len, d_k)
        q, k, v = qkv[0], qkv[1], qkv[2]

        # Scaled dot-product attention
        scores = torch.matmul(q, k.transpose(-2, -1)) / math.sqrt(self.d_k)

        if mask is not None:
            scores = scores.masked_fill(mask == 0, float('-inf'))

        attn = torch.softmax(scores, dim=-1)
        attn = self.dropout(attn)

        # Combine heads
        out = torch.matmul(attn, v)  # (batch, heads, seq_len, d_k)
        out = out.transpose(1, 2).contiguous()  # (batch, seq_len, heads, d_k)
        out = out.reshape(batch_size, seq_len, d_model)  # (batch, seq_len, d_model)

        # Final projection
        out = self.out_proj(out)

        return out, attn


# Test the complete implementation
model = SelfAttention(d_model=512, num_heads=8, dropout=0.1)
x = torch.randn(2, 10, 512)  # (batch=2, seq_len=10, d_model=512)
output, attention = model(x)

print(f"Input shape: {x.shape}")
print(f"Output shape: {output.shape}")
print(f"Attention shape: {attention.shape}")
</code></pre>
<h2 id="architecture"><a class="header" href="#architecture">Architecture</a></h2>
<ol>
<li>
<p><strong>Encoder</strong>: The encoder is composed of multiple identical layers, each containing two main sub-layers:</p>
<ul>
<li><strong>Multi-Head Self-Attention</strong>: This mechanism allows the model to focus on different parts of the input sequence simultaneously, capturing various relationships between words.</li>
<li><strong>Feed-Forward Neural Network</strong>: After the attention mechanism, the output is passed through a feed-forward neural network, which applies a non-linear transformation.</li>
</ul>
</li>
<li>
<p><strong>Decoder</strong>: The decoder also consists of multiple identical layers, with an additional sub-layer for attending to the encoder's output:</p>
<ul>
<li><strong>Masked Multi-Head Self-Attention</strong>: This prevents the decoder from attending to future tokens in the output sequence during training.</li>
<li><strong>Encoder-Decoder Attention</strong>: This layer allows the decoder to focus on relevant parts of the encoder's output while generating the output sequence.</li>
</ul>
</li>
</ol>
<h3 id="complete-transformer-implementation-in-pytorch"><a class="header" href="#complete-transformer-implementation-in-pytorch">Complete Transformer Implementation in PyTorch</a></h3>
<p>Here's a full implementation of the transformer architecture with detailed comments on matrix operations:</p>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.nn.functional as F
import math

class PositionalEncoding(nn.Module):
    """
    Adds positional information to the input embeddings.
    Uses sine and cosine functions of different frequencies.
    """
    def __init__(self, d_model, max_len=5000):
        super().__init__()

        # Create positional encoding matrix
        pe = torch.zeros(max_len, d_model)
        position = torch.arange(0, max_len, dtype=torch.float).unsqueeze(1)

        # Compute the div term for sine and cosine
        div_term = torch.exp(torch.arange(0, d_model, 2).float() * (-math.log(10000.0) / d_model))

        # Apply sine to even indices
        pe[:, 0::2] = torch.sin(position * div_term)
        # Apply cosine to odd indices
        pe[:, 1::2] = torch.cos(position * div_term)

        # Add batch dimension: (1, max_len, d_model)
        pe = pe.unsqueeze(0)

        # Register as buffer (not a parameter, but should be saved with model)
        self.register_buffer('pe', pe)

    def forward(self, x):
        """
        Args:
            x: Tensor of shape (batch_size, seq_len, d_model)
        Returns:
            x + positional encoding
        """
        # Add positional encoding to input
        # x: (batch, seq_len, d_model)
        # self.pe[:, :x.size(1)]: (1, seq_len, d_model)
        return x + self.pe[:, :x.size(1)]


class FeedForward(nn.Module):
    """
    Position-wise Feed-Forward Network.
    Consists of two linear transformations with ReLU activation.
    FFN(x) = max(0, xW1 + b1)W2 + b2
    """
    def __init__(self, d_model, d_ff, dropout=0.1):
        super().__init__()
        self.linear1 = nn.Linear(d_model, d_ff)
        self.linear2 = nn.Linear(d_ff, d_model)
        self.dropout = nn.Dropout(dropout)

    def forward(self, x):
        """
        Args:
            x: (batch_size, seq_len, d_model)
        Returns:
            output: (batch_size, seq_len, d_model)
        """
        # x: (batch, seq_len, d_model)
        # After linear1: (batch, seq_len, d_ff)
        # After ReLU: (batch, seq_len, d_ff)
        # After linear2: (batch, seq_len, d_model)
        return self.linear2(self.dropout(F.relu(self.linear1(x))))


class MultiHeadAttentionLayer(nn.Module):
    """
    Multi-head attention layer with proper matrix dimension tracking.
    """
    def __init__(self, d_model, num_heads, dropout=0.1):
        super().__init__()
        assert d_model % num_heads == 0

        self.d_model = d_model
        self.num_heads = num_heads
        self.d_k = d_model // num_heads

        # Linear layers for Q, K, V projections
        self.W_q = nn.Linear(d_model, d_model)
        self.W_k = nn.Linear(d_model, d_model)
        self.W_v = nn.Linear(d_model, d_model)
        self.W_o = nn.Linear(d_model, d_model)

        self.dropout = nn.Dropout(dropout)
        self.scale = math.sqrt(self.d_k)

    def forward(self, query, key, value, mask=None):
        """
        Args:
            query: (batch_size, seq_len_q, d_model)
            key: (batch_size, seq_len_k, d_model)
            value: (batch_size, seq_len_v, d_model)
            mask: (batch_size, 1, seq_len_q, seq_len_k) or similar
        """
        batch_size = query.size(0)

        # Linear projections: (batch, seq_len, d_model) → (batch, seq_len, d_model)
        Q = self.W_q(query)
        K = self.W_k(key)
        V = self.W_v(value)

        # Reshape for multi-head attention
        # (batch, seq_len, d_model) → (batch, seq_len, num_heads, d_k)
        Q = Q.view(batch_size, -1, self.num_heads, self.d_k)
        K = K.view(batch_size, -1, self.num_heads, self.d_k)
        V = V.view(batch_size, -1, self.num_heads, self.d_k)

        # Transpose to (batch, num_heads, seq_len, d_k)
        Q = Q.transpose(1, 2)
        K = K.transpose(1, 2)
        V = V.transpose(1, 2)

        # Scaled dot-product attention
        # Q @ K^T: (batch, num_heads, seq_len_q, d_k) @ (batch, num_heads, d_k, seq_len_k)
        #        → (batch, num_heads, seq_len_q, seq_len_k)
        scores = torch.matmul(Q, K.transpose(-2, -1)) / self.scale

        # Apply mask if provided
        if mask is not None:
            scores = scores.masked_fill(mask == 0, float('-inf'))

        # Softmax over the last dimension
        attn_weights = F.softmax(scores, dim=-1)
        attn_weights = self.dropout(attn_weights)

        # Apply attention to values
        # attn_weights @ V: (batch, num_heads, seq_len_q, seq_len_k) @ (batch, num_heads, seq_len_v, d_k)
        #                 → (batch, num_heads, seq_len_q, d_k)
        output = torch.matmul(attn_weights, V)

        # Concatenate heads
        # Transpose: (batch, num_heads, seq_len_q, d_k) → (batch, seq_len_q, num_heads, d_k)
        output = output.transpose(1, 2).contiguous()
        # Reshape: (batch, seq_len_q, num_heads, d_k) → (batch, seq_len_q, d_model)
        output = output.view(batch_size, -1, self.d_model)

        # Final linear projection
        output = self.W_o(output)

        return output, attn_weights


class EncoderLayer(nn.Module):
    """
    Single encoder layer consisting of:
    1. Multi-head self-attention
    2. Add &amp; Norm (residual connection + layer normalization)
    3. Feed-forward network
    4. Add &amp; Norm
    """
    def __init__(self, d_model, num_heads, d_ff, dropout=0.1):
        super().__init__()
        self.self_attn = MultiHeadAttentionLayer(d_model, num_heads, dropout)
        self.feed_forward = FeedForward(d_model, d_ff, dropout)
        self.norm1 = nn.LayerNorm(d_model)
        self.norm2 = nn.LayerNorm(d_model)
        self.dropout1 = nn.Dropout(dropout)
        self.dropout2 = nn.Dropout(dropout)

    def forward(self, x, mask=None):
        """
        Args:
            x: (batch_size, seq_len, d_model)
            mask: Attention mask
        Returns:
            output: (batch_size, seq_len, d_model)
        """
        # Self-attention with residual connection
        attn_output, _ = self.self_attn(x, x, x, mask)
        x = x + self.dropout1(attn_output)
        x = self.norm1(x)

        # Feed-forward with residual connection
        ff_output = self.feed_forward(x)
        x = x + self.dropout2(ff_output)
        x = self.norm2(x)

        return x


class DecoderLayer(nn.Module):
    """
    Single decoder layer consisting of:
    1. Masked multi-head self-attention
    2. Add &amp; Norm
    3. Multi-head cross-attention (attending to encoder output)
    4. Add &amp; Norm
    5. Feed-forward network
    6. Add &amp; Norm
    """
    def __init__(self, d_model, num_heads, d_ff, dropout=0.1):
        super().__init__()
        self.self_attn = MultiHeadAttentionLayer(d_model, num_heads, dropout)
        self.cross_attn = MultiHeadAttentionLayer(d_model, num_heads, dropout)
        self.feed_forward = FeedForward(d_model, d_ff, dropout)
        self.norm1 = nn.LayerNorm(d_model)
        self.norm2 = nn.LayerNorm(d_model)
        self.norm3 = nn.LayerNorm(d_model)
        self.dropout1 = nn.Dropout(dropout)
        self.dropout2 = nn.Dropout(dropout)
        self.dropout3 = nn.Dropout(dropout)

    def forward(self, x, encoder_output, src_mask=None, tgt_mask=None):
        """
        Args:
            x: Decoder input (batch_size, tgt_seq_len, d_model)
            encoder_output: Encoder output (batch_size, src_seq_len, d_model)
            src_mask: Source mask for encoder-decoder attention
            tgt_mask: Target mask for masked self-attention
        """
        # Masked self-attention
        attn_output, _ = self.self_attn(x, x, x, tgt_mask)
        x = x + self.dropout1(attn_output)
        x = self.norm1(x)

        # Cross-attention to encoder output
        # Query from decoder, Key and Value from encoder
        attn_output, _ = self.cross_attn(x, encoder_output, encoder_output, src_mask)
        x = x + self.dropout2(attn_output)
        x = self.norm2(x)

        # Feed-forward
        ff_output = self.feed_forward(x)
        x = x + self.dropout3(ff_output)
        x = self.norm3(x)

        return x


class Transformer(nn.Module):
    """
    Complete Transformer model for sequence-to-sequence tasks.
    """
    def __init__(
        self,
        src_vocab_size,
        tgt_vocab_size,
        d_model=512,
        num_heads=8,
        num_encoder_layers=6,
        num_decoder_layers=6,
        d_ff=2048,
        dropout=0.1,
        max_len=5000
    ):
        super().__init__()

        # Embeddings
        self.src_embedding = nn.Embedding(src_vocab_size, d_model)
        self.tgt_embedding = nn.Embedding(tgt_vocab_size, d_model)
        self.positional_encoding = PositionalEncoding(d_model, max_len)

        # Encoder
        self.encoder_layers = nn.ModuleList([
            EncoderLayer(d_model, num_heads, d_ff, dropout)
            for _ in range(num_encoder_layers)
        ])

        # Decoder
        self.decoder_layers = nn.ModuleList([
            DecoderLayer(d_model, num_heads, d_ff, dropout)
            for _ in range(num_decoder_layers)
        ])

        # Output projection
        self.output_projection = nn.Linear(d_model, tgt_vocab_size)

        self.dropout = nn.Dropout(dropout)
        self.d_model = d_model

        # Initialize weights
        self._init_weights()

    def _init_weights(self):
        """Initialize weights using Xavier initialization."""
        for p in self.parameters():
            if p.dim() &gt; 1:
                nn.init.xavier_uniform_(p)

    def make_src_mask(self, src):
        """
        Create mask for source sequence (padding mask).
        Args:
            src: (batch_size, src_seq_len)
        Returns:
            mask: (batch_size, 1, 1, src_seq_len)
        """
        src_mask = (src != 0).unsqueeze(1).unsqueeze(2)
        return src_mask

    def make_tgt_mask(self, tgt):
        """
        Create mask for target sequence (padding + causal mask).
        Args:
            tgt: (batch_size, tgt_seq_len)
        Returns:
            mask: (batch_size, 1, tgt_seq_len, tgt_seq_len)
        """
        tgt_seq_len = tgt.size(1)

        # Padding mask
        tgt_padding_mask = (tgt != 0).unsqueeze(1).unsqueeze(2)

        # Causal mask (prevent attending to future tokens)
        tgt_sub_mask = torch.tril(
            torch.ones((tgt_seq_len, tgt_seq_len), device=tgt.device)
        ).bool()

        # Combine both masks
        tgt_mask = tgt_padding_mask &amp; tgt_sub_mask
        return tgt_mask

    def encode(self, src, src_mask):
        """
        Encode source sequence.
        Args:
            src: (batch_size, src_seq_len)
            src_mask: (batch_size, 1, 1, src_seq_len)
        Returns:
            encoder_output: (batch_size, src_seq_len, d_model)
        """
        # Embedding + Positional encoding
        # src: (batch, src_seq_len) → (batch, src_seq_len, d_model)
        x = self.src_embedding(src) * math.sqrt(self.d_model)
        x = self.positional_encoding(x)
        x = self.dropout(x)

        # Pass through encoder layers
        for layer in self.encoder_layers:
            x = layer(x, src_mask)

        return x

    def decode(self, tgt, encoder_output, src_mask, tgt_mask):
        """
        Decode target sequence.
        Args:
            tgt: (batch_size, tgt_seq_len)
            encoder_output: (batch_size, src_seq_len, d_model)
            src_mask: (batch_size, 1, 1, src_seq_len)
            tgt_mask: (batch_size, 1, tgt_seq_len, tgt_seq_len)
        Returns:
            decoder_output: (batch_size, tgt_seq_len, d_model)
        """
        # Embedding + Positional encoding
        x = self.tgt_embedding(tgt) * math.sqrt(self.d_model)
        x = self.positional_encoding(x)
        x = self.dropout(x)

        # Pass through decoder layers
        for layer in self.decoder_layers:
            x = layer(x, encoder_output, src_mask, tgt_mask)

        return x

    def forward(self, src, tgt):
        """
        Forward pass through the entire transformer.
        Args:
            src: Source sequence (batch_size, src_seq_len)
            tgt: Target sequence (batch_size, tgt_seq_len)
        Returns:
            output: Logits (batch_size, tgt_seq_len, tgt_vocab_size)
        """
        # Create masks
        src_mask = self.make_src_mask(src)
        tgt_mask = self.make_tgt_mask(tgt)

        # Encode
        encoder_output = self.encode(src, src_mask)

        # Decode
        decoder_output = self.decode(tgt, encoder_output, src_mask, tgt_mask)

        # Project to vocabulary
        output = self.output_projection(decoder_output)

        return output


# Example usage
if __name__ == "__main__":
    # Model hyperparameters
    src_vocab_size = 10000
    tgt_vocab_size = 10000
    d_model = 512
    num_heads = 8
    num_encoder_layers = 6
    num_decoder_layers = 6
    d_ff = 2048
    dropout = 0.1

    # Create model
    model = Transformer(
        src_vocab_size=src_vocab_size,
        tgt_vocab_size=tgt_vocab_size,
        d_model=d_model,
        num_heads=num_heads,
        num_encoder_layers=num_encoder_layers,
        num_decoder_layers=num_decoder_layers,
        d_ff=d_ff,
        dropout=dropout
    )

    # Example input (batch_size=2, sequences of length 10)
    src = torch.randint(1, src_vocab_size, (2, 10))
    tgt = torch.randint(1, tgt_vocab_size, (2, 12))

    print("="*60)
    print("TRANSFORMER MODEL SUMMARY")
    print("="*60)
    print(f"Source sequence shape: {src.shape}")
    print(f"Target sequence shape: {tgt.shape}")
    print(f"\nModel parameters:")
    total_params = sum(p.numel() for p in model.parameters())
    trainable_params = sum(p.numel() for p in model.parameters() if p.requires_grad)
    print(f"Total parameters: {total_params:,}")
    print(f"Trainable parameters: {trainable_params:,}")

    # Forward pass
    output = model(src, tgt)

    print(f"\nOutput shape: {output.shape}")
    print(f"Expected: (batch_size={src.size(0)}, tgt_seq_len={tgt.size(1)}, tgt_vocab_size={tgt_vocab_size})")

    # Show dimension flow through the model
    print("\n" + "="*60)
    print("DIMENSION FLOW THROUGH TRANSFORMER")
    print("="*60)

    print("\nENCODER:")
    print(f"1. Input tokens: {src.shape}")
    print(f"2. After embedding: (batch={src.size(0)}, seq={src.size(1)}, d_model={d_model})")
    print(f"3. After positional encoding: Same shape")
    print(f"4. Through {num_encoder_layers} encoder layers: Same shape")
    print(f"5. Encoder output: (batch={src.size(0)}, seq={src.size(1)}, d_model={d_model})")

    print("\nDECODER:")
    print(f"1. Input tokens: {tgt.shape}")
    print(f"2. After embedding: (batch={tgt.size(0)}, seq={tgt.size(1)}, d_model={d_model})")
    print(f"3. After positional encoding: Same shape")
    print(f"4. Through {num_decoder_layers} decoder layers: Same shape")
    print(f"5. After output projection: (batch={tgt.size(0)}, seq={tgt.size(1)}, vocab={tgt_vocab_size})")

    print("\n" + "="*60)
</code></pre>
<h3 id="training-the-transformer"><a class="header" href="#training-the-transformer">Training the Transformer</a></h3>
<p>Here's how you would train this transformer for a translation task:</p>
<pre><code class="language-python">import torch.optim as optim

# Initialize model, loss, and optimizer
model = Transformer(
    src_vocab_size=10000,
    tgt_vocab_size=10000,
    d_model=512,
    num_heads=8,
    num_encoder_layers=6,
    num_decoder_layers=6,
    d_ff=2048,
    dropout=0.1
)

criterion = nn.CrossEntropyLoss(ignore_index=0)  # Ignore padding token
optimizer = optim.Adam(model.parameters(), lr=0.0001, betas=(0.9, 0.98), eps=1e-9)

# Training loop
def train_step(model, src, tgt, optimizer, criterion):
    """
    Single training step.

    Args:
        src: Source sequences (batch_size, src_seq_len)
        tgt: Target sequences (batch_size, tgt_seq_len)
    """
    model.train()
    optimizer.zero_grad()

    # Forward pass
    # Input to decoder is target shifted right (teacher forcing)
    tgt_input = tgt[:, :-1]  # Remove last token
    tgt_output = tgt[:, 1:]   # Remove first token (usually &lt;sos&gt;)

    # Get model predictions
    # output: (batch_size, tgt_seq_len-1, vocab_size)
    output = model(src, tgt_input)

    # Reshape for loss calculation
    # output: (batch_size * (tgt_seq_len-1), vocab_size)
    # tgt_output: (batch_size * (tgt_seq_len-1))
    output = output.reshape(-1, output.size(-1))
    tgt_output = tgt_output.reshape(-1)

    # Calculate loss
    loss = criterion(output, tgt_output)

    # Backward pass
    loss.backward()

    # Gradient clipping (prevents exploding gradients)
    torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)

    # Update weights
    optimizer.step()

    return loss.item()


# Example training
for epoch in range(10):
    # Generate dummy batch
    src = torch.randint(1, 10000, (32, 20))  # batch_size=32, seq_len=20
    tgt = torch.randint(1, 10000, (32, 25))  # batch_size=32, seq_len=25

    loss = train_step(model, src, tgt, optimizer, criterion)
    print(f"Epoch {epoch+1}, Loss: {loss:.4f}")
</code></pre>
<h3 id="inference-with-the-transformer"><a class="header" href="#inference-with-the-transformer">Inference with the Transformer</a></h3>
<pre><code class="language-python">def greedy_decode(model, src, max_len, start_token, end_token):
    """
    Greedy decoding: always select the most likely next token.

    Args:
        model: Trained transformer model
        src: Source sequence (1, src_seq_len)
        max_len: Maximum length of generated sequence
        start_token: Start token ID
        end_token: End token ID

    Returns:
        Generated sequence
    """
    model.eval()

    # Encode the source
    src_mask = model.make_src_mask(src)
    encoder_output = model.encode(src, src_mask)

    # Initialize decoder input with start token
    tgt = torch.tensor([[start_token]], device=src.device)

    for _ in range(max_len):
        # Create target mask
        tgt_mask = model.make_tgt_mask(tgt)

        # Decode
        decoder_output = model.decode(tgt, encoder_output, src_mask, tgt_mask)

        # Get predictions for the last token
        # decoder_output: (1, current_seq_len, d_model)
        # We only need the last position: (1, 1, d_model)
        output = model.output_projection(decoder_output[:, -1:, :])

        # Get the token with highest probability
        # output: (1, 1, vocab_size) → (1, 1)
        next_token = output.argmax(dim=-1)

        # Append to target sequence
        tgt = torch.cat([tgt, next_token], dim=1)

        # Stop if we generate the end token
        if next_token.item() == end_token:
            break

    return tgt


# Example inference
src_sequence = torch.randint(1, 10000, (1, 20))
generated = greedy_decode(
    model=model,
    src=src_sequence,
    max_len=50,
    start_token=1,  # &lt;sos&gt; token
    end_token=2     # &lt;eos&gt; token
)
print(f"Generated sequence: {generated}")
print(f"Generated sequence shape: {generated.shape}")
</code></pre>
<h2 id="applications-7"><a class="header" href="#applications-7">Applications</a></h2>
<p>Transformers have been successfully applied in various domains, including:</p>
<ul>
<li>
<p><strong>Natural Language Processing</strong>: Models like BERT, GPT, and T5 are based on the transformer architecture and have achieved state-of-the-art results in numerous NLP tasks.</p>
</li>
<li>
<p><strong>Computer Vision</strong>: Vision Transformers (ViTs) have adapted the transformer architecture for image classification and other vision tasks, demonstrating competitive performance with traditional convolutional neural networks (CNNs).</p>
</li>
<li>
<p><strong>Speech Processing</strong>: Transformers are also being explored for tasks in speech recognition and synthesis, leveraging their ability to model sequential data.</p>
</li>
</ul>
<h2 id="conclusion-10"><a class="header" href="#conclusion-10">Conclusion</a></h2>
<p>Transformers have transformed the landscape of machine learning, particularly in NLP, by providing a powerful and flexible framework for modeling complex relationships in data. Their ability to handle long-range dependencies and parallelize training has made them a go-to choice for many modern AI applications.</p>
<h1 id="eli10-what-are-transformers"><a class="header" href="#eli10-what-are-transformers">ELI10: What are Transformers?</a></h1>
<p>Transformers are like super-smart assistants that help computers understand and generate human language. Imagine you have a friend who can read a whole book at once and remember everything about it. That's what transformers do! They look at all the words in a sentence and figure out how they relate to each other, which helps them answer questions, translate languages, or even write stories.</p>
<h2 id="example-usage-1"><a class="header" href="#example-usage-1">Example Usage</a></h2>
<ol>
<li><strong>Text Generation</strong>: Given a prompt, transformers can generate coherent and contextually relevant text.</li>
<li><strong>Translation</strong>: They can translate sentences from one language to another by understanding the meaning of the words in context.</li>
<li><strong>Summarization</strong>: Transformers can read long articles and provide concise summaries, capturing the main points effectively.</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hugging-face-transformers"><a class="header" href="#hugging-face-transformers">Hugging Face Transformers</a></h1>
<p>Comprehensive guide to using the Hugging Face ecosystem for NLP and beyond.</p>
<h2 id="table-of-contents-14"><a class="header" href="#table-of-contents-14">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/hugging_face.html#introduction">Introduction</a></li>
<li><a href="machine_learning/hugging_face.html#transformers-library">Transformers Library</a></li>
<li><a href="machine_learning/hugging_face.html#model-hub">Model Hub</a></li>
<li><a href="machine_learning/hugging_face.html#datasets-library">Datasets Library</a></li>
<li><a href="machine_learning/hugging_face.html#tokenizers">Tokenizers</a></li>
<li><a href="machine_learning/hugging_face.html#training-and-fine-tuning">Training and Fine-tuning</a></li>
<li><a href="machine_learning/hugging_face.html#inference-and-deployment">Inference and Deployment</a></li>
</ol>
<h2 id="introduction-2"><a class="header" href="#introduction-2">Introduction</a></h2>
<p><strong>Hugging Face Ecosystem:</strong></p>
<ul>
<li><strong>Transformers</strong>: State-of-the-art NLP models</li>
<li><strong>Datasets</strong>: Easy access to datasets</li>
<li><strong>Tokenizers</strong>: Fast tokenization</li>
<li><strong>Accelerate</strong>: Distributed training</li>
<li><strong>Optimum</strong>: Hardware optimization</li>
</ul>
<pre><code class="language-bash"># Installation
pip install transformers datasets tokenizers accelerate
pip install torch torchvision torchaudio  # PyTorch
# OR
pip install tensorflow  # TensorFlow
</code></pre>
<h2 id="transformers-library"><a class="header" href="#transformers-library">Transformers Library</a></h2>
<h3 id="basic-usage"><a class="header" href="#basic-usage">Basic Usage</a></h3>
<pre><code class="language-python">from transformers import (
    AutoTokenizer, 
    AutoModel, 
    AutoModelForSequenceClassification,
    pipeline
)

# Quick start with pipelines
classifier = pipeline("sentiment-analysis")
result = classifier("I love using Hugging Face!")
print(result)
# [{'label': 'POSITIVE', 'score': 0.9998}]

# Multiple examples
results = classifier([
    "I love this!",
    "I hate this!",
    "This is okay."
])
print(results)
</code></pre>
<h3 id="loading-models-and-tokenizers"><a class="header" href="#loading-models-and-tokenizers">Loading Models and Tokenizers</a></h3>
<pre><code class="language-python"># Load pre-trained model and tokenizer
model_name = "bert-base-uncased"

tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModel.from_pretrained(model_name)

# Tokenize text
text = "Hello, how are you?"
inputs = tokenizer(text, return_tensors="pt", padding=True, truncation=True)

# Get embeddings
with torch.no_grad():
    outputs = model(**inputs)
    last_hidden_states = outputs.last_hidden_state
    pooler_output = outputs.pooler_output

print(f"Last hidden state shape: {last_hidden_states.shape}")
print(f"Pooler output shape: {pooler_output.shape}")
</code></pre>
<h3 id="common-model-types"><a class="header" href="#common-model-types">Common Model Types</a></h3>
<pre><code class="language-python"># Sequence Classification (e.g., sentiment analysis)
model = AutoModelForSequenceClassification.from_pretrained(
    "distilbert-base-uncased-finetuned-sst-2-english"
)

# Token Classification (e.g., NER)
from transformers import AutoModelForTokenClassification
model = AutoModelForTokenClassification.from_pretrained("dslim/bert-base-NER")

# Question Answering
from transformers import AutoModelForQuestionAnswering
model = AutoModelForQuestionAnswering.from_pretrained("distilbert-base-cased-distilled-squad")

# Text Generation
from transformers import AutoModelForCausalLM
model = AutoModelForCausalLM.from_pretrained("gpt2")

# Masked Language Modeling
from transformers import AutoModelForMaskedLM
model = AutoModelForMaskedLM.from_pretrained("bert-base-uncased")

# Sequence-to-Sequence (e.g., translation, summarization)
from transformers import AutoModelForSeq2SeqLM
model = AutoModelForSeq2SeqLM.from_pretrained("t5-base")
</code></pre>
<h3 id="pipelines"><a class="header" href="#pipelines">Pipelines</a></h3>
<pre><code class="language-python"># Sentiment Analysis
sentiment = pipeline("sentiment-analysis")
print(sentiment("This movie is great!"))

# Named Entity Recognition
ner = pipeline("ner", grouped_entities=True)
print(ner("My name is John and I live in New York"))

# Question Answering
qa = pipeline("question-answering")
context = "The Eiffel Tower is located in Paris, France."
question = "Where is the Eiffel Tower?"
print(qa(question=question, context=context))

# Text Generation
generator = pipeline("text-generation", model="gpt2")
print(generator("Once upon a time", max_length=50, num_return_sequences=2))

# Translation
translator = pipeline("translation_en_to_fr", model="t5-base")
print(translator("Hello, how are you?"))

# Summarization
summarizer = pipeline("summarization", model="facebook/bart-large-cnn")
article = """Long article text here..."""
print(summarizer(article, max_length=130, min_length=30))

# Zero-shot Classification
classifier = pipeline("zero-shot-classification")
text = "This is a course about Python programming"
labels = ["education", "politics", "business"]
print(classifier(text, candidate_labels=labels))

# Fill Mask
unmasker = pipeline("fill-mask", model="bert-base-uncased")
print(unmasker("The capital of France is [MASK]."))

# Feature Extraction
feature_extractor = pipeline("feature-extraction")
features = feature_extractor("Hello world!")
print(f"Features shape: {len(features[0])}")

# Image Classification
from transformers import pipeline
image_classifier = pipeline("image-classification", model="google/vit-base-patch16-224")
result = image_classifier("path/to/image.jpg")

# Object Detection
object_detector = pipeline("object-detection", model="facebook/detr-resnet-50")
results = object_detector("path/to/image.jpg")
</code></pre>
<h3 id="custom-pipeline"><a class="header" href="#custom-pipeline">Custom Pipeline</a></h3>
<pre><code class="language-python">from transformers import pipeline, AutoModelForSequenceClassification, AutoTokenizer
import torch

class CustomSentimentPipeline:
    def __init__(self, model_name="distilbert-base-uncased-finetuned-sst-2-english"):
        self.tokenizer = AutoTokenizer.from_pretrained(model_name)
        self.model = AutoModelForSequenceClassification.from_pretrained(model_name)
        self.model.eval()
    
    def __call__(self, texts, batch_size=8):
        if isinstance(texts, str):
            texts = [texts]
        
        results = []
        
        for i in range(0, len(texts), batch_size):
            batch = texts[i:i+batch_size]
            
            # Tokenize
            inputs = self.tokenizer(
                batch, 
                return_tensors="pt", 
                padding=True, 
                truncation=True,
                max_length=512
            )
            
            # Forward pass
            with torch.no_grad():
                outputs = self.model(**inputs)
                logits = outputs.logits
                probs = torch.softmax(logits, dim=-1)
            
            # Convert to results
            for j, prob in enumerate(probs):
                label_id = prob.argmax().item()
                score = prob[label_id].item()
                label = self.model.config.id2label[label_id]
                
                results.append({
                    'text': batch[j],
                    'label': label,
                    'score': score
                })
        
        return results

# Usage
custom_pipeline = CustomSentimentPipeline()
results = custom_pipeline(["I love this!", "I hate this!"])
print(results)
</code></pre>
<h2 id="model-hub"><a class="header" href="#model-hub">Model Hub</a></h2>
<h3 id="searching-and-filtering-models"><a class="header" href="#searching-and-filtering-models">Searching and Filtering Models</a></h3>
<pre><code class="language-python">from huggingface_hub import HfApi, list_models

api = HfApi()

# List models
models = list_models(
    filter="text-classification",
    sort="downloads",
    direction=-1,
    limit=10
)

for model in models:
    print(f"{model.modelId}: {model.downloads} downloads")

# Search for specific models
models = list_models(search="bert", filter="fill-mask")
for model in models:
    print(model.modelId)
</code></pre>
<h3 id="uploading-models"><a class="header" href="#uploading-models">Uploading Models</a></h3>
<pre><code class="language-python">from huggingface_hub import HfApi, create_repo

# Create repository
api = HfApi()
repo_url = create_repo(
    repo_id="username/model-name",
    token="your_token_here",
    private=False
)

# Upload model
api.upload_file(
    path_or_fileobj="path/to/model.bin",
    path_in_repo="model.bin",
    repo_id="username/model-name",
    token="your_token_here"
)

# Or use model.push_to_hub()
model.push_to_hub("username/model-name", token="your_token_here")
tokenizer.push_to_hub("username/model-name", token="your_token_here")
</code></pre>
<h2 id="datasets-library"><a class="header" href="#datasets-library">Datasets Library</a></h2>
<h3 id="loading-datasets"><a class="header" href="#loading-datasets">Loading Datasets</a></h3>
<pre><code class="language-python">from datasets import load_dataset, load_metric

# Load popular datasets
dataset = load_dataset("glue", "mrpc")
print(dataset)

# Load specific split
train_dataset = load_dataset("imdb", split="train")
test_dataset = load_dataset("imdb", split="test")

# Load subset
small_train = load_dataset("imdb", split="train[:1000]")

# Stream large datasets
dataset = load_dataset("c4", "en", streaming=True)
for example in dataset:
    print(example)
    break

# Load from CSV
dataset = load_dataset("csv", data_files="path/to/file.csv")

# Load from JSON
dataset = load_dataset("json", data_files="path/to/file.json")

# Load from multiple files
dataset = load_dataset(
    "json", 
    data_files={
        "train": "train.json",
        "test": "test.json"
    }
)
</code></pre>
<h3 id="dataset-operations"><a class="header" href="#dataset-operations">Dataset Operations</a></h3>
<pre><code class="language-python">from datasets import Dataset, DatasetDict

# Create custom dataset
data = {
    "text": ["Hello", "World", "!"],
    "label": [0, 1, 0]
}
dataset = Dataset.from_dict(data)

# Map function
def tokenize_function(examples):
    return tokenizer(examples["text"], padding="max_length", truncation=True)

tokenized_dataset = dataset.map(tokenize_function, batched=True)

# Filter
filtered_dataset = dataset.filter(lambda x: x["label"] == 1)

# Select
small_dataset = dataset.select(range(100))

# Shuffle
shuffled = dataset.shuffle(seed=42)

# Split
split_dataset = dataset.train_test_split(test_size=0.2)

# Sort
sorted_dataset = dataset.sort("label")

# Add column
dataset = dataset.map(lambda x: {"length": len(x["text"])})

# Remove columns
dataset = dataset.remove_columns(["length"])

# Save and load
dataset.save_to_disk("path/to/save")
loaded_dataset = Dataset.load_from_disk("path/to/save")
</code></pre>
<h3 id="data-collators"><a class="header" href="#data-collators">Data Collators</a></h3>
<pre><code class="language-python">from transformers import DataCollatorWithPadding, DataCollatorForLanguageModeling

# Dynamic padding
data_collator = DataCollatorWithPadding(tokenizer=tokenizer)

# For MLM (masked language modeling)
data_collator = DataCollatorForLanguageModeling(
    tokenizer=tokenizer, 
    mlm=True, 
    mlm_probability=0.15
)

# For sequence-to-sequence
from transformers import DataCollatorForSeq2Seq
data_collator = DataCollatorForSeq2Seq(tokenizer=tokenizer, model=model)

# Custom data collator
from dataclasses import dataclass
from typing import Dict, List
import torch

@dataclass
class CustomDataCollator:
    tokenizer: AutoTokenizer
    
    def __call__(self, features: List[Dict[str, any]]) -&gt; Dict[str, torch.Tensor]:
        batch = {}
        
        # Extract and pad text
        texts = [f["text"] for f in features]
        tokenized = self.tokenizer(
            texts, 
            padding=True, 
            truncation=True, 
            return_tensors="pt"
        )
        
        batch.update(tokenized)
        
        # Add labels
        if "label" in features[0]:
            batch["labels"] = torch.tensor([f["label"] for f in features])
        
        return batch
</code></pre>
<h2 id="tokenizers"><a class="header" href="#tokenizers">Tokenizers</a></h2>
<h3 id="using-tokenizers"><a class="header" href="#using-tokenizers">Using Tokenizers</a></h3>
<pre><code class="language-python">from transformers import AutoTokenizer

tokenizer = AutoTokenizer.from_pretrained("bert-base-uncased")

# Basic tokenization
text = "Hello, how are you?"
tokens = tokenizer.tokenize(text)
print(f"Tokens: {tokens}")

# Encode (text to IDs)
input_ids = tokenizer.encode(text)
print(f"Input IDs: {input_ids}")

# Decode (IDs to text)
decoded = tokenizer.decode(input_ids)
print(f"Decoded: {decoded}")

# Full tokenization with special tokens
encoded = tokenizer(
    text,
    padding="max_length",
    truncation=True,
    max_length=128,
    return_tensors="pt"
)
print(f"Input IDs shape: {encoded['input_ids'].shape}")
print(f"Attention mask shape: {encoded['attention_mask'].shape}")

# Batch tokenization
texts = ["Hello!", "How are you?", "Nice to meet you."]
batch_encoded = tokenizer(
    texts,
    padding=True,
    truncation=True,
    return_tensors="pt"
)

# Token type IDs (for sentence pairs)
text_a = "This is sentence A"
text_b = "This is sentence B"
encoded = tokenizer(text_a, text_b, return_tensors="pt")
print(f"Token type IDs: {encoded['token_type_ids']}")
</code></pre>
<h3 id="fast-tokenizers"><a class="header" href="#fast-tokenizers">Fast Tokenizers</a></h3>
<pre><code class="language-python">from tokenizers import Tokenizer
from tokenizers.models import BPE, WordPiece
from tokenizers.trainers import BpeTrainer, WordPieceTrainer
from tokenizers.pre_tokenizers import Whitespace

# Create BPE tokenizer
tokenizer = Tokenizer(BPE())
tokenizer.pre_tokenizer = Whitespace()

# Train tokenizer
trainer = BpeTrainer(vocab_size=30000, special_tokens=["[PAD]", "[UNK]", "[CLS]", "[SEP]", "[MASK]"])
files = ["path/to/text1.txt", "path/to/text2.txt"]
tokenizer.train(files, trainer)

# Save tokenizer
tokenizer.save("path/to/tokenizer.json")

# Load tokenizer
from transformers import PreTrainedTokenizerFast
fast_tokenizer = PreTrainedTokenizerFast(tokenizer_file="path/to/tokenizer.json")
</code></pre>
<h2 id="training-and-fine-tuning"><a class="header" href="#training-and-fine-tuning">Training and Fine-tuning</a></h2>
<h3 id="using-trainer-api"><a class="header" href="#using-trainer-api">Using Trainer API</a></h3>
<pre><code class="language-python">from transformers import Trainer, TrainingArguments, AutoModelForSequenceClassification
from datasets import load_dataset, load_metric
import numpy as np

# Load dataset and model
dataset = load_dataset("glue", "mrpc")
model = AutoModelForSequenceClassification.from_pretrained("bert-base-uncased", num_labels=2)
tokenizer = AutoTokenizer.from_pretrained("bert-base-uncased")

# Tokenize dataset
def tokenize_function(examples):
    return tokenizer(examples["sentence1"], examples["sentence2"], padding="max_length", truncation=True)

tokenized_datasets = dataset.map(tokenize_function, batched=True)

# Define metrics
metric = load_metric("accuracy")

def compute_metrics(eval_pred):
    logits, labels = eval_pred
    predictions = np.argmax(logits, axis=-1)
    return metric.compute(predictions=predictions, references=labels)

# Training arguments
training_args = TrainingArguments(
    output_dir="./results",
    evaluation_strategy="epoch",
    save_strategy="epoch",
    learning_rate=2e-5,
    per_device_train_batch_size=16,
    per_device_eval_batch_size=16,
    num_train_epochs=3,
    weight_decay=0.01,
    load_best_model_at_end=True,
    metric_for_best_model="accuracy",
    logging_dir="./logs",
    logging_steps=100,
    save_total_limit=2,
    fp16=True,  # Mixed precision training
    dataloader_num_workers=4,
    gradient_accumulation_steps=2,
    warmup_steps=500,
)

# Create trainer
trainer = Trainer(
    model=model,
    args=training_args,
    train_dataset=tokenized_datasets["train"],
    eval_dataset=tokenized_datasets["validation"],
    compute_metrics=compute_metrics,
)

# Train
trainer.train()

# Evaluate
results = trainer.evaluate()
print(results)

# Predict
predictions = trainer.predict(tokenized_datasets["test"])
print(predictions.metrics)

# Save model
trainer.save_model("./final_model")
</code></pre>
<h3 id="custom-training-loop"><a class="header" href="#custom-training-loop">Custom Training Loop</a></h3>
<pre><code class="language-python">from torch.utils.data import DataLoader
from transformers import AdamW, get_linear_schedule_with_warmup
from tqdm import tqdm

def train_custom(model, train_dataset, eval_dataset, num_epochs=3):
    device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
    model.to(device)
    
    # Data loaders
    train_loader = DataLoader(train_dataset, batch_size=16, shuffle=True)
    eval_loader = DataLoader(eval_dataset, batch_size=16)
    
    # Optimizer and scheduler
    optimizer = AdamW(model.parameters(), lr=2e-5)
    total_steps = len(train_loader) * num_epochs
    scheduler = get_linear_schedule_with_warmup(
        optimizer,
        num_warmup_steps=0.1 * total_steps,
        num_training_steps=total_steps
    )
    
    # Training loop
    for epoch in range(num_epochs):
        model.train()
        total_loss = 0
        
        progress_bar = tqdm(train_loader, desc=f"Epoch {epoch+1}")
        for batch in progress_bar:
            # Move to device
            batch = {k: v.to(device) for k, v in batch.items()}
            
            # Forward pass
            outputs = model(**batch)
            loss = outputs.loss
            
            # Backward pass
            optimizer.zero_grad()
            loss.backward()
            torch.nn.utils.clip_grad_norm_(model.parameters(), 1.0)
            optimizer.step()
            scheduler.step()
            
            total_loss += loss.item()
            progress_bar.set_postfix({"loss": loss.item()})
        
        # Evaluation
        model.eval()
        eval_loss = 0
        predictions, true_labels = [], []
        
        with torch.no_grad():
            for batch in eval_loader:
                batch = {k: v.to(device) for k, v in batch.items()}
                outputs = model(**batch)
                
                eval_loss += outputs.loss.item()
                
                logits = outputs.logits
                preds = torch.argmax(logits, dim=-1)
                
                predictions.extend(preds.cpu().numpy())
                true_labels.extend(batch["labels"].cpu().numpy())
        
        # Compute metrics
        accuracy = np.mean(np.array(predictions) == np.array(true_labels))
        
        print(f"Epoch {epoch+1}:")
        print(f"  Train Loss: {total_loss/len(train_loader):.4f}")
        print(f"  Eval Loss: {eval_loss/len(eval_loader):.4f}")
        print(f"  Accuracy: {accuracy:.4f}")
    
    return model
</code></pre>
<h2 id="inference-and-deployment"><a class="header" href="#inference-and-deployment">Inference and Deployment</a></h2>
<h3 id="optimized-inference"><a class="header" href="#optimized-inference">Optimized Inference</a></h3>
<pre><code class="language-python"># Model optimization
from transformers import pipeline
from optimum.onnxruntime import ORTModelForSequenceClassification, ORTOptimizer
from optimum.onnxruntime.configuration import OptimizationConfig

# Convert to ONNX
model = ORTModelForSequenceClassification.from_pretrained(
    "distilbert-base-uncased-finetuned-sst-2-english",
    from_transformers=True
)

# Optimize
optimizer = ORTOptimizer.from_pretrained(model)
optimization_config = OptimizationConfig(optimization_level=2)
optimizer.optimize(save_dir="optimized_model", optimization_config=optimization_config)

# Use optimized model
optimized_pipeline = pipeline(
    "sentiment-analysis",
    model=model,
    tokenizer=tokenizer
)

# Quantization
from optimum.onnxruntime import ORTQuantizer
from optimum.onnxruntime.configuration import AutoQuantizationConfig

quantizer = ORTQuantizer.from_pretrained(model)
qconfig = AutoQuantizationConfig.avx512_vnni(is_static=False)
quantizer.quantize(save_dir="quantized_model", quantization_config=qconfig)
</code></pre>
<h3 id="batch-inference"><a class="header" href="#batch-inference">Batch Inference</a></h3>
<pre><code class="language-python">def batch_predict(texts, model, tokenizer, batch_size=32):
    """Efficient batch prediction"""
    device = torch.device("cuda" if torch.cuda.is_available() else "cpu")
    model.to(device)
    model.eval()
    
    all_predictions = []
    
    for i in range(0, len(texts), batch_size):
        batch_texts = texts[i:i+batch_size]
        
        # Tokenize
        inputs = tokenizer(
            batch_texts,
            padding=True,
            truncation=True,
            max_length=512,
            return_tensors="pt"
        )
        inputs = {k: v.to(device) for k, v in inputs.items()}
        
        # Predict
        with torch.no_grad():
            outputs = model(**inputs)
            logits = outputs.logits
            predictions = torch.argmax(logits, dim=-1)
        
        all_predictions.extend(predictions.cpu().numpy())
    
    return all_predictions

# Usage
texts = ["text1", "text2", "text3"] * 1000
predictions = batch_predict(texts, model, tokenizer)
</code></pre>
<h3 id="api-deployment"><a class="header" href="#api-deployment">API Deployment</a></h3>
<pre><code class="language-python">from fastapi import FastAPI
from pydantic import BaseModel
from transformers import pipeline

app = FastAPI()

# Load model once
classifier = pipeline("sentiment-analysis")

class TextRequest(BaseModel):
    text: str

class PredictionResponse(BaseModel):
    label: str
    score: float

@app.post("/predict", response_model=PredictionResponse)
def predict(request: TextRequest):
    result = classifier(request.text)[0]
    return PredictionResponse(label=result['label'], score=result['score'])

# Run with: uvicorn app:app --host 0.0.0.0 --port 8000
</code></pre>
<h2 id="practical-tips-8"><a class="header" href="#practical-tips-8">Practical Tips</a></h2>
<ol>
<li><strong>Model Selection</strong>: Choose based on task, speed, and accuracy requirements</li>
<li><strong>Tokenization</strong>: Handle special characters and multiple languages carefully</li>
<li><strong>Batch Size</strong>: Adjust based on GPU memory</li>
<li><strong>Mixed Precision</strong>: Use fp16 for faster training</li>
<li><strong>Gradient Accumulation</strong>: Simulate larger batch sizes</li>
<li><strong>Model Evaluation</strong>: Use appropriate metrics for your task</li>
</ol>
<h2 id="resources-12"><a class="header" href="#resources-12">Resources</a></h2>
<ul>
<li>Hugging Face Documentation: https://huggingface.co/docs</li>
<li>Course: https://huggingface.co/course</li>
<li>Model Hub: https://huggingface.co/models</li>
<li>Datasets Hub: https://huggingface.co/datasets</li>
<li>Forums: https://discuss.huggingface.co/</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pytorch"><a class="header" href="#pytorch">PyTorch</a></h1>
<h2 id="overview-29"><a class="header" href="#overview-29">Overview</a></h2>
<p>PyTorch is a deep learning framework developed by Meta (Facebook) that provides:</p>
<ul>
<li><strong>Dynamic computation graphs</strong>: Build networks on-the-fly (unlike static graphs in TensorFlow)</li>
<li><strong>Pythonic API</strong>: Natural, intuitive syntax for building neural networks</li>
<li><strong>GPU acceleration</strong>: Seamless CUDA support for fast training</li>
<li><strong>Rich ecosystem</strong>: Tools for NLP, computer vision, reinforcement learning</li>
<li><strong>Production ready</strong>: Deploy with TorchScript, ONNX, or mobile</li>
</ul>
<h2 id="installation-4"><a class="header" href="#installation-4">Installation</a></h2>
<pre><code class="language-bash"># CPU only
pip install torch torchvision torchaudio

# GPU (CUDA 11.8)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# GPU (CUDA 12.1)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121

# Check installation
python -c "import torch; print(torch.__version__); print(torch.cuda.is_available())"
</code></pre>
<h2 id="core-concepts-1"><a class="header" href="#core-concepts-1">Core Concepts</a></h2>
<h3 id="tensors"><a class="header" href="#tensors">Tensors</a></h3>
<p>Tensors are the fundamental building blocks - N-dimensional arrays:</p>
<pre><code class="language-python">import torch

# Creating tensors
t1 = torch.tensor([1, 2, 3])           # From list
t2 = torch.zeros(3, 4)                 # Zeros tensor
t3 = torch.ones(2, 3)                  # Ones tensor
t4 = torch.randn(3, 4)                 # Random normal distribution
t5 = torch.arange(0, 10, 2)            # Range: [0, 2, 4, 6, 8]

# Tensor properties
print(t1.shape)                         # torch.Size([3])
print(t1.dtype)                         # torch.int64
print(t1.device)                        # cpu

# Move to GPU
if torch.cuda.is_available():
    t1 = t1.cuda()                      # or t1.to('cuda')
    print(t1.device)                    # cuda:0

# Tensor operations
a = torch.tensor([1.0, 2.0, 3.0])
b = torch.tensor([4.0, 5.0, 6.0])

c = a + b                               # Element-wise addition
d = a * b                               # Element-wise multiplication
e = torch.dot(a, b)                     # Dot product: 32.0
f = torch.matmul(a.view(3, 1), b.view(1, 3))  # Matrix multiplication

# Reshaping
x = torch.randn(2, 3, 4)
y = x.view(6, 4)                        # Reshape to (6, 4)
z = x.reshape(-1)                       # Flatten (auto-infer dimension)
</code></pre>
<h3 id="autograd-automatic-differentiation"><a class="header" href="#autograd-automatic-differentiation">Autograd (Automatic Differentiation)</a></h3>
<p>PyTorch computes gradients automatically:</p>
<pre><code class="language-python">import torch

# Enable gradient tracking
x = torch.tensor([2.0, 3.0], requires_grad=True)
y = torch.tensor([1.0, 2.0], requires_grad=True)

# Forward pass
z = x.pow(2).sum() + (y * x).sum()      # z = x^2 + y*x

# Backward pass (compute gradients)
z.backward()

print(x.grad)                           # dz/dx
print(y.grad)                           # dz/dy

# Example: dz/dx = 2*x + y = [5, 8] for x=[2,3], y=[1,2]
</code></pre>
<h3 id="neural-network-building"><a class="header" href="#neural-network-building">Neural Network Building</a></h3>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.nn.functional as F

# Define a simple network
class SimpleNet(nn.Module):
    def __init__(self):
        super(SimpleNet, self).__init__()
        self.fc1 = nn.Linear(784, 128)  # Input: 28*28=784, Output: 128
        self.fc2 = nn.Linear(128, 64)
        self.fc3 = nn.Linear(64, 10)    # 10 output classes

    def forward(self, x):
        x = x.view(x.size(0), -1)       # Flatten: (batch, 784)
        x = F.relu(self.fc1(x))         # ReLU activation
        x = F.relu(self.fc2(x))
        x = self.fc3(x)                 # No activation (raw logits)
        return x

# Create model and move to device
device = torch.device('cuda' if torch.cuda.is_available() else 'cpu')
model = SimpleNet().to(device)

# Check model architecture
print(model)

# Count parameters
total_params = sum(p.numel() for p in model.parameters())
print(f"Total parameters: {total_params}")
</code></pre>
<h2 id="datasets-and-dataloaders"><a class="header" href="#datasets-and-dataloaders">Datasets and DataLoaders</a></h2>
<h3 id="custom-dataset"><a class="header" href="#custom-dataset">Custom Dataset</a></h3>
<p>Create custom datasets by inheriting from <code>torch.utils.data.Dataset</code>:</p>
<pre><code class="language-python">from torch.utils.data import Dataset, DataLoader
import torch

class CustomDataset(Dataset):
    def __init__(self, data, labels, transform=None):
        """
        Args:
            data: List or array of inputs
            labels: List or array of labels
            transform: Optional transformations to apply
        """
        self.data = data
        self.labels = labels
        self.transform = transform

    def __len__(self):
        """Return total number of samples"""
        return len(self.data)

    def __getitem__(self, idx):
        """Return sample at index idx"""
        sample = self.data[idx]
        label = self.labels[idx]

        if self.transform:
            sample = self.transform(sample)

        return sample, label


# Usage
X = torch.randn(1000, 28, 28)  # 1000 images of 28x28
y = torch.randint(0, 10, (1000,))  # 1000 labels (10 classes)

dataset = CustomDataset(X, y)
print(f"Dataset size: {len(dataset)}")
sample, label = dataset[0]
print(f"Sample shape: {sample.shape}, Label: {label}")
</code></pre>
<h3 id="image-dataset-with-transforms"><a class="header" href="#image-dataset-with-transforms">Image Dataset with Transforms</a></h3>
<pre><code class="language-python">from torchvision import transforms
from PIL import Image

class ImageDataset(Dataset):
    def __init__(self, image_paths, labels, transform=None):
        self.image_paths = image_paths
        self.labels = labels
        self.transform = transform

    def __len__(self):
        return len(self.image_paths)

    def __getitem__(self, idx):
        # Load image
        image = Image.open(self.image_paths[idx]).convert('RGB')

        # Apply transforms
        if self.transform:
            image = self.transform(image)

        label = self.labels[idx]
        return image, label


# Define transforms
train_transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.RandomHorizontalFlip(p=0.5),
    transforms.RandomRotation(10),
    transforms.ToTensor(),
    transforms.Normalize(
        mean=[0.485, 0.456, 0.406],
        std=[0.229, 0.224, 0.225]
    )
])

test_transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.ToTensor(),
    transforms.Normalize(
        mean=[0.485, 0.456, 0.406],
        std=[0.229, 0.224, 0.225]
    )
])

# Create datasets
train_dataset = ImageDataset(train_paths, train_labels, transform=train_transform)
test_dataset = ImageDataset(test_paths, test_labels, transform=test_transform)
</code></pre>
<h3 id="built-in-datasets"><a class="header" href="#built-in-datasets">Built-in Datasets</a></h3>
<p>PyTorch provides common datasets in <code>torchvision.datasets</code>:</p>
<pre><code class="language-python">from torchvision import datasets, transforms

# MNIST
mnist_train = datasets.MNIST(
    root='./data',
    train=True,
    download=True,
    transform=transforms.ToTensor()
)

mnist_test = datasets.MNIST(
    root='./data',
    train=False,
    download=True,
    transform=transforms.ToTensor()
)

# CIFAR-10
cifar10 = datasets.CIFAR10(
    root='./data',
    train=True,
    download=True,
    transform=transforms.ToTensor()
)

# ImageNet (large, requires manual download)
imagenet = datasets.ImageNet(
    root='./data',
    split='train',
    transform=transforms.ToTensor()
)

# Print dataset info
print(f"Dataset size: {len(mnist_train)}")
sample, label = mnist_train[0]
print(f"Sample shape: {sample.shape}, Label: {label}")
</code></pre>
<h3 id="dataloader"><a class="header" href="#dataloader">DataLoader</a></h3>
<p>DataLoader handles batching, shuffling, and parallel loading:</p>
<pre><code class="language-python">from torch.utils.data import DataLoader

# Create DataLoader
train_loader = DataLoader(
    dataset=train_dataset,
    batch_size=32,              # Samples per batch
    shuffle=True,               # Shuffle order every epoch
    num_workers=4,              # Parallel workers for data loading
    pin_memory=True,            # Pin memory for faster GPU transfer
    drop_last=True              # Drop last incomplete batch
)

test_loader = DataLoader(
    dataset=test_dataset,
    batch_size=32,
    shuffle=False,              # Don't shuffle test data
    num_workers=4,
    pin_memory=True,
    drop_last=False
)

# Iterate through batches
for batch_idx, (batch_x, batch_y) in enumerate(train_loader):
    print(f"Batch {batch_idx}")
    print(f"  Input shape: {batch_x.shape}")  # (32, 1, 28, 28)
    print(f"  Labels shape: {batch_y.shape}")  # (32,)

    if batch_idx == 0:
        break
</code></pre>
<h3 id="data-splits"><a class="header" href="#data-splits">Data Splits</a></h3>
<pre><code class="language-python">from torch.utils.data import random_split

# Original dataset
dataset = CustomDataset(X, y)

# Split into train (70%), val (15%), test (15%)
total_size = len(dataset)
train_size = int(0.7 * total_size)
val_size = int(0.15 * total_size)
test_size = total_size - train_size - val_size

train_set, val_set, test_set = random_split(
    dataset,
    [train_size, val_size, test_size]
)

# Create loaders
train_loader = DataLoader(train_set, batch_size=32, shuffle=True)
val_loader = DataLoader(val_set, batch_size=32, shuffle=False)
test_loader = DataLoader(test_set, batch_size=32, shuffle=False)
</code></pre>
<h3 id="data-augmentation-strategies"><a class="header" href="#data-augmentation-strategies">Data Augmentation Strategies</a></h3>
<pre><code class="language-python">from torchvision import transforms

# For images
augmentation = transforms.Compose([
    transforms.RandomCrop(32, padding=4),
    transforms.RandomHorizontalFlip(p=0.5),
    transforms.RandomVerticalFlip(p=0.2),
    transforms.RandomRotation(15),
    transforms.ColorJitter(brightness=0.2, contrast=0.2),
    transforms.GaussianBlur(kernel_size=3),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.5], std=[0.5])
])

# For text (custom)
class TextAugmentation:
    def __init__(self, vocab_size=10000):
        self.vocab_size = vocab_size

    def __call__(self, tokens):
        # Random dropout of tokens
        if torch.rand(1) &gt; 0.5:
            mask = torch.rand(len(tokens)) &gt; 0.1
            tokens = tokens[mask]
        return tokens

# Custom augmentation
class MixupAugmentation:
    def __init__(self, alpha=1.0):
        self.alpha = alpha

    def __call__(self, batch_x, batch_y):
        """Mixup data augmentation"""
        lam = torch.distributions.Beta(self.alpha, self.alpha).sample()
        batch_size = batch_x.size(0)

        index = torch.randperm(batch_size)
        mixed_x = lam * batch_x + (1 - lam) * batch_x[index]
        mixed_y = lam * batch_y.float() + (1 - lam) * batch_y[index].float()

        return mixed_x, mixed_y
</code></pre>
<h3 id="dataloader-performance-tips"><a class="header" href="#dataloader-performance-tips">DataLoader Performance Tips</a></h3>
<pre><code class="language-python"># Good configuration
loader = DataLoader(
    dataset,
    batch_size=64,              # Larger batches for efficiency
    shuffle=True,
    num_workers=4,              # Use multiple workers (2-4 per GPU)
    pin_memory=True,            # Pin to CPU memory for GPU transfer
    persistent_workers=True,    # Keep workers alive between epochs
    prefetch_factor=2           # Prefetch batches (2-4 recommended)
)

# Monitor data loading performance
import time

start = time.time()
for batch in loader:
    pass
elapsed = time.time() - start
print(f"Time to load {len(loader)} batches: {elapsed:.2f}s")

# If loading is slow:
# - Increase num_workers
# - Check disk speed (SSD vs HDD)
# - Use pin_memory=True
# - Reduce image resolution if possible
# - Use data compression
</code></pre>
<h3 id="combining-datasets"><a class="header" href="#combining-datasets">Combining Datasets</a></h3>
<pre><code class="language-python">from torch.utils.data import ConcatDataset, Subset

# Concatenate multiple datasets
combined_dataset = ConcatDataset([dataset1, dataset2, dataset3])

# Subset of dataset
indices = list(range(0, 100))  # First 100 samples
subset = Subset(dataset, indices)

# Weighted sampling (e.g., for imbalanced data)
from torch.utils.data import WeightedRandomSampler

weights = [1.0 if label == 0 else 10.0 for label in dataset.labels]
sampler = WeightedRandomSampler(weights, len(dataset), replacement=True)

loader = DataLoader(
    dataset,
    batch_size=32,
    sampler=sampler  # Use sampler instead of shuffle
)
</code></pre>
<h2 id="training-loop"><a class="header" href="#training-loop">Training Loop</a></h2>
<pre><code class="language-python">import torch
import torch.nn as nn
import torch.optim as optim
from torch.utils.data import DataLoader, TensorDataset

# Dummy data
X_train = torch.randn(1000, 784)
y_train = torch.randint(0, 10, (1000,))

# Create dataloader
dataset = TensorDataset(X_train, y_train)
dataloader = DataLoader(dataset, batch_size=32, shuffle=True)

# Model, loss, optimizer
model = SimpleNet().to(device)
criterion = nn.CrossEntropyLoss()
optimizer = optim.Adam(model.parameters(), lr=0.001)

# Training loop
num_epochs = 5
for epoch in range(num_epochs):
    total_loss = 0
    for batch_x, batch_y in dataloader:
        batch_x, batch_y = batch_x.to(device), batch_y.to(device)

        # Forward pass
        logits = model(batch_x)
        loss = criterion(logits, batch_y)

        # Backward pass
        optimizer.zero_grad()           # Clear old gradients
        loss.backward()                 # Compute new gradients
        optimizer.step()                # Update parameters

        total_loss += loss.item()

    avg_loss = total_loss / len(dataloader)
    print(f"Epoch {epoch+1}/{num_epochs}, Loss: {avg_loss:.4f}")
</code></pre>
<h2 id="convolutional-neural-networks-1"><a class="header" href="#convolutional-neural-networks-1">Convolutional Neural Networks</a></h2>
<pre><code class="language-python">class CNN(nn.Module):
    def __init__(self):
        super(CNN, self).__init__()
        # Input: (batch, 3, 32, 32) - 3 channels, 32x32 images
        self.conv1 = nn.Conv2d(3, 32, kernel_size=3, padding=1)
        self.conv2 = nn.Conv2d(32, 64, kernel_size=3, padding=1)
        self.pool = nn.MaxPool2d(2, 2)
        self.fc1 = nn.Linear(64 * 8 * 8, 128)
        self.fc2 = nn.Linear(128, 10)
        self.dropout = nn.Dropout(0.5)

    def forward(self, x):
        # Conv block 1
        x = self.conv1(x)               # (batch, 32, 32, 32)
        x = F.relu(x)
        x = self.pool(x)                # (batch, 32, 16, 16)

        # Conv block 2
        x = self.conv2(x)               # (batch, 64, 16, 16)
        x = F.relu(x)
        x = self.pool(x)                # (batch, 64, 8, 8)

        # Flatten and FC layers
        x = x.view(x.size(0), -1)       # (batch, 64*8*8)
        x = F.relu(self.fc1(x))
        x = self.dropout(x)
        x = self.fc2(x)
        return x

model = CNN().to(device)
</code></pre>
<h2 id="recurrent-neural-networks-1"><a class="header" href="#recurrent-neural-networks-1">Recurrent Neural Networks</a></h2>
<pre><code class="language-python">class RNN(nn.Module):
    def __init__(self, input_size, hidden_size, num_layers, output_size):
        super(RNN, self).__init__()
        self.hidden_size = hidden_size
        self.num_layers = num_layers

        self.lstm = nn.LSTM(
            input_size=input_size,
            hidden_size=hidden_size,
            num_layers=num_layers,
            batch_first=True,           # Input shape: (batch, seq_len, input_size)
            dropout=0.5
        )
        self.fc = nn.Linear(hidden_size, output_size)

    def forward(self, x):
        # x shape: (batch, seq_len, input_size)
        lstm_out, (h_n, c_n) = self.lstm(x)
        # lstm_out: (batch, seq_len, hidden_size)
        # h_n: (num_layers, batch, hidden_size) - final hidden state

        # Use last hidden state for classification
        last_hidden = h_n[-1]           # (batch, hidden_size)
        out = self.fc(last_hidden)      # (batch, output_size)
        return out

model = RNN(input_size=100, hidden_size=256, num_layers=2, output_size=10).to(device)
</code></pre>
<h2 id="model-evaluation"><a class="header" href="#model-evaluation">Model Evaluation</a></h2>
<pre><code class="language-python"># Evaluation mode (disables dropout, batch norm uses running stats)
model.eval()

correct = 0
total = 0

with torch.no_grad():                   # Disable gradient computation
    for batch_x, batch_y in test_dataloader:
        batch_x, batch_y = batch_x.to(device), batch_y.to(device)

        logits = model(batch_x)
        predictions = torch.argmax(logits, dim=1)

        correct += (predictions == batch_y).sum().item()
        total += batch_y.size(0)

accuracy = correct / total
print(f"Accuracy: {accuracy:.4f}")

# Switch back to training mode
model.train()
</code></pre>
<h2 id="saving-and-loading-models"><a class="header" href="#saving-and-loading-models">Saving and Loading Models</a></h2>
<pre><code class="language-python"># Save model
torch.save(model.state_dict(), 'model.pth')

# Load model
model = SimpleNet().to(device)
model.load_state_dict(torch.load('model.pth'))

# Save entire checkpoint
checkpoint = {
    'epoch': epoch,
    'model_state_dict': model.state_dict(),
    'optimizer_state_dict': optimizer.state_dict(),
    'loss': loss,
}
torch.save(checkpoint, 'checkpoint.pth')

# Load checkpoint
checkpoint = torch.load('checkpoint.pth')
model.load_state_dict(checkpoint['model_state_dict'])
optimizer.load_state_dict(checkpoint['optimizer_state_dict'])
epoch = checkpoint['epoch']
</code></pre>
<h2 id="common-optimizers"><a class="header" href="#common-optimizers">Common Optimizers</a></h2>
<pre><code class="language-python">import torch.optim as optim

# SGD with momentum
optimizer = optim.SGD(model.parameters(), lr=0.01, momentum=0.9)

# Adam (adaptive learning rate)
optimizer = optim.Adam(model.parameters(), lr=0.001, betas=(0.9, 0.999))

# RMSprop
optimizer = optim.RMSprop(model.parameters(), lr=0.01, alpha=0.99)

# Learning rate scheduling
scheduler = optim.lr_scheduler.StepLR(optimizer, step_size=10, gamma=0.1)

# In training loop:
for epoch in range(num_epochs):
    # ... training code ...
    scheduler.step()                    # Decay learning rate
</code></pre>
<h2 id="loss-functions-1"><a class="header" href="#loss-functions-1">Loss Functions</a></h2>
<pre><code class="language-python"># Classification
criterion = nn.CrossEntropyLoss()       # Combines LogSoftmax + NLLLoss
criterion = nn.BCEWithLogitsLoss()      # Binary classification

# Regression
criterion = nn.MSELoss()                # Mean Squared Error
criterion = nn.L1Loss()                 # Mean Absolute Error
criterion = nn.SmoothL1Loss()           # Huber loss

# Custom loss
class CustomLoss(nn.Module):
    def forward(self, pred, target):
        return (pred - target).pow(2).mean()
</code></pre>
<h2 id="advanced-techniques"><a class="header" href="#advanced-techniques">Advanced Techniques</a></h2>
<h3 id="batch-normalization-1"><a class="header" href="#batch-normalization-1">Batch Normalization</a></h3>
<pre><code class="language-python">class BNNetwork(nn.Module):
    def __init__(self):
        super(BNNetwork, self).__init__()
        self.fc1 = nn.Linear(784, 256)
        self.bn1 = nn.BatchNorm1d(256)  # Normalize features
        self.fc2 = nn.Linear(256, 128)
        self.bn2 = nn.BatchNorm1d(128)
        self.fc3 = nn.Linear(128, 10)

    def forward(self, x):
        x = x.view(x.size(0), -1)
        x = self.fc1(x)
        x = self.bn1(x)                 # Normalize after linear layer
        x = F.relu(x)

        x = self.fc2(x)
        x = self.bn2(x)
        x = F.relu(x)

        x = self.fc3(x)
        return x
</code></pre>
<h3 id="gradient-clipping"><a class="header" href="#gradient-clipping">Gradient Clipping</a></h3>
<pre><code class="language-python"># Prevent exploding gradients
torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)
torch.nn.utils.clip_grad_value_(model.parameters(), clip_value=0.1)
</code></pre>
<h3 id="mixed-precision-training"><a class="header" href="#mixed-precision-training">Mixed Precision Training</a></h3>
<pre><code class="language-python">from torch.cuda.amp import autocast, GradScaler

scaler = GradScaler()

for batch_x, batch_y in dataloader:
    optimizer.zero_grad()

    with autocast():                    # Automatically cast to float16 where safe
        logits = model(batch_x)
        loss = criterion(logits, batch_y)

    scaler.scale(loss).backward()
    scaler.step(optimizer)
    scaler.update()
</code></pre>
<h2 id="time-complexity-2"><a class="header" href="#time-complexity-2">Time Complexity</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Time Complexity</th></tr></thead><tbody>
<tr><td><strong>Forward pass</strong></td><td>O(n * hidden_size) for dense layers</td></tr>
<tr><td><strong>Backward pass</strong></td><td>O(n * hidden_size) (2-3x forward)</td></tr>
<tr><td><strong>Conv2D</strong></td><td>O(H * W * C_in * K^2) per sample</td></tr>
<tr><td><strong>LSTM</strong></td><td>O(seq_len * hidden_size^2) per sample</td></tr>
</tbody></table>
</div>
<h2 id="best-practices-17"><a class="header" href="#best-practices-17">Best Practices</a></h2>
<ol>
<li><strong>Use DataLoader</strong> for batching and shuffling</li>
<li><strong>Track metrics</strong> with tensorboard or wandb</li>
<li><strong>Use gradient clipping</strong> for unstable training</li>
<li><strong>Normalize inputs</strong> (mean=0, std=1)</li>
<li><strong>Monitor learning</strong> - plot loss and metrics</li>
<li><strong>Save checkpoints</strong> periodically during training</li>
<li><strong>Use model.eval()</strong> during validation/testing</li>
<li><strong>Pin memory</strong> for faster data loading: <code>DataLoader(..., pin_memory=True)</code></li>
</ol>
<h2 id="common-issues-4"><a class="header" href="#common-issues-4">Common Issues</a></h2>
<h3 id="out-of-memory"><a class="header" href="#out-of-memory">Out of Memory</a></h3>
<pre><code class="language-python"># Solution 1: Reduce batch size
batch_size = 16  # Instead of 32

# Solution 2: Gradient accumulation
accumulation_steps = 4
for i, (batch_x, batch_y) in enumerate(dataloader):
    logits = model(batch_x)
    loss = criterion(logits, batch_y) / accumulation_steps
    loss.backward()

    if (i + 1) % accumulation_steps == 0:
        optimizer.step()
        optimizer.zero_grad()
</code></pre>
<h3 id="nan-loss"><a class="header" href="#nan-loss">NaN Loss</a></h3>
<ul>
<li>Learning rate too high</li>
<li>Batch normalization issues</li>
<li>Unstable loss function</li>
<li>Check for gradient clipping</li>
</ul>
<h3 id="slow-training"><a class="header" href="#slow-training">Slow Training</a></h3>
<ul>
<li>Use GPU (move model and data to CUDA)</li>
<li>Increase batch size</li>
<li>Use mixed precision training</li>
<li>Profile with <code>torch.profiler</code></li>
</ul>
<h2 id="eli10-14"><a class="header" href="#eli10-14">ELI10</a></h2>
<p>PyTorch is like a smart building assistant:</p>
<ol>
<li><strong>You design the blueprint</strong> (define the network architecture)</li>
<li><strong>PyTorch remembers every step</strong> (autograd tracks all operations)</li>
<li><strong>You show examples</strong> (training data)</li>
<li><strong>PyTorch automatically learns</strong> (backpropagation adjusts weights)</li>
<li><strong>It gets better each time</strong> (more epochs = better performance)</li>
</ol>
<p>It's like learning to cook - you follow the recipe, taste the result, adjust ingredients, and get better over time!</p>
<h2 id="further-resources-14"><a class="header" href="#further-resources-14">Further Resources</a></h2>
<ul>
<li><a href="https://pytorch.org/docs/stable/index.html">PyTorch Official Documentation</a></li>
<li><a href="https://pytorch.org/tutorials/">PyTorch Tutorials</a></li>
<li><a href="https://www.coursera.org/learn/neural-networks-deep-learning">Deep Learning Specialization with PyTorch</a></li>
<li><a href="https://lightning.ai/">PyTorch Lightning</a> - High-level wrapper</li>
<li><a href="https://huggingface.co/transformers/">Hugging Face Transformers</a> - NLP with PyTorch</li>
<li><a href="https://course.fast.ai/">Fast.ai</a> - Practical deep learning course</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interesting-machine-learning-papers"><a class="header" href="#interesting-machine-learning-papers">Interesting Machine Learning Papers</a></h1>
<p>Key papers that shaped the field of machine learning and deep learning.</p>
<h2 id="table-of-contents-15"><a class="header" href="#table-of-contents-15">Table of Contents</a></h2>
<ol>
<li><a href="machine_learning/interesting_papers.html#computer-vision">Computer Vision</a></li>
<li><a href="machine_learning/interesting_papers.html#natural-language-processing">Natural Language Processing</a></li>
<li><a href="machine_learning/interesting_papers.html#generative-models">Generative Models</a></li>
<li><a href="machine_learning/interesting_papers.html#reinforcement-learning">Reinforcement Learning</a></li>
<li><a href="machine_learning/interesting_papers.html#general-machine-learning">General Machine Learning</a></li>
<li><a href="machine_learning/interesting_papers.html#optimization">Optimization</a></li>
</ol>
<h2 id="computer-vision"><a class="header" href="#computer-vision">Computer Vision</a></h2>
<h3 id="alexnet-2012"><a class="header" href="#alexnet-2012">AlexNet (2012)</a></h3>
<p><strong>ImageNet Classification with Deep Convolutional Neural Networks</strong></p>
<ul>
<li>Authors: Alex Krizhevsky, Ilya Sutskever, Geoffrey Hinton</li>
<li>Key Contributions:
<ul>
<li>First deep CNN to win ImageNet competition</li>
<li>Used ReLU activation, dropout, and data augmentation</li>
<li>GPU training for deep networks</li>
<li>Reduced error rate from 26% to 15.3%</li>
</ul>
</li>
<li>Impact: Sparked deep learning revolution</li>
</ul>
<h3 id="vggnet-2014"><a class="header" href="#vggnet-2014">VGGNet (2014)</a></h3>
<p><strong>Very Deep Convolutional Networks for Large-Scale Image Recognition</strong></p>
<ul>
<li>Authors: Karen Simonyan, Andrew Zisserman</li>
<li>Key Contributions:
<ul>
<li>Showed depth is crucial (16-19 layers)</li>
<li>Used small 3x3 filters throughout</li>
<li>Simple, homogeneous architecture</li>
</ul>
</li>
<li>Architecture: Stacked 3x3 conv layers, 2x2 max pooling</li>
</ul>
<h3 id="resnet-2015"><a class="header" href="#resnet-2015">ResNet (2015)</a></h3>
<p><strong>Deep Residual Learning for Image Recognition</strong></p>
<ul>
<li>Authors: Kaiming He, Xiangyu Zhang, Shaoqing Ren, Jian Sun</li>
<li>Key Contributions:
<ul>
<li>Residual connections solve vanishing gradient problem</li>
<li>Enabled training of networks with 100+ layers</li>
<li>Won ImageNet 2015 with 152 layers</li>
<li>Skip connections: y = F(x) + x</li>
</ul>
</li>
<li>Impact: Fundamental building block for modern architectures</li>
</ul>
<h3 id="vision-transformer-vit-2020"><a class="header" href="#vision-transformer-vit-2020">Vision Transformer (ViT) (2020)</a></h3>
<p><strong>An Image is Worth 16x16 Words: Transformers for Image Recognition at Scale</strong></p>
<ul>
<li>Authors: Alexey Dosovitskiy et al. (Google Research)</li>
<li>Key Contributions:
<ul>
<li>Applied transformers directly to image patches</li>
<li>Competitive with CNNs on large datasets</li>
<li>Self-attention for vision tasks</li>
</ul>
</li>
<li>Architecture:
<ul>
<li>Split image into patches</li>
<li>Linear embedding of patches</li>
<li>Add position embeddings</li>
<li>Standard transformer encoder</li>
</ul>
</li>
</ul>
<h3 id="yolo-2015"><a class="header" href="#yolo-2015">YOLO (2015)</a></h3>
<p><strong>You Only Look Once: Unified, Real-Time Object Detection</strong></p>
<ul>
<li>Authors: Joseph Redmon et al.</li>
<li>Key Contributions:
<ul>
<li>Single-stage object detection</li>
<li>Real-time performance (45 FPS)</li>
<li>End-to-end training</li>
<li>Grid-based prediction</li>
</ul>
</li>
</ul>
<h3 id="mask-r-cnn-2017"><a class="header" href="#mask-r-cnn-2017">Mask R-CNN (2017)</a></h3>
<p><strong>Mask R-CNN</strong></p>
<ul>
<li>Authors: Kaiming He, Georgia Gkioxari, Piotr Dollár, Ross Girshick</li>
<li>Key Contributions:
<ul>
<li>Instance segmentation framework</li>
<li>Extends Faster R-CNN with mask branch</li>
<li>Parallel prediction of masks and classes</li>
</ul>
</li>
</ul>
<h2 id="natural-language-processing"><a class="header" href="#natural-language-processing">Natural Language Processing</a></h2>
<h3 id="word2vec-2013"><a class="header" href="#word2vec-2013">Word2Vec (2013)</a></h3>
<p><strong>Efficient Estimation of Word Representations in Vector Space</strong></p>
<ul>
<li>Authors: Tomas Mikolov et al. (Google)</li>
<li>Key Contributions:
<ul>
<li>Distributed word representations</li>
<li>Skip-gram and CBOW architectures</li>
<li>Captures semantic relationships</li>
<li>king - man + woman ≈ queen</li>
</ul>
</li>
<li>Impact: Foundation for modern NLP embeddings</li>
</ul>
<h3 id="attention-is-all-you-need-2017"><a class="header" href="#attention-is-all-you-need-2017">Attention Is All You Need (2017)</a></h3>
<p><strong>Attention Is All You Need</strong></p>
<ul>
<li>Authors: Ashish Vaswani et al. (Google Brain)</li>
<li>Key Contributions:
<ul>
<li>Introduced Transformer architecture</li>
<li>Self-attention mechanism</li>
<li>No recurrence or convolution</li>
<li>Parallel training</li>
</ul>
</li>
<li>Architecture:
<ul>
<li>Multi-head self-attention</li>
<li>Position-wise feed-forward networks</li>
<li>Positional encoding</li>
<li>Encoder-decoder structure</li>
</ul>
</li>
<li>Impact: Revolutionized NLP and beyond</li>
</ul>
<h3 id="bert-2018"><a class="header" href="#bert-2018">BERT (2018)</a></h3>
<p><strong>BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</strong></p>
<ul>
<li>Authors: Jacob Devlin et al. (Google AI)</li>
<li>Key Contributions:
<ul>
<li>Bidirectional pre-training</li>
<li>Masked Language Modeling (MLM)</li>
<li>Next Sentence Prediction (NSP)</li>
<li>Transfer learning for NLP</li>
</ul>
</li>
<li>Pre-training objectives:
<ul>
<li>Mask 15% of tokens, predict them</li>
<li>Predict if sentence B follows A</li>
</ul>
</li>
<li>Impact: Set new SOTA on 11 NLP tasks</li>
</ul>
<h3 id="gpt-2018-2023"><a class="header" href="#gpt-2018-2023">GPT (2018-2023)</a></h3>
<p><strong>Improving Language Understanding by Generative Pre-Training</strong></p>
<ul>
<li>GPT-1 (2018): 117M parameters, unsupervised pre-training</li>
<li>GPT-2 (2019): 1.5B parameters, zero-shot learning</li>
<li>GPT-3 (2020): 175B parameters, few-shot learning</li>
<li>GPT-4 (2023): Multimodal, improved reasoning</li>
</ul>
<p>Key Contributions:</p>
<ul>
<li>Autoregressive language modeling</li>
<li>Scaling laws for language models</li>
<li>In-context learning</li>
<li>Emergent capabilities at scale</li>
</ul>
<h3 id="t5-2019"><a class="header" href="#t5-2019">T5 (2019)</a></h3>
<p><strong>Exploring the Limits of Transfer Learning with a Unified Text-to-Text Transformer</strong></p>
<ul>
<li>Authors: Colin Raffel et al. (Google)</li>
<li>Key Contributions:
<ul>
<li>Unified text-to-text framework</li>
<li>All NLP tasks as text generation</li>
<li>Comprehensive study of transfer learning</li>
</ul>
</li>
<li>Format: "translate English to German: text" → "translation"</li>
</ul>
<h3 id="electra-2020"><a class="header" href="#electra-2020">ELECTRA (2020)</a></h3>
<p><strong>ELECTRA: Pre-training Text Encoders as Discriminators Rather Than Generators</strong></p>
<ul>
<li>Authors: Kevin Clark et al. (Stanford/Google)</li>
<li>Key Contributions:
<ul>
<li>Replaced token detection (RTD)</li>
<li>More sample-efficient than BERT</li>
<li>Generator-discriminator framework</li>
<li>Discriminator predicts which tokens are replaced</li>
</ul>
</li>
</ul>
<h2 id="generative-models-1"><a class="header" href="#generative-models-1">Generative Models</a></h2>
<h3 id="gan-2014"><a class="header" href="#gan-2014">GAN (2014)</a></h3>
<p><strong>Generative Adversarial Networks</strong></p>
<ul>
<li>Authors: Ian Goodfellow et al.</li>
<li>Key Contributions:
<ul>
<li>Two-player minimax game</li>
<li>Generator vs Discriminator</li>
<li>Implicit density modeling</li>
</ul>
</li>
<li>Objective: min_G max_D V(D,G) = E[log D(x)] + E[log(1-D(G(z)))]</li>
<li>Impact: New paradigm for generative modeling</li>
</ul>
<h3 id="dcgan-2015"><a class="header" href="#dcgan-2015">DCGAN (2015)</a></h3>
<p><strong>Unsupervised Representation Learning with Deep Convolutional GANs</strong></p>
<ul>
<li>Authors: Alec Radford, Luke Metz, Soumith Chintala</li>
<li>Key Contributions:
<ul>
<li>Architectural guidelines for stable GAN training</li>
<li>All convolutional network</li>
<li>Batch normalization</li>
<li>No fully connected layers</li>
</ul>
</li>
<li>Best practices: Strided convolutions, BatchNorm, LeakyReLU</li>
</ul>
<h3 id="stylegan-2018-2020"><a class="header" href="#stylegan-2018-2020">StyleGAN (2018-2020)</a></h3>
<p><strong>A Style-Based Generator Architecture for GANs</strong></p>
<ul>
<li>Authors: Tero Karras et al. (NVIDIA)</li>
<li>Key Contributions:
<ul>
<li>Style-based generator</li>
<li>Adaptive Instance Normalization (AdaIN)</li>
<li>Progressive growing</li>
<li>High-quality face generation</li>
</ul>
</li>
<li>StyleGAN2 improvements: Weight demodulation, path length regularization</li>
</ul>
<h3 id="vae-2013"><a class="header" href="#vae-2013">VAE (2013)</a></h3>
<p><strong>Auto-Encoding Variational Bayes</strong></p>
<ul>
<li>Authors: Diederik Kingma, Max Welling</li>
<li>Key Contributions:
<ul>
<li>Variational inference for latent variable models</li>
<li>Reparameterization trick</li>
<li>ELBO objective</li>
<li>Probabilistic encoder-decoder</li>
</ul>
</li>
<li>Objective: Maximize ELBO = E[log p(x|z)] - KL(q(z|x)||p(z))</li>
</ul>
<h3 id="diffusion-models-2020"><a class="header" href="#diffusion-models-2020">Diffusion Models (2020)</a></h3>
<p><strong>Denoising Diffusion Probabilistic Models</strong></p>
<ul>
<li>Authors: Jonathan Ho, Ajay Jain, Pieter Abbeel</li>
<li>Key Contributions:
<ul>
<li>Iterative denoising process</li>
<li>High-quality image generation</li>
<li>Stable training</li>
</ul>
</li>
<li>Process:
<ul>
<li>Forward: Gradually add noise</li>
<li>Reverse: Learn to denoise</li>
</ul>
</li>
</ul>
<h3 id="dall-e-2-2022"><a class="header" href="#dall-e-2-2022">DALL-E 2 (2022)</a></h3>
<p><strong>Hierarchical Text-Conditional Image Generation with CLIP Latents</strong></p>
<ul>
<li>Authors: Aditya Ramesh et al. (OpenAI)</li>
<li>Key Contributions:
<ul>
<li>Text-to-image generation</li>
<li>CLIP guidance</li>
<li>Prior and decoder models</li>
<li>Improved image quality and text alignment</li>
</ul>
</li>
</ul>
<h3 id="stable-diffusion-2022"><a class="header" href="#stable-diffusion-2022">Stable Diffusion (2022)</a></h3>
<p><strong>High-Resolution Image Synthesis with Latent Diffusion Models</strong></p>
<ul>
<li>Authors: Robin Rombach et al.</li>
<li>Key Contributions:
<ul>
<li>Diffusion in latent space</li>
<li>More efficient than pixel-space diffusion</li>
<li>Text-conditional generation</li>
<li>Open source</li>
</ul>
</li>
</ul>
<h2 id="reinforcement-learning-2"><a class="header" href="#reinforcement-learning-2">Reinforcement Learning</a></h2>
<h3 id="dqn-2013"><a class="header" href="#dqn-2013">DQN (2013)</a></h3>
<p><strong>Playing Atari with Deep Reinforcement Learning</strong></p>
<ul>
<li>Authors: Volodymyr Mnih et al. (DeepMind)</li>
<li>Key Contributions:
<ul>
<li>Deep Q-learning</li>
<li>Experience replay</li>
<li>Target network</li>
<li>End-to-end RL from pixels</li>
</ul>
</li>
<li>Impact: First deep RL to master Atari games</li>
</ul>
<h3 id="alphago-2016"><a class="header" href="#alphago-2016">AlphaGo (2016)</a></h3>
<p><strong>Mastering the game of Go with deep neural networks and tree search</strong></p>
<ul>
<li>Authors: David Silver et al. (DeepMind)</li>
<li>Key Contributions:
<ul>
<li>Combined deep learning with Monte Carlo Tree Search</li>
<li>Policy and value networks</li>
<li>Self-play training</li>
<li>Beat world champion Lee Sedol</li>
</ul>
</li>
<li>AlphaZero (2017): Generalized to chess and shogi</li>
</ul>
<h3 id="ppo-2017"><a class="header" href="#ppo-2017">PPO (2017)</a></h3>
<p><strong>Proximal Policy Optimization Algorithms</strong></p>
<ul>
<li>Authors: John Schulman et al. (OpenAI)</li>
<li>Key Contributions:
<ul>
<li>Clipped surrogate objective</li>
<li>Stable policy updates</li>
<li>Sample efficient</li>
<li>Easy to implement</li>
</ul>
</li>
<li>Widely used in practice</li>
</ul>
<h3 id="muzero-2019"><a class="header" href="#muzero-2019">MuZero (2019)</a></h3>
<p><strong>Mastering Atari, Go, Chess and Shogi by Planning with a Learned Model</strong></p>
<ul>
<li>Authors: Julian Schrittwieser et al. (DeepMind)</li>
<li>Key Contributions:
<ul>
<li>Model-based RL without knowing rules</li>
<li>Learns dynamics model</li>
<li>Plans in latent space</li>
<li>Superhuman performance</li>
</ul>
</li>
</ul>
<h3 id="decision-transformer-2021"><a class="header" href="#decision-transformer-2021">Decision Transformer (2021)</a></h3>
<p><strong>Decision Transformer: Reinforcement Learning via Sequence Modeling</strong></p>
<ul>
<li>Authors: Lili Chen et al. (Berkeley)</li>
<li>Key Contributions:
<ul>
<li>RL as sequence modeling</li>
<li>Conditional generation of actions</li>
<li>Leverages transformer architecture</li>
<li>Offline RL</li>
</ul>
</li>
</ul>
<h2 id="general-machine-learning"><a class="header" href="#general-machine-learning">General Machine Learning</a></h2>
<h3 id="dropout-2014"><a class="header" href="#dropout-2014">Dropout (2014)</a></h3>
<p><strong>Dropout: A Simple Way to Prevent Neural Networks from Overfitting</strong></p>
<ul>
<li>Authors: Nitish Srivastava et al.</li>
<li>Key Contributions:
<ul>
<li>Randomly drop units during training</li>
<li>Reduces overfitting</li>
<li>Ensemble effect</li>
<li>Simple and effective regularization</li>
</ul>
</li>
</ul>
<h3 id="batch-normalization-2015"><a class="header" href="#batch-normalization-2015">Batch Normalization (2015)</a></h3>
<p><strong>Batch Normalization: Accelerating Deep Network Training</strong></p>
<ul>
<li>Authors: Sergey Ioffe, Christian Szegedy (Google)</li>
<li>Key Contributions:
<ul>
<li>Normalize layer inputs</li>
<li>Reduces internal covariate shift</li>
<li>Enables higher learning rates</li>
<li>Acts as regularizer</li>
</ul>
</li>
<li>Operation: Normalize, then scale and shift</li>
</ul>
<h3 id="adam-optimizer-2014"><a class="header" href="#adam-optimizer-2014">Adam Optimizer (2014)</a></h3>
<p><strong>Adam: A Method for Stochastic Optimization</strong></p>
<ul>
<li>Authors: Diederik Kingma, Jimmy Ba</li>
<li>Key Contributions:
<ul>
<li>Adaptive learning rates</li>
<li>Combines momentum and RMSprop</li>
<li>Bias correction</li>
<li>Default optimizer for many tasks</li>
</ul>
</li>
</ul>
<h3 id="layer-normalization-2016"><a class="header" href="#layer-normalization-2016">Layer Normalization (2016)</a></h3>
<p><strong>Layer Normalization</strong></p>
<ul>
<li>Authors: Jimmy Lei Ba, Jamie Ryan Kiros, Geoffrey Hinton</li>
<li>Key Contributions:
<ul>
<li>Normalize across features</li>
<li>Better for RNNs and Transformers</li>
<li>No batch dependence</li>
</ul>
</li>
</ul>
<h3 id="elu-2015"><a class="header" href="#elu-2015">ELU (2015)</a></h3>
<p><strong>Fast and Accurate Deep Network Learning by Exponential Linear Units</strong></p>
<ul>
<li>Authors: Djork-Arné Clevert et al.</li>
<li>Key Contributions:
<ul>
<li>Negative values push mean towards zero</li>
<li>Reduces bias shift</li>
<li>Faster learning</li>
</ul>
</li>
</ul>
<h2 id="optimization-1"><a class="header" href="#optimization-1">Optimization</a></h2>
<h3 id="sgd-with-momentum-1999"><a class="header" href="#sgd-with-momentum-1999">SGD with Momentum (1999)</a></h3>
<p><strong>On the momentum term in gradient descent learning algorithms</strong></p>
<ul>
<li>Key Contributions:
<ul>
<li>Accumulate gradients</li>
<li>Faster convergence</li>
<li>Reduces oscillations</li>
</ul>
</li>
</ul>
<h3 id="rmsprop-2012"><a class="header" href="#rmsprop-2012">RMSprop (2012)</a></h3>
<p><strong>Neural Networks for Machine Learning - Lecture 6</strong></p>
<ul>
<li>Author: Geoffrey Hinton</li>
<li>Key Contributions:
<ul>
<li>Adaptive learning rates per parameter</li>
<li>Divides by running average of gradient magnitudes</li>
</ul>
</li>
</ul>
<h3 id="learning-rate-schedules"><a class="header" href="#learning-rate-schedules">Learning Rate Schedules</a></h3>
<p><strong>Cosine Annealing (2016)</strong></p>
<ul>
<li>SGDR: Stochastic Gradient Descent with Warm Restarts</li>
<li>Cosine decay with restarts</li>
<li>Enables finding multiple local minima</li>
</ul>
<p><strong>One Cycle Policy (2018)</strong></p>
<ul>
<li>Super-Convergence: Very Fast Training of Neural Networks</li>
<li>Cyclical learning rate with momentum</li>
<li>Train faster with fewer epochs</li>
</ul>
<h2 id="interpretability-and-explainability"><a class="header" href="#interpretability-and-explainability">Interpretability and Explainability</a></h2>
<h3 id="grad-cam-2016"><a class="header" href="#grad-cam-2016">Grad-CAM (2016)</a></h3>
<p><strong>Grad-CAM: Visual Explanations from Deep Networks</strong></p>
<ul>
<li>Authors: Ramprasaath Selvaraju et al.</li>
<li>Key Contributions:
<ul>
<li>Visualize what CNN looks at</li>
<li>Gradient-weighted class activation mapping</li>
<li>Works with any CNN architecture</li>
</ul>
</li>
</ul>
<h3 id="lime-2016"><a class="header" href="#lime-2016">LIME (2016)</a></h3>
<p><strong>"Why Should I Trust You?": Explaining Predictions of Any Classifier</strong></p>
<ul>
<li>Authors: Marco Tulio Ribeiro et al.</li>
<li>Key Contributions:
<ul>
<li>Local interpretable model-agnostic explanations</li>
<li>Approximate complex models locally</li>
<li>Works with any classifier</li>
</ul>
</li>
</ul>
<h3 id="shap-2017"><a class="header" href="#shap-2017">SHAP (2017)</a></h3>
<p><strong>A Unified Approach to Interpreting Model Predictions</strong></p>
<ul>
<li>Authors: Scott Lundberg, Su-In Lee</li>
<li>Key Contributions:
<ul>
<li>Shapley values for feature importance</li>
<li>Game-theoretic approach</li>
<li>Consistent and locally accurate</li>
</ul>
</li>
</ul>
<h2 id="efficiency-and-compression"><a class="header" href="#efficiency-and-compression">Efficiency and Compression</a></h2>
<h3 id="mobilenets-2017"><a class="header" href="#mobilenets-2017">MobileNets (2017)</a></h3>
<p><strong>MobileNets: Efficient Convolutional Neural Networks for Mobile Vision</strong></p>
<ul>
<li>Authors: Andrew Howard et al. (Google)</li>
<li>Key Contributions:
<ul>
<li>Depthwise separable convolutions</li>
<li>Width and resolution multipliers</li>
<li>Efficient for mobile devices</li>
</ul>
</li>
</ul>
<h3 id="squeezenet-2016"><a class="header" href="#squeezenet-2016">SqueezeNet (2016)</a></h3>
<p><strong>SqueezeNet: AlexNet-level accuracy with 50x fewer parameters</strong></p>
<ul>
<li>Authors: Forrest Iandola et al.</li>
<li>Key Contributions:
<ul>
<li>Fire modules (squeeze and expand)</li>
<li>50x fewer parameters than AlexNet</li>
<li>Small model size</li>
</ul>
</li>
</ul>
<h3 id="knowledge-distillation-2015"><a class="header" href="#knowledge-distillation-2015">Knowledge Distillation (2015)</a></h3>
<p><strong>Distilling the Knowledge in a Neural Network</strong></p>
<ul>
<li>Authors: Geoffrey Hinton, Oriol Vinyals, Jeff Dean</li>
<li>Key Contributions:
<ul>
<li>Transfer knowledge from large to small model</li>
<li>Soft targets from teacher</li>
<li>Temperature scaling</li>
</ul>
</li>
</ul>
<h3 id="pruning-2015"><a class="header" href="#pruning-2015">Pruning (2015)</a></h3>
<p><strong>Learning both Weights and Connections for Efficient Neural Networks</strong></p>
<ul>
<li>Authors: Song Han et al.</li>
<li>Key Contributions:
<ul>
<li>Remove unimportant weights</li>
<li>Magnitude-based pruning</li>
<li>Reduce model size and computation</li>
</ul>
</li>
</ul>
<h2 id="meta-learning"><a class="header" href="#meta-learning">Meta-Learning</a></h2>
<h3 id="maml-2017"><a class="header" href="#maml-2017">MAML (2017)</a></h3>
<p><strong>Model-Agnostic Meta-Learning for Fast Adaptation</strong></p>
<ul>
<li>Authors: Chelsea Finn, Pieter Abbeel, Sergey Levine</li>
<li>Key Contributions:
<ul>
<li>Learn good initialization</li>
<li>Fast adaptation to new tasks</li>
<li>Few-shot learning</li>
<li>Bi-level optimization</li>
</ul>
</li>
</ul>
<h3 id="prototypical-networks-2017"><a class="header" href="#prototypical-networks-2017">Prototypical Networks (2017)</a></h3>
<p><strong>Prototypical Networks for Few-shot Learning</strong></p>
<ul>
<li>Authors: Jake Snell, Kevin Swersky, Richard Zemel</li>
<li>Key Contributions:
<ul>
<li>Learn metric space</li>
<li>Class prototypes as centroids</li>
<li>Simple and effective</li>
</ul>
</li>
</ul>
<h2 id="self-supervised-learning"><a class="header" href="#self-supervised-learning">Self-Supervised Learning</a></h2>
<h3 id="simclr-2020"><a class="header" href="#simclr-2020">SimCLR (2020)</a></h3>
<p><strong>A Simple Framework for Contrastive Learning of Visual Representations</strong></p>
<ul>
<li>Authors: Ting Chen et al. (Google)</li>
<li>Key Contributions:
<ul>
<li>Contrastive learning framework</li>
<li>Large batch sizes crucial</li>
<li>Strong data augmentation</li>
<li>No labels needed</li>
</ul>
</li>
</ul>
<h3 id="byol-2020"><a class="header" href="#byol-2020">BYOL (2020)</a></h3>
<p><strong>Bootstrap Your Own Latent: A New Approach to Self-Supervised Learning</strong></p>
<ul>
<li>Authors: Jean-Bastien Grill et al. (DeepMind)</li>
<li>Key Contributions:
<ul>
<li>No negative pairs needed</li>
<li>Online and target networks</li>
<li>Momentum encoder</li>
<li>State-of-the-art representations</li>
</ul>
</li>
</ul>
<h3 id="mae-2021"><a class="header" href="#mae-2021">MAE (2021)</a></h3>
<p><strong>Masked Autoencoders Are Scalable Vision Learners</strong></p>
<ul>
<li>Authors: Kaiming He et al. (Facebook AI)</li>
<li>Key Contributions:
<ul>
<li>Mask random patches</li>
<li>Reconstruct missing pixels</li>
<li>Simple and scalable</li>
<li>Asymmetric encoder-decoder</li>
</ul>
</li>
</ul>
<h2 id="papers-to-read"><a class="header" href="#papers-to-read">Papers to Read</a></h2>
<h3 id="foundational"><a class="header" href="#foundational">Foundational</a></h3>
<ol>
<li>Neural Networks and Deep Learning (Nielsen)</li>
<li>Deep Learning Book (Goodfellow et al.)</li>
<li>Pattern Recognition and Machine Learning (Bishop)</li>
</ol>
<h3 id="recent-surveys"><a class="header" href="#recent-surveys">Recent Surveys</a></h3>
<ul>
<li>Attention mechanisms survey</li>
<li>Transfer learning survey</li>
<li>Self-supervised learning survey</li>
<li>Efficient deep learning survey</li>
</ul>
<h3 id="follow-these-venues"><a class="header" href="#follow-these-venues">Follow These Venues</a></h3>
<ul>
<li>NeurIPS, ICML, ICLR (ML conferences)</li>
<li>CVPR, ICCV, ECCV (Computer Vision)</li>
<li>ACL, EMNLP, NAACL (NLP)</li>
<li>AAAI, IJCAI (AI)</li>
</ul>
<h2 id="resources-13"><a class="header" href="#resources-13">Resources</a></h2>
<ul>
<li>arXiv.org: Pre-prints of latest research</li>
<li>Papers with Code: Papers with implementations</li>
<li>Google Scholar: Citation tracking</li>
<li>Semantic Scholar: AI-powered search</li>
<li>Distill.pub: Clear explanations</li>
<li>Two Minute Papers: Video summaries</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="artificial-intelligence-ai-documentation"><a class="header" href="#artificial-intelligence-ai-documentation">Artificial Intelligence (AI) Documentation</a></h1>
<p>A comprehensive guide to modern AI technologies, tools, and best practices.</p>
<h2 id="overview-30"><a class="header" href="#overview-30">Overview</a></h2>
<p>This directory contains documentation on various AI topics, focusing on practical applications, implementation guides, and best practices for working with modern AI systems.</p>
<h2 id="contents"><a class="header" href="#contents">Contents</a></h2>
<h3 id="1-prompt-engineering"><a class="header" href="#1-prompt-engineering">1. <a href="ai/./prompt_engineering.html">Prompt Engineering</a></a></h3>
<p>Learn the art and science of crafting effective prompts for Large Language Models (LLMs):</p>
<ul>
<li>Core principles and techniques</li>
<li>Prompt patterns and templates</li>
<li>Chain-of-Thought reasoning</li>
<li>Few-shot and zero-shot learning</li>
<li>Advanced strategies for different tasks</li>
</ul>
<h3 id="2-generative-ai"><a class="header" href="#2-generative-ai">2. <a href="ai/./generative_ai.html">Generative AI</a></a></h3>
<p>Comprehensive overview of generative AI models and applications:</p>
<ul>
<li>Text generation (GPT, Claude, PaLM)</li>
<li>Image generation (DALL-E, Midjourney, Stable Diffusion)</li>
<li>Audio and video synthesis</li>
<li>Multimodal models</li>
<li>Real-world applications and use cases</li>
</ul>
<h3 id="3-stable-diffusion"><a class="header" href="#3-stable-diffusion">3. <a href="ai/./stable_diffusion.html">Stable Diffusion</a></a></h3>
<p>Detailed guide to Stable Diffusion for image generation:</p>
<ul>
<li>Installation and setup</li>
<li>Prompt engineering for images</li>
<li>Parameters and settings</li>
<li>ControlNet and extensions</li>
<li>Optimization tips</li>
</ul>
<h3 id="4-flux1"><a class="header" href="#4-flux1">4. <a href="ai/./fluxdev.html">Flux.1</a></a></h3>
<p>Documentation for Black Forest Labs' Flux.1 model:</p>
<ul>
<li>Model variants (Dev, Schnell, Pro)</li>
<li>Setup and usage</li>
<li>Comparison with other models</li>
<li>Advanced techniques</li>
</ul>
<h3 id="5-llama-models"><a class="header" href="#5-llama-models">5. <a href="ai/./llama.html">Llama Models</a></a></h3>
<p>Complete guide to Meta's Llama family of models:</p>
<ul>
<li>Model architecture and variants</li>
<li>Installation and setup</li>
<li>Fine-tuning techniques</li>
<li>Inference optimization</li>
<li>Deployment strategies</li>
</ul>
<h2 id="key-ai-concepts"><a class="header" href="#key-ai-concepts">Key AI Concepts</a></h2>
<h3 id="large-language-models-llms"><a class="header" href="#large-language-models-llms">Large Language Models (LLMs)</a></h3>
<p>LLMs are neural networks trained on vast amounts of text data to understand and generate human-like text. Key characteristics:</p>
<ul>
<li><strong>Scale</strong>: Billions to trillions of parameters</li>
<li><strong>Training</strong>: Self-supervised learning on diverse text corpora</li>
<li><strong>Capabilities</strong>: Text generation, reasoning, code writing, translation, etc.</li>
<li><strong>Examples</strong>: GPT-4, Claude, Llama, PaLM, Mistral</li>
</ul>
<h3 id="transformer-architecture"><a class="header" href="#transformer-architecture">Transformer Architecture</a></h3>
<p>The foundation of modern LLMs:</p>
<pre><code>Input → Tokenization → Embedding → 
  Positional Encoding → 
  Multi-Head Attention → 
  Feed Forward → 
  Layer Norm → 
  Output
</code></pre>
<p>Key components:</p>
<ul>
<li><strong>Self-Attention</strong>: Allows model to weigh importance of different tokens</li>
<li><strong>Positional Encoding</strong>: Provides sequence order information</li>
<li><strong>Feed-Forward Networks</strong>: Process attention outputs</li>
<li><strong>Residual Connections</strong>: Enable training of deep networks</li>
</ul>
<h3 id="diffusion-models-2"><a class="header" href="#diffusion-models-2">Diffusion Models</a></h3>
<p>State-of-the-art image generation approach:</p>
<ol>
<li><strong>Forward Process</strong>: Gradually add noise to images</li>
<li><strong>Reverse Process</strong>: Learn to denoise, generating new images</li>
<li><strong>Conditioning</strong>: Guide generation with text, images, or other inputs</li>
</ol>
<h2 id="popular-ai-tools--frameworks"><a class="header" href="#popular-ai-tools--frameworks">Popular AI Tools &amp; Frameworks</a></h2>
<h3 id="for-llms"><a class="header" href="#for-llms">For LLMs</a></h3>
<pre><code class="language-bash"># OpenAI API
pip install openai

# Anthropic Claude
pip install anthropic

# Hugging Face Transformers
pip install transformers torch

# LangChain for LLM applications
pip install langchain langchain-community

# LlamaIndex for RAG
pip install llama-index
</code></pre>
<h3 id="for-image-generation"><a class="header" href="#for-image-generation">For Image Generation</a></h3>
<pre><code class="language-bash"># Stable Diffusion WebUI (AUTOMATIC1111)
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui
cd stable-diffusion-webui
./webui.sh

# ComfyUI (node-based interface)
git clone https://github.com/comfyanonymous/ComfyUI
cd ComfyUI
pip install -r requirements.txt

# Diffusers library
pip install diffusers transformers accelerate
</code></pre>
<h3 id="for-model-training--fine-tuning"><a class="header" href="#for-model-training--fine-tuning">For Model Training &amp; Fine-tuning</a></h3>
<pre><code class="language-bash"># Hugging Face ecosystem
pip install transformers datasets accelerate peft bitsandbytes

# PyTorch
pip install torch torchvision torchaudio

# DeepSpeed for distributed training
pip install deepspeed

# Axolotl for fine-tuning
git clone https://github.com/OpenAccess-AI-Collective/axolotl
</code></pre>
<h2 id="quick-start-examples"><a class="header" href="#quick-start-examples">Quick Start Examples</a></h2>
<h3 id="using-openai-api"><a class="header" href="#using-openai-api">Using OpenAI API</a></h3>
<pre><code class="language-python">from openai import OpenAI

client = OpenAI(api_key="your-api-key")

response = client.chat.completions.create(
    model="gpt-4",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Explain quantum computing in simple terms."}
    ]
)

print(response.choices[0].message.content)
</code></pre>
<h3 id="using-anthropic-claude"><a class="header" href="#using-anthropic-claude">Using Anthropic Claude</a></h3>
<pre><code class="language-python">import anthropic

client = anthropic.Anthropic(api_key="your-api-key")

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {"role": "user", "content": "Write a Python function to calculate Fibonacci numbers."}
    ]
)

print(message.content[0].text)
</code></pre>
<h3 id="using-hugging-face-transformers"><a class="header" href="#using-hugging-face-transformers">Using Hugging Face Transformers</a></h3>
<pre><code class="language-python">from transformers import AutoTokenizer, AutoModelForCausalLM
import torch

# Load model and tokenizer
model_name = "meta-llama/Llama-3.2-3B-Instruct"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(
    model_name,
    torch_dtype=torch.float16,
    device_map="auto"
)

# Generate text
prompt = "What is the theory of relativity?"
inputs = tokenizer(prompt, return_tensors="pt").to(model.device)
outputs = model.generate(**inputs, max_length=200)
print(tokenizer.decode(outputs[0], skip_special_tokens=True))
</code></pre>
<h3 id="using-stable-diffusion"><a class="header" href="#using-stable-diffusion">Using Stable Diffusion</a></h3>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline
import torch

# Load pipeline
pipe = StableDiffusionPipeline.from_pretrained(
    "stabilityai/stable-diffusion-2-1",
    torch_dtype=torch.float16
)
pipe = pipe.to("cuda")

# Generate image
prompt = "a serene mountain landscape at sunset, oil painting style"
image = pipe(prompt, num_inference_steps=50, guidance_scale=7.5).images[0]
image.save("output.png")
</code></pre>
<h2 id="best-practices-18"><a class="header" href="#best-practices-18">Best Practices</a></h2>
<h3 id="1-prompt-engineering-1"><a class="header" href="#1-prompt-engineering-1">1. Prompt Engineering</a></h3>
<ul>
<li>Be specific and clear in your instructions</li>
<li>Provide context and examples</li>
<li>Use system prompts to set behavior</li>
<li>Iterate and refine based on outputs</li>
</ul>
<h3 id="2-model-selection"><a class="header" href="#2-model-selection">2. Model Selection</a></h3>
<ul>
<li>Choose the right model for your task</li>
<li>Balance capability vs. cost vs. speed</li>
<li>Consider fine-tuning for specialized tasks</li>
<li>Use quantization for resource constraints</li>
</ul>
<h3 id="3-safety--ethics"><a class="header" href="#3-safety--ethics">3. Safety &amp; Ethics</a></h3>
<ul>
<li>Implement content filtering</li>
<li>Monitor for bias and fairness</li>
<li>Respect copyright and attribution</li>
<li>Ensure data privacy and security</li>
</ul>
<h3 id="4-performance-optimization"><a class="header" href="#4-performance-optimization">4. Performance Optimization</a></h3>
<ul>
<li>Use batch processing when possible</li>
<li>Implement caching for repeated queries</li>
<li>Optimize prompts for token efficiency</li>
<li>Use streaming for real-time responses</li>
</ul>
<h2 id="resources-14"><a class="header" href="#resources-14">Resources</a></h2>
<h3 id="official-documentation-2"><a class="header" href="#official-documentation-2">Official Documentation</a></h3>
<ul>
<li><a href="https://platform.openai.com/docs">OpenAI Documentation</a></li>
<li><a href="https://docs.anthropic.com">Anthropic Documentation</a></li>
<li><a href="https://huggingface.co/docs">Hugging Face Documentation</a></li>
<li><a href="https://stability.ai/documentation">Stability AI</a></li>
</ul>
<h3 id="learning-resources-1"><a class="header" href="#learning-resources-1">Learning Resources</a></h3>
<ul>
<li><a href="https://www.deeplearning.ai/">DeepLearning.AI Courses</a></li>
<li><a href="https://www.fast.ai/">Fast.ai</a></li>
<li><a href="https://huggingface.co/learn">Hugging Face Course</a></li>
<li><a href="https://paperswithcode.com/">Papers with Code</a></li>
</ul>
<h3 id="community"><a class="header" href="#community">Community</a></h3>
<ul>
<li><a href="https://www.reddit.com/r/MachineLearning/">r/MachineLearning</a></li>
<li><a href="https://www.reddit.com/r/StableDiffusion/">r/StableDiffusion</a></li>
<li><a href="https://discuss.huggingface.co/">Hugging Face Forums</a></li>
<li><a href="https://discord.gg/stablediffusion">Discord Communities</a></li>
</ul>
<h2 id="contributing-1"><a class="header" href="#contributing-1">Contributing</a></h2>
<p>This documentation is continuously updated with new techniques, models, and best practices. Each section contains practical examples and code snippets that you can use immediately.</p>
<h2 id="license"><a class="header" href="#license">License</a></h2>
<p>This documentation is provided for educational purposes. Please refer to individual model and tool licenses for usage terms.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="generative-ai"><a class="header" href="#generative-ai">Generative AI</a></h1>
<p>A comprehensive guide to generative AI models, applications, and practical implementations.</p>
<h2 id="table-of-contents-16"><a class="header" href="#table-of-contents-16">Table of Contents</a></h2>
<ul>
<li><a href="ai/generative_ai.html#introduction">Introduction</a></li>
<li><a href="ai/generative_ai.html#core-concepts">Core Concepts</a></li>
<li><a href="ai/generative_ai.html#text-generation">Text Generation</a></li>
<li><a href="ai/generative_ai.html#image-generation">Image Generation</a></li>
<li><a href="ai/generative_ai.html#audio-generation">Audio Generation</a></li>
<li><a href="ai/generative_ai.html#video-generation">Video Generation</a></li>
<li><a href="ai/generative_ai.html#multimodal-models">Multimodal Models</a></li>
<li><a href="ai/generative_ai.html#applications">Applications</a></li>
<li><a href="ai/generative_ai.html#implementation-examples">Implementation Examples</a></li>
</ul>
<h2 id="introduction-3"><a class="header" href="#introduction-3">Introduction</a></h2>
<p>Generative AI refers to artificial intelligence systems that can create new content—text, images, audio, video, code, and more. Unlike discriminative models that classify or predict, generative models learn to produce novel outputs that resemble their training data.</p>
<h3 id="key-characteristics"><a class="header" href="#key-characteristics">Key Characteristics</a></h3>
<ul>
<li><strong>Content Creation</strong>: Generate new, original content</li>
<li><strong>Pattern Learning</strong>: Understand and replicate complex patterns</li>
<li><strong>Conditional Generation</strong>: Create outputs based on specific inputs/prompts</li>
<li><strong>Iterative Refinement</strong>: Improve outputs through multiple passes</li>
</ul>
<h2 id="core-concepts-2"><a class="header" href="#core-concepts-2">Core Concepts</a></h2>
<h3 id="1-generative-models"><a class="header" href="#1-generative-models">1. Generative Models</a></h3>
<h4 id="autoregressive-models-1"><a class="header" href="#autoregressive-models-1">Autoregressive Models</a></h4>
<p>Generate sequences one token at a time, using previous tokens as context:</p>
<pre><code>P(x₁, x₂, ..., xₙ) = P(x₁) × P(x₂|x₁) × P(x₃|x₁,x₂) × ... × P(xₙ|x₁,...,xₙ₋₁)
</code></pre>
<p>Examples: GPT series, LLaMA</p>
<h4 id="diffusion-models-3"><a class="header" href="#diffusion-models-3">Diffusion Models</a></h4>
<p>Learn to denoise data through iterative refinement:</p>
<pre><code>Forward process: x₀ → x₁ → ... → xₜ (add noise)
Reverse process: xₜ → xₜ₋₁ → ... → x₀ (remove noise)
</code></pre>
<p>Examples: Stable Diffusion, DALL-E 3, Midjourney</p>
<h4 id="variational-autoencoders-vae"><a class="header" href="#variational-autoencoders-vae">Variational Autoencoders (VAE)</a></h4>
<p>Learn compressed representations in latent space:</p>
<pre><code>Encoder: x → z (data to latent space)
Decoder: z → x' (latent space to reconstruction)
</code></pre>
<h4 id="generative-adversarial-networks-gan"><a class="header" href="#generative-adversarial-networks-gan">Generative Adversarial Networks (GAN)</a></h4>
<p>Two networks compete—generator creates, discriminator evaluates:</p>
<pre><code>Generator: z → x (noise to data)
Discriminator: x → [0,1] (real vs fake)
</code></pre>
<p>Examples: StyleGAN, BigGAN</p>
<h3 id="2-foundation-models"><a class="header" href="#2-foundation-models">2. Foundation Models</a></h3>
<p>Large-scale models trained on vast datasets, adaptable to many tasks:</p>
<ul>
<li><strong>Scale</strong>: Billions to trillions of parameters</li>
<li><strong>Transfer Learning</strong>: Fine-tune for specific tasks</li>
<li><strong>Few-Shot Learning</strong>: Adapt with minimal examples</li>
<li><strong>Emergent Abilities</strong>: Capabilities not explicitly trained</li>
</ul>
<h2 id="text-generation"><a class="header" href="#text-generation">Text Generation</a></h2>
<h3 id="large-language-models-llms-1"><a class="header" href="#large-language-models-llms-1">Large Language Models (LLMs)</a></h3>
<h4 id="gpt-family-openai"><a class="header" href="#gpt-family-openai">GPT Family (OpenAI)</a></h4>
<pre><code class="language-python">from openai import OpenAI

client = OpenAI(api_key="your-key")

# GPT-4 Turbo - Most capable
response = client.chat.completions.create(
    model="gpt-4-turbo-preview",
    messages=[
        {"role": "system", "content": "You are a creative writer."},
        {"role": "user", "content": "Write a short sci-fi story about AI."}
    ],
    temperature=0.8,
    max_tokens=500
)

print(response.choices[0].message.content)
</code></pre>
<p><strong>Models:</strong></p>
<ul>
<li><code>gpt-4-turbo</code>: Most capable, best for complex tasks</li>
<li><code>gpt-4</code>: High capability, slower and more expensive</li>
<li><code>gpt-3.5-turbo</code>: Fast, cost-effective for simple tasks</li>
</ul>
<h4 id="claude-anthropic"><a class="header" href="#claude-anthropic">Claude (Anthropic)</a></h4>
<pre><code class="language-python">import anthropic

client = anthropic.Anthropic(api_key="your-key")

# Claude Sonnet 4.5 - Latest model
message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {
            "role": "user", 
            "content": "Analyze this code and suggest improvements: [code]"
        }
    ]
)

print(message.content[0].text)
</code></pre>
<p><strong>Models:</strong></p>
<ul>
<li><code>claude-sonnet-4-5</code>: Balanced performance and capability</li>
<li><code>claude-opus-4</code>: Most capable, deep analysis</li>
<li><code>claude-haiku-4</code>: Fastest, most cost-effective</li>
</ul>
<h4 id="llama-meta"><a class="header" href="#llama-meta">Llama (Meta)</a></h4>
<pre><code class="language-python">from transformers import AutoTokenizer, AutoModelForCausalLM
import torch

model_name = "meta-llama/Llama-3.2-3B-Instruct"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(
    model_name,
    torch_dtype=torch.float16,
    device_map="auto"
)

# Chat format
messages = [
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Explain quantum computing."}
]

input_ids = tokenizer.apply_chat_template(
    messages,
    return_tensors="pt"
).to(model.device)

outputs = model.generate(
    input_ids,
    max_new_tokens=256,
    temperature=0.7,
    top_p=0.9
)

print(tokenizer.decode(outputs[0], skip_special_tokens=True))
</code></pre>
<h4 id="mistral"><a class="header" href="#mistral">Mistral</a></h4>
<pre><code class="language-python">from mistralai.client import MistralClient
from mistralai.models.chat_completion import ChatMessage

client = MistralClient(api_key="your-key")

messages = [
    ChatMessage(role="user", content="What is machine learning?")
]

# Mistral Large - Most capable
response = client.chat(
    model="mistral-large-latest",
    messages=messages
)

print(response.choices[0].message.content)
</code></pre>
<h3 id="use-cases-for-text-generation"><a class="header" href="#use-cases-for-text-generation">Use Cases for Text Generation</a></h3>
<h4 id="1-content-creation"><a class="header" href="#1-content-creation">1. Content Creation</a></h4>
<pre><code class="language-python"># Blog post generation
prompt = """
Write a 500-word blog post about sustainable living.

Include:
- Engaging introduction
- 3 practical tips
- Statistics or facts
- Call to action

Tone: Informative but conversational
"""
</code></pre>
<h4 id="2-code-generation"><a class="header" href="#2-code-generation">2. Code Generation</a></h4>
<pre><code class="language-python"># Function generation
prompt = """
Create a Python function that:
- Takes a list of dictionaries
- Filters by a key-value pair
- Sorts by another key
- Returns top N results

Include type hints and docstring.
"""
</code></pre>
<h4 id="3-data-analysis"><a class="header" href="#3-data-analysis">3. Data Analysis</a></h4>
<pre><code class="language-python"># Analysis prompt
prompt = """
Analyze this sales data and provide:
1. Key trends
2. Anomalies
3. Predictions
4. Recommendations

Data: [CSV or JSON data]
"""
</code></pre>
<h4 id="4-translation"><a class="header" href="#4-translation">4. Translation</a></h4>
<pre><code class="language-python"># Contextual translation
prompt = """
Translate this technical documentation from English to Spanish:

[text]

Maintain:
- Technical terminology accuracy
- Professional tone
- Code examples unchanged
"""
</code></pre>
<h2 id="image-generation"><a class="header" href="#image-generation">Image Generation</a></h2>
<h3 id="stable-diffusion"><a class="header" href="#stable-diffusion">Stable Diffusion</a></h3>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline, DPMSolverMultistepScheduler
import torch

# Load model
model_id = "stabilityai/stable-diffusion-2-1"
pipe = StableDiffusionPipeline.from_pretrained(
    model_id,
    torch_dtype=torch.float16
)
pipe.scheduler = DPMSolverMultistepScheduler.from_config(
    pipe.scheduler.config
)
pipe = pipe.to("cuda")

# Generate image
prompt = "a serene japanese garden with cherry blossoms, koi pond, stone lanterns, soft morning light, highly detailed, 4k"
negative_prompt = "blurry, distorted, low quality, watermark"

image = pipe(
    prompt=prompt,
    negative_prompt=negative_prompt,
    num_inference_steps=30,
    guidance_scale=7.5,
    width=768,
    height=768
).images[0]

image.save("japanese_garden.png")
</code></pre>
<h3 id="dall-e-3-openai"><a class="header" href="#dall-e-3-openai">DALL-E 3 (OpenAI)</a></h3>
<pre><code class="language-python">from openai import OpenAI

client = OpenAI()

response = client.images.generate(
    model="dall-e-3",
    prompt="A futuristic city with flying cars and neon lights, cyberpunk style, detailed, high quality",
    size="1024x1024",
    quality="hd",
    n=1
)

image_url = response.data[0].url
print(f"Generated image: {image_url}")
</code></pre>
<h3 id="midjourney"><a class="header" href="#midjourney">Midjourney</a></h3>
<p>Accessed through Discord bot:</p>
<pre><code>/imagine prompt: a mystical forest with glowing mushrooms, ethereal lighting, fantasy art style, intricate details --v 6 --ar 16:9 --q 2
</code></pre>
<p>Parameters:</p>
<ul>
<li><code>--v</code>: Version (6 is latest)</li>
<li><code>--ar</code>: Aspect ratio</li>
<li><code>--q</code>: Quality (0.25, 0.5, 1, 2)</li>
<li><code>--s</code>: Stylization (0-1000)</li>
</ul>
<h3 id="image-to-image"><a class="header" href="#image-to-image">Image-to-Image</a></h3>
<pre><code class="language-python">from diffusers import StableDiffusionImg2ImgPipeline
from PIL import Image

pipe = StableDiffusionImg2ImgPipeline.from_pretrained(
    "stabilityai/stable-diffusion-2-1",
    torch_dtype=torch.float16
).to("cuda")

# Load initial image
init_image = Image.open("sketch.png").convert("RGB")
init_image = init_image.resize((768, 768))

# Transform image
prompt = "a professional photograph of a modern building, architectural photography"
images = pipe(
    prompt=prompt,
    image=init_image,
    strength=0.75,  # How much to transform (0=no change, 1=complete regeneration)
    guidance_scale=7.5,
    num_inference_steps=50
).images

images[0].save("transformed.png")
</code></pre>
<h3 id="inpainting"><a class="header" href="#inpainting">Inpainting</a></h3>
<pre><code class="language-python">from diffusers import StableDiffusionInpaintPipeline

pipe = StableDiffusionInpaintPipeline.from_pretrained(
    "stabilityai/stable-diffusion-2-inpainting",
    torch_dtype=torch.float16
).to("cuda")

# Load image and mask
image = Image.open("photo.png")
mask = Image.open("mask.png")  # White areas will be regenerated

prompt = "a red sports car"
result = pipe(
    prompt=prompt,
    image=image,
    mask_image=mask,
    num_inference_steps=50
).images[0]

result.save("inpainted.png")
</code></pre>
<h2 id="audio-generation"><a class="header" href="#audio-generation">Audio Generation</a></h2>
<h3 id="text-to-speech"><a class="header" href="#text-to-speech">Text-to-Speech</a></h3>
<h4 id="openai-tts"><a class="header" href="#openai-tts">OpenAI TTS</a></h4>
<pre><code class="language-python">from openai import OpenAI
from pathlib import Path

client = OpenAI()

speech_file_path = Path("output.mp3")

response = client.audio.speech.create(
    model="tts-1-hd",
    voice="nova",  # alloy, echo, fable, onyx, nova, shimmer
    input="Hello! This is a generated voice. AI can now speak naturally."
)

response.stream_to_file(speech_file_path)
</code></pre>
<h4 id="elevenlabs"><a class="header" href="#elevenlabs">ElevenLabs</a></h4>
<pre><code class="language-python">from elevenlabs import generate, play, set_api_key

set_api_key("your-api-key")

audio = generate(
    text="Welcome to the future of voice synthesis.",
    voice="Bella",
    model="eleven_monolingual_v1"
)

play(audio)
</code></pre>
<h3 id="music-generation"><a class="header" href="#music-generation">Music Generation</a></h3>
<h4 id="musicgen-meta"><a class="header" href="#musicgen-meta">MusicGen (Meta)</a></h4>
<pre><code class="language-python">from audiocraft.models import MusicGen
import torchaudio

model = MusicGen.get_pretrained('facebook/musicgen-medium')

# Generate music
descriptions = ['upbeat electronic dance music with strong bass']
duration = 30  # seconds

model.set_generation_params(duration=duration)
wav = model.generate(descriptions)

# Save
for idx, one_wav in enumerate(wav):
    torchaudio.save(f'generated_{idx}.wav', one_wav.cpu(), model.sample_rate)
</code></pre>
<h2 id="video-generation"><a class="header" href="#video-generation">Video Generation</a></h2>
<h3 id="stable-video-diffusion"><a class="header" href="#stable-video-diffusion">Stable Video Diffusion</a></h3>
<pre><code class="language-python">from diffusers import StableVideoDiffusionPipeline
from PIL import Image

pipe = StableVideoDiffusionPipeline.from_pretrained(
    "stabilityai/stable-video-diffusion-img2vid-xt",
    torch_dtype=torch.float16,
    variant="fp16"
)
pipe.to("cuda")

# Load initial image
image = Image.open("first_frame.png")

# Generate video frames
frames = pipe(image, decode_chunk_size=8, num_frames=25).frames[0]

# Save as video
from diffusers.utils import export_to_video
export_to_video(frames, "output_video.mp4", fps=7)
</code></pre>
<h3 id="runwayml-gen-2"><a class="header" href="#runwayml-gen-2">RunwayML Gen-2</a></h3>
<p>API-based video generation:</p>
<pre><code class="language-python">import runwayml

client = runwayml.RunwayML(api_key="your-key")

# Text to video
task = client.image_generation.create(
    prompt="a serene ocean at sunset with waves gently crashing",
    model="gen2",
    duration=4
)

# Wait for completion and download
video_url = task.get_output_url()
</code></pre>
<h2 id="multimodal-models"><a class="header" href="#multimodal-models">Multimodal Models</a></h2>
<h3 id="gpt-4-vision"><a class="header" href="#gpt-4-vision">GPT-4 Vision</a></h3>
<pre><code class="language-python">from openai import OpenAI

client = OpenAI()

response = client.chat.completions.create(
    model="gpt-4-vision-preview",
    messages=[
        {
            "role": "user",
            "content": [
                {"type": "text", "text": "What's in this image?"},
                {
                    "type": "image_url",
                    "image_url": {
                        "url": "https://example.com/image.jpg"
                    }
                }
            ]
        }
    ],
    max_tokens=300
)

print(response.choices[0].message.content)
</code></pre>
<h3 id="claude-vision"><a class="header" href="#claude-vision">Claude Vision</a></h3>
<pre><code class="language-python">import anthropic
import base64

client = anthropic.Anthropic()

# Read and encode image
with open("image.jpg", "rb") as image_file:
    image_data = base64.standard_b64encode(image_file.read()).decode("utf-8")

message = client.messages.create(
    model="claude-sonnet-4-5-20250929",
    max_tokens=1024,
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "image",
                    "source": {
                        "type": "base64",
                        "media_type": "image/jpeg",
                        "data": image_data,
                    },
                },
                {
                    "type": "text",
                    "text": "Describe this image in detail."
                }
            ],
        }
    ],
)

print(message.content[0].text)
</code></pre>
<h3 id="llava-open-source"><a class="header" href="#llava-open-source">LLaVA (Open Source)</a></h3>
<pre><code class="language-python">from llava.model.builder import load_pretrained_model
from llava.mm_utils import get_model_name_from_path, process_images
from PIL import Image

model_path = "liuhaotian/llava-v1.5-7b"
tokenizer, model, image_processor, context_len = load_pretrained_model(
    model_path=model_path,
    model_base=None,
    model_name=get_model_name_from_path(model_path)
)

# Load and process image
image = Image.open("photo.jpg")
image_tensor = process_images([image], image_processor, model.config)

# Generate description
prompt = "Describe this image in detail."
outputs = model.generate(
    image_tensor,
    prompt,
    max_new_tokens=512
)
</code></pre>
<h2 id="applications-8"><a class="header" href="#applications-8">Applications</a></h2>
<h3 id="1-content-creation-1"><a class="header" href="#1-content-creation-1">1. Content Creation</a></h3>
<pre><code class="language-python"># Automated blog writing pipeline
def generate_blog_post(topic):
    # Research
    outline_prompt = f"Create a detailed outline for a blog post about {topic}"
    outline = llm.generate(outline_prompt)
    
    # Write sections
    sections = []
    for section in outline.sections:
        content = llm.generate(f"Write about: {section}")
        sections.append(content)
    
    # Generate image
    image_prompt = f"blog header image for {topic}, professional, modern"
    image = image_generator.generate(image_prompt)
    
    return {
        'outline': outline,
        'content': sections,
        'image': image
    }
</code></pre>
<h3 id="2-education--training"><a class="header" href="#2-education--training">2. Education &amp; Training</a></h3>
<pre><code class="language-python"># Personalized tutoring
def create_lesson(topic, student_level, learning_style):
    prompt = f"""
    Create a {student_level}-level lesson on {topic} for a {learning_style} learner.
    
    Include:
    - Clear explanations with analogies
    - 3 practice problems
    - Visual aids descriptions
    """
    
    lesson = llm.generate(prompt)
    
    # Generate visual aids
    visuals = [
        image_gen.generate(desc) 
        for desc in lesson.visual_descriptions
    ]
    
    return lesson, visuals
</code></pre>
<h3 id="3-software-development"><a class="header" href="#3-software-development">3. Software Development</a></h3>
<pre><code class="language-python"># AI-assisted coding
def code_assistant(task_description, language="python"):
    # Generate code
    code_prompt = f"Write {language} code for: {task_description}"
    code = llm.generate(code_prompt)
    
    # Generate tests
    test_prompt = f"Write unit tests for this code:\n{code}"
    tests = llm.generate(test_prompt)
    
    # Generate documentation
    doc_prompt = f"Write comprehensive documentation for:\n{code}"
    docs = llm.generate(doc_prompt)
    
    return {
        'code': code,
        'tests': tests,
        'docs': docs
    }
</code></pre>
<h3 id="4-marketing--advertising"><a class="header" href="#4-marketing--advertising">4. Marketing &amp; Advertising</a></h3>
<pre><code class="language-python"># Campaign generation
def create_marketing_campaign(product, target_audience):
    # Generate copy variations
    copy_prompt = f"""
    Create 5 ad copy variations for {product} targeting {target_audience}.
    Each should be:
    - Under 100 characters
    - Compelling call-to-action
    - Different emotional angle
    """
    copies = llm.generate(copy_prompt)
    
    # Generate visuals
    for copy in copies:
        visual_prompt = f"advertising image for: {copy}, {product}, professional photography"
        image = image_gen.generate(visual_prompt)
        
    return campaign
</code></pre>
<h3 id="5-data-augmentation"><a class="header" href="#5-data-augmentation">5. Data Augmentation</a></h3>
<pre><code class="language-python"># Expand training dataset
def augment_dataset(original_data):
    augmented = []
    
    for item in original_data:
        # Text augmentation
        variations = llm.generate(
            f"Create 5 paraphrases of: {item.text}"
        )
        augmented.extend(variations)
        
        # Image augmentation (if applicable)
        if item.image:
            synthetic_images = image_gen.generate(
                f"similar to: {item.image_description}"
            )
            augmented.extend(synthetic_images)
    
    return augmented
</code></pre>
<h3 id="6-accessibility"><a class="header" href="#6-accessibility">6. Accessibility</a></h3>
<pre><code class="language-python"># Multi-modal accessibility
def make_accessible(content):
    if content.is_text():
        # Text to speech
        audio = tts.generate(content.text)
        
        # Generate descriptive images
        image = image_gen.generate(f"illustration of: {content.text}")
        
    elif content.is_image():
        # Image to text description
        description = vision_model.describe(content.image)
        
        # Text to speech
        audio = tts.generate(description)
    
    return {
        'text': description,
        'audio': audio,
        'image': image
    }
</code></pre>
<h2 id="best-practices-19"><a class="header" href="#best-practices-19">Best Practices</a></h2>
<h3 id="1-prompt-engineering-2"><a class="header" href="#1-prompt-engineering-2">1. Prompt Engineering</a></h3>
<pre><code class="language-python"># Good prompt structure
prompt = """
Role: You are an expert {domain} specialist

Task: {specific_task}

Context: {relevant_background}

Requirements:
- {requirement_1}
- {requirement_2}
- {requirement_3}

Format: {output_format}
"""
</code></pre>
<h3 id="2-temperature--sampling"><a class="header" href="#2-temperature--sampling">2. Temperature &amp; Sampling</a></h3>
<pre><code class="language-python"># Creative tasks: High temperature
creative_config = {
    "temperature": 0.8,
    "top_p": 0.9,
    "top_k": 50
}

# Factual tasks: Low temperature
factual_config = {
    "temperature": 0.2,
    "top_p": 0.95,
    "top_k": 40
}
</code></pre>
<h3 id="3-error-handling"><a class="header" href="#3-error-handling">3. Error Handling</a></h3>
<pre><code class="language-python">def generate_with_retry(prompt, max_retries=3):
    for attempt in range(max_retries):
        try:
            response = llm.generate(prompt)
            
            # Validate response
            if validate(response):
                return response
                
        except Exception as e:
            if attempt == max_retries - 1:
                raise
            continue
    
    return fallback_response
</code></pre>
<h3 id="4-cost-optimization"><a class="header" href="#4-cost-optimization">4. Cost Optimization</a></h3>
<pre><code class="language-python"># Cache responses
from functools import lru_cache

@lru_cache(maxsize=1000)
def generate_cached(prompt):
    return llm.generate(prompt)

# Batch requests
def generate_batch(prompts):
    return llm.batch_generate(prompts)

# Use appropriate model
def select_model(task_complexity):
    if task_complexity == "simple":
        return "gpt-3.5-turbo"  # Cheaper
    else:
        return "gpt-4"  # More capable
</code></pre>
<h2 id="ethical-considerations"><a class="header" href="#ethical-considerations">Ethical Considerations</a></h2>
<h3 id="1-content-authenticity"><a class="header" href="#1-content-authenticity">1. Content Authenticity</a></h3>
<pre><code class="language-python"># Add watermarks to generated content
def generate_with_watermark(prompt):
    content = llm.generate(prompt)
    metadata = {
        'generated_by': 'AI',
        'model': 'gpt-4',
        'timestamp': datetime.now(),
        'watermark': True
    }
    return content, metadata
</code></pre>
<h3 id="2-bias-detection"><a class="header" href="#2-bias-detection">2. Bias Detection</a></h3>
<pre><code class="language-python"># Check for biased outputs
def check_bias(generated_content):
    bias_check_prompt = f"""
    Analyze this content for potential bias:
    {generated_content}
    
    Check for:
    - Gender bias
    - Racial bias
    - Cultural bias
    - Age bias
    """
    
    analysis = llm.generate(bias_check_prompt)
    return analysis
</code></pre>
<h3 id="3-safety-filters"><a class="header" href="#3-safety-filters">3. Safety Filters</a></h3>
<pre><code class="language-python"># Content filtering
def safe_generate(prompt):
    # Check input
    if contains_unsafe_content(prompt):
        return "Request rejected: unsafe content"
    
    # Generate
    output = llm.generate(prompt)
    
    # Check output
    if contains_unsafe_content(output):
        return "Generation failed: unsafe output"
    
    return output
</code></pre>
<h2 id="future-trends"><a class="header" href="#future-trends">Future Trends</a></h2>
<h3 id="1-multimodal-foundation-models"><a class="header" href="#1-multimodal-foundation-models">1. Multimodal Foundation Models</a></h3>
<ul>
<li>Unified models handling text, image, audio, video</li>
<li>Seamless cross-modal generation</li>
</ul>
<h3 id="2-personalization"><a class="header" href="#2-personalization">2. Personalization</a></h3>
<ul>
<li>Models adapting to individual user preferences</li>
<li>Context-aware generation</li>
</ul>
<h3 id="3-efficiency"><a class="header" href="#3-efficiency">3. Efficiency</a></h3>
<ul>
<li>Smaller, faster models with comparable quality</li>
<li>Edge deployment of generative models</li>
</ul>
<h3 id="4-controllability"><a class="header" href="#4-controllability">4. Controllability</a></h3>
<ul>
<li>Fine-grained control over generation</li>
<li>Steering models toward specific outputs</li>
</ul>
<h3 id="5-collaboration"><a class="header" href="#5-collaboration">5. Collaboration</a></h3>
<ul>
<li>Human-AI co-creation workflows</li>
<li>Interactive refinement systems</li>
</ul>
<h2 id="resources-15"><a class="header" href="#resources-15">Resources</a></h2>
<h3 id="learning"><a class="header" href="#learning">Learning</a></h3>
<ul>
<li><a href="https://huggingface.co/docs/diffusers">Hugging Face Diffusers Course</a></li>
<li><a href="https://www.deeplearning.ai/">DeepLearning.AI Generative AI Courses</a></li>
<li><a href="https://platform.stability.ai/docs">Stability AI Documentation</a></li>
</ul>
<h3 id="tools-1"><a class="header" href="#tools-1">Tools</a></h3>
<ul>
<li><a href="https://huggingface.co/spaces">Hugging Face Spaces</a></li>
<li><a href="https://replicate.com/">Replicate</a></li>
<li><a href="https://gradio.app/">Gradio</a></li>
</ul>
<h3 id="communities"><a class="header" href="#communities">Communities</a></h3>
<ul>
<li>r/StableDiffusion</li>
<li>r/LocalLLaMA</li>
<li>Discord: Stable Diffusion, Midjourney</li>
<li>Twitter/X: AI researchers and practitioners</li>
</ul>
<h2 id="conclusion-11"><a class="header" href="#conclusion-11">Conclusion</a></h2>
<p>Generative AI is rapidly evolving, with new models and capabilities emerging constantly. Success comes from understanding the fundamentals, choosing appropriate tools, and applying ethical practices. Experiment, iterate, and stay updated with the latest developments.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="large-language-models-llms-2"><a class="header" href="#large-language-models-llms-2">Large Language Models (LLMs)</a></h1>
<h2 id="overview-31"><a class="header" href="#overview-31">Overview</a></h2>
<p>Large Language Models are transformer-based neural networks trained on massive text corpora to predict and generate human language. They've revolutionized AI with capabilities in translation, summarization, question-answering, and reasoning.</p>
<h2 id="architecture-basics"><a class="header" href="#architecture-basics">Architecture Basics</a></h2>
<h3 id="transformers-2"><a class="header" href="#transformers-2">Transformers</a></h3>
<p>Built on <strong>self-attention</strong> mechanism:</p>
<ul>
<li><strong>Query-Key-Value</strong>: "What am I looking for?" -&gt; "Where's the relevant info?" -&gt; "Get the info"</li>
<li><strong>Multi-head Attention</strong>: Multiple attention patterns in parallel</li>
<li><strong>Feed-forward Networks</strong>: Non-linear transformations</li>
<li><strong>Layer Normalization</strong>: Stabilizes training</li>
</ul>
<h3 id="scaling-laws"><a class="header" href="#scaling-laws">Scaling Laws</a></h3>
<p>Performance improves predictably with:</p>
<ul>
<li><strong>Model size</strong> (parameters): 7B -&gt; 70B -&gt; 700B</li>
<li><strong>Dataset size</strong>: More tokens = better performance</li>
<li><strong>Compute</strong>: More training = better convergence</li>
</ul>
<h2 id="popular-models"><a class="header" href="#popular-models">Popular Models</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Model</th><th>Size</th><th>Training Data</th><th>Strengths</th></tr></thead><tbody>
<tr><td>GPT-4</td><td>~1.7T params</td><td>~13T tokens</td><td>Reasoning, coding, creative</td></tr>
<tr><td>Claude</td><td>~100B params</td><td>High quality data</td><td>Instruction following, safety</td></tr>
<tr><td>Llama 2</td><td>7B-70B</td><td>2T tokens</td><td>Open-source, efficient</td></tr>
<tr><td>Mistral</td><td>7B-8x7B</td><td>7T tokens</td><td>Fast, efficient</td></tr>
<tr><td>Palm 2</td><td>~340B</td><td>High quality</td><td>Reasoning, math</td></tr>
</tbody></table>
</div>
<h2 id="training-process-1"><a class="header" href="#training-process-1">Training Process</a></h2>
<h3 id="1-pre-training"><a class="header" href="#1-pre-training">1. Pre-training</a></h3>
<pre><code>Objective: Predict next token
Input: "The cat sat on the"
Target: "mat"

Loss = -log P(mat | previous tokens)
</code></pre>
<p>Train on unlabeled internet text (unsupervised)</p>
<h3 id="2-supervised-fine-tuning"><a class="header" href="#2-supervised-fine-tuning">2. Supervised Fine-tuning</a></h3>
<pre><code>Input: "What is 2+2?"
Target: "2+2=4"
</code></pre>
<p>Train on labeled examples (supervised)</p>
<h3 id="3-rlhf-reinforcement-learning-from-human-feedback"><a class="header" href="#3-rlhf-reinforcement-learning-from-human-feedback">3. RLHF (Reinforcement Learning from Human Feedback)</a></h3>
<pre><code>1. Generate multiple responses
2. Humans rank by quality
3. Train reward model
4. Use reward to optimize policy
</code></pre>
<h2 id="key-concepts-15"><a class="header" href="#key-concepts-15">Key Concepts</a></h2>
<h3 id="tokenization"><a class="header" href="#tokenization">Tokenization</a></h3>
<p>Convert text to numbers:</p>
<pre><code>"Hello world" -&gt; [15339, 1159]
</code></pre>
<h3 id="embeddings"><a class="header" href="#embeddings">Embeddings</a></h3>
<p>Represent tokens as vectors in semantic space:</p>
<pre><code>king - man + woman ~= queen
</code></pre>
<h3 id="context-window"><a class="header" href="#context-window">Context Window</a></h3>
<p>Maximum tokens model can consider:</p>
<ul>
<li>GPT-3: 2K tokens</li>
<li>GPT-4: 32K - 128K tokens</li>
<li>Claude: 100K+ tokens</li>
<li>Llama 2: 4K tokens</li>
</ul>
<h3 id="temperature"><a class="header" href="#temperature">Temperature</a></h3>
<p>Controls randomness of output:</p>
<ul>
<li><strong>0</strong>: Deterministic (always same answer)</li>
<li><strong>0.7</strong>: Balanced (varied but coherent)</li>
<li><strong>1+</strong>: Creative (more random)</li>
</ul>
<h2 id="prompting-techniques"><a class="header" href="#prompting-techniques">Prompting Techniques</a></h2>
<h3 id="1-zero-shot"><a class="header" href="#1-zero-shot">1. Zero-Shot</a></h3>
<pre><code>Question: What is 2+2?
Answer: 4
</code></pre>
<h3 id="2-few-shot"><a class="header" href="#2-few-shot">2. Few-Shot</a></h3>
<pre><code>Question: What is 3+3?
Answer: 6

Question: What is 2+2?
Answer:
</code></pre>
<h3 id="3-chain-of-thought"><a class="header" href="#3-chain-of-thought">3. Chain-of-Thought</a></h3>
<pre><code>Q: If there are 3 apples and you add 2 more, how many are there?

A: Let me think step by step:
1. Start with 3 apples
2. Add 2 more
3. Total: 3 + 2 = 5
</code></pre>
<h3 id="4-role-based"><a class="header" href="#4-role-based">4. Role-Based</a></h3>
<pre><code>You are a helpful Python expert.
Q: How do I reverse a list?
A: [explanations as Python expert]
</code></pre>
<h2 id="limitations"><a class="header" href="#limitations">Limitations</a></h2>
<h3 id="hallucinations"><a class="header" href="#hallucinations">Hallucinations</a></h3>
<p>Making up false information confidently:</p>
<pre><code>Q: What's the capital of Atlantis?
A: The capital is Poseidiopolis. (Made up!)
</code></pre>
<h3 id="knowledge-cutoff"><a class="header" href="#knowledge-cutoff">Knowledge Cutoff</a></h3>
<p>No information beyond training data:</p>
<pre><code>Q: Who won the 2025 World Cup?
A: I don't have info beyond April 2024.
</code></pre>
<h3 id="context-length"><a class="header" href="#context-length">Context Length</a></h3>
<p>Can't process extremely long documents</p>
<h3 id="reasoning"><a class="header" href="#reasoning">Reasoning</a></h3>
<p>Struggles with:</p>
<ul>
<li>Multi-step complex logic</li>
<li>Mathematics (prone to errors)</li>
<li>Counting tokens accurately</li>
</ul>
<h2 id="fine-tuning-approaches"><a class="header" href="#fine-tuning-approaches">Fine-tuning Approaches</a></h2>
<h3 id="full-fine-tuning"><a class="header" href="#full-fine-tuning">Full Fine-tuning</a></h3>
<p>Update all parameters (expensive):</p>
<pre><code>Memory: O(parameters)
Time: O(tokens)
</code></pre>
<h3 id="lora-low-rank-adaptation-1"><a class="header" href="#lora-low-rank-adaptation-1">LoRA (Low-Rank Adaptation)</a></h3>
<p>Add small trainable matrices (efficient):</p>
<pre><code class="language-python"># Instead of: W' = W + delta_W
# Use: W' = W + A*B (where A, B &lt;&lt; W)
</code></pre>
<h3 id="qlora"><a class="header" href="#qlora">QLoRA</a></h3>
<p>Quantized LoRA (even more efficient):</p>
<ul>
<li>4-bit quantization</li>
<li>Reduces memory to ~6GB for 7B model</li>
</ul>
<h2 id="applications-9"><a class="header" href="#applications-9">Applications</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Use Case</th><th>Technique</th><th>Example</th></tr></thead><tbody>
<tr><td><strong>Chat</strong></td><td>Conversation history</td><td>ChatGPT</td></tr>
<tr><td><strong>Code</strong></td><td>In-context learning</td><td>GitHub Copilot</td></tr>
<tr><td><strong>Search</strong></td><td>Semantic ranking</td><td>Perplexity AI</td></tr>
<tr><td><strong>Translation</strong></td><td>Multilingual models</td><td>Google Translate</td></tr>
<tr><td><strong>Summarization</strong></td><td>Extractive/abstractive</td><td>Claude summarization</td></tr>
</tbody></table>
</div>
<h2 id="costs--efficiency"><a class="header" href="#costs--efficiency">Costs &amp; Efficiency</a></h2>
<h3 id="api-usage"><a class="header" href="#api-usage">API Usage</a></h3>
<pre><code>Pricing: $ per 1M tokens
GPT-4: $30 input, $60 output
Claude: $8 input, $24 output
</code></pre>
<h3 id="running-locally"><a class="header" href="#running-locally">Running Locally</a></h3>
<pre><code>Model Size | VRAM Needed | Speed
7B params  | 16GB        | Fast
13B params | 24GB        | Medium
70B params | 80GB (GPU)  | Slow
</code></pre>
<h2 id="evaluation-metrics-2"><a class="header" href="#evaluation-metrics-2">Evaluation Metrics</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Metric</th><th>What It Measures</th></tr></thead><tbody>
<tr><td><strong>Perplexity</strong></td><td>How well model predicts text</td></tr>
<tr><td><strong>BLEU</strong></td><td>Translation quality</td></tr>
<tr><td><strong>ROUGE</strong></td><td>Summarization quality</td></tr>
<tr><td><strong>Human Eval</strong></td><td>Actual user satisfaction</td></tr>
</tbody></table>
</div>
<h2 id="best-practices-20"><a class="header" href="#best-practices-20">Best Practices</a></h2>
<h3 id="1-prompt-engineering-3"><a class="header" href="#1-prompt-engineering-3">1. Prompt Engineering</a></h3>
<pre><code>X Bad: "Write code"
Checkmark Good: "Write Python function that takes list and returns sorted list in ascending order"
</code></pre>
<h3 id="2-breaking-complex-tasks"><a class="header" href="#2-breaking-complex-tasks">2. Breaking Complex Tasks</a></h3>
<pre><code>Instead of: "Analyze this company and give investment advice"
Try:
1. "Summarize this company's financials"
2. "What are the main risks?"
3. "What are growth opportunities?"
4. "Should we invest?"
</code></pre>
<h3 id="3-verification"><a class="header" href="#3-verification">3. Verification</a></h3>
<p>Always verify facts from authoritative sources</p>
<h2 id="eli10-15"><a class="header" href="#eli10-15">ELI10</a></h2>
<p>Imagine teaching a child language by:</p>
<ol>
<li>Reading millions of books</li>
<li>Learning to predict next word</li>
<li>Getting feedback on quality</li>
<li>Adjusting understanding</li>
</ol>
<p>That's basically how LLMs learn! They become really good at continuing conversations in natural human language.</p>
<p>The trick: They learn statistics of language, not true understanding. So they might confidently say wrong things (hallucinations).</p>
<h2 id="future-directions"><a class="header" href="#future-directions">Future Directions</a></h2>
<ul>
<li><strong>Multimodal</strong>: Understanding images + text + audio</li>
<li><strong>Long Context</strong>: Processing entire books</li>
<li><strong>Reasoning</strong>: Better at logic puzzles</li>
<li><strong>Efficiency</strong>: Running on phones/devices</li>
<li><strong>Robotics</strong>: Language guiding physical actions</li>
</ul>
<h2 id="further-resources-15"><a class="header" href="#further-resources-15">Further Resources</a></h2>
<ul>
<li><a href="https://arxiv.org/abs/1706.03762">Transformer Paper</a></li>
<li><a href="https://openai.com/research/">OpenAI GPT Blog</a></li>
<li><a href="https://huggingface.co/">Hugging Face</a></li>
<li><a href="https://www.promptingguide.ai/">Prompt Engineering Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="prompt-engineering"><a class="header" href="#prompt-engineering">Prompt Engineering</a></h1>
<p>A comprehensive guide to crafting effective prompts for Large Language Models (LLMs).</p>
<h2 id="table-of-contents-17"><a class="header" href="#table-of-contents-17">Table of Contents</a></h2>
<ul>
<li><a href="ai/prompt_engineering.html#introduction">Introduction</a></li>
<li><a href="ai/prompt_engineering.html#core-principles">Core Principles</a></li>
<li><a href="ai/prompt_engineering.html#fundamental-techniques">Fundamental Techniques</a></li>
<li><a href="ai/prompt_engineering.html#advanced-techniques">Advanced Techniques</a></li>
<li><a href="ai/prompt_engineering.html#prompt-patterns">Prompt Patterns</a></li>
<li><a href="ai/prompt_engineering.html#best-practices">Best Practices</a></li>
<li><a href="ai/prompt_engineering.html#common-pitfalls">Common Pitfalls</a></li>
<li><a href="ai/prompt_engineering.html#examples-by-task">Examples by Task</a></li>
</ul>
<h2 id="introduction-4"><a class="header" href="#introduction-4">Introduction</a></h2>
<p>Prompt engineering is the practice of designing inputs to get desired outputs from LLMs. It's both an art and a science, requiring understanding of:</p>
<ul>
<li>How models process and interpret text</li>
<li>What patterns yield consistent results</li>
<li>How to balance specificity with flexibility</li>
</ul>
<h2 id="core-principles"><a class="header" href="#core-principles">Core Principles</a></h2>
<h3 id="1-clarity-and-specificity"><a class="header" href="#1-clarity-and-specificity">1. Clarity and Specificity</a></h3>
<p>Be explicit about what you want:</p>
<pre><code>❌ Bad: "Write about dogs"
✅ Good: "Write a 300-word informative article about the benefits of adopting rescue dogs, including health, cost, and emotional aspects."
</code></pre>
<h3 id="2-context-provision"><a class="header" href="#2-context-provision">2. Context Provision</a></h3>
<p>Give the model necessary background:</p>
<pre><code>❌ Bad: "What should I do?"
✅ Good: "I'm a Python developer with 3 years of experience. I want to transition into machine learning. What skills should I prioritize learning first?"
</code></pre>
<h3 id="3-format-specification"><a class="header" href="#3-format-specification">3. Format Specification</a></h3>
<p>Define the desired output structure:</p>
<pre><code>❌ Bad: "Tell me about the solar system"
✅ Good: "List the planets in our solar system in a markdown table with columns: Name, Distance from Sun (AU), and One Interesting Fact."
</code></pre>
<h3 id="4-role-assignment"><a class="header" href="#4-role-assignment">4. Role Assignment</a></h3>
<p>Set the model's perspective:</p>
<pre><code>"You are an experienced DevOps engineer. Explain Kubernetes deployments to a junior developer who has only worked with traditional hosting."
</code></pre>
<h2 id="fundamental-techniques"><a class="header" href="#fundamental-techniques">Fundamental Techniques</a></h2>
<h3 id="zero-shot-prompting"><a class="header" href="#zero-shot-prompting">Zero-Shot Prompting</a></h3>
<p>Direct instruction without examples:</p>
<pre><code>Prompt: "Classify the sentiment of this review: 'The product arrived damaged but customer service was helpful.' Choose: positive, negative, or mixed."

Output: "mixed"
</code></pre>
<h3 id="few-shot-prompting"><a class="header" href="#few-shot-prompting">Few-Shot Prompting</a></h3>
<p>Provide examples to guide the model:</p>
<pre><code>Classify movie reviews as positive or negative:

Review: "A masterpiece of cinema!"
Sentiment: positive

Review: "Boring and predictable plot."
Sentiment: negative

Review: "Waste of time and money."
Sentiment: negative

Review: "Incredible performances by the cast."
Sentiment: positive

Review: "The special effects were amazing but the story was weak."
Sentiment: 
</code></pre>
<h3 id="chain-of-thought-cot"><a class="header" href="#chain-of-thought-cot">Chain-of-Thought (CoT)</a></h3>
<p>Encourage step-by-step reasoning:</p>
<pre><code>Prompt: "A cafeteria has 23 apples. If they used 20 to make lunch and bought 6 more, how many apples do they have? Let's think step by step."

Output:
"Let's solve this step by step:
1. Starting apples: 23
2. Used for lunch: 23 - 20 = 3 apples remaining
3. Bought more: 3 + 6 = 9 apples
Answer: The cafeteria has 9 apples."
</code></pre>
<h3 id="zero-shot-chain-of-thought"><a class="header" href="#zero-shot-chain-of-thought">Zero-Shot Chain-of-Thought</a></h3>
<p>Add "Let's think step by step" to enable reasoning:</p>
<pre><code>Prompt: "If a train travels 120 miles in 2 hours, then speeds up and travels 180 miles in the next 2 hours, what's the average speed for the entire journey? Let's think step by step."
</code></pre>
<h3 id="self-consistency"><a class="header" href="#self-consistency">Self-Consistency</a></h3>
<p>Generate multiple reasoning paths and choose the most consistent:</p>
<pre><code class="language-python"># Ask the same question with slight variations
prompts = [
    "Calculate 15% tip on $47.50. Show your work.",
    "What's a 15% tip on a $47.50 bill? Explain your calculation.",
    "If my bill is $47.50 and I want to leave 15%, how much is the tip?"
]

# The most common answer is likely correct
</code></pre>
<h2 id="advanced-techniques-1"><a class="header" href="#advanced-techniques-1">Advanced Techniques</a></h2>
<h3 id="tree-of-thoughts-tot"><a class="header" href="#tree-of-thoughts-tot">Tree of Thoughts (ToT)</a></h3>
<p>Explore multiple reasoning branches:</p>
<pre><code>Problem: Design a marketing campaign for a new eco-friendly water bottle.

Let's explore three different approaches:

Approach 1: Sustainability Focus
- Highlight environmental impact
- Partner with conservation organizations
- Target eco-conscious millennials
[Evaluate pros/cons]

Approach 2: Innovation Focus
- Emphasize unique design features
- Tech-forward marketing
- Target early adopters
[Evaluate pros/cons]

Approach 3: Health &amp; Wellness Focus
- Connect to healthy lifestyle
- Partner with fitness influencers
- Target health-conscious consumers
[Evaluate pros/cons]

Now, let's combine the best elements...
</code></pre>
<h3 id="react-reasoning--acting"><a class="header" href="#react-reasoning--acting">ReAct (Reasoning + Acting)</a></h3>
<p>Interleave reasoning with actions:</p>
<pre><code>Task: Find information about the latest Python version

Thought: I need to find current Python version information
Action: Search for "latest Python version 2025"
Observation: Python 3.13 was released in October 2024
Thought: I should verify this is the most recent stable version
Action: Check Python.org official releases
Observation: Confirmed, Python 3.13 is the latest stable version
Answer: The latest Python version is 3.13, released in October 2024
</code></pre>
<h3 id="prompt-chaining"><a class="header" href="#prompt-chaining">Prompt Chaining</a></h3>
<p>Break complex tasks into steps:</p>
<pre><code class="language-python"># Step 1: Research
prompt1 = "List 5 key features of electric vehicles vs gasoline cars"

# Step 2: Analyze (using output from step 1)
prompt2 = f"Given these EV features: {output1}, which three are most important for urban commuters?"

# Step 3: Synthesize
prompt3 = f"Based on these priority features: {output2}, write a 100-word recommendation"
</code></pre>
<h3 id="automatic-prompt-engineering-ape"><a class="header" href="#automatic-prompt-engineering-ape">Automatic Prompt Engineering (APE)</a></h3>
<p>Let the model optimize its own prompts:</p>
<pre><code>Meta-prompt: "I want to classify customer support tickets into categories: billing, technical, general inquiry. Generate 5 different prompts that would work well for this classification task."
</code></pre>
<h2 id="prompt-patterns"><a class="header" href="#prompt-patterns">Prompt Patterns</a></h2>
<h3 id="the-persona-pattern"><a class="header" href="#the-persona-pattern">The Persona Pattern</a></h3>
<pre><code>"Act as [role] with [characteristics]. Your task is to [objective]."

Example:
"Act as a senior software architect with 15 years of experience in microservices. Review this code design and suggest improvements for scalability."
</code></pre>
<h3 id="the-template-pattern"><a class="header" href="#the-template-pattern">The Template Pattern</a></h3>
<pre><code>"[Action] about [topic] in [format] with [constraints]."

Example:
"Write about artificial intelligence in a blog post format with a friendly tone, 500 words max, aimed at non-technical readers."
</code></pre>
<h3 id="the-constraint-pattern"><a class="header" href="#the-constraint-pattern">The Constraint Pattern</a></h3>
<pre><code>"[Task]. You must [requirement 1]. You must [requirement 2]. You cannot [restriction]."

Example:
"Write a product description. You must include benefits, not just features. You must use active voice. You cannot use technical jargon."
</code></pre>
<h3 id="the-refinement-pattern"><a class="header" href="#the-refinement-pattern">The Refinement Pattern</a></h3>
<pre><code>Initial prompt → Generate → Critique → Revise

Example:
"Write a haiku about coding."
[output]
"Now critique this haiku for syllable count and imagery."
[critique]
"Revise the haiku based on the critique."
</code></pre>
<h3 id="the-comparative-pattern"><a class="header" href="#the-comparative-pattern">The Comparative Pattern</a></h3>
<pre><code>"Compare [A] and [B] in terms of [criteria 1], [criteria 2], and [criteria 3]. Present as [format]."

Example:
"Compare REST API and GraphQL in terms of performance, flexibility, and ease of use. Present as a comparison table."
</code></pre>
<h3 id="the-instruction-context-format-icf-pattern"><a class="header" href="#the-instruction-context-format-icf-pattern">The Instruction-Context-Format (ICF) Pattern</a></h3>
<pre><code># Instruction
[What to do]

# Context
[Background information]

# Format
[How to structure the output]

Example:
# Instruction
Explain how photosynthesis works

# Context
The audience is 5th-grade students learning about plant biology for the first time

# Format
Use an analogy with a familiar concept, then provide 3-5 simple bullet points
</code></pre>
<h2 id="best-practices-21"><a class="header" href="#best-practices-21">Best Practices</a></h2>
<h3 id="1-use-delimiters"><a class="header" href="#1-use-delimiters">1. Use Delimiters</a></h3>
<p>Clearly separate different parts of your prompt:</p>
<pre><code>Summarize the text delimited by triple quotes.

Text: """
[long text here]
"""

Requirements:
- 3 sentences maximum
- Highlight main argument
- Use neutral tone
</code></pre>
<h3 id="2-specify-output-format"><a class="header" href="#2-specify-output-format">2. Specify Output Format</a></h3>
<pre><code>"Provide your answer as a JSON object with the following structure:
{
  "summary": "brief overview",
  "key_points": ["point1", "point2", "point3"],
  "recommendation": "actionable advice"
}"
</code></pre>
<h3 id="3-request-step-by-step-thinking"><a class="header" href="#3-request-step-by-step-thinking">3. Request Step-by-Step Thinking</a></h3>
<pre><code>"Before answering, explain your reasoning process. Then provide the final answer clearly labeled."
</code></pre>
<h3 id="4-use-examples-strategically"><a class="header" href="#4-use-examples-strategically">4. Use Examples Strategically</a></h3>
<pre><code># For few-shot learning, provide diverse examples:
Input: "The cat sat on the mat" → Simple sentence
Input: "Although tired, she completed the marathon" → Complex sentence
Input: "Run!" → Imperative sentence
Input: "Is it raining?" → Interrogative sentence
Input: "What a beautiful day!" → 
</code></pre>
<h3 id="5-iterate-and-refine"><a class="header" href="#5-iterate-and-refine">5. Iterate and Refine</a></h3>
<pre><code class="language-python"># Version 1: Too vague
"Write code for a web scraper"

# Version 2: More specific
"Write Python code for a web scraper using BeautifulSoup"

# Version 3: Complete specification
"Write Python code using BeautifulSoup to scrape product names and prices from an e-commerce site. Include error handling for missing elements and rate limiting to respect the server."
</code></pre>
<h3 id="6-control-length"><a class="header" href="#6-control-length">6. Control Length</a></h3>
<pre><code>"Explain quantum entanglement in [50/100/200] words"
"Provide a [brief/moderate/detailed] explanation"
"Summarize in [2-3 sentences/one paragraph/300 words]"
</code></pre>
<h3 id="7-set-the-temperature"><a class="header" href="#7-set-the-temperature">7. Set the Temperature</a></h3>
<p>Understand model parameters:</p>
<pre><code class="language-python"># Creative tasks (high temperature: 0.7-1.0)
{"temperature": 0.9}
# "Write a creative story about a time-traveling cat"

# Factual tasks (low temperature: 0.0-0.3)
{"temperature": 0.1}
# "What is the capital of France?"

# Balanced tasks (medium temperature: 0.4-0.6)
{"temperature": 0.5}
# "Explain the pros and cons of remote work"
</code></pre>
<h2 id="common-pitfalls"><a class="header" href="#common-pitfalls">Common Pitfalls</a></h2>
<h3 id="1-ambiguity"><a class="header" href="#1-ambiguity">1. Ambiguity</a></h3>
<pre><code>❌ "Tell me about Python"
✅ "Explain Python's list comprehension syntax with 3 examples"
</code></pre>
<h3 id="2-conflicting-instructions"><a class="header" href="#2-conflicting-instructions">2. Conflicting Instructions</a></h3>
<pre><code>❌ "Write a detailed brief summary"
✅ "Write a summary in 2-3 sentences covering the main points"
</code></pre>
<h3 id="3-assuming-knowledge"><a class="header" href="#3-assuming-knowledge">3. Assuming Knowledge</a></h3>
<pre><code>❌ "Debug this code" [without context]
✅ "This Python function should sort a list but returns an error. Debug it: [code]. The error message is: [error]"
</code></pre>
<h3 id="4-overcomplicating"><a class="header" href="#4-overcomplicating">4. Overcomplicating</a></h3>
<pre><code>❌ [500-word prompt with 20 constraints]
✅ [Clear, focused prompt with 3-5 key requirements]
</code></pre>
<h3 id="5-not-testing-variations"><a class="header" href="#5-not-testing-variations">5. Not Testing Variations</a></h3>
<p>Always try multiple phrasings:</p>
<ul>
<li>"List the benefits"</li>
<li>"What are the advantages"</li>
<li>"Explain why this is useful"</li>
</ul>
<h2 id="examples-by-task"><a class="header" href="#examples-by-task">Examples by Task</a></h2>
<h3 id="code-generation"><a class="header" href="#code-generation">Code Generation</a></h3>
<pre><code>Task: Create a Python function

Prompt:
"Write a Python function named 'calculate_statistics' that:
- Takes a list of numbers as input
- Returns a dictionary with: mean, median, mode, and standard deviation
- Handles edge cases (empty list, single value)
- Includes docstring with examples
- Uses only standard library modules"
</code></pre>
<h3 id="data-analysis"><a class="header" href="#data-analysis">Data Analysis</a></h3>
<pre><code>Task: Analyze sales data

Prompt:
"Given this sales data in CSV format:
[data]

Perform the following analysis:
1. Calculate total revenue by product category
2. Identify the top 3 performing products
3. Calculate month-over-month growth rate
4. Provide 3 actionable insights

Present findings in a structured format with clear headers."
</code></pre>
<h3 id="content-writing"><a class="header" href="#content-writing">Content Writing</a></h3>
<pre><code>Task: Write a blog post

Prompt:
"Write a 600-word blog post about 'The Future of Remote Work'

Structure:
- Engaging headline
- Hook in first paragraph
- 3 main sections with subheadings
- Include statistics or examples
- Conclude with actionable takeaway

Tone: Professional yet conversational
Audience: Mid-level professionals and managers
SEO keywords: remote work, hybrid model, workplace flexibility"
</code></pre>
<h3 id="summarization"><a class="header" href="#summarization">Summarization</a></h3>
<pre><code>Task: Summarize a technical document

Prompt:
"Summarize the following technical documentation:

[document]

Create two versions:
1. Executive Summary (100 words): High-level overview for non-technical stakeholders
2. Technical Summary (300 words): Key technical details for engineering team

Highlight any critical warnings or breaking changes."
</code></pre>
<h3 id="translation-with-context"><a class="header" href="#translation-with-context">Translation with Context</a></h3>
<pre><code>Task: Contextual translation

Prompt:
"Translate the following English text to Spanish:

'The system is down'

Context: This is an IT status message displayed to users during an outage.
Requirements:
- Use appropriate technical terminology
- Maintain professional tone
- Ensure clarity for non-technical users"
</code></pre>
<h3 id="code-review"><a class="header" href="#code-review">Code Review</a></h3>
<pre><code>Task: Review code quality

Prompt:
"Review this Python code for:

[code]

Evaluate:
1. Code quality and readability
2. Performance considerations
3. Potential bugs or edge cases
4. Security issues
5. Best practices adherence

Provide specific suggestions with code examples where applicable.
Rate each category from 1-5 and explain your ratings."
</code></pre>
<h3 id="question-answering"><a class="header" href="#question-answering">Question Answering</a></h3>
<pre><code>Task: Answer with citations

Prompt:
"Answer the following question using only information from the provided text. Quote relevant passages to support your answer.

Text: [document]

Question: [question]

Format:
- Direct answer (1-2 sentences)
- Supporting evidence (2-3 quoted passages)
- Confidence level (high/medium/low)"
</code></pre>
<h3 id="creative-writing"><a class="header" href="#creative-writing">Creative Writing</a></h3>
<pre><code>Task: Story generation

Prompt:
"Write a short story (500 words) with these elements:

Setting: Cyberpunk city in 2150
Protagonist: AI rights activist
Conflict: Choice between following the law or doing what's right
Theme: Question of consciousness and personhood
Tone: Noir detective style

Include:
- Vivid sensory details
- Internal monologue
- Unexpected twist ending"
</code></pre>
<h2 id="advanced-prompt-engineering"><a class="header" href="#advanced-prompt-engineering">Advanced Prompt Engineering</a></h2>
<h3 id="meta-prompting"><a class="header" href="#meta-prompting">Meta-Prompting</a></h3>
<pre><code>"I need to create prompts for classifying customer emails. First, analyze what makes a good classification prompt, then generate 3 examples of effective prompts for this task."
</code></pre>
<h3 id="prompt-optimization-loop"><a class="header" href="#prompt-optimization-loop">Prompt Optimization Loop</a></h3>
<pre><code class="language-python">initial_prompt = "Explain machine learning"

optimization_prompt = f"""
Original prompt: "{initial_prompt}"

This prompt is too vague. Improve it by:
1. Adding specific focus area
2. Defining target audience
3. Specifying depth of explanation
4. Setting output format

Provide an optimized version.
"""
</code></pre>
<h3 id="system-prompts-api-usage"><a class="header" href="#system-prompts-api-usage">System Prompts (API Usage)</a></h3>
<pre><code class="language-python"># For chat-based models
system_prompt = """You are a Python expert specializing in data science.
Your responses should:
- Include working code examples
- Explain complex concepts simply
- Suggest best practices
- Warn about common pitfalls
- Use type hints and documentation"""

user_prompt = "How do I handle missing data in pandas?"

# API call structure
response = client.chat.completions.create(
    model="gpt-4",
    messages=[
        {"role": "system", "content": system_prompt},
        {"role": "user", "content": user_prompt}
    ]
)
</code></pre>
<h3 id="constitutional-ai-prompting"><a class="header" href="#constitutional-ai-prompting">Constitutional AI Prompting</a></h3>
<p>Build in safety and ethical guidelines:</p>
<pre><code>"[Task description]

Guidelines:
- Provide factual, unbiased information
- Acknowledge uncertainty when appropriate
- Avoid harmful or discriminatory content
- Cite sources when making factual claims
- Respect privacy and confidentiality"
</code></pre>
<h2 id="prompt-engineering-tools"><a class="header" href="#prompt-engineering-tools">Prompt Engineering Tools</a></h2>
<h3 id="langchain-prompt-templates"><a class="header" href="#langchain-prompt-templates">LangChain Prompt Templates</a></h3>
<pre><code class="language-python">from langchain import PromptTemplate

template = """
You are a {role} with expertise in {domain}.

Task: {task}

Context: {context}

Provide your response in {format} format.
"""

prompt = PromptTemplate(
    input_variables=["role", "domain", "task", "context", "format"],
    template=template
)

final_prompt = prompt.format(
    role="data scientist",
    domain="machine learning",
    task="explain overfitting",
    context="teaching beginners",
    format="simple terms with examples"
)
</code></pre>
<h3 id="prompt-versioning"><a class="header" href="#prompt-versioning">Prompt Versioning</a></h3>
<pre><code class="language-python"># Track prompt iterations
prompts = {
    "v1.0": "Summarize this text",
    "v1.1": "Summarize this text in 100 words",
    "v1.2": "Summarize this text in 100 words, focusing on key insights",
    "v2.0": "Provide a 100-word summary highlighting: 1) main argument, 2) supporting evidence, 3) conclusions"
}
</code></pre>
<h2 id="measuring-prompt-quality"><a class="header" href="#measuring-prompt-quality">Measuring Prompt Quality</a></h2>
<h3 id="evaluation-criteria"><a class="header" href="#evaluation-criteria">Evaluation Criteria</a></h3>
<ol>
<li><strong>Consistency</strong>: Same prompt → similar outputs</li>
<li><strong>Accuracy</strong>: Outputs match expected results</li>
<li><strong>Efficiency</strong>: Minimal tokens for desired result</li>
<li><strong>Robustness</strong>: Works with variations in input</li>
<li><strong>Clarity</strong>: Unambiguous instructions</li>
</ol>
<h3 id="testing-framework"><a class="header" href="#testing-framework">Testing Framework</a></h3>
<pre><code class="language-python">def test_prompt(prompt, test_cases, model):
    results = []
    
    for test_input, expected_output in test_cases:
        full_prompt = prompt.format(input=test_input)
        actual_output = model.generate(full_prompt)
        
        results.append({
            'input': test_input,
            'expected': expected_output,
            'actual': actual_output,
            'match': evaluate_match(expected_output, actual_output)
        })
    
    return results
</code></pre>
<h2 id="resources-16"><a class="header" href="#resources-16">Resources</a></h2>
<h3 id="practice-platforms"><a class="header" href="#practice-platforms">Practice Platforms</a></h3>
<ul>
<li><a href="https://promptperfect.jina.ai/">PromptPerfect</a></li>
<li><a href="https://learnprompting.org/">Learn Prompting</a></li>
<li><a href="https://platform.openai.com/playground">OpenAI Playground</a></li>
<li><a href="https://console.anthropic.com/">Anthropic Console</a></li>
</ul>
<h3 id="reading"><a class="header" href="#reading">Reading</a></h3>
<ul>
<li><a href="https://platform.openai.com/docs/guides/prompt-engineering">OpenAI Prompt Engineering Guide</a></li>
<li><a href="https://docs.anthropic.com/claude/prompt-library">Anthropic Prompt Library</a></li>
<li><a href="https://www.promptingguide.ai/">Prompt Engineering Guide</a></li>
<li>Research papers on prompting techniques</li>
</ul>
<h3 id="communities-1"><a class="header" href="#communities-1">Communities</a></h3>
<ul>
<li>r/PromptEngineering</li>
<li>Discord servers for AI tools</li>
<li>Twitter/X AI communities</li>
</ul>
<h2 id="conclusion-12"><a class="header" href="#conclusion-12">Conclusion</a></h2>
<p>Prompt engineering is an iterative process. Start simple, test thoroughly, and refine based on results. The key is understanding both your task requirements and how the model interprets instructions.</p>
<p>Remember: The best prompt is the one that consistently produces the results you need with minimal tokens and maximum clarity.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="llama-models---meta-ai"><a class="header" href="#llama-models---meta-ai">Llama Models - Meta AI</a></h1>
<p>Complete guide to Meta's Llama family of open-source language models, from setup to fine-tuning and deployment.</p>
<h2 id="table-of-contents-18"><a class="header" href="#table-of-contents-18">Table of Contents</a></h2>
<ul>
<li><a href="ai/llama.html#introduction">Introduction</a></li>
<li><a href="ai/llama.html#model-versions">Model Versions</a></li>
<li><a href="ai/llama.html#installation--setup">Installation &amp; Setup</a></li>
<li><a href="ai/llama.html#basic-usage">Basic Usage</a></li>
<li><a href="ai/llama.html#fine-tuning">Fine-tuning</a></li>
<li><a href="ai/llama.html#quantization">Quantization</a></li>
<li><a href="ai/llama.html#inference-optimization">Inference Optimization</a></li>
<li><a href="ai/llama.html#deployment">Deployment</a></li>
<li><a href="ai/llama.html#advanced-techniques">Advanced Techniques</a></li>
</ul>
<h2 id="introduction-5"><a class="header" href="#introduction-5">Introduction</a></h2>
<p>Llama (Large Language Model Meta AI) is Meta's family of open-source foundation language models. Released as open-weights models, they've become the foundation for countless applications and fine-tuned variants.</p>
<h3 id="key-features-1"><a class="header" href="#key-features-1">Key Features</a></h3>
<ul>
<li><strong>Open Source</strong>: Freely available weights</li>
<li><strong>Strong Performance</strong>: Competitive with closed models</li>
<li><strong>Multiple Sizes</strong>: From 1B to 70B+ parameters</li>
<li><strong>Commercial Friendly</strong>: Permissive license</li>
<li><strong>Active Ecosystem</strong>: Huge community support</li>
<li><strong>Efficient</strong>: Optimized for deployment</li>
</ul>
<h3 id="architecture-1"><a class="header" href="#architecture-1">Architecture</a></h3>
<ul>
<li><strong>Transformer-based</strong>: Decoder-only architecture</li>
<li><strong>RMSNorm</strong>: Root Mean Square Layer Normalization</li>
<li><strong>SwiGLU</strong>: Activation function</li>
<li><strong>Rotary Embeddings</strong>: Position encoding</li>
<li><strong>Grouped-Query Attention</strong>: Efficient attention mechanism</li>
</ul>
<h2 id="model-versions"><a class="header" href="#model-versions">Model Versions</a></h2>
<h3 id="llama-32-latest"><a class="header" href="#llama-32-latest">Llama 3.2 (Latest)</a></h3>
<p><strong>Released</strong>: September 2024</p>
<h4 id="llama-32-1b3b-edge-models"><a class="header" href="#llama-32-1b3b-edge-models">Llama 3.2 1B/3B (Edge Models)</a></h4>
<pre><code class="language-python">from transformers import AutoTokenizer, AutoModelForCausalLM
import torch

model_name = "meta-llama/Llama-3.2-1B-Instruct"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(
    model_name,
    torch_dtype=torch.float16,
    device_map="auto"
)

# Chat
messages = [
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "What is Python?"}
]

input_ids = tokenizer.apply_chat_template(
    messages,
    return_tensors="pt"
).to(model.device)

outputs = model.generate(
    input_ids,
    max_new_tokens=256,
    temperature=0.7
)

print(tokenizer.decode(outputs[0], skip_special_tokens=True))
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>1B and 3B parameter versions</li>
<li>Optimized for mobile and edge devices</li>
<li>Multilingual support</li>
<li>128K context length</li>
<li>Excellent for on-device inference</li>
</ul>
<h4 id="llama-32-11b90b-vision-models"><a class="header" href="#llama-32-11b90b-vision-models">Llama 3.2 11B/90B (Vision Models)</a></h4>
<pre><code class="language-python">from transformers import MllamaForConditionalGeneration, AutoProcessor
from PIL import Image

model = MllamaForConditionalGeneration.from_pretrained(
    "meta-llama/Llama-3.2-11B-Vision-Instruct",
    torch_dtype=torch.bfloat16,
    device_map="auto"
)
processor = AutoProcessor.from_pretrained("meta-llama/Llama-3.2-11B-Vision-Instruct")

# Load image
image = Image.open("photo.jpg")

# Create prompt
messages = [
    {
        "role": "user",
        "content": [
            {"type": "image"},
            {"type": "text", "text": "What's in this image?"}
        ]
    }
]

# Process and generate
input_text = processor.apply_chat_template(messages, add_generation_prompt=True)
inputs = processor(image, input_text, return_tensors="pt").to(model.device)

output = model.generate(**inputs, max_new_tokens=256)
print(processor.decode(output[0], skip_special_tokens=True))
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>Multimodal (text + vision)</li>
<li>11B and 90B variants</li>
<li>Image understanding</li>
<li>Visual question answering</li>
</ul>
<h3 id="llama-31"><a class="header" href="#llama-31">Llama 3.1</a></h3>
<p><strong>Released</strong>: July 2024</p>
<pre><code class="language-python"># 8B - Fast, efficient
model_name = "meta-llama/Llama-3.1-8B-Instruct"

# 70B - High capability
model_name = "meta-llama/Llama-3.1-70B-Instruct"

# 405B - Most capable (requires multiple GPUs)
model_name = "meta-llama/Llama-3.1-405B-Instruct"
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>128K context window</li>
<li>Multilingual (8 languages)</li>
<li>Tool use capabilities</li>
<li>Improved reasoning</li>
<li>8B, 70B, and 405B sizes</li>
</ul>
<h3 id="llama-3"><a class="header" href="#llama-3">Llama 3</a></h3>
<p><strong>Released</strong>: April 2024</p>
<pre><code class="language-python"># 8B
model_name = "meta-llama/Meta-Llama-3-8B-Instruct"

# 70B
model_name = "meta-llama/Meta-Llama-3-70B-Instruct"
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>8K context window</li>
<li>Strong performance</li>
<li>Better instruction following</li>
<li>8B and 70B sizes</li>
</ul>
<h3 id="llama-2"><a class="header" href="#llama-2">Llama 2</a></h3>
<p><strong>Released</strong>: July 2023</p>
<pre><code class="language-python"># 7B
model_name = "meta-llama/Llama-2-7b-chat-hf"

# 13B
model_name = "meta-llama/Llama-2-13b-chat-hf"

# 70B
model_name = "meta-llama/Llama-2-70b-chat-hf"
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>4K context window</li>
<li>7B, 13B, and 70B sizes</li>
<li>Still widely used</li>
</ul>
<h3 id="model-comparison-1"><a class="header" href="#model-comparison-1">Model Comparison</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Model</th><th>Parameters</th><th>Context</th><th>VRAM (FP16)</th><th>Use Case</th></tr></thead><tbody>
<tr><td>Llama 3.2 1B</td><td>1B</td><td>128K</td><td>2GB</td><td>Edge/Mobile</td></tr>
<tr><td>Llama 3.2 3B</td><td>3B</td><td>128K</td><td>6GB</td><td>Edge/Desktop</td></tr>
<tr><td>Llama 3.1 8B</td><td>8B</td><td>128K</td><td>16GB</td><td>Standard</td></tr>
<tr><td>Llama 3.2 11B Vision</td><td>11B</td><td>128K</td><td>22GB</td><td>Multimodal</td></tr>
<tr><td>Llama 3.1 70B</td><td>70B</td><td>128K</td><td>140GB</td><td>High-end</td></tr>
<tr><td>Llama 3.2 90B Vision</td><td>90B</td><td>128K</td><td>180GB</td><td>Vision tasks</td></tr>
<tr><td>Llama 3.1 405B</td><td>405B</td><td>128K</td><td>810GB</td><td>Best quality</td></tr>
</tbody></table>
</div>
<h2 id="installation--setup"><a class="header" href="#installation--setup">Installation &amp; Setup</a></h2>
<h3 id="via-hugging-face-transformers"><a class="header" href="#via-hugging-face-transformers">Via Hugging Face Transformers</a></h3>
<pre><code class="language-bash"># Install dependencies
pip install transformers torch accelerate

# For quantization
pip install bitsandbytes

# For training
pip install peft datasets
</code></pre>
<h3 id="via-ollama-easy-local-setup"><a class="header" href="#via-ollama-easy-local-setup">Via Ollama (Easy Local Setup)</a></h3>
<pre><code class="language-bash"># Install Ollama
curl -fsSL https://ollama.com/install.sh | sh

# Pull model
ollama pull llama3.2

# Run
ollama run llama3.2
</code></pre>
<p>Python usage:</p>
<pre><code class="language-python">import requests

def query_ollama(prompt):
    response = requests.post('http://localhost:11434/api/generate', 
        json={
            "model": "llama3.2",
            "prompt": prompt,
            "stream": False
        }
    )
    return response.json()['response']

result = query_ollama("What is machine learning?")
print(result)
</code></pre>
<h3 id="via-llamacpp-efficient-c-implementation"><a class="header" href="#via-llamacpp-efficient-c-implementation">Via llama.cpp (Efficient C++ Implementation)</a></h3>
<pre><code class="language-bash"># Clone and build
git clone https://github.com/ggerganov/llama.cpp
cd llama.cpp
make

# Download model (GGUF format)
# From Hugging Face or converted locally

# Run inference
./main -m models/llama-3.2-1B-Instruct-Q4_K_M.gguf -p "Hello, how are you?"
</code></pre>
<p>Python bindings:</p>
<pre><code class="language-bash">pip install llama-cpp-python
</code></pre>
<pre><code class="language-python">from llama_cpp import Llama

llm = Llama(
    model_path="models/llama-3.2-3B-Instruct-Q4_K_M.gguf",
    n_ctx=2048,
    n_gpu_layers=35  # Adjust for GPU
)

output = llm(
    "Explain quantum computing",
    max_tokens=256,
    temperature=0.7,
    top_p=0.95,
)

print(output['choices'][0]['text'])
</code></pre>
<h3 id="via-vllm-production-inference"><a class="header" href="#via-vllm-production-inference">Via vLLM (Production Inference)</a></h3>
<pre><code class="language-bash">pip install vllm
</code></pre>
<pre><code class="language-python">from vllm import LLM, SamplingParams

# Load model
llm = LLM(
    model="meta-llama/Llama-3.2-3B-Instruct",
    tensor_parallel_size=1
)

# Sampling parameters
sampling_params = SamplingParams(
    temperature=0.7,
    top_p=0.95,
    max_tokens=256
)

# Generate
prompts = ["What is AI?", "Explain Python"]
outputs = llm.generate(prompts, sampling_params)

for output in outputs:
    print(output.outputs[0].text)
</code></pre>
<h2 id="basic-usage-1"><a class="header" href="#basic-usage-1">Basic Usage</a></h2>
<h3 id="simple-text-generation"><a class="header" href="#simple-text-generation">Simple Text Generation</a></h3>
<pre><code class="language-python">from transformers import AutoTokenizer, AutoModelForCausalLM
import torch

# Load model
model_name = "meta-llama/Llama-3.2-3B-Instruct"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(
    model_name,
    torch_dtype=torch.float16,
    device_map="auto"
)

# Generate
prompt = "Write a Python function to calculate factorial:"
inputs = tokenizer(prompt, return_tensors="pt").to(model.device)

outputs = model.generate(
    **inputs,
    max_new_tokens=256,
    temperature=0.7,
    top_p=0.9,
    do_sample=True
)

result = tokenizer.decode(outputs[0], skip_special_tokens=True)
print(result)
</code></pre>
<h3 id="chat-format"><a class="header" href="#chat-format">Chat Format</a></h3>
<pre><code class="language-python"># Proper chat formatting
messages = [
    {"role": "system", "content": "You are a helpful AI assistant."},
    {"role": "user", "content": "What is the capital of France?"},
]

# Apply chat template
input_ids = tokenizer.apply_chat_template(
    messages,
    add_generation_prompt=True,
    return_tensors="pt"
).to(model.device)

# Generate
outputs = model.generate(
    input_ids,
    max_new_tokens=256,
    temperature=0.7,
    top_p=0.9,
    do_sample=True,
    pad_token_id=tokenizer.eos_token_id
)

response = tokenizer.decode(outputs[0][input_ids.shape[-1]:], skip_special_tokens=True)
print(response)
</code></pre>
<h3 id="multi-turn-conversation"><a class="header" href="#multi-turn-conversation">Multi-turn Conversation</a></h3>
<pre><code class="language-python">conversation = [
    {"role": "system", "content": "You are a helpful assistant."}
]

def chat(user_message):
    # Add user message
    conversation.append({"role": "user", "content": user_message})
    
    # Generate response
    input_ids = tokenizer.apply_chat_template(
        conversation,
        add_generation_prompt=True,
        return_tensors="pt"
    ).to(model.device)
    
    outputs = model.generate(
        input_ids,
        max_new_tokens=256,
        temperature=0.7,
        pad_token_id=tokenizer.eos_token_id
    )
    
    response = tokenizer.decode(
        outputs[0][input_ids.shape[-1]:],
        skip_special_tokens=True
    )
    
    # Add assistant response
    conversation.append({"role": "assistant", "content": response})
    
    return response

# Use
print(chat("What is Python?"))
print(chat("How do I install it?"))
print(chat("Give me a simple example."))
</code></pre>
<h3 id="streaming-generation"><a class="header" href="#streaming-generation">Streaming Generation</a></h3>
<pre><code class="language-python">from transformers import TextIteratorStreamer
from threading import Thread

streamer = TextIteratorStreamer(tokenizer, skip_special_tokens=True)

# Prepare input
messages = [{"role": "user", "content": "Write a short story about AI"}]
input_ids = tokenizer.apply_chat_template(messages, return_tensors="pt").to(model.device)

# Generate in thread
generation_kwargs = {
    "input_ids": input_ids,
    "max_new_tokens": 512,
    "temperature": 0.8,
    "streamer": streamer
}

thread = Thread(target=model.generate, kwargs=generation_kwargs)
thread.start()

# Stream output
for text in streamer:
    print(text, end="", flush=True)

thread.join()
</code></pre>
<h2 id="fine-tuning"><a class="header" href="#fine-tuning">Fine-tuning</a></h2>
<h3 id="qlora-fine-tuning-most-popular"><a class="header" href="#qlora-fine-tuning-most-popular">QLoRA Fine-tuning (Most Popular)</a></h3>
<p>Efficient fine-tuning with quantization:</p>
<pre><code class="language-bash">pip install transformers peft accelerate bitsandbytes datasets
</code></pre>
<pre><code class="language-python">from transformers import (
    AutoTokenizer,
    AutoModelForCausalLM,
    TrainingArguments,
    Trainer,
    BitsAndBytesConfig
)
from peft import LoraConfig, get_peft_model, prepare_model_for_kbit_training
from datasets import load_dataset
import torch

# Load model with quantization
model_name = "meta-llama/Llama-3.2-3B-Instruct"

bnb_config = BitsAndBytesConfig(
    load_in_4bit=True,
    bnb_4bit_quant_type="nf4",
    bnb_4bit_compute_dtype=torch.bfloat16,
    bnb_4bit_use_double_quant=True
)

model = AutoModelForCausalLM.from_pretrained(
    model_name,
    quantization_config=bnb_config,
    device_map="auto"
)

tokenizer = AutoTokenizer.from_pretrained(model_name)
tokenizer.pad_token = tokenizer.eos_token

# Prepare model
model = prepare_model_for_kbit_training(model)

# LoRA configuration
lora_config = LoraConfig(
    r=16,  # Rank
    lora_alpha=32,  # Scaling factor
    target_modules=["q_proj", "k_proj", "v_proj", "o_proj"],
    lora_dropout=0.05,
    bias="none",
    task_type="CAUSAL_LM"
)

model = get_peft_model(model, lora_config)
model.print_trainable_parameters()
# Output: trainable params: ~16M / total: 3B (~0.5%)

# Prepare dataset
dataset = load_dataset("your-dataset")

def format_instruction(example):
    text = f"### Instruction:\n{example['instruction']}\n\n### Response:\n{example['response']}"
    return {"text": text}

dataset = dataset.map(format_instruction)

# Tokenize
def tokenize(examples):
    return tokenizer(
        examples["text"],
        truncation=True,
        max_length=512,
        padding="max_length"
    )

tokenized_dataset = dataset.map(tokenize, batched=True)

# Training arguments
training_args = TrainingArguments(
    output_dir="./llama-finetuned",
    num_train_epochs=3,
    per_device_train_batch_size=4,
    gradient_accumulation_steps=4,
    learning_rate=2e-4,
    fp16=True,
    logging_steps=10,
    save_strategy="epoch",
    optim="paged_adamw_8bit"
)

# Train
trainer = Trainer(
    model=model,
    args=training_args,
    train_dataset=tokenized_dataset["train"],
    data_collator=lambda data: {
        'input_ids': torch.stack([f['input_ids'] for f in data]),
        'attention_mask': torch.stack([f['attention_mask'] for f in data]),
        'labels': torch.stack([f['input_ids'] for f in data])
    }
)

trainer.train()

# Save
model.save_pretrained("./llama-lora")
tokenizer.save_pretrained("./llama-lora")
</code></pre>
<h3 id="using-fine-tuned-model"><a class="header" href="#using-fine-tuned-model">Using Fine-tuned Model</a></h3>
<pre><code class="language-python">from peft import PeftModel

# Load base model
base_model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-3.2-3B-Instruct",
    torch_dtype=torch.float16,
    device_map="auto"
)

# Load LoRA
model = PeftModel.from_pretrained(base_model, "./llama-lora")

# Generate
tokenizer = AutoTokenizer.from_pretrained("./llama-lora")
inputs = tokenizer("Your prompt here", return_tensors="pt").to(model.device)
outputs = model.generate(**inputs, max_new_tokens=256)
print(tokenizer.decode(outputs[0], skip_special_tokens=True))
</code></pre>
<h3 id="full-fine-tuning-requires-more-resources"><a class="header" href="#full-fine-tuning-requires-more-resources">Full Fine-tuning (Requires More Resources)</a></h3>
<pre><code class="language-python">from transformers import Trainer, TrainingArguments

# Load model normally (no quantization)
model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-3.2-3B-Instruct",
    torch_dtype=torch.bfloat16,
    device_map="auto"
)

# Training arguments
training_args = TrainingArguments(
    output_dir="./llama-fullft",
    num_train_epochs=3,
    per_device_train_batch_size=2,
    gradient_accumulation_steps=8,
    learning_rate=1e-5,
    bf16=True,
    logging_steps=10,
    save_strategy="epoch",
    deepspeed="ds_config.json"  # For multi-GPU
)

# Train
trainer = Trainer(
    model=model,
    args=training_args,
    train_dataset=tokenized_dataset["train"]
)

trainer.train()
</code></pre>
<h3 id="using-axolotl-simplified-training"><a class="header" href="#using-axolotl-simplified-training">Using Axolotl (Simplified Training)</a></h3>
<pre><code class="language-bash"># Install
git clone https://github.com/OpenAccess-AI-Collective/axolotl
cd axolotl
pip install -e .
</code></pre>
<p>Create config <code>llama_qlora.yml</code>:</p>
<pre><code class="language-yaml">base_model: meta-llama/Llama-3.2-3B-Instruct
model_type: LlamaForCausalLM

load_in_4bit: true
adapter: qlora
lora_r: 16
lora_alpha: 32
lora_dropout: 0.05
lora_target_modules:
  - q_proj
  - k_proj
  - v_proj
  - o_proj

datasets:
  - path: your-dataset
    type: alpaca

num_epochs: 3
micro_batch_size: 4
gradient_accumulation_steps: 4
learning_rate: 0.0002

output_dir: ./llama-qlora-out
</code></pre>
<p>Train:</p>
<pre><code class="language-bash">accelerate launch -m axolotl.cli.train llama_qlora.yml
</code></pre>
<h2 id="quantization"><a class="header" href="#quantization">Quantization</a></h2>
<h3 id="bitsandbytes-quantization"><a class="header" href="#bitsandbytes-quantization">BitsAndBytes Quantization</a></h3>
<pre><code class="language-python">from transformers import BitsAndBytesConfig

# 8-bit
bnb_config_8bit = BitsAndBytesConfig(
    load_in_8bit=True,
    llm_int8_threshold=6.0
)

# 4-bit (QLoRA)
bnb_config_4bit = BitsAndBytesConfig(
    load_in_4bit=True,
    bnb_4bit_quant_type="nf4",  # or "fp4"
    bnb_4bit_compute_dtype=torch.bfloat16,
    bnb_4bit_use_double_quant=True
)

model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-3.2-3B-Instruct",
    quantization_config=bnb_config_4bit,
    device_map="auto"
)
</code></pre>
<h3 id="gguf-quantization-llamacpp"><a class="header" href="#gguf-quantization-llamacpp">GGUF Quantization (llama.cpp)</a></h3>
<pre><code class="language-bash"># Convert to GGUF
python convert_hf_to_gguf.py \
    --model-dir models/Llama-3.2-3B-Instruct \
    --outfile llama-3.2-3b-instruct.gguf

# Quantize
./quantize \
    llama-3.2-3b-instruct.gguf \
    llama-3.2-3b-instruct-Q4_K_M.gguf \
    Q4_K_M
</code></pre>
<p>Quantization formats:</p>
<ul>
<li><code>Q4_0</code>: 4-bit, fastest, lowest quality</li>
<li><code>Q4_K_M</code>: 4-bit, good quality (recommended)</li>
<li><code>Q5_K_M</code>: 5-bit, better quality</li>
<li><code>Q8_0</code>: 8-bit, high quality</li>
</ul>
<h3 id="gptq-quantization"><a class="header" href="#gptq-quantization">GPTQ Quantization</a></h3>
<pre><code class="language-bash">pip install auto-gptq
</code></pre>
<pre><code class="language-python">from auto_gptq import AutoGPTQForCausalLM, BaseQuantizeConfig

# Quantize
quantize_config = BaseQuantizeConfig(
    bits=4,
    group_size=128,
    desc_act=False
)

model = AutoGPTQForCausalLM.from_pretrained(
    "meta-llama/Llama-3.2-3B-Instruct",
    quantize_config=quantize_config
)

# Save
model.save_quantized("llama-3.2-3b-gptq")

# Load
model = AutoGPTQForCausalLM.from_quantized(
    "llama-3.2-3b-gptq",
    device_map="auto"
)
</code></pre>
<h3 id="awq-quantization"><a class="header" href="#awq-quantization">AWQ Quantization</a></h3>
<pre><code class="language-bash">pip install autoawq
</code></pre>
<pre><code class="language-python">from awq import AutoAWQForCausalLM

# Quantize
model = AutoAWQForCausalLM.from_pretrained("meta-llama/Llama-3.2-3B-Instruct")
model.quantize(tokenizer, quant_config={"zero_point": True, "q_group_size": 128})
model.save_quantized("llama-3.2-3b-awq")

# Load
model = AutoAWQForCausalLM.from_quantized("llama-3.2-3b-awq")
</code></pre>
<h2 id="inference-optimization"><a class="header" href="#inference-optimization">Inference Optimization</a></h2>
<h3 id="flash-attention-2"><a class="header" href="#flash-attention-2">Flash Attention 2</a></h3>
<pre><code class="language-bash">pip install flash-attn --no-build-isolation
</code></pre>
<pre><code class="language-python">model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-3.2-3B-Instruct",
    torch_dtype=torch.float16,
    attn_implementation="flash_attention_2",
    device_map="auto"
)
</code></pre>
<h3 id="batch-inference-1"><a class="header" href="#batch-inference-1">Batch Inference</a></h3>
<pre><code class="language-python"># Process multiple prompts efficiently
prompts = [
    "What is Python?",
    "Explain machine learning",
    "How do computers work?"
]

# Tokenize with padding
inputs = tokenizer(
    prompts,
    return_tensors="pt",
    padding=True,
    truncation=True,
    max_length=512
).to(model.device)

# Generate
outputs = model.generate(
    **inputs,
    max_new_tokens=256,
    temperature=0.7,
    do_sample=True,
    pad_token_id=tokenizer.pad_token_id
)

# Decode
results = tokenizer.batch_decode(outputs, skip_special_tokens=True)
for prompt, result in zip(prompts, results):
    print(f"Q: {prompt}\nA: {result}\n")
</code></pre>
<h3 id="kv-cache-optimization"><a class="header" href="#kv-cache-optimization">KV Cache Optimization</a></h3>
<pre><code class="language-python"># Enable static KV cache for faster inference
model.generation_config.cache_implementation = "static"
model.generation_config.max_length = 512

# Or use with generate
outputs = model.generate(
    input_ids,
    max_new_tokens=256,
    use_cache=True,
    cache_implementation="static"
)
</code></pre>
<h3 id="tensorrt-llm"><a class="header" href="#tensorrt-llm">TensorRT-LLM</a></h3>
<pre><code class="language-bash"># Build TensorRT engine
git clone https://github.com/NVIDIA/TensorRT-LLM.git
cd TensorRT-LLM

# Convert and build
python examples/llama/convert_checkpoint.py \
    --model_dir models/Llama-3.2-3B-Instruct \
    --output_dir ./trt_ckpt \
    --dtype float16

trtllm-build \
    --checkpoint_dir ./trt_ckpt \
    --output_dir ./trt_engine \
    --gemm_plugin float16
</code></pre>
<h2 id="deployment"><a class="header" href="#deployment">Deployment</a></h2>
<h3 id="fastapi-server"><a class="header" href="#fastapi-server">FastAPI Server</a></h3>
<pre><code class="language-python">from fastapi import FastAPI
from pydantic import BaseModel
from transformers import AutoTokenizer, AutoModelForCausalLM
import torch

app = FastAPI()

# Load model once at startup
model_name = "meta-llama/Llama-3.2-3B-Instruct"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModelForCausalLM.from_pretrained(
    model_name,
    torch_dtype=torch.float16,
    device_map="auto"
)

class GenerateRequest(BaseModel):
    prompt: str
    max_tokens: int = 256
    temperature: float = 0.7

@app.post("/generate")
async def generate(request: GenerateRequest):
    inputs = tokenizer(request.prompt, return_tensors="pt").to(model.device)
    
    outputs = model.generate(
        **inputs,
        max_new_tokens=request.max_tokens,
        temperature=request.temperature,
        do_sample=True
    )
    
    result = tokenizer.decode(outputs[0], skip_special_tokens=True)
    return {"response": result}

# Run: uvicorn server:app --host 0.0.0.0 --port 8000
</code></pre>
<h3 id="vllm-server"><a class="header" href="#vllm-server">vLLM Server</a></h3>
<pre><code class="language-bash"># Start server
vllm serve meta-llama/Llama-3.2-3B-Instruct \
    --host 0.0.0.0 \
    --port 8000 \
    --tensor-parallel-size 1

# Client
curl http://localhost:8000/v1/completions \
    -H "Content-Type: application/json" \
    -d '{
        "model": "meta-llama/Llama-3.2-3B-Instruct",
        "prompt": "What is AI?",
        "max_tokens": 256
    }'
</code></pre>
<p>Python client:</p>
<pre><code class="language-python">from openai import OpenAI

client = OpenAI(
    base_url="http://localhost:8000/v1",
    api_key="dummy"
)

response = client.completions.create(
    model="meta-llama/Llama-3.2-3B-Instruct",
    prompt="Explain quantum computing",
    max_tokens=256
)

print(response.choices[0].text)
</code></pre>
<h3 id="text-generation-inference-tgi"><a class="header" href="#text-generation-inference-tgi">Text Generation Inference (TGI)</a></h3>
<pre><code class="language-bash"># Docker
docker run --gpus all --shm-size 1g -p 8080:80 \
    -v $PWD/data:/data \
    ghcr.io/huggingface/text-generation-inference:latest \
    --model-id meta-llama/Llama-3.2-3B-Instruct

# Client
curl http://localhost:8080/generate \
    -X POST \
    -d '{"inputs":"What is Python?","parameters":{"max_new_tokens":256}}' \
    -H 'Content-Type: application/json'
</code></pre>
<h3 id="langchain-integration"><a class="header" href="#langchain-integration">LangChain Integration</a></h3>
<pre><code class="language-bash">pip install langchain langchain-community
</code></pre>
<pre><code class="language-python">from langchain_community.llms import HuggingFacePipeline
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate
from transformers import AutoTokenizer, AutoModelForCausalLM, pipeline

# Load model
model = AutoModelForCausalLM.from_pretrained(
    "meta-llama/Llama-3.2-3B-Instruct",
    torch_dtype=torch.float16,
    device_map="auto"
)
tokenizer = AutoTokenizer.from_pretrained("meta-llama/Llama-3.2-3B-Instruct")

# Create pipeline
pipe = pipeline(
    "text-generation",
    model=model,
    tokenizer=tokenizer,
    max_new_tokens=256,
    temperature=0.7
)

# LangChain LLM
llm = HuggingFacePipeline(pipeline=pipe)

# Create chain
template = "Question: {question}\n\nAnswer:"
prompt = PromptTemplate(template=template, input_variables=["question"])
chain = LLMChain(llm=llm, prompt=prompt)

# Use
result = chain.run("What is machine learning?")
print(result)
</code></pre>
<h2 id="advanced-techniques-2"><a class="header" href="#advanced-techniques-2">Advanced Techniques</a></h2>
<h3 id="retrieval-augmented-generation-rag"><a class="header" href="#retrieval-augmented-generation-rag">Retrieval-Augmented Generation (RAG)</a></h3>
<pre><code class="language-bash">pip install langchain chromadb sentence-transformers
</code></pre>
<pre><code class="language-python">from langchain.embeddings import HuggingFaceEmbeddings
from langchain.vectorstores import Chroma
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.chains import RetrievalQA
from langchain_community.llms import HuggingFacePipeline

# Load documents
documents = ["Your document text here..."]

# Split text
text_splitter = RecursiveCharacterTextSplitter(chunk_size=500, chunk_overlap=50)
texts = text_splitter.create_documents(documents)

# Create embeddings
embeddings = HuggingFaceEmbeddings(model_name="sentence-transformers/all-MiniLM-L6-v2")

# Create vector store
vectorstore = Chroma.from_documents(texts, embeddings)

# Create QA chain
qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    chain_type="stuff",
    retriever=vectorstore.as_retriever()
)

# Query
query = "What does the document say about AI?"
result = qa_chain.run(query)
print(result)
</code></pre>
<h3 id="function-calling"><a class="header" href="#function-calling">Function Calling</a></h3>
<pre><code class="language-python">import json

def get_current_weather(location: str, unit: str = "celsius"):
    """Get current weather for a location"""
    # Simulated function
    return {"location": location, "temperature": 22, "unit": unit}

# Define tools
tools = [
    {
        "name": "get_current_weather",
        "description": "Get the current weather in a given location",
        "parameters": {
            "type": "object",
            "properties": {
                "location": {"type": "string", "description": "City name"},
                "unit": {"type": "string", "enum": ["celsius", "fahrenheit"]}
            },
            "required": ["location"]
        }
    }
]

# System prompt
system_prompt = f"""You are a helpful assistant with access to tools.
Available tools: {json.dumps(tools, indent=2)}

When you need to use a tool, output JSON: {{"tool": "tool_name", "parameters": {{...}}}}
"""

messages = [
    {"role": "system", "content": system_prompt},
    {"role": "user", "content": "What's the weather in Paris?"}
]

# Generate
input_ids = tokenizer.apply_chat_template(messages, return_tensors="pt").to(model.device)
outputs = model.generate(input_ids, max_new_tokens=256)
response = tokenizer.decode(outputs[0][input_ids.shape[-1]:], skip_special_tokens=True)

# Parse and execute tool call
if "tool" in response:
    tool_call = json.loads(response)
    if tool_call["tool"] == "get_current_weather":
        result = get_current_weather(**tool_call["parameters"])
        print(f"Weather: {result}")
</code></pre>
<h3 id="constrained-generation"><a class="header" href="#constrained-generation">Constrained Generation</a></h3>
<pre><code class="language-bash">pip install outlines
</code></pre>
<pre><code class="language-python">import outlines

# Load model
model = outlines.models.transformers("meta-llama/Llama-3.2-1B-Instruct")

# JSON schema constraint
schema = """{
    "type": "object",
    "properties": {
        "name": {"type": "string"},
        "age": {"type": "integer"},
        "skills": {"type": "array", "items": {"type": "string"}}
    }
}"""

generator = outlines.generate.json(model, schema)
result = generator("Generate a person profile:")
print(result)

# Regex constraint
phone_pattern = r"\d{3}-\d{3}-\d{4}"
generator = outlines.generate.regex(model, phone_pattern)
phone = generator("Generate a US phone number:")
print(phone)
</code></pre>
<h2 id="best-practices-22"><a class="header" href="#best-practices-22">Best Practices</a></h2>
<h3 id="1-model-selection"><a class="header" href="#1-model-selection">1. Model Selection</a></h3>
<pre><code class="language-python"># Choose based on requirements
model_selection = {
    "mobile/edge": "meta-llama/Llama-3.2-1B-Instruct",
    "desktop/low_vram": "meta-llama/Llama-3.2-3B-Instruct",
    "standard": "meta-llama/Llama-3.1-8B-Instruct",
    "high_quality": "meta-llama/Llama-3.1-70B-Instruct",
    "vision": "meta-llama/Llama-3.2-11B-Vision-Instruct"
}
</code></pre>
<h3 id="2-prompt-templates"><a class="header" href="#2-prompt-templates">2. Prompt Templates</a></h3>
<pre><code class="language-python"># Use consistent templates
SYSTEM_PROMPT = "You are a helpful, respectful and honest assistant."

def format_chat(user_message, system=SYSTEM_PROMPT):
    return [
        {"role": "system", "content": system},
        {"role": "user", "content": user_message}
    ]
</code></pre>
<h3 id="3-memory-management"><a class="header" href="#3-memory-management">3. Memory Management</a></h3>
<pre><code class="language-python">import torch
import gc

def clear_memory():
    gc.collect()
    torch.cuda.empty_cache()

# After large operations
outputs = model.generate(...)
result = tokenizer.decode(outputs[0])
del outputs
clear_memory()
</code></pre>
<h3 id="4-error-handling"><a class="header" href="#4-error-handling">4. Error Handling</a></h3>
<pre><code class="language-python">def safe_generate(prompt, max_retries=3):
    for attempt in range(max_retries):
        try:
            inputs = tokenizer(prompt, return_tensors="pt").to(model.device)
            outputs = model.generate(**inputs, max_new_tokens=256)
            return tokenizer.decode(outputs[0], skip_special_tokens=True)
        except RuntimeError as e:
            if "out of memory" in str(e) and attempt &lt; max_retries - 1:
                torch.cuda.empty_cache()
                continue
            raise
</code></pre>
<h2 id="resources-17"><a class="header" href="#resources-17">Resources</a></h2>
<h3 id="official"><a class="header" href="#official">Official</a></h3>
<ul>
<li><a href="https://llama.meta.com/">Meta Llama</a></li>
<li><a href="https://huggingface.co/meta-llama">Hugging Face Models</a></li>
<li><a href="https://github.com/facebookresearch/llama-recipes">Llama Recipes</a></li>
</ul>
<h3 id="tools-2"><a class="header" href="#tools-2">Tools</a></h3>
<ul>
<li><a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a></li>
<li><a href="https://ollama.com/">Ollama</a></li>
<li><a href="https://github.com/vllm-project/vllm">vLLM</a></li>
<li><a href="https://github.com/huggingface/text-generation-inference">Text Generation Inference</a></li>
</ul>
<h3 id="fine-tuning-1"><a class="header" href="#fine-tuning-1">Fine-tuning</a></h3>
<ul>
<li><a href="https://github.com/OpenAccess-AI-Collective/axolotl">Axolotl</a></li>
<li><a href="https://github.com/hiyouga/LLaMA-Factory">LLaMA-Factory</a></li>
<li><a href="https://github.com/huggingface/peft">PEFT</a></li>
</ul>
<h3 id="community-1"><a class="header" href="#community-1">Community</a></h3>
<ul>
<li>r/LocalLLaMA</li>
<li>Hugging Face Forums</li>
<li>Discord communities</li>
</ul>
<h2 id="conclusion-13"><a class="header" href="#conclusion-13">Conclusion</a></h2>
<p>Llama models provide a powerful, open-source foundation for AI applications. Whether you're running a 1B model on a mobile device or deploying a 70B model in production, the ecosystem offers tools and techniques for every use case.</p>
<p>Key takeaways:</p>
<ul>
<li><strong>Start small</strong>: Test with 1B/3B models first</li>
<li><strong>Quantize</strong>: Use 4-bit for efficient inference</li>
<li><strong>Fine-tune</strong>: QLoRA for custom domains</li>
<li><strong>Optimize</strong>: vLLM/TGI for production</li>
<li><strong>Monitor</strong>: Watch memory and performance</li>
</ul>
<p>The open-source nature and active community make Llama models an excellent choice for both research and production applications.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stable-diffusion-1"><a class="header" href="#stable-diffusion-1">Stable Diffusion</a></h1>
<p>Complete guide to Stable Diffusion for image generation, from setup to advanced techniques.</p>
<h2 id="table-of-contents-19"><a class="header" href="#table-of-contents-19">Table of Contents</a></h2>
<ul>
<li><a href="ai/stable_diffusion.html#introduction">Introduction</a></li>
<li><a href="ai/stable_diffusion.html#installation--setup">Installation &amp; Setup</a></li>
<li><a href="ai/stable_diffusion.html#model-versions">Model Versions</a></li>
<li><a href="ai/stable_diffusion.html#prompt-engineering">Prompt Engineering</a></li>
<li><a href="ai/stable_diffusion.html#parameters">Parameters</a></li>
<li><a href="ai/stable_diffusion.html#advanced-techniques">Advanced Techniques</a></li>
<li><a href="ai/stable_diffusion.html#extensions--tools">Extensions &amp; Tools</a></li>
<li><a href="ai/stable_diffusion.html#optimization">Optimization</a></li>
<li><a href="ai/stable_diffusion.html#common-issues">Common Issues</a></li>
</ul>
<h2 id="introduction-6"><a class="header" href="#introduction-6">Introduction</a></h2>
<p>Stable Diffusion is an open-source text-to-image diffusion model capable of generating high-quality images from text descriptions. Unlike proprietary alternatives, it can run locally on consumer hardware.</p>
<h3 id="key-features-2"><a class="header" href="#key-features-2">Key Features</a></h3>
<ul>
<li><strong>Open Source</strong>: Free to use and modify</li>
<li><strong>Local Execution</strong>: Run on your own hardware</li>
<li><strong>Extensible</strong>: ControlNet, LoRA, extensions</li>
<li><strong>Fast</strong>: Optimized inference with various schedulers</li>
<li><strong>Flexible</strong>: Text-to-image, image-to-image, inpainting</li>
</ul>
<h2 id="installation--setup-1"><a class="header" href="#installation--setup-1">Installation &amp; Setup</a></h2>
<h3 id="option-1-automatic1111-webui-most-popular"><a class="header" href="#option-1-automatic1111-webui-most-popular">Option 1: AUTOMATIC1111 WebUI (Most Popular)</a></h3>
<pre><code class="language-bash"># Clone repository
git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git
cd stable-diffusion-webui

# Install (Linux/Mac)
./webui.sh

# Install (Windows)
# Double-click webui-user.bat

# With custom arguments
# Edit webui-user.sh or webui-user.bat:
export COMMANDLINE_ARGS="--xformers --medvram --api"
</code></pre>
<p><strong>System Requirements:</strong></p>
<ul>
<li>GPU: NVIDIA (8GB+ VRAM recommended)</li>
<li>RAM: 16GB+ system RAM</li>
<li>Storage: 10GB+ for models</li>
</ul>
<h3 id="option-2-comfyui-node-based"><a class="header" href="#option-2-comfyui-node-based">Option 2: ComfyUI (Node-Based)</a></h3>
<pre><code class="language-bash"># Clone repository
git clone https://github.com/comfyanonymous/ComfyUI.git
cd ComfyUI

# Install dependencies
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
pip install -r requirements.txt

# Run
python main.py

# With arguments
python main.py --listen --port 8188
</code></pre>
<h3 id="option-3-python-library-diffusers"><a class="header" href="#option-3-python-library-diffusers">Option 3: Python Library (Diffusers)</a></h3>
<pre><code class="language-bash">pip install diffusers transformers accelerate torch torchvision
</code></pre>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline
import torch

# Load model
model_id = "stabilityai/stable-diffusion-2-1"
pipe = StableDiffusionPipeline.from_pretrained(
    model_id,
    torch_dtype=torch.float16
)
pipe = pipe.to("cuda")

# Enable optimizations
pipe.enable_attention_slicing()
pipe.enable_vae_slicing()

# Generate
prompt = "a beautiful landscape"
image = pipe(prompt).images[0]
image.save("output.png")
</code></pre>
<h3 id="option-4-invoke-ai"><a class="header" href="#option-4-invoke-ai">Option 4: Invoke AI</a></h3>
<pre><code class="language-bash">pip install invokeai
invokeai-configure
invokeai --web
</code></pre>
<h2 id="model-versions-1"><a class="header" href="#model-versions-1">Model Versions</a></h2>
<h3 id="stable-diffusion-1x"><a class="header" href="#stable-diffusion-1x">Stable Diffusion 1.x</a></h3>
<p><strong>SD 1.4</strong></p>
<pre><code class="language-bash"># Download location
models/Stable-diffusion/sd-v1-4.ckpt
</code></pre>
<ul>
<li>Resolution: 512x512</li>
<li>Training: LAION-2B subset</li>
<li>Good for: General use</li>
</ul>
<p><strong>SD 1.5</strong></p>
<pre><code class="language-bash"># Most popular 1.x version
wget https://huggingface.co/runwayml/stable-diffusion-v1-5
</code></pre>
<ul>
<li>Improved over 1.4</li>
<li>Massive ecosystem of fine-tunes</li>
<li>Best model support</li>
</ul>
<h3 id="stable-diffusion-2x"><a class="header" href="#stable-diffusion-2x">Stable Diffusion 2.x</a></h3>
<p><strong>SD 2.0</strong></p>
<ul>
<li>Resolution: 768x768</li>
<li>New text encoder (OpenCLIP)</li>
<li>Better quality but different style</li>
</ul>
<p><strong>SD 2.1</strong></p>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline

pipe = StableDiffusionPipeline.from_pretrained(
    "stabilityai/stable-diffusion-2-1",
    torch_dtype=torch.float16
)
</code></pre>
<ul>
<li>Improvements over 2.0</li>
<li>Recommended 2.x version</li>
</ul>
<h3 id="stable-diffusion-xl-sdxl"><a class="header" href="#stable-diffusion-xl-sdxl">Stable Diffusion XL (SDXL)</a></h3>
<pre><code class="language-python">from diffusers import StableDiffusionXLPipeline

# Base model
base = StableDiffusionXLPipeline.from_pretrained(
    "stabilityai/stable-diffusion-xl-base-1.0",
    torch_dtype=torch.float16,
    variant="fp16"
)
base.to("cuda")

# Refiner (optional, improves quality)
refiner = StableDiffusionXLImg2ImgPipeline.from_pretrained(
    "stabilityai/stable-diffusion-xl-refiner-1.0",
    torch_dtype=torch.float16,
    variant="fp16"
)
refiner.to("cuda")

# Generate
image = base(prompt="a futuristic city").images[0]
image = refiner(prompt="a futuristic city", image=image).images[0]
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>Resolution: 1024x1024</li>
<li>Higher quality</li>
<li>Better text rendering</li>
<li>Dual text encoders</li>
<li>Requires more VRAM (8GB+)</li>
</ul>
<h3 id="stable-diffusion-3"><a class="header" href="#stable-diffusion-3">Stable Diffusion 3</a></h3>
<p>Latest version with improved architecture:</p>
<ul>
<li>Multimodal diffusion transformer</li>
<li>Better prompt understanding</li>
<li>Improved composition</li>
</ul>
<h2 id="prompt-engineering-1"><a class="header" href="#prompt-engineering-1">Prompt Engineering</a></h2>
<h3 id="basic-structure"><a class="header" href="#basic-structure">Basic Structure</a></h3>
<pre><code>[Subject] [Action/Scene] [Environment] [Lighting] [Style] [Quality]
</code></pre>
<h3 id="effective-prompts"><a class="header" href="#effective-prompts">Effective Prompts</a></h3>
<pre><code>Basic:
"a cat"

Better:
"a fluffy orange cat sitting on a windowsill"

Best:
"a fluffy orange tabby cat sitting on a wooden windowsill, looking outside at falling snow, soft natural lighting, cozy atmosphere, detailed fur texture, photorealistic, 4k, highly detailed"
</code></pre>
<h3 id="prompt-components"><a class="header" href="#prompt-components">Prompt Components</a></h3>
<h4 id="1-subject"><a class="header" href="#1-subject">1. Subject</a></h4>
<pre><code>"portrait of a young woman"
"a medieval castle"
"a steampunk airship"
"cyberpunk street scene"
</code></pre>
<h4 id="2-actionpose"><a class="header" href="#2-actionpose">2. Action/Pose</a></h4>
<pre><code>"running through a field"
"sitting in contemplation"
"dancing under moonlight"
"reading a book by firelight"
</code></pre>
<h4 id="3-environment"><a class="header" href="#3-environment">3. Environment</a></h4>
<pre><code>"in a mystical forest"
"on a alien planet"
"in a Victorian library"
"at a bustling marketplace"
</code></pre>
<h4 id="4-lighting"><a class="header" href="#4-lighting">4. Lighting</a></h4>
<pre><code>"golden hour lighting"
"dramatic rim lighting"
"soft diffused light"
"neon lights reflecting on wet streets"
"volumetric fog with god rays"
</code></pre>
<h4 id="5-style"><a class="header" href="#5-style">5. Style</a></h4>
<pre><code>"oil painting style"
"anime art style"
"photorealistic"
"watercolor painting"
"digital art, trending on artstation"
"in the style of Greg Rutkowski"
</code></pre>
<h4 id="6-quality-boosters"><a class="header" href="#6-quality-boosters">6. Quality Boosters</a></h4>
<pre><code>"highly detailed"
"8k resolution"
"masterpiece"
"professional photography"
"award-winning"
"intricate details"
"sharp focus"
</code></pre>
<h3 id="negative-prompts"><a class="header" href="#negative-prompts">Negative Prompts</a></h3>
<p>What to avoid in generation:</p>
<pre><code>Negative Prompt:
"ugly, blurry, low quality, distorted, deformed, bad anatomy, poorly drawn, low resolution, watermark, signature, text, cropped, worst quality, jpeg artifacts"
</code></pre>
<p><strong>Common Negative Terms:</strong></p>
<ul>
<li>Quality: <code>blurry, low quality, pixelated, grainy</code></li>
<li>Anatomy: <code>bad anatomy, extra limbs, malformed hands</code></li>
<li>Artifacts: <code>watermark, text, signature, logo</code></li>
<li>Style: <code>cartoon (for photorealistic), realistic (for artistic)</code></li>
</ul>
<h3 id="prompt-weighting"><a class="header" href="#prompt-weighting">Prompt Weighting</a></h3>
<p>Emphasize or de-emphasize parts:</p>
<pre><code># AUTOMATIC1111 syntax
(keyword)       # 1.1x weight
((keyword))     # 1.21x weight
(keyword:1.5)   # 1.5x weight
[keyword]       # 0.9x weight

Example:
"a (beautiful:1.3) landscape with (mountains:1.2) and [trees:0.8]"
</code></pre>
<h3 id="prompt-editing"><a class="header" href="#prompt-editing">Prompt Editing</a></h3>
<p>Change prompts during generation:</p>
<pre><code># AUTOMATIC1111 syntax
[keyword1:keyword2:step]

Example:
"a [dog:cat:0.5]"
# Generates dog for first 50% of steps, then cat

"photo of a woman [smiling:serious:10]"
# Smiling for first 10 steps, then serious
</code></pre>
<h3 id="artist-styles"><a class="header" href="#artist-styles">Artist Styles</a></h3>
<p>Reference famous artists:</p>
<pre><code>"in the style of Van Gogh"
"by Greg Rutkowski"
"by Alphonse Mucha"
"by Simon Stalenhag"
"by Artgerm"
"by Ilya Kuvshinov"
</code></pre>
<h2 id="parameters"><a class="header" href="#parameters">Parameters</a></h2>
<h3 id="core-parameters"><a class="header" href="#core-parameters">Core Parameters</a></h3>
<h4 id="steps-num_inference_steps"><a class="header" href="#steps-num_inference_steps">Steps (num_inference_steps)</a></h4>
<pre><code class="language-python"># Fewer steps = faster, less refined
image = pipe(prompt, num_inference_steps=20)

# More steps = slower, more refined
image = pipe(prompt, num_inference_steps=50)
</code></pre>
<p><strong>Recommendations:</strong></p>
<ul>
<li>Quick preview: 15-20 steps</li>
<li>Standard quality: 25-35 steps</li>
<li>High quality: 40-60 steps</li>
<li>Diminishing returns after 60</li>
</ul>
<h4 id="cfg-scale-guidance_scale"><a class="header" href="#cfg-scale-guidance_scale">CFG Scale (guidance_scale)</a></h4>
<p>How closely to follow the prompt:</p>
<pre><code class="language-python"># Low CFG = creative, less adherence
image = pipe(prompt, guidance_scale=3.5)

# Medium CFG = balanced
image = pipe(prompt, guidance_scale=7.5)

# High CFG = strict adherence, may oversaturate
image = pipe(prompt, guidance_scale=15)
</code></pre>
<p><strong>Recommendations:</strong></p>
<ul>
<li>Creative/artistic: 5-7</li>
<li>Balanced: 7-10</li>
<li>Strict/detailed: 10-15</li>
<li>Avoid: &gt;20 (over-saturated)</li>
</ul>
<h4 id="seed"><a class="header" href="#seed">Seed</a></h4>
<p>Reproducible results:</p>
<pre><code class="language-python"># Random seed
image = pipe(prompt)

# Fixed seed for reproducibility
generator = torch.Generator("cuda").manual_seed(42)
image = pipe(prompt, generator=generator)
</code></pre>
<h4 id="samplerscheduler"><a class="header" href="#samplerscheduler">Sampler/Scheduler</a></h4>
<p>Different algorithms for denoising:</p>
<pre><code class="language-python">from diffusers import (
    DPMSolverMultistepScheduler,
    EulerAncestralDiscreteScheduler,
    DDIMScheduler
)

# Fast and high quality (recommended)
pipe.scheduler = DPMSolverMultistepScheduler.from_config(
    pipe.scheduler.config
)

# More creative, varied
pipe.scheduler = EulerAncestralDiscreteScheduler.from_config(
    pipe.scheduler.config
)

# Stable, predictable
pipe.scheduler = DDIMScheduler.from_config(
    pipe.scheduler.config
)
</code></pre>
<p><strong>Popular Samplers:</strong></p>
<ul>
<li><strong>DPM++ 2M Karras</strong>: Fast, high quality (recommended)</li>
<li><strong>Euler a</strong>: Creative, varied results</li>
<li><strong>DDIM</strong>: Stable, reproducible</li>
<li><strong>UniPC</strong>: Very fast, good quality</li>
<li><strong>DPM++ SDE Karras</strong>: High quality, slower</li>
</ul>
<h4 id="resolution"><a class="header" href="#resolution">Resolution</a></h4>
<pre><code class="language-python"># SD 1.5 native: 512x512
image = pipe(prompt, width=512, height=512)

# SD 2.1 native: 768x768
image = pipe(prompt, width=768, height=768)

# SDXL native: 1024x1024
image = pipe(prompt, width=1024, height=1024)

# Portrait
image = pipe(prompt, width=512, height=768)

# Landscape
image = pipe(prompt, width=768, height=512)
</code></pre>
<p><strong>Tips:</strong></p>
<ul>
<li>Stick to multiples of 8 or 64</li>
<li>Native resolution gives best results</li>
<li>Higher resolution needs more VRAM</li>
<li>Use upscaling for ultra-high resolution</li>
</ul>
<h3 id="batch-settings"><a class="header" href="#batch-settings">Batch Settings</a></h3>
<pre><code class="language-python"># Generate multiple images
images = pipe(
    prompt,
    num_images_per_prompt=4,
    guidance_scale=7.5
).images

# Save all
for i, img in enumerate(images):
    img.save(f"output_{i}.png")
</code></pre>
<h2 id="advanced-techniques-3"><a class="header" href="#advanced-techniques-3">Advanced Techniques</a></h2>
<h3 id="image-to-image-1"><a class="header" href="#image-to-image-1">Image-to-Image</a></h3>
<p>Transform existing images:</p>
<pre><code class="language-python">from diffusers import StableDiffusionImg2ImgPipeline
from PIL import Image

pipe = StableDiffusionImg2ImgPipeline.from_pretrained(
    "stabilityai/stable-diffusion-2-1",
    torch_dtype=torch.float16
).to("cuda")

# Load image
init_image = Image.open("input.jpg").convert("RGB")
init_image = init_image.resize((768, 768))

# Transform
prompt = "a fantasy castle, magical, highly detailed"
images = pipe(
    prompt=prompt,
    image=init_image,
    strength=0.75,  # 0=no change, 1=complete regeneration
    guidance_scale=7.5,
    num_inference_steps=50
).images[0]

images.save("transformed.png")
</code></pre>
<p><strong>Strength Parameter:</strong></p>
<ul>
<li>0.1-0.3: Minor adjustments, preserve structure</li>
<li>0.4-0.6: Moderate changes, guided by original</li>
<li>0.7-0.9: Major changes, loose interpretation</li>
<li>1.0: Complete regeneration</li>
</ul>
<h3 id="inpainting-1"><a class="header" href="#inpainting-1">Inpainting</a></h3>
<p>Edit specific parts of images:</p>
<pre><code class="language-python">from diffusers import StableDiffusionInpaintPipeline

pipe = StableDiffusionInpaintPipeline.from_pretrained(
    "stabilityai/stable-diffusion-2-inpainting",
    torch_dtype=torch.float16
).to("cuda")

# Load image and mask
image = Image.open("photo.png")
mask = Image.open("mask.png")  # White = inpaint, Black = keep

prompt = "a red vintage car"
result = pipe(
    prompt=prompt,
    image=image,
    mask_image=mask,
    num_inference_steps=50,
    guidance_scale=7.5
).images[0]

result.save("inpainted.png")
</code></pre>
<h3 id="controlnet"><a class="header" href="#controlnet">ControlNet</a></h3>
<p>Precise control over generation:</p>
<pre><code class="language-python">from diffusers import StableDiffusionControlNetPipeline, ControlNetModel
from PIL import Image
import cv2
import numpy as np

# Load ControlNet model
controlnet = ControlNetModel.from_pretrained(
    "lllyasviel/sd-controlnet-canny",
    torch_dtype=torch.float16
)

pipe = StableDiffusionControlNetPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    controlnet=controlnet,
    torch_dtype=torch.float16
).to("cuda")

# Load image and create canny edge map
image = Image.open("input.jpg")
image = np.array(image)
canny_edges = cv2.Canny(image, 100, 200)
canny_edges = Image.fromarray(canny_edges)

# Generate with control
prompt = "a professional architectural photograph"
output = pipe(
    prompt=prompt,
    image=canny_edges,
    num_inference_steps=30
).images[0]
</code></pre>
<p><strong>ControlNet Models:</strong></p>
<ul>
<li><strong>Canny</strong>: Edge detection</li>
<li><strong>Depth</strong>: Depth map</li>
<li><strong>OpenPose</strong>: Human pose</li>
<li><strong>Scribble</strong>: Hand-drawn sketches</li>
<li><strong>Normal</strong>: Normal maps</li>
<li><strong>Segmentation</strong>: Semantic segmentation</li>
<li><strong>MLSD</strong>: Line detection (architecture)</li>
</ul>
<h3 id="lora-low-rank-adaptation-2"><a class="header" href="#lora-low-rank-adaptation-2">LoRA (Low-Rank Adaptation)</a></h3>
<p>Fine-tuned models with small file size:</p>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline

pipe = StableDiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    torch_dtype=torch.float16
).to("cuda")

# Load LoRA
pipe.load_lora_weights("path/to/lora.safetensors")

# Generate with LoRA style
prompt = "a portrait in the style of &lt;lora-trigger-word&gt;"
image = pipe(prompt).images[0]

# Unload LoRA
pipe.unload_lora_weights()
</code></pre>
<p><strong>Popular LoRA Types:</strong></p>
<ul>
<li>Character/celebrity faces</li>
<li>Art styles</li>
<li>Concepts</li>
<li>Objects/clothing</li>
</ul>
<h3 id="textual-inversion"><a class="header" href="#textual-inversion">Textual Inversion</a></h3>
<p>Custom concepts/embeddings:</p>
<pre><code class="language-python"># Load embedding
pipe.load_textual_inversion("path/to/embedding.pt", token="&lt;special-token&gt;")

# Use in prompt
prompt = "a photo of &lt;special-token&gt; in a forest"
image = pipe(prompt).images[0]
</code></pre>
<h3 id="upscaling"><a class="header" href="#upscaling">Upscaling</a></h3>
<p>Increase resolution with detail:</p>
<pre><code class="language-python">from diffusers import StableDiffusionUpscalePipeline

# Load upscaler
upscaler = StableDiffusionUpscalePipeline.from_pretrained(
    "stabilityai/stable-diffusion-x4-upscaler",
    torch_dtype=torch.float16
).to("cuda")

# Load low-res image
low_res = Image.open("output_512.png")

# Upscale
prompt = "highly detailed, sharp, professional"
upscaled = upscaler(
    prompt=prompt,
    image=low_res,
    num_inference_steps=50
).images[0]

upscaled.save("output_2048.png")
</code></pre>
<p><strong>Upscaling Options:</strong></p>
<ol>
<li><strong>SD Upscale</strong>: Built-in SD upscaler</li>
<li><strong>Real-ESRGAN</strong>: Traditional upscaler</li>
<li><strong>Ultimate SD Upscale</strong>: Tiled upscaling</li>
<li><strong>ControlNet Tile</strong>: Detail-preserving upscale</li>
</ol>
<h2 id="extensions--tools"><a class="header" href="#extensions--tools">Extensions &amp; Tools</a></h2>
<h3 id="automatic1111-extensions"><a class="header" href="#automatic1111-extensions">AUTOMATIC1111 Extensions</a></h3>
<p>Install via Extensions tab or:</p>
<pre><code class="language-bash">cd extensions
git clone [extension-repo-url]
</code></pre>
<h4 id="essential-extensions"><a class="header" href="#essential-extensions">Essential Extensions</a></h4>
<p><strong>ControlNet</strong></p>
<pre><code class="language-bash">git clone https://github.com/Mikubill/sd-webui-controlnet.git
</code></pre>
<p><strong>Dynamic Prompts</strong></p>
<pre><code class="language-bash">git clone https://github.com/adieyal/sd-dynamic-prompts.git
</code></pre>
<ul>
<li>Wildcard support: <code>{red|blue|green} car</code></li>
<li>Combinatorial generation</li>
</ul>
<p><strong>Image Browser</strong></p>
<pre><code class="language-bash">git clone https://github.com/AlUlkesh/stable-diffusion-webui-images-browser.git
</code></pre>
<ul>
<li>Browse generated images</li>
<li>Search by metadata</li>
</ul>
<p><strong>Cutoff</strong></p>
<pre><code class="language-bash">git clone https://github.com/hnmr293/sd-webui-cutoff.git
</code></pre>
<ul>
<li>Prevent color bleeding between subjects</li>
</ul>
<p><strong>Regional Prompter</strong></p>
<pre><code class="language-bash">git clone https://github.com/hako-mikan/sd-webui-regional-prompter.git
</code></pre>
<ul>
<li>Different prompts for image regions</li>
</ul>
<h3 id="checkpoint-merging"><a class="header" href="#checkpoint-merging">Checkpoint Merging</a></h3>
<p>Combine models:</p>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline
import torch

# Load two models
pipe1 = StableDiffusionPipeline.from_pretrained("model1")
pipe2 = StableDiffusionPipeline.from_pretrained("model2")

# Merge (0.5 = 50/50 blend)
alpha = 0.5
for key in pipe1.unet.state_dict():
    pipe1.unet.state_dict()[key] = (
        alpha * pipe1.unet.state_dict()[key] +
        (1 - alpha) * pipe2.unet.state_dict()[key]
    )

# Save merged model
pipe1.save_pretrained("merged_model")
</code></pre>
<h3 id="prompt-matrix"><a class="header" href="#prompt-matrix">Prompt Matrix</a></h3>
<p>Test multiple prompts:</p>
<pre><code># In AUTOMATIC1111
Prompt: a |red, blue, green| |car, house| in a forest

Generates:
- a red car in a forest
- a red house in a forest
- a blue car in a forest
- a blue house in a forest
- a green car in a forest
- a green house in a forest
</code></pre>
<h2 id="optimization-2"><a class="header" href="#optimization-2">Optimization</a></h2>
<h3 id="memory-optimization"><a class="header" href="#memory-optimization">Memory Optimization</a></h3>
<pre><code class="language-python">from diffusers import StableDiffusionPipeline
import torch

pipe = StableDiffusionPipeline.from_pretrained(
    "runwayml/stable-diffusion-v1-5",
    torch_dtype=torch.float16  # Half precision
).to("cuda")

# Enable memory optimizations
pipe.enable_attention_slicing()  # Reduce memory
pipe.enable_vae_slicing()  # Reduce VAE memory
pipe.enable_xformers_memory_efficient_attention()  # Faster attention

# For very low VRAM (4GB)
pipe.enable_sequential_cpu_offload()
</code></pre>
<h3 id="speed-optimization"><a class="header" href="#speed-optimization">Speed Optimization</a></h3>
<pre><code class="language-python"># Use faster scheduler
from diffusers import DPMSolverMultistepScheduler

pipe.scheduler = DPMSolverMultistepScheduler.from_config(
    pipe.scheduler.config
)

# Compile model (PyTorch 2.0+)
pipe.unet = torch.compile(pipe.unet, mode="reduce-overhead")

# Reduce steps with quality scheduler
image = pipe(prompt, num_inference_steps=20)  # vs 50 with others
</code></pre>
<h3 id="vram-requirements"><a class="header" href="#vram-requirements">VRAM Requirements</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Configuration</th><th>Minimum VRAM</th></tr></thead><tbody>
<tr><td>SD 1.5 (512x512)</td><td>4GB</td></tr>
<tr><td>SD 1.5 (512x512, optimized)</td><td>2GB</td></tr>
<tr><td>SD 2.1 (768x768)</td><td>6GB</td></tr>
<tr><td>SDXL (1024x1024)</td><td>8GB</td></tr>
<tr><td>SDXL (1024x1024, optimized)</td><td>6GB</td></tr>
<tr><td>ControlNet + SD</td><td>+2GB</td></tr>
<tr><td>Batch size 2</td><td>+2GB per image</td></tr>
</tbody></table>
</div>
<h3 id="launch-arguments-automatic1111"><a class="header" href="#launch-arguments-automatic1111">Launch Arguments (AUTOMATIC1111)</a></h3>
<pre><code class="language-bash"># Basic optimization
--xformers              # Memory-efficient attention
--medvram               # Medium VRAM optimization
--lowvram               # Low VRAM optimization
--no-half-vae           # Fix black images on some GPUs

# API
--api                   # Enable API
--listen                # Allow network connections

# Performance
--opt-sdp-attention     # Scaled dot product attention
--no-gradio-queue       # Disable queue

# Example combination
./webui.sh --xformers --medvram --api --no-half-vae
</code></pre>
<h2 id="common-issues-5"><a class="header" href="#common-issues-5">Common Issues</a></h2>
<h3 id="black-images"><a class="header" href="#black-images">Black Images</a></h3>
<pre><code class="language-bash"># Solution: Disable half precision for VAE
--no-half-vae
</code></pre>
<p>Or in Python:</p>
<pre><code class="language-python">pipe.vae.to(torch.float32)
</code></pre>
<h3 id="out-of-memory-oom"><a class="header" href="#out-of-memory-oom">Out of Memory (OOM)</a></h3>
<pre><code class="language-python"># Enable all optimizations
pipe.enable_attention_slicing()
pipe.enable_vae_slicing()
pipe.enable_sequential_cpu_offload()

# Reduce resolution
image = pipe(prompt, width=512, height=512)

# Reduce batch size
image = pipe(prompt, num_images_per_prompt=1)
</code></pre>
<h3 id="bad-handsanatomy"><a class="header" href="#bad-handsanatomy">Bad Hands/Anatomy</a></h3>
<pre><code>Negative prompt: "bad hands, bad anatomy, extra fingers, missing fingers, deformed hands, poorly drawn hands"

# Or use inpainting to fix
# Or use ControlNet OpenPose for guidance
</code></pre>
<h3 id="inconsistent-results"><a class="header" href="#inconsistent-results">Inconsistent Results</a></h3>
<pre><code class="language-python"># Use fixed seed
generator = torch.Generator("cuda").manual_seed(42)
image = pipe(prompt, generator=generator)

# Use lower temperature sampler (DDIM instead of Euler a)
</code></pre>
<h3 id="prompt-not-working"><a class="header" href="#prompt-not-working">Prompt Not Working</a></h3>
<ol>
<li>Check prompt weighting: <code>(keyword:1.3)</code></li>
<li>Use negative prompt to exclude unwanted elements</li>
<li>Increase CFG scale</li>
<li>Try different sampler</li>
<li>Add quality boosters: "highly detailed, 8k"</li>
</ol>
<h2 id="best-practices-23"><a class="header" href="#best-practices-23">Best Practices</a></h2>
<h3 id="1-prompt-structure"><a class="header" href="#1-prompt-structure">1. Prompt Structure</a></h3>
<pre><code>[Quality] [Style] [Subject] [Action] [Environment] [Lighting] [Details]

Example:
"masterpiece, best quality, photorealistic, portrait of a young woman, smiling, in a sunlit garden, golden hour lighting, detailed facial features, professional photography, 8k uhd"
</code></pre>
<h3 id="2-iterative-refinement"><a class="header" href="#2-iterative-refinement">2. Iterative Refinement</a></h3>
<pre><code class="language-python"># Start with low steps for preview
preview = pipe(prompt, num_inference_steps=15).images[0]

# Refine with more steps
final = pipe(prompt, num_inference_steps=50).images[0]

# Upscale for details
upscaled = upscale(final)
</code></pre>
<h3 id="3-seed-management"><a class="header" href="#3-seed-management">3. Seed Management</a></h3>
<pre><code class="language-python"># Save seeds for good results
good_seeds = []

for seed in range(100):
    gen = torch.Generator("cuda").manual_seed(seed)
    image = pipe(prompt, generator=gen).images[0]
    
    if is_good(image):
        good_seeds.append(seed)
        image.save(f"good_{seed}.png")
</code></pre>
<h3 id="4-negative-prompts-library"><a class="header" href="#4-negative-prompts-library">4. Negative Prompts Library</a></h3>
<pre><code class="language-python">negative_prompts = {
    'photorealistic': "anime, cartoon, drawing, painting, low quality",
    'artistic': "photorealistic, photo, realistic, low quality",
    'quality': "ugly, blurry, low quality, low resolution, pixelated",
    'anatomy': "bad anatomy, extra limbs, poorly drawn, deformed",
    'artifacts': "watermark, signature, text, logo, copyright"
}

# Combine as needed
negative = ", ".join([
    negative_prompts['quality'],
    negative_prompts['anatomy'],
    negative_prompts['artifacts']
])
</code></pre>
<h2 id="resources-18"><a class="header" href="#resources-18">Resources</a></h2>
<h3 id="models"><a class="header" href="#models">Models</a></h3>
<ul>
<li><a href="https://huggingface.co/models?pipeline_tag=text-to-image">Hugging Face</a></li>
<li><a href="https://civitai.com/">Civitai</a> - Community models, LoRAs</li>
<li><a href="https://huggingface.co/stabilityai">Stability AI</a></li>
</ul>
<h3 id="tools-3"><a class="header" href="#tools-3">Tools</a></h3>
<ul>
<li><a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">AUTOMATIC1111 WebUI</a></li>
<li><a href="https://github.com/comfyanonymous/ComfyUI">ComfyUI</a></li>
<li><a href="https://github.com/invoke-ai/InvokeAI">InvokeAI</a></li>
</ul>
<h3 id="learning-1"><a class="header" href="#learning-1">Learning</a></h3>
<ul>
<li><a href="https://stable-diffusion-art.com/">Stable Diffusion Art</a></li>
<li><a href="https://www.reddit.com/r/StableDiffusion/">r/StableDiffusion</a></li>
<li><a href="https://openart.ai/promptbook">OpenArt Prompt Book</a></li>
</ul>
<h3 id="communities-2"><a class="header" href="#communities-2">Communities</a></h3>
<ul>
<li>Discord: Stable Diffusion</li>
<li>Reddit: r/StableDiffusion</li>
<li>Twitter/X: #StableDiffusion</li>
</ul>
<h2 id="conclusion-14"><a class="header" href="#conclusion-14">Conclusion</a></h2>
<p>Stable Diffusion offers incredible flexibility and power for image generation. Success comes from understanding the fundamentals, experimenting with parameters, and iterating on prompts. Start simple, learn the basics, then explore advanced techniques like ControlNet and LoRA for professional results.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flux1---black-forest-labs"><a class="header" href="#flux1---black-forest-labs">Flux.1 - Black Forest Labs</a></h1>
<p>Complete guide to Flux.1, the next-generation image generation model from the creators of Stable Diffusion.</p>
<h2 id="table-of-contents-20"><a class="header" href="#table-of-contents-20">Table of Contents</a></h2>
<ul>
<li><a href="ai/fluxdev.html#introduction">Introduction</a></li>
<li><a href="ai/fluxdev.html#model-variants">Model Variants</a></li>
<li><a href="ai/fluxdev.html#installation--setup">Installation &amp; Setup</a></li>
<li><a href="ai/fluxdev.html#usage">Usage</a></li>
<li><a href="ai/fluxdev.html#prompt-engineering">Prompt Engineering</a></li>
<li><a href="ai/fluxdev.html#parameters">Parameters</a></li>
<li><a href="ai/fluxdev.html#comparison-with-other-models">Comparison with Other Models</a></li>
<li><a href="ai/fluxdev.html#advanced-techniques">Advanced Techniques</a></li>
<li><a href="ai/fluxdev.html#optimization">Optimization</a></li>
</ul>
<h2 id="introduction-7"><a class="header" href="#introduction-7">Introduction</a></h2>
<p>Flux.1 is a state-of-the-art image generation model developed by Black Forest Labs, the team behind the original Stable Diffusion. Released in 2024, it represents a significant advancement in image quality, prompt adherence, and detail preservation.</p>
<h3 id="key-features-3"><a class="header" href="#key-features-3">Key Features</a></h3>
<ul>
<li><strong>Superior Image Quality</strong>: Enhanced detail and realism</li>
<li><strong>Better Prompt Understanding</strong>: More accurate interpretation</li>
<li><strong>Improved Text Rendering</strong>: Readable text in images</li>
<li><strong>Flexible Architecture</strong>: Multiple variants for different needs</li>
<li><strong>Advanced Control</strong>: Fine-grained control over generation</li>
<li><strong>Fast Inference</strong>: Optimized for speed</li>
</ul>
<h3 id="model-architecture"><a class="header" href="#model-architecture">Model Architecture</a></h3>
<ul>
<li><strong>Flow Matching</strong>: Advanced diffusion technique</li>
<li><strong>Hybrid Architecture</strong>: Combines transformer and diffusion</li>
<li><strong>12B Parameters</strong>: Larger than SD models</li>
<li><strong>Parallel Attention</strong>: Efficient processing</li>
<li><strong>Rotation Position Embeddings (RoPE)</strong>: Better spatial understanding</li>
</ul>
<h2 id="model-variants"><a class="header" href="#model-variants">Model Variants</a></h2>
<h3 id="flux1-pro"><a class="header" href="#flux1-pro">Flux.1 [pro]</a></h3>
<p><strong>Commercial, API-only</strong></p>
<pre><code class="language-python">import requests

API_URL = "https://api.bfl.ml/v1/flux-pro"
API_KEY = "your-api-key"

def generate_flux_pro(prompt):
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    
    payload = {
        "prompt": prompt,
        "width": 1024,
        "height": 1024,
        "steps": 30
    }
    
    response = requests.post(API_URL, json=payload, headers=headers)
    return response.json()

# Generate
result = generate_flux_pro(
    "a professional photograph of a modern office, natural lighting, detailed"
)
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>Highest quality</li>
<li>Best prompt adherence</li>
<li>Commercial use allowed</li>
<li>API access only</li>
<li>Pay per generation</li>
</ul>
<p><strong>Best for:</strong></p>
<ul>
<li>Professional work</li>
<li>Commercial projects</li>
<li>Maximum quality needs</li>
</ul>
<h3 id="flux1-dev"><a class="header" href="#flux1-dev">Flux.1 [dev]</a></h3>
<p><strong>Non-commercial, open-weight</strong></p>
<pre><code class="language-python">import torch
from diffusers import FluxPipeline

# Load model
pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    torch_dtype=torch.bfloat16
)
pipe.to("cuda")

# Generate
prompt = "a majestic lion in the savanna at sunset, highly detailed"
image = pipe(
    prompt,
    guidance_scale=3.5,
    num_inference_steps=30,
    height=1024,
    width=1024,
).images[0]

image.save("flux_output.png")
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>High quality</li>
<li>Open weights</li>
<li>Non-commercial license</li>
<li>Requires Hugging Face auth</li>
<li>Can run locally</li>
</ul>
<p><strong>Requirements:</strong></p>
<ul>
<li>GPU: 24GB+ VRAM (recommended)</li>
<li>RAM: 32GB+ system RAM</li>
<li>Storage: ~30GB for model</li>
</ul>
<p><strong>Best for:</strong></p>
<ul>
<li>Research and development</li>
<li>Personal projects</li>
<li>Learning and experimentation</li>
</ul>
<h3 id="flux1-schnell"><a class="header" href="#flux1-schnell">Flux.1 [schnell]</a></h3>
<p><strong>Apache 2.0 license, fastest</strong></p>
<pre><code class="language-python">from diffusers import FluxPipeline
import torch

# Load schnell variant
pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-schnell",
    torch_dtype=torch.bfloat16
)
pipe.to("cuda")

# Fast generation (1-4 steps)
prompt = "a portrait of a person, professional photography"
image = pipe(
    prompt,
    num_inference_steps=4,  # Very few steps needed
    guidance_scale=0.0,  # No guidance needed
    height=1024,
    width=1024,
).images[0]

image.save("schnell_output.png")
</code></pre>
<p><strong>Features:</strong></p>
<ul>
<li>Very fast (1-4 steps)</li>
<li>Good quality</li>
<li>Apache 2.0 license</li>
<li>Commercial use allowed</li>
<li>Lower VRAM requirements</li>
</ul>
<p><strong>Best for:</strong></p>
<ul>
<li>Real-time applications</li>
<li>High-volume generation</li>
<li>Commercial projects</li>
<li>Resource-constrained environments</li>
</ul>
<h2 id="installation--setup-2"><a class="header" href="#installation--setup-2">Installation &amp; Setup</a></h2>
<h3 id="option-1-diffusers-recommended"><a class="header" href="#option-1-diffusers-recommended">Option 1: Diffusers (Recommended)</a></h3>
<pre><code class="language-bash"># Install dependencies
pip install diffusers transformers accelerate torch

# Install from latest
pip install git+https://github.com/huggingface/diffusers.git
</code></pre>
<pre><code class="language-python">from diffusers import FluxPipeline
import torch

# Authenticate with Hugging Face
from huggingface_hub import login
login(token="your_hf_token")

# Load model
pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    torch_dtype=torch.bfloat16
)
pipe.enable_model_cpu_offload()  # Save VRAM

# Generate
image = pipe("a beautiful landscape").images[0]
</code></pre>
<h3 id="option-2-comfyui"><a class="header" href="#option-2-comfyui">Option 2: ComfyUI</a></h3>
<pre><code class="language-bash"># Update ComfyUI
cd ComfyUI
git pull

# Download Flux models to:
# models/unet/flux1-dev.safetensors
# models/unet/flux1-schnell.safetensors

# Download CLIP and T5 encoders to:
# models/clip/clip_l.safetensors
# models/clip/t5xxl_fp16.safetensors

# Download VAE to:
# models/vae/ae.safetensors
</code></pre>
<h3 id="option-3-automatic1111-via-extension"><a class="header" href="#option-3-automatic1111-via-extension">Option 3: AUTOMATIC1111 (via extension)</a></h3>
<pre><code class="language-bash">cd extensions
git clone https://github.com/XLabs-AI/x-flux-comfyui.git
# Restart WebUI
</code></pre>
<h3 id="hardware-requirements"><a class="header" href="#hardware-requirements">Hardware Requirements</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Variant</th><th>Minimum VRAM</th><th>Recommended VRAM</th><th>Storage</th></tr></thead><tbody>
<tr><td>Schnell</td><td>12GB</td><td>16GB</td><td>30GB</td></tr>
<tr><td>Dev</td><td>16GB</td><td>24GB</td><td>30GB</td></tr>
<tr><td>Pro</td><td>N/A (API)</td><td>N/A (API)</td><td>N/A</td></tr>
</tbody></table>
</div>
<p><strong>Optimizations:</strong></p>
<ul>
<li>bfloat16: Reduces VRAM by ~50%</li>
<li>CPU offload: Reduces VRAM usage further</li>
<li>Quantization: 8-bit or 4-bit for lower VRAM</li>
</ul>
<h2 id="usage"><a class="header" href="#usage">Usage</a></h2>
<h3 id="basic-generation"><a class="header" href="#basic-generation">Basic Generation</a></h3>
<pre><code class="language-python">from diffusers import FluxPipeline
import torch

pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    torch_dtype=torch.bfloat16
)
pipe.to("cuda")

# Simple generation
prompt = "a serene mountain lake at sunrise"
image = pipe(prompt).images[0]
image.save("output.png")
</code></pre>
<h3 id="with-parameters"><a class="header" href="#with-parameters">With Parameters</a></h3>
<pre><code class="language-python">image = pipe(
    prompt="a futuristic city with flying cars, neon lights, cyberpunk",
    height=1024,
    width=1024,
    num_inference_steps=30,
    guidance_scale=3.5,
    max_sequence_length=256,
).images[0]
</code></pre>
<h3 id="batch-generation"><a class="header" href="#batch-generation">Batch Generation</a></h3>
<pre><code class="language-python"># Multiple images from one prompt
images = pipe(
    prompt="a cute cat",
    num_images_per_prompt=4,
    num_inference_steps=30,
).images

for i, img in enumerate(images):
    img.save(f"cat_{i}.png")
</code></pre>
<h3 id="seed-control"><a class="header" href="#seed-control">Seed Control</a></h3>
<pre><code class="language-python"># Fixed seed for reproducibility
generator = torch.Generator("cuda").manual_seed(42)

image = pipe(
    prompt="a magical forest",
    generator=generator,
    num_inference_steps=30,
).images[0]
</code></pre>
<h3 id="memory-efficient-generation"><a class="header" href="#memory-efficient-generation">Memory-Efficient Generation</a></h3>
<pre><code class="language-python"># For lower VRAM
pipe.enable_model_cpu_offload()
pipe.enable_sequential_cpu_offload()
pipe.vae.enable_slicing()
pipe.vae.enable_tiling()

# Generate
image = pipe(
    prompt="a detailed landscape",
    height=1024,
    width=1024,
).images[0]
</code></pre>
<h2 id="prompt-engineering-2"><a class="header" href="#prompt-engineering-2">Prompt Engineering</a></h2>
<h3 id="prompt-structure"><a class="header" href="#prompt-structure">Prompt Structure</a></h3>
<p>Flux.1 has excellent prompt understanding. Use natural language:</p>
<pre><code class="language-python"># Simple and effective
prompt = "a portrait of a woman with red hair, wearing a blue dress, in a garden"

# Detailed
prompt = """
a professional photograph of a young woman with flowing red hair, 
wearing an elegant blue silk dress, standing in a lush garden 
with blooming roses, soft natural lighting, golden hour, 
depth of field, bokeh background, shot on Canon EOS R5
"""

# With style
prompt = """
oil painting of a medieval knight in full armor, 
standing on a cliff overlooking the ocean at sunset,
dramatic lighting, renaissance art style, 
highly detailed, masterpiece
"""
</code></pre>
<h3 id="natural-language"><a class="header" href="#natural-language">Natural Language</a></h3>
<p>Flux excels with conversational prompts:</p>
<pre><code class="language-python">prompts = [
    "Show me a cat wearing sunglasses at the beach",
    "Create an image of a steampunk airship flying over Victorian London",
    "Paint a serene Japanese garden in autumn with falling maple leaves",
    "Design a futuristic sports car that looks fast even when standing still"
]
</code></pre>
<h3 id="text-in-images"><a class="header" href="#text-in-images">Text in Images</a></h3>
<p>Flux.1 can render text (unlike most other models):</p>
<pre><code class="language-python"># Text rendering
prompt = '''
a modern cafe storefront with a neon sign that says "COFFEE SHOP",
rainy evening, reflections on wet pavement, cinematic lighting
'''

# Book cover
prompt = '''
a fantasy book cover with the title "The Dragon's Tale" 
written in elegant golden letters at the top,
featuring a majestic dragon flying over mountains
'''

# Product mockup
prompt = '''
a white t-shirt with the text "FLUX.1" printed in bold black letters,
product photography, plain white background, professional lighting
'''
</code></pre>
<h3 id="aspect-ratios"><a class="header" href="#aspect-ratios">Aspect Ratios</a></h3>
<pre><code class="language-python"># Portrait
image = pipe(prompt, height=1344, width=768).images[0]

# Landscape
image = pipe(prompt, height=768, width=1344).images[0]

# Square
image = pipe(prompt, height=1024, width=1024).images[0]

# Cinematic
image = pipe(prompt, height=576, width=1024).images[0]

# Ultra-wide
image = pipe(prompt, height=512, width=1536).images[0]
</code></pre>
<h3 id="prompt-tips"><a class="header" href="#prompt-tips">Prompt Tips</a></h3>
<ol>
<li><strong>Be Specific</strong>: More detail = better results</li>
<li><strong>Natural Language</strong>: Write as you would describe to a person</li>
<li><strong>Quality Terms</strong>: "professional", "detailed", "high quality"</li>
<li><strong>Style References</strong>: "photograph", "oil painting", "digital art"</li>
<li><strong>Lighting</strong>: "golden hour", "dramatic lighting", "soft light"</li>
<li><strong>Camera/Lens</strong>: "50mm lens", "wide angle", "macro"</li>
</ol>
<h3 id="example-prompts"><a class="header" href="#example-prompts">Example Prompts</a></h3>
<pre><code class="language-python"># Photorealistic
prompt = """
a cinematic photograph of a lone astronaut standing on mars, 
red desert landscape, distant sun on horizon, 
dust particles in air, dramatic lighting, 
shot on ARRI Alexa, anamorphic lens
"""

# Artistic
prompt = """
watercolor painting of a coastal village, 
Mediterranean architecture, boats in harbor, 
soft pastel colors, impressionist style, 
painted by Claude Monet
"""

# Product
prompt = """
professional product photography of a luxury watch, 
silver metal band, blue dial face, 
on marble surface with dramatic side lighting, 
reflections, 8k resolution, advertising quality
"""

# Character
prompt = """
character design of a cyberpunk hacker, 
purple mohawk, neon goggles, leather jacket with patches, 
detailed facial features, full body illustration, 
concept art style, trending on artstation
"""

# Architecture
prompt = """
modern minimalist house in forest setting, 
large glass windows, wooden exterior, 
surrounded by tall pine trees, morning mist, 
architectural photography, professional real estate photo
"""
</code></pre>
<h2 id="parameters-1"><a class="header" href="#parameters-1">Parameters</a></h2>
<h3 id="num_inference_steps"><a class="header" href="#num_inference_steps">num_inference_steps</a></h3>
<p>Number of denoising steps:</p>
<pre><code class="language-python"># Schnell: 1-4 steps (optimized for speed)
image = pipe(prompt, num_inference_steps=4).images[0]

# Dev: 20-50 steps (balance)
image = pipe(prompt, num_inference_steps=30).images[0]

# Pro: API manages automatically
</code></pre>
<p><strong>Recommendations:</strong></p>
<ul>
<li>Schnell: 1-4 (4 recommended)</li>
<li>Dev: 20-30 (30 recommended)</li>
<li>More steps = better quality but slower</li>
</ul>
<h3 id="guidance_scale"><a class="header" href="#guidance_scale">guidance_scale</a></h3>
<p>How closely to follow the prompt:</p>
<pre><code class="language-python"># Schnell: 0.0 (no guidance needed)
image = pipe(prompt, guidance_scale=0.0).images[0]

# Dev: 3.0-5.0 (3.5 recommended)
image = pipe(prompt, guidance_scale=3.5).images[0]
</code></pre>
<p><strong>Flux uses lower guidance than SD:</strong></p>
<ul>
<li>SD typical: 7-10</li>
<li>Flux typical: 3-5</li>
</ul>
<h3 id="max_sequence_length"><a class="header" href="#max_sequence_length">max_sequence_length</a></h3>
<p>Token limit for prompt:</p>
<pre><code class="language-python"># Standard
image = pipe(prompt, max_sequence_length=256).images[0]

# Long prompts
image = pipe(prompt, max_sequence_length=512).images[0]
</code></pre>
<h3 id="resolution-1"><a class="header" href="#resolution-1">Resolution</a></h3>
<pre><code class="language-python"># Standard resolutions (in pixels)
resolutions = {
    "square": (1024, 1024),
    "portrait": (768, 1344),
    "landscape": (1344, 768),
    "wide": (1536, 640),
    "tall": (640, 1536),
}

# Use
image = pipe(
    prompt,
    height=resolutions["landscape"][0],
    width=resolutions["landscape"][1]
).images[0]
</code></pre>
<p><strong>Notes:</strong></p>
<ul>
<li>Keep dimensions divisible by 16</li>
<li>Total pixels should be ~1MP for best results</li>
<li>Higher resolutions need more VRAM</li>
</ul>
<h2 id="comparison-with-other-models"><a class="header" href="#comparison-with-other-models">Comparison with Other Models</a></h2>
<h3 id="flux1-vs-stable-diffusion"><a class="header" href="#flux1-vs-stable-diffusion">Flux.1 vs Stable Diffusion</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Flux.1</th><th>SD 1.5</th><th>SDXL</th></tr></thead><tbody>
<tr><td>Image Quality</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐⭐</td><td>⭐⭐⭐⭐</td></tr>
<tr><td>Prompt Adherence</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐⭐</td><td>⭐⭐⭐⭐</td></tr>
<tr><td>Text Rendering</td><td>⭐⭐⭐⭐⭐</td><td>⭐</td><td>⭐⭐</td></tr>
<tr><td>Speed (Dev)</td><td>⭐⭐⭐</td><td>⭐⭐⭐⭐</td><td>⭐⭐⭐</td></tr>
<tr><td>Speed (Schnell)</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐⭐⭐</td><td>⭐⭐⭐</td></tr>
<tr><td>VRAM Usage</td><td>⭐⭐</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐⭐</td></tr>
<tr><td>Ecosystem</td><td>⭐⭐</td><td>⭐⭐⭐⭐⭐</td><td>⭐⭐⭐⭐</td></tr>
<tr><td>License</td><td>Varies</td><td>Open</td><td>Open</td></tr>
</tbody></table>
</div>
<h3 id="quality-comparison"><a class="header" href="#quality-comparison">Quality Comparison</a></h3>
<pre><code class="language-python"># Same prompt across models
prompt = "a detailed portrait of a person with glasses"

# Flux.1 Dev
flux_image = flux_pipe(prompt, num_inference_steps=30).images[0]
# Result: High detail, accurate glasses, natural lighting

# SDXL
sdxl_image = sdxl_pipe(prompt, num_inference_steps=30).images[0]
# Result: Good quality, some artifacts

# SD 1.5
sd15_image = sd15_pipe(prompt, num_inference_steps=30).images[0]
# Result: Lower quality, potential distortions
</code></pre>
<h3 id="strengths-of-flux1"><a class="header" href="#strengths-of-flux1">Strengths of Flux.1</a></h3>
<ol>
<li><strong>Superior Detail</strong>: Finer details in textures, faces, objects</li>
<li><strong>Better Composition</strong>: More coherent scene layouts</li>
<li><strong>Text Rendering</strong>: Can actually render readable text</li>
<li><strong>Prompt Understanding</strong>: Better interpretation of complex prompts</li>
<li><strong>Natural Images</strong>: More photorealistic when requested</li>
</ol>
<h3 id="strengths-of-stable-diffusion"><a class="header" href="#strengths-of-stable-diffusion">Strengths of Stable Diffusion</a></h3>
<ol>
<li><strong>Ecosystem</strong>: Vast library of models, LoRAs, tools</li>
<li><strong>VRAM Efficiency</strong>: Runs on lower-end hardware</li>
<li><strong>Community</strong>: Large community, extensive documentation</li>
<li><strong>Extensions</strong>: ControlNet, regional prompting, etc.</li>
<li><strong>Customization</strong>: Easy to fine-tune and merge</li>
</ol>
<h3 id="when-to-use-each"><a class="header" href="#when-to-use-each">When to Use Each</a></h3>
<p><strong>Use Flux.1 when:</strong></p>
<ul>
<li>Maximum quality is priority</li>
<li>Need text in images</li>
<li>Want natural, detailed results</li>
<li>Have adequate hardware</li>
<li>Creating professional content</li>
</ul>
<p><strong>Use Stable Diffusion when:</strong></p>
<ul>
<li>Need specific styles (anime, etc.)</li>
<li>Want to use LoRAs/embeddings</li>
<li>Limited VRAM (&lt;12GB)</li>
<li>Need extensive control (ControlNet)</li>
<li>Large existing workflow</li>
</ul>
<h2 id="advanced-techniques-4"><a class="header" href="#advanced-techniques-4">Advanced Techniques</a></h2>
<h3 id="image-to-image-via-diffusers"><a class="header" href="#image-to-image-via-diffusers">Image-to-Image (via Diffusers)</a></h3>
<pre><code class="language-python">from diffusers import FluxImg2ImgPipeline
from PIL import Image

# Load pipeline
pipe = FluxImg2ImgPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    torch_dtype=torch.bfloat16
)
pipe.to("cuda")

# Load input image
init_image = Image.open("input.jpg").convert("RGB")

# Transform
prompt = "transform into an oil painting, artistic style"
image = pipe(
    prompt=prompt,
    image=init_image,
    strength=0.75,
    num_inference_steps=30,
    guidance_scale=3.5
).images[0]
</code></pre>
<h3 id="controlnet-via-third-party"><a class="header" href="#controlnet-via-third-party">ControlNet (via third-party)</a></h3>
<pre><code class="language-python"># Note: Official ControlNet not yet released
# Community implementations available

# Example with X-Labs implementation
from flux_control import FluxControlNetPipeline

pipe = FluxControlNetPipeline.from_pretrained(
    "XLabs-AI/flux-controlnet-canny",
    torch_dtype=torch.bfloat16
)

# Use canny edge detection
control_image = generate_canny(input_image)
output = pipe(prompt, control_image=control_image).images[0]
</code></pre>
<h3 id="lora-fine-tuning"><a class="header" href="#lora-fine-tuning">LoRA Fine-tuning</a></h3>
<pre><code class="language-python">from diffusers import FluxPipeline

pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    torch_dtype=torch.bfloat16
)

# Load LoRA (when available)
pipe.load_lora_weights("path/to/flux-lora.safetensors")

# Generate with LoRA style
prompt = "a portrait in the custom style"
image = pipe(prompt).images[0]
</code></pre>
<h3 id="batching-for-efficiency"><a class="header" href="#batching-for-efficiency">Batching for Efficiency</a></h3>
<pre><code class="language-python"># Generate multiple variations
prompts = [
    "a red car",
    "a blue car",
    "a green car",
    "a yellow car"
]

images = []
for prompt in prompts:
    image = pipe(prompt, num_inference_steps=30).images[0]
    images.append(image)
    
# Or use batch processing if memory allows
</code></pre>
<h2 id="optimization-3"><a class="header" href="#optimization-3">Optimization</a></h2>
<h3 id="memory-optimization-1"><a class="header" href="#memory-optimization-1">Memory Optimization</a></h3>
<pre><code class="language-python">from diffusers import FluxPipeline
import torch

pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-schnell",
    torch_dtype=torch.bfloat16
)

# Enable CPU offloading
pipe.enable_model_cpu_offload()

# Enable VAE optimizations
pipe.vae.enable_slicing()
pipe.vae.enable_tiling()

# For extreme memory savings
pipe.enable_sequential_cpu_offload()
</code></pre>
<h3 id="speed-optimization-1"><a class="header" href="#speed-optimization-1">Speed Optimization</a></h3>
<pre><code class="language-python"># Use Schnell for speed
pipe_schnell = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-schnell",
    torch_dtype=torch.bfloat16
)

# Compile for faster inference (PyTorch 2.0+)
pipe.unet = torch.compile(pipe.unet, mode="reduce-overhead")

# Use fewer steps
image = pipe_schnell(prompt, num_inference_steps=4).images[0]
</code></pre>
<h3 id="quantization-1"><a class="header" href="#quantization-1">Quantization</a></h3>
<pre><code class="language-python"># 8-bit quantization
from transformers import BitsAndBytesConfig

quantization_config = BitsAndBytesConfig(
    load_in_8bit=True,
    bnb_4bit_compute_dtype=torch.bfloat16
)

pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    quantization_config=quantization_config,
    torch_dtype=torch.bfloat16
)
</code></pre>
<h3 id="multi-gpu"><a class="header" href="#multi-gpu">Multi-GPU</a></h3>
<pre><code class="language-python"># Distribute across GPUs
from accelerate import PartialState

pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-dev",
    torch_dtype=torch.bfloat16
)

distributed_state = PartialState()
pipe.to(distributed_state.device)
</code></pre>
<h2 id="api-usage-flux-pro"><a class="header" href="#api-usage-flux-pro">API Usage (Flux Pro)</a></h2>
<h3 id="rest-api"><a class="header" href="#rest-api">REST API</a></h3>
<pre><code class="language-python">import requests
import base64
from io import BytesIO
from PIL import Image

API_URL = "https://api.bfl.ml/v1/flux-pro"
API_KEY = "your-api-key"

def generate_flux_pro(
    prompt,
    width=1024,
    height=1024,
    steps=30,
    guidance=3.5
):
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    
    payload = {
        "prompt": prompt,
        "width": width,
        "height": height,
        "steps": steps,
        "guidance": guidance
    }
    
    response = requests.post(API_URL, json=payload, headers=headers)
    
    if response.status_code == 200:
        image_data = response.json()["image"]
        image = Image.open(BytesIO(base64.b64decode(image_data)))
        return image
    else:
        raise Exception(f"API Error: {response.text}")

# Generate
image = generate_flux_pro(
    "a beautiful sunset over mountains",
    width=1344,
    height=768
)
image.save("pro_output.png")
</code></pre>
<h3 id="async-api"><a class="header" href="#async-api">Async API</a></h3>
<pre><code class="language-python">import asyncio
import aiohttp

async def generate_async(prompt):
    async with aiohttp.ClientSession() as session:
        headers = {"Authorization": f"Bearer {API_KEY}"}
        payload = {"prompt": prompt}
        
        async with session.post(API_URL, json=payload, headers=headers) as resp:
            return await resp.json()

# Use
image_data = asyncio.run(generate_async("a futuristic city"))
</code></pre>
<h2 id="tips--best-practices"><a class="header" href="#tips--best-practices">Tips &amp; Best Practices</a></h2>
<h3 id="1-prompt-quality"><a class="header" href="#1-prompt-quality">1. Prompt Quality</a></h3>
<pre><code class="language-python"># Good prompts for Flux
good_prompts = [
    "a cinematic photograph of [subject], [details], [lighting], [camera]",
    "an oil painting of [scene], [style], by [artist]",
    "product photography of [item], [background], professional lighting",
    "character design of [character], [details], concept art"
]
</code></pre>
<h3 id="2-iteration-strategy"><a class="header" href="#2-iteration-strategy">2. Iteration Strategy</a></h3>
<pre><code class="language-python"># Start with Schnell for quick iterations
quick_pipe = FluxPipeline.from_pretrained(
    "black-forest-labs/FLUX.1-schnell",
    torch_dtype=torch.bfloat16
)

# Iterate quickly
for variation in range(5):
    gen = torch.Generator("cuda").manual_seed(variation)
    preview = quick_pipe(
        prompt,
        num_inference_steps=4,
        generator=gen
    ).images[0]
    preview.save(f"preview_{variation}.png")

# Refine winner with Dev
final = dev_pipe(
    final_prompt,
    num_inference_steps=30,
    generator=torch.Generator("cuda").manual_seed(winning_seed)
).images[0]
</code></pre>
<h3 id="3-vram-management"><a class="header" href="#3-vram-management">3. VRAM Management</a></h3>
<pre><code class="language-python"># Monitor VRAM
import torch

print(f"Allocated: {torch.cuda.memory_allocated() / 1e9:.2f} GB")
print(f"Reserved: {torch.cuda.memory_reserved() / 1e9:.2f} GB")

# Clear cache between generations
torch.cuda.empty_cache()
</code></pre>
<h3 id="4-prompt-templates"><a class="header" href="#4-prompt-templates">4. Prompt Templates</a></h3>
<pre><code class="language-python">templates = {
    "portrait": "{subject}, {expression}, {clothing}, {background}, portrait photography, {lighting}",
    "landscape": "{location}, {time_of_day}, {weather}, {style}, landscape photography",
    "product": "product photography of {product}, {surface}, {lighting}, professional, commercial",
    "artistic": "{style} of {subject}, {details}, by {artist}, masterpiece"
}

# Use
prompt = templates["portrait"].format(
    subject="a young woman",
    expression="slight smile",
    clothing="elegant dress",
    background="bokeh lights",
    lighting="soft natural light"
)
</code></pre>
<h2 id="resources-19"><a class="header" href="#resources-19">Resources</a></h2>
<h3 id="official-1"><a class="header" href="#official-1">Official</a></h3>
<ul>
<li><a href="https://blackforestlabs.ai/">Black Forest Labs Website</a></li>
<li><a href="https://huggingface.co/black-forest-labs">Hugging Face Models</a></li>
<li><a href="https://docs.bfl.ml/">API Documentation</a></li>
</ul>
<h3 id="community-2"><a class="header" href="#community-2">Community</a></h3>
<ul>
<li>r/FluxAI</li>
<li>Hugging Face Discussions</li>
<li>Discord communities</li>
</ul>
<h3 id="tools-4"><a class="header" href="#tools-4">Tools</a></h3>
<ul>
<li><a href="https://github.com/XLabs-AI/x-flux-comfyui">ComfyUI Flux Nodes</a></li>
<li><a href="https://github.com/huggingface/diffusers">Diffusers Integration</a></li>
</ul>
<h3 id="learning-2"><a class="header" href="#learning-2">Learning</a></h3>
<ul>
<li><a href="https://blackforestlabs.ai/announcing-flux-1/">Flux.1 Paper</a></li>
<li>Comparison benchmarks</li>
<li>Community prompts</li>
</ul>
<h2 id="conclusion-15"><a class="header" href="#conclusion-15">Conclusion</a></h2>
<p>Flux.1 represents a significant leap in image generation quality. While it requires more resources than Stable Diffusion, the results are often worth it for professional applications. The Schnell variant offers excellent speed-to-quality ratio, while Dev provides maximum quality for local generation.</p>
<p>Key takeaways:</p>
<ul>
<li><strong>Schnell</strong>: Fast, commercial-friendly, good quality</li>
<li><strong>Dev</strong>: Best local quality, non-commercial</li>
<li><strong>Pro</strong>: Highest quality, API-only, commercial</li>
</ul>
<p>Choose based on your needs, hardware, and use case. Experiment with natural language prompts and leverage Flux's superior understanding for best results.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="comfyui"><a class="header" href="#comfyui">ComfyUI</a></h1>
<p>https://github.com/comfyanonymous/ComfyUI</p>
<p>https://docs.comfy.org/get_started/manual_install</p>
<p>git clone https://github.com/comfyanonymous/ComfyUI.git
https://comfyui-wiki.com/tutorial/advanced/flux1-comfyui-guide-workflow-and-examples</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fine-tuning-2"><a class="header" href="#fine-tuning-2">Fine Tuning</a></h1>
<p>https://github.com/ostris/ai-toolkit</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-computing-overview"><a class="header" href="#cloud-computing-overview">Cloud Computing Overview</a></h1>
<h2 id="table-of-contents-21"><a class="header" href="#table-of-contents-21">Table of Contents</a></h2>
<ul>
<li><a href="cloud/index.html#introduction">Introduction</a></li>
<li><a href="cloud/index.html#cloud-service-models">Cloud Service Models</a></li>
<li><a href="cloud/index.html#cloud-deployment-models">Cloud Deployment Models</a></li>
<li><a href="cloud/index.html#major-cloud-providers">Major Cloud Providers</a></li>
<li><a href="cloud/index.html#common-cloud-services">Common Cloud Services</a></li>
<li><a href="cloud/index.html#cloud-architecture-patterns">Cloud Architecture Patterns</a></li>
<li><a href="cloud/index.html#cost-optimization">Cost Optimization</a></li>
<li><a href="cloud/index.html#security-best-practices">Security Best Practices</a></li>
<li><a href="cloud/index.html#choosing-a-cloud-provider">Choosing a Cloud Provider</a></li>
</ul>
<h2 id="introduction-8"><a class="header" href="#introduction-8">Introduction</a></h2>
<p>Cloud computing is the delivery of computing services—including servers, storage, databases, networking, software, analytics, and intelligence—over the Internet ("the cloud") to offer faster innovation, flexible resources, and economies of scale.</p>
<h3 id="key-benefits"><a class="header" href="#key-benefits">Key Benefits</a></h3>
<ul>
<li><strong>Cost Savings</strong>: Pay only for what you use (OpEx vs CapEx)</li>
<li><strong>Scalability</strong>: Scale up or down based on demand</li>
<li><strong>Performance</strong>: Access to latest hardware and global infrastructure</li>
<li><strong>Speed</strong>: Deploy resources in minutes</li>
<li><strong>Reliability</strong>: Data backup, disaster recovery, business continuity</li>
<li><strong>Security</strong>: Enterprise-grade security features</li>
</ul>
<h2 id="cloud-service-models"><a class="header" href="#cloud-service-models">Cloud Service Models</a></h2>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│                     Cloud Service Models                     │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  IaaS (Infrastructure as a Service)                          │
│  ├─ You Manage: Applications, Data, Runtime, Middleware, OS │
│  └─ Provider Manages: Virtualization, Servers, Storage, Net │
│                                                               │
│  PaaS (Platform as a Service)                                │
│  ├─ You Manage: Applications, Data                          │
│  └─ Provider Manages: Runtime, Middleware, OS, Infra        │
│                                                               │
│  SaaS (Software as a Service)                                │
│  ├─ You Manage: Data/Configuration                          │
│  └─ Provider Manages: Everything else                       │
│                                                               │
│  FaaS (Function as a Service / Serverless)                   │
│  ├─ You Manage: Code/Functions                              │
│  └─ Provider Manages: Everything else + Auto-scaling        │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="iaas---infrastructure-as-a-service"><a class="header" href="#iaas---infrastructure-as-a-service">IaaS - Infrastructure as a Service</a></h3>
<p><strong>Examples</strong>: AWS EC2, Azure VMs, Google Compute Engine</p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Hosting websites and web applications</li>
<li>High-performance computing</li>
<li>Big data analysis</li>
<li>Backup and recovery</li>
</ul>
<p><strong>Control Level</strong>: High
<strong>Management Overhead</strong>: High</p>
<h3 id="paas---platform-as-a-service"><a class="header" href="#paas---platform-as-a-service">PaaS - Platform as a Service</a></h3>
<p><strong>Examples</strong>: AWS Elastic Beanstalk, Azure App Service, Google App Engine</p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Application development and deployment</li>
<li>API development and management</li>
<li>Business analytics/intelligence</li>
</ul>
<p><strong>Control Level</strong>: Medium
<strong>Management Overhead</strong>: Medium</p>
<h3 id="saas---software-as-a-service"><a class="header" href="#saas---software-as-a-service">SaaS - Software as a Service</a></h3>
<p><strong>Examples</strong>: Gmail, Office 365, Salesforce, Dropbox</p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Email and collaboration</li>
<li>CRM and ERP systems</li>
<li>Productivity applications</li>
</ul>
<p><strong>Control Level</strong>: Low
<strong>Management Overhead</strong>: Low</p>
<h3 id="faas---function-as-a-service"><a class="header" href="#faas---function-as-a-service">FaaS - Function as a Service</a></h3>
<p><strong>Examples</strong>: AWS Lambda, Azure Functions, Google Cloud Functions</p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Event-driven applications</li>
<li>Real-time file processing</li>
<li>Scheduled tasks</li>
<li>Microservices</li>
</ul>
<p><strong>Control Level</strong>: Low (code only)
<strong>Management Overhead</strong>: Very Low</p>
<h2 id="cloud-deployment-models"><a class="header" href="#cloud-deployment-models">Cloud Deployment Models</a></h2>
<h3 id="public-cloud"><a class="header" href="#public-cloud">Public Cloud</a></h3>
<ul>
<li>Resources owned and operated by third-party provider</li>
<li>Services delivered over the internet</li>
<li>Examples: AWS, Azure, GCP</li>
</ul>
<p><strong>Pros</strong>: Cost-effective, scalable, no maintenance
<strong>Cons</strong>: Less control, potential security concerns</p>
<h3 id="private-cloud"><a class="header" href="#private-cloud">Private Cloud</a></h3>
<ul>
<li>Infrastructure used exclusively by a single organization</li>
<li>Can be hosted on-premises or by third party</li>
</ul>
<p><strong>Pros</strong>: More control, enhanced security, compliance
<strong>Cons</strong>: Higher cost, maintenance overhead</p>
<h3 id="hybrid-cloud"><a class="header" href="#hybrid-cloud">Hybrid Cloud</a></h3>
<ul>
<li>Combination of public and private clouds</li>
<li>Data and applications shared between them</li>
</ul>
<p><strong>Pros</strong>: Flexibility, cost optimization, compliance options
<strong>Cons</strong>: Complexity, integration challenges</p>
<h3 id="multi-cloud"><a class="header" href="#multi-cloud">Multi-Cloud</a></h3>
<ul>
<li>Using multiple cloud providers simultaneously</li>
<li>Avoid vendor lock-in</li>
</ul>
<p><strong>Pros</strong>: Best-of-breed services, redundancy
<strong>Cons</strong>: Increased complexity, management overhead</p>
<h2 id="major-cloud-providers"><a class="header" href="#major-cloud-providers">Major Cloud Providers</a></h2>
<h3 id="comparison-matrix"><a class="header" href="#comparison-matrix">Comparison Matrix</a></h3>
<pre><code>┌────────────────┬──────────────┬──────────────┬──────────────┐
│ Feature        │ AWS          │ Azure        │ GCP          │
├────────────────┼──────────────┼──────────────┼──────────────┤
│ Market Share   │ ~32%         │ ~23%         │ ~10%         │
│ Launch Year    │ 2006         │ 2010         │ 2008         │
│ Regions        │ 30+          │ 60+          │ 35+          │
│ Services       │ 200+         │ 200+         │ 100+         │
│ Strengths      │ Maturity     │ Enterprise   │ ML/Data      │
│                │ Breadth      │ Integration  │ Analytics    │
│ Best For       │ Startups     │ .NET/Windows │ Big Data     │
│                │ Flexibility  │ Hybrid       │ ML/AI        │
└────────────────┴──────────────┴──────────────┴──────────────┘
</code></pre>
<h3 id="aws-amazon-web-services"><a class="header" href="#aws-amazon-web-services">AWS (Amazon Web Services)</a></h3>
<ul>
<li><strong>Founded</strong>: 2006</li>
<li><strong>Market Leader</strong>: Largest market share</li>
<li><strong>Strengths</strong>: Broad service portfolio, mature ecosystem, extensive documentation</li>
<li><strong>Popular Services</strong>: EC2, S3, Lambda, RDS, DynamoDB</li>
</ul>
<h3 id="microsoft-azure"><a class="header" href="#microsoft-azure">Microsoft Azure</a></h3>
<ul>
<li><strong>Founded</strong>: 2010</li>
<li><strong>Second Largest</strong>: Strong enterprise presence</li>
<li><strong>Strengths</strong>: Hybrid cloud, Windows/Microsoft integration, Active Directory</li>
<li><strong>Popular Services</strong>: Virtual Machines, Blob Storage, Azure Functions, SQL Database</li>
</ul>
<h3 id="google-cloud-platform-gcp"><a class="header" href="#google-cloud-platform-gcp">Google Cloud Platform (GCP)</a></h3>
<ul>
<li><strong>Founded</strong>: 2008</li>
<li><strong>Third Largest</strong>: Growing rapidly</li>
<li><strong>Strengths</strong>: Data analytics, machine learning, Kubernetes (GKE)</li>
<li><strong>Popular Services</strong>: Compute Engine, Cloud Storage, BigQuery, Cloud Functions</li>
</ul>
<h3 id="other-providers"><a class="header" href="#other-providers">Other Providers</a></h3>
<ul>
<li><strong>IBM Cloud</strong>: Enterprise focus, AI (Watson)</li>
<li><strong>Oracle Cloud</strong>: Database workloads</li>
<li><strong>Alibaba Cloud</strong>: Asia-Pacific region</li>
<li><strong>DigitalOcean</strong>: Simple, developer-friendly</li>
</ul>
<h2 id="common-cloud-services"><a class="header" href="#common-cloud-services">Common Cloud Services</a></h2>
<h3 id="compute-services"><a class="header" href="#compute-services">Compute Services</a></h3>
<pre><code>Service Type          AWS                Azure              GCP
─────────────────────────────────────────────────────────────
Virtual Machines      EC2                Virtual Machines   Compute Engine
Containers            ECS/EKS/Fargate    Container Inst.    GKE/Cloud Run
Serverless           Lambda              Functions          Cloud Functions
Auto Scaling         Auto Scaling        VM Scale Sets      Autoscaler
</code></pre>
<h3 id="storage-services"><a class="header" href="#storage-services">Storage Services</a></h3>
<pre><code>Service Type          AWS                Azure              GCP
─────────────────────────────────────────────────────────────
Object Storage       S3                  Blob Storage       Cloud Storage
Block Storage        EBS                 Disk Storage       Persistent Disk
File Storage         EFS                 Files              Filestore
Archive              Glacier             Archive Storage    Archive Storage
</code></pre>
<h3 id="database-services"><a class="header" href="#database-services">Database Services</a></h3>
<pre><code>Service Type          AWS                Azure              GCP
─────────────────────────────────────────────────────────────
Relational DB        RDS                 SQL Database       Cloud SQL
NoSQL Document       DocumentDB          Cosmos DB          Firestore
NoSQL Key-Value      DynamoDB            Table Storage      Datastore
In-Memory Cache      ElastiCache         Cache for Redis    Memorystore
Data Warehouse       Redshift            Synapse Analytics  BigQuery
</code></pre>
<h3 id="networking-services"><a class="header" href="#networking-services">Networking Services</a></h3>
<pre><code>Service Type          AWS                Azure              GCP
─────────────────────────────────────────────────────────────
Virtual Network      VPC                 Virtual Network    VPC
Load Balancer        ELB/ALB             Load Balancer      Cloud Load Bal.
CDN                  CloudFront          CDN                Cloud CDN
DNS                  Route 53            DNS                Cloud DNS
VPN                  VPN Gateway         VPN Gateway        Cloud VPN
</code></pre>
<h2 id="cloud-architecture-patterns"><a class="header" href="#cloud-architecture-patterns">Cloud Architecture Patterns</a></h2>
<h3 id="1-multi-tier-architecture"><a class="header" href="#1-multi-tier-architecture">1. Multi-Tier Architecture</a></h3>
<pre><code>                         ┌─────────────────┐
                         │  Load Balancer  │
                         └────────┬────────┘
                                  │
              ┌───────────────────┼───────────────────┐
              │                   │                   │
         ┌────▼────┐         ┌────▼────┐       ┌────▼────┐
         │  Web    │         │  Web    │       │  Web    │
         │ Server  │         │ Server  │       │ Server  │
         └────┬────┘         └────┬────┘       └────┬────┘
              │                   │                  │
              └───────────────────┼──────────────────┘
                                  │
                         ┌────────▼────────┐
                         │  App Tier       │
                         │  (Business      │
                         │   Logic)        │
                         └────────┬────────┘
                                  │
                         ┌────────▼────────┐
                         │  Database Tier  │
                         │  (Primary +     │
                         │   Replica)      │
                         └─────────────────┘
</code></pre>
<h3 id="2-microservices-architecture"><a class="header" href="#2-microservices-architecture">2. Microservices Architecture</a></h3>
<pre><code>┌─────────┐    ┌──────────────────────────────────────────┐
│ API     │───▶│           API Gateway                    │
│ Client  │    └──────────┬───────────────────────────────┘
└─────────┘               │
                          │
        ┌─────────────────┼─────────────────┬─────────────┐
        │                 │                 │             │
   ┌────▼─────┐     ┌────▼─────┐     ┌────▼─────┐  ┌────▼─────┐
   │ User     │     │ Product  │     │ Order    │  │ Payment  │
   │ Service  │     │ Service  │     │ Service  │  │ Service  │
   └────┬─────┘     └────┬─────┘     └────┬─────┘  └────┬─────┘
        │                │                │             │
   ┌────▼─────┐     ┌────▼─────┐     ┌────▼─────┐  ┌────▼─────┐
   │ User DB  │     │Product DB│     │ Order DB │  │Payment DB│
   └──────────┘     └──────────┘     └──────────┘  └──────────┘
</code></pre>
<h3 id="3-event-driven-architecture"><a class="header" href="#3-event-driven-architecture">3. Event-Driven Architecture</a></h3>
<pre><code>┌──────────┐      ┌──────────────┐      ┌──────────────┐
│ Producer │─────▶│ Message      │─────▶│  Consumer 1  │
│ Service  │      │ Queue/Topic  │      └──────────────┘
└──────────┘      │ (SQS/SNS/    │      ┌──────────────┐
                  │  EventBridge)│─────▶│  Consumer 2  │
                  └──────────────┘      └──────────────┘
                         │              ┌──────────────┐
                         └─────────────▶│  Consumer 3  │
                                        └──────────────┘
</code></pre>
<h3 id="4-serverless-architecture"><a class="header" href="#4-serverless-architecture">4. Serverless Architecture</a></h3>
<pre><code>┌─────────┐    ┌──────────┐    ┌─────────────┐    ┌──────────┐
│ Client  │───▶│ API      │───▶│  Lambda     │───▶│ Database │
│         │    │ Gateway  │    │  Functions  │    │ (DynamoDB│
└─────────┘    └──────────┘    └─────────────┘    │  /RDS)   │
                                      │            └──────────┘
                                      │
                                      ▼
                               ┌─────────────┐
                               │   Storage   │
                               │    (S3)     │
                               └─────────────┘
</code></pre>
<h2 id="cost-optimization"><a class="header" href="#cost-optimization">Cost Optimization</a></h2>
<h3 id="pricing-models"><a class="header" href="#pricing-models">Pricing Models</a></h3>
<h4 id="1-on-demand"><a class="header" href="#1-on-demand">1. On-Demand</a></h4>
<ul>
<li>Pay for compute capacity by the hour/second</li>
<li>No long-term commitments</li>
<li>Best for: Short-term, unpredictable workloads</li>
</ul>
<h4 id="2-reserved-instances"><a class="header" href="#2-reserved-instances">2. Reserved Instances</a></h4>
<ul>
<li>1 or 3-year commitment</li>
<li>Up to 75% discount vs on-demand</li>
<li>Best for: Steady-state workloads</li>
</ul>
<h4 id="3-spotpreemptible-instances"><a class="header" href="#3-spotpreemptible-instances">3. Spot/Preemptible Instances</a></h4>
<ul>
<li>Up to 90% discount vs on-demand</li>
<li>Can be terminated with short notice</li>
<li>Best for: Batch jobs, fault-tolerant workloads</li>
</ul>
<h4 id="4-savings-plans"><a class="header" href="#4-savings-plans">4. Savings Plans</a></h4>
<ul>
<li>Flexible pricing model</li>
<li>Commitment to consistent usage</li>
<li>Up to 72% discount</li>
</ul>
<h3 id="cost-optimization-strategies"><a class="header" href="#cost-optimization-strategies">Cost Optimization Strategies</a></h3>
<pre><code>┌──────────────────────────────────────────────────────────┐
│ Cost Optimization Best Practices                         │
├──────────────────────────────────────────────────────────┤
│ 1. Right-sizing                                          │
│    └─ Match instance types to actual needs              │
│                                                           │
│ 2. Auto-scaling                                          │
│    └─ Scale resources based on demand                   │
│                                                           │
│ 3. Reserved Instances                                    │
│    └─ Commit to predictable workloads                   │
│                                                           │
│ 4. Spot Instances                                        │
│    └─ Use for fault-tolerant workloads                  │
│                                                           │
│ 5. Storage Lifecycle Policies                           │
│    └─ Move data to cheaper tiers over time              │
│                                                           │
│ 6. Delete Unused Resources                               │
│    └─ Regular audits and cleanup                        │
│                                                           │
│ 7. Use Serverless                                        │
│    └─ Pay only for execution time                       │
│                                                           │
│ 8. Monitor and Alert                                     │
│    └─ Set up cost budgets and alerts                    │
└──────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="monthly-cost-estimation-example"><a class="header" href="#monthly-cost-estimation-example">Monthly Cost Estimation Example</a></h3>
<pre><code>Service              Configuration           Monthly Cost (Approx)
─────────────────────────────────────────────────────────────────
EC2 (t3.medium)      730 hours on-demand    $30
EBS (100 GB)         General Purpose SSD    $10
RDS (db.t3.small)    PostgreSQL, 730 hours  $25
S3 (100 GB)          Standard storage       $2.30
Data Transfer        50 GB outbound         $4.50
                                            ─────────
                     Total:                 ~$72/month
</code></pre>
<h2 id="security-best-practices-1"><a class="header" href="#security-best-practices-1">Security Best Practices</a></h2>
<h3 id="1-identity-and-access-management-iam"><a class="header" href="#1-identity-and-access-management-iam">1. Identity and Access Management (IAM)</a></h3>
<pre><code>Best Practices:
├─ Use principle of least privilege
├─ Enable Multi-Factor Authentication (MFA)
├─ Rotate credentials regularly
├─ Use roles instead of access keys when possible
├─ Implement password policies
└─ Audit permissions regularly
</code></pre>
<h3 id="2-network-security"><a class="header" href="#2-network-security">2. Network Security</a></h3>
<pre><code>┌─────────────────────────────────────────────┐
│              VPC Security                    │
├─────────────────────────────────────────────┤
│                                              │
│  Public Subnet                               │
│  ┌──────────────────────────────────┐       │
│  │  Load Balancer                   │       │
│  │  (Security Group: HTTP/HTTPS)    │       │
│  └──────────────┬───────────────────┘       │
│                 │                            │
│  Private Subnet │                            │
│  ┌──────────────▼───────────────┐           │
│  │  Application Servers         │           │
│  │  (SG: From LB only)          │           │
│  └──────────────┬───────────────┘           │
│                 │                            │
│  Database Subnet│                            │
│  ┌──────────────▼───────────────┐           │
│  │  Database                    │           │
│  │  (SG: From App only)         │           │
│  └──────────────────────────────┘           │
└─────────────────────────────────────────────┘
</code></pre>
<h3 id="3-data-protection"><a class="header" href="#3-data-protection">3. Data Protection</a></h3>
<ul>
<li><strong>Encryption at Rest</strong>: Enable for all storage services</li>
<li><strong>Encryption in Transit</strong>: Use TLS/SSL for all communications</li>
<li><strong>Backup and Recovery</strong>: Regular automated backups</li>
<li><strong>Data Classification</strong>: Tag and classify sensitive data</li>
</ul>
<h3 id="4-monitoring-and-logging"><a class="header" href="#4-monitoring-and-logging">4. Monitoring and Logging</a></h3>
<pre><code>Security Monitoring Stack:
├─ CloudWatch/Azure Monitor - Metrics and logs
├─ CloudTrail/Activity Log - API call auditing
├─ GuardDuty/Defender - Threat detection
├─ Security Hub/Security Center - Compliance
└─ SIEM Integration - Centralized monitoring
</code></pre>
<h3 id="5-compliance"><a class="header" href="#5-compliance">5. Compliance</a></h3>
<p>Common compliance frameworks:</p>
<ul>
<li><strong>GDPR</strong>: European data protection</li>
<li><strong>HIPAA</strong>: Healthcare data</li>
<li><strong>PCI DSS</strong>: Payment card data</li>
<li><strong>SOC 2</strong>: Security and availability</li>
<li><strong>ISO 27001</strong>: Information security</li>
</ul>
<h2 id="choosing-a-cloud-provider"><a class="header" href="#choosing-a-cloud-provider">Choosing a Cloud Provider</a></h2>
<h3 id="decision-matrix"><a class="header" href="#decision-matrix">Decision Matrix</a></h3>
<pre><code>Factor                Weight    AWS    Azure   GCP
─────────────────────────────────────────────────
Existing Ecosystem    High      ★★★★   ★★★★★   ★★★
Services Breadth      High      ★★★★★  ★★★★★   ★★★★
Pricing              Medium     ★★★★   ★★★★    ★★★★★
Documentation        Medium     ★★★★★  ★★★★    ★★★★
Support              Medium     ★★★★   ★★★★★   ★★★
ML/AI Capabilities   Varies     ★★★★   ★★★★    ★★★★★
Kubernetes          Varies     ★★★★   ★★★★    ★★★★★
Global Reach        High       ★★★★★  ★★★★★   ★★★★
</code></pre>
<h3 id="use-case-recommendations"><a class="header" href="#use-case-recommendations">Use Case Recommendations</a></h3>
<p><strong>Choose AWS if</strong>:</p>
<ul>
<li>Need broadest service selection</li>
<li>Want mature ecosystem and tooling</li>
<li>Building greenfield applications</li>
<li>Need strong serverless capabilities</li>
</ul>
<p><strong>Choose Azure if</strong>:</p>
<ul>
<li>Heavy Microsoft/Windows workloads</li>
<li>Need hybrid cloud capabilities</li>
<li>Enterprise Active Directory integration</li>
<li>Existing Microsoft licensing</li>
</ul>
<p><strong>Choose GCP if</strong>:</p>
<ul>
<li>Focus on data analytics and ML</li>
<li>Need best-in-class Kubernetes</li>
<li>Want innovative technologies</li>
<li>Prioritize BigQuery for analytics</li>
</ul>
<p><strong>Use Multi-Cloud if</strong>:</p>
<ul>
<li>Need to avoid vendor lock-in</li>
<li>Want best-of-breed services</li>
<li>Have compliance requirements</li>
<li>Can manage the complexity</li>
</ul>
<h2 id="getting-started-1"><a class="header" href="#getting-started-1">Getting Started</a></h2>
<h3 id="learning-path-1"><a class="header" href="#learning-path-1">Learning Path</a></h3>
<pre><code>1. Fundamentals (1-2 weeks)
   ├─ Cloud concepts and terminology
   ├─ Choose a primary provider
   └─ Complete free tier tutorial

2. Core Services (2-4 weeks)
   ├─ Compute (EC2/VMs)
   ├─ Storage (S3/Blob)
   ├─ Databases (RDS/SQL)
   └─ Networking (VPC)

3. Advanced Topics (4-8 weeks)
   ├─ Security and IAM
   ├─ Monitoring and logging
   ├─ CI/CD pipelines
   └─ Infrastructure as Code

4. Specialization (Ongoing)
   ├─ Serverless
   ├─ Containers and Kubernetes
   ├─ ML/AI services
   └─ Cost optimization
</code></pre>
<h3 id="recommended-certifications"><a class="header" href="#recommended-certifications">Recommended Certifications</a></h3>
<p><strong>AWS</strong>:</p>
<ul>
<li>AWS Certified Solutions Architect - Associate</li>
<li>AWS Certified Developer - Associate</li>
<li>AWS Certified SysOps Administrator</li>
</ul>
<p><strong>Azure</strong>:</p>
<ul>
<li>Azure Fundamentals (AZ-900)</li>
<li>Azure Administrator (AZ-104)</li>
<li>Azure Solutions Architect (AZ-305)</li>
</ul>
<p><strong>GCP</strong>:</p>
<ul>
<li>Google Cloud Digital Leader</li>
<li>Associate Cloud Engineer</li>
<li>Professional Cloud Architect</li>
</ul>
<h2 id="resources-20"><a class="header" href="#resources-20">Resources</a></h2>
<h3 id="free-tiers"><a class="header" href="#free-tiers">Free Tiers</a></h3>
<ul>
<li><strong>AWS</strong>: 12 months free tier + always free services</li>
<li><strong>Azure</strong>: $200 credit for 30 days + always free services</li>
<li><strong>GCP</strong>: $300 credit for 90 days + always free services</li>
</ul>
<h3 id="documentation-3"><a class="header" href="#documentation-3">Documentation</a></h3>
<ul>
<li>AWS: https://docs.aws.amazon.com</li>
<li>Azure: https://docs.microsoft.com/azure</li>
<li>GCP: https://cloud.google.com/docs</li>
</ul>
<h3 id="community-3"><a class="header" href="#community-3">Community</a></h3>
<ul>
<li>AWS: r/aws, AWS Forums</li>
<li>Azure: r/azure, Microsoft Tech Community</li>
<li>GCP: r/googlecloud, Google Cloud Community</li>
</ul>
<h3 id="tools-5"><a class="header" href="#tools-5">Tools</a></h3>
<ul>
<li><strong>Terraform</strong>: Multi-cloud IaC</li>
<li><strong>Ansible</strong>: Configuration management</li>
<li><strong>Kubernetes</strong>: Container orchestration</li>
<li><strong>Prometheus/Grafana</strong>: Monitoring</li>
<li><strong>Cost Management</strong>: CloudHealth, CloudCheckr</li>
</ul>
<hr />
<p><strong>Next Steps</strong>: Choose a cloud provider and explore provider-specific documentation:</p>
<ul>
<li><a href="cloud/./aws.html">AWS Documentation</a></li>
<li><a href="cloud/./azure.html">Azure Documentation</a></li>
<li><a href="cloud/./google_cloud.html">Google Cloud Documentation</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup"><a class="header" href="#setup">Setup</a></h1>
<h2 id="setup-gpu-instances"><a class="header" href="#setup-gpu-instances">Setup GPU instances</a></h2>
<p>Make sure the hardisk size is at least 30GB</p>
<pre><code class="language-bash">curl https://raw.githubusercontent.com/GoogleCloudPlatform/compute-gpu-installation/main/linux/install_gpu_driver.py --output install_gpu_driver.py 

#if required Change driver version in the py file from (DRIVER_VERSION = "525.125.06") to	550.54.15
sed -i 's/525.125.06/550.54.15/' install_gpu_driver.py

#run the script
sudo apt install python3-venv python3-dev
sudo python3 install_gpu_driver.py

#verify the installation
nvidia-smi

#install pytorch
pip3 install torch torchvision torchaudio

#install cuda toolkit
sudo apt install nvidia-cuda-toolkit
nvcc --version
</code></pre>
<p>Swap file</p>
<pre><code class="language-bash">sudo fallocate -l 32G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="google-cloud"><a class="header" href="#google-cloud">Google Cloud</a></h1>
<p>Image storage (per GB / month) $0.05</p>
<ul>
<li>Custom image storage is based on Archive Size (which will be less).
<ul>
<li>Note: 10G is not enough to install.</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="amazon-web-services-aws"><a class="header" href="#amazon-web-services-aws">Amazon Web Services (AWS)</a></h1>
<h2 id="table-of-contents-22"><a class="header" href="#table-of-contents-22">Table of Contents</a></h2>
<ul>
<li><a href="cloud/aws.html#introduction">Introduction</a></li>
<li><a href="cloud/aws.html#aws-global-infrastructure">AWS Global Infrastructure</a></li>
<li><a href="cloud/aws.html#getting-started">Getting Started</a></li>
<li><a href="cloud/aws.html#core-compute-services">Core Compute Services</a></li>
<li><a href="cloud/aws.html#storage-services">Storage Services</a></li>
<li><a href="cloud/aws.html#database-services">Database Services</a></li>
<li><a href="cloud/aws.html#networking-services">Networking Services</a></li>
<li><a href="cloud/aws.html#serverless-services">Serverless Services</a></li>
<li><a href="cloud/aws.html#container-services">Container Services</a></li>
<li><a href="cloud/aws.html#security-services">Security Services</a></li>
<li><a href="cloud/aws.html#monitoring-and-management">Monitoring and Management</a></li>
<li><a href="cloud/aws.html#devops-and-cicd">DevOps and CI/CD</a></li>
<li><a href="cloud/aws.html#machine-learning-services">Machine Learning Services</a></li>
<li><a href="cloud/aws.html#architecture-examples">Architecture Examples</a></li>
<li><a href="cloud/aws.html#cost-optimization">Cost Optimization</a></li>
<li><a href="cloud/aws.html#best-practices">Best Practices</a></li>
<li><a href="cloud/aws.html#cli-reference">CLI Reference</a></li>
</ul>
<h2 id="introduction-9"><a class="header" href="#introduction-9">Introduction</a></h2>
<p>Amazon Web Services (AWS) is the world's most comprehensive and broadly adopted cloud platform, offering over 200 fully featured services from data centers globally.</p>
<h3 id="key-advantages"><a class="header" href="#key-advantages">Key Advantages</a></h3>
<ul>
<li><strong>Market Leader</strong>: Largest market share (~32%)</li>
<li><strong>Mature Ecosystem</strong>: Launched in 2006</li>
<li><strong>Service Breadth</strong>: 200+ services</li>
<li><strong>Global Reach</strong>: 30+ regions, 90+ availability zones</li>
<li><strong>Innovation</strong>: Rapid release of new features</li>
<li><strong>Community</strong>: Largest developer community</li>
</ul>
<h3 id="aws-account-structure"><a class="header" href="#aws-account-structure">AWS Account Structure</a></h3>
<pre><code>┌─────────────────────────────────────────────┐
│         AWS Organization (Root)              │
├─────────────────────────────────────────────┤
│                                              │
│  ┌──────────────┐    ┌──────────────┐      │
│  │  Production  │    │  Development │      │
│  │  OU          │    │  OU          │      │
│  ├──────────────┤    ├──────────────┤      │
│  │ Account 1    │    │ Account 3    │      │
│  │ Account 2    │    │ Account 4    │      │
│  └──────────────┘    └──────────────┘      │
│                                              │
│  ┌──────────────┐    ┌──────────────┐      │
│  │  Security    │    │  Sandbox     │      │
│  │  OU          │    │  OU          │      │
│  └──────────────┘    └──────────────┘      │
└─────────────────────────────────────────────┘
</code></pre>
<h2 id="aws-global-infrastructure"><a class="header" href="#aws-global-infrastructure">AWS Global Infrastructure</a></h2>
<h3 id="hierarchy"><a class="header" href="#hierarchy">Hierarchy</a></h3>
<pre><code>Region
  └─ Availability Zones (AZs)
      └─ Data Centers
          └─ Edge Locations (CloudFront CDN)
</code></pre>
<h3 id="key-concepts-16"><a class="header" href="#key-concepts-16">Key Concepts</a></h3>
<p><strong>Region</strong>: Geographic area with multiple AZs</p>
<ul>
<li>Examples: us-east-1 (Virginia), eu-west-1 (Ireland)</li>
<li>Completely independent</li>
<li>Data doesn't leave region unless explicitly configured</li>
</ul>
<p><strong>Availability Zone</strong>: Isolated data center(s) within a region</p>
<ul>
<li>2-6 AZs per region</li>
<li>Low-latency connections between AZs</li>
<li>Physical separation for fault tolerance</li>
</ul>
<p><strong>Edge Location</strong>: CDN endpoint for CloudFront</p>
<ul>
<li>400+ edge locations globally</li>
<li>Caches content closer to users</li>
</ul>
<h3 id="region-selection-criteria"><a class="header" href="#region-selection-criteria">Region Selection Criteria</a></h3>
<pre><code>Factor              Consideration
──────────────────────────────────────────────
Latency             Distance to users
Compliance          Data residency laws
Services            Not all services in all regions
Cost                Pricing varies by region
</code></pre>
<h2 id="getting-started-2"><a class="header" href="#getting-started-2">Getting Started</a></h2>
<h3 id="aws-cli-installation"><a class="header" href="#aws-cli-installation">AWS CLI Installation</a></h3>
<pre><code class="language-bash"># Install AWS CLI v2 (Linux/macOS)
curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip"
unzip awscliv2.zip
sudo ./aws/install

# Verify installation
aws --version

# Configure AWS CLI
aws configure
# Enter:
# - AWS Access Key ID
# - AWS Secret Access Key
# - Default region (e.g., us-east-1)
# - Default output format (json/yaml/text/table)

# Alternative: Use environment variables
export AWS_ACCESS_KEY_ID="your-access-key"
export AWS_SECRET_ACCESS_KEY="your-secret-key"
export AWS_DEFAULT_REGION="us-east-1"

# Or use AWS profiles
aws configure --profile production
aws s3 ls --profile production
</code></pre>
<h3 id="aws-cli-configuration-files"><a class="header" href="#aws-cli-configuration-files">AWS CLI Configuration Files</a></h3>
<pre><code class="language-bash"># View configuration
cat ~/.aws/config
# [default]
# region = us-east-1
# output = json
#
# [profile production]
# region = us-west-2
# output = yaml

cat ~/.aws/credentials
# [default]
# aws_access_key_id = AKIAIOSFODNN7EXAMPLE
# aws_secret_access_key = wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
#
# [production]
# aws_access_key_id = AKIAI44QH8DHBEXAMPLE
# aws_secret_access_key = je7MtGbClwBF/2Zp9Utk/h3yCo8nvbEXAMPLEKEY
</code></pre>
<h3 id="basic-aws-cli-commands"><a class="header" href="#basic-aws-cli-commands">Basic AWS CLI Commands</a></h3>
<pre><code class="language-bash"># Get caller identity
aws sts get-caller-identity

# List all regions
aws ec2 describe-regions --output table

# List available services
aws help

# Get help for specific service
aws ec2 help
aws s3 help
</code></pre>
<h2 id="core-compute-services"><a class="header" href="#core-compute-services">Core Compute Services</a></h2>
<h3 id="amazon-ec2-elastic-compute-cloud"><a class="header" href="#amazon-ec2-elastic-compute-cloud">Amazon EC2 (Elastic Compute Cloud)</a></h3>
<p>Virtual servers in the cloud.</p>
<h4 id="instance-types"><a class="header" href="#instance-types">Instance Types</a></h4>
<pre><code>Category        Type         vCPU    Memory    Use Case
──────────────────────────────────────────────────────────────
General         t3.micro     2       1 GB      Development
Purpose         t3.medium    2       4 GB      Web servers
                m5.large     2       8 GB      Applications

Compute         c5.large     2       4 GB      Batch processing
Optimized       c5.xlarge    4       8 GB      High-performance

Memory          r5.large     2       16 GB     Databases
Optimized       r5.xlarge    4       32 GB     Caching

Storage         i3.large     2       15.25 GB  NoSQL databases
Optimized       d2.xlarge    4       30.5 GB   Data warehousing

GPU             p3.2xlarge   8       61 GB     ML training
Instances       g4dn.xlarge  4       16 GB     ML inference
</code></pre>
<h4 id="ec2-pricing-models"><a class="header" href="#ec2-pricing-models">EC2 Pricing Models</a></h4>
<pre><code>Model               Discount    Commitment    Use Case
─────────────────────────────────────────────────────────────
On-Demand           Baseline    None          Unpredictable
Reserved Instance   Up to 75%   1-3 years     Steady state
Spot Instance       Up to 90%   None          Fault-tolerant
Savings Plan        Up to 72%   1-3 years     Flexible
</code></pre>
<h4 id="ec2-cli-examples"><a class="header" href="#ec2-cli-examples">EC2 CLI Examples</a></h4>
<pre><code class="language-bash"># List all instances
aws ec2 describe-instances

# List instances with specific state
aws ec2 describe-instances \
  --filters "Name=instance-state-name,Values=running" \
  --query 'Reservations[].Instances[].[InstanceId,InstanceType,State.Name,PublicIpAddress]' \
  --output table

# Launch an instance
aws ec2 run-instances \
  --image-id ami-0c55b159cbfafe1f0 \
  --instance-type t3.micro \
  --key-name my-key-pair \
  --security-group-ids sg-0123456789abcdef0 \
  --subnet-id subnet-0123456789abcdef0 \
  --tag-specifications 'ResourceType=instance,Tags=[{Key=Name,Value=MyWebServer}]'

# Stop an instance
aws ec2 stop-instances --instance-ids i-1234567890abcdef0

# Start an instance
aws ec2 start-instances --instance-ids i-1234567890abcdef0

# Terminate an instance
aws ec2 terminate-instances --instance-ids i-1234567890abcdef0

# Create AMI from instance
aws ec2 create-image \
  --instance-id i-1234567890abcdef0 \
  --name "MyWebServer-Backup-$(date +%Y%m%d)" \
  --description "Backup of MyWebServer"

# List AMIs
aws ec2 describe-images --owners self

# Get instance metadata (from within instance)
curl http://169.254.169.254/latest/meta-data/
curl http://169.254.169.254/latest/meta-data/instance-id
curl http://169.254.169.254/latest/meta-data/public-ipv4
</code></pre>
<h4 id="user-data-script-example"><a class="header" href="#user-data-script-example">User Data Script Example</a></h4>
<pre><code class="language-bash">#!/bin/bash
# User data script for EC2 instance initialization

# Update system
yum update -y

# Install Apache web server
yum install -y httpd

# Start Apache
systemctl start httpd
systemctl enable httpd

# Create simple web page
echo "&lt;h1&gt;Hello from EC2!&lt;/h1&gt;" &gt; /var/www/html/index.html

# Install CloudWatch agent
wget https://s3.amazonaws.com/amazoncloudwatch-agent/amazon_linux/amd64/latest/amazon-cloudwatch-agent.rpm
rpm -U ./amazon-cloudwatch-agent.rpm
</code></pre>
<h3 id="auto-scaling"><a class="header" href="#auto-scaling">Auto Scaling</a></h3>
<p>Automatically adjust capacity to maintain performance and costs.</p>
<h4 id="auto-scaling-architecture"><a class="header" href="#auto-scaling-architecture">Auto Scaling Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────────────┐
│              Application Load Balancer              │
└──────────────────────┬──────────────────────────────┘
                       │
    ┌──────────────────┼──────────────────┐
    │                  │                  │
┌───▼────┐        ┌───▼────┐        ┌───▼────┐
│  EC2   │        │  EC2   │        │  EC2   │
│ (Min)  │        │ (Curr) │        │ (Max)  │
└────────┘        └────────┘        └────────┘
    │                  │                  │
    └──────────────────┼──────────────────┘
                       │
            ┌──────────▼──────────┐
            │  Auto Scaling Group │
            │                     │
            │  Min: 2             │
            │  Desired: 3         │
            │  Max: 10            │
            │                     │
            │  Scale Up: CPU&gt;70%  │
            │  Scale Down: CPU&lt;30%│
            └─────────────────────┘
</code></pre>
<h4 id="auto-scaling-cli-examples"><a class="header" href="#auto-scaling-cli-examples">Auto Scaling CLI Examples</a></h4>
<pre><code class="language-bash"># Create launch template
aws ec2 create-launch-template \
  --launch-template-name my-template \
  --version-description "Initial version" \
  --launch-template-data '{
    "ImageId": "ami-0c55b159cbfafe1f0",
    "InstanceType": "t3.micro",
    "KeyName": "my-key-pair",
    "SecurityGroupIds": ["sg-0123456789abcdef0"]
  }'

# Create Auto Scaling group
aws autoscaling create-auto-scaling-group \
  --auto-scaling-group-name my-asg \
  --launch-template "LaunchTemplateName=my-template,Version=1" \
  --min-size 2 \
  --max-size 10 \
  --desired-capacity 3 \
  --vpc-zone-identifier "subnet-12345,subnet-67890" \
  --target-group-arns arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-targets/73e2d6bc24d8a067 \
  --health-check-type ELB \
  --health-check-grace-period 300

# Create scaling policy (target tracking)
aws autoscaling put-scaling-policy \
  --auto-scaling-group-name my-asg \
  --policy-name cpu-target-tracking \
  --policy-type TargetTrackingScaling \
  --target-tracking-configuration '{
    "PredefinedMetricSpecification": {
      "PredefinedMetricType": "ASGAverageCPUUtilization"
    },
    "TargetValue": 70.0
  }'

# Describe Auto Scaling groups
aws autoscaling describe-auto-scaling-groups \
  --auto-scaling-group-names my-asg

# Update Auto Scaling group capacity
aws autoscaling set-desired-capacity \
  --auto-scaling-group-name my-asg \
  --desired-capacity 5

# Delete Auto Scaling group
aws autoscaling delete-auto-scaling-group \
  --auto-scaling-group-name my-asg \
  --force-delete
</code></pre>
<h3 id="aws-lambda-serverless"><a class="header" href="#aws-lambda-serverless">AWS Lambda (Serverless)</a></h3>
<p>Run code without provisioning servers. Covered in detail in <a href="cloud/aws.html#serverless-services">Serverless Services</a>.</p>
<h2 id="storage-services-1"><a class="header" href="#storage-services-1">Storage Services</a></h2>
<h3 id="amazon-s3-simple-storage-service"><a class="header" href="#amazon-s3-simple-storage-service">Amazon S3 (Simple Storage Service)</a></h3>
<p>Object storage service with 99.999999999% (11 9's) durability.</p>
<h4 id="s3-storage-classes"><a class="header" href="#s3-storage-classes">S3 Storage Classes</a></h4>
<pre><code>Class                   Use Case                    Retrieval      Cost
────────────────────────────────────────────────────────────────────────
Standard                Frequently accessed         Instant        $$$
Intelligent-Tiering     Unknown/changing patterns   Instant        $$+
Standard-IA             Infrequently accessed       Instant        $$
One Zone-IA             Non-critical, infrequent    Instant        $
Glacier Instant         Archive, instant retrieval  Instant        $
Glacier Flexible        Archive, min-hour retrieval Minutes-Hours  ¢¢
Glacier Deep Archive    Long-term archive (7-10yr)  12 hours       ¢
</code></pre>
<h4 id="s3-architecture"><a class="header" href="#s3-architecture">S3 Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────┐
│  Bucket: my-application-bucket              │
│  Region: us-east-1                          │
├─────────────────────────────────────────────┤
│                                              │
│  /images/                                   │
│    ├─ logo.png                              │
│    └─ banner.jpg                            │
│                                              │
│  /documents/                                │
│    ├─ report.pdf                            │
│    └─ invoice.xlsx                          │
│                                              │
│  /backups/                                  │
│    └─ database-backup-2024-01-01.sql       │
│                                              │
│  Features:                                  │
│  ├─ Versioning: Enabled                    │
│  ├─ Encryption: AES-256                    │
│  ├─ Lifecycle: Move to Glacier after 90d   │
│  ├─ Replication: Cross-region enabled      │
│  └─ Access Logs: Enabled                   │
└─────────────────────────────────────────────┘
</code></pre>
<h4 id="s3-cli-examples"><a class="header" href="#s3-cli-examples">S3 CLI Examples</a></h4>
<pre><code class="language-bash"># Create bucket
aws s3 mb s3://my-unique-bucket-name-12345

# List buckets
aws s3 ls

# Upload file
aws s3 cp local-file.txt s3://my-bucket/
aws s3 cp local-file.txt s3://my-bucket/folder/

# Upload directory recursively
aws s3 cp ./my-directory s3://my-bucket/path/ --recursive

# Download file
aws s3 cp s3://my-bucket/file.txt ./

# Sync local directory with S3 (like rsync)
aws s3 sync ./local-dir s3://my-bucket/remote-dir/
aws s3 sync s3://my-bucket/remote-dir/ ./local-dir

# List objects in bucket
aws s3 ls s3://my-bucket/
aws s3 ls s3://my-bucket/folder/ --recursive

# Delete object
aws s3 rm s3://my-bucket/file.txt

# Delete all objects in folder
aws s3 rm s3://my-bucket/folder/ --recursive

# Make object public
aws s3api put-object-acl \
  --bucket my-bucket \
  --key file.txt \
  --acl public-read

# Generate presigned URL (temporary access)
aws s3 presign s3://my-bucket/private-file.pdf --expires-in 3600

# Enable versioning
aws s3api put-bucket-versioning \
  --bucket my-bucket \
  --versioning-configuration Status=Enabled

# Enable server-side encryption
aws s3api put-bucket-encryption \
  --bucket my-bucket \
  --server-side-encryption-configuration '{
    "Rules": [{
      "ApplyServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
      }
    }]
  }'

# Set lifecycle policy
aws s3api put-bucket-lifecycle-configuration \
  --bucket my-bucket \
  --lifecycle-configuration file://lifecycle.json
</code></pre>
<h4 id="s3-lifecycle-policy-example"><a class="header" href="#s3-lifecycle-policy-example">S3 Lifecycle Policy Example</a></h4>
<pre><code class="language-json">{
  "Rules": [
    {
      "Id": "MoveOldFilesToGlacier",
      "Status": "Enabled",
      "Filter": {
        "Prefix": "logs/"
      },
      "Transitions": [
        {
          "Days": 30,
          "StorageClass": "STANDARD_IA"
        },
        {
          "Days": 90,
          "StorageClass": "GLACIER"
        }
      ],
      "Expiration": {
        "Days": 365
      }
    },
    {
      "Id": "DeleteOldVersions",
      "Status": "Enabled",
      "NoncurrentVersionExpiration": {
        "NoncurrentDays": 30
      }
    }
  ]
}
</code></pre>
<h4 id="s3-bucket-policy-example"><a class="header" href="#s3-bucket-policy-example">S3 Bucket Policy Example</a></h4>
<pre><code class="language-json">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "PublicReadGetObject",
      "Effect": "Allow",
      "Principal": "*",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::my-bucket/public/*"
    },
    {
      "Sid": "DenyInsecureTransport",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::my-bucket",
        "arn:aws:s3:::my-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    }
  ]
}
</code></pre>
<h4 id="s3-sdk-example-pythonboto3"><a class="header" href="#s3-sdk-example-pythonboto3">S3 SDK Example (Python/Boto3)</a></h4>
<pre><code class="language-python">import boto3
from botocore.exceptions import ClientError

# Create S3 client
s3 = boto3.client('s3')

# Upload file
def upload_file(file_name, bucket, object_name=None):
    if object_name is None:
        object_name = file_name
    
    try:
        s3.upload_file(file_name, bucket, object_name)
        print(f"Uploaded {file_name} to {bucket}/{object_name}")
    except ClientError as e:
        print(f"Error: {e}")
        return False
    return True

# Download file
def download_file(bucket, object_name, file_name):
    try:
        s3.download_file(bucket, object_name, file_name)
        print(f"Downloaded {bucket}/{object_name} to {file_name}")
    except ClientError as e:
        print(f"Error: {e}")
        return False
    return True

# List objects
def list_objects(bucket, prefix=''):
    try:
        response = s3.list_objects_v2(Bucket=bucket, Prefix=prefix)
        if 'Contents' in response:
            for obj in response['Contents']:
                print(f"{obj['Key']}: {obj['Size']} bytes")
    except ClientError as e:
        print(f"Error: {e}")

# Generate presigned URL
def create_presigned_url(bucket, object_name, expiration=3600):
    try:
        url = s3.generate_presigned_url(
            'get_object',
            Params={'Bucket': bucket, 'Key': object_name},
            ExpiresIn=expiration
        )
        return url
    except ClientError as e:
        print(f"Error: {e}")
        return None

# Usage
upload_file('local-file.txt', 'my-bucket', 'uploads/file.txt')
download_file('my-bucket', 'uploads/file.txt', 'downloaded-file.txt')
list_objects('my-bucket', 'uploads/')
url = create_presigned_url('my-bucket', 'uploads/file.txt')
print(f"Presigned URL: {url}")
</code></pre>
<h3 id="amazon-ebs-elastic-block-store"><a class="header" href="#amazon-ebs-elastic-block-store">Amazon EBS (Elastic Block Store)</a></h3>
<p>Block storage for EC2 instances.</p>
<h4 id="ebs-volume-types"><a class="header" href="#ebs-volume-types">EBS Volume Types</a></h4>
<pre><code>Type         IOPS          Throughput    Use Case              Cost
────────────────────────────────────────────────────────────────────
gp3          3,000-16,000  125-1000 MB/s General purpose       $$
gp2          3,000-16,000  Baseline      General purpose       $$
io2          64,000+       1,000 MB/s    Mission-critical DB   $$$$
io1          32,000+       500 MB/s      High-performance DB   $$$
st1          500           500 MB/s      Big data, logs        $
sc1          250           250 MB/s      Cold data             ¢
</code></pre>
<h4 id="ebs-cli-examples"><a class="header" href="#ebs-cli-examples">EBS CLI Examples</a></h4>
<pre><code class="language-bash"># Create EBS volume
aws ec2 create-volume \
  --volume-type gp3 \
  --size 100 \
  --availability-zone us-east-1a \
  --tag-specifications 'ResourceType=volume,Tags=[{Key=Name,Value=MyVolume}]'

# List volumes
aws ec2 describe-volumes

# Attach volume to instance
aws ec2 attach-volume \
  --volume-id vol-0123456789abcdef0 \
  --instance-id i-1234567890abcdef0 \
  --device /dev/sdf

# Detach volume
aws ec2 detach-volume --volume-id vol-0123456789abcdef0

# Create snapshot
aws ec2 create-snapshot \
  --volume-id vol-0123456789abcdef0 \
  --description "Backup of MyVolume"

# List snapshots
aws ec2 describe-snapshots --owner-ids self

# Create volume from snapshot
aws ec2 create-volume \
  --snapshot-id snap-0123456789abcdef0 \
  --availability-zone us-east-1a

# Delete snapshot
aws ec2 delete-snapshot --snapshot-id snap-0123456789abcdef0

# Delete volume
aws ec2 delete-volume --volume-id vol-0123456789abcdef0
</code></pre>
<h3 id="amazon-efs-elastic-file-system"><a class="header" href="#amazon-efs-elastic-file-system">Amazon EFS (Elastic File System)</a></h3>
<p>Managed NFS file system for EC2.</p>
<pre><code class="language-bash"># Create EFS file system
aws efs create-file-system \
  --performance-mode generalPurpose \
  --throughput-mode bursting \
  --encrypted \
  --tags Key=Name,Value=MyEFS

# Create mount target
aws efs create-mount-target \
  --file-system-id fs-0123456789abcdef0 \
  --subnet-id subnet-0123456789abcdef0 \
  --security-groups sg-0123456789abcdef0

# Mount EFS on EC2 instance
sudo mkdir /mnt/efs
sudo mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2 \
  fs-0123456789abcdef0.efs.us-east-1.amazonaws.com:/ /mnt/efs

# Add to /etc/fstab for persistent mount
echo "fs-0123456789abcdef0.efs.us-east-1.amazonaws.com:/ /mnt/efs nfs4 defaults,_netdev 0 0" | sudo tee -a /etc/fstab
</code></pre>
<h2 id="database-services-1"><a class="header" href="#database-services-1">Database Services</a></h2>
<h3 id="amazon-rds-relational-database-service"><a class="header" href="#amazon-rds-relational-database-service">Amazon RDS (Relational Database Service)</a></h3>
<p>Managed relational databases.</p>
<h4 id="supported-engines"><a class="header" href="#supported-engines">Supported Engines</a></h4>
<pre><code>Engine          Versions        Use Case
───────────────────────────────────────────────────────
MySQL           5.7, 8.0        Web applications
PostgreSQL      11-15           Advanced features
MariaDB         10.3-10.6       MySQL alternative
Oracle          12c, 19c        Enterprise apps
SQL Server      2016-2022       Microsoft stack
Amazon Aurora   MySQL/PG compat High performance
</code></pre>
<h4 id="rds-architecture-multi-az"><a class="header" href="#rds-architecture-multi-az">RDS Architecture (Multi-AZ)</a></h4>
<pre><code>┌─────────────────────────────────────────────────┐
│             Application Servers                  │
└───────────────────┬─────────────────────────────┘
                    │
         ┌──────────▼──────────┐
         │   RDS Endpoint      │
         │   (DNS CNAME)       │
         └──────────┬──────────┘
                    │
    ┌───────────────┼───────────────┐
    │               │               │
┌───▼────┐    Sync Repl    ┌───────▼─────┐
│Primary │◄──────────────►│  Standby    │
│Instance│                 │  Instance   │
│(AZ-A)  │                 │  (AZ-B)     │
└────────┘                 └─────────────┘
    │                            │
    │      Automatic Failover    │
    └────────────────────────────┘
</code></pre>
<h4 id="rds-cli-examples"><a class="header" href="#rds-cli-examples">RDS CLI Examples</a></h4>
<pre><code class="language-bash"># Create RDS instance
aws rds create-db-instance \
  --db-instance-identifier mydb \
  --db-instance-class db.t3.micro \
  --engine postgres \
  --engine-version 14.7 \
  --master-username admin \
  --master-user-password MySecurePassword123 \
  --allocated-storage 20 \
  --storage-type gp3 \
  --vpc-security-group-ids sg-0123456789abcdef0 \
  --db-subnet-group-name my-db-subnet-group \
  --backup-retention-period 7 \
  --preferred-backup-window "03:00-04:00" \
  --preferred-maintenance-window "sun:04:00-sun:05:00" \
  --multi-az \
  --storage-encrypted \
  --enable-cloudwatch-logs-exports '["postgresql"]'

# List RDS instances
aws rds describe-db-instances

# Get specific instance details
aws rds describe-db-instances \
  --db-instance-identifier mydb \
  --query 'DBInstances[0].[DBInstanceIdentifier,DBInstanceStatus,Endpoint.Address,Endpoint.Port]'

# Create read replica
aws rds create-db-instance-read-replica \
  --db-instance-identifier mydb-replica \
  --source-db-instance-identifier mydb \
  --db-instance-class db.t3.micro \
  --availability-zone us-east-1b

# Create snapshot
aws rds create-db-snapshot \
  --db-instance-identifier mydb \
  --db-snapshot-identifier mydb-snapshot-$(date +%Y%m%d)

# Restore from snapshot
aws rds restore-db-instance-from-db-snapshot \
  --db-instance-identifier mydb-restored \
  --db-snapshot-identifier mydb-snapshot-20240101

# Modify instance
aws rds modify-db-instance \
  --db-instance-identifier mydb \
  --db-instance-class db.t3.small \
  --apply-immediately

# Stop instance (up to 7 days)
aws rds stop-db-instance --db-instance-identifier mydb

# Start instance
aws rds start-db-instance --db-instance-identifier mydb

# Delete instance
aws rds delete-db-instance \
  --db-instance-identifier mydb \
  --skip-final-snapshot
  # Or with final snapshot:
  # --final-db-snapshot-identifier mydb-final-snapshot

# Connect to RDS
psql -h mydb.c9akciq32.us-east-1.rds.amazonaws.com -U admin -d postgres
mysql -h mydb.c9akciq32.us-east-1.rds.amazonaws.com -u admin -p
</code></pre>
<h3 id="amazon-dynamodb"><a class="header" href="#amazon-dynamodb">Amazon DynamoDB</a></h3>
<p>Fully managed NoSQL database.</p>
<h4 id="dynamodb-concepts"><a class="header" href="#dynamodb-concepts">DynamoDB Concepts</a></h4>
<pre><code>Table: Users
┌──────────────┬─────────────┬───────────┬─────────┬──────────┐
│ UserId (PK)  │ Email (SK)  │ Name      │ Age     │ Status   │
├──────────────┼─────────────┼───────────┼─────────┼──────────┤
│ user-001     │ a@ex.com    │ Alice     │ 30      │ active   │
│ user-002     │ b@ex.com    │ Bob       │ 25      │ active   │
│ user-003     │ c@ex.com    │ Charlie   │ 35      │ inactive │
└──────────────┴─────────────┴───────────┴─────────┴──────────┘

PK = Partition Key (required, determines data distribution)
SK = Sort Key (optional, enables range queries)
</code></pre>
<h4 id="dynamodb-capacity-modes"><a class="header" href="#dynamodb-capacity-modes">DynamoDB Capacity Modes</a></h4>
<pre><code>Mode          Billing      Use Case                Cost
─────────────────────────────────────────────────────────────
On-Demand     Per request  Unpredictable traffic   $$$$
Provisioned   Per hour     Predictable traffic     $$-$$$
  + Auto      Per hour     Variable patterns       $$-$$$
    Scaling
</code></pre>
<h4 id="dynamodb-cli-examples"><a class="header" href="#dynamodb-cli-examples">DynamoDB CLI Examples</a></h4>
<pre><code class="language-bash"># Create table
aws dynamodb create-table \
  --table-name Users \
  --attribute-definitions \
    AttributeName=UserId,AttributeType=S \
    AttributeName=Email,AttributeType=S \
  --key-schema \
    AttributeName=UserId,KeyType=HASH \
    AttributeName=Email,KeyType=RANGE \
  --billing-mode PAY_PER_REQUEST \
  --tags Key=Environment,Value=Production

# List tables
aws dynamodb list-tables

# Describe table
aws dynamodb describe-table --table-name Users

# Put item
aws dynamodb put-item \
  --table-name Users \
  --item '{
    "UserId": {"S": "user-001"},
    "Email": {"S": "alice@example.com"},
    "Name": {"S": "Alice"},
    "Age": {"N": "30"},
    "Status": {"S": "active"}
  }'

# Get item
aws dynamodb get-item \
  --table-name Users \
  --key '{
    "UserId": {"S": "user-001"},
    "Email": {"S": "alice@example.com"}
  }'

# Query items (by partition key)
aws dynamodb query \
  --table-name Users \
  --key-condition-expression "UserId = :userId" \
  --expression-attribute-values '{
    ":userId": {"S": "user-001"}
  }'

# Scan table (read all items - expensive!)
aws dynamodb scan --table-name Users

# Update item
aws dynamodb update-item \
  --table-name Users \
  --key '{
    "UserId": {"S": "user-001"},
    "Email": {"S": "alice@example.com"}
  }' \
  --update-expression "SET #status = :newStatus, Age = Age + :inc" \
  --expression-attribute-names '{"#status": "Status"}' \
  --expression-attribute-values '{
    ":newStatus": {"S": "inactive"},
    ":inc": {"N": "1"}
  }'

# Delete item
aws dynamodb delete-item \
  --table-name Users \
  --key '{
    "UserId": {"S": "user-001"},
    "Email": {"S": "alice@example.com"}
  }'

# Batch write
aws dynamodb batch-write-item --request-items file://batch-write.json

# Create global secondary index
aws dynamodb update-table \
  --table-name Users \
  --attribute-definitions AttributeName=Status,AttributeType=S \
  --global-secondary-index-updates '[{
    "Create": {
      "IndexName": "StatusIndex",
      "KeySchema": [{"AttributeName": "Status", "KeyType": "HASH"}],
      "Projection": {"ProjectionType": "ALL"},
      "ProvisionedThroughput": {
        "ReadCapacityUnits": 5,
        "WriteCapacityUnits": 5
      }
    }
  }]'

# Enable Point-in-Time Recovery
aws dynamodb update-continuous-backups \
  --table-name Users \
  --point-in-time-recovery-specification PointInTimeRecoveryEnabled=true
</code></pre>
<h4 id="dynamodb-sdk-example-pythonboto3"><a class="header" href="#dynamodb-sdk-example-pythonboto3">DynamoDB SDK Example (Python/Boto3)</a></h4>
<pre><code class="language-python">import boto3
from boto3.dynamodb.conditions import Key, Attr
from decimal import Decimal

# Create DynamoDB resource
dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('Users')

# Put item
def create_user(user_id, email, name, age):
    response = table.put_item(
        Item={
            'UserId': user_id,
            'Email': email,
            'Name': name,
            'Age': age,
            'Status': 'active'
        }
    )
    return response

# Get item
def get_user(user_id, email):
    response = table.get_item(
        Key={
            'UserId': user_id,
            'Email': email
        }
    )
    return response.get('Item')

# Query by partition key
def get_user_emails(user_id):
    response = table.query(
        KeyConditionExpression=Key('UserId').eq(user_id)
    )
    return response['Items']

# Query with sort key condition
def get_user_by_email_prefix(user_id, email_prefix):
    response = table.query(
        KeyConditionExpression=Key('UserId').eq(user_id) &amp; 
                               Key('Email').begins_with(email_prefix)
    )
    return response['Items']

# Scan with filter
def get_active_users():
    response = table.scan(
        FilterExpression=Attr('Status').eq('active')
    )
    return response['Items']

# Update item
def update_user_status(user_id, email, new_status):
    response = table.update_item(
        Key={
            'UserId': user_id,
            'Email': email
        },
        UpdateExpression='SET #status = :status',
        ExpressionAttributeNames={
            '#status': 'Status'
        },
        ExpressionAttributeValues={
            ':status': new_status
        },
        ReturnValues='ALL_NEW'
    )
    return response['Attributes']

# Batch write
def batch_create_users(users):
    with table.batch_writer() as batch:
        for user in users:
            batch.put_item(Item=user)

# Usage
create_user('user-001', 'alice@example.com', 'Alice', 30)
user = get_user('user-001', 'alice@example.com')
print(user)

emails = get_user_emails('user-001')
update_user_status('user-001', 'alice@example.com', 'inactive')
</code></pre>
<h3 id="amazon-elasticache"><a class="header" href="#amazon-elasticache">Amazon ElastiCache</a></h3>
<p>Managed in-memory cache (Redis/Memcached).</p>
<pre><code class="language-bash"># Create Redis cluster
aws elasticache create-cache-cluster \
  --cache-cluster-id my-redis-cluster \
  --cache-node-type cache.t3.micro \
  --engine redis \
  --engine-version 7.0 \
  --num-cache-nodes 1 \
  --cache-subnet-group-name my-cache-subnet-group \
  --security-group-ids sg-0123456789abcdef0

# Create Redis replication group (cluster mode)
aws elasticache create-replication-group \
  --replication-group-id my-redis-cluster \
  --replication-group-description "My Redis cluster" \
  --engine redis \
  --cache-node-type cache.t3.micro \
  --num-cache-clusters 3 \
  --automatic-failover-enabled \
  --multi-az-enabled

# Describe clusters
aws elasticache describe-cache-clusters \
  --show-cache-node-info

# Get endpoint
aws elasticache describe-cache-clusters \
  --cache-cluster-id my-redis-cluster \
  --query 'CacheClusters[0].CacheNodes[0].Endpoint'
</code></pre>
<h2 id="networking-services-1"><a class="header" href="#networking-services-1">Networking Services</a></h2>
<h3 id="amazon-vpc-virtual-private-cloud"><a class="header" href="#amazon-vpc-virtual-private-cloud">Amazon VPC (Virtual Private Cloud)</a></h3>
<p>Isolated network for your AWS resources.</p>
<h4 id="vpc-architecture"><a class="header" href="#vpc-architecture">VPC Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│  VPC: 10.0.0.0/16                                           │
│  Region: us-east-1                                          │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌───────────────────────────┐  ┌──────────────────────┐   │
│  │ Public Subnet (AZ-A)      │  │ Public Subnet (AZ-B) │   │
│  │ 10.0.1.0/24               │  │ 10.0.2.0/24          │   │
│  │                           │  │                      │   │
│  │ ┌─────┐ ┌──────┐         │  │ ┌─────┐ ┌──────┐    │   │
│  │ │ NAT │ │ ALB  │         │  │ │ NAT │ │ ALB  │    │   │
│  │ └─────┘ └──────┘         │  │ └─────┘ └──────┘    │   │
│  └───────────┬───────────────┘  └──────────┬───────────┘   │
│              │                              │               │
│              │     Internet Gateway         │               │
│              └──────────────┬───────────────┘               │
│                             │                               │
│  ┌───────────────────────────┐  ┌──────────────────────┐   │
│  │ Private Subnet (AZ-A)     │  │ Private Subnet (AZ-B)│   │
│  │ 10.0.11.0/24              │  │ 10.0.12.0/24         │   │
│  │                           │  │                      │   │
│  │ ┌─────┐ ┌─────┐          │  │ ┌─────┐ ┌─────┐     │   │
│  │ │ EC2 │ │ EC2 │          │  │ │ EC2 │ │ EC2 │     │   │
│  │ └─────┘ └─────┘          │  │ └─────┘ └─────┘     │   │
│  └───────────────────────────┘  └──────────────────────┘   │
│                                                              │
│  ┌───────────────────────────┐  ┌──────────────────────┐   │
│  │ Database Subnet (AZ-A)    │  │ Database Subnet (AZ-B│   │
│  │ 10.0.21.0/24              │  │ 10.0.22.0/24         │   │
│  │                           │  │                      │   │
│  │ ┌─────────┐               │  │ ┌─────────┐         │   │
│  │ │   RDS   │               │  │ │   RDS   │         │   │
│  │ └─────────┘               │  │ └─────────┘         │   │
│  └───────────────────────────┘  └──────────────────────┘   │
│                                                              │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h4 id="vpc-cli-examples"><a class="header" href="#vpc-cli-examples">VPC CLI Examples</a></h4>
<pre><code class="language-bash"># Create VPC
aws ec2 create-vpc \
  --cidr-block 10.0.0.0/16 \
  --tag-specifications 'ResourceType=vpc,Tags=[{Key=Name,Value=MyVPC}]'

# Create Internet Gateway
aws ec2 create-internet-gateway \
  --tag-specifications 'ResourceType=internet-gateway,Tags=[{Key=Name,Value=MyIGW}]'

# Attach Internet Gateway to VPC
aws ec2 attach-internet-gateway \
  --internet-gateway-id igw-0123456789abcdef0 \
  --vpc-id vpc-0123456789abcdef0

# Create public subnet
aws ec2 create-subnet \
  --vpc-id vpc-0123456789abcdef0 \
  --cidr-block 10.0.1.0/24 \
  --availability-zone us-east-1a \
  --tag-specifications 'ResourceType=subnet,Tags=[{Key=Name,Value=PublicSubnet-AZ-A}]'

# Create private subnet
aws ec2 create-subnet \
  --vpc-id vpc-0123456789abcdef0 \
  --cidr-block 10.0.11.0/24 \
  --availability-zone us-east-1a \
  --tag-specifications 'ResourceType=subnet,Tags=[{Key=Name,Value=PrivateSubnet-AZ-A}]'

# Create route table
aws ec2 create-route-table \
  --vpc-id vpc-0123456789abcdef0 \
  --tag-specifications 'ResourceType=route-table,Tags=[{Key=Name,Value=PublicRouteTable}]'

# Create route to Internet Gateway
aws ec2 create-route \
  --route-table-id rtb-0123456789abcdef0 \
  --destination-cidr-block 0.0.0.0/0 \
  --gateway-id igw-0123456789abcdef0

# Associate route table with subnet
aws ec2 associate-route-table \
  --route-table-id rtb-0123456789abcdef0 \
  --subnet-id subnet-0123456789abcdef0

# Create NAT Gateway (for private subnet internet access)
# First, allocate Elastic IP
aws ec2 allocate-address --domain vpc

# Create NAT Gateway in public subnet
aws ec2 create-nat-gateway \
  --subnet-id subnet-0123456789abcdef0 \
  --allocation-id eipalloc-0123456789abcdef0 \
  --tag-specifications 'ResourceType=natgateway,Tags=[{Key=Name,Value=MyNATGateway}]'

# Create route to NAT Gateway for private subnet
aws ec2 create-route \
  --route-table-id rtb-private-0123456789abcdef0 \
  --destination-cidr-block 0.0.0.0/0 \
  --nat-gateway-id nat-0123456789abcdef0

# Create security group
aws ec2 create-security-group \
  --group-name web-server-sg \
  --description "Security group for web servers" \
  --vpc-id vpc-0123456789abcdef0

# Add inbound rules
aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 80 \
  --cidr 0.0.0.0/0

aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 443 \
  --cidr 0.0.0.0/0

aws ec2 authorize-security-group-ingress \
  --group-id sg-0123456789abcdef0 \
  --protocol tcp \
  --port 22 \
  --cidr 10.0.0.0/16

# List VPCs
aws ec2 describe-vpcs

# List subnets
aws ec2 describe-subnets --filters "Name=vpc-id,Values=vpc-0123456789abcdef0"

# List security groups
aws ec2 describe-security-groups --filters "Name=vpc-id,Values=vpc-0123456789abcdef0"
</code></pre>
<h3 id="elastic-load-balancing-elb"><a class="header" href="#elastic-load-balancing-elb">Elastic Load Balancing (ELB)</a></h3>
<p>Distribute traffic across multiple targets.</p>
<h4 id="load-balancer-types"><a class="header" href="#load-balancer-types">Load Balancer Types</a></h4>
<pre><code>Type                Use Case                    OSI Layer    Cost
──────────────────────────────────────────────────────────────────
Application (ALB)   HTTP/HTTPS, path routing   Layer 7      $$
Network (NLB)       TCP/UDP, ultra performance Layer 4      $$
Gateway (GWLB)      Third-party appliances     Layer 3      $$$
Classic (CLB)       Legacy (deprecated)        Layer 4/7    $
</code></pre>
<h4 id="alb-architecture"><a class="header" href="#alb-architecture">ALB Architecture</a></h4>
<pre><code>                         Internet
                             │
                    ┌────────▼────────┐
                    │ Application     │
                    │ Load Balancer   │
                    │ (ALB)           │
                    └────────┬────────┘
                             │
          ┌──────────────────┼──────────────────┐
          │                  │                  │
    ┌─────▼─────┐      ┌─────▼─────┐     ┌─────▼─────┐
    │  Target   │      │  Target   │     │  Target   │
    │  Group 1  │      │  Group 2  │     │  Group 3  │
    │           │      │           │     │           │
    │ /api/*    │      │ /images/* │     │  /*       │
    └───────────┘      └───────────┘     └───────────┘
         │                  │                  │
    API Servers      Image Service     Web Servers
</code></pre>
<h4 id="load-balancer-cli-examples"><a class="header" href="#load-balancer-cli-examples">Load Balancer CLI Examples</a></h4>
<pre><code class="language-bash"># Create Application Load Balancer
aws elbv2 create-load-balancer \
  --name my-alb \
  --subnets subnet-0123456789abcdef0 subnet-0123456789abcdef1 \
  --security-groups sg-0123456789abcdef0 \
  --scheme internet-facing \
  --type application \
  --ip-address-type ipv4

# Create target group
aws elbv2 create-target-group \
  --name my-targets \
  --protocol HTTP \
  --port 80 \
  --vpc-id vpc-0123456789abcdef0 \
  --health-check-path /health \
  --health-check-interval-seconds 30 \
  --health-check-timeout-seconds 5 \
  --healthy-threshold-count 2 \
  --unhealthy-threshold-count 2

# Register targets
aws elbv2 register-targets \
  --target-group-arn arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-targets/73e2d6bc24d8a067 \
  --targets Id=i-1234567890abcdef0 Id=i-0987654321abcdef0

# Create listener
aws elbv2 create-listener \
  --load-balancer-arn arn:aws:elasticloadbalancing:region:account-id:loadbalancer/app/my-alb/50dc6c495c0c9188 \
  --protocol HTTP \
  --port 80 \
  --default-actions Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-targets/73e2d6bc24d8a067

# Create HTTPS listener with certificate
aws elbv2 create-listener \
  --load-balancer-arn arn:aws:elasticloadbalancing:region:account-id:loadbalancer/app/my-alb/50dc6c495c0c9188 \
  --protocol HTTPS \
  --port 443 \
  --certificates CertificateArn=arn:aws:acm:region:account-id:certificate/12345678-1234-1234-1234-123456789012 \
  --default-actions Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-targets/73e2d6bc24d8a067

# Create path-based routing rule
aws elbv2 create-rule \
  --listener-arn arn:aws:elasticloadbalancing:region:account-id:listener/app/my-alb/50dc6c495c0c9188/f2f7dc8efc522ab2 \
  --priority 10 \
  --conditions Field=path-pattern,Values='/api/*' \
  --actions Type=forward,TargetGroupArn=arn:aws:elasticloadbalancing:region:account-id:targetgroup/api-targets/73e2d6bc24d8a067

# Describe load balancers
aws elbv2 describe-load-balancers

# Describe target health
aws elbv2 describe-target-health \
  --target-group-arn arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-targets/73e2d6bc24d8a067
</code></pre>
<h3 id="amazon-route-53"><a class="header" href="#amazon-route-53">Amazon Route 53</a></h3>
<p>Scalable DNS and domain registration.</p>
<pre><code class="language-bash"># List hosted zones
aws route53 list-hosted-zones

# Create hosted zone
aws route53 create-hosted-zone \
  --name example.com \
  --caller-reference $(date +%s)

# Create A record
aws route53 change-resource-record-sets \
  --hosted-zone-id Z1234567890ABC \
  --change-batch '{
    "Changes": [{
      "Action": "CREATE",
      "ResourceRecordSet": {
        "Name": "www.example.com",
        "Type": "A",
        "TTL": 300,
        "ResourceRecords": [{"Value": "192.0.2.1"}]
      }
    }]
  }'

# Create CNAME record
aws route53 change-resource-record-sets \
  --hosted-zone-id Z1234567890ABC \
  --change-batch '{
    "Changes": [{
      "Action": "CREATE",
      "ResourceRecordSet": {
        "Name": "blog.example.com",
        "Type": "CNAME",
        "TTL": 300,
        "ResourceRecords": [{"Value": "www.example.com"}]
      }
    }]
  }'

# Create alias record (to ALB)
aws route53 change-resource-record-sets \
  --hosted-zone-id Z1234567890ABC \
  --change-batch '{
    "Changes": [{
      "Action": "CREATE",
      "ResourceRecordSet": {
        "Name": "api.example.com",
        "Type": "A",
        "AliasTarget": {
          "HostedZoneId": "Z35SXDOTRQ7X7K",
          "DNSName": "my-alb-1234567890.us-east-1.elb.amazonaws.com",
          "EvaluateTargetHealth": true
        }
      }
    }]
  }'

# Health check for failover
aws route53 create-health-check \
  --health-check-config \
    IPAddress=192.0.2.1,Port=80,Type=HTTP,ResourcePath=/health,RequestInterval=30,FailureThreshold=3
</code></pre>
<h2 id="serverless-services"><a class="header" href="#serverless-services">Serverless Services</a></h2>
<h3 id="aws-lambda"><a class="header" href="#aws-lambda">AWS Lambda</a></h3>
<p>Run code without managing servers.</p>
<h4 id="lambda-architecture"><a class="header" href="#lambda-architecture">Lambda Architecture</a></h4>
<pre><code>┌────────────────────────────────────────────────┐
│            Event Sources                       │
├────────────────────────────────────────────────┤
│                                                 │
│  API Gateway │ S3 │ DynamoDB │ SQS │ EventBridge │
│                                                 │
└──────────────┬──────────┬──────────┬───────────┘
               │          │          │
          ┌────▼────┐┌────▼────┐┌───▼──────┐
          │ Lambda  ││ Lambda  ││  Lambda  │
          │Function ││Function ││ Function │
          │   1     ││    2    ││     3    │
          └────┬────┘└────┬────┘└────┬─────┘
               │          │          │
          ┌────▼──────────▼──────────▼─────┐
          │       Destinations              │
          │                                  │
          │  DynamoDB │ S3 │ SNS │ SQS     │
          └──────────────────────────────────┘
</code></pre>
<h4 id="lambda-function-example-python"><a class="header" href="#lambda-function-example-python">Lambda Function Example (Python)</a></h4>
<pre><code class="language-python">import json
import boto3

s3 = boto3.client('s3')
dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('MyTable')

def lambda_handler(event, context):
    """
    Lambda function handler
    
    Args:
        event: Event data passed to the function
        context: Runtime information
    
    Returns:
        Response object
    """
    
    # Log the event
    print(f"Event: {json.dumps(event)}")
    
    # Example: Process S3 event
    if 'Records' in event:
        for record in event['Records']:
            bucket = record['s3']['bucket']['name']
            key = record['s3']['object']['key']
            
            print(f"Processing {key} from {bucket}")
            
            # Process the file
            try:
                response = s3.get_object(Bucket=bucket, Key=key)
                content = response['Body'].read().decode('utf-8')
                
                # Store metadata in DynamoDB
                table.put_item(
                    Item={
                        'file_key': key,
                        'bucket': bucket,
                        'size': response['ContentLength'],
                        'content_type': response['ContentType']
                    }
                )
                
                return {
                    'statusCode': 200,
                    'body': json.dumps('Successfully processed file')
                }
            except Exception as e:
                print(f"Error: {str(e)}")
                return {
                    'statusCode': 500,
                    'body': json.dumps(f'Error processing file: {str(e)}')
                }
    
    # Example: Process API Gateway event
    if 'httpMethod' in event:
        http_method = event['httpMethod']
        path = event['path']
        
        if http_method == 'GET' and path == '/items':
            # Retrieve items from DynamoDB
            response = table.scan()
            
            return {
                'statusCode': 200,
                'headers': {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*'
                },
                'body': json.dumps(response['Items'])
            }
        
        elif http_method == 'POST' and path == '/items':
            # Create new item
            body = json.loads(event['body'])
            
            table.put_item(Item=body)
            
            return {
                'statusCode': 201,
                'headers': {
                    'Content-Type': 'application/json',
                    'Access-Control-Allow-Origin': '*'
                },
                'body': json.dumps({'message': 'Item created'})
            }
    
    return {
        'statusCode': 400,
        'body': json.dumps('Invalid request')
    }
</code></pre>
<h4 id="lambda-cli-examples"><a class="header" href="#lambda-cli-examples">Lambda CLI Examples</a></h4>
<pre><code class="language-bash"># Create Lambda function
zip function.zip lambda_function.py

aws lambda create-function \
  --function-name my-function \
  --runtime python3.11 \
  --role arn:aws:iam::123456789012:role/lambda-execution-role \
  --handler lambda_function.lambda_handler \
  --zip-file fileb://function.zip \
  --timeout 30 \
  --memory-size 256 \
  --environment Variables={ENV=production,DB_TABLE=MyTable}

# Update function code
aws lambda update-function-code \
  --function-name my-function \
  --zip-file fileb://function.zip

# Update function configuration
aws lambda update-function-configuration \
  --function-name my-function \
  --timeout 60 \
  --memory-size 512

# Invoke function synchronously
aws lambda invoke \
  --function-name my-function \
  --payload '{"key": "value"}' \
  response.json

cat response.json

# Invoke function asynchronously
aws lambda invoke \
  --function-name my-function \
  --invocation-type Event \
  --payload '{"key": "value"}' \
  response.json

# List functions
aws lambda list-functions

# Get function details
aws lambda get-function --function-name my-function

# Add S3 trigger
aws lambda add-permission \
  --function-name my-function \
  --statement-id s3-invoke \
  --action lambda:InvokeFunction \
  --principal s3.amazonaws.com \
  --source-arn arn:aws:s3:::my-bucket

aws s3api put-bucket-notification-configuration \
  --bucket my-bucket \
  --notification-configuration '{
    "LambdaFunctionConfigurations": [{
      "LambdaFunctionArn": "arn:aws:lambda:region:account-id:function:my-function",
      "Events": ["s3:ObjectCreated:*"],
      "Filter": {
        "Key": {
          "FilterRules": [{
            "Name": "prefix",
            "Value": "uploads/"
          }]
        }
      }
    }]
  }'

# View logs
aws logs tail /aws/lambda/my-function --follow

# Create layer
zip layer.zip -r python/

aws lambda publish-layer-version \
  --layer-name my-layer \
  --description "Common dependencies" \
  --zip-file fileb://layer.zip \
  --compatible-runtimes python3.11

# Add layer to function
aws lambda update-function-configuration \
  --function-name my-function \
  --layers arn:aws:lambda:region:account-id:layer:my-layer:1

# Delete function
aws lambda delete-function --function-name my-function
</code></pre>
<h4 id="lambda-pricing"><a class="header" href="#lambda-pricing">Lambda Pricing</a></h4>
<pre><code>Component               Price (us-east-1)
─────────────────────────────────────────────────
Requests                $0.20 per 1M requests
Duration (x86)          $0.0000166667 per GB-second
Duration (ARM/Graviton) $0.0000133334 per GB-second
Free Tier               1M requests + 400,000 GB-seconds/month

Example: 1 million requests, 512 MB, 1 second each
= 1M * $0.20/1M = $0.20 (requests)
+ 1M * 0.5 GB * 1 sec * $0.0000166667 = $8.33 (duration)
= $8.53/month (minus free tier)
</code></pre>
<h3 id="api-gateway"><a class="header" href="#api-gateway">API Gateway</a></h3>
<p>Create, publish, and manage APIs.</p>
<pre><code class="language-bash"># Create REST API
aws apigateway create-rest-api \
  --name "My API" \
  --description "My REST API" \
  --endpoint-configuration types=REGIONAL

# Get root resource
aws apigateway get-resources \
  --rest-api-id abc123

# Create resource
aws apigateway create-resource \
  --rest-api-id abc123 \
  --parent-id xyz789 \
  --path-part items

# Create method
aws apigateway put-method \
  --rest-api-id abc123 \
  --resource-id uvw456 \
  --http-method GET \
  --authorization-type NONE

# Create Lambda integration
aws apigateway put-integration \
  --rest-api-id abc123 \
  --resource-id uvw456 \
  --http-method GET \
  --type AWS_PROXY \
  --integration-http-method POST \
  --uri arn:aws:apigateway:region:lambda:path/2015-03-31/functions/arn:aws:lambda:region:account-id:function:my-function/invocations

# Deploy API
aws apigateway create-deployment \
  --rest-api-id abc123 \
  --stage-name prod

# API URL format:
# https://abc123.execute-api.region.amazonaws.com/prod/items

# Enable API key
aws apigateway create-api-key \
  --name "My API Key" \
  --enabled

# Create usage plan
aws apigateway create-usage-plan \
  --name "Basic Plan" \
  --throttle burstLimit=100,rateLimit=50 \
  --quota limit=10000,period=MONTH

# Associate API key with usage plan
aws apigateway create-usage-plan-key \
  --usage-plan-id def456 \
  --key-id ghi789 \
  --key-type API_KEY
</code></pre>
<h2 id="container-services"><a class="header" href="#container-services">Container Services</a></h2>
<h3 id="amazon-ecs-elastic-container-service"><a class="header" href="#amazon-ecs-elastic-container-service">Amazon ECS (Elastic Container Service)</a></h3>
<p>Container orchestration service.</p>
<h4 id="ecs-architecture"><a class="header" href="#ecs-architecture">ECS Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────────┐
│              ECS Cluster                         │
├─────────────────────────────────────────────────┤
│                                                  │
│  ┌─────────────────────────────────────────┐   │
│  │         ECS Service                      │   │
│  │  (Desired Count: 3)                      │   │
│  └──────────┬──────────────────────────────┘   │
│             │                                    │
│    ┌────────┼────────┐                          │
│    │        │        │                          │
│ ┌──▼──┐  ┌──▼──┐  ┌──▼──┐                      │
│ │Task │  │Task │  │Task │                      │
│ │  1  │  │  2  │  │  3  │                      │
│ └──┬──┘  └──┬──┘  └──┬──┘                      │
│    │        │        │                          │
│ ┌──▼───────▼────────▼───┐                      │
│ │    Container(s)        │                      │
│ │  ┌────────────────┐   │                      │
│ │  │  nginx:latest  │   │                      │
│ │  └────────────────┘   │                      │
│ └────────────────────────┘                      │
│                                                  │
│  Launch Type: EC2 or Fargate                    │
└─────────────────────────────────────────────────┘
</code></pre>
<h4 id="ecs-task-definition-example"><a class="header" href="#ecs-task-definition-example">ECS Task Definition Example</a></h4>
<pre><code class="language-json">{
  "family": "web-app",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "executionRoleArn": "arn:aws:iam::123456789012:role/ecsTaskExecutionRole",
  "containerDefinitions": [
    {
      "name": "nginx",
      "image": "nginx:latest",
      "portMappings": [
        {
          "containerPort": 80,
          "protocol": "tcp"
        }
      ],
      "essential": true,
      "environment": [
        {
          "name": "ENV",
          "value": "production"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/web-app",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "nginx"
        }
      }
    }
  ]
}
</code></pre>
<h4 id="ecs-cli-examples"><a class="header" href="#ecs-cli-examples">ECS CLI Examples</a></h4>
<pre><code class="language-bash"># Create cluster (Fargate)
aws ecs create-cluster --cluster-name my-cluster

# Register task definition
aws ecs register-task-definition --cli-input-json file://task-definition.json

# Create service
aws ecs create-service \
  --cluster my-cluster \
  --service-name web-service \
  --task-definition web-app:1 \
  --desired-count 3 \
  --launch-type FARGATE \
  --network-configuration "awsvpcConfiguration={subnets=[subnet-12345,subnet-67890],securityGroups=[sg-12345],assignPublicIp=ENABLED}" \
  --load-balancers "targetGroupArn=arn:aws:elasticloadbalancing:region:account-id:targetgroup/my-targets/73e2d6bc24d8a067,containerName=nginx,containerPort=80"

# List services
aws ecs list-services --cluster my-cluster

# Describe service
aws ecs describe-services \
  --cluster my-cluster \
  --services web-service

# Update service (e.g., change desired count)
aws ecs update-service \
  --cluster my-cluster \
  --service web-service \
  --desired-count 5

# Run standalone task
aws ecs run-task \
  --cluster my-cluster \
  --task-definition web-app:1 \
  --launch-type FARGATE \
  --network-configuration "awsvpcConfiguration={subnets=[subnet-12345],securityGroups=[sg-12345],assignPublicIp=ENABLED}"

# View logs
aws logs tail /ecs/web-app --follow

# Stop task
aws ecs stop-task \
  --cluster my-cluster \
  --task arn:aws:ecs:region:account-id:task/my-cluster/abc123

# Delete service
aws ecs delete-service \
  --cluster my-cluster \
  --service web-service \
  --force

# Delete cluster
aws ecs delete-cluster --cluster my-cluster
</code></pre>
<h3 id="amazon-eks-elastic-kubernetes-service"><a class="header" href="#amazon-eks-elastic-kubernetes-service">Amazon EKS (Elastic Kubernetes Service)</a></h3>
<p>Managed Kubernetes service.</p>
<pre><code class="language-bash"># Create EKS cluster (using eksctl - easier)
eksctl create cluster \
  --name my-cluster \
  --region us-east-1 \
  --nodegroup-name standard-workers \
  --node-type t3.medium \
  --nodes 3 \
  --nodes-min 1 \
  --nodes-max 4 \
  --managed

# Or using AWS CLI (more complex)
aws eks create-cluster \
  --name my-cluster \
  --role-arn arn:aws:iam::123456789012:role/eks-service-role \
  --resources-vpc-config subnetIds=subnet-12345,subnet-67890,securityGroupIds=sg-12345

# Update kubeconfig
aws eks update-kubeconfig --name my-cluster --region us-east-1

# Verify connection
kubectl get nodes

# Deploy application
kubectl apply -f deployment.yaml

# List clusters
aws eks list-clusters

# Describe cluster
aws eks describe-cluster --name my-cluster

# Delete cluster (eksctl)
eksctl delete cluster --name my-cluster
</code></pre>
<h3 id="aws-fargate"><a class="header" href="#aws-fargate">AWS Fargate</a></h3>
<p>Serverless compute for containers (works with ECS and EKS).</p>
<p><strong>Benefits</strong>:</p>
<ul>
<li>No EC2 instances to manage</li>
<li>Pay only for resources used</li>
<li>Automatic scaling</li>
<li>Built-in security</li>
</ul>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Microservices</li>
<li>Batch processing</li>
<li>CI/CD tasks</li>
<li>Event-driven applications</li>
</ul>
<h2 id="security-services"><a class="header" href="#security-services">Security Services</a></h2>
<h3 id="aws-iam-identity-and-access-management"><a class="header" href="#aws-iam-identity-and-access-management">AWS IAM (Identity and Access Management)</a></h3>
<p>Control access to AWS resources.</p>
<h4 id="iam-concepts"><a class="header" href="#iam-concepts">IAM Concepts</a></h4>
<pre><code>┌─────────────────────────────────────────┐
│ AWS Account                              │
├─────────────────────────────────────────┤
│                                          │
│  Users          Groups         Roles    │
│  ├─ Alice      ├─ Developers  ├─ EC2   │
│  ├─ Bob        ├─ Admins      ├─ Lambda│
│  └─ Charlie    └─ Viewers     └─ ECS   │
│                                          │
│  Policies (JSON documents)               │
│  ├─ Managed Policies (AWS/Custom)       │
│  └─ Inline Policies                     │
└─────────────────────────────────────────┘
</code></pre>
<h4 id="iam-policy-example"><a class="header" href="#iam-policy-example">IAM Policy Example</a></h4>
<pre><code class="language-json">{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowS3ReadWrite",
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject",
        "s3:DeleteObject"
      ],
      "Resource": "arn:aws:s3:::my-bucket/*"
    },
    {
      "Sid": "AllowS3ListBucket",
      "Effect": "Allow",
      "Action": "s3:ListBucket",
      "Resource": "arn:aws:s3:::my-bucket"
    },
    {
      "Sid": "DenyInsecureTransport",
      "Effect": "Deny",
      "Action": "s3:*",
      "Resource": [
        "arn:aws:s3:::my-bucket",
        "arn:aws:s3:::my-bucket/*"
      ],
      "Condition": {
        "Bool": {
          "aws:SecureTransport": "false"
        }
      }
    }
  ]
}
</code></pre>
<h4 id="iam-cli-examples"><a class="header" href="#iam-cli-examples">IAM CLI Examples</a></h4>
<pre><code class="language-bash"># Create user
aws iam create-user --user-name alice

# Create access key
aws iam create-access-key --user-name alice

# Create group
aws iam create-group --group-name developers

# Add user to group
aws iam add-user-to-group \
  --user-name alice \
  --group-name developers

# Create policy
aws iam create-policy \
  --policy-name S3ReadWritePolicy \
  --policy-document file://policy.json

# Attach policy to user
aws iam attach-user-policy \
  --user-name alice \
  --policy-arn arn:aws:iam::123456789012:policy/S3ReadWritePolicy

# Attach policy to group
aws iam attach-group-policy \
  --group-name developers \
  --policy-arn arn:aws:iam::aws:policy/PowerUserAccess

# Create role (for EC2)
aws iam create-role \
  --role-name EC2-S3-Role \
  --assume-role-policy-document '{
    "Version": "2012-10-17",
    "Statement": [{
      "Effect": "Allow",
      "Principal": {"Service": "ec2.amazonaws.com"},
      "Action": "sts:AssumeRole"
    }]
  }'

# Attach policy to role
aws iam attach-role-policy \
  --role-name EC2-S3-Role \
  --policy-arn arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess

# Create instance profile
aws iam create-instance-profile \
  --instance-profile-name EC2-S3-Profile

# Add role to instance profile
aws iam add-role-to-instance-profile \
  --instance-profile-name EC2-S3-Profile \
  --role-name EC2-S3-Role

# Associate instance profile with EC2
aws ec2 associate-iam-instance-profile \
  --instance-id i-1234567890abcdef0 \
  --iam-instance-profile Name=EC2-S3-Profile

# List users
aws iam list-users

# List policies attached to user
aws iam list-attached-user-policies --user-name alice

# Delete user (must remove from groups and detach policies first)
aws iam remove-user-from-group --user-name alice --group-name developers
aws iam detach-user-policy --user-name alice --policy-arn arn:aws:iam::123456789012:policy/S3ReadWritePolicy
aws iam delete-user --user-name alice
</code></pre>
<h3 id="aws-secrets-manager"><a class="header" href="#aws-secrets-manager">AWS Secrets Manager</a></h3>
<p>Store and rotate secrets.</p>
<pre><code class="language-bash"># Create secret
aws secretsmanager create-secret \
  --name prod/db/password \
  --description "Database password for production" \
  --secret-string '{"username":"admin","password":"MySecurePassword123"}'

# Get secret value
aws secretsmanager get-secret-value --secret-id prod/db/password

# Update secret
aws secretsmanager update-secret \
  --secret-id prod/db/password \
  --secret-string '{"username":"admin","password":"NewPassword456"}'

# Enable automatic rotation
aws secretsmanager rotate-secret \
  --secret-id prod/db/password \
  --rotation-lambda-arn arn:aws:lambda:region:account-id:function:my-rotation-function \
  --rotation-rules AutomaticallyAfterDays=30

# Delete secret (with recovery window)
aws secretsmanager delete-secret \
  --secret-id prod/db/password \
  --recovery-window-in-days 30
</code></pre>
<h4 id="use-secret-in-lambda-python"><a class="header" href="#use-secret-in-lambda-python">Use Secret in Lambda (Python)</a></h4>
<pre><code class="language-python">import boto3
import json

def get_secret(secret_name):
    client = boto3.client('secretsmanager')
    
    try:
        response = client.get_secret_value(SecretId=secret_name)
        secret = json.loads(response['SecretString'])
        return secret
    except Exception as e:
        print(f"Error retrieving secret: {e}")
        raise

def lambda_handler(event, context):
    # Get database credentials
    db_secret = get_secret('prod/db/password')
    
    username = db_secret['username']
    password = db_secret['password']
    
    # Use credentials to connect to database
    # ...
    
    return {'statusCode': 200}
</code></pre>
<h3 id="aws-kms-key-management-service"><a class="header" href="#aws-kms-key-management-service">AWS KMS (Key Management Service)</a></h3>
<p>Manage encryption keys.</p>
<pre><code class="language-bash"># Create KMS key
aws kms create-key \
  --description "Application data encryption key"

# Create alias
aws kms create-alias \
  --alias-name alias/app-data-key \
  --target-key-id 1234abcd-12ab-34cd-56ef-1234567890ab

# Encrypt data
aws kms encrypt \
  --key-id alias/app-data-key \
  --plaintext "sensitive data" \
  --output text \
  --query CiphertextBlob

# Decrypt data
aws kms decrypt \
  --ciphertext-blob fileb://encrypted-data \
  --output text \
  --query Plaintext | base64 --decode

# List keys
aws kms list-keys

# Enable key rotation
aws kms enable-key-rotation --key-id 1234abcd-12ab-34cd-56ef-1234567890ab
</code></pre>
<h2 id="monitoring-and-management"><a class="header" href="#monitoring-and-management">Monitoring and Management</a></h2>
<h3 id="amazon-cloudwatch"><a class="header" href="#amazon-cloudwatch">Amazon CloudWatch</a></h3>
<p>Monitoring and observability service.</p>
<h4 id="cloudwatch-metrics"><a class="header" href="#cloudwatch-metrics">CloudWatch Metrics</a></h4>
<pre><code class="language-bash"># Put custom metric
aws cloudwatch put-metric-data \
  --namespace "MyApp" \
  --metric-name "RequestCount" \
  --value 100 \
  --timestamp $(date -u +"%Y-%m-%dT%H:%M:%S")

# Get metric statistics
aws cloudwatch get-metric-statistics \
  --namespace AWS/EC2 \
  --metric-name CPUUtilization \
  --dimensions Name=InstanceId,Value=i-1234567890abcdef0 \
  --start-time $(date -u -d '1 hour ago' +"%Y-%m-%dT%H:%M:%S") \
  --end-time $(date -u +"%Y-%m-%dT%H:%M:%S") \
  --period 300 \
  --statistics Average

# Create alarm
aws cloudwatch put-metric-alarm \
  --alarm-name high-cpu \
  --alarm-description "Alert when CPU exceeds 80%" \
  --metric-name CPUUtilization \
  --namespace AWS/EC2 \
  --statistic Average \
  --period 300 \
  --evaluation-periods 2 \
  --threshold 80 \
  --comparison-operator GreaterThanThreshold \
  --dimensions Name=InstanceId,Value=i-1234567890abcdef0 \
  --alarm-actions arn:aws:sns:region:account-id:my-topic

# List alarms
aws cloudwatch describe-alarms

# Delete alarm
aws cloudwatch delete-alarms --alarm-names high-cpu
</code></pre>
<h4 id="cloudwatch-logs"><a class="header" href="#cloudwatch-logs">CloudWatch Logs</a></h4>
<pre><code class="language-bash"># Create log group
aws logs create-log-group --log-group-name /aws/lambda/my-function

# Create log stream
aws logs create-log-stream \
  --log-group-name /aws/lambda/my-function \
  --log-stream-name 2024/01/01/instance-123

# Put log events
aws logs put-log-events \
  --log-group-name /aws/lambda/my-function \
  --log-stream-name 2024/01/01/instance-123 \
  --log-events timestamp=$(date +%s000),message="Application started"

# Tail logs
aws logs tail /aws/lambda/my-function --follow

# Filter logs
aws logs filter-log-events \
  --log-group-name /aws/lambda/my-function \
  --filter-pattern "ERROR" \
  --start-time $(date -d '1 hour ago' +%s)000

# Create metric filter
aws logs put-metric-filter \
  --log-group-name /aws/lambda/my-function \
  --filter-name ErrorCount \
  --filter-pattern "[ERROR]" \
  --metric-transformations \
    metricName=ErrorCount,metricNamespace=MyApp,metricValue=1

# Export logs to S3
aws logs create-export-task \
  --log-group-name /aws/lambda/my-function \
  --from $(date -d '1 day ago' +%s)000 \
  --to $(date +%s)000 \
  --destination my-logs-bucket \
  --destination-prefix lambda-logs/

# Set retention policy
aws logs put-retention-policy \
  --log-group-name /aws/lambda/my-function \
  --retention-in-days 30

# Delete log group
aws logs delete-log-group --log-group-name /aws/lambda/my-function
</code></pre>
<h3 id="aws-cloudtrail"><a class="header" href="#aws-cloudtrail">AWS CloudTrail</a></h3>
<p>Track user activity and API usage.</p>
<pre><code class="language-bash"># Create trail
aws cloudtrail create-trail \
  --name my-trail \
  --s3-bucket-name my-cloudtrail-bucket

# Start logging
aws cloudtrail start-logging --name my-trail

# Lookup events
aws cloudtrail lookup-events \
  --lookup-attributes AttributeKey=EventName,AttributeValue=RunInstances \
  --max-results 10

# Get trail status
aws cloudtrail get-trail-status --name my-trail

# Stop logging
aws cloudtrail stop-logging --name my-trail

# Delete trail
aws cloudtrail delete-trail --name my-trail
</code></pre>
<h2 id="devops-and-cicd"><a class="header" href="#devops-and-cicd">DevOps and CI/CD</a></h2>
<h3 id="aws-codecommit"><a class="header" href="#aws-codecommit">AWS CodeCommit</a></h3>
<p>Git repository hosting.</p>
<pre><code class="language-bash"># Create repository
aws codecommit create-repository \
  --repository-name my-repo \
  --repository-description "My application code"

# Clone repository
git clone https://git-codecommit.us-east-1.amazonaws.com/v1/repos/my-repo

# Or with SSH
git clone ssh://git-codecommit.us-east-1.amazonaws.com/v1/repos/my-repo

# List repositories
aws codecommit list-repositories

# Get repository details
aws codecommit get-repository --repository-name my-repo

# Delete repository
aws codecommit delete-repository --repository-name my-repo
</code></pre>
<h3 id="aws-codebuild"><a class="header" href="#aws-codebuild">AWS CodeBuild</a></h3>
<p>Build and test code.</p>
<h4 id="buildspecyml-example"><a class="header" href="#buildspecyml-example">buildspec.yml Example</a></h4>
<pre><code class="language-yaml">version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.11
    commands:
      - echo "Installing dependencies..."
      - pip install -r requirements.txt
  
  pre_build:
    commands:
      - echo "Running tests..."
      - pytest tests/
      - echo "Logging in to Amazon ECR..."
      - aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com
  
  build:
    commands:
      - echo "Building Docker image..."
      - docker build -t $IMAGE_REPO_NAME:$IMAGE_TAG .
      - docker tag $IMAGE_REPO_NAME:$IMAGE_TAG $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
  
  post_build:
    commands:
      - echo "Pushing Docker image..."
      - docker push $AWS_ACCOUNT_ID.dkr.ecr.$AWS_DEFAULT_REGION.amazonaws.com/$IMAGE_REPO_NAME:$IMAGE_TAG
      - echo "Build completed on `date`"

artifacts:
  files:
    - '**/*'
  name: build-output

cache:
  paths:
    - '/root/.cache/pip/**/*'
</code></pre>
<pre><code class="language-bash"># Create build project
aws codebuild create-project \
  --name my-build-project \
  --source type=CODECOMMIT,location=https://git-codecommit.us-east-1.amazonaws.com/v1/repos/my-repo \
  --artifacts type=S3,location=my-build-artifacts-bucket \
  --environment type=LINUX_CONTAINER,image=aws/codebuild/standard:5.0,computeType=BUILD_GENERAL1_SMALL \
  --service-role arn:aws:iam::123456789012:role/codebuild-service-role

# Start build
aws codebuild start-build --project-name my-build-project

# Get build details
aws codebuild batch-get-builds --ids my-build-project:build-id
</code></pre>
<h3 id="aws-codedeploy"><a class="header" href="#aws-codedeploy">AWS CodeDeploy</a></h3>
<p>Automate application deployments.</p>
<pre><code class="language-bash"># Create application
aws deploy create-application \
  --application-name my-app \
  --compute-platform Server

# Create deployment group
aws deploy create-deployment-group \
  --application-name my-app \
  --deployment-group-name production \
  --deployment-config-name CodeDeployDefault.OneAtATime \
  --ec2-tag-filters Key=Environment,Value=Production,Type=KEY_AND_VALUE \
  --service-role-arn arn:aws:iam::123456789012:role/CodeDeployServiceRole

# Create deployment
aws deploy create-deployment \
  --application-name my-app \
  --deployment-group-name production \
  --s3-location bucket=my-deployments-bucket,key=app-v1.0.zip,bundleType=zip

# Get deployment status
aws deploy get-deployment --deployment-id d-ABCDEF123
</code></pre>
<h3 id="aws-codepipeline"><a class="header" href="#aws-codepipeline">AWS CodePipeline</a></h3>
<p>Continuous delivery service.</p>
<h4 id="pipeline-structure"><a class="header" href="#pipeline-structure">Pipeline Structure</a></h4>
<pre><code>┌──────────────┐    ┌──────────────┐    ┌──────────────┐    ┌──────────────┐
│   Source     │───▶│    Build     │───▶│     Test     │───▶│    Deploy    │
│ (CodeCommit) │    │ (CodeBuild)  │    │ (CodeBuild)  │    │ (CodeDeploy) │
└──────────────┘    └──────────────┘    └──────────────┘    └──────────────┘
</code></pre>
<pre><code class="language-bash"># Create pipeline
aws codepipeline create-pipeline --cli-input-json file://pipeline.json

# Get pipeline details
aws codepipeline get-pipeline --name my-pipeline

# Start pipeline execution
aws codepipeline start-pipeline-execution --name my-pipeline

# Get pipeline state
aws codepipeline get-pipeline-state --name my-pipeline
</code></pre>
<h2 id="machine-learning-services"><a class="header" href="#machine-learning-services">Machine Learning Services</a></h2>
<h3 id="amazon-sagemaker"><a class="header" href="#amazon-sagemaker">Amazon SageMaker</a></h3>
<p>Build, train, and deploy ML models.</p>
<pre><code class="language-python">import boto3
import sagemaker
from sagemaker import get_execution_role
from sagemaker.sklearn import SKLearn

# Set up
role = get_execution_role()
session = sagemaker.Session()
bucket = session.default_bucket()

# Train model
sklearn_estimator = SKLearn(
    entry_point='train.py',
    role=role,
    instance_type='ml.m5.xlarge',
    framework_version='0.23-1',
    hyperparameters={
        'n_estimators': 100,
        'max_depth': 5
    }
)

sklearn_estimator.fit({'train': 's3://bucket/train-data'})

# Deploy model
predictor = sklearn_estimator.deploy(
    initial_instance_count=1,
    instance_type='ml.t2.medium'
)

# Make predictions
result = predictor.predict(data)
</code></pre>
<h3 id="amazon-rekognition"><a class="header" href="#amazon-rekognition">Amazon Rekognition</a></h3>
<p>Image and video analysis.</p>
<pre><code class="language-python">import boto3

rekognition = boto3.client('rekognition')

# Detect labels in image
response = rekognition.detect_labels(
    Image={'S3Object': {'Bucket': 'my-bucket', 'Name': 'image.jpg'}},
    MaxLabels=10,
    MinConfidence=75
)

for label in response['Labels']:
    print(f"{label['Name']}: {label['Confidence']:.2f}%")

# Detect faces
response = rekognition.detect_faces(
    Image={'S3Object': {'Bucket': 'my-bucket', 'Name': 'face.jpg'}},
    Attributes=['ALL']
)

# Compare faces
response = rekognition.compare_faces(
    SourceImage={'S3Object': {'Bucket': 'my-bucket', 'Name': 'source.jpg'}},
    TargetImage={'S3Object': {'Bucket': 'my-bucket', 'Name': 'target.jpg'}},
    SimilarityThreshold=80
)
</code></pre>
<h3 id="amazon-comprehend"><a class="header" href="#amazon-comprehend">Amazon Comprehend</a></h3>
<p>Natural language processing.</p>
<pre><code class="language-python">import boto3

comprehend = boto3.client('comprehend')

text = "Amazon Web Services is a great cloud platform."

# Detect sentiment
sentiment = comprehend.detect_sentiment(Text=text, LanguageCode='en')
print(f"Sentiment: {sentiment['Sentiment']}")

# Detect entities
entities = comprehend.detect_entities(Text=text, LanguageCode='en')
for entity in entities['Entities']:
    print(f"{entity['Text']}: {entity['Type']}")

# Detect key phrases
phrases = comprehend.detect_key_phrases(Text=text, LanguageCode='en')
for phrase in phrases['KeyPhrases']:
    print(phrase['Text'])
</code></pre>
<h2 id="architecture-examples"><a class="header" href="#architecture-examples">Architecture Examples</a></h2>
<h3 id="three-tier-web-application"><a class="header" href="#three-tier-web-application">Three-Tier Web Application</a></h3>
<pre><code>                         Internet
                             │
                    ┌────────▼────────┐
                    │   CloudFront    │  CDN
                    │   (Optional)    │
                    └────────┬────────┘
                             │
                    ┌────────▼────────┐
                    │  Route 53       │  DNS
                    └────────┬────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                          VPC                                 │
│                                                              │
│  ┌───────────────────────────────────────────────────────┐  │
│  │  Public Subnet (AZ-A)    Public Subnet (AZ-B)        │  │
│  │  ┌─────────────────┐     ┌─────────────────┐         │  │
│  │  │  Application    │     │  Application    │         │  │
│  │  │  Load Balancer  │     │  Load Balancer  │         │  │
│  │  └────────┬────────┘     └────────┬────────┘         │  │
│  └───────────┼──────────────────────┼───────────────────┘  │
│              │                      │                       │
│  ┌───────────▼──────────────────────▼───────────────────┐  │
│  │  Private Subnet (AZ-A)   Private Subnet (AZ-B)       │  │
│  │  ┌─────────────┐          ┌─────────────┐            │  │
│  │  │ Auto Scaling│          │ Auto Scaling│            │  │
│  │  │   Group     │          │   Group     │            │  │
│  │  │  ┌───┐ ┌───┐          │  ┌───┐ ┌───┐            │  │
│  │  │  │EC2│ │EC2│          │  │EC2│ │EC2│            │  │
│  │  │  └─┬─┘ └─┬─┘          │  └─┬─┘ └─┬─┘            │  │
│  │  └────┼─────┼────────────┘────┼─────┼──────────────┘  │
│  │       │     │                 │     │                  │
│  │  ┌────▼─────▼─────────────────▼─────▼──────────────┐  │
│  │  │  Database Subnet (AZ-A)   Database Subnet (AZ-B)│  │
│  │  │  ┌──────────────┐          ┌──────────────┐     │  │
│  │  │  │ RDS Primary  │◄────────▶│ RDS Standby  │     │  │
│  │  │  └──────────────┘          └──────────────┘     │  │
│  │  │                                                  │  │
│  │  │  ┌──────────────┐                               │  │
│  │  │  │ ElastiCache  │                               │  │
│  │  │  └──────────────┘                               │  │
│  │  └──────────────────────────────────────────────────┘  │
│  │                                                          │
│  │  Additional Services:                                   │
│  │  ├─ S3: Static assets                                   │
│  │  ├─ CloudWatch: Monitoring                              │
│  │  ├─ CloudTrail: Audit logs                              │
│  │  └─ WAF: Web application firewall                       │
└──────────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="serverless-microservices"><a class="header" href="#serverless-microservices">Serverless Microservices</a></h3>
<pre><code>                        ┌─────────────┐
                        │   Users     │
                        └──────┬──────┘
                               │
                      ┌────────▼────────┐
                      │  CloudFront +   │
                      │  S3 (Frontend)  │
                      └────────┬────────┘
                               │
                      ┌────────▼────────┐
                      │  API Gateway    │
                      └────────┬────────┘
                               │
        ┌──────────────────────┼──────────────────────┐
        │                      │                      │
   ┌────▼─────┐          ┌────▼─────┐          ┌────▼─────┐
   │ Lambda   │          │ Lambda   │          │ Lambda   │
   │ User Svc │          │ Order Svc│          │ Pay Svc  │
   └────┬─────┘          └────┬─────┘          └────┬─────┘
        │                     │                     │
   ┌────▼─────┐          ┌────▼─────┐          ┌────▼─────┐
   │DynamoDB  │          │DynamoDB  │          │DynamoDB  │
   │Users     │          │Orders    │          │Payments  │
   └──────────┘          └──────────┘          └──────────┘
        │                     │                     │
        └─────────────────────┼─────────────────────┘
                              │
                       ┌──────▼──────┐
                       │  EventBridge│
                       │     SNS     │
                       └─────────────┘
</code></pre>
<h2 id="cost-optimization-1"><a class="header" href="#cost-optimization-1">Cost Optimization</a></h2>
<h3 id="cost-optimization-strategies-1"><a class="header" href="#cost-optimization-strategies-1">Cost Optimization Strategies</a></h3>
<pre><code>┌──────────────────────────────────────────────────────────┐
│ AWS Cost Optimization Checklist                          │
├──────────────────────────────────────────────────────────┤
│                                                           │
│ Compute                                                   │
│ ☐ Use Reserved Instances for steady workloads            │
│ ☐ Use Spot Instances for fault-tolerant workloads        │
│ ☐ Right-size instances based on metrics                  │
│ ☐ Use Savings Plans for flexible commitments             │
│ ☐ Stop development/test instances off-hours              │
│ ☐ Use Lambda/Fargate for serverless workloads            │
│ ☐ Enable EC2 Auto Scaling                                │
│                                                           │
│ Storage                                                   │
│ ☐ Use S3 Lifecycle policies                              │
│ ☐ Move infrequent data to S3-IA or Glacier               │
│ ☐ Delete unattached EBS volumes                          │
│ ☐ Delete old snapshots                                   │
│ ☐ Use S3 Intelligent-Tiering                             │
│ ☐ Enable EBS volume encryption only when needed          │
│                                                           │
│ Database                                                  │
│ ☐ Use Aurora Serverless for variable workloads           │
│ ☐ Stop RDS instances when not in use                     │
│ ☐ Use DynamoDB On-Demand for unpredictable traffic       │
│ ☐ Use read replicas efficiently                          │
│ ☐ Right-size RDS instances                               │
│                                                           │
│ Network                                                   │
│ ☐ Use CloudFront to reduce data transfer costs           │
│ ☐ Use VPC endpoints to avoid NAT Gateway costs           │
│ ☐ Consolidate data transfer within same region           │
│ ☐ Use Direct Connect for high volume transfers           │
│                                                           │
│ Monitoring                                                │
│ ☐ Set up AWS Budgets with alerts                         │
│ ☐ Use Cost Explorer to analyze spending                  │
│ ☐ Enable Cost Allocation Tags                            │
│ ☐ Use Trusted Advisor cost optimization checks           │
│ ☐ Review AWS Cost Anomaly Detection                      │
└──────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="aws-cost-management-cli"><a class="header" href="#aws-cost-management-cli">AWS Cost Management CLI</a></h3>
<pre><code class="language-bash"># Set up budget
aws budgets create-budget \
  --account-id 123456789012 \
  --budget '{
    "BudgetName": "Monthly-Budget",
    "BudgetLimit": {
      "Amount": "1000",
      "Unit": "USD"
    },
    "TimeUnit": "MONTHLY",
    "BudgetType": "COST"
  }' \
  --notifications-with-subscribers '[{
    "Notification": {
      "NotificationType": "ACTUAL",
      "ComparisonOperator": "GREATER_THAN",
      "Threshold": 80,
      "ThresholdType": "PERCENTAGE"
    },
    "Subscribers": [{
      "SubscriptionType": "EMAIL",
      "Address": "email@example.com"
    }]
  }]'

# Get cost and usage
aws ce get-cost-and-usage \
  --time-period Start=2024-01-01,End=2024-01-31 \
  --granularity DAILY \
  --metrics BlendedCost

# Get cost forecast
aws ce get-cost-forecast \
  --time-period Start=2024-02-01,End=2024-02-29 \
  --metric BLENDED_COST \
  --granularity MONTHLY
</code></pre>
<h2 id="best-practices-24"><a class="header" href="#best-practices-24">Best Practices</a></h2>
<h3 id="security-best-practices-2"><a class="header" href="#security-best-practices-2">Security Best Practices</a></h3>
<pre><code>1. Identity and Access
   ├─ Enable MFA for all users
   ├─ Use IAM roles instead of access keys
   ├─ Implement least privilege principle
   ├─ Rotate credentials regularly
   └─ Use AWS SSO for centralized access

2. Network Security
   ├─ Use VPC with public/private subnets
   ├─ Implement security groups properly
   ├─ Use Network ACLs as additional layer
   ├─ Enable VPC Flow Logs
   └─ Use AWS WAF for web applications

3. Data Protection
   ├─ Enable encryption at rest
   ├─ Use TLS/SSL for data in transit
   ├─ Regular backups and snapshots
   ├─ Enable versioning on S3
   └─ Use KMS for key management

4. Monitoring and Logging
   ├─ Enable CloudTrail for all regions
   ├─ Use CloudWatch for monitoring
   ├─ Set up security alerts
   ├─ Regular security audits
   └─ Use AWS Config for compliance

5. Incident Response
   ├─ Have incident response plan
   ├─ Use AWS Systems Manager
   ├─ Enable automated responses
   └─ Regular disaster recovery drills
</code></pre>
<h3 id="performance-best-practices"><a class="header" href="#performance-best-practices">Performance Best Practices</a></h3>
<pre><code>1. Compute
   ├─ Choose appropriate instance types
   ├─ Use Auto Scaling
   ├─ Implement load balancing
   ├─ Consider serverless for variable workloads
   └─ Use placement groups for HPC

2. Storage
   ├─ Use EBS-optimized instances
   ├─ Choose correct EBS volume type
   ├─ Use S3 Transfer Acceleration
   ├─ Implement caching (CloudFront, ElastiCache)
   └─ Use S3 multipart upload

3. Database
   ├─ Use read replicas for read-heavy workloads
   ├─ Enable query caching
   ├─ Use connection pooling
   ├─ Implement proper indexing
   └─ Consider Aurora for better performance

4. Network
   ├─ Use CloudFront CDN
   ├─ Enable enhanced networking
   ├─ Use VPC endpoints
   ├─ Implement Route 53 routing policies
   └─ Consider Direct Connect
</code></pre>
<h3 id="reliability-best-practices"><a class="header" href="#reliability-best-practices">Reliability Best Practices</a></h3>
<pre><code>1. High Availability
   ├─ Deploy across multiple AZs
   ├─ Use Multi-AZ for databases
   ├─ Implement auto-scaling
   ├─ Use Elastic Load Balancing
   └─ Consider multi-region for critical workloads

2. Backup and Recovery
   ├─ Automated backups for RDS
   ├─ Regular EBS snapshots
   ├─ Enable S3 versioning
   ├─ Cross-region replication
   └─ Test recovery procedures

3. Monitoring
   ├─ Set up CloudWatch alarms
   ├─ Use health checks
   ├─ Monitor key metrics
   ├─ Implement automated responses
   └─ Use AWS X-Ray for tracing

4. Testing
   ├─ Regular load testing
   ├─ Chaos engineering
   ├─ Failover testing
   └─ Disaster recovery drills
</code></pre>
<h2 id="cli-reference"><a class="header" href="#cli-reference">CLI Reference</a></h2>
<h3 id="common-cli-patterns"><a class="header" href="#common-cli-patterns">Common CLI Patterns</a></h3>
<pre><code class="language-bash"># Use --query for filtering output
aws ec2 describe-instances \
  --query 'Reservations[].Instances[].[InstanceId,State.Name]' \
  --output table

# Use --filters for filtering resources
aws ec2 describe-instances \
  --filters "Name=instance-state-name,Values=running" \
           "Name=tag:Environment,Values=production"

# Use --output for different formats
aws ec2 describe-instances --output json
aws ec2 describe-instances --output yaml
aws ec2 describe-instances --output table
aws ec2 describe-instances --output text

# Use JMESPath for complex queries
aws ec2 describe-instances \
  --query 'Reservations[].Instances[?State.Name==`running`].[InstanceId,PrivateIpAddress]'

# Paginate results
aws s3api list-objects-v2 \
  --bucket my-bucket \
  --max-items 100 \
  --page-size 10

# Wait for resource to be ready
aws ec2 wait instance-running --instance-ids i-1234567890abcdef0

# Generate skeleton for complex commands
aws ec2 run-instances --generate-cli-skeleton &gt; template.json
# Edit template.json
aws ec2 run-instances --cli-input-json file://template.json
</code></pre>
<h3 id="useful-aliases"><a class="header" href="#useful-aliases">Useful Aliases</a></h3>
<pre><code class="language-bash"># Add to ~/.bashrc or ~/.zshrc

alias ec2-list='aws ec2 describe-instances --query "Reservations[].Instances[].[InstanceId,InstanceType,State.Name,PublicIpAddress,Tags[?Key=='\''Name'\''].Value|[0]]" --output table'

alias ec2-running='aws ec2 describe-instances --filters "Name=instance-state-name,Values=running" --query "Reservations[].Instances[].[InstanceId,InstanceType,PublicIpAddress]" --output table'

alias s3-buckets='aws s3 ls'

alias lambda-list='aws lambda list-functions --query "Functions[].[FunctionName,Runtime,LastModified]" --output table'

alias rds-list='aws rds describe-db-instances --query "DBInstances[].[DBInstanceIdentifier,DBInstanceStatus,Engine,DBInstanceClass]" --output table'
</code></pre>
<h2 id="certification-paths"><a class="header" href="#certification-paths">Certification Paths</a></h2>
<h3 id="aws-certification-roadmap"><a class="header" href="#aws-certification-roadmap">AWS Certification Roadmap</a></h3>
<pre><code>Foundational
    │
    └─ AWS Certified Cloud Practitioner
        │
        ├─ Associate Level
        │   ├─ Solutions Architect Associate
        │   ├─ Developer Associate
        │   └─ SysOps Administrator Associate
        │
        └─ Professional Level
            ├─ Solutions Architect Professional
            └─ DevOps Engineer Professional
            
        Specialty (Optional)
        ├─ Security Specialty
        ├─ Machine Learning Specialty
        ├─ Advanced Networking Specialty
        ├─ Database Specialty
        └─ Data Analytics Specialty
</code></pre>
<h2 id="resources-21"><a class="header" href="#resources-21">Resources</a></h2>
<h3 id="official-documentation-3"><a class="header" href="#official-documentation-3">Official Documentation</a></h3>
<ul>
<li>AWS Documentation: https://docs.aws.amazon.com</li>
<li>AWS CLI Reference: https://awscli.amazonaws.com/v2/documentation/api/latest/reference/index.html</li>
<li>AWS SDK Documentation: https://aws.amazon.com/tools/</li>
</ul>
<h3 id="learning-resources-2"><a class="header" href="#learning-resources-2">Learning Resources</a></h3>
<ul>
<li>AWS Training and Certification: https://aws.amazon.com/training/</li>
<li>AWS Free Tier: https://aws.amazon.com/free/</li>
<li>AWS Well-Architected Framework: https://aws.amazon.com/architecture/well-architected/</li>
<li>AWS Samples: https://github.com/aws-samples</li>
<li>AWS Workshops: https://workshops.aws/</li>
</ul>
<h3 id="community-4"><a class="header" href="#community-4">Community</a></h3>
<ul>
<li>r/aws: Reddit community</li>
<li>AWS Forums: https://forums.aws.amazon.com/</li>
<li>AWS re:Post: https://repost.aws/</li>
<li>AWS User Groups: https://aws.amazon.com/developer/community/usergroups/</li>
</ul>
<h3 id="tools-6"><a class="header" href="#tools-6">Tools</a></h3>
<ul>
<li>AWS CLI: Command-line interface</li>
<li>AWS SDKs: Python (Boto3), JavaScript, Java, .NET, etc.</li>
<li>AWS CDK: Infrastructure as code using programming languages</li>
<li>Terraform: Multi-cloud infrastructure as code</li>
<li>LocalStack: Local AWS cloud emulator</li>
</ul>
<hr />
<p><strong>Updated</strong>: January 2025</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="microsoft-azure-1"><a class="header" href="#microsoft-azure-1">Microsoft Azure</a></h1>
<h2 id="table-of-contents-23"><a class="header" href="#table-of-contents-23">Table of Contents</a></h2>
<ul>
<li><a href="cloud/azure.html#introduction">Introduction</a></li>
<li><a href="cloud/azure.html#azure-global-infrastructure">Azure Global Infrastructure</a></li>
<li><a href="cloud/azure.html#getting-started">Getting Started</a></li>
<li><a href="cloud/azure.html#core-compute-services">Core Compute Services</a></li>
<li><a href="cloud/azure.html#storage-services">Storage Services</a></li>
<li><a href="cloud/azure.html#database-services">Database Services</a></li>
<li><a href="cloud/azure.html#networking-services">Networking Services</a></li>
<li><a href="cloud/azure.html#serverless-services">Serverless Services</a></li>
<li><a href="cloud/azure.html#container-services">Container Services</a></li>
<li><a href="cloud/azure.html#security-services">Security Services</a></li>
<li><a href="cloud/azure.html#monitoring-and-management">Monitoring and Management</a></li>
<li><a href="cloud/azure.html#devops-and-cicd">DevOps and CI/CD</a></li>
<li><a href="cloud/azure.html#ai-and-machine-learning">AI and Machine Learning</a></li>
<li><a href="cloud/azure.html#architecture-examples">Architecture Examples</a></li>
<li><a href="cloud/azure.html#azure-vs-aws-comparison">Azure vs AWS Comparison</a></li>
<li><a href="cloud/azure.html#cost-optimization">Cost Optimization</a></li>
<li><a href="cloud/azure.html#best-practices">Best Practices</a></li>
<li><a href="cloud/azure.html#cli-reference">CLI Reference</a></li>
</ul>
<h2 id="introduction-10"><a class="header" href="#introduction-10">Introduction</a></h2>
<p>Microsoft Azure is a cloud computing platform providing 200+ services for building, deploying, and managing applications through Microsoft's global network of data centers.</p>
<h3 id="key-advantages-1"><a class="header" href="#key-advantages-1">Key Advantages</a></h3>
<ul>
<li><strong>Enterprise Integration</strong>: Seamless integration with Microsoft products (Office 365, Active Directory, Dynamics)</li>
<li><strong>Hybrid Cloud</strong>: Industry-leading hybrid cloud capabilities with Azure Arc</li>
<li><strong>Global Reach</strong>: 60+ regions (more than any other cloud provider)</li>
<li><strong>Compliance</strong>: Most comprehensive compliance offerings</li>
<li><strong>Windows Workloads</strong>: Best platform for .NET and Windows-based applications</li>
<li><strong>Developer Tools</strong>: Excellent integration with Visual Studio and GitHub</li>
</ul>
<h3 id="azure-account-hierarchy"><a class="header" href="#azure-account-hierarchy">Azure Account Hierarchy</a></h3>
<pre><code>┌─────────────────────────────────────────────────┐
│        Azure Entra ID (Azure AD) Tenant          │
│        (Organization-wide identity)              │
└──────────────────┬──────────────────────────────┘
                   │
         ┌─────────▼─────────┐
         │  Management Groups │
         └─────────┬──────────┘
                   │
         ┌─────────▼─────────┐
         │   Subscriptions    │
         │  ├─ Production     │
         │  ├─ Development    │
         │  └─ Testing        │
         └─────────┬──────────┘
                   │
         ┌─────────▼─────────┐
         │  Resource Groups   │
         │  ├─ RG-Web         │
         │  ├─ RG-Database    │
         │  └─ RG-Network     │
         └─────────┬──────────┘
                   │
         ┌─────────▼─────────┐
         │     Resources      │
         │  ├─ VMs            │
         │  ├─ Storage        │
         │  └─ Databases      │
         └────────────────────┘
</code></pre>
<h2 id="azure-global-infrastructure"><a class="header" href="#azure-global-infrastructure">Azure Global Infrastructure</a></h2>
<h3 id="hierarchy-1"><a class="header" href="#hierarchy-1">Hierarchy</a></h3>
<pre><code>Geography (e.g., United States)
  └─ Region (e.g., East US, West US)
      └─ Availability Zones (3 per region)
          └─ Data Centers
              └─ Edge Locations (Azure Front Door)
</code></pre>
<h3 id="azure-regions"><a class="header" href="#azure-regions">Azure Regions</a></h3>
<p><strong>Azure has 60+ regions worldwide</strong> - more than any other cloud provider</p>
<p><strong>Paired Regions</strong>: Each region is paired with another region for disaster recovery</p>
<ul>
<li>Example: East US ↔ West US</li>
<li>Example: North Europe ↔ West Europe</li>
</ul>
<h3 id="availability-zones"><a class="header" href="#availability-zones">Availability Zones</a></h3>
<ul>
<li>3 or more physically separate zones within a region</li>
<li>Each zone has independent power, cooling, networking</li>
<li>&lt; 2ms latency between zones</li>
<li>Not all regions have Availability Zones</li>
</ul>
<h3 id="region-selection-criteria-1"><a class="header" href="#region-selection-criteria-1">Region Selection Criteria</a></h3>
<pre><code>Factor              Consideration
────────────────────────────────────────────────
Latency             Distance to users
Compliance          Data residency requirements
Services            Service availability varies
Cost                Pricing differs by region
Paired Region       Consider DR requirements
</code></pre>
<h2 id="getting-started-3"><a class="header" href="#getting-started-3">Getting Started</a></h2>
<h3 id="azure-cli-installation"><a class="header" href="#azure-cli-installation">Azure CLI Installation</a></h3>
<pre><code class="language-bash"># Install Azure CLI (Linux)
curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

# Install Azure CLI (macOS)
brew update &amp;&amp; brew install azure-cli

# Install Azure CLI (Windows - PowerShell)
Invoke-WebRequest -Uri https://aka.ms/installazurecliwindows -OutFile .\AzureCLI.msi
Start-Process msiexec.exe -Wait -ArgumentList '/I AzureCLI.msi /quiet'

# Verify installation
az --version

# Login to Azure
az login

# Login with specific tenant
az login --tenant TENANT_ID

# Login with service principal
az login --service-principal \
  --username APP_ID \
  --password PASSWORD \
  --tenant TENANT_ID

# Set default subscription
az account set --subscription "My Subscription"

# List subscriptions
az account list --output table

# Show current subscription
az account show
</code></pre>
<h3 id="azure-powershell"><a class="header" href="#azure-powershell">Azure PowerShell</a></h3>
<pre><code class="language-powershell"># Install Azure PowerShell
Install-Module -Name Az -Repository PSGallery -Force

# Connect to Azure
Connect-AzAccount

# Set subscription
Set-AzContext -SubscriptionId "subscription-id"

# List subscriptions
Get-AzSubscription

# List resource groups
Get-AzResourceGroup
</code></pre>
<h3 id="basic-azure-cli-commands"><a class="header" href="#basic-azure-cli-commands">Basic Azure CLI Commands</a></h3>
<pre><code class="language-bash"># Get help
az help
az vm help

# List all resource groups
az group list --output table

# List all resources
az resource list --output table

# List available locations
az account list-locations --output table

# List available VM sizes
az vm list-sizes --location eastus --output table

# Interactive mode
az interactive
</code></pre>
<h2 id="core-compute-services-1"><a class="header" href="#core-compute-services-1">Core Compute Services</a></h2>
<h3 id="azure-virtual-machines"><a class="header" href="#azure-virtual-machines">Azure Virtual Machines</a></h3>
<p>Cloud-based virtual servers.</p>
<h4 id="vm-series-and-sizes"><a class="header" href="#vm-series-and-sizes">VM Series and Sizes</a></h4>
<pre><code>Series      vCPU    Memory    Use Case                      AWS Equivalent
────────────────────────────────────────────────────────────────────────────
B-Series    1-20    0.5-80GB  Burstable, dev/test          t3
D-Series    2-96    8-384GB   General purpose              m5
F-Series    2-72    4-144GB   Compute optimized            c5
E-Series    2-96    16-672GB  Memory optimized             r5
M-Series    128-416 2-12TB    Largest memory               x1e
N-Series    6-24    112-448GB GPU instances                p3/g4
</code></pre>
<h4 id="vm-pricing-models"><a class="header" href="#vm-pricing-models">VM Pricing Models</a></h4>
<pre><code>Model                   Discount    Commitment    Use Case
───────────────────────────────────────────────────────────────
Pay-as-you-go          Baseline    None          Short-term
Reserved Instances     Up to 72%   1-3 years     Steady state
Spot VMs               Up to 90%   None          Fault-tolerant
Azure Hybrid Benefit   Up to 85%   None          Existing licenses
</code></pre>
<h4 id="vm-cli-examples"><a class="header" href="#vm-cli-examples">VM CLI Examples</a></h4>
<pre><code class="language-bash"># Create resource group
az group create \
  --name myResourceGroup \
  --location eastus

# List available VM images
az vm image list --output table
az vm image list --publisher MicrosoftWindowsServer --output table

# Create Linux VM
az vm create \
  --resource-group myResourceGroup \
  --name myVM \
  --image Ubuntu2204 \
  --size Standard_B2s \
  --admin-username azureuser \
  --generate-ssh-keys \
  --public-ip-sku Standard \
  --tags Environment=Production Owner=IT

# Create Windows VM
az vm create \
  --resource-group myResourceGroup \
  --name myWindowsVM \
  --image Win2022Datacenter \
  --size Standard_D2s_v3 \
  --admin-username azureuser \
  --admin-password 'SecurePassword123!'

# List VMs
az vm list --output table

# Get VM details
az vm show \
  --resource-group myResourceGroup \
  --name myVM \
  --show-details

# Start VM
az vm start \
  --resource-group myResourceGroup \
  --name myVM

# Stop VM (deallocate to stop billing)
az vm deallocate \
  --resource-group myResourceGroup \
  --name myVM

# Restart VM
az vm restart \
  --resource-group myResourceGroup \
  --name myVM

# Resize VM
az vm resize \
  --resource-group myResourceGroup \
  --name myVM \
  --size Standard_D4s_v3

# Delete VM
az vm delete \
  --resource-group myResourceGroup \
  --name myVM \
  --yes

# Open port
az vm open-port \
  --resource-group myResourceGroup \
  --name myVM \
  --port 80 \
  --priority 1001

# Run command on VM
az vm run-command invoke \
  --resource-group myResourceGroup \
  --name myVM \
  --command-id RunShellScript \
  --scripts "sudo apt-get update &amp;&amp; sudo apt-get install -y nginx"

# Create VM from snapshot
az vm create \
  --resource-group myResourceGroup \
  --name myRestoredVM \
  --attach-os-disk myOSDisk \
  --os-type Linux

# Get VM instance metadata (from within VM)
curl -H Metadata:true "http://169.254.169.254/metadata/instance?api-version=2021-02-01"
</code></pre>
<h4 id="custom-script-extension"><a class="header" href="#custom-script-extension">Custom Script Extension</a></h4>
<pre><code class="language-bash"># Add custom script extension (Linux)
az vm extension set \
  --resource-group myResourceGroup \
  --vm-name myVM \
  --name customScript \
  --publisher Microsoft.Azure.Extensions \
  --settings '{"fileUris": ["https://raw.githubusercontent.com/user/repo/script.sh"],"commandToExecute": "./script.sh"}'

# Add custom script extension (Windows)
az vm extension set \
  --resource-group myResourceGroup \
  --vm-name myWindowsVM \
  --name CustomScriptExtension \
  --publisher Microsoft.Compute \
  --settings '{"fileUris": ["https://example.com/script.ps1"],"commandToExecute": "powershell -ExecutionPolicy Unrestricted -File script.ps1"}'
</code></pre>
<h3 id="azure-virtual-machine-scale-sets-vmss"><a class="header" href="#azure-virtual-machine-scale-sets-vmss">Azure Virtual Machine Scale Sets (VMSS)</a></h3>
<p>Auto-scaling groups of identical VMs.</p>
<h4 id="vmss-architecture"><a class="header" href="#vmss-architecture">VMSS Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────────┐
│          Azure Load Balancer                     │
└──────────────────┬──────────────────────────────┘
                   │
        ┌──────────┼──────────┐
        │          │          │
    ┌───▼───┐  ┌───▼───┐  ┌───▼───┐
    │ VM 1  │  │ VM 2  │  │ VM 3  │
    └───────┘  └───────┘  └───────┘
        │          │          │
        └──────────┼──────────┘
                   │
        ┌──────────▼──────────┐
        │ Virtual Machine     │
        │ Scale Set (VMSS)    │
        │                     │
        │ Min: 2              │
        │ Current: 3          │
        │ Max: 10             │
        │                     │
        │ Scale Rules:        │
        │ CPU &gt; 75%: +1 VM    │
        │ CPU &lt; 25%: -1 VM    │
        └─────────────────────┘
</code></pre>
<h4 id="vmss-cli-examples"><a class="header" href="#vmss-cli-examples">VMSS CLI Examples</a></h4>
<pre><code class="language-bash"># Create VMSS
az vmss create \
  --resource-group myResourceGroup \
  --name myScaleSet \
  --image Ubuntu2204 \
  --instance-count 3 \
  --vm-sku Standard_B2s \
  --admin-username azureuser \
  --generate-ssh-keys \
  --load-balancer myLoadBalancer \
  --upgrade-policy-mode Automatic

# List VMSS
az vmss list --output table

# Scale manually
az vmss scale \
  --resource-group myResourceGroup \
  --name myScaleSet \
  --new-capacity 5

# Create autoscale profile
az monitor autoscale create \
  --resource-group myResourceGroup \
  --resource myScaleSet \
  --resource-type Microsoft.Compute/virtualMachineScaleSets \
  --name myAutoscaleProfile \
  --min-count 2 \
  --max-count 10 \
  --count 3

# Create autoscale rule (scale out)
az monitor autoscale rule create \
  --resource-group myResourceGroup \
  --autoscale-name myAutoscaleProfile \
  --condition "Percentage CPU &gt; 75 avg 5m" \
  --scale out 1

# Create autoscale rule (scale in)
az monitor autoscale rule create \
  --resource-group myResourceGroup \
  --autoscale-name myAutoscaleProfile \
  --condition "Percentage CPU &lt; 25 avg 5m" \
  --scale in 1

# List VMSS instances
az vmss list-instances \
  --resource-group myResourceGroup \
  --name myScaleSet \
  --output table

# Update VMSS image
az vmss update \
  --resource-group myResourceGroup \
  --name myScaleSet \
  --set virtualMachineProfile.storageProfile.imageReference.version=latest

# Start rolling upgrade
az vmss update-instances \
  --resource-group myResourceGroup \
  --name myScaleSet \
  --instance-ids '*'

# Delete VMSS
az vmss delete \
  --resource-group myResourceGroup \
  --name myScaleSet
</code></pre>
<h3 id="azure-app-service"><a class="header" href="#azure-app-service">Azure App Service</a></h3>
<p>PaaS for web applications.</p>
<pre><code class="language-bash"># Create App Service Plan
az appservice plan create \
  --name myAppServicePlan \
  --resource-group myResourceGroup \
  --sku B1 \
  --is-linux

# Create Web App
az webapp create \
  --resource-group myResourceGroup \
  --plan myAppServicePlan \
  --name myUniqueWebApp123 \
  --runtime "NODE:18-lts"

# Deploy from GitHub
az webapp deployment source config \
  --name myUniqueWebApp123 \
  --resource-group myResourceGroup \
  --repo-url https://github.com/user/repo \
  --branch main \
  --manual-integration

# Deploy from local Git
az webapp deployment source config-local-git \
  --name myUniqueWebApp123 \
  --resource-group myResourceGroup

# Deploy ZIP file
az webapp deployment source config-zip \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123 \
  --src app.zip

# Set environment variables
az webapp config appsettings set \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123 \
  --settings DB_HOST=mydb.database.windows.net DB_NAME=mydb

# Enable HTTPS only
az webapp update \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123 \
  --https-only true

# Scale up (change plan)
az appservice plan update \
  --name myAppServicePlan \
  --resource-group myResourceGroup \
  --sku P1V2

# Scale out (add instances)
az appservice plan update \
  --name myAppServicePlan \
  --resource-group myResourceGroup \
  --number-of-workers 3

# View logs
az webapp log tail \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123

# Restart web app
az webapp restart \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123

# Delete web app
az webapp delete \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123
</code></pre>
<h2 id="storage-services-2"><a class="header" href="#storage-services-2">Storage Services</a></h2>
<h3 id="azure-blob-storage"><a class="header" href="#azure-blob-storage">Azure Blob Storage</a></h3>
<p>Object storage service (equivalent to AWS S3).</p>
<h4 id="blob-storage-types"><a class="header" href="#blob-storage-types">Blob Storage Types</a></h4>
<pre><code>Type            Use Case                        Performance    Cost
────────────────────────────────────────────────────────────────────
Block Blobs     Text and binary data           Standard/Premium  $$
Append Blobs    Logging data                   Standard         $$
Page Blobs      VHD files, random access       Premium          $$$
</code></pre>
<h4 id="blob-access-tiers"><a class="header" href="#blob-access-tiers">Blob Access Tiers</a></h4>
<pre><code>Tier        Access Frequency    Retrieval Time    Cost
─────────────────────────────────────────────────────────
Hot         Frequent            Immediate         $$$
Cool        Infrequent (30d+)   Immediate         $$
Cold        Rare (90d+)         Immediate         $
Archive     Rarely (180d+)      Hours             ¢
</code></pre>
<h4 id="blob-storage-architecture"><a class="header" href="#blob-storage-architecture">Blob Storage Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────────┐
│  Storage Account: mystorageaccount              │
│  Location: eastus                                │
│  Replication: LRS/GRS/RA-GRS                    │
├─────────────────────────────────────────────────┤
│                                                  │
│  Container: images (Blob Container)             │
│    ├─ logo.png                                  │
│    ├─ banner.jpg                                │
│    └─ photos/                                   │
│        ├─ photo1.jpg                            │
│        └─ photo2.jpg                            │
│                                                  │
│  Container: documents                           │
│    ├─ report.pdf                                │
│    └─ invoice.xlsx                              │
│                                                  │
│  Container: backups                             │
│    └─ database-backup.sql                      │
│                                                  │
│  File Share: fileshare (Azure Files)           │
│    ├─ shared/                                   │
│    └─ config/                                   │
│                                                  │
│  Table Storage (NoSQL)                          │
│  Queue Storage (Message Queue)                  │
└─────────────────────────────────────────────────┘
</code></pre>
<h4 id="blob-storage-cli-examples"><a class="header" href="#blob-storage-cli-examples">Blob Storage CLI Examples</a></h4>
<pre><code class="language-bash"># Create storage account
az storage account create \
  --name mystorageaccount123 \
  --resource-group myResourceGroup \
  --location eastus \
  --sku Standard_LRS \
  --kind StorageV2

# Get connection string
az storage account show-connection-string \
  --name mystorageaccount123 \
  --resource-group myResourceGroup

# Export connection string
export AZURE_STORAGE_CONNECTION_STRING="&lt;connection-string&gt;"

# Create container
az storage container create \
  --name mycontainer \
  --account-name mystorageaccount123 \
  --public-access off

# Upload blob
az storage blob upload \
  --container-name mycontainer \
  --name myfile.txt \
  --file ./local-file.txt \
  --account-name mystorageaccount123

# Upload directory
az storage blob upload-batch \
  --destination mycontainer \
  --source ./local-directory \
  --account-name mystorageaccount123

# Download blob
az storage blob download \
  --container-name mycontainer \
  --name myfile.txt \
  --file ./downloaded-file.txt \
  --account-name mystorageaccount123

# List blobs
az storage blob list \
  --container-name mycontainer \
  --account-name mystorageaccount123 \
  --output table

# Copy blob
az storage blob copy start \
  --source-container mycontainer \
  --source-blob myfile.txt \
  --destination-container backup \
  --destination-blob myfile-backup.txt \
  --account-name mystorageaccount123

# Generate SAS token
az storage blob generate-sas \
  --container-name mycontainer \
  --name myfile.txt \
  --account-name mystorageaccount123 \
  --permissions r \
  --expiry 2024-12-31T23:59:59Z

# Set blob tier
az storage blob set-tier \
  --container-name mycontainer \
  --name myfile.txt \
  --tier Cool \
  --account-name mystorageaccount123

# Delete blob
az storage blob delete \
  --container-name mycontainer \
  --name myfile.txt \
  --account-name mystorageaccount123

# Enable versioning
az storage account blob-service-properties update \
  --account-name mystorageaccount123 \
  --resource-group myResourceGroup \
  --enable-versioning true

# Set lifecycle management policy
az storage account management-policy create \
  --account-name mystorageaccount123 \
  --resource-group myResourceGroup \
  --policy @policy.json
</code></pre>
<h4 id="lifecycle-management-policy-example"><a class="header" href="#lifecycle-management-policy-example">Lifecycle Management Policy Example</a></h4>
<pre><code class="language-json">{
  "rules": [
    {
      "enabled": true,
      "name": "MoveToArchive",
      "type": "Lifecycle",
      "definition": {
        "actions": {
          "baseBlob": {
            "tierToCool": {
              "daysAfterModificationGreaterThan": 30
            },
            "tierToArchive": {
              "daysAfterModificationGreaterThan": 90
            },
            "delete": {
              "daysAfterModificationGreaterThan": 365
            }
          }
        },
        "filters": {
          "blobTypes": ["blockBlob"],
          "prefixMatch": ["logs/"]
        }
      }
    }
  ]
}
</code></pre>
<h4 id="blob-storage-sdk-example-python"><a class="header" href="#blob-storage-sdk-example-python">Blob Storage SDK Example (Python)</a></h4>
<pre><code class="language-python">from azure.storage.blob import BlobServiceClient, BlobClient, ContainerClient
from azure.storage.blob import BlobSasPermissions, generate_blob_sas
from datetime import datetime, timedelta

# Create blob service client
connection_string = "DefaultEndpointsProtocol=https;AccountName=..."
blob_service_client = BlobServiceClient.from_connection_string(connection_string)

# Create container
def create_container(container_name):
    container_client = blob_service_client.create_container(container_name)
    return container_client

# Upload blob
def upload_blob(container_name, blob_name, data):
    blob_client = blob_service_client.get_blob_client(
        container=container_name,
        blob=blob_name
    )
    blob_client.upload_blob(data, overwrite=True)
    print(f"Uploaded {blob_name}")

# Upload file
def upload_file(container_name, file_path, blob_name=None):
    if blob_name is None:
        blob_name = file_path.split('/')[-1]
    
    blob_client = blob_service_client.get_blob_client(
        container=container_name,
        blob=blob_name
    )
    
    with open(file_path, "rb") as data:
        blob_client.upload_blob(data, overwrite=True)
    print(f"Uploaded {file_path} as {blob_name}")

# Download blob
def download_blob(container_name, blob_name, file_path):
    blob_client = blob_service_client.get_blob_client(
        container=container_name,
        blob=blob_name
    )
    
    with open(file_path, "wb") as file:
        data = blob_client.download_blob()
        file.write(data.readall())
    print(f"Downloaded {blob_name} to {file_path}")

# List blobs
def list_blobs(container_name):
    container_client = blob_service_client.get_container_client(container_name)
    blob_list = container_client.list_blobs()
    
    for blob in blob_list:
        print(f"{blob.name}: {blob.size} bytes")

# Generate SAS URL
def generate_sas_url(container_name, blob_name, account_name, account_key):
    sas_token = generate_blob_sas(
        account_name=account_name,
        container_name=container_name,
        blob_name=blob_name,
        account_key=account_key,
        permission=BlobSasPermissions(read=True),
        expiry=datetime.utcnow() + timedelta(hours=1)
    )
    
    url = f"https://{account_name}.blob.core.windows.net/{container_name}/{blob_name}?{sas_token}"
    return url

# Delete blob
def delete_blob(container_name, blob_name):
    blob_client = blob_service_client.get_blob_client(
        container=container_name,
        blob=blob_name
    )
    blob_client.delete_blob()
    print(f"Deleted {blob_name}")

# Usage
create_container("mycontainer")
upload_file("mycontainer", "./local-file.txt")
download_blob("mycontainer", "local-file.txt", "./downloaded.txt")
list_blobs("mycontainer")
</code></pre>
<h3 id="azure-files"><a class="header" href="#azure-files">Azure Files</a></h3>
<p>Managed SMB/NFS file shares.</p>
<pre><code class="language-bash"># Create file share
az storage share create \
  --name myfileshare \
  --account-name mystorageaccount123 \
  --quota 100

# Upload file to share
az storage file upload \
  --share-name myfileshare \
  --source ./local-file.txt \
  --account-name mystorageaccount123

# List files
az storage file list \
  --share-name myfileshare \
  --account-name mystorageaccount123 \
  --output table

# Mount file share (Linux)
sudo mkdir /mnt/azure
sudo mount -t cifs //mystorageaccount123.file.core.windows.net/myfileshare /mnt/azure \
  -o vers=3.0,username=mystorageaccount123,password=&lt;storage-key&gt;,dir_mode=0777,file_mode=0777

# Mount file share (Windows)
net use Z: \\mystorageaccount123.file.core.windows.net\myfileshare /user:Azure\mystorageaccount123 &lt;storage-key&gt;

# Add to /etc/fstab (Linux)
echo "//mystorageaccount123.file.core.windows.net/myfileshare /mnt/azure cifs vers=3.0,username=mystorageaccount123,password=&lt;storage-key&gt;,dir_mode=0777,file_mode=0777 0 0" | sudo tee -a /etc/fstab
</code></pre>
<h3 id="azure-disk-storage"><a class="header" href="#azure-disk-storage">Azure Disk Storage</a></h3>
<p>Managed disks for VMs (equivalent to AWS EBS).</p>
<h4 id="disk-types"><a class="header" href="#disk-types">Disk Types</a></h4>
<pre><code>Type            IOPS        Throughput      Use Case              Cost
─────────────────────────────────────────────────────────────────────
Ultra Disk      160K+       4,000 MB/s      Mission-critical      $$$$
Premium SSD v2  80K         1,200 MB/s      Production DBs        $$$
Premium SSD     20K         900 MB/s        Production            $$
Standard SSD    6K          750 MB/s        Web servers           $
Standard HDD    2K          500 MB/s        Backup, dev/test      ¢
</code></pre>
<pre><code class="language-bash"># Create managed disk
az disk create \
  --resource-group myResourceGroup \
  --name myDataDisk \
  --size-gb 128 \
  --sku Premium_LRS

# Attach disk to VM
az vm disk attach \
  --resource-group myResourceGroup \
  --vm-name myVM \
  --name myDataDisk

# Detach disk
az vm disk detach \
  --resource-group myResourceGroup \
  --vm-name myVM \
  --name myDataDisk

# Create snapshot
az snapshot create \
  --resource-group myResourceGroup \
  --name mySnapshot \
  --source myDataDisk

# Create disk from snapshot
az disk create \
  --resource-group myResourceGroup \
  --name myRestoredDisk \
  --source mySnapshot

# Increase disk size
az disk update \
  --resource-group myResourceGroup \
  --name myDataDisk \
  --size-gb 256
</code></pre>
<h2 id="database-services-2"><a class="header" href="#database-services-2">Database Services</a></h2>
<h3 id="azure-sql-database"><a class="header" href="#azure-sql-database">Azure SQL Database</a></h3>
<p>Managed SQL Server database.</p>
<h4 id="service-tiers"><a class="header" href="#service-tiers">Service Tiers</a></h4>
<pre><code>Tier          vCores    Memory    Max DB Size    Use Case          Cost
────────────────────────────────────────────────────────────────────────
Serverless    0.5-40    3-120GB   4TB           Variable load     $$
General       2-80      10.4-408GB 4TB           Balanced          $$
Purpose
Business      2-128     20.8-625GB 4TB           Mission-critical  $$$$
Critical
Hyperscale    2-128     20.8-625GB 100TB         Large databases   $$$
</code></pre>
<h4 id="sql-database-cli-examples"><a class="header" href="#sql-database-cli-examples">SQL Database CLI Examples</a></h4>
<pre><code class="language-bash"># Create SQL Server
az sql server create \
  --name myuniquesqlserver123 \
  --resource-group myResourceGroup \
  --location eastus \
  --admin-user sqladmin \
  --admin-password 'SecurePassword123!'

# Configure firewall rule
az sql server firewall-rule create \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name AllowMyIP \
  --start-ip-address 1.2.3.4 \
  --end-ip-address 1.2.3.4

# Allow Azure services
az sql server firewall-rule create \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name AllowAzureServices \
  --start-ip-address 0.0.0.0 \
  --end-ip-address 0.0.0.0

# Create database
az sql db create \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name myDatabase \
  --service-objective S0 \
  --backup-storage-redundancy Local

# Create serverless database
az sql db create \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name myServerlessDB \
  --edition GeneralPurpose \
  --compute-model Serverless \
  --family Gen5 \
  --capacity 2 \
  --auto-pause-delay 60

# List databases
az sql db list \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --output table

# Scale database
az sql db update \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name myDatabase \
  --service-objective S2

# Create read replica
az sql db replica create \
  --name myDatabase \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --partner-server myuniquesqlserver-replica \
  --partner-resource-group myResourceGroup

# Create backup
az sql db export \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name myDatabase \
  --admin-user sqladmin \
  --admin-password 'SecurePassword123!' \
  --storage-key-type StorageAccessKey \
  --storage-key "&lt;storage-key&gt;" \
  --storage-uri "https://mystorageaccount.blob.core.windows.net/backups/mydb.bacpac"

# Restore database
az sql db restore \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name myRestoredDB \
  --source-database myDatabase \
  --time "2024-01-01T00:00:00Z"

# Delete database
az sql db delete \
  --resource-group myResourceGroup \
  --server myuniquesqlserver123 \
  --name myDatabase \
  --yes

# Connect to database
sqlcmd -S myuniquesqlserver123.database.windows.net -d myDatabase -U sqladmin -P 'SecurePassword123!'
</code></pre>
<h4 id="sql-database-connection-example-python"><a class="header" href="#sql-database-connection-example-python">SQL Database Connection Example (Python)</a></h4>
<pre><code class="language-python">import pyodbc

# Connection string
server = 'myuniquesqlserver123.database.windows.net'
database = 'myDatabase'
username = 'sqladmin'
password = 'SecurePassword123!'
driver = '{ODBC Driver 18 for SQL Server}'

connection_string = f'DRIVER={driver};SERVER={server};DATABASE={database};UID={username};PWD={password}'

# Connect to database
conn = pyodbc.connect(connection_string)
cursor = conn.cursor()

# Create table
cursor.execute('''
    CREATE TABLE users (
        id INT PRIMARY KEY IDENTITY,
        name NVARCHAR(100),
        email NVARCHAR(100),
        created_at DATETIME DEFAULT GETDATE()
    )
''')

# Insert data
cursor.execute("INSERT INTO users (name, email) VALUES (?, ?)", ('Alice', 'alice@example.com'))
conn.commit()

# Query data
cursor.execute("SELECT * FROM users")
rows = cursor.fetchall()
for row in rows:
    print(f"ID: {row.id}, Name: {row.name}, Email: {row.email}")

# Close connection
cursor.close()
conn.close()
</code></pre>
<h3 id="azure-cosmos-db"><a class="header" href="#azure-cosmos-db">Azure Cosmos DB</a></h3>
<p>Globally distributed NoSQL database.</p>
<h4 id="cosmos-db-apis"><a class="header" href="#cosmos-db-apis">Cosmos DB APIs</a></h4>
<pre><code>API              Type           Use Case                AWS Equivalent
──────────────────────────────────────────────────────────────────────
Core (SQL)       Document       General purpose         DynamoDB
MongoDB          Document       MongoDB compatibility   DocumentDB
Cassandra        Wide-column    Cassandra workloads     Keyspaces
Gremlin          Graph          Graph relationships     Neptune
Table            Key-value      Simple key-value        DynamoDB
</code></pre>
<h4 id="cosmos-db-cli-examples"><a class="header" href="#cosmos-db-cli-examples">Cosmos DB CLI Examples</a></h4>
<pre><code class="language-bash"># Create Cosmos DB account
az cosmosdb create \
  --name mycosmosaccount123 \
  --resource-group myResourceGroup \
  --locations regionName=eastus failoverPriority=0 \
  --locations regionName=westus failoverPriority=1 \
  --default-consistency-level Session \
  --enable-automatic-failover true

# Create database (SQL API)
az cosmosdb sql database create \
  --account-name mycosmosaccount123 \
  --resource-group myResourceGroup \
  --name myDatabase

# Create container
az cosmosdb sql container create \
  --account-name mycosmosaccount123 \
  --resource-group myResourceGroup \
  --database-name myDatabase \
  --name myContainer \
  --partition-key-path "/userId" \
  --throughput 400

# Get connection string
az cosmosdb keys list \
  --name mycosmosaccount123 \
  --resource-group myResourceGroup \
  --type connection-strings

# List databases
az cosmosdb sql database list \
  --account-name mycosmosaccount123 \
  --resource-group myResourceGroup

# Update throughput
az cosmosdb sql container throughput update \
  --account-name mycosmosaccount123 \
  --resource-group myResourceGroup \
  --database-name myDatabase \
  --name myContainer \
  --throughput 1000
</code></pre>
<h4 id="cosmos-db-sdk-example-python"><a class="header" href="#cosmos-db-sdk-example-python">Cosmos DB SDK Example (Python)</a></h4>
<pre><code class="language-python">from azure.cosmos import CosmosClient, PartitionKey, exceptions

# Initialize client
endpoint = "https://mycosmosaccount123.documents.azure.com:443/"
key = "&lt;primary-key&gt;"
client = CosmosClient(endpoint, key)

# Get database and container
database = client.get_database_client("myDatabase")
container = database.get_container_client("myContainer")

# Create item
item = {
    'id': 'user-001',
    'userId': 'user-001',
    'name': 'Alice',
    'email': 'alice@example.com',
    'age': 30
}
container.create_item(body=item)

# Read item
item = container.read_item(item='user-001', partition_key='user-001')
print(item)

# Query items
query = "SELECT * FROM c WHERE c.age &gt; @age"
parameters = [{"name": "@age", "value": 25}]

items = list(container.query_items(
    query=query,
    parameters=parameters,
    enable_cross_partition_query=True
))

for item in items:
    print(f"{item['name']}: {item['age']} years old")

# Update item
item['age'] = 31
container.replace_item(item='user-001', body=item)

# Delete item
container.delete_item(item='user-001', partition_key='user-001')
</code></pre>
<h3 id="azure-database-for-postgresqlmysql"><a class="header" href="#azure-database-for-postgresqlmysql">Azure Database for PostgreSQL/MySQL</a></h3>
<p>Managed open-source databases.</p>
<pre><code class="language-bash"># Create PostgreSQL server
az postgres flexible-server create \
  --name mypostgresserver123 \
  --resource-group myResourceGroup \
  --location eastus \
  --admin-user myadmin \
  --admin-password 'SecurePassword123!' \
  --sku-name Standard_B1ms \
  --tier Burstable \
  --storage-size 32

# Create MySQL server
az mysql flexible-server create \
  --name mymysqlserver123 \
  --resource-group myResourceGroup \
  --location eastus \
  --admin-user myadmin \
  --admin-password 'SecurePassword123!' \
  --sku-name Standard_B1ms \
  --tier Burstable \
  --storage-size 32

# Configure firewall
az postgres flexible-server firewall-rule create \
  --resource-group myResourceGroup \
  --name mypostgresserver123 \
  --rule-name AllowMyIP \
  --start-ip-address 1.2.3.4 \
  --end-ip-address 1.2.3.4

# Connect to PostgreSQL
psql "host=mypostgresserver123.postgres.database.azure.com port=5432 dbname=postgres user=myadmin password=SecurePassword123! sslmode=require"

# Connect to MySQL
mysql -h mymysqlserver123.mysql.database.azure.com -u myadmin -p
</code></pre>
<h3 id="azure-cache-for-redis"><a class="header" href="#azure-cache-for-redis">Azure Cache for Redis</a></h3>
<p>Managed Redis cache.</p>
<pre><code class="language-bash"># Create Redis cache
az redis create \
  --resource-group myResourceGroup \
  --name myrediscache123 \
  --location eastus \
  --sku Basic \
  --vm-size c0

# Get access keys
az redis list-keys \
  --resource-group myResourceGroup \
  --name myrediscache123

# Get hostname
az redis show \
  --resource-group myResourceGroup \
  --name myrediscache123 \
  --query hostName

# Connect to Redis
redis-cli -h myrediscache123.redis.cache.windows.net -p 6380 -a &lt;primary-key&gt; --tls
</code></pre>
<h2 id="networking-services-2"><a class="header" href="#networking-services-2">Networking Services</a></h2>
<h3 id="azure-virtual-network-vnet"><a class="header" href="#azure-virtual-network-vnet">Azure Virtual Network (VNet)</a></h3>
<p>Isolated network (equivalent to AWS VPC).</p>
<h4 id="vnet-architecture"><a class="header" href="#vnet-architecture">VNet Architecture</a></h4>
<pre><code>┌─────────────────────────────────────────────────────────────┐
│  VNet: my-vnet (10.0.0.0/16)                                │
│  Region: eastus                                              │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌───────────────────────┐  ┌──────────────────────────┐   │
│  │ Public Subnet         │  │ Public Subnet            │   │
│  │ 10.0.1.0/24          │  │ 10.0.2.0/24              │   │
│  │ (AZ 1)               │  │ (AZ 2)                   │   │
│  │                       │  │                          │   │
│  │ ┌─────────────────┐  │  │ ┌─────────────────┐     │   │
│  │ │ Load Balancer   │  │  │ │ Load Balancer   │     │   │
│  │ └─────────────────┘  │  │ └─────────────────┘     │   │
│  └───────────┬───────────┘  └──────────┬───────────────┘   │
│              │                         │                    │
│              │   Azure Gateway         │                    │
│              └──────────┬──────────────┘                    │
│                         │                                   │
│  ┌───────────────────────┐  ┌──────────────────────────┐   │
│  │ Private Subnet        │  │ Private Subnet           │   │
│  │ 10.0.11.0/24         │  │ 10.0.12.0/24             │   │
│  │ (AZ 1)               │  │ (AZ 2)                   │   │
│  │                       │  │                          │   │
│  │ ┌─────┐ ┌─────┐      │  │ ┌─────┐ ┌─────┐         │   │
│  │ │ VM  │ │ VM  │      │  │ │ VM  │ │ VM  │         │   │
│  │ └─────┘ └─────┘      │  │ └─────┘ └─────┘         │   │
│  └───────────────────────┘  └──────────────────────────┘   │
│                                                              │
│  ┌───────────────────────┐  ┌──────────────────────────┐   │
│  │ Database Subnet       │  │ Database Subnet          │   │
│  │ 10.0.21.0/24         │  │ 10.0.22.0/24             │   │
│  │                       │  │                          │   │
│  │ ┌──────────┐          │  │ ┌──────────┐            │   │
│  │ │  SQL DB  │          │  │ │  SQL DB  │            │   │
│  │ └──────────┘          │  │ └──────────┘            │   │
│  └───────────────────────┘  └──────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
</code></pre>
<h4 id="vnet-cli-examples"><a class="header" href="#vnet-cli-examples">VNet CLI Examples</a></h4>
<pre><code class="language-bash"># Create VNet
az network vnet create \
  --resource-group myResourceGroup \
  --name myVNet \
  --address-prefix 10.0.0.0/16 \
  --location eastus

# Create subnet
az network vnet subnet create \
  --resource-group myResourceGroup \
  --vnet-name myVNet \
  --name PublicSubnet \
  --address-prefixes 10.0.1.0/24

az network vnet subnet create \
  --resource-group myResourceGroup \
  --vnet-name myVNet \
  --name PrivateSubnet \
  --address-prefixes 10.0.11.0/24

# List VNets
az network vnet list --output table

# List subnets
az network vnet subnet list \
  --resource-group myResourceGroup \
  --vnet-name myVNet \
  --output table

# Create Network Security Group (NSG)
az network nsg create \
  --resource-group myResourceGroup \
  --name myNSG

# Add NSG rule
az network nsg rule create \
  --resource-group myResourceGroup \
  --nsg-name myNSG \
  --name AllowHTTP \
  --priority 100 \
  --source-address-prefixes '*' \
  --source-port-ranges '*' \
  --destination-address-prefixes '*' \
  --destination-port-ranges 80 \
  --access Allow \
  --protocol Tcp \
  --direction Inbound

az network nsg rule create \
  --resource-group myResourceGroup \
  --nsg-name myNSG \
  --name AllowSSH \
  --priority 110 \
  --source-address-prefixes 'VirtualNetwork' \
  --source-port-ranges '*' \
  --destination-address-prefixes '*' \
  --destination-port-ranges 22 \
  --access Allow \
  --protocol Tcp \
  --direction Inbound

# Associate NSG with subnet
az network vnet subnet update \
  --resource-group myResourceGroup \
  --vnet-name myVNet \
  --name PublicSubnet \
  --network-security-group myNSG

# Create NAT Gateway
az network public-ip create \
  --resource-group myResourceGroup \
  --name myNATGatewayIP \
  --sku Standard \
  --allocation-method Static

az network nat gateway create \
  --resource-group myResourceGroup \
  --name myNATGateway \
  --public-ip-addresses myNATGatewayIP \
  --idle-timeout 10

# Associate NAT Gateway with subnet
az network vnet subnet update \
  --resource-group myResourceGroup \
  --vnet-name myVNet \
  --name PrivateSubnet \
  --nat-gateway myNATGateway

# VNet peering
az network vnet peering create \
  --resource-group myResourceGroup \
  --name myVNet-to-VNet2 \
  --vnet-name myVNet \
  --remote-vnet myVNet2 \
  --allow-vnet-access
</code></pre>
<h3 id="azure-load-balancer"><a class="header" href="#azure-load-balancer">Azure Load Balancer</a></h3>
<p>Distribute traffic across resources.</p>
<h4 id="load-balancer-types-1"><a class="header" href="#load-balancer-types-1">Load Balancer Types</a></h4>
<pre><code>Type                SKU         OSI Layer    Use Case              Cost
───────────────────────────────────────────────────────────────────────
Load Balancer       Basic       Layer 4      Internal/Public       Free
Load Balancer       Standard    Layer 4      Production            $$
Application         Standard    Layer 7      HTTP/HTTPS routing    $$
Gateway
</code></pre>
<pre><code class="language-bash"># Create public IP
az network public-ip create \
  --resource-group myResourceGroup \
  --name myPublicIP \
  --sku Standard

# Create load balancer
az network lb create \
  --resource-group myResourceGroup \
  --name myLoadBalancer \
  --sku Standard \
  --public-ip-address myPublicIP \
  --frontend-ip-name myFrontEnd \
  --backend-pool-name myBackEndPool

# Create health probe
az network lb probe create \
  --resource-group myResourceGroup \
  --lb-name myLoadBalancer \
  --name myHealthProbe \
  --protocol tcp \
  --port 80 \
  --interval 15 \
  --threshold 2

# Create load balancer rule
az network lb rule create \
  --resource-group myResourceGroup \
  --lb-name myLoadBalancer \
  --name myHTTPRule \
  --protocol tcp \
  --frontend-port 80 \
  --backend-port 80 \
  --frontend-ip-name myFrontEnd \
  --backend-pool-name myBackEndPool \
  --probe-name myHealthProbe

# Add VM to backend pool
az network nic ip-config address-pool add \
  --resource-group myResourceGroup \
  --nic-name myNIC \
  --ip-config-name ipconfig1 \
  --lb-name myLoadBalancer \
  --address-pool myBackEndPool
</code></pre>
<h3 id="azure-application-gateway"><a class="header" href="#azure-application-gateway">Azure Application Gateway</a></h3>
<p>Layer 7 load balancer with WAF.</p>
<pre><code class="language-bash"># Create Application Gateway
az network application-gateway create \
  --name myAppGateway \
  --resource-group myResourceGroup \
  --location eastus \
  --vnet-name myVNet \
  --subnet PublicSubnet \
  --capacity 2 \
  --sku Standard_v2 \
  --public-ip-address myPublicIP \
  --servers 10.0.11.4 10.0.11.5

# Create path-based routing rule
az network application-gateway url-path-map create \
  --gateway-name myAppGateway \
  --resource-group myResourceGroup \
  --name myPathMap \
  --paths /images/* \
  --http-settings appGatewayBackendHttpSettings \
  --address-pool imagesBackendPool

# Enable Web Application Firewall (WAF)
az network application-gateway waf-config set \
  --gateway-name myAppGateway \
  --resource-group myResourceGroup \
  --enabled true \
  --firewall-mode Prevention \
  --rule-set-version 3.0
</code></pre>
<h3 id="azure-dns"><a class="header" href="#azure-dns">Azure DNS</a></h3>
<p>DNS hosting service.</p>
<pre><code class="language-bash"># Create DNS zone
az network dns zone create \
  --resource-group myResourceGroup \
  --name example.com

# Create A record
az network dns record-set a add-record \
  --resource-group myResourceGroup \
  --zone-name example.com \
  --record-set-name www \
  --ipv4-address 1.2.3.4

# Create CNAME record
az network dns record-set cname set-record \
  --resource-group myResourceGroup \
  --zone-name example.com \
  --record-set-name blog \
  --cname www.example.com

# List records
az network dns record-set list \
  --resource-group myResourceGroup \
  --zone-name example.com

# Get nameservers
az network dns zone show \
  --resource-group myResourceGroup \
  --name example.com \
  --query nameServers
</code></pre>
<h2 id="serverless-services-1"><a class="header" href="#serverless-services-1">Serverless Services</a></h2>
<h3 id="azure-functions"><a class="header" href="#azure-functions">Azure Functions</a></h3>
<p>Serverless compute (equivalent to AWS Lambda).</p>
<h4 id="function-runtime-versions"><a class="header" href="#function-runtime-versions">Function Runtime Versions</a></h4>
<pre><code>Runtime       Languages                    Timeout (Consumption)
───────────────────────────────────────────────────────────────
4.x (Current) C#, Java, JavaScript,       10 minutes (default)
              Python, PowerShell, TypeScript
</code></pre>
<h4 id="function-triggers"><a class="header" href="#function-triggers">Function Triggers</a></h4>
<pre><code>Trigger Type        Use Case
────────────────────────────────────────────────────
HTTP                REST APIs, webhooks
Timer               Scheduled tasks
Blob Storage        File processing
Queue Storage       Async processing
Event Grid          Event-driven workflows
Event Hub           Real-time data streams
Service Bus         Enterprise messaging
Cosmos DB           Database change feed
</code></pre>
<h4 id="function-example-python"><a class="header" href="#function-example-python">Function Example (Python)</a></h4>
<pre><code class="language-python">import logging
import azure.functions as func

def main(req: func.HttpRequest) -&gt; func.HttpResponse:
    logging.info('Python HTTP trigger function processed a request.')
    
    name = req.params.get('name')
    if not name:
        try:
            req_body = req.get_json()
            name = req_body.get('name')
        except ValueError:
            pass
    
    if name:
        return func.HttpResponse(
            f"Hello, {name}!",
            status_code=200
        )
    else:
        return func.HttpResponse(
            "Please pass a name parameter",
            status_code=400
        )

# Blob trigger example
def main(myblob: func.InputStream):
    logging.info(f"Processing blob: {myblob.name}")
    logging.info(f"Blob size: {myblob.length} bytes")
    
    # Process the blob
    content = myblob.read()
    # Do something with content

# Timer trigger example
def main(mytimer: func.TimerRequest) -&gt; None:
    logging.info('Timer trigger function executed.')
    
    if mytimer.past_due:
        logging.info('The timer is past due!')
    
    # Perform scheduled task
    perform_maintenance()

# Queue trigger example
def main(msg: func.QueueMessage) -&gt; None:
    logging.info(f'Processing queue message: {msg.get_body().decode("utf-8")}')
    
    # Process message
    process_order(msg.get_json())
</code></pre>
<h4 id="functionjson-configuration"><a class="header" href="#functionjson-configuration">function.json Configuration</a></h4>
<pre><code class="language-json">{
  "bindings": [
    {
      "authLevel": "function",
      "type": "httpTrigger",
      "direction": "in",
      "name": "req",
      "methods": ["get", "post"]
    },
    {
      "type": "http",
      "direction": "out",
      "name": "$return"
    }
  ]
}
</code></pre>
<h4 id="azure-functions-cli-examples"><a class="header" href="#azure-functions-cli-examples">Azure Functions CLI Examples</a></h4>
<pre><code class="language-bash"># Install Azure Functions Core Tools
npm install -g azure-functions-core-tools@4

# Create function app locally
func init myFunctionApp --python
cd myFunctionApp

# Create new function
func new --name HttpTrigger --template "HTTP trigger"

# Run locally
func start

# Create function app in Azure
az functionapp create \
  --resource-group myResourceGroup \
  --consumption-plan-location eastus \
  --runtime python \
  --runtime-version 3.11 \
  --functions-version 4 \
  --name myuniquefunctionapp123 \
  --storage-account mystorageaccount123 \
  --os-type Linux

# Deploy to Azure
func azure functionapp publish myuniquefunctionapp123

# View logs
func azure functionapp logstream myuniquefunctionapp123

# Set application settings
az functionapp config appsettings set \
  --name myuniquefunctionapp123 \
  --resource-group myResourceGroup \
  --settings "DB_CONNECTION_STRING=Server=..."

# Enable managed identity
az functionapp identity assign \
  --name myuniquefunctionapp123 \
  --resource-group myResourceGroup

# List functions
az functionapp function list \
  --name myuniquefunctionapp123 \
  --resource-group myResourceGroup

# Delete function app
az functionapp delete \
  --name myuniquefunctionapp123 \
  --resource-group myResourceGroup
</code></pre>
<h4 id="azure-functions-pricing"><a class="header" href="#azure-functions-pricing">Azure Functions Pricing</a></h4>
<pre><code>Plan             Price                   Timeout     Scaling
──────────────────────────────────────────────────────────────
Consumption      $0.20/million requests  10 min      Automatic
                 + $0.000016/GB-s
Premium          $0.169/vCPU hour       Unlimited    Automatic
                 + $0.0123/GB hour
Dedicated        App Service Plan cost  Unlimited    Manual/Auto

Free Tier: 1M requests + 400,000 GB-s/month
</code></pre>
<h3 id="azure-logic-apps"><a class="header" href="#azure-logic-apps">Azure Logic Apps</a></h3>
<p>Workflow automation (similar to AWS Step Functions).</p>
<pre><code class="language-bash"># Create Logic App
az logic workflow create \
  --resource-group myResourceGroup \
  --location eastus \
  --name myLogicApp \
  --definition @workflow.json

# List Logic Apps
az logic workflow list \
  --resource-group myResourceGroup

# Show Logic App
az logic workflow show \
  --resource-group myResourceGroup \
  --name myLogicApp

# Run Logic App
az logic workflow run trigger \
  --resource-group myResourceGroup \
  --name myLogicApp \
  --trigger-name manual
</code></pre>
<h2 id="container-services-1"><a class="header" href="#container-services-1">Container Services</a></h2>
<h3 id="azure-container-instances-aci"><a class="header" href="#azure-container-instances-aci">Azure Container Instances (ACI)</a></h3>
<p>Serverless containers (similar to AWS Fargate).</p>
<pre><code class="language-bash"># Create container instance
az container create \
  --resource-group myResourceGroup \
  --name mycontainer \
  --image nginx:latest \
  --cpu 1 \
  --memory 1.5 \
  --dns-name-label myuniquecontainer123 \
  --ports 80

# List containers
az container list --output table

# Get container logs
az container logs \
  --resource-group myResourceGroup \
  --name mycontainer

# Execute command in container
az container exec \
  --resource-group myResourceGroup \
  --name mycontainer \
  --exec-command "/bin/bash"

# Delete container
az container delete \
  --resource-group myResourceGroup \
  --name mycontainer \
  --yes

# Create container with environment variables
az container create \
  --resource-group myResourceGroup \
  --name myapp \
  --image myregistry.azurecr.io/myapp:latest \
  --cpu 2 \
  --memory 4 \
  --environment-variables \
    'DB_HOST'='mydb.database.windows.net' \
    'DB_NAME'='mydb' \
  --secure-environment-variables \
    'DB_PASSWORD'='SecurePassword123!' \
  --registry-login-server myregistry.azurecr.io \
  --registry-username myregistry \
  --registry-password &lt;password&gt;
</code></pre>
<h3 id="azure-kubernetes-service-aks"><a class="header" href="#azure-kubernetes-service-aks">Azure Kubernetes Service (AKS)</a></h3>
<p>Managed Kubernetes.</p>
<pre><code class="language-bash"># Create AKS cluster
az aks create \
  --resource-group myResourceGroup \
  --name myAKSCluster \
  --node-count 3 \
  --node-vm-size Standard_D2s_v3 \
  --enable-managed-identity \
  --generate-ssh-keys \
  --network-plugin azure \
  --enable-addons monitoring

# Get credentials
az aks get-credentials \
  --resource-group myResourceGroup \
  --name myAKSCluster

# Verify connection
kubectl get nodes

# Scale cluster
az aks scale \
  --resource-group myResourceGroup \
  --name myAKSCluster \
  --node-count 5

# Upgrade cluster
az aks upgrade \
  --resource-group myResourceGroup \
  --name myAKSCluster \
  --kubernetes-version 1.28.0

# Enable cluster autoscaler
az aks update \
  --resource-group myResourceGroup \
  --name myAKSCluster \
  --enable-cluster-autoscaler \
  --min-count 3 \
  --max-count 10

# List available versions
az aks get-versions --location eastus --output table

# Delete cluster
az aks delete \
  --resource-group myResourceGroup \
  --name myAKSCluster \
  --yes
</code></pre>
<h3 id="azure-container-registry-acr"><a class="header" href="#azure-container-registry-acr">Azure Container Registry (ACR)</a></h3>
<p>Docker registry (similar to AWS ECR).</p>
<pre><code class="language-bash"># Create container registry
az acr create \
  --resource-group myResourceGroup \
  --name myuniqueregistry123 \
  --sku Basic

# Login to registry
az acr login --name myuniqueregistry123

# Tag image
docker tag myapp:latest myuniqueregistry123.azurecr.io/myapp:v1.0

# Push image
docker push myuniqueregistry123.azurecr.io/myapp:v1.0

# List images
az acr repository list --name myuniqueregistry123 --output table

# List tags
az acr repository show-tags \
  --name myuniqueregistry123 \
  --repository myapp \
  --output table

# Delete image
az acr repository delete \
  --name myuniqueregistry123 \
  --image myapp:v1.0 \
  --yes
</code></pre>
<h2 id="security-services-1"><a class="header" href="#security-services-1">Security Services</a></h2>
<h3 id="azure-active-directory-azure-entra-id"><a class="header" href="#azure-active-directory-azure-entra-id">Azure Active Directory (Azure Entra ID)</a></h3>
<p>Identity and access management.</p>
<pre><code class="language-bash"># Create user
az ad user create \
  --display-name "Alice Smith" \
  --user-principal-name alice@contoso.com \
  --password SecurePassword123!

# Create group
az ad group create \
  --display-name Developers \
  --mail-nickname developers

# Add user to group
az ad group member add \
  --group Developers \
  --member-id &lt;user-object-id&gt;

# Create service principal
az ad sp create-for-rbac \
  --name myServicePrincipal \
  --role Contributor \
  --scopes /subscriptions/&lt;subscription-id&gt;

# List users
az ad user list --output table

# List groups
az ad group list --output table
</code></pre>
<h3 id="azure-key-vault"><a class="header" href="#azure-key-vault">Azure Key Vault</a></h3>
<p>Secrets management (similar to AWS Secrets Manager).</p>
<pre><code class="language-bash"># Create Key Vault
az keyvault create \
  --name myuniquekeyvault123 \
  --resource-group myResourceGroup \
  --location eastus

# Set secret
az keyvault secret set \
  --vault-name myuniquekeyvault123 \
  --name dbpassword \
  --value "SecurePassword123!"

# Get secret
az keyvault secret show \
  --vault-name myuniquekeyvault123 \
  --name dbpassword \
  --query value \
  --output tsv

# List secrets
az keyvault secret list \
  --vault-name myuniquekeyvault123 \
  --output table

# Delete secret
az keyvault secret delete \
  --vault-name myuniquekeyvault123 \
  --name dbpassword

# Set access policy
az keyvault set-policy \
  --name myuniquekeyvault123 \
  --upn alice@contoso.com \
  --secret-permissions get list set delete

# Create certificate
az keyvault certificate create \
  --vault-name myuniquekeyvault123 \
  --name mycert \
  --policy "$(az keyvault certificate get-default-policy)"

# Import certificate
az keyvault certificate import \
  --vault-name myuniquekeyvault123 \
  --name imported-cert \
  --file certificate.pfx
</code></pre>
<h4 id="use-key-vault-in-application-python"><a class="header" href="#use-key-vault-in-application-python">Use Key Vault in Application (Python)</a></h4>
<pre><code class="language-python">from azure.identity import DefaultAzureCredential
from azure.keyvault.secrets import SecretClient

# Create client
credential = DefaultAzureCredential()
vault_url = "https://myuniquekeyvault123.vault.azure.net"
client = SecretClient(vault_url=vault_url, credential=credential)

# Get secret
secret = client.get_secret("dbpassword")
print(f"Secret value: {secret.value}")

# Set secret
client.set_secret("newsecret", "newvalue")

# List secrets
secrets = client.list_properties_of_secrets()
for secret in secrets:
    print(f"Secret name: {secret.name}")

# Delete secret
client.begin_delete_secret("newsecret").wait()
</code></pre>
<h3 id="azure-rbac-role-based-access-control"><a class="header" href="#azure-rbac-role-based-access-control">Azure RBAC (Role-Based Access Control)</a></h3>
<pre><code class="language-bash"># List role definitions
az role definition list --output table

# Assign role to user
az role assignment create \
  --assignee alice@contoso.com \
  --role Contributor \
  --scope /subscriptions/&lt;subscription-id&gt;/resourceGroups/myResourceGroup

# Assign role to service principal
az role assignment create \
  --assignee &lt;service-principal-object-id&gt; \
  --role "Storage Blob Data Contributor" \
  --scope /subscriptions/&lt;subscription-id&gt;/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/mystorageaccount123

# List role assignments
az role assignment list \
  --assignee alice@contoso.com \
  --output table

# Remove role assignment
az role assignment delete \
  --assignee alice@contoso.com \
  --role Contributor \
  --scope /subscriptions/&lt;subscription-id&gt;/resourceGroups/myResourceGroup

# Create custom role
az role definition create --role-definition @custom-role.json
</code></pre>
<h4 id="custom-role-definition-example"><a class="header" href="#custom-role-definition-example">Custom Role Definition Example</a></h4>
<pre><code class="language-json">{
  "Name": "Custom VM Operator",
  "Description": "Can start and stop VMs",
  "Actions": [
    "Microsoft.Compute/virtualMachines/start/action",
    "Microsoft.Compute/virtualMachines/restart/action",
    "Microsoft.Compute/virtualMachines/deallocate/action",
    "Microsoft.Compute/virtualMachines/read"
  ],
  "NotActions": [],
  "AssignableScopes": [
    "/subscriptions/&lt;subscription-id&gt;"
  ]
}
</code></pre>
<h2 id="monitoring-and-management-1"><a class="header" href="#monitoring-and-management-1">Monitoring and Management</a></h2>
<h3 id="azure-monitor"><a class="header" href="#azure-monitor">Azure Monitor</a></h3>
<p>Monitoring and observability (similar to CloudWatch).</p>
<pre><code class="language-bash"># Create action group
az monitor action-group create \
  --name myActionGroup \
  --resource-group myResourceGroup \
  --short-name myAG \
  --email-receiver name=admin email=admin@example.com

# Create metric alert
az monitor metrics alert create \
  --name high-cpu \
  --resource-group myResourceGroup \
  --scopes /subscriptions/&lt;subscription-id&gt;/resourceGroups/myResourceGroup/providers/Microsoft.Compute/virtualMachines/myVM \
  --condition "avg Percentage CPU &gt; 80" \
  --window-size 5m \
  --evaluation-frequency 1m \
  --action myActionGroup

# List alerts
az monitor metrics alert list \
  --resource-group myResourceGroup

# Query metrics
az monitor metrics list \
  --resource /subscriptions/&lt;subscription-id&gt;/resourceGroups/myResourceGroup/providers/Microsoft.Compute/virtualMachines/myVM \
  --metric "Percentage CPU" \
  --start-time 2024-01-01T00:00:00Z \
  --end-time 2024-01-01T23:59:59Z \
  --interval PT1H
</code></pre>
<h3 id="azure-log-analytics"><a class="header" href="#azure-log-analytics">Azure Log Analytics</a></h3>
<p>Log collection and analysis.</p>
<pre><code class="language-bash"># Create Log Analytics workspace
az monitor log-analytics workspace create \
  --resource-group myResourceGroup \
  --workspace-name myWorkspace \
  --location eastus

# Query logs (KQL - Kusto Query Language)
az monitor log-analytics query \
  --workspace myWorkspace \
  --analytics-query "AzureActivity | where TimeGenerated &gt; ago(1h) | summarize count() by OperationName"

# Example KQL queries
# All logs from last hour
"AzureActivity | where TimeGenerated &gt; ago(1h)"

# Count errors by resource
"AzureDiagnostics | where Level == 'Error' | summarize count() by Resource"

# VM performance - CPU over 80%
"Perf | where CounterName == '% Processor Time' and CounterValue &gt; 80"

# Failed login attempts
"SigninLogs | where ResultType != 0 | project TimeGenerated, UserPrincipalName, ResultType, ResultDescription"
</code></pre>
<h3 id="azure-application-insights"><a class="header" href="#azure-application-insights">Azure Application Insights</a></h3>
<p>Application performance monitoring.</p>
<pre><code class="language-python">from applicationinsights import TelemetryClient

# Initialize client
tc = TelemetryClient('&lt;instrumentation-key&gt;')

# Track event
tc.track_event('UserLogin', {'user': 'alice@example.com'})

# Track metric
tc.track_metric('request_duration', 125.5)

# Track exception
try:
    result = 1 / 0
except Exception as e:
    tc.track_exception()

# Track request
tc.track_request('GET /api/users', 'https://myapi.com/api/users', True, 200, 125)

# Track dependency
tc.track_dependency('SQL', 'mydb.database.windows.net', 'SELECT * FROM users', 45, True, 'Query')

# Flush telemetry
tc.flush()
</code></pre>
<pre><code class="language-bash"># Enable Application Insights for web app
az webapp config appsettings set \
  --resource-group myResourceGroup \
  --name myUniqueWebApp123 \
  --settings "APPINSIGHTS_INSTRUMENTATIONKEY=&lt;instrumentation-key&gt;"
</code></pre>
<h2 id="devops-and-cicd-1"><a class="header" href="#devops-and-cicd-1">DevOps and CI/CD</a></h2>
<h3 id="azure-devops"><a class="header" href="#azure-devops">Azure DevOps</a></h3>
<p>Complete DevOps platform.</p>
<h4 id="azure-pipelines-yaml-example"><a class="header" href="#azure-pipelines-yaml-example">Azure Pipelines YAML Example</a></h4>
<pre><code class="language-yaml"># azure-pipelines.yml
trigger:
  - main

pool:
  vmImage: 'ubuntu-latest'

variables:
  buildConfiguration: 'Release'

stages:
- stage: Build
  jobs:
  - job: BuildJob
    steps:
    - task: UsePythonVersion@0
      inputs:
        versionSpec: '3.11'
    
    - script: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
      displayName: 'Install dependencies'
    
    - script: |
        pytest tests/ --junitxml=junit/test-results.xml
      displayName: 'Run tests'
    
    - task: PublishTestResults@2
      inputs:
        testResultsFiles: '**/test-results.xml'
    
    - script: |
        docker build -t myapp:$(Build.BuildId) .
      displayName: 'Build Docker image'
    
    - task: Docker@2
      inputs:
        containerRegistry: 'myACR'
        repository: 'myapp'
        command: 'push'
        tags: |
          $(Build.BuildId)
          latest

- stage: Deploy
  dependsOn: Build
  jobs:
  - deployment: DeployJob
    environment: 'production'
    strategy:
      runOnce:
        deploy:
          steps:
          - task: AzureWebAppContainer@1
            inputs:
              azureSubscription: 'myServiceConnection'
              appName: 'myUniqueWebApp123'
              containers: 'myregistry.azurecr.io/myapp:$(Build.BuildId)'
</code></pre>
<h3 id="azure-cli-for-devops"><a class="header" href="#azure-cli-for-devops">Azure CLI for DevOps</a></h3>
<pre><code class="language-bash"># Create Azure DevOps project
az devops project create --name MyProject --org https://dev.azure.com/myorg

# Create pipeline
az pipelines create \
  --name MyPipeline \
  --repository https://github.com/user/repo \
  --branch main \
  --yml-path azure-pipelines.yml

# Run pipeline
az pipelines run --name MyPipeline

# List pipelines
az pipelines list --output table

# Show pipeline runs
az pipelines runs list --pipeline-name MyPipeline --output table
</code></pre>
<h2 id="ai-and-machine-learning"><a class="header" href="#ai-and-machine-learning">AI and Machine Learning</a></h2>
<h3 id="azure-openai-service"><a class="header" href="#azure-openai-service">Azure OpenAI Service</a></h3>
<p>Access to OpenAI models (GPT-4, GPT-3.5, DALL-E, Whisper).</p>
<pre><code class="language-python">import openai

# Configure
openai.api_type = "azure"
openai.api_base = "https://myopenai.openai.azure.com/"
openai.api_version = "2023-05-15"
openai.api_key = "&lt;api-key&gt;"

# Generate completion
response = openai.ChatCompletion.create(
    engine="gpt-4",  # deployment name
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Explain cloud computing in simple terms."}
    ],
    temperature=0.7,
    max_tokens=800
)

print(response.choices[0].message.content)

# Generate image
response = openai.Image.create(
    prompt="A futuristic cloud data center",
    n=1,
    size="1024x1024"
)

image_url = response['data'][0]['url']
</code></pre>
<h3 id="azure-cognitive-services"><a class="header" href="#azure-cognitive-services">Azure Cognitive Services</a></h3>
<p>Pre-built AI services.</p>
<pre><code class="language-python">from azure.ai.textanalytics import TextAnalyticsClient
from azure.core.credentials import AzureKeyCredential

# Text Analytics
endpoint = "https://myservice.cognitiveservices.azure.com/"
key = "&lt;api-key&gt;"

client = TextAnalyticsClient(endpoint=endpoint, credential=AzureKeyCredential(key))

# Sentiment analysis
documents = ["I love Azure!", "This is terrible."]
result = client.analyze_sentiment(documents)

for doc in result:
    print(f"Sentiment: {doc.sentiment}, Confidence: {doc.confidence_scores}")

# Entity recognition
result = client.recognize_entities(["Microsoft was founded by Bill Gates."])
for doc in result:
    for entity in doc.entities:
        print(f"Entity: {entity.text}, Category: {entity.category}")

# Key phrase extraction
result = client.extract_key_phrases(["Azure is a cloud computing platform."])
for doc in result:
    print(f"Key phrases: {doc.key_phrases}")
</code></pre>
<h3 id="azure-machine-learning"><a class="header" href="#azure-machine-learning">Azure Machine Learning</a></h3>
<p>End-to-end ML platform.</p>
<pre><code class="language-python">from azureml.core import Workspace, Experiment, ScriptRunConfig

# Connect to workspace
ws = Workspace.from_config()

# Create experiment
experiment = Experiment(workspace=ws, name='my-experiment')

# Configure training run
config = ScriptRunConfig(
    source_directory='./src',
    script='train.py',
    compute_target='cpu-cluster',
    environment='AzureML-sklearn-1.0'
)

# Submit run
run = experiment.submit(config)
run.wait_for_completion(show_output=True)

# Register model
model = run.register_model(
    model_name='my-model',
    model_path='outputs/model.pkl'
)

# Deploy model
from azureml.core.webservice import AciWebservice
from azureml.core.model import InferenceConfig

inference_config = InferenceConfig(
    entry_script='score.py',
    environment='AzureML-sklearn-1.0'
)

aci_config = AciWebservice.deploy_configuration(
    cpu_cores=1,
    memory_gb=1
)

service = Model.deploy(
    workspace=ws,
    name='my-service',
    models=[model],
    inference_config=inference_config,
    deployment_config=aci_config
)

service.wait_for_deployment(show_output=True)
print(f"Scoring URI: {service.scoring_uri}")
</code></pre>
<h2 id="architecture-examples-1"><a class="header" href="#architecture-examples-1">Architecture Examples</a></h2>
<h3 id="three-tier-web-application-1"><a class="header" href="#three-tier-web-application-1">Three-Tier Web Application</a></h3>
<pre><code>                         Internet
                             │
                    ┌────────▼────────┐
                    │  Azure Front    │  CDN
                    │  Door           │
                    └────────┬────────┘
                             │
                    ┌────────▼────────┐
                    │  Azure DNS      │
                    └────────┬────────┘
                             │
┌────────────────────────────▼────────────────────────────────┐
│                      Virtual Network                         │
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  Public Subnet (AZ-1)    Public Subnet (AZ-2)       │  │
│  │  ┌──────────────────┐    ┌──────────────────┐      │  │
│  │  │ Application      │    │ Application      │      │  │
│  │  │ Gateway + WAF    │    │ Gateway + WAF    │      │  │
│  │  └────────┬─────────┘    └────────┬─────────┘      │  │
│  └───────────┼──────────────────────┼─────────────────┘  │
│              │                      │                      │
│  ┌───────────▼──────────────────────▼─────────────────┐  │
│  │  Private Subnet (AZ-1)   Private Subnet (AZ-2)     │  │
│  │  ┌────────────────┐       ┌────────────────┐       │  │
│  │  │ VMSS           │       │ VMSS           │       │  │
│  │  │  ┌──┐ ┌──┐     │       │  ┌──┐ ┌──┐     │       │  │
│  │  │  │VM│ │VM│     │       │  │VM│ │VM│     │       │  │
│  │  │  └──┘ └──┘     │       │  └──┘ └──┘     │       │  │
│  │  └────────┬───────┘       └────────┬───────┘       │  │
│  └───────────┼──────────────────────┼─────────────────┘  │
│              │                      │                      │
│  ┌───────────▼──────────────────────▼─────────────────┐  │
│  │  Database Subnet (AZ-1)  Database Subnet (AZ-2)    │  │
│  │  ┌──────────────┐        ┌──────────────┐          │  │
│  │  │ Azure SQL    │◄──────▶│ Azure SQL    │          │  │
│  │  │ Primary      │        │ Secondary    │          │  │
│  │  └──────────────┘        └──────────────┘          │  │
│  │                                                      │  │
│  │  ┌──────────────────────────────┐                   │  │
│  │  │ Azure Cache for Redis        │                   │  │
│  │  └──────────────────────────────┘                   │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
│  Additional Services:                                       │
│  ├─ Blob Storage: Static assets                             │
│  ├─ Key Vault: Secrets management                           │
│  ├─ Monitor: Monitoring and alerts                          │
│  └─ Application Insights: APM                               │
└──────────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="serverless-microservices-1"><a class="header" href="#serverless-microservices-1">Serverless Microservices</a></h3>
<pre><code>                        ┌─────────────┐
                        │   Users     │
                        └──────┬──────┘
                               │
                      ┌────────▼────────┐
                      │  Azure Front    │
                      │  Door + Blob    │
                      │  (Frontend)     │
                      └────────┬────────┘
                               │
                      ┌────────▼────────┐
                      │  API Management │
                      └────────┬────────┘
                               │
        ┌──────────────────────┼──────────────────────┐
        │                      │                      │
   ┌────▼──────┐         ┌────▼──────┐         ┌────▼──────┐
   │ Function  │         │ Function  │         │ Function  │
   │ User Svc  │         │ Order Svc │         │ Pay Svc   │
   └────┬──────┘         └────┬──────┘         └────┬──────┘
        │                     │                     │
   ┌────▼──────┐         ┌────▼──────┐         ┌────▼──────┐
   │Cosmos DB  │         │Cosmos DB  │         │Cosmos DB  │
   │Users      │         │Orders     │         │Payments   │
   └───────────┘         └───────────┘         └───────────┘
        │                     │                     │
        └─────────────────────┼─────────────────────┘
                              │
                       ┌──────▼──────┐
                       │  Event Grid │
                       │  Service Bus│
                       └─────────────┘
</code></pre>
<h2 id="azure-vs-aws-comparison"><a class="header" href="#azure-vs-aws-comparison">Azure vs AWS Comparison</a></h2>
<h3 id="service-mapping"><a class="header" href="#service-mapping">Service Mapping</a></h3>
<pre><code>Service Category      Azure                      AWS
─────────────────────────────────────────────────────────────────
Compute
  VMs                 Virtual Machines           EC2
  Auto-scaling        VMSS                       Auto Scaling
  Serverless          Functions                  Lambda
  Containers          AKS / ACI                  EKS / ECS / Fargate
  PaaS                App Service                Elastic Beanstalk

Storage
  Object              Blob Storage               S3
  Block               Managed Disks              EBS
  File                Azure Files                EFS
  Archive             Archive Storage            Glacier

Database
  Relational          SQL Database               RDS
  NoSQL Document      Cosmos DB                  DynamoDB
  Cache               Cache for Redis            ElastiCache
  Data Warehouse      Synapse Analytics          Redshift

Networking
  Virtual Network     VNet                       VPC
  Load Balancer       Load Balancer / App GW     ELB / ALB / NLB
  CDN                 Front Door / CDN           CloudFront
  DNS                 Azure DNS                  Route 53
  VPN                 VPN Gateway                VPN Gateway

Security
  Identity            Azure AD (Entra ID)        IAM / Cognito
  Secrets             Key Vault                  Secrets Manager
  Encryption          Key Vault                  KMS

Monitoring
  Metrics             Azure Monitor              CloudWatch
  Logs                Log Analytics              CloudWatch Logs
  APM                 Application Insights       X-Ray
  Audit               Activity Log               CloudTrail

DevOps
  CI/CD               Azure DevOps / Pipelines   CodePipeline
  Repository          Azure Repos                CodeCommit
  Container Registry  ACR                        ECR

AI/ML
  Pre-trained Models  Cognitive Services         AI Services
  ML Platform         Machine Learning           SageMaker
  GenAI               OpenAI Service             Bedrock
</code></pre>
<h3 id="key-differences"><a class="header" href="#key-differences">Key Differences</a></h3>
<pre><code>Aspect                Azure                      AWS
─────────────────────────────────────────────────────────────────
Market Share          ~23%                       ~32%
Launch Year           2010                       2006
Focus                 Enterprise / Hybrid        Startups / Flexibility
Integration           Microsoft stack            Broad ecosystem
Regions               60+ regions                30+ regions
Pricing               Per-minute billing         Per-second billing
Support               Strong enterprise          Extensive documentation
Compliance            Most certifications        Extensive certifications
Hybrid Cloud          Azure Arc (best-in-class)  Outposts
Windows Workloads     Native integration         Good support
</code></pre>
<h3 id="when-to-choose-azure"><a class="header" href="#when-to-choose-azure">When to Choose Azure</a></h3>
<pre><code>✓ Heavy Microsoft stack usage (Windows, .NET, SQL Server)
✓ Enterprise Active Directory integration needed
✓ Hybrid cloud requirements (on-premises + cloud)
✓ Existing Microsoft licensing (Azure Hybrid Benefit)
✓ Office 365 / Dynamics 365 integration
✓ Strong compliance requirements
✓ European data centers needed
✓ .NET development team
</code></pre>
<h3 id="when-to-choose-aws"><a class="header" href="#when-to-choose-aws">When to Choose AWS</a></h3>
<pre><code>✓ Largest service selection needed
✓ Startup with flexible requirements
✓ Open-source technologies focus
✓ Mature ecosystem and tooling important
✓ Broadest region availability needed
✓ Extensive third-party integrations
✓ Strong serverless requirements
✓ Largest community and resources
</code></pre>
<h2 id="cost-optimization-2"><a class="header" href="#cost-optimization-2">Cost Optimization</a></h2>
<h3 id="azure-cost-management"><a class="header" href="#azure-cost-management">Azure Cost Management</a></h3>
<pre><code class="language-bash"># Create budget
az consumption budget create \
  --budget-name myBudget \
  --amount 1000 \
  --category Cost \
  --time-grain Monthly \
  --start-date 2024-01-01 \
  --end-date 2024-12-31

# View cost analysis
az consumption usage list \
  --start-date 2024-01-01 \
  --end-date 2024-01-31

# Get cost forecast
az consumption forecast list

# Enable auto-shutdown for VMs
az vm auto-shutdown \
  --resource-group myResourceGroup \
  --name myVM \
  --time 1900 \
  --timezone "Pacific Standard Time"
</code></pre>
<h3 id="cost-optimization-strategies-2"><a class="header" href="#cost-optimization-strategies-2">Cost Optimization Strategies</a></h3>
<pre><code>┌──────────────────────────────────────────────────────────┐
│ Azure Cost Optimization Checklist                        │
├──────────────────────────────────────────────────────────┤
│                                                           │
│ Compute                                                   │
│ ☐ Use Reserved Instances (up to 72% discount)            │
│ ☐ Use Spot VMs for fault-tolerant workloads              │
│ ☐ Right-size VMs based on metrics                        │
│ ☐ Use Azure Hybrid Benefit for Windows/SQL               │
│ ☐ Deallocate VMs when not in use                         │
│ ☐ Use Azure Functions for event-driven workloads         │
│ ☐ Enable auto-shutdown for dev/test VMs                  │
│                                                           │
│ Storage                                                   │
│ ☐ Use lifecycle management policies                      │
│ ☐ Move infrequent data to Cool/Archive tiers             │
│ ☐ Delete unused disks and snapshots                      │
│ ☐ Use LRS instead of GRS when possible                   │
│ ☐ Enable blob versioning only when needed                │
│                                                           │
│ Database                                                  │
│ ☐ Use serverless for SQL Database with variable load     │
│ ☐ Right-size database tiers                              │
│ ☐ Use Cosmos DB autoscale                                │
│ ☐ Implement connection pooling                           │
│ ☐ Pause dev/test databases when not in use               │
│                                                           │
│ Network                                                   │
│ ☐ Use Azure Front Door to reduce data transfer           │
│ ☐ Use VNet peering instead of VPN when possible          │
│ ☐ Consolidate data transfer within same region           │
│ ☐ Use private endpoints to avoid data transfer costs     │
│                                                           │
│ Monitoring                                                │
│ ☐ Set up Azure Cost Management + Billing alerts          │
│ ☐ Use Azure Advisor cost recommendations                 │
│ ☐ Review Advisor score regularly                         │
│ ☐ Use tags for cost allocation                           │
│ ☐ Review Underutilized Resources report                  │
└──────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="azure-pricing-calculator"><a class="header" href="#azure-pricing-calculator">Azure Pricing Calculator</a></h3>
<p>Use Azure Pricing Calculator: https://azure.microsoft.com/pricing/calculator/</p>
<h3 id="example-monthly-costs"><a class="header" href="#example-monthly-costs">Example Monthly Costs</a></h3>
<pre><code>Service                   Configuration           Monthly Cost (Approx)
─────────────────────────────────────────────────────────────────────
VM (B2s)                  2 vCPU, 4GB, Linux     $30
Managed Disk (128GB)      Premium SSD            $20
SQL Database (S0)         10 DTUs                $15
Cosmos DB                 400 RU/s               $24
Blob Storage (100GB)      Hot tier               $2
Data Transfer             50GB outbound          $4
App Service (B1)          1 core, 1.75GB         $55
Functions                 1M requests            $0.20
                                                 ─────────
                          Total:                 ~$150/month
</code></pre>
<h2 id="best-practices-25"><a class="header" href="#best-practices-25">Best Practices</a></h2>
<h3 id="security-best-practices-3"><a class="header" href="#security-best-practices-3">Security Best Practices</a></h3>
<pre><code>1. Identity and Access
   ├─ Use Azure AD (Entra ID) for all authentication
   ├─ Enable MFA for all users
   ├─ Use managed identities instead of service principals
   ├─ Implement RBAC with least privilege
   ├─ Use Azure AD Privileged Identity Management (PIM)
   └─ Enable Conditional Access policies

2. Network Security
   ├─ Use Network Security Groups (NSGs)
   ├─ Implement Azure Firewall or third-party NVA
   ├─ Use private endpoints for PaaS services
   ├─ Enable DDoS Protection Standard for production
   ├─ Use Application Gateway with WAF
   └─ Enable VNet service endpoints

3. Data Protection
   ├─ Enable encryption at rest for all services
   ├─ Use Azure Key Vault for secrets
   ├─ Enable TLS 1.2+ for data in transit
   ├─ Implement backup and disaster recovery
   ├─ Enable soft delete for Key Vault and Storage
   └─ Use customer-managed keys when required

4. Monitoring and Compliance
   ├─ Enable Azure Security Center (Defender for Cloud)
   ├─ Use Azure Sentinel for SIEM
   ├─ Enable Azure Monitor and Log Analytics
   ├─ Implement Azure Policy for governance
   ├─ Use Azure Blueprints for compliance
   └─ Regular security assessments

5. Application Security
   ├─ Use Web Application Firewall (WAF)
   ├─ Implement API Management security features
   ├─ Enable Application Insights
   ├─ Use Azure Front Door for global apps
   └─ Regular vulnerability scanning
</code></pre>
<h3 id="reliability-best-practices-1"><a class="header" href="#reliability-best-practices-1">Reliability Best Practices</a></h3>
<pre><code>1. High Availability
   ├─ Deploy across Availability Zones
   ├─ Use zone-redundant services
   ├─ Implement auto-scaling
   ├─ Use Azure Load Balancer / Application Gateway
   └─ Consider multi-region for critical workloads

2. Disaster Recovery
   ├─ Define RPO and RTO requirements
   ├─ Use Azure Site Recovery
   ├─ Implement geo-redundant storage
   ├─ Regular backup and restore testing
   └─ Document DR procedures

3. Monitoring
   ├─ Use Azure Monitor for all resources
   ├─ Set up alerts for critical metrics
   ├─ Implement health checks
   ├─ Use Application Insights for APM
   └─ Create dashboards for visibility

4. Resilience
   ├─ Implement retry logic
   ├─ Use circuit breaker pattern
   ├─ Implement graceful degradation
   ├─ Use queue-based load leveling
   └─ Regular chaos engineering tests
</code></pre>
<h2 id="cli-reference-1"><a class="header" href="#cli-reference-1">CLI Reference</a></h2>
<h3 id="common-cli-patterns-1"><a class="header" href="#common-cli-patterns-1">Common CLI Patterns</a></h3>
<pre><code class="language-bash"># Use --output for different formats
az vm list --output table
az vm list --output json
az vm list --output yaml
az vm list --output tsv

# Use --query for filtering (JMESPath)
az vm list --query "[].{name:name, powerState:powerState}"
az vm list --query "[?powerState=='VM running'].name"

# Use --resource-group shorthand
az vm list -g myResourceGroup

# Use --verbose for debugging
az vm create --verbose ...

# Get help
az vm --help
az vm create --help

# Interactive mode
az interactive

# Configure defaults
az configure --defaults group=myResourceGroup location=eastus

# Show defaults
az configure --list-defaults
</code></pre>
<h3 id="useful-aliases-1"><a class="header" href="#useful-aliases-1">Useful Aliases</a></h3>
<pre><code class="language-bash"># Add to ~/.bashrc or ~/.zshrc

alias azvm='az vm list --output table'
alias azrunning='az vm list --query "[?powerState=='\''VM running'\''].{name:name, resourceGroup:resourceGroup}" --output table'
alias azstorage='az storage account list --output table'
alias azsql='az sql db list --output table'
alias azgroup='az group list --output table'
</code></pre>
<h2 id="certification-paths-1"><a class="header" href="#certification-paths-1">Certification Paths</a></h2>
<h3 id="azure-certification-roadmap"><a class="header" href="#azure-certification-roadmap">Azure Certification Roadmap</a></h3>
<pre><code>Foundational
    │
    └─ AZ-900: Azure Fundamentals
        │
        ├─ Associate Level
        │   ├─ AZ-104: Azure Administrator
        │   ├─ AZ-204: Azure Developer
        │   └─ AZ-400: DevOps Engineer
        │
        └─ Expert Level
            ├─ AZ-305: Azure Solutions Architect
            └─ AZ-400: DevOps Engineer (with AZ-104/204)
            
        Specialty (Optional)
        ├─ AZ-500: Security Technologies
        ├─ AI-102: AI Engineer
        ├─ DP-203: Data Engineer
        └─ AZ-700: Network Engineer
</code></pre>
<h2 id="resources-22"><a class="header" href="#resources-22">Resources</a></h2>
<h3 id="official-documentation-4"><a class="header" href="#official-documentation-4">Official Documentation</a></h3>
<ul>
<li>Azure Documentation: https://docs.microsoft.com/azure</li>
<li>Azure CLI Reference: https://docs.microsoft.com/cli/azure/</li>
<li>Azure SDK Documentation: https://azure.github.io/azure-sdk/</li>
</ul>
<h3 id="learning-resources-3"><a class="header" href="#learning-resources-3">Learning Resources</a></h3>
<ul>
<li>Microsoft Learn: https://learn.microsoft.com/training/</li>
<li>Azure Free Account: https://azure.microsoft.com/free/</li>
<li>Azure Architecture Center: https://docs.microsoft.com/azure/architecture/</li>
<li>Azure Samples: https://github.com/Azure-Samples</li>
<li>Azure Friday: https://azure.microsoft.com/resources/videos/azure-friday/</li>
</ul>
<h3 id="community-5"><a class="header" href="#community-5">Community</a></h3>
<ul>
<li>r/AZURE: Reddit community</li>
<li>Microsoft Q&amp;A: https://docs.microsoft.com/answers/</li>
<li>Azure Community Support: https://azure.microsoft.com/support/community/</li>
<li>Azure User Groups: https://www.meetup.com/pro/azureug</li>
</ul>
<h3 id="tools-7"><a class="header" href="#tools-7">Tools</a></h3>
<ul>
<li>Azure CLI: Command-line interface</li>
<li>Azure PowerShell: PowerShell modules</li>
<li>Azure SDKs: Python, JavaScript, Java, .NET, Go</li>
<li>Bicep: Azure-native IaC</li>
<li>Terraform: Multi-cloud IaC</li>
<li>Azure Storage Explorer: GUI for storage</li>
<li>Azure Data Studio: Database management</li>
</ul>
<h3 id="pricing"><a class="header" href="#pricing">Pricing</a></h3>
<ul>
<li>Azure Pricing Calculator: https://azure.microsoft.com/pricing/calculator/</li>
<li>Azure Cost Management: https://azure.microsoft.com/services/cost-management/</li>
<li>Total Cost of Ownership (TCO) Calculator: https://azure.microsoft.com/pricing/tco/</li>
</ul>
<hr />
<p><strong>Updated</strong>: January 2025</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tools-8"><a class="header" href="#tools-8">Tools</a></h1>
<p>This section provides an overview of various tools that can enhance your productivity and efficiency in different domains. Each tool is accompanied by a detailed guide on how to use it effectively.</p>
<h2 id="list-of-tools"><a class="header" href="#list-of-tools">List of Tools</a></h2>
<ol>
<li><strong>tmux</strong>: A terminal multiplexer that allows you to switch between several programs in one terminal, detach them, and reattach them to a different terminal.</li>
<li><strong>vim</strong>: A highly configurable text editor built to enable efficient text editing.</li>
<li><strong>cscope</strong>: A developer's tool for browsing source code in a terminal environment.</li>
<li><strong>ctags</strong>: A programming tool that generates an index (or tag) file of names found in source and header files.</li>
<li><strong>mdbook</strong>: A command line tool to create books with Markdown.</li>
<li><strong>sed</strong>: A stream editor for filtering and transforming text.</li>
<li><strong>awk</strong>: A programming language designed for text processing and typically used as a data extraction and reporting tool.</li>
<li><strong>curl</strong>: A command-line tool for transferring data with URLs.</li>
<li><strong>wget</strong>: A free utility for non-interactive download of files from the web.</li>
<li><strong>grep</strong>: A command-line utility for searching plain-text data sets for lines that match a regular expression.</li>
<li><strong>find</strong>: A command-line utility that searches for files in a directory hierarchy.</li>
<li><strong>ffmpeg</strong>: A complete, cross-platform solution to record, convert and stream audio and video.</li>
<li><strong>make</strong>: A build automation tool that automatically builds executable programs and libraries from source code.</li>
<li><strong>Docker</strong>: A set of platform-as-a-service products that use OS-level virtualization to deliver software in packages called containers.</li>
<li><strong>Ansible</strong>: An open-source software provisioning, configuration management, and application-deployment tool.</li>
</ol>
<p>Each tool listed above has its own dedicated page with detailed instructions on how to install, configure, and use it effectively. Click on the tool name to navigate to its respective guide.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ansible"><a class="header" href="#ansible">Ansible</a></h1>
<p>Ansible is a powerful tool for automating infrastructure. It is a powerful tool that can be used to automate infrastructure, deploy applications, and more.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="embedded-systems"><a class="header" href="#embedded-systems">Embedded Systems</a></h1>
<p>Comprehensive guide to embedded systems development, microcontrollers, and hardware interfacing.</p>
<h2 id="table-of-contents-24"><a class="header" href="#table-of-contents-24">Table of Contents</a></h2>
<ol>
<li><a href="embedded/index.html#introduction">Introduction</a></li>
<li><a href="embedded/index.html#development-platforms">Development Platforms</a></li>
<li><a href="embedded/index.html#core-concepts">Core Concepts</a></li>
<li><a href="embedded/index.html#communication-protocols">Communication Protocols</a></li>
<li><a href="embedded/index.html#peripheral-interfaces">Peripheral Interfaces</a></li>
<li><a href="embedded/index.html#getting-started">Getting Started</a></li>
</ol>
<h2 id="introduction-11"><a class="header" href="#introduction-11">Introduction</a></h2>
<p>Embedded systems are specialized computing systems designed to perform dedicated functions within larger mechanical or electrical systems. They combine hardware and software to control devices and interact with the physical world.</p>
<h3 id="key-characteristics-1"><a class="header" href="#key-characteristics-1">Key Characteristics</a></h3>
<ul>
<li><strong>Real-time Operation</strong>: Deterministic response to events</li>
<li><strong>Resource Constraints</strong>: Limited memory, processing power, and energy</li>
<li><strong>Reliability</strong>: Must operate continuously for extended periods</li>
<li><strong>Hardware Integration</strong>: Direct interaction with sensors and actuators</li>
<li><strong>Application-Specific</strong>: Optimized for particular tasks</li>
</ul>
<h3 id="architecture-overview"><a class="header" href="#architecture-overview">Architecture Overview</a></h3>
<pre><code>┌─────────────────────────────────────────┐
│         Embedded System                  │
├─────────────────────────────────────────┤
│  Application Layer                       │
│  ├─ User Code                           │
│  └─ Libraries &amp; Frameworks              │
├─────────────────────────────────────────┤
│  HAL/Drivers                            │
│  ├─ Peripheral Drivers                  │
│  └─ Hardware Abstraction Layer          │
├─────────────────────────────────────────┤
│  Microcontroller/Processor              │
│  ├─ CPU Core (ARM, AVR, RISC-V)        │
│  ├─ Memory (Flash, RAM, EEPROM)        │
│  ├─ Peripherals (GPIO, UART, SPI...)   │
│  └─ Clock &amp; Power Management            │
├─────────────────────────────────────────┤
│  Hardware                               │
│  ├─ Sensors                             │
│  ├─ Actuators                           │
│  └─ External Interfaces                 │
└─────────────────────────────────────────┘
</code></pre>
<h2 id="development-platforms"><a class="header" href="#development-platforms">Development Platforms</a></h2>
<h3 id="microcontroller-platforms"><a class="header" href="#microcontroller-platforms">Microcontroller Platforms</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Platform</th><th>Processor</th><th>Clock</th><th>Memory</th><th>Use Cases</th></tr></thead><tbody>
<tr><td><strong><a href="embedded/arduino.html">Arduino</a></strong></td><td>AVR/ARM</td><td>16-84 MHz</td><td>2KB-256KB RAM</td><td>Prototyping, education, hobbyist projects</td></tr>
<tr><td><strong><a href="embedded/esp32.html">ESP32</a></strong></td><td>Xtensa/RISC-V</td><td>160-240 MHz</td><td>520KB RAM</td><td>IoT, WiFi/BLE projects</td></tr>
<tr><td><strong><a href="embedded/stm32.html">STM32</a></strong></td><td>ARM Cortex-M</td><td>48-550 MHz</td><td>32KB-2MB RAM</td><td>Professional, industrial applications</td></tr>
<tr><td><strong><a href="embedded/avr.html">AVR</a></strong></td><td>AVR</td><td>1-20 MHz</td><td>512B-16KB RAM</td><td>Low-power, bare-metal programming</td></tr>
<tr><td><strong><a href="embedded/raspberry_pi.html">Raspberry Pi</a></strong></td><td>ARM Cortex-A</td><td>700MHz-2.4GHz</td><td>512MB-8GB RAM</td><td>Linux-based, complex applications</td></tr>
</tbody></table>
</div>
<h3 id="comparison-matrix-1"><a class="header" href="#comparison-matrix-1">Comparison Matrix</a></h3>
<pre><code>Complexity/Capability
    ^
    |
RPi |  ┌──────────┐
    |  │          │
STM32| │          │    ┌──────┐
    |  │          │    │      │
ESP32|  │          │    │      │  ┌─────┐
    |  │          │    │      │  │     │
ARD  |  │          │    │      │  │     │  ┌────┐
    |  │          │    │      │  │     │  │    │
AVR  |  │          │    │      │  │     │  │    │
    |  └──────────┴────┴──────┴──┴─────┴──┴────┘
    +──────────────────────────────────────────&gt; Cost
       Low                                  High
</code></pre>
<h2 id="core-concepts-3"><a class="header" href="#core-concepts-3">Core Concepts</a></h2>
<h3 id="memory-architecture"><a class="header" href="#memory-architecture">Memory Architecture</a></h3>
<h4 id="flash-memory-program-storage"><a class="header" href="#flash-memory-program-storage">Flash Memory (Program Storage)</a></h4>
<ul>
<li>Stores program code and constant data</li>
<li>Non-volatile (persists without power)</li>
<li>Typically 8KB to several MB</li>
<li>Limited write cycles (10K-100K)</li>
</ul>
<h4 id="sram-runtime-memory"><a class="header" href="#sram-runtime-memory">SRAM (Runtime Memory)</a></h4>
<ul>
<li>Stores variables and stack during execution</li>
<li>Volatile (lost when power removed)</li>
<li>Fast access, limited size</li>
<li>Critical resource in embedded systems</li>
</ul>
<h4 id="eeprom-persistent-data"><a class="header" href="#eeprom-persistent-data">EEPROM (Persistent Data)</a></h4>
<ul>
<li>Stores configuration and calibration data</li>
<li>Non-volatile, byte-addressable</li>
<li>Limited write cycles but higher than Flash</li>
<li>Slower than SRAM</li>
</ul>
<pre><code>Memory Map Example (ATmega328P):
┌────────────────┐ 0x0000
│  Flash (32KB)  │
│  Program Code  │
├────────────────┤ 0x7FFF
│  SRAM (2KB)    │
│  Variables     │
│  Stack         │
├────────────────┤ 0x08FF
│  EEPROM (1KB)  │
│  Persistent    │
└────────────────┘ 0x03FF
</code></pre>
<h3 id="power-management-1"><a class="header" href="#power-management-1">Power Management</a></h3>
<h4 id="operating-modes"><a class="header" href="#operating-modes">Operating Modes</a></h4>
<ol>
<li><strong>Active Mode</strong>: Full operation, highest power consumption</li>
<li><strong>Idle Mode</strong>: CPU stopped, peripherals running</li>
<li><strong>Sleep Mode</strong>: Most peripherals disabled</li>
<li><strong>Deep Sleep</strong>: Minimal power, wake on interrupt only</li>
</ol>
<h4 id="power-saving-techniques"><a class="header" href="#power-saving-techniques">Power Saving Techniques</a></h4>
<pre><code class="language-c">// Example: AVR Sleep Mode
#include &lt;avr/sleep.h&gt;
#include &lt;avr/power.h&gt;

void enterSleepMode() {
    set_sleep_mode(SLEEP_MODE_PWR_DOWN);
    sleep_enable();
    
    // Disable unnecessary peripherals
    power_adc_disable();
    power_spi_disable();
    power_timer0_disable();
    
    sleep_mode();  // Enter sleep
    
    // Wake up here after interrupt
    sleep_disable();
    
    // Re-enable peripherals
    power_all_enable();
}
</code></pre>
<h3 id="interrupt-driven-programming"><a class="header" href="#interrupt-driven-programming">Interrupt-Driven Programming</a></h3>
<p>Interrupts allow the processor to respond to events immediately without polling.</p>
<pre><code class="language-c">// Example: External Interrupt
volatile bool buttonPressed = false;

// Interrupt Service Routine (ISR)
void EXTI0_IRQHandler(void) {
    if (EXTI-&gt;PR &amp; EXTI_PR_PR0) {
        buttonPressed = true;
        EXTI-&gt;PR |= EXTI_PR_PR0;  // Clear interrupt flag
    }
}

int main(void) {
    // Setup interrupt
    RCC-&gt;APB2ENR |= RCC_APB2ENR_IOPAEN;
    GPIOA-&gt;CRL &amp;= ~GPIO_CRL_CNF0;
    GPIOA-&gt;CRL |= GPIO_CRL_CNF0_1;  // Input with pull-up
    
    AFIO-&gt;EXTICR[0] = AFIO_EXTICR1_EXTI0_PA;
    EXTI-&gt;IMR |= EXTI_IMR_MR0;
    EXTI-&gt;FTSR |= EXTI_FTSR_TR0;  // Falling edge
    
    NVIC_EnableIRQ(EXTI0_IRQn);
    
    while (1) {
        if (buttonPressed) {
            // Handle button press
            buttonPressed = false;
        }
        // Main loop continues
    }
}
</code></pre>
<h2 id="communication-protocols"><a class="header" href="#communication-protocols">Communication Protocols</a></h2>
<h3 id="serial-protocols-overview"><a class="header" href="#serial-protocols-overview">Serial Protocols Overview</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Type</th><th>Speed</th><th>Wires</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong><a href="embedded/uart.html">UART</a></strong></td><td>Asynchronous</td><td>Up to 1 Mbps</td><td>2 (TX/RX)</td><td>Debug, GPS, Bluetooth modules</td></tr>
<tr><td><strong><a href="embedded/spi.html">SPI</a></strong></td><td>Synchronous</td><td>Up to 50 Mbps</td><td>4+ (MOSI/MISO/SCK/CS)</td><td>SD cards, displays, high-speed sensors</td></tr>
<tr><td><strong><a href="embedded/i2c.html">I2C</a></strong></td><td>Synchronous</td><td>100-400 kHz</td><td>2 (SDA/SCL)</td><td>Sensors, RTCs, EEPROMs</td></tr>
<tr><td><strong><a href="embedded/can.html">CAN</a></strong></td><td>Differential</td><td>Up to 1 Mbps</td><td>2 (CAN_H/CAN_L)</td><td>Automotive, industrial</td></tr>
<tr><td><strong><a href="embedded/usb.html">USB</a></strong></td><td>Differential</td><td>1.5-480 Mbps</td><td>2 (D+/D-)</td><td>PC interface, peripherals</td></tr>
</tbody></table>
</div>
<h3 id="protocol-comparison"><a class="header" href="#protocol-comparison">Protocol Comparison</a></h3>
<pre><code>Speed (Mbps)
    ^
    |
100 |                    ┌─── USB 2.0
    |                    │
 50 |            ┌─── SPI│
    |            │       │
 10 |            │       │
    |            │       │
  1 |  ┌─ UART  │       │
    |  │    │   │       │
0.1 |  │ I2C│   │       │
    |  │    │   │       │
    └──┴────┴───┴───────┴────────&gt; Complexity
       Low              High
</code></pre>
<h2 id="peripheral-interfaces"><a class="header" href="#peripheral-interfaces">Peripheral Interfaces</a></h2>
<h3 id="digital-io-gpio"><a class="header" href="#digital-io-gpio">Digital I/O (<a href="embedded/gpio.html">GPIO</a>)</a></h3>
<ul>
<li>General Purpose Input/Output pins</li>
<li>Digital HIGH/LOW states</li>
<li>Input modes: floating, pull-up, pull-down</li>
<li>Output modes: push-pull, open-drain</li>
</ul>
<h3 id="analog-interfaces"><a class="header" href="#analog-interfaces">Analog Interfaces</a></h3>
<ul>
<li><strong><a href="embedded/adc.html">ADC</a></strong>: Convert analog voltages to digital values</li>
<li><strong><a href="embedded/dac.html">DAC</a></strong>: Convert digital values to analog voltages</li>
<li><strong><a href="embedded/pwm.html">PWM</a></strong>: Pulse Width Modulation for analog-like output</li>
</ul>
<h3 id="timing-and-control"><a class="header" href="#timing-and-control">Timing and Control</a></h3>
<ul>
<li><strong><a href="embedded/timers.html">Timers</a></strong>: Hardware timers for precise timing</li>
<li><strong><a href="embedded/interrupts.html">Interrupts</a></strong>: Event-driven programming</li>
<li><strong><a href="embedded/watchdog.html">Watchdog</a></strong>: System reliability and reset</li>
</ul>
<h3 id="specialized-interfaces"><a class="header" href="#specialized-interfaces">Specialized Interfaces</a></h3>
<ul>
<li><strong><a href="embedded/rtc.html">RTC</a></strong>: Real-Time Clock for timekeeping</li>
<li><strong><a href="embedded/sdio.html">SDIO</a></strong>: SD card interface</li>
<li><strong><a href="embedded/ethernet.html">Ethernet</a></strong>: Network connectivity</li>
</ul>
<h2 id="getting-started-4"><a class="header" href="#getting-started-4">Getting Started</a></h2>
<h3 id="development-environment-setup"><a class="header" href="#development-environment-setup">Development Environment Setup</a></h3>
<h4 id="1-choose-your-platform"><a class="header" href="#1-choose-your-platform">1. Choose Your Platform</a></h4>
<p>Start with Arduino for beginners, or jump to STM32/ESP32 for more advanced projects.</p>
<h4 id="2-install-tools"><a class="header" href="#2-install-tools">2. Install Tools</a></h4>
<p><strong>For Arduino:</strong></p>
<pre><code class="language-bash"># Download Arduino IDE from arduino.cc
# Or use Arduino CLI
curl -fsSL https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | sh
</code></pre>
<p><strong>For STM32:</strong></p>
<pre><code class="language-bash"># Install STM32CubeIDE
# Download from st.com
# Or use PlatformIO
pip install platformio
</code></pre>
<p><strong>For ESP32:</strong></p>
<pre><code class="language-bash"># Add ESP32 to Arduino IDE
# Or use ESP-IDF
git clone --recursive https://github.com/espressif/esp-idf.git
cd esp-idf
./install.sh
</code></pre>
<h4 id="3-hardware-setup"><a class="header" href="#3-hardware-setup">3. Hardware Setup</a></h4>
<p><strong>Minimum Requirements:</strong></p>
<ul>
<li>Development board (Arduino Uno, ESP32, STM32 Nucleo, etc.)</li>
<li>USB cable</li>
<li>Computer with IDE installed</li>
<li>Optional: Breadboard, jumper wires, components</li>
</ul>
<p><strong>Development Kit:</strong></p>
<pre><code>Essential Components:
├─ Microcontroller board
├─ USB cable
├─ Breadboard
├─ Jumper wires (male-male, male-female)
├─ LEDs and resistors (220Ω)
├─ Push buttons
├─ Potentiometer (10kΩ)
└─ Multimeter

Sensors (Optional):
├─ Temperature (DHT11/22, DS18B20)
├─ Distance (HC-SR04 ultrasonic)
├─ Light (LDR, BH1750)
└─ Motion (PIR, MPU6050)
</code></pre>
<h3 id="first-program-blink-led"><a class="header" href="#first-program-blink-led">First Program: Blink LED</a></h3>
<h4 id="arduino-version"><a class="header" href="#arduino-version">Arduino Version</a></h4>
<pre><code class="language-cpp">// Blink LED on pin 13
void setup() {
    pinMode(13, OUTPUT);
}

void loop() {
    digitalWrite(13, HIGH);
    delay(1000);
    digitalWrite(13, LOW);
    delay(1000);
}
</code></pre>
<h4 id="stm32-hal-version"><a class="header" href="#stm32-hal-version">STM32 HAL Version</a></h4>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

int main(void) {
    HAL_Init();
    SystemClock_Config();
    
    __HAL_RCC_GPIOA_CLK_ENABLE();
    
    GPIO_InitTypeDef GPIO_InitStruct = {0};
    GPIO_InitStruct.Pin = GPIO_PIN_5;
    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
    GPIO_InitStruct.Pull = GPIO_NOPULL;
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
    HAL_GPIO_Init(GPIOA, &amp;GPIO_InitStruct);
    
    while (1) {
        HAL_GPIO_TogglePin(GPIOA, GPIO_PIN_5);
        HAL_Delay(1000);
    }
}
</code></pre>
<h4 id="bare-metal-avr-version"><a class="header" href="#bare-metal-avr-version">Bare Metal AVR Version</a></h4>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

int main(void) {
    DDRB |= (1 &lt;&lt; DDB5);  // Set PB5 as output
    
    while (1) {
        PORTB |= (1 &lt;&lt; PORTB5);   // LED on
        _delay_ms(1000);
        PORTB &amp;= ~(1 &lt;&lt; PORTB5);  // LED off
        _delay_ms(1000);
    }
    
    return 0;
}
</code></pre>
<h3 id="learning-path-2"><a class="header" href="#learning-path-2">Learning Path</a></h3>
<pre><code>┌─────────────────────────────────────────────┐
│ Level 1: Fundamentals                       │
├─────────────────────────────────────────────┤
│ • Digital I/O (LED, button)                 │
│ • Analog input (ADC, potentiometer)         │
│ • PWM (LED brightness, motor speed)         │
│ • Serial communication (UART debug)         │
└─────────────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────┐
│ Level 2: Intermediate                       │
├─────────────────────────────────────────────┤
│ • Timers and interrupts                     │
│ • I2C sensors (temperature, accelerometer)  │
│ • SPI devices (SD card, display)            │
│ • State machines                            │
└─────────────────────────────────────────────┘
              │
              ▼
┌─────────────────────────────────────────────┐
│ Level 3: Advanced                           │
├─────────────────────────────────────────────┤
│ • DMA transfers                             │
│ • RTOS (FreeRTOS)                          │
│ • Low-power optimization                    │
│ • Bootloaders and OTA updates              │
└─────────────────────────────────────────────┘
</code></pre>
<h3 id="common-project-ideas"><a class="header" href="#common-project-ideas">Common Project Ideas</a></h3>
<ol>
<li>
<p><strong>Beginner Projects</strong></p>
<ul>
<li>LED blink and patterns</li>
<li>Button-controlled LED</li>
<li>Temperature monitor</li>
<li>Light-sensitive nightlight</li>
</ul>
</li>
<li>
<p><strong>Intermediate Projects</strong></p>
<ul>
<li>Digital thermometer with display</li>
<li>Motor speed controller</li>
<li>Distance measurement system</li>
<li>Data logger with SD card</li>
</ul>
</li>
<li>
<p><strong>Advanced Projects</strong></p>
<ul>
<li>Weather station with WiFi</li>
<li>Robot controller</li>
<li>Home automation system</li>
<li>Wireless sensor network</li>
</ul>
</li>
</ol>
<h2 id="best-practices-26"><a class="header" href="#best-practices-26">Best Practices</a></h2>
<h3 id="code-organization"><a class="header" href="#code-organization">Code Organization</a></h3>
<pre><code class="language-c">// Good structure
├─ src/
│  ├─ main.c
│  ├─ drivers/
│  │  ├─ sensor.c
│  │  └─ display.c
│  └─ app/
│     ├─ control.c
│     └─ config.c
├─ inc/
│  ├─ sensor.h
│  ├─ display.h
│  └─ config.h
└─ Makefile
</code></pre>
<h3 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h3>
<ol>
<li><strong>Keep ISRs Short</strong>: Minimal processing in interrupt handlers</li>
<li><strong>Use Volatile</strong>: For variables modified by ISRs</li>
<li><strong>Debounce Inputs</strong>: Software or hardware debouncing for buttons</li>
<li><strong>Watchdog Timer</strong>: Implement system recovery</li>
<li><strong>Power Efficiency</strong>: Use sleep modes when idle</li>
<li><strong>Error Handling</strong>: Check return values and handle failures</li>
<li><strong>Documentation</strong>: Comment complex logic and register operations</li>
</ol>
<h3 id="debugging-techniques"><a class="header" href="#debugging-techniques">Debugging Techniques</a></h3>
<pre><code class="language-c">// UART debug output
void debug_print(const char* msg) {
    uart_send_string(msg);
}

// LED status indicators
#define LED_ERROR   GPIO_PIN_0
#define LED_OK      GPIO_PIN_1
#define LED_BUSY    GPIO_PIN_2

// Assert macro
#define ASSERT(expr) \
    if (!(expr)) { \
        debug_print("Assert failed: " #expr); \
        while(1);  // Halt \
    }
</code></pre>
<h2 id="resources-23"><a class="header" href="#resources-23">Resources</a></h2>
<h3 id="documentation-4"><a class="header" href="#documentation-4">Documentation</a></h3>
<ul>
<li>Platform-specific datasheets and reference manuals</li>
<li>Peripheral application notes</li>
<li>HAL/LL library documentation</li>
</ul>
<h3 id="tools-9"><a class="header" href="#tools-9">Tools</a></h3>
<ul>
<li><strong>Oscilloscope</strong>: Analyze signals and timing</li>
<li><strong>Logic Analyzer</strong>: Debug digital protocols</li>
<li><strong>Multimeter</strong>: Measure voltages and continuity</li>
<li><strong>Debugger</strong>: JTAG/SWD for step-through debugging</li>
</ul>
<h3 id="communities-3"><a class="header" href="#communities-3">Communities</a></h3>
<ul>
<li>Arduino Forum</li>
<li>STM32 Community</li>
<li>ESP32 Forum</li>
<li>Reddit: r/embedded, r/arduino</li>
<li>Stack Overflow: Embedded tag</li>
</ul>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="embedded/gpio.html">GPIO Programming</a></li>
<li><a href="embedded/uart.html">UART Communication</a></li>
<li><a href="embedded/interrupts.html">Interrupt Handling</a></li>
<li><a href="embedded/power_management.html">Power Management</a></li>
<li><a href="embedded/debugging.html">Debugging Techniques</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="avr-microcontrollers"><a class="header" href="#avr-microcontrollers">AVR Microcontrollers</a></h1>
<p>Comprehensive guide to AVR microcontroller programming with register-level control and bare-metal development.</p>
<h2 id="table-of-contents-25"><a class="header" href="#table-of-contents-25">Table of Contents</a></h2>
<ol>
<li><a href="embedded/avr.html#introduction">Introduction</a></li>
<li><a href="embedded/avr.html#avr-architecture">AVR Architecture</a></li>
<li><a href="embedded/avr.html#development-setup">Development Setup</a></li>
<li><a href="embedded/avr.html#register-programming">Register Programming</a></li>
<li><a href="embedded/avr.html#gpio-control">GPIO Control</a></li>
<li><a href="embedded/avr.html#timers-and-counters">Timers and Counters</a></li>
<li><a href="embedded/avr.html#interrupts">Interrupts</a></li>
<li><a href="embedded/avr.html#communication-protocols">Communication Protocols</a></li>
<li><a href="embedded/avr.html#advanced-topics">Advanced Topics</a></li>
</ol>
<h2 id="introduction-12"><a class="header" href="#introduction-12">Introduction</a></h2>
<p>AVR is a family of 8-bit RISC microcontrollers developed by Atmel (now Microchip). They are widely used in Arduino boards and embedded systems due to their simplicity, efficiency, and low cost.</p>
<h3 id="key-features-4"><a class="header" href="#key-features-4">Key Features</a></h3>
<ul>
<li><strong>8-bit RISC Architecture</strong>: Harvard architecture with separate program and data memory</li>
<li><strong>Clock Speed</strong>: 1-20 MHz</li>
<li><strong>Flash Memory</strong>: 2-256 KB</li>
<li><strong>SRAM</strong>: 128 bytes - 16 KB</li>
<li><strong>EEPROM</strong>: 64 bytes - 4 KB</li>
<li><strong>Peripherals</strong>: GPIO, Timers, ADC, UART, SPI, I2C</li>
<li><strong>Power Efficient</strong>: Multiple sleep modes</li>
<li><strong>Price</strong>: $1-5</li>
</ul>
<h3 id="popular-avr-microcontrollers"><a class="header" href="#popular-avr-microcontrollers">Popular AVR Microcontrollers</a></h3>
<div class="table-wrapper"><table><thead><tr><th>MCU</th><th>Flash</th><th>RAM</th><th>EEPROM</th><th>GPIO</th><th>ADC</th><th>Timers</th><th>Package</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>ATtiny13</strong></td><td>1 KB</td><td>64 B</td><td>64 B</td><td>6</td><td>4</td><td>1</td><td>8-pin</td><td>Ultra-small projects</td></tr>
<tr><td><strong>ATtiny85</strong></td><td>8 KB</td><td>512 B</td><td>512 B</td><td>6</td><td>4</td><td>2</td><td>8-pin</td><td>Small projects</td></tr>
<tr><td><strong>ATmega8</strong></td><td>8 KB</td><td>1 KB</td><td>512 B</td><td>23</td><td>6</td><td>3</td><td>28-pin</td><td>Entry level</td></tr>
<tr><td><strong>ATmega328P</strong></td><td>32 KB</td><td>2 KB</td><td>1 KB</td><td>23</td><td>6</td><td>3</td><td>28-pin</td><td>Arduino Uno</td></tr>
<tr><td><strong>ATmega2560</strong></td><td>256 KB</td><td>8 KB</td><td>4 KB</td><td>86</td><td>16</td><td>6</td><td>100-pin</td><td>Arduino Mega</td></tr>
</tbody></table>
</div>
<h2 id="avr-architecture"><a class="header" href="#avr-architecture">AVR Architecture</a></h2>
<h3 id="memory-organization"><a class="header" href="#memory-organization">Memory Organization</a></h3>
<pre><code>┌──────────────────────────────────────┐
│        AVR Memory Map                │
├──────────────────────────────────────┤
│  Program Memory (Flash)              │
│  ┌────────────────────────────────┐  │
│  │ 0x0000: Interrupt Vectors      │  │
│  │ 0x0034: Program Code           │  │
│  │ ...                            │  │
│  │ End:    Bootloader (optional)  │  │
│  └────────────────────────────────┘  │
├──────────────────────────────────────┤
│  Data Memory (SRAM)                  │
│  ┌────────────────────────────────┐  │
│  │ 0x0000-0x001F: Registers (R0-R31)│
│  │ 0x0020-0x005F: I/O Registers   │  │
│  │ 0x0060-0x00FF: Extended I/O    │  │
│  │ 0x0100-...   : SRAM            │  │
│  │ ...          : Stack (grows ↓) │  │
│  └────────────────────────────────┘  │
├──────────────────────────────────────┤
│  EEPROM (Non-volatile)               │
│  ┌────────────────────────────────┐  │
│  │ 0x0000: User data storage      │  │
│  │ ...                            │  │
│  └────────────────────────────────┘  │
└──────────────────────────────────────┘
</code></pre>
<h3 id="registers"><a class="header" href="#registers">Registers</a></h3>
<h4 id="general-purpose-registers"><a class="header" href="#general-purpose-registers">General Purpose Registers</a></h4>
<pre><code>R0-R31:  32 general-purpose 8-bit registers
R26-R27: X pointer (XL, XH)
R28-R29: Y pointer (YL, YH)
R30-R31: Z pointer (ZL, ZH)
</code></pre>
<h4 id="status-register-sreg"><a class="header" href="#status-register-sreg">Status Register (SREG)</a></h4>
<pre><code>Bit 7: I - Global Interrupt Enable
Bit 6: T - Transfer bit
Bit 5: H - Half Carry Flag
Bit 4: S - Sign Flag
Bit 3: V - Overflow Flag
Bit 2: N - Negative Flag
Bit 1: Z - Zero Flag
Bit 0: C - Carry Flag
</code></pre>
<h3 id="atmega328p-pinout"><a class="header" href="#atmega328p-pinout">ATmega328P Pinout</a></h3>
<pre><code>         ATmega328P (DIP-28)
              ┌───∪───┐
    RESET  1 ─┤       ├─ 28  PC5/ADC5/SCL
    RXD/D0 2 ─┤       ├─ 27  PC4/ADC4/SDA
    TXD/D1 3 ─┤       ├─ 26  PC3/ADC3
    INT0/D2 4 ─┤       ├─ 25  PC2/ADC2
    INT1/D3 5 ─┤       ├─ 24  PC1/ADC1
    D4     6 ─┤       ├─ 23  PC0/ADC0
    VCC    7 ─┤       ├─ 22  GND
    GND    8 ─┤       ├─ 21  AREF
    XTAL1  9 ─┤       ├─ 20  AVCC
    XTAL2 10 ─┤       ├─ 19  PB5/SCK
    D5    11 ─┤       ├─ 18  PB4/MISO
    D6    12 ─┤       ├─ 17  PB3/MOSI
    D7    13 ─┤       ├─ 16  PB2/SS
    D8    14 ─┤       ├─ 15  PB1/OC1A
              └───────┘

GPIO Ports:
  Port B (PB0-PB5): Digital I/O, SPI
  Port C (PC0-PC5): Analog input (ADC), I2C
  Port D (PD0-PD7): Digital I/O, UART, Interrupts
</code></pre>
<h2 id="development-setup"><a class="header" href="#development-setup">Development Setup</a></h2>
<h3 id="avr-gcc-toolchain"><a class="header" href="#avr-gcc-toolchain">AVR-GCC Toolchain</a></h3>
<pre><code class="language-bash"># Install AVR tools (Ubuntu/Debian)
sudo apt install gcc-avr avr-libc avrdude

# Install on Arch Linux
sudo pacman -S avr-gcc avr-libc avrdude

# Install on macOS
brew install avr-gcc avr-libc avrdude

# Verify installation
avr-gcc --version
avrdude -v
</code></pre>
<h3 id="project-structure-1"><a class="header" href="#project-structure-1">Project Structure</a></h3>
<pre><code>project/
├── main.c
├── Makefile
└── README.md
</code></pre>
<h3 id="makefile-template"><a class="header" href="#makefile-template">Makefile Template</a></h3>
<pre><code class="language-makefile"># AVR Makefile
MCU = atmega328p
F_CPU = 16000000UL
BAUD = 9600

CC = avr-gcc
OBJCOPY = avr-objcopy
OBJDUMP = avr-objdump
SIZE = avr-size

TARGET = main
SRC = main.c

CFLAGS = -mmcu=$(MCU) -DF_CPU=$(F_CPU) -DBAUD=$(BAUD)
CFLAGS += -Os -Wall -Wextra -std=c99

# Programmer settings
PROGRAMMER = arduino
PORT = /dev/ttyUSB0

all: $(TARGET).hex

$(TARGET).elf: $(SRC)
	$(CC) $(CFLAGS) -o $@ $^
	$(SIZE) $@

$(TARGET).hex: $(TARGET).elf
	$(OBJCOPY) -O ihex -R .eeprom $&lt; $@

flash: $(TARGET).hex
	avrdude -c $(PROGRAMMER) -p $(MCU) -P $(PORT) -U flash:w:$&lt;

clean:
	rm -f $(TARGET).elf $(TARGET).hex

.PHONY: all flash clean
</code></pre>
<h3 id="compiling-and-flashing"><a class="header" href="#compiling-and-flashing">Compiling and Flashing</a></h3>
<pre><code class="language-bash"># Compile
make

# Flash to device
make flash

# Clean build files
make clean

# Manual commands
avr-gcc -mmcu=atmega328p -DF_CPU=16000000UL -Os -o main.elf main.c
avr-objcopy -O ihex -R .eeprom main.elf main.hex
avrdude -c arduino -p atmega328p -P /dev/ttyUSB0 -U flash:w:main.hex
</code></pre>
<h2 id="register-programming"><a class="header" href="#register-programming">Register Programming</a></h2>
<h3 id="understanding-registers"><a class="header" href="#understanding-registers">Understanding Registers</a></h3>
<p>AVR programming requires direct manipulation of hardware registers. Each peripheral has associated registers for control and data.</p>
<h4 id="register-operations"><a class="header" href="#register-operations">Register Operations</a></h4>
<pre><code class="language-c">#include &lt;avr/io.h&gt;

/* Set bit (set to 1) */
PORTB |= (1 &lt;&lt; PB5);

/* Clear bit (set to 0) */
PORTB &amp;= ~(1 &lt;&lt; PB5);

/* Toggle bit */
PORTB ^= (1 &lt;&lt; PB5);

/* Check bit */
if (PIND &amp; (1 &lt;&lt; PD2)) {
    // Bit is set
}

/* Set multiple bits */
PORTB |= (1 &lt;&lt; PB0) | (1 &lt;&lt; PB1) | (1 &lt;&lt; PB2);

/* Clear multiple bits */
PORTB &amp;= ~((1 &lt;&lt; PB0) | (1 &lt;&lt; PB1));

/* Write entire register */
PORTB = 0b10101010;
</code></pre>
<h2 id="gpio-control"><a class="header" href="#gpio-control">GPIO Control</a></h2>
<h3 id="port-registers"><a class="header" href="#port-registers">Port Registers</a></h3>
<p>Each GPIO port has three registers:</p>
<ul>
<li><strong>DDRx</strong>: Data Direction Register (1 = Output, 0 = Input)</li>
<li><strong>PORTx</strong>: Port Output Register (Output value or pull-up enable)</li>
<li><strong>PINx</strong>: Port Input Register (Read input state)</li>
</ul>
<h3 id="basic-gpio-example"><a class="header" href="#basic-gpio-example">Basic GPIO Example</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

int main(void) {
    /* Set PB5 (Arduino pin 13) as output */
    DDRB |= (1 &lt;&lt; DDB5);
    
    /* Main loop */
    while (1) {
        /* Turn LED on */
        PORTB |= (1 &lt;&lt; PORTB5);
        _delay_ms(1000);
        
        /* Turn LED off */
        PORTB &amp;= ~(1 &lt;&lt; PORTB5);
        _delay_ms(1000);
    }
    
    return 0;
}
</code></pre>
<h3 id="button-input-with-pull-up"><a class="header" href="#button-input-with-pull-up">Button Input with Pull-up</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

int main(void) {
    /* PB5 as output (LED) */
    DDRB |= (1 &lt;&lt; DDB5);
    
    /* PD2 as input (button) */
    DDRD &amp;= ~(1 &lt;&lt; DDD2);
    
    /* Enable pull-up resistor on PD2 */
    PORTD |= (1 &lt;&lt; PORTD2);
    
    while (1) {
        /* Check if button pressed (active low) */
        if (\!(PIND &amp; (1 &lt;&lt; PIND2))) {
            PORTB |= (1 &lt;&lt; PORTB5);   // LED on
        } else {
            PORTB &amp;= ~(1 &lt;&lt; PORTB5);  // LED off
        }
        
        _delay_ms(10);  // Debounce delay
    }
    
    return 0;
}
</code></pre>
<h3 id="multiple-led-control"><a class="header" href="#multiple-led-control">Multiple LED Control</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

int main(void) {
    /* Set PB0-PB5 as outputs */
    DDRB = 0b00111111;
    
    while (1) {
        /* Running LED pattern */
        for (uint8_t i = 0; i &lt; 6; i++) {
            PORTB = (1 &lt;&lt; i);
            _delay_ms(200);
        }
        
        /* Reverse */
        for (uint8_t i = 6; i &gt; 0; i--) {
            PORTB = (1 &lt;&lt; (i-1));
            _delay_ms(200);
        }
    }
    
    return 0;
}
</code></pre>
<h2 id="timers-and-counters"><a class="header" href="#timers-and-counters">Timers and Counters</a></h2>
<p>AVR timers are versatile peripherals for timing, counting, PWM generation, and more.</p>
<h3 id="timer0-8-bit"><a class="header" href="#timer0-8-bit">Timer0 (8-bit)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/interrupt.h&gt;

volatile uint32_t milliseconds = 0;

/* Timer0 overflow interrupt */
ISR(TIMER0_OVF_vect) {
    milliseconds++;
}

void timer0_init(void) {
    /* Set prescaler to 64 */
    TCCR0B |= (1 &lt;&lt; CS01) | (1 &lt;&lt; CS00);
    
    /* Enable overflow interrupt */
    TIMSK0 |= (1 &lt;&lt; TOIE0);
    
    /* Enable global interrupts */
    sei();
}

int main(void) {
    DDRB |= (1 &lt;&lt; DDB5);
    timer0_init();
    
    while (1) {
        if (milliseconds &gt;= 1000) {
            milliseconds = 0;
            PORTB ^= (1 &lt;&lt; PORTB5);
        }
    }
    
    return 0;
}
</code></pre>
<h3 id="pwm-with-timer1-16-bit"><a class="header" href="#pwm-with-timer1-16-bit">PWM with Timer1 (16-bit)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

void pwm_init(void) {
    /* Set PB1 (OC1A) as output */
    DDRB |= (1 &lt;&lt; DDB1);
    
    /* Fast PWM, 10-bit, non-inverted */
    TCCR1A |= (1 &lt;&lt; WGM11) | (1 &lt;&lt; WGM10);
    TCCR1A |= (1 &lt;&lt; COM1A1);
    TCCR1B |= (1 &lt;&lt; WGM12) | (1 &lt;&lt; CS10);  // No prescaling
    
    /* Set initial duty cycle */
    OCR1A = 512;  // 50% duty cycle (0-1023)
}

int main(void) {
    pwm_init();
    
    while (1) {
        /* Fade in */
        for (uint16_t i = 0; i &lt;= 1023; i += 10) {
            OCR1A = i;
            _delay_ms(20);
        }
        
        /* Fade out */
        for (uint16_t i = 1023; i &gt; 0; i -= 10) {
            OCR1A = i;
            _delay_ms(20);
        }
    }
    
    return 0;
}
</code></pre>
<h3 id="timer2-ctc-mode-precise-timing"><a class="header" href="#timer2-ctc-mode-precise-timing">Timer2 CTC Mode (Precise Timing)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/interrupt.h&gt;

volatile uint8_t flag = 0;

/* Timer2 compare match interrupt - fires every 1ms */
ISR(TIMER2_COMPA_vect) {
    static uint16_t count = 0;
    count++;
    
    if (count &gt;= 1000) {  // 1 second
        count = 0;
        flag = 1;
    }
}

void timer2_init(void) {
    /* CTC mode */
    TCCR2A |= (1 &lt;&lt; WGM21);
    
    /* Prescaler 64: 16MHz / 64 = 250kHz */
    TCCR2B |= (1 &lt;&lt; CS22);
    
    /* Compare value for 1ms: 250kHz / 250 = 1kHz */
    OCR2A = 249;
    
    /* Enable compare match interrupt */
    TIMSK2 |= (1 &lt;&lt; OCIE2A);
    
    sei();
}

int main(void) {
    DDRB |= (1 &lt;&lt; DDB5);
    timer2_init();
    
    while (1) {
        if (flag) {
            flag = 0;
            PORTB ^= (1 &lt;&lt; PORTB5);
        }
    }
    
    return 0;
}
</code></pre>
<h2 id="interrupts"><a class="header" href="#interrupts">Interrupts</a></h2>
<h3 id="external-interrupts"><a class="header" href="#external-interrupts">External Interrupts</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/interrupt.h&gt;

volatile uint8_t led_state = 0;

/* INT0 interrupt handler */
ISR(INT0_vect) {
    led_state = \!led_state;
    
    if (led_state) {
        PORTB |= (1 &lt;&lt; PORTB5);
    } else {
        PORTB &amp;= ~(1 &lt;&lt; PORTB5);
    }
}

void int0_init(void) {
    /* PD2 as input with pull-up */
    DDRD &amp;= ~(1 &lt;&lt; DDD2);
    PORTD |= (1 &lt;&lt; PORTD2);
    
    /* Trigger on falling edge */
    EICRA |= (1 &lt;&lt; ISC01);
    
    /* Enable INT0 */
    EIMSK |= (1 &lt;&lt; INT0);
    
    sei();
}

int main(void) {
    DDRB |= (1 &lt;&lt; DDB5);
    int0_init();
    
    while (1) {
        /* Main loop can do other things */
    }
    
    return 0;
}
</code></pre>
<h3 id="pin-change-interrupts"><a class="header" href="#pin-change-interrupts">Pin Change Interrupts</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/interrupt.h&gt;

/* PCINT0 interrupt (PB0-PB7) */
ISR(PCINT0_vect) {
    /* Check which pin changed */
    if (\!(PINB &amp; (1 &lt;&lt; PINB0))) {
        // PB0 is low
        PORTB |= (1 &lt;&lt; PORTB5);
    } else {
        PORTB &amp;= ~(1 &lt;&lt; PORTB5);
    }
}

void pcint_init(void) {
    /* Enable pull-up on PB0 */
    PORTB |= (1 &lt;&lt; PORTB0);
    
    /* Enable PCINT0 (PB0) */
    PCMSK0 |= (1 &lt;&lt; PCINT0);
    
    /* Enable pin change interrupt 0 */
    PCICR |= (1 &lt;&lt; PCIE0);
    
    sei();
}

int main(void) {
    DDRB |= (1 &lt;&lt; DDB5);
    DDRB &amp;= ~(1 &lt;&lt; DDB0);
    
    pcint_init();
    
    while (1) {
        /* Main loop */
    }
    
    return 0;
}
</code></pre>
<h2 id="communication-protocols-1"><a class="header" href="#communication-protocols-1">Communication Protocols</a></h2>
<h3 id="uart-serial-communication"><a class="header" href="#uart-serial-communication">UART (Serial Communication)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;

#define BAUD 9600
#define MYUBRR F_CPU/16/BAUD-1

void uart_init(void) {
    /* Set baud rate */
    UBRR0H = (MYUBRR &gt;&gt; 8);
    UBRR0L = MYUBRR;
    
    /* Enable transmitter and receiver */
    UCSR0B = (1 &lt;&lt; TXEN0) | (1 &lt;&lt; RXEN0);
    
    /* Set frame format: 8 data bits, 1 stop bit */
    UCSR0C = (1 &lt;&lt; UCSZ01) | (1 &lt;&lt; UCSZ00);
}

void uart_transmit(uint8_t data) {
    /* Wait for empty transmit buffer */
    while (\!(UCSR0A &amp; (1 &lt;&lt; UDRE0)));
    
    /* Put data into buffer */
    UDR0 = data;
}

uint8_t uart_receive(void) {
    /* Wait for data */
    while (\!(UCSR0A &amp; (1 &lt;&lt; RXC0)));
    
    /* Get and return data */
    return UDR0;
}

void uart_print(const char* str) {
    while (*str) {
        uart_transmit(*str++);
    }
}

int main(void) {
    uart_init();
    
    uart_print("Hello, AVR\!\r\n");
    
    while (1) {
        uint8_t received = uart_receive();
        uart_transmit(received);  // Echo back
    }
    
    return 0;
}
</code></pre>
<h3 id="spi-master"><a class="header" href="#spi-master">SPI Master</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;

void spi_init(void) {
    /* Set MOSI, SCK, and SS as outputs */
    DDRB |= (1 &lt;&lt; DDB3) | (1 &lt;&lt; DDB5) | (1 &lt;&lt; DDB2);
    
    /* Set MISO as input */
    DDRB &amp;= ~(1 &lt;&lt; DDB4);
    
    /* Enable SPI, Master mode, clock = F_CPU/16 */
    SPCR = (1 &lt;&lt; SPE) | (1 &lt;&lt; MSTR) | (1 &lt;&lt; SPR0);
}

uint8_t spi_transfer(uint8_t data) {
    /* Start transmission */
    SPDR = data;
    
    /* Wait for transmission complete */
    while (\!(SPSR &amp; (1 &lt;&lt; SPIF)));
    
    /* Return received data */
    return SPDR;
}

int main(void) {
    spi_init();
    
    while (1) {
        /* Select device (SS low) */
        PORTB &amp;= ~(1 &lt;&lt; PORTB2);
        
        /* Send data */
        spi_transfer(0xAB);
        uint8_t received = spi_transfer(0x00);
        
        /* Deselect device (SS high) */
        PORTB |= (1 &lt;&lt; PORTB2);
    }
    
    return 0;
}
</code></pre>
<h3 id="i2c-twi-master"><a class="header" href="#i2c-twi-master">I2C (TWI) Master</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/twi.h&gt;

#define F_SCL 100000UL  // 100 kHz
#define TWI_BITRATE ((F_CPU / F_SCL) - 16) / 2

void i2c_init(void) {
    /* Set bit rate */
    TWBR = (uint8_t)TWI_BITRATE;
    
    /* Enable TWI */
    TWCR = (1 &lt;&lt; TWEN);
}

void i2c_start(void) {
    /* Send start condition */
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWSTA) | (1 &lt;&lt; TWEN);
    
    /* Wait for completion */
    while (\!(TWCR &amp; (1 &lt;&lt; TWINT)));
}

void i2c_stop(void) {
    /* Send stop condition */
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWSTO) | (1 &lt;&lt; TWEN);
}

void i2c_write(uint8_t data) {
    /* Load data */
    TWDR = data;
    
    /* Start transmission */
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWEN);
    
    /* Wait for completion */
    while (\!(TWCR &amp; (1 &lt;&lt; TWINT)));
}

uint8_t i2c_read_ack(void) {
    /* Enable ACK */
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWEN) | (1 &lt;&lt; TWEA);
    
    /* Wait for completion */
    while (\!(TWCR &amp; (1 &lt;&lt; TWINT)));
    
    return TWDR;
}

uint8_t i2c_read_nack(void) {
    /* Enable NACK */
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWEN);
    
    /* Wait for completion */
    while (\!(TWCR &amp; (1 &lt;&lt; TWINT)));
    
    return TWDR;
}

int main(void) {
    i2c_init();
    
    uint8_t device_addr = 0x68 &lt;&lt; 1;  // 7-bit address
    uint8_t reg_addr = 0x00;
    
    while (1) {
        /* Write to device */
        i2c_start();
        i2c_write(device_addr | 0);  // Write mode
        i2c_write(reg_addr);
        i2c_write(0x42);  // Data
        i2c_stop();
        
        /* Read from device */
        i2c_start();
        i2c_write(device_addr | 0);  // Write mode
        i2c_write(reg_addr);
        i2c_start();  // Repeated start
        i2c_write(device_addr | 1);  // Read mode
        uint8_t data = i2c_read_nack();
        i2c_stop();
    }
    
    return 0;
}
</code></pre>
<h2 id="advanced-topics"><a class="header" href="#advanced-topics">Advanced Topics</a></h2>
<h3 id="adc-analog-to-digital-converter"><a class="header" href="#adc-analog-to-digital-converter">ADC (Analog-to-Digital Converter)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;

void adc_init(void) {
    /* AVCC with external capacitor at AREF */
    ADMUX = (1 &lt;&lt; REFS0);
    
    /* Enable ADC, prescaler 128 (125 kHz @ 16 MHz) */
    ADCSRA = (1 &lt;&lt; ADEN) | (1 &lt;&lt; ADPS2) | (1 &lt;&lt; ADPS1) | (1 &lt;&lt; ADPS0);
}

uint16_t adc_read(uint8_t channel) {
    /* Select channel (0-7) */
    ADMUX = (ADMUX &amp; 0xF0) | (channel &amp; 0x0F);
    
    /* Start conversion */
    ADCSRA |= (1 &lt;&lt; ADSC);
    
    /* Wait for completion */
    while (ADCSRA &amp; (1 &lt;&lt; ADSC));
    
    return ADC;
}

int main(void) {
    uart_init();
    adc_init();
    
    while (1) {
        uint16_t value = adc_read(0);  // Read ADC0
        
        /* Convert to voltage (5V reference, 10-bit) */
        float voltage = (value * 5.0) / 1024.0;
        
        _delay_ms(100);
    }
    
    return 0;
}
</code></pre>
<h3 id="eeprom-access"><a class="header" href="#eeprom-access">EEPROM Access</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/eeprom.h&gt;

uint8_t EEMEM stored_value;  // EEPROM variable

void eeprom_write_byte_custom(uint16_t address, uint8_t data) {
    /* Wait for completion of previous write */
    while (EECR &amp; (1 &lt;&lt; EEPE));
    
    /* Set address and data registers */
    EEAR = address;
    EEDR = data;
    
    /* Write logical one to EEMPE */
    EECR |= (1 &lt;&lt; EEMPE);
    
    /* Start eeprom write by setting EEPE */
    EECR |= (1 &lt;&lt; EEPE);
}

uint8_t eeprom_read_byte_custom(uint16_t address) {
    /* Wait for completion of previous write */
    while (EECR &amp; (1 &lt;&lt; EEPE));
    
    /* Set address register */
    EEAR = address;
    
    /* Start eeprom read by writing EERE */
    EECR |= (1 &lt;&lt; EERE);
    
    /* Return data from data register */
    return EEDR;
}

int main(void) {
    /* Using avr-libc functions (recommended) */
    eeprom_write_byte(&amp;stored_value, 42);
    uint8_t value = eeprom_read_byte(&amp;stored_value);
    
    /* Using custom functions */
    eeprom_write_byte_custom(0, 100);
    uint8_t val = eeprom_read_byte_custom(0);
    
    while (1);
    
    return 0;
}
</code></pre>
<h3 id="sleep-modes"><a class="header" href="#sleep-modes">Sleep Modes</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/sleep.h&gt;
#include &lt;avr/interrupt.h&gt;

ISR(INT0_vect) {
    /* Wake up from sleep */
}

int main(void) {
    /* Configure wake-up source */
    EIMSK |= (1 &lt;&lt; INT0);
    sei();
    
    /* Set sleep mode */
    set_sleep_mode(SLEEP_MODE_PWR_DOWN);
    
    while (1) {
        /* Enter sleep mode */
        sleep_mode();
        
        /* Wake up here and continue */
        PORTB ^= (1 &lt;&lt; PORTB5);
    }
    
    return 0;
}
</code></pre>
<h3 id="watchdog-timer"><a class="header" href="#watchdog-timer">Watchdog Timer</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;avr/wdt.h&gt;

int main(void) {
    /* Disable watchdog on reset */
    MCUSR &amp;= ~(1 &lt;&lt; WDRF);
    wdt_disable();
    
    /* Enable watchdog: 2 second timeout */
    wdt_enable(WDTO_2S);
    
    while (1) {
        /* Main program */
        
        /* Reset watchdog timer */
        wdt_reset();
    }
    
    return 0;
}
</code></pre>
<h2 id="best-practices-27"><a class="header" href="#best-practices-27">Best Practices</a></h2>
<ol>
<li><strong>Use Register Macros</strong>: <code>PORTB |= (1 &lt;&lt; PB5)</code> instead of <code>PORTB |= 0x20</code></li>
<li><strong>Volatile for ISR Variables</strong>: <code>volatile uint8_t flag;</code></li>
<li><strong>Minimize ISR Time</strong>: Keep interrupt handlers short</li>
<li><strong>Proper Delays</strong>: Use timers instead of <code>_delay_ms()</code> for long delays</li>
<li><strong>Power Management</strong>: Disable unused peripherals, use sleep modes</li>
<li><strong>Debouncing</strong>: Add delays or use interrupts with debounce logic</li>
<li><strong>Code Organization</strong>: Separate initialization from main loop</li>
</ol>
<h2 id="troubleshooting-2"><a class="header" href="#troubleshooting-2">Troubleshooting</a></h2>
<h3 id="common-issues-6"><a class="header" href="#common-issues-6">Common Issues</a></h3>
<p><strong>Program Not Running:</strong></p>
<ul>
<li>Check fuse bits (clock source, brown-out detection)</li>
<li>Verify F_CPU matches actual clock speed</li>
<li>Ensure power supply is stable</li>
</ul>
<p><strong>Incorrect Baud Rate:</strong></p>
<ul>
<li>Verify F_CPU is correct</li>
<li>Check UBRR calculation</li>
<li>Use standard baud rates</li>
</ul>
<p><strong>Fuse Bits:</strong></p>
<pre><code class="language-bash"># Read fuses
avrdude -c arduino -p atmega328p -U lfuse:r:-:h -U hfuse:r:-:h -U efuse:r:-:h

# Set fuses (CAREFUL\!)
# Default for Arduino Uno: lfuse=0xFF, hfuse=0xDE, efuse=0xFD
avrdude -c arduino -p atmega328p -U lfuse:w:0xFF:m -U hfuse:w:0xDE:m -U efuse:w:0xFD:m
</code></pre>
<h2 id="resources-24"><a class="header" href="#resources-24">Resources</a></h2>
<ul>
<li><strong>AVR Libc Documentation</strong>: https://www.nongnu.org/avr-libc/</li>
<li><strong>Datasheets</strong>: https://www.microchip.com/</li>
<li><strong>AVR Tutorials</strong>: https://www.avrfreaks.net/</li>
<li><strong>Community</strong>: AVRFreaks forum</li>
</ul>
<h2 id="see-also-1"><a class="header" href="#see-also-1">See Also</a></h2>
<ul>
<li><a href="embedded/arduino.html">Arduino Programming</a> - Higher-level AVR programming</li>
<li><a href="embedded/gpio.html">GPIO Concepts</a></li>
<li><a href="embedded/uart.html">UART Communication</a></li>
<li><a href="embedded/spi.html">SPI Protocol</a></li>
<li><a href="embedded/i2c.html">I2C Protocol</a></li>
<li><a href="embedded/timers.html">Timers and PWM</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stm32-microcontrollers"><a class="header" href="#stm32-microcontrollers">STM32 Microcontrollers</a></h1>
<p>Comprehensive guide to STM32 development using HAL, CubeMX, and bare-metal programming.</p>
<h2 id="table-of-contents-26"><a class="header" href="#table-of-contents-26">Table of Contents</a></h2>
<ol>
<li><a href="embedded/stm32.html#introduction">Introduction</a></li>
<li><a href="embedded/stm32.html#stm32-families">STM32 Families</a></li>
<li><a href="embedded/stm32.html#development-setup">Development Setup</a></li>
<li><a href="embedded/stm32.html#stm32cubemx">STM32CubeMX</a></li>
<li><a href="embedded/stm32.html#hal-programming">HAL Programming</a></li>
<li><a href="embedded/stm32.html#bare-metal-programming">Bare Metal Programming</a></li>
<li><a href="embedded/stm32.html#common-peripherals">Common Peripherals</a></li>
<li><a href="embedded/stm32.html#advanced-topics">Advanced Topics</a></li>
</ol>
<h2 id="introduction-13"><a class="header" href="#introduction-13">Introduction</a></h2>
<p>STM32 is a family of 32-bit microcontrollers from STMicroelectronics based on ARM Cortex-M cores. They offer excellent performance, rich peripherals, and are widely used in professional and industrial applications.</p>
<h3 id="key-features-5"><a class="header" href="#key-features-5">Key Features</a></h3>
<ul>
<li><strong>ARM Cortex-M Cores</strong>: M0, M0+, M3, M4, M7, M33</li>
<li><strong>Clock Speed</strong>: 48 MHz to 550 MHz</li>
<li><strong>Memory</strong>: 16 KB to 2 MB Flash, 4 KB to 1 MB RAM</li>
<li><strong>Peripherals</strong>: GPIO, UART, SPI, I2C, ADC, DAC, Timers, USB, CAN, Ethernet</li>
<li><strong>Development Tools</strong>: Free official IDE and HAL libraries</li>
<li><strong>Price</strong>: $1 to $20 depending on series</li>
</ul>
<h3 id="advantages"><a class="header" href="#advantages">Advantages</a></h3>
<ul>
<li>Professional-grade reliability</li>
<li>Extensive peripheral set</li>
<li>Low power consumption</li>
<li>Strong ecosystem and support</li>
<li>Pin-compatible families</li>
<li>Real-time performance</li>
</ul>
<h2 id="stm32-families"><a class="header" href="#stm32-families">STM32 Families</a></h2>
<h3 id="overview-32"><a class="header" href="#overview-32">Overview</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Family</th><th>Core</th><th>Speed</th><th>Flash</th><th>Use Case</th><th>Examples</th></tr></thead><tbody>
<tr><td><strong>F0</strong></td><td>M0</td><td>48 MHz</td><td>16-256 KB</td><td>Entry-level, cost-sensitive</td><td>STM32F030</td></tr>
<tr><td><strong>F1</strong></td><td>M3</td><td>72 MHz</td><td>16-512 KB</td><td>General purpose, classic</td><td>STM32F103 (Blue Pill)</td></tr>
<tr><td><strong>F4</strong></td><td>M4</td><td>180 MHz</td><td>256 KB-2 MB</td><td>High performance, DSP, FPU</td><td>STM32F407, F429</td></tr>
<tr><td><strong>F7</strong></td><td>M7</td><td>216 MHz</td><td>512 KB-2 MB</td><td>Very high performance</td><td>STM32F746</td></tr>
<tr><td><strong>H7</strong></td><td>M7</td><td>480 MHz</td><td>1-2 MB</td><td>Extreme performance</td><td>STM32H743</td></tr>
<tr><td><strong>L0/L4</strong></td><td>M0+/M4</td><td>32-80 MHz</td><td>16-512 KB</td><td>Ultra-low power</td><td>STM32L476</td></tr>
<tr><td><strong>G0/G4</strong></td><td>M0+/M4</td><td>64-170 MHz</td><td>32-512 KB</td><td>Mainstream, motor control</td><td>STM32G474</td></tr>
</tbody></table>
</div>
<h3 id="popular-development-boards"><a class="header" href="#popular-development-boards">Popular Development Boards</a></h3>
<h4 id="stm32-nucleo-boards"><a class="header" href="#stm32-nucleo-boards">STM32 Nucleo Boards</a></h4>
<pre><code>┌────────────────────────────────┐
│  STM32 Nucleo-64               │
│                                 │
│  ┌─────────────────┐           │
│  │   STM32 MCU     │           │
│  │   (QFP64)       │           │
│  └─────────────────┘           │
│                                 │
│  [CN7] ═══════════════ [CN10]  │  Arduino Headers
│  [CN8] ═══════════════ [CN9]   │
│                                 │
│  [CN1] ST-LINK V2-1            │
│  [USB]                         │
└────────────────────────────────┘

Features:
- Integrated ST-LINK debugger/programmer
- Arduino Uno R3 compatible headers
- Morpho extension headers (full pin access)
- Virtual COM port
- Price: ~$15
</code></pre>
<h4 id="blue-pill-stm32f103c8t6"><a class="header" href="#blue-pill-stm32f103c8t6">Blue Pill (STM32F103C8T6)</a></h4>
<pre><code>┌──────────────────────────┐
│     STM32F103C8T6        │
│     "Blue Pill"          │
│                          │
│  [USB] ═══════════ [SWD] │
│                          │
│  ╔════════════════════╗  │
│  ║  Header Pins       ║  │
│  ║  (40 pins total)   ║  │
│  ╚════════════════════╝  │
│                          │
│  [3.3V] [5V] [GND]       │
└──────────────────────────┘

Specs:
- 72 MHz ARM Cortex-M3
- 64 KB Flash, 20 KB RAM
- 37 GPIO pins
- 2x SPI, 2x I2C, 3x USART
- 12-bit ADC, 2x DAC
- Price: ~$2
</code></pre>
<h2 id="development-setup-1"><a class="header" href="#development-setup-1">Development Setup</a></h2>
<h3 id="stm32cubeide-recommended"><a class="header" href="#stm32cubeide-recommended">STM32CubeIDE (Recommended)</a></h3>
<pre><code class="language-bash"># Download from ST website:
# https://www.st.com/en/development-tools/stm32cubeide.html

# Linux installation:
sudo chmod +x st-stm32cubeide_*.sh
sudo ./st-stm32cubeide_*.sh

# Install udev rules for ST-LINK
sudo cp ~/STMicroelectronics/STM32Cube/STM32CubeIDE/Drivers/rules/*.* /etc/udev/rules.d/
sudo udevadm control --reload-rules
</code></pre>
<h3 id="alternative-command-line-setup"><a class="header" href="#alternative-command-line-setup">Alternative: Command Line Setup</a></h3>
<pre><code class="language-bash"># Install ARM toolchain
sudo apt install gcc-arm-none-eabi gdb-multiarch

# Install OpenOCD (programming/debugging)
sudo apt install openocd

# Install st-link utilities
sudo apt install stlink-tools

# Verify installation
arm-none-eabi-gcc --version
openocd --version
st-info --version
</code></pre>
<h3 id="platformio-setup"><a class="header" href="#platformio-setup">PlatformIO Setup</a></h3>
<pre><code class="language-bash">pip install platformio

# Create project
pio init --board nucleo_f401re

# platformio.ini
[env:nucleo_f401re]
platform = ststm32
board = nucleo_f401re
framework = arduino
# or framework = stm32cube
</code></pre>
<h2 id="stm32cubemx"><a class="header" href="#stm32cubemx">STM32CubeMX</a></h2>
<p>STM32CubeMX is a graphical configuration tool that generates initialization code for STM32 microcontrollers.</p>
<h3 id="creating-a-project"><a class="header" href="#creating-a-project">Creating a Project</a></h3>
<ol>
<li>
<p><strong>Start New Project</strong></p>
<ul>
<li>File &gt; New Project</li>
<li>Select your MCU or board</li>
<li>Click "Start Project"</li>
</ul>
</li>
<li>
<p><strong>Configure Clock</strong></p>
<ul>
<li>Clock Configuration tab</li>
<li>Set HSE/HSI source</li>
<li>Configure PLL multipliers</li>
<li>Set system clock (HCLK)</li>
</ul>
</li>
<li>
<p><strong>Configure Peripherals</strong></p>
<ul>
<li>Pinout &amp; Configuration tab</li>
<li>Click on pins to assign functions</li>
<li>Configure peripheral parameters</li>
</ul>
</li>
<li>
<p><strong>Generate Code</strong></p>
<ul>
<li>Project Manager tab</li>
<li>Set project name and location</li>
<li>Select toolchain (STM32CubeIDE, Makefile, etc.)</li>
<li>Click "Generate Code"</li>
</ul>
</li>
</ol>
<h3 id="example-blink-led-configuration"><a class="header" href="#example-blink-led-configuration">Example: Blink LED Configuration</a></h3>
<pre><code>1. Pinout Configuration:
   - Find LED pin (e.g., PC13 on Blue Pill)
   - Set as GPIO_Output
   - Label it "LED"

2. GPIO Configuration:
   - Mode: Output Push Pull
   - Pull-up/Pull-down: No pull-up and no pull-down
   - Maximum output speed: Low
   - User Label: LED

3. Clock Configuration:
   - HSE: 8 MHz (external crystal)
   - PLL: ×9 (72 MHz system clock)

4. Generate Code
</code></pre>
<h3 id="project-structure-2"><a class="header" href="#project-structure-2">Project Structure</a></h3>
<pre><code>project/
├── Core/
│   ├── Inc/
│   │   ├── main.h
│   │   ├── stm32f1xx_it.h
│   │   └── stm32f1xx_hal_conf.h
│   └── Src/
│       ├── main.c
│       ├── stm32f1xx_it.c
│       └── system_stm32f1xx.c
├── Drivers/
│   ├── STM32F1xx_HAL_Driver/
│   └── CMSIS/
└── Makefile
</code></pre>
<h2 id="hal-programming"><a class="header" href="#hal-programming">HAL Programming</a></h2>
<h3 id="basic-hal-blink"><a class="header" href="#basic-hal-blink">Basic HAL Blink</a></h3>
<pre><code class="language-c">/* main.c - Generated by CubeMX */
#include "main.h"

GPIO_InitTypeDef GPIO_InitStruct = {0};

void SystemClock_Config(void);
static void MX_GPIO_Init(void);

int main(void) {
    /* Initialize HAL Library */
    HAL_Init();
    
    /* Configure system clock */
    SystemClock_Config();
    
    /* Initialize GPIO */
    MX_GPIO_Init();
    
    /* Infinite loop */
    while (1) {
        HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
        HAL_Delay(1000);
    }
}

static void MX_GPIO_Init(void) {
    /* Enable GPIO Clock */
    __HAL_RCC_GPIOC_CLK_ENABLE();
    
    /* Configure GPIO pin */
    GPIO_InitStruct.Pin = GPIO_PIN_13;
    GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
    GPIO_InitStruct.Pull = GPIO_NOPULL;
    GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_LOW;
    HAL_GPIO_Init(GPIOC, &amp;GPIO_InitStruct);
}

void SystemClock_Config(void) {
    /* Generated by CubeMX - configures clocks */
}
</code></pre>
<h3 id="gpio-functions"><a class="header" href="#gpio-functions">GPIO Functions</a></h3>
<pre><code class="language-c">/* Write pin */
HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_SET);    // High
HAL_GPIO_WritePin(GPIOC, GPIO_PIN_13, GPIO_PIN_RESET);  // Low

/* Toggle pin */
HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);

/* Read pin */
GPIO_PinState state = HAL_GPIO_ReadPin(GPIOA, GPIO_PIN_0);

/* External interrupt */
HAL_GPIO_EXTI_IRQHandler(GPIO_PIN_0);  // Call in ISR
void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin);  // Override this
</code></pre>
<h3 id="button-with-interrupt"><a class="header" href="#button-with-interrupt">Button with Interrupt</a></h3>
<pre><code class="language-c">/* Configure button with external interrupt in CubeMX:
   PA0 -&gt; GPIO_EXTI0
   Mode: External Interrupt Mode with Rising edge trigger detection
   Pull-up: Pull-up
   
   In NVIC tab: Enable EXTI line0 interrupt
*/

/* main.c */
volatile uint8_t button_pressed = 0;

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_GPIO_Init();
    
    while (1) {
        if (button_pressed) {
            button_pressed = 0;
            HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
        }
    }
}

/* Interrupt callback - implement this */
void HAL_GPIO_EXTI_Callback(uint16_t GPIO_Pin) {
    if (GPIO_Pin == GPIO_PIN_0) {
        button_pressed = 1;
    }
}

/* stm32f1xx_it.c - Generated by CubeMX */
void EXTI0_IRQHandler(void) {
    HAL_GPIO_EXTI_IRQHandler(GPIO_PIN_0);
}
</code></pre>
<h3 id="uart-communication"><a class="header" href="#uart-communication">UART Communication</a></h3>
<pre><code class="language-c">/* Configure UART in CubeMX:
   USART1: PA9 (TX), PA10 (RX)
   Baud Rate: 115200
   Word Length: 8 Bits
   Stop Bits: 1
   Parity: None
*/

UART_HandleTypeDef huart1;

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_USART1_UART_Init();
    
    uint8_t msg[] = "Hello, STM32!\r\n";
    HAL_UART_Transmit(&amp;huart1, msg, sizeof(msg)-1, HAL_MAX_DELAY);
    
    uint8_t rx_buffer[10];
    while (1) {
        /* Blocking receive */
        HAL_UART_Receive(&amp;huart1, rx_buffer, 1, HAL_MAX_DELAY);
        
        /* Echo back */
        HAL_UART_Transmit(&amp;huart1, rx_buffer, 1, HAL_MAX_DELAY);
    }
}

/* printf redirect */
int _write(int file, char *ptr, int len) {
    HAL_UART_Transmit(&amp;huart1, (uint8_t*)ptr, len, HAL_MAX_DELAY);
    return len;
}
</code></pre>
<h3 id="adc-reading"><a class="header" href="#adc-reading">ADC Reading</a></h3>
<pre><code class="language-c">/* Configure ADC in CubeMX:
   ADC1, Channel 0 (PA0)
   Resolution: 12 bits
   Continuous Conversion: Disabled
*/

ADC_HandleTypeDef hadc1;

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_ADC1_Init();
    
    while (1) {
        HAL_ADC_Start(&amp;hadc1);
        HAL_ADC_PollForConversion(&amp;hadc1, HAL_MAX_DELAY);
        uint32_t adc_value = HAL_ADC_GetValue(&amp;hadc1);
        
        /* Convert to voltage (3.3V reference, 12-bit) */
        float voltage = (adc_value * 3.3f) / 4096.0f;
        
        printf("ADC: %lu, Voltage: %.2f V\r\n", adc_value, voltage);
        
        HAL_Delay(1000);
    }
}
</code></pre>
<h3 id="pwm-output"><a class="header" href="#pwm-output">PWM Output</a></h3>
<pre><code class="language-c">/* Configure Timer in CubeMX:
   TIM2, Channel 1 (PA0)
   Mode: PWM Generation CH1
   Prescaler: 72-1 (1 MHz timer clock)
   Counter Period: 1000-1 (1 kHz PWM)
*/

TIM_HandleTypeDef htim2;

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_TIM2_Init();
    
    /* Start PWM */
    HAL_TIM_PWM_Start(&amp;htim2, TIM_CHANNEL_1);
    
    while (1) {
        /* Fade in */
        for (uint16_t duty = 0; duty &lt;= 1000; duty += 10) {
            __HAL_TIM_SET_COMPARE(&amp;htim2, TIM_CHANNEL_1, duty);
            HAL_Delay(10);
        }
        
        /* Fade out */
        for (uint16_t duty = 1000; duty &gt; 0; duty -= 10) {
            __HAL_TIM_SET_COMPARE(&amp;htim2, TIM_CHANNEL_1, duty);
            HAL_Delay(10);
        }
    }
}
</code></pre>
<h3 id="i2c-communication"><a class="header" href="#i2c-communication">I2C Communication</a></h3>
<pre><code class="language-c">/* Configure I2C in CubeMX:
   I2C1: PB6 (SCL), PB7 (SDA)
   Speed: 100 kHz (Standard Mode)
*/

I2C_HandleTypeDef hi2c1;

#define DEVICE_ADDR 0x68 &lt;&lt; 1  // 7-bit address shifted

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_I2C1_Init();
    
    uint8_t tx_data = 0x00;
    uint8_t rx_data[2];
    
    while (1) {
        /* Write register address */
        HAL_I2C_Master_Transmit(&amp;hi2c1, DEVICE_ADDR, &amp;tx_data, 1, HAL_MAX_DELAY);
        
        /* Read data */
        HAL_I2C_Master_Receive(&amp;hi2c1, DEVICE_ADDR, rx_data, 2, HAL_MAX_DELAY);
        
        HAL_Delay(1000);
    }
}
</code></pre>
<h3 id="spi-communication"><a class="header" href="#spi-communication">SPI Communication</a></h3>
<pre><code class="language-c">/* Configure SPI in CubeMX:
   SPI1: PA5 (SCK), PA6 (MISO), PA7 (MOSI)
   Mode: Master
   Baud Rate Prescaler: 32
   Data Size: 8 Bits
*/

SPI_HandleTypeDef hspi1;

#define CS_PIN GPIO_PIN_4
#define CS_PORT GPIOA

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_SPI1_Init();
    MX_GPIO_Init();  // CS pin
    
    uint8_t tx_data[] = {0x01, 0x02, 0x03};
    uint8_t rx_data[3];
    
    while (1) {
        /* Select device */
        HAL_GPIO_WritePin(CS_PORT, CS_PIN, GPIO_PIN_RESET);
        
        /* Transfer data */
        HAL_SPI_TransmitReceive(&amp;hspi1, tx_data, rx_data, 3, HAL_MAX_DELAY);
        
        /* Deselect device */
        HAL_GPIO_WritePin(CS_PORT, CS_PIN, GPIO_PIN_SET);
        
        HAL_Delay(1000);
    }
}
</code></pre>
<h2 id="bare-metal-programming"><a class="header" href="#bare-metal-programming">Bare Metal Programming</a></h2>
<h3 id="direct-register-access"><a class="header" href="#direct-register-access">Direct Register Access</a></h3>
<pre><code class="language-c">/* Blink LED without HAL - STM32F103 */
#include "stm32f1xx.h"

int main(void) {
    /* Enable GPIOC clock */
    RCC-&gt;APB2ENR |= RCC_APB2ENR_IOPCEN;
    
    /* Configure PC13 as output push-pull, max speed 2 MHz */
    GPIOC-&gt;CRH &amp;= ~(GPIO_CRH_MODE13 | GPIO_CRH_CNF13);
    GPIOC-&gt;CRH |= GPIO_CRH_MODE13_1;  // Output mode, 2 MHz
    
    while (1) {
        /* Toggle LED */
        GPIOC-&gt;ODR ^= GPIO_ODR_ODR13;
        
        /* Delay */
        for (volatile uint32_t i = 0; i &lt; 1000000; i++);
    }
}
</code></pre>
<h3 id="gpio-register-operations"><a class="header" href="#gpio-register-operations">GPIO Register Operations</a></h3>
<pre><code class="language-c">/* Set pin high */
GPIOC-&gt;BSRR = GPIO_BSRR_BS13;    // Bit Set

/* Set pin low */
GPIOC-&gt;BSRR = GPIO_BSRR_BR13;    // Bit Reset

/* Toggle pin */
GPIOC-&gt;ODR ^= GPIO_ODR_ODR13;

/* Read pin */
uint32_t state = GPIOA-&gt;IDR &amp; GPIO_IDR_IDR0;
</code></pre>
<h3 id="uart-bare-metal"><a class="header" href="#uart-bare-metal">UART Bare Metal</a></h3>
<pre><code class="language-c">/* Initialize UART1 - 115200 baud, 72 MHz clock */
void UART1_Init(void) {
    /* Enable clocks */
    RCC-&gt;APB2ENR |= RCC_APB2ENR_USART1EN | RCC_APB2ENR_IOPAEN;
    
    /* Configure PA9 (TX) as alternate function push-pull */
    GPIOA-&gt;CRH &amp;= ~(GPIO_CRH_MODE9 | GPIO_CRH_CNF9);
    GPIOA-&gt;CRH |= GPIO_CRH_MODE9_1 | GPIO_CRH_CNF9_1;
    
    /* Configure PA10 (RX) as input floating */
    GPIOA-&gt;CRH &amp;= ~(GPIO_CRH_MODE10 | GPIO_CRH_CNF10);
    GPIOA-&gt;CRH |= GPIO_CRH_CNF10_0;
    
    /* Configure UART */
    USART1-&gt;BRR = 0x271;  // 115200 baud at 72 MHz
    USART1-&gt;CR1 = USART_CR1_TE | USART_CR1_RE | USART_CR1_UE;
}

void UART1_SendChar(char c) {
    while (!(USART1-&gt;SR &amp; USART_SR_TXE));
    USART1-&gt;DR = c;
}

char UART1_ReceiveChar(void) {
    while (!(USART1-&gt;SR &amp; USART_SR_RXNE));
    return USART1-&gt;DR;
}
</code></pre>
<h3 id="timer-interrupt"><a class="header" href="#timer-interrupt">Timer Interrupt</a></h3>
<pre><code class="language-c">/* Configure TIM2 for 1 second interrupt */
void TIM2_Init(void) {
    /* Enable TIM2 clock */
    RCC-&gt;APB1ENR |= RCC_APB1ENR_TIM2EN;
    
    /* Configure timer:
       72 MHz / 7200 = 10 kHz
       10 kHz / 10000 = 1 Hz (1 second)
    */
    TIM2-&gt;PSC = 7200 - 1;      // Prescaler
    TIM2-&gt;ARR = 10000 - 1;     // Auto-reload
    TIM2-&gt;DIER |= TIM_DIER_UIE;  // Update interrupt enable
    TIM2-&gt;CR1 |= TIM_CR1_CEN;    // Enable timer
    
    /* Enable interrupt in NVIC */
    NVIC_EnableIRQ(TIM2_IRQn);
}

/* Interrupt handler */
void TIM2_IRQHandler(void) {
    if (TIM2-&gt;SR &amp; TIM_SR_UIF) {
        TIM2-&gt;SR &amp;= ~TIM_SR_UIF;  // Clear interrupt flag
        
        /* Toggle LED */
        GPIOC-&gt;ODR ^= GPIO_ODR_ODR13;
    }
}
</code></pre>
<h2 id="common-peripherals"><a class="header" href="#common-peripherals">Common Peripherals</a></h2>
<h3 id="dma-transfer"><a class="header" href="#dma-transfer">DMA Transfer</a></h3>
<pre><code class="language-c">/* Configure DMA for UART TX in CubeMX:
   DMA1, Channel 4
   Direction: Memory to Peripheral
   Mode: Normal
*/

uint8_t tx_buffer[] = "Hello from DMA!\r\n";

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_USART1_UART_Init();
    MX_DMA_Init();
    
    while (1) {
        HAL_UART_Transmit_DMA(&amp;huart1, tx_buffer, sizeof(tx_buffer)-1);
        HAL_Delay(1000);
    }
}

/* DMA transfer complete callback */
void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart) {
    /* Transfer complete - can start next */
}
</code></pre>
<h3 id="rtc-real-time-clock"><a class="header" href="#rtc-real-time-clock">RTC (Real-Time Clock)</a></h3>
<pre><code class="language-c">/* Configure RTC in CubeMX:
   RTC Activated
   Clock Source: LSE (32.768 kHz)
*/

RTC_TimeTypeDef sTime;
RTC_DateTypeDef sDate;

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_RTC_Init();
    
    /* Set time */
    sTime.Hours = 12;
    sTime.Minutes = 0;
    sTime.Seconds = 0;
    HAL_RTC_SetTime(&amp;hrtc, &amp;sTime, RTC_FORMAT_BIN);
    
    /* Set date */
    sDate.Year = 24;
    sDate.Month = 1;
    sDate.Date = 15;
    HAL_RTC_SetDate(&amp;hrtc, &amp;sDate, RTC_FORMAT_BIN);
    
    while (1) {
        HAL_RTC_GetTime(&amp;hrtc, &amp;sTime, RTC_FORMAT_BIN);
        HAL_RTC_GetDate(&amp;hrtc, &amp;sDate, RTC_FORMAT_BIN);
        
        printf("%02d:%02d:%02d\r\n", 
               sTime.Hours, sTime.Minutes, sTime.Seconds);
        
        HAL_Delay(1000);
    }
}
</code></pre>
<h3 id="watchdog-timer-1"><a class="header" href="#watchdog-timer-1">Watchdog Timer</a></h3>
<pre><code class="language-c">/* Configure IWDG in CubeMX:
   Independent Watchdog
   Prescaler: 32
   Counter Reload Value: 4095 (max ~4 seconds)
*/

IWDG_HandleTypeDef hiwdg;

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_IWDG_Init();
    
    while (1) {
        /* Main program tasks */
        
        /* Refresh watchdog */
        HAL_IWDG_Refresh(&amp;hiwdg);
        
        HAL_Delay(100);
    }
}
</code></pre>
<h2 id="advanced-topics-1"><a class="header" href="#advanced-topics-1">Advanced Topics</a></h2>
<h3 id="freertos-integration"><a class="header" href="#freertos-integration">FreeRTOS Integration</a></h3>
<pre><code class="language-c">/* Enable FreeRTOS in CubeMX */
#include "FreeRTOS.h"
#include "task.h"

void Task1(void *argument);
void Task2(void *argument);

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_GPIO_Init();
    
    /* Create tasks */
    xTaskCreate(Task1, "Task1", 128, NULL, 1, NULL);
    xTaskCreate(Task2, "Task2", 128, NULL, 1, NULL);
    
    /* Start scheduler */
    vTaskStartScheduler();
    
    /* Never reached */
    while (1);
}

void Task1(void *argument) {
    while (1) {
        HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
        vTaskDelay(pdMS_TO_TICKS(500));
    }
}

void Task2(void *argument) {
    while (1) {
        /* Other task */
        vTaskDelay(pdMS_TO_TICKS(1000));
    }
}
</code></pre>
<h3 id="low-power-modes"><a class="header" href="#low-power-modes">Low Power Modes</a></h3>
<pre><code class="language-c">/* Enter Stop mode */
HAL_PWR_EnterSTOPMode(PWR_LOWPOWERREGULATOR_ON, PWR_STOPENTRY_WFI);

/* Enter Standby mode */
HAL_PWR_EnterSTANDBYMode();

/* Enter Sleep mode */
HAL_PWR_EnterSLEEPMode(PWR_MAINREGULATOR_ON, PWR_SLEEPENTRY_WFI);
</code></pre>
<h3 id="bootloader"><a class="header" href="#bootloader">Bootloader</a></h3>
<pre><code class="language-c">/* Jump to bootloader (system memory) */
void JumpToBootloader(void) {
    void (*SysMemBootJump)(void);
    
    /* Set bootloader address (STM32F1: 0x1FFFF000) */
    volatile uint32_t addr = 0x1FFFF000;
    
    /* Disable interrupts */
    __disable_irq();
    
    /* Remap system memory to 0x00000000 */
    __HAL_RCC_SYSCFG_CLK_ENABLE();
    __HAL_SYSCFG_REMAPMEMORY_SYSTEMFLASH();
    
    /* Set jump address */
    SysMemBootJump = (void (*)(void)) (*((uint32_t *)(addr + 4)));
    
    /* Set main stack pointer */
    __set_MSP(*(uint32_t *)addr);
    
    /* Jump */
    SysMemBootJump();
    
    while (1);
}
</code></pre>
<h2 id="best-practices-28"><a class="header" href="#best-practices-28">Best Practices</a></h2>
<ol>
<li><strong>Use CubeMX</strong>: Generate initialization code automatically</li>
<li><strong>HAL vs LL</strong>: HAL for ease, LL for performance</li>
<li><strong>Interrupts</strong>: Keep ISRs short, use callbacks</li>
<li><strong>DMA</strong>: Use for high-speed data transfers</li>
<li><strong>Power</strong>: Disable unused peripherals</li>
<li><strong>Debugging</strong>: Use SWD with ST-LINK</li>
<li><strong>Version Control</strong>: Track CubeMX .ioc files</li>
</ol>
<h2 id="troubleshooting-3"><a class="header" href="#troubleshooting-3">Troubleshooting</a></h2>
<h3 id="common-issues-7"><a class="header" href="#common-issues-7">Common Issues</a></h3>
<p><strong>Debugger Not Connecting:</strong></p>
<pre><code class="language-bash"># Check ST-LINK connection
st-info --probe

# Reset ST-LINK
st-flash reset

# Update ST-LINK firmware
# Use STM32 ST-LINK Utility
</code></pre>
<p><strong>Clock Configuration:</strong></p>
<ul>
<li>Verify HSE frequency matches hardware</li>
<li>Check PLL multipliers for target frequency</li>
<li>Enable required peripheral clocks</li>
</ul>
<p><strong>GPIO Not Working:</strong></p>
<ul>
<li>Enable GPIO clock first</li>
<li>Check pin alternate functions</li>
<li>Verify pin configuration (mode, speed, pull)</li>
</ul>
<p><strong>Printf Not Working:</strong></p>
<pre><code class="language-c">// Enable semi-hosting or retarget _write()
int _write(int file, char *ptr, int len) {
    HAL_UART_Transmit(&amp;huart1, (uint8_t*)ptr, len, HAL_MAX_DELAY);
    return len;
}
</code></pre>
<h2 id="resources-25"><a class="header" href="#resources-25">Resources</a></h2>
<ul>
<li><strong>STM32 Website</strong>: https://www.st.com/stm32</li>
<li><strong>CubeMX</strong>: https://www.st.com/en/development-tools/stm32cubemx.html</li>
<li><strong>HAL Documentation</strong>: STM32 HAL user manual per family</li>
<li><strong>Reference Manuals</strong>: Detailed peripheral descriptions</li>
<li><strong>Community</strong>: https://community.st.com/</li>
</ul>
<h2 id="see-also-2"><a class="header" href="#see-also-2">See Also</a></h2>
<ul>
<li><a href="embedded/arm.html">ARM Cortex-M Architecture</a></li>
<li><a href="embedded/gpio.html">GPIO Programming</a></li>
<li><a href="embedded/uart.html">UART Communication</a></li>
<li><a href="embedded/spi.html">SPI Protocol</a></li>
<li><a href="embedded/i2c.html">I2C Protocol</a></li>
<li><a href="embedded/../rtos/freertos.html">FreeRTOS</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="esp32"><a class="header" href="#esp32">ESP32</a></h1>
<p>Comprehensive guide to ESP32 microcontroller development with WiFi and Bluetooth capabilities.</p>
<h2 id="table-of-contents-27"><a class="header" href="#table-of-contents-27">Table of Contents</a></h2>
<ol>
<li><a href="embedded/esp32.html#introduction">Introduction</a></li>
<li><a href="embedded/esp32.html#hardware-overview">Hardware Overview</a></li>
<li><a href="embedded/esp32.html#development-setup">Development Setup</a></li>
<li><a href="embedded/esp32.html#basic-programming">Basic Programming</a></li>
<li><a href="embedded/esp32.html#wifi-connectivity">WiFi Connectivity</a></li>
<li><a href="embedded/esp32.html#bluetooth">Bluetooth</a></li>
<li><a href="embedded/esp32.html#advanced-features">Advanced Features</a></li>
<li><a href="embedded/esp32.html#projects">Projects</a></li>
</ol>
<h2 id="introduction-14"><a class="header" href="#introduction-14">Introduction</a></h2>
<p>The ESP32 is a powerful, low-cost microcontroller with integrated WiFi and Bluetooth. Developed by Espressif Systems, it's ideal for IoT projects and wireless applications.</p>
<h3 id="key-features-6"><a class="header" href="#key-features-6">Key Features</a></h3>
<ul>
<li><strong>Dual-core Xtensa LX6</strong> (or single-core RISC-V in ESP32-C3)</li>
<li><strong>Clock Speed</strong>: 160-240 MHz</li>
<li><strong>Memory</strong>: 520 KB SRAM, 4 MB Flash (typical)</li>
<li><strong>WiFi</strong>: 802.11 b/g/n (2.4 GHz)</li>
<li><strong>Bluetooth</strong>: BLE 4.2 and Classic Bluetooth</li>
<li><strong>GPIO</strong>: Up to 34 programmable pins</li>
<li><strong>Peripherals</strong>: ADC, DAC, SPI, I2C, UART, PWM, I2S</li>
<li><strong>Low Power</strong>: Multiple sleep modes</li>
<li><strong>Price</strong>: $2-$10 depending on variant</li>
</ul>
<h3 id="esp32-variants"><a class="header" href="#esp32-variants">ESP32 Variants</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Variant</th><th>Cores</th><th>WiFi</th><th>BLE</th><th>Classic BT</th><th>USB</th><th>Special Features</th></tr></thead><tbody>
<tr><td><strong>ESP32</strong></td><td>2</td><td>Yes</td><td>Yes</td><td>Yes</td><td>No</td><td>Original, most common</td></tr>
<tr><td><strong>ESP32-S2</strong></td><td>1</td><td>Yes</td><td>No</td><td>No</td><td>Native</td><td>USB OTG, lower power</td></tr>
<tr><td><strong>ESP32-S3</strong></td><td>2</td><td>Yes</td><td>Yes</td><td>No</td><td>Native</td><td>Vector instructions</td></tr>
<tr><td><strong>ESP32-C3</strong></td><td>1 (RISC-V)</td><td>Yes</td><td>Yes</td><td>No</td><td>Native</td><td>RISC-V architecture</td></tr>
<tr><td><strong>ESP32-C6</strong></td><td>1 (RISC-V)</td><td>Yes</td><td>Yes</td><td>No</td><td>Native</td><td>WiFi 6, Zigbee</td></tr>
</tbody></table>
</div>
<h2 id="hardware-overview"><a class="header" href="#hardware-overview">Hardware Overview</a></h2>
<h3 id="esp32-devkit-pinout"><a class="header" href="#esp32-devkit-pinout">ESP32 DevKit Pinout</a></h3>
<pre><code>                    ESP32 DevKit
                ┌─────────────────┐
                │      USB        │
                ├─────────────────┤
    3V3    [ ]──┤3V3           D23├──[ ] MOSI
    EN     [ ]──┤EN            D22├──[ ] SCL (I2C)
    VP/36  [ ]──┤VP/A0         TX0├──[ ] TX
    VN/39  [ ]──┤VN/A3         RX0├──[ ] RX
    D34    [ ]──┤34/A6         D21├──[ ] SDA (I2C)
    D35    [ ]──┤35/A7         GND├──[ ] GND
    D32    [ ]──┤32/A4         D19├──[ ] MISO
    D33    [ ]──┤33/A5         D18├──[ ] SCK
    D25    [ ]──┤25/A18        D5 ├──[ ] SS
    D26    [ ]──┤26/A19        D17├──[ ] TX2
    D27    [ ]──┤27/A17        D16├──[ ] RX2
    D14    [ ]──┤14/A16        D4 ├──[ ]
    D12    [ ]──┤12/A15        D0 ├──[ ] (Boot)
    GND    [ ]──┤GND           D2 ├──[ ] (LED)
    D13    [ ]──┤13/A14        D15├──[ ]
    D9     [ ]──┤9/SD2          D8├──[ ] SD1
    D10    [ ]──┤10/SD3         D7├──[ ] SD0
    D11    [ ]──┤11/CMD         D6├──[ ] SCK
    VIN    [ ]──┤VIN            5V├──[ ] 5V
                └─────────────────┘

Note: Pins 6-11 connected to flash (avoid using)
      Pins with boot/strapping modes: 0, 2, 5, 12, 15
</code></pre>
<h3 id="important-notes"><a class="header" href="#important-notes">Important Notes</a></h3>
<ul>
<li><strong>Input Only Pins</strong>: GPIO 34-39 (no pull-up/pull-down)</li>
<li><strong>Strapping Pins</strong>: 0, 2, 5, 12, 15 (affect boot mode)</li>
<li><strong>Boot Mode</strong>: GPIO 0 LOW = download mode</li>
<li><strong>Built-in LED</strong>: Usually GPIO 2</li>
<li><strong>ADC2</strong>: Cannot use while WiFi active (GPIO 0, 2, 4, 12-15, 25-27)</li>
</ul>
<h2 id="development-setup-2"><a class="header" href="#development-setup-2">Development Setup</a></h2>
<h3 id="arduino-ide-setup"><a class="header" href="#arduino-ide-setup">Arduino IDE Setup</a></h3>
<pre><code class="language-bash"># 1. Install Arduino IDE from arduino.cc

# 2. Add ESP32 Board Manager URL:
# File &gt; Preferences &gt; Additional Board Manager URLs
# Add: https://raw.githubusercontent.com/espressif/arduino-esp32/gh-pages/package_esp32_index.json

# 3. Install ESP32 boards:
# Tools &gt; Board &gt; Boards Manager &gt; Search "ESP32" &gt; Install

# 4. Select your board:
# Tools &gt; Board &gt; ESP32 Arduino &gt; ESP32 Dev Module
</code></pre>
<h3 id="esp-idf-setup-official-framework"><a class="header" href="#esp-idf-setup-official-framework">ESP-IDF Setup (Official Framework)</a></h3>
<pre><code class="language-bash"># Clone ESP-IDF
git clone --recursive https://github.com/espressif/esp-idf.git
cd esp-idf

# Install (Linux/Mac)
./install.sh

# Set up environment (run in each terminal session)
. ./export.sh

# Or add to ~/.bashrc:
alias get_idf='. $HOME/esp/esp-idf/export.sh'

# Create new project
idf.py create-project myproject
cd myproject

# Configure
idf.py menuconfig

# Build
idf.py build

# Flash
idf.py -p /dev/ttyUSB0 flash

# Monitor serial output
idf.py -p /dev/ttyUSB0 monitor
</code></pre>
<h3 id="platformio-setup-1"><a class="header" href="#platformio-setup-1">PlatformIO Setup</a></h3>
<pre><code class="language-bash"># Install PlatformIO
pip install platformio

# Create ESP32 project
pio init --board esp32dev

# Build and upload
pio run --target upload

# Serial monitor
pio device monitor
</code></pre>
<h2 id="basic-programming"><a class="header" href="#basic-programming">Basic Programming</a></h2>
<h3 id="blink-led-arduino-framework"><a class="header" href="#blink-led-arduino-framework">Blink LED (Arduino Framework)</a></h3>
<pre><code class="language-cpp">#define LED_PIN 2

void setup() {
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    digitalWrite(LED_PIN, HIGH);
    delay(1000);
    digitalWrite(LED_PIN, LOW);
    delay(1000);
}
</code></pre>
<h3 id="dual-core-programming"><a class="header" href="#dual-core-programming">Dual Core Programming</a></h3>
<pre><code class="language-cpp">TaskHandle_t Task1;
TaskHandle_t Task2;

void setup() {
    Serial.begin(115200);
    
    // Create task for core 0
    xTaskCreatePinnedToCore(
        Task1code,   // Function
        "Task1",     // Name
        10000,       // Stack size
        NULL,        // Parameters
        1,           // Priority
        &amp;Task1,      // Task handle
        0            // Core ID
    );
    
    // Create task for core 1
    xTaskCreatePinnedToCore(
        Task2code,
        "Task2",
        10000,
        NULL,
        1,
        &amp;Task2,
        1
    );
}

void Task1code(void * parameter) {
    while(1) {
        Serial.print("Task 1 running on core ");
        Serial.println(xPortGetCoreID());
        delay(1000);
    }
}

void Task2code(void * parameter) {
    while(1) {
        Serial.print("Task 2 running on core ");
        Serial.println(xPortGetCoreID());
        delay(500);
    }
}

void loop() {
    // Empty - tasks handle everything
}
</code></pre>
<h3 id="touch-sensor"><a class="header" href="#touch-sensor">Touch Sensor</a></h3>
<pre><code class="language-cpp">const int TOUCH_PIN = 4;  // T0
const int THRESHOLD = 40;

void setup() {
    Serial.begin(115200);
}

void loop() {
    int touchValue = touchRead(TOUCH_PIN);
    Serial.println(touchValue);
    
    if (touchValue &lt; THRESHOLD) {
        Serial.println("Touch detected!");
    }
    
    delay(500);
}
</code></pre>
<h3 id="hall-effect-sensor-built-in"><a class="header" href="#hall-effect-sensor-built-in">Hall Effect Sensor (Built-in)</a></h3>
<pre><code class="language-cpp">void setup() {
    Serial.begin(115200);
}

void loop() {
    // Read built-in Hall effect sensor
    int hallValue = hallRead();
    Serial.print("Hall Sensor: ");
    Serial.println(hallValue);
    
    delay(500);
}
</code></pre>
<h2 id="wifi-connectivity"><a class="header" href="#wifi-connectivity">WiFi Connectivity</a></h2>
<h3 id="wifi-station-mode-connect-to-router"><a class="header" href="#wifi-station-mode-connect-to-router">WiFi Station Mode (Connect to Router)</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;

const char* ssid = "YourSSID";
const char* password = "YourPassword";

void setup() {
    Serial.begin(115200);
    
    // Connect to WiFi
    WiFi.begin(ssid, password);
    Serial.print("Connecting to WiFi");
    
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    
    Serial.println("\nConnected!");
    Serial.print("IP Address: ");
    Serial.println(WiFi.localIP());
    Serial.print("MAC Address: ");
    Serial.println(WiFi.macAddress());
    Serial.print("Signal Strength (RSSI): ");
    Serial.print(WiFi.RSSI());
    Serial.println(" dBm");
}

void loop() {
    // Check connection
    if (WiFi.status() != WL_CONNECTED) {
        Serial.println("WiFi disconnected!");
        WiFi.reconnect();
    }
    
    delay(10000);
}
</code></pre>
<h3 id="wifi-access-point-mode"><a class="header" href="#wifi-access-point-mode">WiFi Access Point Mode</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;

const char* ssid = "ESP32-AP";
const char* password = "12345678";  // Minimum 8 characters

void setup() {
    Serial.begin(115200);
    
    // Start Access Point
    WiFi.softAP(ssid, password);
    
    IPAddress IP = WiFi.softAPIP();
    Serial.print("AP IP address: ");
    Serial.println(IP);
}

void loop() {
    // Print number of connected stations
    Serial.print("Stations connected: ");
    Serial.println(WiFi.softAPgetStationNum());
    
    delay(5000);
}
</code></pre>
<h3 id="web-server"><a class="header" href="#web-server">Web Server</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;
#include &lt;WebServer.h&gt;

const char* ssid = "YourSSID";
const char* password = "YourPassword";

WebServer server(80);

const int LED_PIN = 2;
bool ledState = false;

void handleRoot() {
    String html = "&lt;html&gt;&lt;body&gt;";
    html += "&lt;h1&gt;ESP32 Web Server&lt;/h1&gt;";
    html += "&lt;p&gt;LED is: " + String(ledState ? "ON" : "OFF") + "&lt;/p&gt;";
    html += "&lt;p&gt;&lt;a href=\"/led/on\"&gt;&lt;button&gt;Turn ON&lt;/button&gt;&lt;/a&gt;&lt;/p&gt;";
    html += "&lt;p&gt;&lt;a href=\"/led/off\"&gt;&lt;button&gt;Turn OFF&lt;/button&gt;&lt;/a&gt;&lt;/p&gt;";
    html += "&lt;/body&gt;&lt;/html&gt;";
    
    server.send(200, "text/html", html);
}

void handleLEDOn() {
    ledState = true;
    digitalWrite(LED_PIN, HIGH);
    server.sendHeader("Location", "/");
    server.send(303);
}

void handleLEDOff() {
    ledState = false;
    digitalWrite(LED_PIN, LOW);
    server.sendHeader("Location", "/");
    server.send(303);
}

void setup() {
    Serial.begin(115200);
    pinMode(LED_PIN, OUTPUT);
    
    // Connect to WiFi
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    
    Serial.println("\nConnected!");
    Serial.print("IP: ");
    Serial.println(WiFi.localIP());
    
    // Setup server routes
    server.on("/", handleRoot);
    server.on("/led/on", handleLEDOn);
    server.on("/led/off", handleLEDOff);
    
    server.begin();
    Serial.println("Web server started");
}

void loop() {
    server.handleClient();
}
</code></pre>
<h3 id="http-client-get-request"><a class="header" href="#http-client-get-request">HTTP Client (GET Request)</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;
#include &lt;HTTPClient.h&gt;

const char* ssid = "YourSSID";
const char* password = "YourPassword";

void setup() {
    Serial.begin(115200);
    
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    Serial.println("\nConnected!");
}

void loop() {
    if (WiFi.status() == WL_CONNECTED) {
        HTTPClient http;
        
        http.begin("http://api.github.com/users/octocat");
        int httpCode = http.GET();
        
        if (httpCode &gt; 0) {
            Serial.printf("HTTP Code: %d\n", httpCode);
            
            if (httpCode == HTTP_CODE_OK) {
                String payload = http.getString();
                Serial.println(payload);
            }
        } else {
            Serial.printf("Error: %s\n", http.errorToString(httpCode).c_str());
        }
        
        http.end();
    }
    
    delay(10000);
}
</code></pre>
<h3 id="wifi-scan"><a class="header" href="#wifi-scan">WiFi Scan</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;

void setup() {
    Serial.begin(115200);
    WiFi.mode(WIFI_STA);
    WiFi.disconnect();
    delay(100);
}

void loop() {
    Serial.println("Scanning WiFi networks...");
    int n = WiFi.scanNetworks();
    
    if (n == 0) {
        Serial.println("No networks found");
    } else {
        Serial.printf("%d networks found:\n", n);
        
        for (int i = 0; i &lt; n; i++) {
            Serial.printf("%d: %s (%d dBm) %s\n",
                i + 1,
                WiFi.SSID(i).c_str(),
                WiFi.RSSI(i),
                WiFi.encryptionType(i) == WIFI_AUTH_OPEN ? "Open" : "Encrypted"
            );
        }
    }
    
    delay(5000);
}
</code></pre>
<h3 id="mqtt-client"><a class="header" href="#mqtt-client">MQTT Client</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;
#include &lt;PubSubClient.h&gt;

const char* ssid = "YourSSID";
const char* password = "YourPassword";
const char* mqtt_server = "broker.hivemq.com";

WiFiClient espClient;
PubSubClient client(espClient);

void callback(char* topic, byte* payload, unsigned int length) {
    Serial.print("Message arrived [");
    Serial.print(topic);
    Serial.print("]: ");
    
    for (int i = 0; i &lt; length; i++) {
        Serial.print((char)payload[i]);
    }
    Serial.println();
}

void reconnect() {
    while (!client.connected()) {
        Serial.print("Attempting MQTT connection...");
        
        if (client.connect("ESP32Client")) {
            Serial.println("connected");
            client.subscribe("esp32/test");
        } else {
            Serial.print("failed, rc=");
            Serial.print(client.state());
            Serial.println(" retrying in 5 seconds");
            delay(5000);
        }
    }
}

void setup() {
    Serial.begin(115200);
    
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    Serial.println("\nWiFi connected");
    
    client.setServer(mqtt_server, 1883);
    client.setCallback(callback);
}

void loop() {
    if (!client.connected()) {
        reconnect();
    }
    client.loop();
    
    // Publish message every 10 seconds
    static unsigned long lastMsg = 0;
    unsigned long now = millis();
    
    if (now - lastMsg &gt; 10000) {
        lastMsg = now;
        
        char msg[50];
        snprintf(msg, 50, "Hello from ESP32 #%lu", millis());
        client.publish("esp32/test", msg);
    }
}
</code></pre>
<h2 id="bluetooth"><a class="header" href="#bluetooth">Bluetooth</a></h2>
<h3 id="bluetooth-classic---serial"><a class="header" href="#bluetooth-classic---serial">Bluetooth Classic - Serial</a></h3>
<pre><code class="language-cpp">#include &lt;BluetoothSerial.h&gt;

BluetoothSerial SerialBT;

void setup() {
    Serial.begin(115200);
    SerialBT.begin("ESP32-BT");  // Bluetooth device name
    Serial.println("Bluetooth Started! Pair with 'ESP32-BT'");
}

void loop() {
    // Forward from Serial to Bluetooth
    if (Serial.available()) {
        SerialBT.write(Serial.read());
    }
    
    // Forward from Bluetooth to Serial
    if (SerialBT.available()) {
        Serial.write(SerialBT.read());
    }
}
</code></pre>
<h3 id="ble-server"><a class="header" href="#ble-server">BLE Server</a></h3>
<pre><code class="language-cpp">#include &lt;BLEDevice.h&gt;
#include &lt;BLEServer.h&gt;
#include &lt;BLEUtils.h&gt;
#include &lt;BLE2902.h&gt;

BLEServer* pServer = NULL;
BLECharacteristic* pCharacteristic = NULL;
bool deviceConnected = false;
uint32_t value = 0;

#define SERVICE_UUID        "4fafc201-1fb5-459e-8fcc-c5c9c331914b"
#define CHARACTERISTIC_UUID "beb5483e-36e1-4688-b7f5-ea07361b26a8"

class MyServerCallbacks: public BLEServerCallbacks {
    void onConnect(BLEServer* pServer) {
        deviceConnected = true;
        Serial.println("Device connected");
    }
    
    void onDisconnect(BLEServer* pServer) {
        deviceConnected = false;
        Serial.println("Device disconnected");
    }
};

void setup() {
    Serial.begin(115200);
    
    // Create BLE Device
    BLEDevice::init("ESP32-BLE");
    
    // Create BLE Server
    pServer = BLEDevice::createServer();
    pServer-&gt;setCallbacks(new MyServerCallbacks());
    
    // Create BLE Service
    BLEService *pService = pServer-&gt;createService(SERVICE_UUID);
    
    // Create BLE Characteristic
    pCharacteristic = pService-&gt;createCharacteristic(
        CHARACTERISTIC_UUID,
        BLECharacteristic::PROPERTY_READ |
        BLECharacteristic::PROPERTY_WRITE |
        BLECharacteristic::PROPERTY_NOTIFY
    );
    
    pCharacteristic-&gt;addDescriptor(new BLE2902());
    
    // Start service
    pService-&gt;start();
    
    // Start advertising
    BLEAdvertising *pAdvertising = BLEDevice::getAdvertising();
    pAdvertising-&gt;addServiceUUID(SERVICE_UUID);
    pAdvertising-&gt;start();
    
    Serial.println("BLE Server started. Waiting for connections...");
}

void loop() {
    if (deviceConnected) {
        // Update and notify characteristic
        pCharacteristic-&gt;setValue((uint8_t*)&amp;value, 4);
        pCharacteristic-&gt;notify();
        value++;
        delay(1000);
    }
}
</code></pre>
<h3 id="ble-client-scanner"><a class="header" href="#ble-client-scanner">BLE Client (Scanner)</a></h3>
<pre><code class="language-cpp">#include &lt;BLEDevice.h&gt;
#include &lt;BLEUtils.h&gt;
#include &lt;BLEScan.h&gt;
#include &lt;BLEAdvertisedDevice.h&gt;

BLEScan* pBLEScan;

class MyAdvertisedDeviceCallbacks: public BLEAdvertisedDeviceCallbacks {
    void onResult(BLEAdvertisedDevice advertisedDevice) {
        Serial.printf("Found device: %s\n", advertisedDevice.toString().c_str());
    }
};

void setup() {
    Serial.begin(115200);
    Serial.println("Starting BLE scan...");
    
    BLEDevice::init("");
    pBLEScan = BLEDevice::getScan();
    pBLEScan-&gt;setAdvertisedDeviceCallbacks(new MyAdvertisedDeviceCallbacks());
    pBLEScan-&gt;setActiveScan(true);
}

void loop() {
    BLEScanResults foundDevices = pBLEScan-&gt;start(5, false);
    Serial.printf("Devices found: %d\n", foundDevices.getCount());
    pBLEScan-&gt;clearResults();
    delay(2000);
}
</code></pre>
<h2 id="advanced-features-1"><a class="header" href="#advanced-features-1">Advanced Features</a></h2>
<h3 id="deep-sleep-mode"><a class="header" href="#deep-sleep-mode">Deep Sleep Mode</a></h3>
<pre><code class="language-cpp">#define uS_TO_S_FACTOR 1000000  // Conversion factor for microseconds to seconds
#define TIME_TO_SLEEP  30       // Sleep for 30 seconds

RTC_DATA_ATTR int bootCount = 0;  // Preserved in RTC memory

void setup() {
    Serial.begin(115200);
    delay(1000);
    
    bootCount++;
    Serial.println("Boot number: " + String(bootCount));
    
    // Configure wake-up sources
    esp_sleep_enable_timer_wakeup(TIME_TO_SLEEP * uS_TO_S_FACTOR);
    
    // GPIO wake-up
    esp_sleep_enable_ext0_wakeup(GPIO_NUM_33, 1);  // Wake on HIGH
    
    Serial.println("Going to sleep for " + String(TIME_TO_SLEEP) + " seconds");
    Serial.flush();
    
    esp_deep_sleep_start();
}

void loop() {
    // Never reached
}
</code></pre>
<h3 id="touch-wake-up"><a class="header" href="#touch-wake-up">Touch Wake-up</a></h3>
<pre><code class="language-cpp">#define THRESHOLD 40

void setup() {
    Serial.begin(115200);
    delay(1000);
    
    // Configure touch wake-up
    touchAttachInterrupt(T0, callback, THRESHOLD);
    
    esp_sleep_enable_touchpad_wakeup();
    
    Serial.println("Going to sleep. Touch GPIO 4 to wake up.");
    delay(1000);
    
    esp_deep_sleep_start();
}

void callback() {
    // Empty
}

void loop() {
    // Never reached
}
</code></pre>
<h3 id="adc-with-calibration"><a class="header" href="#adc-with-calibration">ADC with Calibration</a></h3>
<pre><code class="language-cpp">#include &lt;esp_adc_cal.h&gt;

#define ADC_PIN 34
#define DEFAULT_VREF 1100

esp_adc_cal_characteristics_t *adc_chars;

void setup() {
    Serial.begin(115200);
    
    // Configure ADC
    adc1_config_width(ADC_WIDTH_BIT_12);
    adc1_config_channel_atten(ADC1_CHANNEL_6, ADC_ATTEN_DB_11);
    
    // Characterize ADC
    adc_chars = (esp_adc_cal_characteristics_t*)calloc(1, sizeof(esp_adc_cal_characteristics_t));
    esp_adc_cal_characterize(ADC_UNIT_1, ADC_ATTEN_DB_11, ADC_WIDTH_BIT_12, DEFAULT_VREF, adc_chars);
}

void loop() {
    uint32_t adc_reading = 0;
    
    // Multisampling
    for (int i = 0; i &lt; 64; i++) {
        adc_reading += adc1_get_raw(ADC1_CHANNEL_6);
    }
    adc_reading /= 64;
    
    // Convert to voltage
    uint32_t voltage = esp_adc_cal_raw_to_voltage(adc_reading, adc_chars);
    
    Serial.printf("Raw: %d, Voltage: %d mV\n", adc_reading, voltage);
    
    delay(1000);
}
</code></pre>
<h3 id="over-the-air-ota-updates"><a class="header" href="#over-the-air-ota-updates">Over-The-Air (OTA) Updates</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;
#include &lt;ESPmDNS.h&gt;
#include &lt;WiFiUdp.h&gt;
#include &lt;ArduinoOTA.h&gt;

const char* ssid = "YourSSID";
const char* password = "YourPassword";

void setup() {
    Serial.begin(115200);
    
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    
    Serial.println("\nWiFi connected");
    Serial.println(WiFi.localIP());
    
    // Setup OTA
    ArduinoOTA.setHostname("esp32");
    ArduinoOTA.setPassword("admin");
    
    ArduinoOTA.onStart([]() {
        String type = (ArduinoOTA.getCommand() == U_FLASH) ? "sketch" : "filesystem";
        Serial.println("Start updating " + type);
    });
    
    ArduinoOTA.onEnd([]() {
        Serial.println("\nEnd");
    });
    
    ArduinoOTA.onProgress([](unsigned int progress, unsigned int total) {
        Serial.printf("Progress: %u%%\r", (progress / (total / 100)));
    });
    
    ArduinoOTA.onError([](ota_error_t error) {
        Serial.printf("Error[%u]: ", error);
        if (error == OTA_AUTH_ERROR) Serial.println("Auth Failed");
        else if (error == OTA_BEGIN_ERROR) Serial.println("Begin Failed");
        else if (error == OTA_CONNECT_ERROR) Serial.println("Connect Failed");
        else if (error == OTA_RECEIVE_ERROR) Serial.println("Receive Failed");
        else if (error == OTA_END_ERROR) Serial.println("End Failed");
    });
    
    ArduinoOTA.begin();
    Serial.println("OTA Ready");
}

void loop() {
    ArduinoOTA.handle();
}
</code></pre>
<h2 id="projects"><a class="header" href="#projects">Projects</a></h2>
<h3 id="project-1-wifi-weather-station"><a class="header" href="#project-1-wifi-weather-station">Project 1: WiFi Weather Station</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;
#include &lt;HTTPClient.h&gt;
#include &lt;DHT.h&gt;

#define DHTPIN 4
#define DHTTYPE DHT11

DHT dht(DHTPIN, DHTTYPE);

const char* ssid = "YourSSID";
const char* password = "YourPassword";
const char* server = "http://api.thingspeak.com/update";
const char* apiKey = "YOUR_API_KEY";

void setup() {
    Serial.begin(115200);
    dht.begin();
    
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
        Serial.print(".");
    }
    Serial.println("\nConnected!");
}

void loop() {
    float temp = dht.readTemperature();
    float humidity = dht.readHumidity();
    
    if (isnan(temp) || isnan(humidity)) {
        Serial.println("Failed to read sensor!");
        delay(2000);
        return;
    }
    
    Serial.printf("Temp: %.1f°C, Humidity: %.1f%%\n", temp, humidity);
    
    // Send to ThingSpeak
    if (WiFi.status() == WL_CONNECTED) {
        HTTPClient http;
        
        String url = String(server) + "?api_key=" + apiKey +
                     "&amp;field1=" + String(temp) +
                     "&amp;field2=" + String(humidity);
        
        http.begin(url);
        int httpCode = http.GET();
        
        if (httpCode &gt; 0) {
            Serial.println("Data sent successfully");
        } else {
            Serial.println("Error sending data");
        }
        
        http.end();
    }
    
    delay(20000);  // ThingSpeak requires 15 second minimum
}
</code></pre>
<h3 id="project-2-bluetooth-led-controller"><a class="header" href="#project-2-bluetooth-led-controller">Project 2: Bluetooth LED Controller</a></h3>
<pre><code class="language-cpp">#include &lt;BluetoothSerial.h&gt;

BluetoothSerial SerialBT;

const int RED_PIN = 25;
const int GREEN_PIN = 26;
const int BLUE_PIN = 27;

void setup() {
    Serial.begin(115200);
    SerialBT.begin("ESP32-RGB");
    
    pinMode(RED_PIN, OUTPUT);
    pinMode(GREEN_PIN, OUTPUT);
    pinMode(BLUE_PIN, OUTPUT);
    
    Serial.println("Bluetooth RGB Controller Ready");
}

void loop() {
    if (SerialBT.available()) {
        String command = SerialBT.readStringUntil('\n');
        command.trim();
        
        if (command.startsWith("RGB")) {
            // Format: RGB,255,128,64
            int comma1 = command.indexOf(',');
            int comma2 = command.indexOf(',', comma1 + 1);
            int comma3 = command.indexOf(',', comma2 + 1);
            
            int r = command.substring(comma1 + 1, comma2).toInt();
            int g = command.substring(comma2 + 1, comma3).toInt();
            int b = command.substring(comma3 + 1).toInt();
            
            analogWrite(RED_PIN, r);
            analogWrite(GREEN_PIN, g);
            analogWrite(BLUE_PIN, b);
            
            SerialBT.printf("Set RGB to %d,%d,%d\n", r, g, b);
        } else if (command == "OFF") {
            analogWrite(RED_PIN, 0);
            analogWrite(GREEN_PIN, 0);
            analogWrite(BLUE_PIN, 0);
            SerialBT.println("LEDs OFF");
        }
    }
}
</code></pre>
<h3 id="project-3-wifi-smart-thermostat"><a class="header" href="#project-3-wifi-smart-thermostat">Project 3: WiFi Smart Thermostat</a></h3>
<pre><code class="language-cpp">#include &lt;WiFi.h&gt;
#include &lt;WebServer.h&gt;
#include &lt;DHT.h&gt;

#define DHTPIN 4
#define DHTTYPE DHT11
#define RELAY_PIN 26

DHT dht(DHTPIN, DHTTYPE);
WebServer server(80);

const char* ssid = "YourSSID";
const char* password = "YourPassword";

float targetTemp = 25.0;
bool heatingOn = false;

void handleRoot() {
    float temp = dht.readTemperature();
    float humidity = dht.readHumidity();
    
    String html = "&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;";
    html += "&lt;meta name='viewport' content='width=device-width, initial-scale=1'&gt;";
    html += "&lt;style&gt;body{font-family:Arial;text-align:center;margin:20px;}";
    html += ".button{padding:15px;margin:10px;font-size:20px;}&lt;/style&gt;&lt;/head&gt;";
    html += "&lt;body&gt;&lt;h1&gt;Smart Thermostat&lt;/h1&gt;";
    html += "&lt;p&gt;Current: " + String(temp, 1) + "°C&lt;/p&gt;";
    html += "&lt;p&gt;Humidity: " + String(humidity, 1) + "%&lt;/p&gt;";
    html += "&lt;p&gt;Target: " + String(targetTemp, 1) + "°C&lt;/p&gt;";
    html += "&lt;p&gt;Heating: " + String(heatingOn ? "ON" : "OFF") + "&lt;/p&gt;";
    html += "&lt;a href='/increase'&gt;&lt;button class='button'&gt;+1°C&lt;/button&gt;&lt;/a&gt;";
    html += "&lt;a href='/decrease'&gt;&lt;button class='button'&gt;-1°C&lt;/button&gt;&lt;/a&gt;";
    html += "&lt;/body&gt;&lt;/html&gt;";
    
    server.send(200, "text/html", html);
}

void handleIncrease() {
    targetTemp += 1.0;
    server.sendHeader("Location", "/");
    server.send(303);
}

void handleDecrease() {
    targetTemp -= 1.0;
    server.sendHeader("Location", "/");
    server.send(303);
}

void setup() {
    Serial.begin(115200);
    dht.begin();
    pinMode(RELAY_PIN, OUTPUT);
    
    WiFi.begin(ssid, password);
    while (WiFi.status() != WL_CONNECTED) {
        delay(500);
    }
    
    Serial.println("\nConnected!");
    Serial.println(WiFi.localIP());
    
    server.on("/", handleRoot);
    server.on("/increase", handleIncrease);
    server.on("/decrease", handleDecrease);
    server.begin();
}

void loop() {
    server.handleClient();
    
    static unsigned long lastCheck = 0;
    if (millis() - lastCheck &gt; 5000) {
        lastCheck = millis();
        
        float temp = dht.readTemperature();
        
        if (!isnan(temp)) {
            if (temp &lt; targetTemp - 0.5) {
                heatingOn = true;
                digitalWrite(RELAY_PIN, HIGH);
            } else if (temp &gt; targetTemp + 0.5) {
                heatingOn = false;
                digitalWrite(RELAY_PIN, LOW);
            }
        }
    }
}
</code></pre>
<h2 id="best-practices-29"><a class="header" href="#best-practices-29">Best Practices</a></h2>
<ol>
<li><strong>Power Management</strong>: Use deep sleep for battery-powered projects</li>
<li><strong>WiFi</strong>: Disconnect when not needed to save power</li>
<li><strong>Watchdog</strong>: Enable watchdog timer for reliability</li>
<li><strong>OTA Updates</strong>: Implement for remote firmware updates</li>
<li><strong>Error Handling</strong>: Always check WiFi connection status</li>
<li><strong>Security</strong>: Use HTTPS and encrypted connections</li>
<li><strong>Memory</strong>: Monitor heap usage with <code>ESP.getFreeHeap()</code></li>
</ol>
<h2 id="troubleshooting-4"><a class="header" href="#troubleshooting-4">Troubleshooting</a></h2>
<h3 id="common-issues-8"><a class="header" href="#common-issues-8">Common Issues</a></h3>
<p><strong>Boot Loop:</strong></p>
<ul>
<li>Check strapping pins (0, 2, 5, 12, 15)</li>
<li>Ensure stable power supply (500mA minimum)</li>
<li>Add 10µF capacitor on EN pin</li>
</ul>
<p><strong>WiFi Not Connecting:</strong></p>
<ul>
<li>Check SSID and password</li>
<li>Verify 2.4GHz network (ESP32 doesn't support 5GHz)</li>
<li>Move closer to router</li>
</ul>
<p><strong>Upload Failed:</strong></p>
<ul>
<li>Hold BOOT button during upload</li>
<li>Check correct COM port selected</li>
<li>Try lower baud rate (115200)</li>
</ul>
<p><strong>Brown-out Detector:</strong></p>
<ul>
<li>Use external 5V power supply</li>
<li>Add bulk capacitor (100-1000µF)</li>
</ul>
<h2 id="resources-26"><a class="header" href="#resources-26">Resources</a></h2>
<ul>
<li><strong>Espressif Documentation</strong>: https://docs.espressif.com/</li>
<li><strong>ESP32 Arduino Core</strong>: https://github.com/espressif/arduino-esp32</li>
<li><strong>ESP-IDF Programming Guide</strong>: https://docs.espressif.com/projects/esp-idf/</li>
<li><strong>Forum</strong>: https://www.esp32.com/</li>
</ul>
<h2 id="see-also-3"><a class="header" href="#see-also-3">See Also</a></h2>
<ul>
<li><a href="embedded/arduino.html">Arduino Programming</a></li>
<li><a href="embedded/../networking/wifi.html">WiFi Projects</a></li>
<li><a href="embedded/../protocols/mqtt.html">MQTT Protocol</a></li>
<li><a href="embedded/bluetooth.html">BLE Communication</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="raspberry-pi"><a class="header" href="#raspberry-pi">Raspberry Pi</a></h1>
<p>Complete guide to Raspberry Pi setup, GPIO programming, and projects.</p>
<h2 id="table-of-contents-28"><a class="header" href="#table-of-contents-28">Table of Contents</a></h2>
<ol>
<li><a href="embedded/raspberry_pi.html#introduction">Introduction</a></li>
<li><a href="embedded/raspberry_pi.html#hardware-overview">Hardware Overview</a></li>
<li><a href="embedded/raspberry_pi.html#setup-and-installation">Setup and Installation</a></li>
<li><a href="embedded/raspberry_pi.html#gpio-programming">GPIO Programming</a></li>
<li><a href="embedded/raspberry_pi.html#python-programming">Python Programming</a></li>
<li><a href="embedded/raspberry_pi.html#cc-programming">C/C++ Programming</a></li>
<li><a href="embedded/raspberry_pi.html#interfaces">Interfaces</a></li>
<li><a href="embedded/raspberry_pi.html#projects">Projects</a></li>
</ol>
<h2 id="introduction-15"><a class="header" href="#introduction-15">Introduction</a></h2>
<p>The Raspberry Pi is a series of small single-board computers developed by the Raspberry Pi Foundation. Unlike microcontrollers, it runs a full Linux operating system and can function as a complete desktop computer.</p>
<h3 id="key-features-7"><a class="header" href="#key-features-7">Key Features</a></h3>
<ul>
<li><strong>Full Linux Operating System</strong> (Raspberry Pi OS based on Debian)</li>
<li><strong>High Processing Power</strong>: Multi-core ARM processors</li>
<li><strong>Rich Connectivity</strong>: USB, Ethernet, WiFi, Bluetooth, HDMI</li>
<li><strong>GPIO Interface</strong>: 40-pin header for hardware projects</li>
<li><strong>Programming</strong>: Python, C/C++, JavaScript, and more</li>
<li><strong>Price</strong>: $15-$75 depending on model</li>
</ul>
<h3 id="model-comparison-2"><a class="header" href="#model-comparison-2">Model Comparison</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Model</th><th>Processor</th><th>RAM</th><th>USB</th><th>Ethernet</th><th>WiFi/BT</th><th>GPIO</th><th>Price</th></tr></thead><tbody>
<tr><td><strong>Pi Zero W</strong></td><td>Single 1GHz</td><td>512MB</td><td>1 micro</td><td>No</td><td>Yes</td><td>40</td><td>$15</td></tr>
<tr><td><strong>Pi 3 B+</strong></td><td>Quad 1.4GHz</td><td>1GB</td><td>4</td><td>Gigabit</td><td>Yes</td><td>40</td><td>$35</td></tr>
<tr><td><strong>Pi 4 B</strong></td><td>Quad 1.5GHz</td><td>2-8GB</td><td>4</td><td>Gigabit</td><td>Yes</td><td>40</td><td>$35-75</td></tr>
<tr><td><strong>Pi 5</strong></td><td>Quad 2.4GHz</td><td>4-8GB</td><td>4</td><td>Gigabit</td><td>Yes</td><td>40</td><td>$60-80</td></tr>
<tr><td><strong>Pico</strong></td><td>Dual RP2040</td><td>264KB</td><td>1 micro</td><td>No</td><td>No</td><td>26</td><td>$4</td></tr>
</tbody></table>
</div>
<h2 id="hardware-overview-1"><a class="header" href="#hardware-overview-1">Hardware Overview</a></h2>
<h3 id="raspberry-pi-4-board-layout"><a class="header" href="#raspberry-pi-4-board-layout">Raspberry Pi 4 Board Layout</a></h3>
<pre><code>┌────────────────────────────────────────────────────────┐
│  USB-C Power                        ┌──────────────┐  │
│     ┌─┐                             │   Ethernet   │  │
│     └─┘                             │   Port       │  │
│                                     └──────────────┘  │
│  ┌────────┐  ┌────────┐                              │
│  │  USB   │  │  USB   │  ┌──────────────┐           │
│  │  2.0   │  │  3.0   │  │   Dual HDMI  │           │
│  └────────┘  └────────┘  └──────────────┘           │
│                                                        │
│  ┌────────────────────┐         ┌──────┐            │
│  │   BCM2711 SoC      │         │Audio │            │
│  │   Quad Cortex-A72  │         │Jack  │            │
│  └────────────────────┘         └──────┘            │
│                                                        │
│  ┌──────────────┐  ┌────────────────────────────┐   │
│  │   Micro SD   │  │     40-pin GPIO Header     │   │
│  │   Card Slot  │  │                            │   │
│  └──────────────┘  └────────────────────────────┘   │
│                                                        │
│  [CSI Camera]           [DSI Display]                 │
└────────────────────────────────────────────────────────┘
</code></pre>
<h3 id="gpio-pinout-40-pin-header"><a class="header" href="#gpio-pinout-40-pin-header">GPIO Pinout (40-pin Header)</a></h3>
<pre><code>           3V3  (1)  (2)  5V
     GPIO 2/SDA  (3)  (4)  5V
     GPIO 3/SCL  (5)  (6)  GND
         GPIO 4  (7)  (8)  GPIO 14/TXD
            GND  (9) (10)  GPIO 15/RXD
        GPIO 17 (11) (12)  GPIO 18/PWM
        GPIO 27 (13) (14)  GND
        GPIO 22 (15) (16)  GPIO 23
           3V3 (17) (18)  GPIO 24
  GPIO 10/MOSI (19) (20)  GND
   GPIO 9/MISO (21) (22)  GPIO 25
  GPIO 11/SCLK (23) (24)  GPIO 8/CE0
            GND (25) (26)  GPIO 7/CE1
        GPIO 0  (27) (28)  GPIO 1
        GPIO 5  (29) (30)  GND
        GPIO 6  (31) (32)  GPIO 12/PWM
   GPIO 13/PWM (33) (34)  GND
   GPIO 19/PWM (35) (36)  GPIO 16
        GPIO 26 (37) (38)  GPIO 20
            GND (39) (40)  GPIO 21

Power Pins: 3.3V (17mA max per pin), 5V (from USB)
PWM: GPIO 12, 13, 18, 19
SPI0: MOSI(10), MISO(9), SCLK(11), CE0(8), CE1(7)
I2C1: SDA(2), SCL(3)
UART: TXD(14), RXD(15)
</code></pre>
<h2 id="setup-and-installation"><a class="header" href="#setup-and-installation">Setup and Installation</a></h2>
<h3 id="initial-setup"><a class="header" href="#initial-setup">Initial Setup</a></h3>
<h4 id="1-download-raspberry-pi-os"><a class="header" href="#1-download-raspberry-pi-os">1. Download Raspberry Pi OS</a></h4>
<pre><code class="language-bash"># Download Raspberry Pi Imager
# For Ubuntu/Debian:
sudo apt install rpi-imager

# For other systems, download from:
# https://www.raspberrypi.com/software/
</code></pre>
<h4 id="2-flash-sd-card"><a class="header" href="#2-flash-sd-card">2. Flash SD Card</a></h4>
<pre><code class="language-bash"># Using Raspberry Pi Imager (GUI):
# 1. Choose OS: Raspberry Pi OS (32-bit/64-bit)
# 2. Choose SD card
# 3. Click "Write"

# Or using command line (Linux):
sudo dd if=2023-05-03-raspios-bullseye-armhf.img of=/dev/sdX bs=4M status=progress
sync
</code></pre>
<h4 id="3-enable-ssh-headless-setup"><a class="header" href="#3-enable-ssh-headless-setup">3. Enable SSH (Headless Setup)</a></h4>
<pre><code class="language-bash"># Create empty 'ssh' file in boot partition
touch /media/username/boot/ssh

# Configure WiFi (optional)
cat &gt; /media/username/boot/wpa_supplicant.conf &lt;&lt; EOF
country=US
ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev
update_config=1

network={
    ssid="YourNetworkName"
    psk="YourPassword"
    key_mgmt=WPA-PSK
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="arduino-programming"><a class="header" href="#arduino-programming">Arduino Programming</a></h1>
<p>Complete guide to Arduino development, from basics to advanced projects.</p>
<h2 id="table-of-contents-29"><a class="header" href="#table-of-contents-29">Table of Contents</a></h2>
<ol>
<li><a href="embedded/arduino.html#introduction">Introduction</a></li>
<li><a href="embedded/arduino.html#getting-started">Getting Started</a></li>
<li><a href="embedded/arduino.html#arduino-language">Arduino Language</a></li>
<li><a href="embedded/arduino.html#digital-io">Digital I/O</a></li>
<li><a href="embedded/arduino.html#analog-io">Analog I/O</a></li>
<li><a href="embedded/arduino.html#serial-communication">Serial Communication</a></li>
<li><a href="embedded/arduino.html#libraries">Libraries</a></li>
<li><a href="embedded/arduino.html#common-projects">Common Projects</a></li>
<li><a href="embedded/arduino.html#advanced-topics">Advanced Topics</a></li>
</ol>
<h2 id="introduction-16"><a class="header" href="#introduction-16">Introduction</a></h2>
<p>Arduino is an open-source electronics platform based on easy-to-use hardware and software. It's designed for artists, designers, hobbyists, and anyone interested in creating interactive objects or environments.</p>
<h3 id="arduino-boards-comparison"><a class="header" href="#arduino-boards-comparison">Arduino Boards Comparison</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Board</th><th>MCU</th><th>Clock</th><th>Flash</th><th>RAM</th><th>Digital I/O</th><th>Analog In</th><th>Price</th></tr></thead><tbody>
<tr><td><strong>Uno</strong></td><td>ATmega328P</td><td>16 MHz</td><td>32 KB</td><td>2 KB</td><td>14 (6 PWM)</td><td>6</td><td>$</td></tr>
<tr><td><strong>Mega 2560</strong></td><td>ATmega2560</td><td>16 MHz</td><td>256 KB</td><td>8 KB</td><td>54 (15 PWM)</td><td>16</td><td>$$</td></tr>
<tr><td><strong>Nano</strong></td><td>ATmega328P</td><td>16 MHz</td><td>32 KB</td><td>2 KB</td><td>14 (6 PWM)</td><td>8</td><td>$</td></tr>
<tr><td><strong>Leonardo</strong></td><td>ATmega32u4</td><td>16 MHz</td><td>32 KB</td><td>2.5 KB</td><td>20 (7 PWM)</td><td>12</td><td>$</td></tr>
<tr><td><strong>Due</strong></td><td>AT91SAM3X8E</td><td>84 MHz</td><td>512 KB</td><td>96 KB</td><td>54 (12 PWM)</td><td>12</td><td>$$$</td></tr>
<tr><td><strong>Nano 33 IoT</strong></td><td>SAMD21</td><td>48 MHz</td><td>256 KB</td><td>32 KB</td><td>14 (11 PWM)</td><td>8</td><td>$$</td></tr>
</tbody></table>
</div>
<h3 id="arduino-uno-pinout"><a class="header" href="#arduino-uno-pinout">Arduino Uno Pinout</a></h3>
<pre><code>                   Arduino Uno
                ┌─────────────┐
                │   USB       │
                ├─────────────┤
    RESET  [ ]──┤ RESET    A0 ├──[ ] Analog Input
    3.3V   [ ]──┤ 3V3      A1 ├──[ ] Analog Input
    5V     [ ]──┤ 5V       A2 ├──[ ] Analog Input
    GND    [ ]──┤ GND      A3 ├──[ ] Analog Input
    GND    [ ]──┤ GND      A4 ├──[ ] Analog Input (I2C SDA)
    VIN    [ ]──┤ VIN      A5 ├──[ ] Analog Input (I2C SCL)
                │             │
    D0/RX  [ ]──┤ 0        13 ├──[ ] D13/SCK (LED_BUILTIN)
    D1/TX  [ ]──┤ 1        12 ├──[ ] D12/MISO
    D2     [ ]──┤ 2        11 ├──[ ] D11~/MOSI
    D3~    [ ]──┤ 3        10 ├──[ ] D10~
    D4     [ ]──┤ 4         9 ├──[ ] D9~
    D5~    [ ]──┤ 5         8 ├──[ ] D8
    D6~    [ ]──┤ 6         7 ├──[ ] D7
                └─────────────┘
    
    ~ = PWM capable
</code></pre>
<h2 id="getting-started-5"><a class="header" href="#getting-started-5">Getting Started</a></h2>
<h3 id="installation-5"><a class="header" href="#installation-5">Installation</a></h3>
<h4 id="arduino-ide"><a class="header" href="#arduino-ide">Arduino IDE</a></h4>
<pre><code class="language-bash"># Download from arduino.cc
# Or use package manager (Linux)
sudo apt install arduino

# Or use Arduino CLI
curl -fsSL https://raw.githubusercontent.com/arduino/arduino-cli/master/install.sh | sh
arduino-cli core update-index
arduino-cli core install arduino:avr
</code></pre>
<h4 id="platformio-recommended-for-advanced-users"><a class="header" href="#platformio-recommended-for-advanced-users">PlatformIO (Recommended for Advanced Users)</a></h4>
<pre><code class="language-bash">pip install platformio
platformio init --board uno
</code></pre>
<h3 id="basic-program-structure"><a class="header" href="#basic-program-structure">Basic Program Structure</a></h3>
<p>Every Arduino sketch has two required functions:</p>
<pre><code class="language-cpp">void setup() {
    // Runs once when the board starts
    // Initialize pins, serial, libraries
}

void loop() {
    // Runs continuously after setup()
    // Main program logic goes here
}
</code></pre>
<h3 id="first-program-blink-led-1"><a class="header" href="#first-program-blink-led-1">First Program: Blink LED</a></h3>
<pre><code class="language-cpp">// Blink the built-in LED
void setup() {
    pinMode(LED_BUILTIN, OUTPUT);  // Set pin 13 as output
}

void loop() {
    digitalWrite(LED_BUILTIN, HIGH);  // Turn LED on
    delay(1000);                       // Wait 1 second
    digitalWrite(LED_BUILTIN, LOW);   // Turn LED off
    delay(1000);                       // Wait 1 second
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>Arduino          Component
   13 ───────────┐
                 │
               ┌─┴─┐
               │LED│  Built-in LED
               └─┬─┘
                 │
   GND ──────────┘
</code></pre>
<h2 id="arduino-language"><a class="header" href="#arduino-language">Arduino Language</a></h2>
<h3 id="data-types"><a class="header" href="#data-types">Data Types</a></h3>
<pre><code class="language-cpp">// Boolean
bool flag = true;

// Integers
byte value = 255;           // 0-255 (8-bit unsigned)
int temperature = -40;      // -32768 to 32767 (16-bit signed)
unsigned int count = 65535; // 0-65535 (16-bit unsigned)
long distance = 1000000L;   // 32-bit signed
unsigned long time = millis();  // 32-bit unsigned

// Floating Point
float voltage = 3.3;        // 32-bit, ~7 digits precision
double precise = 3.14159;   // Same as float on Arduino

// Characters and Strings
char letter = 'A';
char message[] = "Hello";   // C-style string
String text = "World";      // Arduino String class

// Arrays
int readings[10];           // Array of 10 integers
int values[] = {1, 2, 3};  // Initialized array
</code></pre>
<h3 id="control-structures"><a class="header" href="#control-structures">Control Structures</a></h3>
<pre><code class="language-cpp">// If-else
if (temperature &gt; 30) {
    digitalWrite(FAN_PIN, HIGH);
} else if (temperature &gt; 20) {
    analogWrite(FAN_PIN, 128);
} else {
    digitalWrite(FAN_PIN, LOW);
}

// Switch-case
switch (state) {
    case 0:
        // Do something
        break;
    case 1:
        // Do something else
        break;
    default:
        // Default action
        break;
}

// For loop
for (int i = 0; i &lt; 10; i++) {
    Serial.println(i);
}

// While loop
while (digitalRead(BUTTON_PIN) == HIGH) {
    // Wait for button release
}

// Do-while loop
do {
    value = analogRead(A0);
} while (value &lt; 512);
</code></pre>
<h3 id="functions"><a class="header" href="#functions">Functions</a></h3>
<pre><code class="language-cpp">// Function declaration
int addNumbers(int a, int b);

void setup() {
    Serial.begin(9600);
    int result = addNumbers(5, 3);
    Serial.println(result);  // Prints 8
}

// Function definition
int addNumbers(int a, int b) {
    return a + b;
}

// Function with default parameters
void blinkLED(int pin, int times = 1, int delayTime = 500) {
    for (int i = 0; i &lt; times; i++) {
        digitalWrite(pin, HIGH);
        delay(delayTime);
        digitalWrite(pin, LOW);
        delay(delayTime);
    }
}

void loop() {
    blinkLED(13);           // Blink once
    blinkLED(13, 3);        // Blink 3 times
    blinkLED(13, 5, 200);   // Blink 5 times with 200ms delay
}
</code></pre>
<h2 id="digital-io"><a class="header" href="#digital-io">Digital I/O</a></h2>
<h3 id="basic-digital-functions"><a class="header" href="#basic-digital-functions">Basic Digital Functions</a></h3>
<pre><code class="language-cpp">pinMode(pin, mode);        // Configure pin: INPUT, OUTPUT, INPUT_PULLUP
digitalWrite(pin, value);  // Write HIGH or LOW
int value = digitalRead(pin);  // Read HIGH or LOW
</code></pre>
<h3 id="led-control"><a class="header" href="#led-control">LED Control</a></h3>
<pre><code class="language-cpp">// Simple LED control
const int LED_PIN = 9;

void setup() {
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    digitalWrite(LED_PIN, HIGH);
    delay(500);
    digitalWrite(LED_PIN, LOW);
    delay(500);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>Arduino          Component
    9 ───────────┬─────────┐
                 │         │
               ┌─┴─┐     ┌─┴─┐
               │220│     │LED│
               │Ω  │     │ &gt; │
               └─┬─┘     └─┬─┘
                 │         │
   GND ──────────┴─────────┘
</code></pre>
<h3 id="button-input"><a class="header" href="#button-input">Button Input</a></h3>
<pre><code class="language-cpp">const int BUTTON_PIN = 2;
const int LED_PIN = 13;

void setup() {
    pinMode(BUTTON_PIN, INPUT_PULLUP);  // Internal pull-up resistor
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    int buttonState = digitalRead(BUTTON_PIN);
    
    if (buttonState == LOW) {  // Button pressed (active LOW)
        digitalWrite(LED_PIN, HIGH);
    } else {
        digitalWrite(LED_PIN, LOW);
    }
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>Arduino          Button
    2 ────────┬────┬──┬──── 5V (optional if using INPUT_PULLUP)
              │    │  │
            ┌─┴─┐ ┌┴──┴┐
            │10k│ │BTN │
            │Ω  │ └────┘
            └─┬─┘    │
              │      │
   GND ───────┴──────┘
</code></pre>
<h3 id="debouncing"><a class="header" href="#debouncing">Debouncing</a></h3>
<pre><code class="language-cpp">const int BUTTON_PIN = 2;
const int LED_PIN = 13;
const int DEBOUNCE_DELAY = 50;  // milliseconds

int lastButtonState = HIGH;
int buttonState = HIGH;
unsigned long lastDebounceTime = 0;
bool ledState = false;

void setup() {
    pinMode(BUTTON_PIN, INPUT_PULLUP);
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    int reading = digitalRead(BUTTON_PIN);
    
    // If the switch changed, due to noise or pressing
    if (reading != lastButtonState) {
        lastDebounceTime = millis();
    }
    
    if ((millis() - lastDebounceTime) &gt; DEBOUNCE_DELAY) {
        // If the button state has changed
        if (reading != buttonState) {
            buttonState = reading;
            
            // Only toggle if the new button state is LOW (pressed)
            if (buttonState == LOW) {
                ledState = !ledState;
                digitalWrite(LED_PIN, ledState);
            }
        }
    }
    
    lastButtonState = reading;
}
</code></pre>
<h2 id="analog-io"><a class="header" href="#analog-io">Analog I/O</a></h2>
<h3 id="analog-input-adc"><a class="header" href="#analog-input-adc">Analog Input (ADC)</a></h3>
<pre><code class="language-cpp">analogRead(pin);  // Read analog value (0-1023)
</code></pre>
<h4 id="reading-a-potentiometer"><a class="header" href="#reading-a-potentiometer">Reading a Potentiometer</a></h4>
<pre><code class="language-cpp">const int POT_PIN = A0;
const int LED_PIN = 9;

void setup() {
    Serial.begin(9600);
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    int potValue = analogRead(POT_PIN);  // 0-1023
    
    // Convert to voltage (0-5V)
    float voltage = potValue * (5.0 / 1023.0);
    
    // Convert to LED brightness (0-255)
    int brightness = map(potValue, 0, 1023, 0, 255);
    
    Serial.print("Value: ");
    Serial.print(potValue);
    Serial.print(" Voltage: ");
    Serial.print(voltage);
    Serial.println("V");
    
    analogWrite(LED_PIN, brightness);
    delay(100);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>Potentiometer       Arduino
     ┌────┐
  5V─┤1  3├─GND
     │    │
     │ 2  ├─A0 (wiper)
     └────┘
</code></pre>
<h3 id="analog-output-pwm"><a class="header" href="#analog-output-pwm">Analog Output (PWM)</a></h3>
<pre><code class="language-cpp">analogWrite(pin, value);  // PWM output (0-255)
</code></pre>
<h4 id="fading-led"><a class="header" href="#fading-led">Fading LED</a></h4>
<pre><code class="language-cpp">const int LED_PIN = 9;  // Must be PWM pin (~)

void setup() {
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    // Fade in
    for (int brightness = 0; brightness &lt;= 255; brightness++) {
        analogWrite(LED_PIN, brightness);
        delay(10);
    }
    
    // Fade out
    for (int brightness = 255; brightness &gt;= 0; brightness--) {
        analogWrite(LED_PIN, brightness);
        delay(10);
    }
}
</code></pre>
<h3 id="temperature-sensor-lm35"><a class="header" href="#temperature-sensor-lm35">Temperature Sensor (LM35)</a></h3>
<pre><code class="language-cpp">const int TEMP_PIN = A0;

void setup() {
    Serial.begin(9600);
}

void loop() {
    int reading = analogRead(TEMP_PIN);
    
    // Convert to voltage (0-5V)
    float voltage = reading * (5.0 / 1023.0);
    
    // Convert to temperature (LM35: 10mV per degree C)
    float temperatureC = voltage * 100.0;
    float temperatureF = (temperatureC * 9.0 / 5.0) + 32.0;
    
    Serial.print("Temperature: ");
    Serial.print(temperatureC);
    Serial.print("°C / ");
    Serial.print(temperatureF);
    Serial.println("°F");
    
    delay(1000);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>LM35 Sensor         Arduino
    ┌────┐
 1 ─┤ VS ├─ 5V
    │    │
 2 ─┤Vout├─ A0
    │    │
 3 ─┤GND ├─ GND
    └────┘
</code></pre>
<h2 id="serial-communication"><a class="header" href="#serial-communication">Serial Communication</a></h2>
<h3 id="basic-serial-functions"><a class="header" href="#basic-serial-functions">Basic Serial Functions</a></h3>
<pre><code class="language-cpp">Serial.begin(baudrate);        // Initialize serial (9600, 115200, etc.)
Serial.print(data);            // Print without newline
Serial.println(data);          // Print with newline
Serial.write(byte);            // Send raw byte
int available = Serial.available();  // Bytes available to read
char c = Serial.read();        // Read one byte
String line = Serial.readStringUntil('\n');  // Read until newline
</code></pre>
<h3 id="serial-monitor-output"><a class="header" href="#serial-monitor-output">Serial Monitor Output</a></h3>
<pre><code class="language-cpp">void setup() {
    Serial.begin(9600);
    Serial.println("Arduino Ready!");
}

void loop() {
    int sensorValue = analogRead(A0);
    
    // Different formatting options
    Serial.print("Sensor: ");
    Serial.println(sensorValue);
    
    Serial.print("Hex: 0x");
    Serial.println(sensorValue, HEX);
    
    Serial.print("Binary: 0b");
    Serial.println(sensorValue, BIN);
    
    Serial.print("Float: ");
    float voltage = sensorValue * (5.0 / 1023.0);
    Serial.println(voltage, 2);  // 2 decimal places
    
    delay(1000);
}
</code></pre>
<h3 id="serial-input"><a class="header" href="#serial-input">Serial Input</a></h3>
<pre><code class="language-cpp">String inputString = "";
bool stringComplete = false;

void setup() {
    Serial.begin(9600);
    inputString.reserve(200);  // Reserve space for efficiency
}

void loop() {
    // Check if data is available
    while (Serial.available()) {
        char inChar = (char)Serial.read();
        inputString += inChar;
        
        if (inChar == '\n') {
            stringComplete = true;
        }
    }
    
    // Process complete command
    if (stringComplete) {
        Serial.print("Received: ");
        Serial.println(inputString);
        
        // Process command
        if (inputString.startsWith("LED ON")) {
            digitalWrite(LED_BUILTIN, HIGH);
            Serial.println("LED turned ON");
        } else if (inputString.startsWith("LED OFF")) {
            digitalWrite(LED_BUILTIN, LOW);
            Serial.println("LED turned OFF");
        }
        
        // Clear the string
        inputString = "";
        stringComplete = false;
    }
}
</code></pre>
<h2 id="libraries"><a class="header" href="#libraries">Libraries</a></h2>
<h3 id="built-in-libraries"><a class="header" href="#built-in-libraries">Built-in Libraries</a></h3>
<h4 id="wire-i2c"><a class="header" href="#wire-i2c">Wire (I2C)</a></h4>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;

void setup() {
    Wire.begin();  // Join I2C bus as master
}

void loop() {
    // Read from I2C device at address 0x68
    Wire.beginTransmission(0x68);
    Wire.write(0x00);  // Register address
    Wire.endTransmission();
    
    Wire.requestFrom(0x68, 1);  // Request 1 byte
    if (Wire.available()) {
        byte data = Wire.read();
    }
}
</code></pre>
<h4 id="spi"><a class="header" href="#spi">SPI</a></h4>
<pre><code class="language-cpp">#include &lt;SPI.h&gt;

const int CS_PIN = 10;

void setup() {
    SPI.begin();
    pinMode(CS_PIN, OUTPUT);
    digitalWrite(CS_PIN, HIGH);
}

void loop() {
    digitalWrite(CS_PIN, LOW);   // Select device
    SPI.transfer(0xAB);          // Send byte
    byte received = SPI.transfer(0x00);  // Receive byte
    digitalWrite(CS_PIN, HIGH);  // Deselect device
}
</code></pre>
<h4 id="eeprom"><a class="header" href="#eeprom">EEPROM</a></h4>
<pre><code class="language-cpp">#include &lt;EEPROM.h&gt;

void setup() {
    // Write byte to EEPROM
    EEPROM.write(0, 42);
    
    // Read byte from EEPROM
    byte value = EEPROM.read(0);
    
    // Update (only writes if different)
    EEPROM.update(0, 42);
    
    // Write/read other types
    int address = 0;
    float f = 3.14;
    EEPROM.put(address, f);
    EEPROM.get(address, f);
}
</code></pre>
<h3 id="popular-external-libraries"><a class="header" href="#popular-external-libraries">Popular External Libraries</a></h3>
<h4 id="servo-control"><a class="header" href="#servo-control">Servo Control</a></h4>
<pre><code class="language-cpp">#include &lt;Servo.h&gt;

Servo myServo;
const int SERVO_PIN = 9;

void setup() {
    myServo.attach(SERVO_PIN);
}

void loop() {
    // Sweep from 0 to 180 degrees
    for (int pos = 0; pos &lt;= 180; pos++) {
        myServo.write(pos);
        delay(15);
    }
    
    // Sweep back
    for (int pos = 180; pos &gt;= 0; pos--) {
        myServo.write(pos);
        delay(15);
    }
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>Servo Motor         Arduino
    ┌────┐
 R ─┤Red ├─ 5V (or external)
 B ─┤Brn ├─ GND
 O ─┤Org ├─ Pin 9 (PWM)
    └────┘
</code></pre>
<h4 id="liquidcrystal-lcd-display"><a class="header" href="#liquidcrystal-lcd-display">LiquidCrystal (LCD Display)</a></h4>
<pre><code class="language-cpp">#include &lt;LiquidCrystal.h&gt;

// RS, E, D4, D5, D6, D7
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup() {
    lcd.begin(16, 2);  // 16x2 LCD
    lcd.print("Hello, World!");
}

void loop() {
    lcd.setCursor(0, 1);  // Column 0, Row 1
    lcd.print(millis() / 1000);
    lcd.print("s");
    delay(100);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>LCD 16x2            Arduino
VSS  ──────────────  GND
VDD  ──────────────  5V
V0   ──────────────  Potentiometer (contrast)
RS   ──────────────  12
RW   ──────────────  GND
E    ──────────────  11
D4   ──────────────  5
D5   ──────────────  4
D6   ──────────────  3
D7   ──────────────  2
A    ──────────────  5V (backlight)
K    ──────────────  GND
</code></pre>
<h4 id="dht-temperaturehumidity-sensor"><a class="header" href="#dht-temperaturehumidity-sensor">DHT Temperature/Humidity Sensor</a></h4>
<pre><code class="language-cpp">#include &lt;DHT.h&gt;

#define DHTPIN 2
#define DHTTYPE DHT11  // or DHT22

DHT dht(DHTPIN, DHTTYPE);

void setup() {
    Serial.begin(9600);
    dht.begin();
}

void loop() {
    float humidity = dht.readHumidity();
    float temperature = dht.readTemperature();  // Celsius
    float temperatureF = dht.readTemperature(true);  // Fahrenheit
    
    if (isnan(humidity) || isnan(temperature)) {
        Serial.println("Failed to read from DHT sensor!");
        return;
    }
    
    Serial.print("Humidity: ");
    Serial.print(humidity);
    Serial.print("% Temperature: ");
    Serial.print(temperature);
    Serial.println("°C");
    
    delay(2000);  // DHT11 minimum sampling period
}
</code></pre>
<h2 id="common-projects"><a class="header" href="#common-projects">Common Projects</a></h2>
<h3 id="project-1-traffic-light"><a class="header" href="#project-1-traffic-light">Project 1: Traffic Light</a></h3>
<pre><code class="language-cpp">const int RED_LED = 10;
const int YELLOW_LED = 9;
const int GREEN_LED = 8;

void setup() {
    pinMode(RED_LED, OUTPUT);
    pinMode(YELLOW_LED, OUTPUT);
    pinMode(GREEN_LED, OUTPUT);
}

void loop() {
    // Green light
    digitalWrite(GREEN_LED, HIGH);
    delay(5000);  // 5 seconds
    digitalWrite(GREEN_LED, LOW);
    
    // Yellow light
    digitalWrite(YELLOW_LED, HIGH);
    delay(2000);  // 2 seconds
    digitalWrite(YELLOW_LED, LOW);
    
    // Red light
    digitalWrite(RED_LED, HIGH);
    delay(5000);  // 5 seconds
    digitalWrite(RED_LED, LOW);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>Arduino              LEDs
  10 ───┬───[220Ω]───[RED LED]───GND
        │
   9 ───┼───[220Ω]───[YEL LED]───GND
        │
   8 ───┴───[220Ω]───[GRN LED]───GND
</code></pre>
<h3 id="project-2-ultrasonic-distance-sensor"><a class="header" href="#project-2-ultrasonic-distance-sensor">Project 2: Ultrasonic Distance Sensor</a></h3>
<pre><code class="language-cpp">const int TRIG_PIN = 9;
const int ECHO_PIN = 10;

void setup() {
    Serial.begin(9600);
    pinMode(TRIG_PIN, OUTPUT);
    pinMode(ECHO_PIN, INPUT);
}

void loop() {
    // Send ultrasonic pulse
    digitalWrite(TRIG_PIN, LOW);
    delayMicroseconds(2);
    digitalWrite(TRIG_PIN, HIGH);
    delayMicroseconds(10);
    digitalWrite(TRIG_PIN, LOW);
    
    // Measure echo duration
    long duration = pulseIn(ECHO_PIN, HIGH);
    
    // Calculate distance in cm
    // Speed of sound: 343 m/s = 0.0343 cm/µs
    // Distance = (duration / 2) * 0.0343
    float distance = duration * 0.0343 / 2;
    
    Serial.print("Distance: ");
    Serial.print(distance);
    Serial.println(" cm");
    
    delay(100);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>HC-SR04             Arduino
 VCC ───────────────  5V
 Trig ──────────────  9
 Echo ──────────────  10
 GND ───────────────  GND
</code></pre>
<h3 id="project-3-light-activated-switch"><a class="header" href="#project-3-light-activated-switch">Project 3: Light-Activated Switch</a></h3>
<pre><code class="language-cpp">const int LDR_PIN = A0;
const int LED_PIN = 13;
const int THRESHOLD = 500;  // Adjust based on lighting

void setup() {
    Serial.begin(9600);
    pinMode(LED_PIN, OUTPUT);
}

void loop() {
    int lightLevel = analogRead(LDR_PIN);
    
    Serial.print("Light Level: ");
    Serial.println(lightLevel);
    
    if (lightLevel &lt; THRESHOLD) {
        digitalWrite(LED_PIN, HIGH);  // Turn on LED when dark
    } else {
        digitalWrite(LED_PIN, LOW);   // Turn off LED when bright
    }
    
    delay(100);
}
</code></pre>
<p><strong>Wiring:</strong></p>
<pre><code>         5V
          │
        ┌─┴─┐
        │LDR│ (Light Dependent Resistor)
        └─┬─┘
          ├────── A0
        ┌─┴─┐
        │10k│ (Pull-down resistor)
        │Ω  │
        └─┬─┘
          │
         GND
</code></pre>
<h3 id="project-4-temperature-controlled-fan"><a class="header" href="#project-4-temperature-controlled-fan">Project 4: Temperature-Controlled Fan</a></h3>
<pre><code class="language-cpp">#include &lt;DHT.h&gt;

#define DHTPIN 2
#define DHTTYPE DHT11
#define FAN_PIN 9  // PWM pin for fan control

DHT dht(DHTPIN, DHTTYPE);

const float TEMP_MIN = 25.0;  // Start fan at 25°C
const float TEMP_MAX = 35.0;  // Full speed at 35°C

void setup() {
    Serial.begin(9600);
    pinMode(FAN_PIN, OUTPUT);
    dht.begin();
}

void loop() {
    float temperature = dht.readTemperature();
    
    if (isnan(temperature)) {
        Serial.println("Failed to read temperature!");
        return;
    }
    
    // Calculate fan speed (0-255)
    int fanSpeed = 0;
    if (temperature &lt; TEMP_MIN) {
        fanSpeed = 0;
    } else if (temperature &gt; TEMP_MAX) {
        fanSpeed = 255;
    } else {
        fanSpeed = map(temperature * 10, TEMP_MIN * 10, TEMP_MAX * 10, 0, 255);
    }
    
    analogWrite(FAN_PIN, fanSpeed);
    
    Serial.print("Temperature: ");
    Serial.print(temperature);
    Serial.print("°C Fan Speed: ");
    Serial.print((fanSpeed * 100) / 255);
    Serial.println("%");
    
    delay(2000);
}
</code></pre>
<h3 id="project-5-simple-data-logger"><a class="header" href="#project-5-simple-data-logger">Project 5: Simple Data Logger</a></h3>
<pre><code class="language-cpp">#include &lt;SD.h&gt;
#include &lt;SPI.h&gt;

const int CS_PIN = 10;
const int SENSOR_PIN = A0;

File dataFile;

void setup() {
    Serial.begin(9600);
    
    // Initialize SD card
    if (!SD.begin(CS_PIN)) {
        Serial.println("SD card initialization failed!");
        return;
    }
    Serial.println("SD card initialized.");
}

void loop() {
    int sensorValue = analogRead(SENSOR_PIN);
    float voltage = sensorValue * (5.0 / 1023.0);
    
    // Open file for writing
    dataFile = SD.open("datalog.txt", FILE_WRITE);
    
    if (dataFile) {
        // Write timestamp and value
        dataFile.print(millis());
        dataFile.print(",");
        dataFile.println(voltage);
        dataFile.close();
        
        Serial.print("Logged: ");
        Serial.println(voltage);
    } else {
        Serial.println("Error opening file!");
    }
    
    delay(1000);  // Log every second
}
</code></pre>
<h2 id="advanced-topics-2"><a class="header" href="#advanced-topics-2">Advanced Topics</a></h2>
<h3 id="interrupts-1"><a class="header" href="#interrupts-1">Interrupts</a></h3>
<pre><code class="language-cpp">const int BUTTON_PIN = 2;  // Must be interrupt-capable pin
const int LED_PIN = 13;

volatile bool ledState = false;

void setup() {
    pinMode(BUTTON_PIN, INPUT_PULLUP);
    pinMode(LED_PIN, OUTPUT);
    
    // Attach interrupt: pin, ISR function, trigger mode
    attachInterrupt(digitalPinToInterrupt(BUTTON_PIN), buttonISR, FALLING);
}

void loop() {
    // Main loop can do other things
    // LED toggle happens immediately when button pressed
}

// Interrupt Service Routine (keep it short!)
void buttonISR() {
    ledState = !ledState;
    digitalWrite(LED_PIN, ledState);
}
</code></pre>
<h3 id="timers"><a class="header" href="#timers">Timers</a></h3>
<pre><code class="language-cpp">unsigned long previousMillis = 0;
const long interval = 1000;  // 1 second

void setup() {
    pinMode(LED_BUILTIN, OUTPUT);
}

void loop() {
    unsigned long currentMillis = millis();
    
    // Non-blocking timing
    if (currentMillis - previousMillis &gt;= interval) {
        previousMillis = currentMillis;
        
        // Toggle LED
        digitalWrite(LED_BUILTIN, !digitalRead(LED_BUILTIN));
    }
    
    // Can do other things here
}
</code></pre>
<h3 id="memory-optimization-2"><a class="header" href="#memory-optimization-2">Memory Optimization</a></h3>
<pre><code class="language-cpp">// Store strings in flash memory (PROGMEM)
const char message[] PROGMEM = "This string is stored in flash";

void setup() {
    Serial.begin(9600);
    
    // Read from flash memory
    char buffer[50];
    strcpy_P(buffer, message);
    Serial.println(buffer);
}

// Use F() macro for Serial.print
void loop() {
    Serial.println(F("This uses flash memory, not RAM"));
    delay(1000);
}
</code></pre>
<h3 id="low-power-mode"><a class="header" href="#low-power-mode">Low Power Mode</a></h3>
<pre><code class="language-cpp">#include &lt;avr/sleep.h&gt;
#include &lt;avr/power.h&gt;

void setup() {
    pinMode(LED_BUILTIN, OUTPUT);
    pinMode(2, INPUT_PULLUP);
    
    // Enable interrupt for wake-up
    attachInterrupt(digitalPinToInterrupt(2), wakeUp, LOW);
}

void loop() {
    digitalWrite(LED_BUILTIN, HIGH);
    delay(1000);
    digitalWrite(LED_BUILTIN, LOW);
    
    // Enter sleep mode
    enterSleep();
}

void enterSleep() {
    set_sleep_mode(SLEEP_MODE_PWR_DOWN);
    sleep_enable();
    
    // Disable peripherals
    power_adc_disable();
    power_spi_disable();
    power_timer0_disable();
    power_timer1_disable();
    power_timer2_disable();
    power_twi_disable();
    
    sleep_mode();  // Sleep here
    
    // Wake up here
    sleep_disable();
    power_all_enable();
}

void wakeUp() {
    // ISR to wake up
}
</code></pre>
<h2 id="best-practices-30"><a class="header" href="#best-practices-30">Best Practices</a></h2>
<h3 id="1-avoid-delay-for-responsive-code"><a class="header" href="#1-avoid-delay-for-responsive-code">1. Avoid delay() for Responsive Code</a></h3>
<pre><code class="language-cpp">// Bad: Blocking
void loop() {
    digitalWrite(LED1, HIGH);
    delay(1000);
    digitalWrite(LED2, HIGH);
    delay(500);
}

// Good: Non-blocking
unsigned long led1Time = 0;
unsigned long led2Time = 0;

void loop() {
    unsigned long now = millis();
    
    if (now - led1Time &gt;= 1000) {
        digitalWrite(LED1, !digitalRead(LED1));
        led1Time = now;
    }
    
    if (now - led2Time &gt;= 500) {
        digitalWrite(LED2, !digitalRead(LED2));
        led2Time = now;
    }
}
</code></pre>
<h3 id="2-use-const-for-pin-definitions"><a class="header" href="#2-use-const-for-pin-definitions">2. Use const for Pin Definitions</a></h3>
<pre><code class="language-cpp">// Good: Easy to change and read
const int LED_PIN = 13;
const int BUTTON_PIN = 2;
const int SENSOR_PIN = A0;
</code></pre>
<h3 id="3-check-return-values"><a class="header" href="#3-check-return-values">3. Check Return Values</a></h3>
<pre><code class="language-cpp">if (!SD.begin(CS_PIN)) {
    Serial.println("SD card failed!");
    while (1);  // Halt
}
</code></pre>
<h3 id="4-use-meaningful-variable-names"><a class="header" href="#4-use-meaningful-variable-names">4. Use Meaningful Variable Names</a></h3>
<pre><code class="language-cpp">// Bad
int x = analogRead(A0);

// Good
int lightLevel = analogRead(LIGHT_SENSOR_PIN);
</code></pre>
<h3 id="5-comment-complex-logic"><a class="header" href="#5-comment-complex-logic">5. Comment Complex Logic</a></h3>
<pre><code class="language-cpp">// Calculate distance from ultrasonic sensor
// Formula: distance (cm) = duration (µs) × 0.0343 / 2
// Division by 2 accounts for round-trip time
float distance = duration * 0.0343 / 2;
</code></pre>
<h2 id="troubleshooting-5"><a class="header" href="#troubleshooting-5">Troubleshooting</a></h2>
<h3 id="common-issues-9"><a class="header" href="#common-issues-9">Common Issues</a></h3>
<ol>
<li>
<p><strong>Upload Failed</strong></p>
<ul>
<li>Check correct board and port selected</li>
<li>Try pressing reset button before upload</li>
<li>Close Serial Monitor during upload</li>
</ul>
</li>
<li>
<p><strong>Serial Monitor Shows Garbage</strong></p>
<ul>
<li>Check baud rate matches code</li>
<li>Verify USB cable supports data (not just power)</li>
</ul>
</li>
<li>
<p><strong>Sketch Too Large</strong></p>
<ul>
<li>Remove unused libraries</li>
<li>Use PROGMEM for strings</li>
<li>Optimize code</li>
</ul>
</li>
<li>
<p><strong>Unexpected Behavior</strong></p>
<ul>
<li>Add Serial.println() for debugging</li>
<li>Check wiring and connections</li>
<li>Verify power supply adequate</li>
</ul>
</li>
</ol>
<h2 id="resources-27"><a class="header" href="#resources-27">Resources</a></h2>
<ul>
<li><strong>Official Documentation</strong>: https://www.arduino.cc/reference/</li>
<li><strong>Forum</strong>: https://forum.arduino.cc/</li>
<li><strong>Project Hub</strong>: https://create.arduino.cc/projecthub</li>
<li><strong>Libraries</strong>: https://www.arduinolibraries.info/</li>
</ul>
<h2 id="see-also-4"><a class="header" href="#see-also-4">See Also</a></h2>
<ul>
<li><a href="embedded/esp32.html">ESP32</a> - More powerful Arduino-compatible platform</li>
<li><a href="embedded/avr.html">AVR Programming</a> - Low-level AVR microcontroller programming</li>
<li><a href="embedded/gpio.html">GPIO</a> - Digital I/O concepts</li>
<li><a href="embedded/uart.html">UART</a> - Serial communication details</li>
<li><a href="embedded/spi.html">SPI</a> - SPI protocol</li>
<li><a href="embedded/i2c.html">I2C</a> - I2C protocol</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="spi-serial-peripheral-interface"><a class="header" href="#spi-serial-peripheral-interface">SPI (Serial Peripheral Interface)</a></h1>
<h2 id="overview-33"><a class="header" href="#overview-33">Overview</a></h2>
<p>SPI (Serial Peripheral Interface) is a synchronous serial communication protocol used for short-distance communication between microcontrollers and peripheral devices like sensors, displays, SD cards, and flash memory. Developed by Motorola in the 1980s, SPI is known for its high-speed, full-duplex communication capabilities.</p>
<h2 id="key-features-8"><a class="header" href="#key-features-8">Key Features</a></h2>
<ul>
<li><strong>Full-Duplex Communication</strong>: SPI can send and receive data simultaneously on separate lines</li>
<li><strong>High Speed</strong>: Typically operates at speeds from 1 MHz to over 50 MHz</li>
<li><strong>Master-Slave Architecture</strong>: Always has one master device controlling one or more slave devices</li>
<li><strong>Four-Wire Interface</strong>: Uses separate lines for clock, data in, data out, and chip select</li>
<li><strong>No Addressing</strong>: Slave selection is done via dedicated chip select lines</li>
</ul>
<h2 id="signal-lines"><a class="header" href="#signal-lines">Signal Lines</a></h2>
<p>SPI uses four main signal lines:</p>
<div class="table-wrapper"><table><thead><tr><th>Signal</th><th>Alternative Names</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>SCLK</strong></td><td>SCK, CLK</td><td>Serial Clock - Generated by master to synchronize data transfer</td></tr>
<tr><td><strong>MOSI</strong></td><td>SDO, DO, SIMO</td><td>Master Out Slave In - Data from master to slave</td></tr>
<tr><td><strong>MISO</strong></td><td>SDI, DI, SOMI</td><td>Master In Slave Out - Data from slave to master</td></tr>
<tr><td><strong>SS</strong></td><td>CS, NSS</td><td>Slave Select/Chip Select - Selects which slave is active</td></tr>
</tbody></table>
</div>
<h3 id="why-four-wires"><a class="header" href="#why-four-wires">Why Four Wires?</a></h3>
<p>Unlike I2C's two-wire design, SPI uses separate data lines for sending and receiving, enabling full-duplex communication. Each slave device needs its own chip select line, which can increase pin count when multiple slaves are used.</p>
<h2 id="how-it-works-1"><a class="header" href="#how-it-works-1">How It Works</a></h2>
<h3 id="basic-communication-flow"><a class="header" href="#basic-communication-flow">Basic Communication Flow</a></h3>
<ol>
<li><strong>Master selects slave</strong>: Pulls the slave's CS line LOW (active)</li>
<li><strong>Master generates clock</strong>: Starts toggling the SCLK line</li>
<li><strong>Data exchange</strong>: On each clock cycle:
<ul>
<li>Master shifts data out on MOSI</li>
<li>Slave shifts data out on MISO</li>
<li>Both shift data in simultaneously</li>
</ul>
</li>
<li><strong>Master deselects slave</strong>: Pulls CS line HIGH (inactive)</li>
</ol>
<h3 id="clock-polarity-and-phase-cpolcpha"><a class="header" href="#clock-polarity-and-phase-cpolcpha">Clock Polarity and Phase (CPOL/CPHA)</a></h3>
<p>SPI has four modes determined by two settings:</p>
<ul>
<li>
<p><strong>CPOL (Clock Polarity)</strong>: Determines the idle state of the clock</p>
<ul>
<li>CPOL = 0: Clock idles LOW</li>
<li>CPOL = 1: Clock idles HIGH</li>
</ul>
</li>
<li>
<p><strong>CPHA (Clock Phase)</strong>: Determines when data is sampled</p>
<ul>
<li>CPHA = 0: Data sampled on leading edge, shifted on trailing edge</li>
<li>CPHA = 1: Data sampled on trailing edge, shifted on leading edge</li>
</ul>
</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>Mode</th><th>CPOL</th><th>CPHA</th><th>Clock Idle</th><th>Data Sampled</th></tr></thead><tbody>
<tr><td>0</td><td>0</td><td>0</td><td>LOW</td><td>Leading (rising) edge</td></tr>
<tr><td>1</td><td>0</td><td>1</td><td>LOW</td><td>Trailing (falling) edge</td></tr>
<tr><td>2</td><td>1</td><td>0</td><td>HIGH</td><td>Leading (falling) edge</td></tr>
<tr><td>3</td><td>1</td><td>1</td><td>HIGH</td><td>Trailing (rising) edge</td></tr>
</tbody></table>
</div>
<p><strong>Important</strong>: Master and slave must use the same mode for successful communication!</p>
<h2 id="code-examples-2"><a class="header" href="#code-examples-2">Code Examples</a></h2>
<h3 id="arduino-spi-communication"><a class="header" href="#arduino-spi-communication">Arduino SPI Communication</a></h3>
<pre><code class="language-cpp">#include &lt;SPI.h&gt;

const int chipSelectPin = 10;

void setup() {
  // Initialize SPI pins
  pinMode(chipSelectPin, OUTPUT);
  digitalWrite(chipSelectPin, HIGH);  // Deselect slave initially

  // Initialize SPI library
  SPI.begin();

  // Configure SPI settings
  // Max speed: 4 MHz, MSB first, Mode 0
  SPI.beginTransaction(SPISettings(4000000, MSBFIRST, SPI_MODE0));
}

void loop() {
  // Select slave device
  digitalWrite(chipSelectPin, LOW);

  // Send a byte and receive response simultaneously
  byte command = 0x3A;  // Example command
  byte response = SPI.transfer(command);

  // Send multiple bytes
  byte dataToSend[] = {0x01, 0x02, 0x03};
  for (int i = 0; i &lt; 3; i++) {
    byte receivedByte = SPI.transfer(dataToSend[i]);
  }

  // Deselect slave
  digitalWrite(chipSelectPin, HIGH);

  delay(1000);
}
</code></pre>
<h3 id="stm32-hal-spi-example"><a class="header" href="#stm32-hal-spi-example">STM32 HAL SPI Example</a></h3>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

SPI_HandleTypeDef hspi1;

void SPI_Init(void) {
    hspi1.Instance = SPI1;
    hspi1.Init.Mode = SPI_MODE_MASTER;
    hspi1.Init.Direction = SPI_DIRECTION_2LINES;
    hspi1.Init.DataSize = SPI_DATASIZE_8BIT;
    hspi1.Init.CLKPolarity = SPI_POLARITY_LOW;    // CPOL = 0
    hspi1.Init.CLKPhase = SPI_PHASE_1EDGE;        // CPHA = 0
    hspi1.Init.NSS = SPI_NSS_SOFT;
    hspi1.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
    hspi1.Init.FirstBit = SPI_FIRSTBIT_MSB;
    HAL_SPI_Init(&amp;hspi1);
}

void SPI_Write_Read(uint8_t *txData, uint8_t *rxData, uint16_t size) {
    HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_RESET);  // CS LOW
    HAL_SPI_TransmitReceive(&amp;hspi1, txData, rxData, size, 100);
    HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_SET);    // CS HIGH
}
</code></pre>
<h3 id="esp32-spi-example"><a class="header" href="#esp32-spi-example">ESP32 SPI Example</a></h3>
<pre><code class="language-cpp">#include &lt;SPI.h&gt;

SPIClass spi(HSPI);  // Use HSPI bus
const int CS_PIN = 15;

void setup() {
  spi.begin(14, 12, 13, CS_PIN);  // SCLK, MISO, MOSI, SS
  pinMode(CS_PIN, OUTPUT);
  digitalWrite(CS_PIN, HIGH);
}

uint8_t readRegister(uint8_t reg) {
  digitalWrite(CS_PIN, LOW);
  spi.transfer(reg | 0x80);  // Read bit set
  uint8_t value = spi.transfer(0x00);  // Dummy byte to read
  digitalWrite(CS_PIN, HIGH);
  return value;
}

void writeRegister(uint8_t reg, uint8_t value) {
  digitalWrite(CS_PIN, LOW);
  spi.transfer(reg &amp; 0x7F);  // Write bit clear
  spi.transfer(value);
  digitalWrite(CS_PIN, HIGH);
}
</code></pre>
<h2 id="common-use-cases"><a class="header" href="#common-use-cases">Common Use Cases</a></h2>
<h3 id="1-sd-card-communication"><a class="header" href="#1-sd-card-communication">1. SD Card Communication</a></h3>
<ul>
<li>High-speed file I/O</li>
<li>Supports both SPI and SDIO modes</li>
<li>Ideal for data logging applications</li>
</ul>
<h3 id="2-display-interfaces"><a class="header" href="#2-display-interfaces">2. Display Interfaces</a></h3>
<ul>
<li>TFT LCD displays (ILI9341, ST7735)</li>
<li>OLED displays</li>
<li>E-ink displays</li>
<li>Fast refresh rates for graphics</li>
</ul>
<h3 id="3-sensor-communication"><a class="header" href="#3-sensor-communication">3. Sensor Communication</a></h3>
<ul>
<li>Digital accelerometers (ADXL345)</li>
<li>Gyroscopes (MPU6050 in SPI mode)</li>
<li>Pressure sensors (BMP280)</li>
</ul>
<h3 id="4-memory-devices"><a class="header" href="#4-memory-devices">4. Memory Devices</a></h3>
<ul>
<li>Flash memory (W25Q128)</li>
<li>EEPROM chips</li>
<li>FRAM (Ferroelectric RAM)</li>
</ul>
<h3 id="5-wireless-modules"><a class="header" href="#5-wireless-modules">5. Wireless Modules</a></h3>
<ul>
<li>NRF24L01+ (2.4GHz transceiver)</li>
<li>LoRa modules (SX1278)</li>
<li>WiFi modules</li>
</ul>
<h2 id="spi-vs-i2c-comparison"><a class="header" href="#spi-vs-i2c-comparison">SPI vs I2C Comparison</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>SPI</th><th>I2C</th></tr></thead><tbody>
<tr><td><strong>Wires</strong></td><td>4 (+ 1 per additional slave)</td><td>2</td></tr>
<tr><td><strong>Speed</strong></td><td>Up to 50+ MHz</td><td>Up to 3.4 MHz</td></tr>
<tr><td><strong>Duplex</strong></td><td>Full-duplex</td><td>Half-duplex</td></tr>
<tr><td><strong>Addressing</strong></td><td>Hardware (CS pins)</td><td>Software (7/10-bit addresses)</td></tr>
<tr><td><strong>Distance</strong></td><td>Short (&lt; 1 meter)</td><td>Short (&lt; 1 meter)</td></tr>
<tr><td><strong>Complexity</strong></td><td>Simple protocol</td><td>More complex protocol</td></tr>
<tr><td><strong>Multi-master</strong></td><td>No (typically)</td><td>Yes</td></tr>
<tr><td><strong>Pins required</strong></td><td>Increases with slaves</td><td>Constant</td></tr>
</tbody></table>
</div>
<h2 id="best-practices-31"><a class="header" href="#best-practices-31">Best Practices</a></h2>
<h3 id="1-wire-length-and-speed"><a class="header" href="#1-wire-length-and-speed">1. Wire Length and Speed</a></h3>
<ul>
<li>Keep wires short (&lt; 30cm) for high speeds</li>
<li>Reduce speed for longer connections</li>
<li>Use twisted pairs for MOSI/MISO on longer runs</li>
</ul>
<h3 id="2-pull-up-resistors"><a class="header" href="#2-pull-up-resistors">2. Pull-up Resistors</a></h3>
<ul>
<li>MISO should have a pull-up resistor (~10k ohm)</li>
<li>Prevents floating when no slave is selected</li>
<li>Some slave devices have built-in pull-ups</li>
</ul>
<h3 id="3-chip-select-management"><a class="header" href="#3-chip-select-management">3. Chip Select Management</a></h3>
<pre><code class="language-cpp">// Always wrap transfers in CS control
digitalWrite(CS, LOW);
// ... SPI operations ...
digitalWrite(CS, HIGH);

// For critical timing, disable interrupts
noInterrupts();
digitalWrite(CS, LOW);
SPI.transfer(data);
digitalWrite(CS, HIGH);
interrupts();
</code></pre>
<h3 id="4-power-considerations"><a class="header" href="#4-power-considerations">4. Power Considerations</a></h3>
<ul>
<li>Ensure all devices share a common ground</li>
<li>Check voltage levels (3.3V vs 5V)</li>
<li>Use level shifters if needed</li>
</ul>
<h3 id="5-multiple-slave-devices"><a class="header" href="#5-multiple-slave-devices">5. Multiple Slave Devices</a></h3>
<pre><code class="language-cpp">// Daisy chain method (saves CS pins)
// Data flows through all slaves
digitalWrite(CS_SHARED, LOW);
SPI.transfer(dataForSlave1);
SPI.transfer(dataForSlave2);
SPI.transfer(dataForSlave3);
digitalWrite(CS_SHARED, HIGH);

// Individual CS method (parallel addressing)
digitalWrite(CS_SLAVE1, LOW);
SPI.transfer(dataForSlave1);
digitalWrite(CS_SLAVE1, HIGH);
</code></pre>
<h2 id="common-issues-and-debugging"><a class="header" href="#common-issues-and-debugging">Common Issues and Debugging</a></h2>
<h3 id="problem-no-data-received"><a class="header" href="#problem-no-data-received">Problem: No Data Received</a></h3>
<ul>
<li>Check CPOL/CPHA mode matches between master and slave</li>
<li>Verify wiring (MOSI to MOSI, MISO to MISO)</li>
<li>Ensure CS is properly toggled</li>
<li>Check clock frequency is within slave's range</li>
</ul>
<h3 id="problem-corrupted-data"><a class="header" href="#problem-corrupted-data">Problem: Corrupted Data</a></h3>
<ul>
<li>Reduce SPI clock speed</li>
<li>Check for loose connections</li>
<li>Add small capacitors (10nF) near slave devices</li>
<li>Ensure proper ground connections</li>
</ul>
<h3 id="problem-multiple-slaves-interfering"><a class="header" href="#problem-multiple-slaves-interfering">Problem: Multiple Slaves Interfering</a></h3>
<ul>
<li>Verify only one CS is active at a time</li>
<li>Check for proper tri-state behavior on MISO</li>
<li>Add pull-up on MISO line</li>
</ul>
<h2 id="eli10-explain-like-im-10"><a class="header" href="#eli10-explain-like-im-10">ELI10 (Explain Like I'm 10)</a></h2>
<p>Imagine you're playing a game with your friend where you both pass notes at the same time:</p>
<ul>
<li><strong>The master</strong> is like the teacher who decides when to pass notes (controls the clock)</li>
<li><strong>MOSI</strong> is the note you pass to your friend</li>
<li><strong>MISO</strong> is the note your friend passes back to you</li>
<li><strong>Chip Select</strong> is like tapping your friend's shoulder to say "Hey, I'm talking to you!"</li>
<li><strong>Clock</strong> is like a metronome that keeps everyone in sync - you both write and read at the same time</li>
</ul>
<p>The cool part? You can both write notes to each other at the exact same time! That's why SPI is called "full-duplex" - it's like talking and listening simultaneously.</p>
<h2 id="further-resources-16"><a class="header" href="#further-resources-16">Further Resources</a></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">SPI Wikipedia</a> - Detailed technical overview</li>
<li><a href="https://www.analog.com/en/analog-dialogue/articles/introduction-to-spi-interface.html">Analog Devices SPI Tutorial</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi">SparkFun SPI Tutorial</a></li>
<li><a href="https://www.arduino.cc/en/reference/SPI">Arduino SPI Library Reference</a></li>
<li>Application notes from your microcontroller manufacturer</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="i2c"><a class="header" href="#i2c">I2C</a></h1>
<h2 id="overview-34"><a class="header" href="#overview-34">Overview</a></h2>
<p>I2C (Inter-Integrated Circuit) is a synchronous, multi-master, multi-slave, packet-switched, single-ended, serial communication bus. It was developed by Philips Semiconductor (now NXP Semiconductors) in the 1980s to facilitate communication between integrated circuits on a single board.</p>
<h2 id="key-features-9"><a class="header" href="#key-features-9">Key Features</a></h2>
<ul>
<li><strong>Multi-Master Configuration</strong>: I2C allows multiple master devices to control the bus, enabling more complex communication scenarios.</li>
<li><strong>Two-Wire Interface</strong>: I2C uses only two wires for communication: the Serial Data Line (SDA) and the Serial Clock Line (SCL). This simplicity reduces the number of connections required.</li>
<li><strong>Addressing</strong>: Each device on the I2C bus has a unique address, allowing the master to communicate with specific slaves.</li>
<li><strong>Speed</strong>: I2C supports different data rates, typically 100 kbit/s (Standard Mode), 400 kbit/s (Fast Mode), and up to 3.4 Mbit/s (High-Speed Mode).</li>
</ul>
<h2 id="applications-10"><a class="header" href="#applications-10">Applications</a></h2>
<p>I2C is widely used in various applications, including:</p>
<ul>
<li><strong>Sensor Communication</strong>: Many sensors, such as temperature, humidity, and accelerometers, use I2C to communicate with microcontrollers.</li>
<li><strong>Display Interfaces</strong>: LCD and OLED displays often utilize I2C for data transfer, simplifying the wiring and control.</li>
<li><strong>Memory Devices</strong>: EEPROMs and other memory devices frequently implement I2C for data storage and retrieval.</li>
</ul>
<h2 id="signals"><a class="header" href="#signals">Signals</a></h2>
<p>In the context of I2C, signals refer to the electrical signals used for communication between the master and slave devices on the bus. The key signals in the I2C interface include:</p>
<ul>
<li>
<p><strong>SDA (Serial Data Line)</strong>: This line carries the data being transmitted between devices. It is bidirectional, allowing both the master and slave devices to send and receive data.</p>
</li>
<li>
<p><strong>SCL (Serial Clock Line)</strong>: This line provides the clock signal that synchronizes the data transfer between the master and slave devices. The master device generates the clock signal, ensuring that both devices are in sync during communication.</p>
</li>
<li>
<p><strong>Start Condition</strong>: This is a specific signal generated by the master to indicate the beginning of a data transmission. It is represented by a high-to-low transition on the SDA line while the SCL line is high.</p>
</li>
<li>
<p><strong>Stop Condition</strong>: This signal indicates the end of a data transmission. It is represented by a low-to-high transition on the SDA line while the SCL line is high.</p>
</li>
<li>
<p><strong>Acknowledgment (ACK)</strong>: After each byte of data is transmitted, the receiving device sends an acknowledgment signal back to the sender. This is done by pulling the SDA line low during the ninth clock pulse.</p>
</li>
<li>
<p><strong>No Acknowledgment (NACK)</strong>: If the receiving device does not acknowledge the received data, it will leave the SDA line high during the ninth clock pulse, indicating that the sender should stop transmitting.</p>
</li>
</ul>
<p>These signals are essential for establishing communication, ensuring data integrity, and managing the flow of information between devices on the I2C bus.</p>
<h2 id="conclusion-16"><a class="header" href="#conclusion-16">Conclusion</a></h2>
<p>I2C is a versatile and efficient communication protocol that is essential in embedded systems and electronic devices. Its simplicity and flexibility make it a popular choice for connecting various components in a wide range of applications.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="uart-universal-asynchronous-receiver-transmitter"><a class="header" href="#uart-universal-asynchronous-receiver-transmitter">UART (Universal Asynchronous Receiver-Transmitter)</a></h1>
<h2 id="overview-35"><a class="header" href="#overview-35">Overview</a></h2>
<p>UART is one of the most commonly used serial communication protocols in embedded systems. Unlike SPI and I2C, UART is asynchronous - meaning it doesn't require a shared clock signal between devices. This makes it simple, robust, and perfect for point-to-point communication between two devices.</p>
<h2 id="key-features-10"><a class="header" href="#key-features-10">Key Features</a></h2>
<ul>
<li><strong>Asynchronous</strong>: No shared clock required - devices use pre-agreed baud rates</li>
<li><strong>Point-to-Point</strong>: Communication between exactly two devices</li>
<li><strong>Two-Wire Interface</strong>: Only TX (transmit) and RX (receive) lines needed</li>
<li><strong>Full-Duplex</strong>: Can send and receive data simultaneously</li>
<li><strong>Simple</strong>: Easy to implement and debug</li>
<li><strong>Universal</strong>: Supported by virtually all microcontrollers</li>
</ul>
<h2 id="signal-lines-1"><a class="header" href="#signal-lines-1">Signal Lines</a></h2>
<p>UART uses only two main signal lines (plus ground):</p>
<div class="table-wrapper"><table><thead><tr><th>Signal</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>TX</strong></td><td>Transmit Data - Output from device</td></tr>
<tr><td><strong>RX</strong></td><td>Receive Data - Input to device</td></tr>
<tr><td><strong>GND</strong></td><td>Common ground reference</td></tr>
</tbody></table>
</div>
<p><strong>Important Wiring</strong>: TX of device A connects to RX of device B, and vice versa!</p>
<pre><code>Device A              Device B
  TX      --------&gt;     RX
  RX      &lt;--------     TX
  GND     ---------    GND
</code></pre>
<h2 id="how-it-works-2"><a class="header" href="#how-it-works-2">How It Works</a></h2>
<h3 id="data-frame-structure"><a class="header" href="#data-frame-structure">Data Frame Structure</a></h3>
<p>A typical UART data frame consists of:</p>
<pre><code>  Start   Data Bits   Parity  Stop
   Bit    (5-9)       (Opt)  Bit(s)
        , , , , , , ,
        0 1 2 3 4 5 6 7
</code></pre>
<ol>
<li><strong>Idle State</strong>: Line is HIGH when no data is being sent</li>
<li><strong>Start Bit</strong>: Single LOW bit signals beginning of frame</li>
<li><strong>Data Bits</strong>: 5-9 bits of actual data (usually 8 bits)</li>
<li><strong>Parity Bit</strong> (Optional): Error checking bit</li>
<li><strong>Stop Bit(s)</strong>: 1, 1.5, or 2 HIGH bits signal end of frame</li>
</ol>
<h3 id="baud-rate"><a class="header" href="#baud-rate">Baud Rate</a></h3>
<p>Baud rate is the speed of communication, measured in bits per second (bps).</p>
<p><strong>Common Baud Rates</strong>:</p>
<ul>
<li>9600 bps - Default for many applications</li>
<li>19200 bps</li>
<li>38400 bps</li>
<li>57600 bps</li>
<li>115200 bps - Common for debugging/logging</li>
<li>230400 bps</li>
<li>921600 bps - High-speed applications</li>
</ul>
<p><strong>Formula</strong>:</p>
<pre><code>Bit Duration = 1 / Baud Rate
</code></pre>
<p>At 9600 baud: each bit takes ~104 microseconds</p>
<h3 id="parity-bit"><a class="header" href="#parity-bit">Parity Bit</a></h3>
<p>Parity is a simple error detection method:</p>
<ul>
<li><strong>Even Parity</strong>: Parity bit set so total number of 1s is even</li>
<li><strong>Odd Parity</strong>: Parity bit set so total number of 1s is odd</li>
<li><strong>None</strong>: No parity bit (most common)</li>
</ul>
<h3 id="configuration-format"><a class="header" href="#configuration-format">Configuration Format</a></h3>
<p>UART settings are often written as: <strong>Baud-Data-Parity-Stop</strong></p>
<p>Examples:</p>
<ul>
<li><code>9600-8-N-1</code>: 9600 baud, 8 data bits, No parity, 1 stop bit (most common)</li>
<li><code>115200-8-E-1</code>: 115200 baud, 8 data bits, Even parity, 1 stop bit</li>
</ul>
<h2 id="code-examples-3"><a class="header" href="#code-examples-3">Code Examples</a></h2>
<h3 id="arduino-uart"><a class="header" href="#arduino-uart">Arduino UART</a></h3>
<pre><code class="language-cpp">void setup() {
  // Initialize Serial (UART0) at 9600 baud
  Serial.begin(9600);

  // For other UART ports on boards like Arduino Mega:
  // Serial1.begin(115200);
  // Serial2.begin(9600);

  // Wait for serial port to connect
  while (!Serial) {
    ; // Wait for serial port to connect (needed for native USB)
  }

  Serial.println("UART initialized!");
}

void loop() {
  // Sending data
  Serial.print("Temperature: ");
  Serial.println(25.5);

  // Sending formatted data
  char buffer[50];
  sprintf(buffer, "Value: %d, Time: %lu", 42, millis());
  Serial.println(buffer);

  // Reading data
  if (Serial.available() &gt; 0) {
    // Read a single byte
    char incoming = Serial.read();

    // Read until newline
    String command = Serial.readStringUntil('\n');

    // Read with timeout (default 1000ms)
    Serial.setTimeout(500);
    int value = Serial.parseInt();

    Serial.print("Received: ");
    Serial.println(command);
  }

  delay(1000);
}
</code></pre>
<h3 id="esp32-multiple-uarts"><a class="header" href="#esp32-multiple-uarts">ESP32 Multiple UARTs</a></h3>
<pre><code class="language-cpp">// ESP32 has 3 hardware UARTs
HardwareSerial SerialGPS(1);   // UART1
HardwareSerial SerialModem(2); // UART2

void setup() {
  // Serial0 (USB) - default pins
  Serial.begin(115200);

  // UART1 - custom pins (TX=17, RX=16)
  SerialGPS.begin(9600, SERIAL_8N1, 16, 17);

  // UART2 - custom pins (TX=25, RX=26)
  SerialModem.begin(115200, SERIAL_8N1, 26, 25);
}

void loop() {
  // Read from GPS on UART1
  if (SerialGPS.available()) {
    String gpsData = SerialGPS.readStringUntil('\n');
    Serial.println("GPS: " + gpsData);
  }

  // Read from modem on UART2
  if (SerialModem.available()) {
    String modemResponse = SerialModem.readStringUntil('\n');
    Serial.println("Modem: " + modemResponse);
  }
}
</code></pre>
<h3 id="stm32-hal-uart"><a class="header" href="#stm32-hal-uart">STM32 HAL UART</a></h3>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

UART_HandleTypeDef huart2;

void UART_Init(void) {
    huart2.Instance = USART2;
    huart2.Init.BaudRate = 115200;
    huart2.Init.WordLength = UART_WORDLENGTH_8B;
    huart2.Init.StopBits = UART_STOPBITS_1;
    huart2.Init.Parity = UART_PARITY_NONE;
    huart2.Init.Mode = UART_MODE_TX_RX;
    huart2.Init.HwFlowCtl = UART_HWCONTROL_NONE;
    huart2.Init.OverSampling = UART_OVERSAMPLING_16;
    HAL_UART_Init(&amp;huart2);
}

// Blocking transmission
void UART_SendString(char *str) {
    HAL_UART_Transmit(&amp;huart2, (uint8_t*)str, strlen(str), 100);
}

// Blocking reception
void UART_ReceiveData(uint8_t *buffer, uint16_t size) {
    HAL_UART_Receive(&amp;huart2, buffer, size, 1000);
}

// Interrupt-based reception
void UART_ReceiveIT(uint8_t *buffer, uint16_t size) {
    HAL_UART_Receive_IT(&amp;huart2, buffer, size);
}

// Callback when reception complete
void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart) {
    if (huart-&gt;Instance == USART2) {
        // Process received data
        // Re-enable reception
        HAL_UART_Receive_IT(&amp;huart2, rxBuffer, RX_BUFFER_SIZE);
    }
}

// DMA-based high-speed transfer
void UART_Transmit_DMA(uint8_t *data, uint16_t size) {
    HAL_UART_Transmit_DMA(&amp;huart2, data, size);
}
</code></pre>
<h3 id="bare-metal-avr-arduino-uno"><a class="header" href="#bare-metal-avr-arduino-uno">Bare-Metal AVR (Arduino Uno)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;

#define BAUD 9600
#define UBRR_VALUE ((F_CPU / 16 / BAUD) - 1)

void UART_Init(void) {
    // Set baud rate
    UBRR0H = (UBRR_VALUE &gt;&gt; 8);
    UBRR0L = UBRR_VALUE;

    // Enable transmitter and receiver
    UCSR0B = (1 &lt;&lt; TXEN0) | (1 &lt;&lt; RXEN0);

    // Set frame format: 8 data bits, 1 stop bit, no parity
    UCSR0C = (1 &lt;&lt; UCSZ01) | (1 &lt;&lt; UCSZ00);
}

void UART_Transmit(uint8_t data) {
    // Wait for empty transmit buffer
    while (!(UCSR0A &amp; (1 &lt;&lt; UDRE0)));
    // Put data into buffer, sends the data
    UDR0 = data;
}

uint8_t UART_Receive(void) {
    // Wait for data to be received
    while (!(UCSR0A &amp; (1 &lt;&lt; RXC0)));
    // Get and return received data from buffer
    return UDR0;
}

void UART_Print(const char *str) {
    while (*str) {
        UART_Transmit(*str++);
    }
}
</code></pre>
<h2 id="common-use-cases-1"><a class="header" href="#common-use-cases-1">Common Use Cases</a></h2>
<h3 id="1-debugging-and-logging"><a class="header" href="#1-debugging-and-logging">1. Debugging and Logging</a></h3>
<pre><code class="language-cpp">// Real-time debugging output
Serial.print("Sensor value: ");
Serial.println(sensorValue);
Serial.print("Free RAM: ");
Serial.println(freeRam());
</code></pre>
<h3 id="2-gps-module-communication"><a class="header" href="#2-gps-module-communication">2. GPS Module Communication</a></h3>
<pre><code class="language-cpp">// Reading NMEA sentences from GPS
if (SerialGPS.available()) {
    String nmea = SerialGPS.readStringUntil('\n');
    if (nmea.startsWith("$GPGGA")) {
        parseGPS(nmea);
    }
}
</code></pre>
<h3 id="3-wireless-module-bluetooth-wifi"><a class="header" href="#3-wireless-module-bluetooth-wifi">3. Wireless Module (Bluetooth, WiFi)</a></h3>
<pre><code class="language-cpp">// AT command interface
SerialBT.println("AT+NAME=MyDevice");
delay(100);
String response = SerialBT.readString();
</code></pre>
<h3 id="4-sensor-communication"><a class="header" href="#4-sensor-communication">4. Sensor Communication</a></h3>
<pre><code class="language-cpp">// CO2 sensor command
Serial1.write(cmd, 9);
delay(100);
if (Serial1.available() &gt;= 9) {
    Serial1.readBytes(response, 9);
}
</code></pre>
<h3 id="5-pc-communication"><a class="header" href="#5-pc-communication">5. PC Communication</a></h3>
<pre><code class="language-cpp">// Command protocol with PC
void loop() {
    if (Serial.available()) {
        char cmd = Serial.read();
        switch(cmd) {
            case 'L': digitalWrite(LED, HIGH); break;
            case 'l': digitalWrite(LED, LOW); break;
            case 'T': Serial.println(readTemp()); break;
        }
    }
}
</code></pre>
<h2 id="uart-vs-other-protocols"><a class="header" href="#uart-vs-other-protocols">UART vs Other Protocols</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>UART</th><th>I2C</th><th>SPI</th></tr></thead><tbody>
<tr><td><strong>Wires</strong></td><td>2 (+ GND)</td><td>2</td><td>4+</td></tr>
<tr><td><strong>Clock</strong></td><td>Asynchronous</td><td>Synchronous</td><td>Synchronous</td></tr>
<tr><td><strong>Devices</strong></td><td>2 (point-to-point)</td><td>Many (multi-master)</td><td>1 master, many slaves</td></tr>
<tr><td><strong>Speed</strong></td><td>Up to ~5 Mbps</td><td>Up to 3.4 Mbps</td><td>Up to 50+ MHz</td></tr>
<tr><td><strong>Distance</strong></td><td>Long (meters)</td><td>Short (&lt; 1m)</td><td>Short (&lt; 1m)</td></tr>
<tr><td><strong>Complexity</strong></td><td>Simple</td><td>Medium</td><td>Simple</td></tr>
<tr><td><strong>Error Detection</strong></td><td>Parity bit</td><td>ACK/NACK</td><td>None</td></tr>
</tbody></table>
</div>
<h2 id="best-practices-32"><a class="header" href="#best-practices-32">Best Practices</a></h2>
<h3 id="1-proper-baud-rate-calculation"><a class="header" href="#1-proper-baud-rate-calculation">1. Proper Baud Rate Calculation</a></h3>
<pre><code class="language-cpp">// Ensure both devices use exact same baud rate
// Check oscillator tolerance - should be &lt; 2%

// For custom baud rates, verify with formula:
// UBRR = (F_CPU / (16 * BAUD)) - 1
</code></pre>
<h3 id="2-buffer-management"><a class="header" href="#2-buffer-management">2. Buffer Management</a></h3>
<pre><code class="language-cpp">// Check available space before reading
if (Serial.available() &gt; 0) {
    int bytesToRead = Serial.available();
    for (int i = 0; i &lt; bytesToRead; i++) {
        rxBuffer[i] = Serial.read();
    }
}

// Or use built-in methods
Serial.readBytes(rxBuffer, expectedSize);
</code></pre>
<h3 id="3-timeout-handling"><a class="header" href="#3-timeout-handling">3. Timeout Handling</a></h3>
<pre><code class="language-cpp">// Set appropriate timeout
Serial.setTimeout(500);  // 500ms

// Check for timeout
int value = Serial.parseInt();
if (value == 0 &amp;&amp; Serial.peek() != '0') {
    // Timeout occurred
    Serial.println("Error: Timeout");
}
</code></pre>
<h3 id="4-flow-control-hardware"><a class="header" href="#4-flow-control-hardware">4. Flow Control (Hardware)</a></h3>
<pre><code>RTS (Request To Send) and CTS (Clear To Send)
Used for high-speed communications or when receiver
might not keep up with sender
</code></pre>
<h3 id="5-protocol-design"><a class="header" href="#5-protocol-design">5. Protocol Design</a></h3>
<pre><code class="language-cpp">// Add framing for reliable communication
// Example: &lt;START&gt;DATA&lt;END&gt;

void sendPacket(uint8_t *data, uint8_t len) {
    Serial.write(0x02);  // STX (Start of Text)
    for (int i = 0; i &lt; len; i++) {
        Serial.write(data[i]);
    }
    uint8_t checksum = calculateChecksum(data, len);
    Serial.write(checksum);
    Serial.write(0x03);  // ETX (End of Text)
}
</code></pre>
<h2 id="common-issues-and-debugging-1"><a class="header" href="#common-issues-and-debugging-1">Common Issues and Debugging</a></h2>
<h3 id="problem-garbage-characters"><a class="header" href="#problem-garbage-characters">Problem: Garbage Characters</a></h3>
<p><strong>Causes</strong>:</p>
<ul>
<li>Baud rate mismatch between devices</li>
<li>Wrong oscillator frequency</li>
<li>Noisy power supply</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-cpp">// Try common baud rates systematically
Serial.begin(9600);   // Try this
Serial.begin(115200); // Then this

// Check your board's crystal frequency matches F_CPU
</code></pre>
<h3 id="problem-missing-characters"><a class="header" href="#problem-missing-characters">Problem: Missing Characters</a></h3>
<p><strong>Causes</strong>:</p>
<ul>
<li>Buffer overflow (data arriving faster than processing)</li>
<li>Insufficient interrupt priority</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-cpp">// Increase serial buffer size (in HardwareSerial.cpp)
#define SERIAL_RX_BUFFER_SIZE 256

// Use hardware flow control
// Process data promptly in loop()
</code></pre>
<h3 id="problem-first-character-lost"><a class="header" href="#problem-first-character-lost">Problem: First Character Lost</a></h3>
<p><strong>Causes</strong>:</p>
<ul>
<li>Receiver not initialized before transmitter sends</li>
<li>Start bit detection issue</li>
</ul>
<p><strong>Solutions</strong>:</p>
<pre><code class="language-cpp">// Add startup delay
void setup() {
    Serial.begin(9600);
    delay(100);  // Wait for UART to stabilize
}

// Send dummy byte first
Serial.write(0x00);
delay(10);
</code></pre>
<h2 id="voltage-levels"><a class="header" href="#voltage-levels">Voltage Levels</a></h2>
<h3 id="ttl-uart-33v-or-5v"><a class="header" href="#ttl-uart-33v-or-5v">TTL UART (3.3V or 5V)</a></h3>
<ul>
<li><strong>Logic HIGH</strong>: 2.4V - 5V</li>
<li><strong>Logic LOW</strong>: 0V - 0.8V</li>
<li>Most microcontrollers use this</li>
</ul>
<h3 id="rs-232-uart-legacy"><a class="header" href="#rs-232-uart-legacy">RS-232 UART (Legacy)</a></h3>
<ul>
<li><strong>Logic HIGH (Space)</strong>: -3V to -15V</li>
<li><strong>Logic LOW (Mark)</strong>: +3V to +15V</li>
<li>Requires level shifter (MAX232, MAX3232)</li>
<li>Longer cable runs possible</li>
</ul>
<pre><code class="language-cpp">// Using MAX232 level shifter
// MCU TX -&gt; MAX232 T1IN -&gt; MAX232 T1OUT -&gt; PC RX
// MCU RX &lt;- MAX232 R1OUT &lt;- MAX232 R1IN &lt;- PC TX
</code></pre>
<h2 id="eli10-explain-like-im-10-1"><a class="header" href="#eli10-explain-like-im-10-1">ELI10 (Explain Like I'm 10)</a></h2>
<p>Imagine you and your friend are in different rooms and want to talk using two cans connected by a string:</p>
<ul>
<li><strong>TX (Transmit)</strong> is your mouth speaking into the can</li>
<li><strong>RX (Receive)</strong> is your ear listening from the can</li>
<li><strong>Baud Rate</strong> is how fast you talk - if one person talks super fast and the other listens slowly, you won't understand each other!</li>
<li><strong>Start Bit</strong> is like saying "Hey, listen!" before each word</li>
<li><strong>Stop Bit</strong> is like a pause after each word</li>
</ul>
<p>The cool thing? Both of you can talk and listen at the same time because you have two strings (wires)!</p>
<p>The tricky part? You MUST both agree to talk at the same speed (baud rate) before starting, because there's no way to say "slow down!" once you've begun.</p>
<h2 id="further-resources-17"><a class="header" href="#further-resources-17">Further Resources</a></h2>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter">UART Wikipedia</a></li>
<li><a href="https://learn.sparkfun.com/tutorials/serial-communication">SparkFun Serial Communication Tutorial</a></li>
<li><a href="https://www.arduino.cc/reference/en/language/functions/communication/serial/">Arduino Serial Reference</a></li>
<li><a href="https://www.st.com/resource/en/application_note/an4666-stm32-uart-concepts-stmicroelectronics.pdf">AN4666: STM32 UART Concepts</a></li>
<li><a href="http://wormfood.net/avrbaudcalc.php">Baud Rate Calculator</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="usb-protocol"><a class="header" href="#usb-protocol">USB Protocol</a></h1>
<p>Comprehensive guide to USB protocol, device classes, and embedded implementation.</p>
<h2 id="table-of-contents-30"><a class="header" href="#table-of-contents-30">Table of Contents</a></h2>
<ol>
<li><a href="embedded/usb.html#introduction">Introduction</a></li>
<li><a href="embedded/usb.html#usb-basics">USB Basics</a></li>
<li><a href="embedded/usb.html#usb-protocol">USB Protocol</a></li>
<li><a href="embedded/usb.html#device-classes">Device Classes</a></li>
<li><a href="embedded/usb.html#descriptors">Descriptors</a></li>
<li><a href="embedded/usb.html#arduino-usb">Arduino USB</a></li>
<li><a href="embedded/usb.html#stm32-usb">STM32 USB</a></li>
<li><a href="embedded/usb.html#usb-cdc-virtual-serial">USB CDC (Virtual Serial)</a></li>
</ol>
<h2 id="introduction-17"><a class="header" href="#introduction-17">Introduction</a></h2>
<p>USB (Universal Serial Bus) is a standard for connecting devices to a host computer. It provides both power and data communication in a single cable.</p>
<h3 id="usb-versions"><a class="header" href="#usb-versions">USB Versions</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Name</th><th>Speed</th><th>Release</th><th>Connector</th></tr></thead><tbody>
<tr><td><strong>USB 1.0</strong></td><td>Low Speed</td><td>1.5 Mbps</td><td>1996</td><td>Type A/B</td></tr>
<tr><td><strong>USB 1.1</strong></td><td>Full Speed</td><td>12 Mbps</td><td>1998</td><td>Type A/B</td></tr>
<tr><td><strong>USB 2.0</strong></td><td>High Speed</td><td>480 Mbps</td><td>2000</td><td>Type A/B, Mini, Micro</td></tr>
<tr><td><strong>USB 3.0</strong></td><td>SuperSpeed</td><td>5 Gbps</td><td>2008</td><td>Type A/B, Micro B SS</td></tr>
<tr><td><strong>USB 3.1</strong></td><td>SuperSpeed+</td><td>10 Gbps</td><td>2013</td><td>Type C</td></tr>
<tr><td><strong>USB 3.2</strong></td><td>-</td><td>20 Gbps</td><td>2017</td><td>Type C</td></tr>
<tr><td><strong>USB 4.0</strong></td><td>-</td><td>40 Gbps</td><td>2019</td><td>Type C</td></tr>
</tbody></table>
</div>
<h3 id="usb-connectors"><a class="header" href="#usb-connectors">USB Connectors</a></h3>
<pre><code>USB Type A (Host):
┌─────────────┐
│ ┌─┐ ┌─┐ ┌─┐ │
│ │1│ │2│ │3│ │4│
│ └─┘ └─┘ └─┘ │
└─────────────┘
1: VBUS (+5V)
2: D- (Data -)
3: D+ (Data +)
4: GND

USB Type B (Device):
    ┌───┐
  ┌─┘   └─┐
  │ 1   2 │
  │ 3   4 │
  └───────┘

USB Micro B (Common on embedded):
  ┌─────────┐
  │1 2 3 4 5│
  └─────────┘
1: VBUS (+5V)
2: D-
3: D+
4: ID (OTG)
5: GND

USB Type C (Modern):
  ┌───────────┐
  │A1 A2...A12│
  │B1 B2...B12│
  └───────────┘
Reversible, 24 pins
</code></pre>
<h3 id="usb-topology"><a class="header" href="#usb-topology">USB Topology</a></h3>
<pre><code>Host (PC/Hub)
    │
    ├─── Device 1 (Address 1)
    │
    ├─── Hub (Address 2)
    │     │
    │     ├─── Device 2 (Address 3)
    │     └─── Device 3 (Address 4)
    │
    └─── Device 4 (Address 5)

Maximum:
- 127 devices per host
- 5 meter cable length per segment
- 7 tiers (including hub)
</code></pre>
<h2 id="usb-basics"><a class="header" href="#usb-basics">USB Basics</a></h2>
<h3 id="signal-levels"><a class="header" href="#signal-levels">Signal Levels</a></h3>
<ul>
<li><strong>Low Speed (1.5 Mbps)</strong>: D+ pulled down, D- pulled up</li>
<li><strong>Full Speed (12 Mbps)</strong>: D+ pulled up, D- pulled down</li>
<li><strong>High Speed (480 Mbps)</strong>: Differential signaling</li>
</ul>
<h3 id="power"><a class="header" href="#power">Power</a></h3>
<pre><code>USB 2.0: 5V, 500 mA max
USB 3.0: 5V, 900 mA max
USB-C PD: 5V, 9V, 15V, 20V up to 100W
</code></pre>
<h3 id="data-encoding"><a class="header" href="#data-encoding">Data Encoding</a></h3>
<p>USB uses <strong>NRZI</strong> (Non-Return-to-Zero Inverted) encoding with bit stuffing:</p>
<ul>
<li><code>0</code> bit: Transition</li>
<li><code>1</code> bit: No transition</li>
<li>Bit stuffing: After six consecutive <code>1</code>s, insert a <code>0</code></li>
</ul>
<h3 id="packet-types"><a class="header" href="#packet-types">Packet Types</a></h3>
<pre><code>Token Packets:
- SETUP: Initialize control transfer
- IN: Request data from device
- OUT: Send data to device
- SOF: Start of Frame (every 1 ms)

Data Packets:
- DATA0: Even data packet
- DATA1: Odd data packet
- DATA2: High-speed data
- MDATA: Multi-data

Handshake Packets:
- ACK: Acknowledge success
- NAK: Not ready
- STALL: Endpoint halted

Special Packets:
- PRE: Preamble for low-speed
- ERR: Error detected
- SPLIT: High-speed split transaction
</code></pre>
<h2 id="usb-protocol-1"><a class="header" href="#usb-protocol-1">USB Protocol</a></h2>
<h3 id="enumeration-process"><a class="header" href="#enumeration-process">Enumeration Process</a></h3>
<pre><code>1. Device Plugged In
   │
   ├─ USB Reset (SE0 for 10ms)
   │
2. Host Assigns Address 0 (default)
   │
   ├─ Get Device Descriptor
   │  Response: VID, PID, max packet size
   │
3. Host Assigns Unique Address (1-127)
   │
   ├─ Set Address
   │
4. Host Requests Configuration
   │
   ├─ Get Configuration Descriptor
   │  Response: Interfaces, endpoints, class info
   │
   ├─ Get String Descriptors (optional)
   │  Response: Manufacturer, product, serial
   │
5. Host Configures Device
   │
   ├─ Set Configuration
   │
6. Device Ready for Use
</code></pre>
<h3 id="transfer-types"><a class="header" href="#transfer-types">Transfer Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Transfer Type</th><th>Speed</th><th>Error Correction</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>Control</strong></td><td>Any</td><td>Yes</td><td>Device enumeration, configuration</td></tr>
<tr><td><strong>Bulk</strong></td><td>Full/High</td><td>Yes</td><td>Large data transfers (storage, printers)</td></tr>
<tr><td><strong>Interrupt</strong></td><td>Any</td><td>Yes</td><td>Small, periodic data (HID, mice)</td></tr>
<tr><td><strong>Isochronous</strong></td><td>Full/High</td><td>No</td><td>Real-time audio/video</td></tr>
</tbody></table>
</div>
<h3 id="control-transfer-structure"><a class="header" href="#control-transfer-structure">Control Transfer Structure</a></h3>
<pre><code>Setup Stage:
  Host → Device: SETUP token + DATA0 packet

Data Stage (optional):
  IN:  Device → Host: DATA packets
  OUT: Host → Device: DATA packets

Status Stage:
  IN:  Device → Host: Zero-length DATA1 + ACK
  OUT: Host → Device: Zero-length DATA1 + ACK
</code></pre>
<h3 id="standard-requests"><a class="header" href="#standard-requests">Standard Requests</a></h3>
<pre><code class="language-c">// bmRequestType: Direction | Type | Recipient
#define USB_DIR_OUT     0x00
#define USB_DIR_IN      0x80

#define USB_TYPE_STANDARD   0x00
#define USB_TYPE_CLASS      0x20
#define USB_TYPE_VENDOR     0x40

#define USB_RECIP_DEVICE    0x00
#define USB_RECIP_INTERFACE 0x01
#define USB_RECIP_ENDPOINT  0x02

// bRequest codes
#define USB_REQ_GET_STATUS        0
#define USB_REQ_CLEAR_FEATURE     1
#define USB_REQ_SET_FEATURE       3
#define USB_REQ_SET_ADDRESS       5
#define USB_REQ_GET_DESCRIPTOR    6
#define USB_REQ_SET_DESCRIPTOR    7
#define USB_REQ_GET_CONFIGURATION 8
#define USB_REQ_SET_CONFIGURATION 9
#define USB_REQ_GET_INTERFACE     10
#define USB_REQ_SET_INTERFACE     11
</code></pre>
<h2 id="device-classes"><a class="header" href="#device-classes">Device Classes</a></h2>
<h3 id="usb-class-codes"><a class="header" href="#usb-class-codes">USB Class Codes</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Class</th><th>Code</th><th>Description</th><th>Examples</th></tr></thead><tbody>
<tr><td><strong>CDC</strong></td><td>0x02</td><td>Communications Device</td><td>Virtual COM port, modems</td></tr>
<tr><td><strong>HID</strong></td><td>0x03</td><td>Human Interface Device</td><td>Keyboards, mice, game controllers</td></tr>
<tr><td><strong>Mass Storage</strong></td><td>0x08</td><td>Storage Device</td><td>USB flash drives, external HDDs</td></tr>
<tr><td><strong>Hub</strong></td><td>0x09</td><td>USB Hub</td><td>-</td></tr>
<tr><td><strong>Audio</strong></td><td>0x01</td><td>Audio Device</td><td>Speakers, microphones</td></tr>
<tr><td><strong>Video</strong></td><td>0x0E</td><td>Video Device</td><td>Webcams</td></tr>
<tr><td><strong>Printer</strong></td><td>0x07</td><td>Printer</td><td>-</td></tr>
<tr><td><strong>Vendor Specific</strong></td><td>0xFF</td><td>Custom</td><td>-</td></tr>
</tbody></table>
</div>
<h3 id="hid-human-interface-device"><a class="header" href="#hid-human-interface-device">HID (Human Interface Device)</a></h3>
<pre><code class="language-c">// HID Descriptor
struct HID_Descriptor {
    uint8_t  bLength;           // Size of descriptor
    uint8_t  bDescriptorType;   // HID descriptor type (0x21)
    uint16_t bcdHID;            // HID specification release
    uint8_t  bCountryCode;      // Country code
    uint8_t  bNumDescriptors;   // Number of class descriptors
    uint8_t  bDescriptorType2;  // Report descriptor type (0x22)
    uint16_t wDescriptorLength; // Length of report descriptor
};

// HID Report Descriptor (Mouse example)
const uint8_t mouse_report_descriptor[] = {
    0x05, 0x01,        // Usage Page (Generic Desktop)
    0x09, 0x02,        // Usage (Mouse)
    0xA1, 0x01,        // Collection (Application)
    0x09, 0x01,        //   Usage (Pointer)
    0xA1, 0x00,        //   Collection (Physical)
    0x05, 0x09,        //     Usage Page (Buttons)
    0x19, 0x01,        //     Usage Minimum (Button 1)
    0x29, 0x03,        //     Usage Maximum (Button 3)
    0x15, 0x00,        //     Logical Minimum (0)
    0x25, 0x01,        //     Logical Maximum (1)
    0x95, 0x03,        //     Report Count (3)
    0x75, 0x01,        //     Report Size (1)
    0x81, 0x02,        //     Input (Data, Variable, Absolute)
    0x95, 0x01,        //     Report Count (1)
    0x75, 0x05,        //     Report Size (5)
    0x81, 0x01,        //     Input (Constant) - Padding
    0x05, 0x01,        //     Usage Page (Generic Desktop)
    0x09, 0x30,        //     Usage (X)
    0x09, 0x31,        //     Usage (Y)
    0x15, 0x81,        //     Logical Minimum (-127)
    0x25, 0x7F,        //     Logical Maximum (127)
    0x75, 0x08,        //     Report Size (8)
    0x95, 0x02,        //     Report Count (2)
    0x81, 0x06,        //     Input (Data, Variable, Relative)
    0xC0,              //   End Collection
    0xC0               // End Collection
};
</code></pre>
<h3 id="cdc-communication-device-class"><a class="header" href="#cdc-communication-device-class">CDC (Communication Device Class)</a></h3>
<p>Used for virtual serial ports (USB to UART).</p>
<pre><code class="language-c">// CDC ACM (Abstract Control Model) Interface

// CDC Header Functional Descriptor
struct CDC_Header_Descriptor {
    uint8_t  bLength;
    uint8_t  bDescriptorType;
    uint8_t  bDescriptorSubtype;  // Header (0x00)
    uint16_t bcdCDC;
};

// CDC Call Management Descriptor
struct CDC_CallManagement_Descriptor {
    uint8_t bLength;
    uint8_t bDescriptorType;
    uint8_t bDescriptorSubtype;  // Call Management (0x01)
    uint8_t bmCapabilities;
    uint8_t bDataInterface;
};

// CDC Line Coding (115200 8N1 example)
struct CDC_LineCoding {
    uint32_t dwDTERate;      // Baud rate: 115200
    uint8_t  bCharFormat;    // Stop bits: 1
    uint8_t  bParityType;    // Parity: None (0)
    uint8_t  bDataBits;      // Data bits: 8
};
</code></pre>
<h2 id="descriptors"><a class="header" href="#descriptors">Descriptors</a></h2>
<h3 id="device-descriptor"><a class="header" href="#device-descriptor">Device Descriptor</a></h3>
<pre><code class="language-c">struct USB_Device_Descriptor {
    uint8_t  bLength;            // Size: 18 bytes
    uint8_t  bDescriptorType;    // DEVICE (0x01)
    uint16_t bcdUSB;             // USB version (0x0200 for USB 2.0)
    uint8_t  bDeviceClass;       // Class code
    uint8_t  bDeviceSubClass;    // Subclass code
    uint8_t  bDeviceProtocol;    // Protocol code
    uint8_t  bMaxPacketSize0;    // Max packet size for EP0
    uint16_t idVendor;           // Vendor ID (VID)
    uint16_t idProduct;          // Product ID (PID)
    uint16_t bcdDevice;          // Device release number
    uint8_t  iManufacturer;      // Manufacturer string index
    uint8_t  iProduct;           // Product string index
    uint8_t  iSerialNumber;      // Serial number string index
    uint8_t  bNumConfigurations; // Number of configurations
};

// Example
const uint8_t device_descriptor[] = {
    18,         // bLength
    0x01,       // bDescriptorType (DEVICE)
    0x00, 0x02, // bcdUSB (USB 2.0)
    0x00,       // bDeviceClass (defined in interface)
    0x00,       // bDeviceSubClass
    0x00,       // bDeviceProtocol
    64,         // bMaxPacketSize0
    0x83, 0x04, // idVendor (0x0483 - STMicroelectronics)
    0x40, 0x57, // idProduct (0x5740)
    0x00, 0x02, // bcdDevice (2.0)
    1,          // iManufacturer
    2,          // iProduct
    3,          // iSerialNumber
    1           // bNumConfigurations
};
</code></pre>
<h3 id="configuration-descriptor"><a class="header" href="#configuration-descriptor">Configuration Descriptor</a></h3>
<pre><code class="language-c">struct USB_Configuration_Descriptor {
    uint8_t  bLength;             // Size: 9 bytes
    uint8_t  bDescriptorType;     // CONFIGURATION (0x02)
    uint16_t wTotalLength;        // Total length of data
    uint8_t  bNumInterfaces;      // Number of interfaces
    uint8_t  bConfigurationValue; // Configuration index
    uint8_t  iConfiguration;      // Configuration string index
    uint8_t  bmAttributes;        // Attributes (self/bus powered)
    uint8_t  bMaxPower;           // Max power in 2mA units
};
</code></pre>
<h3 id="interface-descriptor"><a class="header" href="#interface-descriptor">Interface Descriptor</a></h3>
<pre><code class="language-c">struct USB_Interface_Descriptor {
    uint8_t bLength;            // Size: 9 bytes
    uint8_t bDescriptorType;    // INTERFACE (0x04)
    uint8_t bInterfaceNumber;   // Interface index
    uint8_t bAlternateSetting;  // Alternate setting
    uint8_t bNumEndpoints;      // Number of endpoints
    uint8_t bInterfaceClass;    // Class code
    uint8_t bInterfaceSubClass; // Subclass code
    uint8_t bInterfaceProtocol; // Protocol code
    uint8_t iInterface;         // Interface string index
};
</code></pre>
<h3 id="endpoint-descriptor"><a class="header" href="#endpoint-descriptor">Endpoint Descriptor</a></h3>
<pre><code class="language-c">struct USB_Endpoint_Descriptor {
    uint8_t  bLength;          // Size: 7 bytes
    uint8_t  bDescriptorType;  // ENDPOINT (0x05)
    uint8_t  bEndpointAddress; // Address (bit 7: direction)
    uint8_t  bmAttributes;     // Transfer type
    uint16_t wMaxPacketSize;   // Max packet size
    uint8_t  bInterval;        // Polling interval (ms)
};

// Endpoint address format:
// Bit 7: Direction (0 = OUT, 1 = IN)
// Bits 3-0: Endpoint number (0-15)
#define USB_EP_IN(n)  (0x80 | (n))
#define USB_EP_OUT(n) (n)

// Transfer types
#define USB_EP_TYPE_CONTROL     0x00
#define USB_EP_TYPE_ISOCHRONOUS 0x01
#define USB_EP_TYPE_BULK        0x02
#define USB_EP_TYPE_INTERRUPT   0x03
</code></pre>
<h3 id="string-descriptor"><a class="header" href="#string-descriptor">String Descriptor</a></h3>
<pre><code class="language-c">struct USB_String_Descriptor {
    uint8_t bLength;
    uint8_t bDescriptorType;  // STRING (0x03)
    uint16_t wString[];       // Unicode string
};

// String 0 (Language ID)
const uint8_t string0[] = {
    4,      // bLength
    0x03,   // bDescriptorType
    0x09, 0x04  // wLANGID[0]: 0x0409 (English - US)
};

// String 1 (Manufacturer)
const uint8_t string1[] = {
    28,     // bLength
    0x03,   // bDescriptorType
    'M',0, 'a',0, 'n',0, 'u',0, 'f',0, 'a',0, 'c',0, 
    't',0, 'u',0, 'r',0, 'e',0, 'r',0, 0,0
};
</code></pre>
<h2 id="arduino-usb"><a class="header" href="#arduino-usb">Arduino USB</a></h2>
<h3 id="arduino-leonardomicro-atmega32u4"><a class="header" href="#arduino-leonardomicro-atmega32u4">Arduino Leonardo/Micro (ATmega32u4)</a></h3>
<p>The ATmega32u4 has native USB support.</p>
<h4 id="usb-mouse"><a class="header" href="#usb-mouse">USB Mouse</a></h4>
<pre><code class="language-cpp">#include &lt;Mouse.h&gt;

void setup() {
    Mouse.begin();
}

void loop() {
    // Move mouse in a square
    Mouse.move(10, 0);   // Right
    delay(500);
    Mouse.move(0, 10);   // Down
    delay(500);
    Mouse.move(-10, 0);  // Left
    delay(500);
    Mouse.move(0, -10);  // Up
    delay(500);
}
</code></pre>
<h4 id="usb-keyboard"><a class="header" href="#usb-keyboard">USB Keyboard</a></h4>
<pre><code class="language-cpp">#include &lt;Keyboard.h&gt;

const int BUTTON_PIN = 2;

void setup() {
    pinMode(BUTTON_PIN, INPUT_PULLUP);
    Keyboard.begin();
}

void loop() {
    if (digitalRead(BUTTON_PIN) == LOW) {
        Keyboard.print("Hello, World!");
        delay(500);
    }
}
</code></pre>
<h4 id="usb-hid-custom"><a class="header" href="#usb-hid-custom">USB HID Custom</a></h4>
<pre><code class="language-cpp">#include &lt;HID.h&gt;

// Custom HID report descriptor
static const uint8_t _hidReportDescriptor[] PROGMEM = {
    0x06, 0x00, 0xFF,  // Usage Page (Vendor Defined)
    0x09, 0x01,        // Usage (Vendor Usage 1)
    0xA1, 0x01,        // Collection (Application)
    0x15, 0x00,        //   Logical Minimum (0)
    0x26, 0xFF, 0x00,  //   Logical Maximum (255)
    0x75, 0x08,        //   Report Size (8 bits)
    0x95, 0x40,        //   Report Count (64)
    0x09, 0x01,        //   Usage (Vendor Usage 1)
    0x81, 0x02,        //   Input (Data, Variable, Absolute)
    0x09, 0x01,        //   Usage (Vendor Usage 1)
    0x91, 0x02,        //   Output (Data, Variable, Absolute)
    0xC0               // End Collection
};

void setup() {
    static HIDSubDescriptor node(_hidReportDescriptor, sizeof(_hidReportDescriptor));
    HID().AppendDescriptor(&amp;node);
}

void loop() {
    uint8_t data[64] = {1, 2, 3, 4};
    HID().SendReport(1, data, 64);
    delay(100);
}
</code></pre>
<h2 id="stm32-usb"><a class="header" href="#stm32-usb">STM32 USB</a></h2>
<h3 id="usb-cdc-virtual-com-port-cubemx"><a class="header" href="#usb-cdc-virtual-com-port-cubemx">USB CDC Virtual COM Port (CubeMX)</a></h3>
<pre><code class="language-c">/* Generated by CubeMX with USB Device middleware */
#include "usbd_cdc_if.h"

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_USB_DEVICE_Init();
    
    uint8_t buffer[64];
    sprintf((char*)buffer, "Hello from STM32!\r\n");
    
    while (1) {
        CDC_Transmit_FS(buffer, strlen((char*)buffer));
        HAL_Delay(1000);
    }
}

/* In usbd_cdc_if.c */
static int8_t CDC_Receive_FS(uint8_t* Buf, uint32_t *Len) {
    // Echo back received data
    CDC_Transmit_FS(Buf, *Len);
    return USBD_OK;
}
</code></pre>
<h3 id="usb-hid-keyboard"><a class="header" href="#usb-hid-keyboard">USB HID Keyboard</a></h3>
<pre><code class="language-c">/* Configure USB Device as HID in CubeMX */
#include "usbd_hid.h"

extern USBD_HandleTypeDef hUsbDeviceFS;

// HID keyboard report
typedef struct {
    uint8_t modifiers;  // Ctrl, Shift, Alt, GUI
    uint8_t reserved;
    uint8_t keys[6];    // Up to 6 simultaneous keys
} KeyboardReport;

void send_key(uint8_t key) {
    KeyboardReport report = {0};
    
    // Press key
    report.keys[0] = key;
    USBD_HID_SendReport(&amp;hUsbDeviceFS, (uint8_t*)&amp;report, sizeof(report));
    HAL_Delay(10);
    
    // Release key
    memset(&amp;report, 0, sizeof(report));
    USBD_HID_SendReport(&amp;hUsbDeviceFS, (uint8_t*)&amp;report, sizeof(report));
    HAL_Delay(10);
}

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_USB_DEVICE_Init();
    
    HAL_Delay(1000);  // Wait for enumeration
    
    while (1) {
        // Send 'A' key
        send_key(0x04);  // HID usage code for 'A'
        HAL_Delay(1000);
    }
}
</code></pre>
<h3 id="usb-mass-storage"><a class="header" href="#usb-mass-storage">USB Mass Storage</a></h3>
<pre><code class="language-c">/* Configure USB Device as MSC in CubeMX */
#include "usbd_storage_if.h"

// Implement SCSI commands
int8_t STORAGE_Read_FS(uint8_t lun, uint8_t *buf, uint32_t blk_addr, uint16_t blk_len) {
    // Read from SD card or internal flash
    for (uint16_t i = 0; i &lt; blk_len; i++) {
        // Read block at (blk_addr + i) to (buf + i * BLOCK_SIZE)
    }
    return USBD_OK;
}

int8_t STORAGE_Write_FS(uint8_t lun, uint8_t *buf, uint32_t blk_addr, uint16_t blk_len) {
    // Write to SD card or internal flash
    for (uint16_t i = 0; i &lt; blk_len; i++) {
        // Write block at (blk_addr + i) from (buf + i * BLOCK_SIZE)
    }
    return USBD_OK;
}
</code></pre>
<h2 id="usb-cdc-virtual-serial"><a class="header" href="#usb-cdc-virtual-serial">USB CDC (Virtual Serial)</a></h2>
<h3 id="pc-side-python"><a class="header" href="#pc-side-python">PC Side (Python)</a></h3>
<pre><code class="language-python">import serial
import time

# Open serial port
ser = serial.Serial('COM3', 115200, timeout=1)  # Windows
# ser = serial.Serial('/dev/ttyACM0', 115200, timeout=1)  # Linux

# Write data
ser.write(b'Hello, Device!\n')

# Read data
while True:
    if ser.in_waiting &gt; 0:
        data = ser.readline()
        print(f"Received: {data.decode()}")
    
    time.sleep(0.1)

ser.close()
</code></pre>
<h3 id="pc-side-c"><a class="header" href="#pc-side-c">PC Side (C++)</a></h3>
<pre><code class="language-cpp">// Linux example
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;termios.h&gt;

int main() {
    int fd = open("/dev/ttyACM0", O_RDWR);
    
    // Configure serial port
    struct termios tty;
    tcgetattr(fd, &amp;tty);
    cfsetospeed(&amp;tty, B115200);
    cfsetispeed(&amp;tty, B115200);
    tty.c_cflag |= (CLOCAL | CREAD);
    tty.c_cflag &amp;= ~PARENB;
    tty.c_cflag &amp;= ~CSTOPB;
    tty.c_cflag &amp;= ~CSIZE;
    tty.c_cflag |= CS8;
    tcsetattr(fd, TCSANOW, &amp;tty);
    
    // Write
    char msg[] = "Hello, Device!\n";
    write(fd, msg, sizeof(msg));
    
    // Read
    char buffer[256];
    int n = read(fd, buffer, sizeof(buffer));
    buffer[n] = '\0';
    printf("Received: %s\n", buffer);
    
    close(fd);
    return 0;
}
</code></pre>
<h2 id="best-practices-33"><a class="header" href="#best-practices-33">Best Practices</a></h2>
<ol>
<li><strong>VID/PID</strong>: Use unique Vendor ID and Product ID (or get your own)</li>
<li><strong>Descriptors</strong>: Ensure correct descriptor chain</li>
<li><strong>Enumeration</strong>: Handle USB reset and enumeration properly</li>
<li><strong>Power</strong>: Declare correct power consumption</li>
<li><strong>String Descriptors</strong>: Provide manufacturer, product, serial number</li>
<li><strong>Error Handling</strong>: Handle NAK, STALL conditions</li>
<li><strong>Buffer Management</strong>: Use DMA for better performance</li>
<li><strong>Compliance</strong>: Test with USB-IF tools for certification</li>
</ol>
<h2 id="debugging-tools"><a class="header" href="#debugging-tools">Debugging Tools</a></h2>
<h3 id="linux"><a class="header" href="#linux">Linux</a></h3>
<pre><code class="language-bash"># List USB devices
lsusb

# Detailed info
lsusb -v

# Monitor USB traffic
sudo cat /sys/kernel/debug/usb/usbmon/0u

# Install usbutils
sudo apt install usbutils
</code></pre>
<h3 id="windows-1"><a class="header" href="#windows-1">Windows</a></h3>
<ul>
<li><strong>USBView</strong>: Microsoft USB device viewer</li>
<li><strong>USBDeview</strong>: NirSoft utility</li>
<li><strong>Wireshark</strong>: With USB capture support</li>
</ul>
<h3 id="hardware"><a class="header" href="#hardware">Hardware</a></h3>
<ul>
<li><strong>USB Protocol Analyzer</strong>: Beagle USB, Total Phase</li>
<li><strong>Logic Analyzer</strong>: Can decode USB signals</li>
</ul>
<h2 id="troubleshooting-6"><a class="header" href="#troubleshooting-6">Troubleshooting</a></h2>
<h3 id="common-issues-10"><a class="header" href="#common-issues-10">Common Issues</a></h3>
<p><strong>Device Not Recognized:</strong></p>
<ul>
<li>Check USB cable (data lines)</li>
<li>Verify correct descriptors</li>
<li>Check VID/PID not conflicting</li>
<li>Ensure proper enumeration handling</li>
</ul>
<p><strong>Intermittent Disconnects:</strong></p>
<ul>
<li>Power supply insufficient</li>
<li>Check USB cable quality</li>
<li>Verify proper suspend/resume handling</li>
</ul>
<p><strong>Data Corruption:</strong></p>
<ul>
<li>Check buffer sizes</li>
<li>Verify DMA configuration</li>
<li>Ensure proper synchronization</li>
</ul>
<p><strong>Slow Transfer Speed:</strong></p>
<ul>
<li>Use bulk transfers for large data</li>
<li>Enable DMA</li>
<li>Optimize buffer sizes</li>
<li>Check USB 2.0 High Speed mode</li>
</ul>
<h2 id="resources-28"><a class="header" href="#resources-28">Resources</a></h2>
<ul>
<li><strong>USB Specification</strong>: USB.org</li>
<li><strong>USB Made Simple</strong>: https://www.usbmadesimple.co.uk/</li>
<li><strong>STM32 USB Training</strong>: ST's USB training materials</li>
<li><strong>Jan Axelson's USB</strong>: Classic USB development book</li>
<li><strong>Linux USB</strong>: https://www.kernel.org/doc/html/latest/driver-api/usb/</li>
</ul>
<h2 id="see-also-5"><a class="header" href="#see-also-5">See Also</a></h2>
<ul>
<li><a href="embedded/stm32.html">STM32 USB</a></li>
<li><a href="embedded/arduino.html">Arduino USB HID</a></li>
<li><a href="embedded/../protocols/">Communication Protocols</a></li>
<li><a href="embedded/README.html">Embedded Systems Overview</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="can-controller-area-network"><a class="header" href="#can-controller-area-network">CAN (Controller Area Network)</a></h1>
<p>Controller Area Network (CAN) is a robust vehicle bus standard designed to allow microcontrollers and devices to communicate with each other without a host computer. It is widely used in automotive and industrial applications due to its reliability and efficiency.</p>
<h2 id="key-concepts-17"><a class="header" href="#key-concepts-17">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Frames</strong>: CAN communication is based on frames, which are structured packets of data. Each frame contains an identifier, control bits, data, and error-checking information.</p>
</li>
<li>
<p><strong>Identifiers</strong>: Each frame has a unique identifier that determines the priority of the message. Lower identifier values have higher priority on the bus.</p>
</li>
<li>
<p><strong>Bitwise Arbitration</strong>: CAN uses a non-destructive bitwise arbitration method to control access to the bus. This ensures that the highest priority message is transmitted without collision.</p>
</li>
</ul>
<h2 id="common-standards"><a class="header" href="#common-standards">Common Standards</a></h2>
<ol>
<li><strong>CAN 2.0A</strong>: This standard defines 11-bit identifiers for frames.</li>
<li><strong>CAN 2.0B</strong>: This standard extends the identifier length to 29 bits, allowing for more unique message identifiers.</li>
<li><strong>CAN FD (Flexible Data-rate)</strong>: This standard allows for higher data rates and larger data payloads compared to traditional CAN.</li>
</ol>
<h2 id="applications-11"><a class="header" href="#applications-11">Applications</a></h2>
<p>CAN is used in various applications, including:</p>
<ul>
<li><strong>Automotive</strong>: Enabling communication between different electronic control units (ECUs) in vehicles, such as engine control, transmission, and braking systems.</li>
<li><strong>Industrial Automation</strong>: Facilitating communication between sensors, actuators, and controllers in manufacturing and process control systems.</li>
<li><strong>Medical Equipment</strong>: Ensuring reliable data exchange between different components of medical devices.</li>
</ul>
<h2 id="conclusion-17"><a class="header" href="#conclusion-17">Conclusion</a></h2>
<p>CAN is a critical communication protocol in automotive and industrial systems, providing reliable and efficient data exchange. Understanding CAN's principles and standards is essential for engineers working in these fields.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sdio"><a class="header" href="#sdio">SDIO</a></h1>
<h2 id="overview-36"><a class="header" href="#overview-36">Overview</a></h2>
<p>SDIO (Secure Digital Input Output) is an extension of the SD (Secure Digital) card standard that allows for the integration of input/output devices into the SD card interface. This enables various peripherals, such as Wi-Fi, Bluetooth, GPS, and other sensors, to be connected to a host device through a standard SD card slot.</p>
<h2 id="key-features-11"><a class="header" href="#key-features-11">Key Features</a></h2>
<ul>
<li><strong>Versatility</strong>: SDIO supports a wide range of devices, making it suitable for various applications in mobile devices, embedded systems, and consumer electronics.</li>
<li><strong>Hot Swappable</strong>: SDIO devices can be inserted and removed while the host device is powered on, allowing for greater flexibility in device management.</li>
<li><strong>Standardized Interface</strong>: The SDIO interface is standardized, which simplifies the development process for manufacturers and developers.</li>
</ul>
<h2 id="applications-12"><a class="header" href="#applications-12">Applications</a></h2>
<p>SDIO is commonly used in:</p>
<ul>
<li><strong>Wireless Communication</strong>: Many Wi-Fi and Bluetooth modules utilize SDIO to connect to host devices, enabling wireless connectivity.</li>
<li><strong>GPS Modules</strong>: GPS receivers can be integrated via SDIO, providing location services to mobile devices.</li>
<li><strong>Sensor Integration</strong>: Various sensors, such as accelerometers and gyroscopes, can be connected through SDIO for enhanced functionality in applications like gaming and navigation.</li>
</ul>
<h2 id="signals-1"><a class="header" href="#signals-1">Signals</a></h2>
<p>In the context of SDIO, signals refer to the electrical signals used for communication between the host device and the SDIO peripheral. These signals are essential for data transfer, command execution, and device management. The key signals in the SDIO interface include:</p>
<ul>
<li>
<p><strong>CMD (Command Line)</strong>: This signal is used to send commands from the host to the SDIO device. It is essential for initiating communication and controlling the operation of the device.</p>
</li>
<li>
<p><strong>CLK (Clock Line)</strong>: The clock signal synchronizes the data transfer between the host and the SDIO device. It ensures that both the host and the device are in sync during communication.</p>
</li>
<li>
<p><strong>DATA (Data Lines)</strong>: These lines are used for data transfer between the host and the SDIO device. SDIO supports multiple data lines (typically 1, 4, or 8) to increase the data transfer rate.</p>
</li>
<li>
<p><strong>CD (Card Detect)</strong>: This signal indicates whether an SDIO device is present in the slot. It allows the host to detect when a device is inserted or removed.</p>
</li>
<li>
<p><strong>WP (Write Protect)</strong>: This signal is used to indicate whether the SDIO device is write-protected. It prevents accidental data modification when the device is in a write-protect state.</p>
</li>
</ul>
<h2 id="conclusion-18"><a class="header" href="#conclusion-18">Conclusion</a></h2>
<p>SDIO is a powerful extension of the SD card standard that enhances the capabilities of mobile and embedded devices by allowing the integration of various peripherals. Its versatility and standardized interface make it a popular choice for developers looking to expand the functionality of their devices.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ethernet"><a class="header" href="#ethernet">Ethernet</a></h1>
<p>Ethernet is a widely used networking technology that enables devices to communicate over a local area network (LAN). It is a fundamental technology for connecting computers, printers, and other devices in homes and businesses.</p>
<h2 id="key-concepts-18"><a class="header" href="#key-concepts-18">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Frames</strong>: Ethernet transmits data in packets called frames. Each frame contains source and destination MAC addresses, as well as the data being transmitted.</p>
</li>
<li>
<p><strong>MAC Address</strong>: A Media Access Control (MAC) address is a unique identifier assigned to network interfaces for communication on the physical network segment.</p>
</li>
<li>
<p><strong>Switching</strong>: Ethernet switches are devices that connect multiple devices on a LAN and use MAC addresses to forward frames to the correct destination.</p>
</li>
</ul>
<h2 id="common-standards-1"><a class="header" href="#common-standards-1">Common Standards</a></h2>
<ol>
<li>
<p><strong>IEEE 802.3</strong>: This is the standard that defines the physical and data link layers for Ethernet networks. It includes specifications for various speeds, such as 10 Mbps, 100 Mbps, 1 Gbps, and 10 Gbps.</p>
</li>
<li>
<p><strong>Full Duplex</strong>: Modern Ethernet supports full duplex communication, allowing devices to send and receive data simultaneously, which improves network efficiency.</p>
</li>
<li>
<p><strong>VLANs</strong>: Virtual Local Area Networks (VLANs) allow network administrators to segment a single physical network into multiple logical networks for improved security and performance.</p>
</li>
</ol>
<h2 id="applications-13"><a class="header" href="#applications-13">Applications</a></h2>
<p>Ethernet is used in various applications, including:</p>
<ul>
<li>
<p><strong>Local Area Networking</strong>: Connecting computers and devices within a limited geographical area, such as an office or home.</p>
</li>
<li>
<p><strong>Data Centers</strong>: Providing high-speed connections between servers and storage devices.</p>
</li>
<li>
<p><strong>Industrial Automation</strong>: Enabling communication between machines and control systems in manufacturing environments.</p>
</li>
</ul>
<h2 id="different-signals-in-ethernet"><a class="header" href="#different-signals-in-ethernet">Different Signals in Ethernet</a></h2>
<p>Ethernet communication relies on various signals to transmit data over the network. These signals include:</p>
<ol>
<li>
<p><strong>Carrier Sense</strong>: Ethernet devices use carrier sense to detect if the network medium is idle or busy before transmitting data. This helps prevent collisions on the network.</p>
</li>
<li>
<p><strong>Collision Detection</strong>: In half-duplex Ethernet, devices use collision detection to identify when two devices transmit data simultaneously, causing a collision. When a collision is detected, devices stop transmitting and wait for a random backoff period before attempting to retransmit.</p>
</li>
<li>
<p><strong>Preamble</strong>: Each Ethernet frame begins with a preamble, a sequence of alternating 1s and 0s, which allows devices to synchronize their clocks and prepare for the incoming data.</p>
</li>
<li>
<p><strong>Start Frame Delimiter (SFD)</strong>: Following the preamble, the SFD is a specific pattern that indicates the start of the actual Ethernet frame.</p>
</li>
<li>
<p><strong>Clock Signals</strong>: Ethernet devices use clock signals to maintain synchronization between the transmitter and receiver, ensuring accurate data transmission.</p>
</li>
<li>
<p><strong>Link Pulse</strong>: In 10BASE-T Ethernet, link pulses are used to establish and maintain a connection between devices. These pulses are sent periodically to indicate that the link is active.</p>
</li>
</ol>
<p>Understanding these signals is crucial for diagnosing and troubleshooting Ethernet network issues, as well as for designing and implementing reliable Ethernet communication systems.</p>
<h2 id="conclusion-19"><a class="header" href="#conclusion-19">Conclusion</a></h2>
<p>Ethernet remains a cornerstone of modern networking, providing reliable and high-speed communication for a wide range of applications. Understanding Ethernet's principles and standards is essential for network engineers and IT professionals.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="pwm-pulse-width-modulation"><a class="header" href="#pwm-pulse-width-modulation">PWM (Pulse Width Modulation)</a></h1>
<h2 id="overview-37"><a class="header" href="#overview-37">Overview</a></h2>
<p>Pulse Width Modulation (PWM) is a technique for controlling power delivery to electrical devices by rapidly switching between ON and OFF states. By varying the ratio of ON time to OFF time (duty cycle), you can control the average power delivered without actually changing the voltage level. This makes PWM highly efficient and versatile for applications ranging from LED dimming to motor control.</p>
<h2 id="key-concepts-19"><a class="header" href="#key-concepts-19">Key Concepts</a></h2>
<h3 id="duty-cycle"><a class="header" href="#duty-cycle">Duty Cycle</a></h3>
<p>The <strong>duty cycle</strong> is the percentage of time the signal is HIGH during one complete cycle.</p>
<pre><code>Duty Cycle (%) = (Ton / (Ton + Toff)) × 100

Where:
- Ton = Time the signal is HIGH
- Toff = Time the signal is LOW
- Period = Ton + Toff
</code></pre>
<p><strong>Examples</strong>:</p>
<ul>
<li><strong>0% duty cycle</strong>: Always LOW (0V average)</li>
<li><strong>25% duty cycle</strong>: HIGH for 1/4 of the period</li>
<li><strong>50% duty cycle</strong>: HIGH for half the period</li>
<li><strong>75% duty cycle</strong>: HIGH for 3/4 of the period</li>
<li><strong>100% duty cycle</strong>: Always HIGH (full voltage)</li>
</ul>
<h3 id="frequency"><a class="header" href="#frequency">Frequency</a></h3>
<p>The <strong>frequency</strong> determines how many ON/OFF cycles occur per second, measured in Hertz (Hz).</p>
<pre><code>Frequency = 1 / Period
Period = 1 / Frequency
</code></pre>
<p><strong>Typical Frequencies</strong>:</p>
<ul>
<li><strong>LED Dimming</strong>: 500 Hz - 20 kHz (above flicker perception ~60 Hz)</li>
<li><strong>Motor Control</strong>: 1 kHz - 40 kHz</li>
<li><strong>Audio</strong>: 40 kHz+ (above human hearing)</li>
<li><strong>Servo Motors</strong>: 50 Hz (20ms period)</li>
</ul>
<h3 id="average-voltage"><a class="header" href="#average-voltage">Average Voltage</a></h3>
<p>The average voltage delivered by PWM:</p>
<pre><code>Average Voltage = Supply Voltage × (Duty Cycle / 100)

Example (5V supply):
- 0% duty → 0V average
- 25% duty → 1.25V average
- 50% duty → 2.5V average
- 100% duty → 5V average
</code></pre>
<h3 id="visual-representation-3"><a class="header" href="#visual-representation-3">Visual Representation</a></h3>
<pre><code>100% Duty Cycle (Always ON):
█████████████████████████████

75% Duty Cycle:
██████████████████░░░░░░░

50% Duty Cycle:
█████████████░░░░░░░░░░░░

25% Duty Cycle:
██████░░░░░░░░░░░░░░░░░░░

0% Duty Cycle (Always OFF):
░░░░░░░░░░░░░░░░░░░░░░░░░
</code></pre>
<h2 id="how-it-works-3"><a class="header" href="#how-it-works-3">How It Works</a></h2>
<h3 id="hardware-pwm-vs-software-pwm"><a class="header" href="#hardware-pwm-vs-software-pwm">Hardware PWM vs Software PWM</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Hardware PWM</th><th>Software PWM</th></tr></thead><tbody>
<tr><td><strong>Precision</strong></td><td>Very precise, timer-based</td><td>Can jitter with interrupts</td></tr>
<tr><td><strong>CPU Load</strong></td><td>Zero (handled by hardware)</td><td>High (CPU must toggle pin)</td></tr>
<tr><td><strong>Pins</strong></td><td>Limited (specific pins only)</td><td>Any digital pin</td></tr>
<tr><td><strong>Frequency</strong></td><td>High (up to MHz)</td><td>Low (few kHz max)</td></tr>
<tr><td><strong>Recommended</strong></td><td>Motors, audio, servos</td><td>Simple LED control</td></tr>
</tbody></table>
</div>
<h3 id="pwm-resolution"><a class="header" href="#pwm-resolution">PWM Resolution</a></h3>
<p>Resolution is the number of distinct duty cycle levels available:</p>
<div class="table-wrapper"><table><thead><tr><th>Resolution</th><th>Levels</th><th>Step Size (at 5V)</th></tr></thead><tbody>
<tr><td>8-bit</td><td>256</td><td>19.5 mV</td></tr>
<tr><td>10-bit</td><td>1024</td><td>4.88 mV</td></tr>
<tr><td>12-bit</td><td>4096</td><td>1.22 mV</td></tr>
<tr><td>16-bit</td><td>65536</td><td>76 μV</td></tr>
</tbody></table>
</div>
<p><strong>Note</strong>: Higher resolution requires lower maximum frequency:</p>
<pre><code>Max Frequency = Clock Frequency / (2^Resolution)
</code></pre>
<h2 id="code-examples-4"><a class="header" href="#code-examples-4">Code Examples</a></h2>
<h3 id="arduino-pwm-hardware"><a class="header" href="#arduino-pwm-hardware">Arduino PWM (Hardware)</a></h3>
<pre><code class="language-cpp">// Arduino Uno PWM pins: 3, 5, 6, 9, 10, 11
// Default frequency: ~490 Hz (pins 3,9,10,11) and ~980 Hz (pins 5,6)

const int ledPin = 9;
const int motorPin = 10;

void setup() {
  pinMode(ledPin, OUTPUT);
  pinMode(motorPin, OUTPUT);
}

void loop() {
  // analogWrite uses 8-bit resolution (0-255)

  // LED at 25% brightness
  analogWrite(ledPin, 64);  // 64/255 = 25%
  delay(1000);

  // LED at 50% brightness
  analogWrite(ledPin, 128);  // 128/255 = 50%
  delay(1000);

  // LED at 75% brightness
  analogWrite(ledPin, 192);  // 192/255 = 75%
  delay(1000);

  // LED at 100% brightness
  analogWrite(ledPin, 255);  // 255/255 = 100%
  delay(1000);
}

// Smooth fade effect
void fadeLED() {
  // Fade in
  for (int brightness = 0; brightness &lt;= 255; brightness++) {
    analogWrite(ledPin, brightness);
    delay(5);
  }

  // Fade out
  for (int brightness = 255; brightness &gt;= 0; brightness--) {
    analogWrite(ledPin, brightness);
    delay(5);
  }
}

// Change PWM frequency (Arduino Uno)
void setPWMFrequency(int pin, int divisor) {
  byte mode;

  if (pin == 5 || pin == 6 || pin == 9 || pin == 10) {
    switch(divisor) {
      case 1: mode = 0x01; break;    // 31.25 kHz
      case 8: mode = 0x02; break;    // 3.9 kHz
      case 64: mode = 0x03; break;   // 490 Hz (default for 9,10)
      case 256: mode = 0x04; break;  // 122 Hz
      case 1024: mode = 0x05; break; // 30 Hz
      default: return;
    }

    if (pin == 5 || pin == 6) {
      TCCR0B = (TCCR0B &amp; 0b11111000) | mode;
    } else {
      TCCR1B = (TCCR1B &amp; 0b11111000) | mode;
    }
  }
}

void setup() {
  pinMode(9, OUTPUT);
  setPWMFrequency(9, 1);  // Set pin 9 to 31.25 kHz
}
</code></pre>
<h3 id="esp32-pwm-ledc"><a class="header" href="#esp32-pwm-ledc">ESP32 PWM (LEDC)</a></h3>
<pre><code class="language-cpp">// ESP32 uses LEDC (LED Control) for PWM
// 16 independent channels, configurable frequency and resolution

const int ledPin = 25;
const int pwmChannel = 0;      // Channel 0-15
const int pwmFrequency = 5000; // 5 kHz
const int pwmResolution = 8;   // 8-bit (0-255)

void setup() {
  // Configure PWM channel
  ledcSetup(pwmChannel, pwmFrequency, pwmResolution);

  // Attach pin to PWM channel
  ledcAttachPin(ledPin, pwmChannel);
}

void loop() {
  // Set duty cycle (0-255 for 8-bit)
  ledcWrite(pwmChannel, 128);  // 50% duty cycle
  delay(1000);

  ledcWrite(pwmChannel, 64);   // 25% duty cycle
  delay(1000);
}

// High resolution PWM (16-bit)
void setupHighResPWM() {
  const int pwmChannel = 0;
  const int pwmFreq = 1000;    // Lower freq for higher resolution
  const int pwmRes = 16;       // 16-bit (0-65535)

  ledcSetup(pwmChannel, pwmFreq, pwmRes);
  ledcAttachPin(ledPin, pwmChannel);

  // Set to 50% with 16-bit precision
  ledcWrite(pwmChannel, 32768);
}

// Multiple PWM channels for RGB LED
const int redPin = 25;
const int greenPin = 26;
const int bluePin = 27;

void setupRGB() {
  ledcSetup(0, 5000, 8);  // Red channel
  ledcSetup(1, 5000, 8);  // Green channel
  ledcSetup(2, 5000, 8);  // Blue channel

  ledcAttachPin(redPin, 0);
  ledcAttachPin(greenPin, 1);
  ledcAttachPin(bluePin, 2);
}

void setRGBColor(uint8_t r, uint8_t g, uint8_t b) {
  ledcWrite(0, r);
  ledcWrite(1, g);
  ledcWrite(2, b);
}

void loop() {
  setRGBColor(255, 0, 0);    // Red
  delay(1000);
  setRGBColor(0, 255, 0);    // Green
  delay(1000);
  setRGBColor(0, 0, 255);    // Blue
  delay(1000);
  setRGBColor(255, 255, 0);  // Yellow
  delay(1000);
}
</code></pre>
<h3 id="stm32-hal-pwm"><a class="header" href="#stm32-hal-pwm">STM32 HAL PWM</a></h3>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

TIM_HandleTypeDef htim3;

void PWM_Init(void) {
    TIM_OC_InitTypeDef sConfigOC = {0};

    // Timer 3 configuration for PWM
    htim3.Instance = TIM3;
    htim3.Init.Prescaler = 84 - 1;       // 84 MHz / 84 = 1 MHz
    htim3.Init.CounterMode = TIM_COUNTERMODE_UP;
    htim3.Init.Period = 1000 - 1;        // 1 MHz / 1000 = 1 kHz PWM
    htim3.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
    HAL_TIM_PWM_Init(&amp;htim3);

    // Configure PWM channel 1
    sConfigOC.OCMode = TIM_OCMODE_PWM1;
    sConfigOC.Pulse = 500;               // 50% duty cycle
    sConfigOC.OCPolarity = TIM_OCPOLARITY_HIGH;
    sConfigOC.OCFastMode = TIM_OCFAST_DISABLE;
    HAL_TIM_PWM_ConfigChannel(&amp;htim3, &amp;sConfigOC, TIM_CHANNEL_1);

    // Start PWM
    HAL_TIM_PWM_Start(&amp;htim3, TIM_CHANNEL_1);
}

void PWM_SetDutyCycle(uint16_t dutyCycle) {
    // dutyCycle: 0-1000 (0-100%)
    __HAL_TIM_SET_COMPARE(&amp;htim3, TIM_CHANNEL_1, dutyCycle);
}

void PWM_SetPercent(uint8_t percent) {
    // percent: 0-100
    uint16_t pulse = (percent * 1000) / 100;
    PWM_SetDutyCycle(pulse);
}
</code></pre>
<h3 id="servo-control-with-pwm"><a class="header" href="#servo-control-with-pwm">Servo Control with PWM</a></h3>
<pre><code class="language-cpp">// Standard servo: 50 Hz (20ms period)
// Pulse width: 1ms (0°) to 2ms (180°)

const int servoPin = 9;

void setup() {
  pinMode(servoPin, OUTPUT);
}

void setServoAngle(int angle) {
  // Map angle (0-180) to pulse width (1000-2000 μs)
  int pulseWidth = map(angle, 0, 180, 1000, 2000);

  // Generate 50 Hz PWM signal
  digitalWrite(servoPin, HIGH);
  delayMicroseconds(pulseWidth);
  digitalWrite(servoPin, LOW);
  delayMicroseconds(20000 - pulseWidth);  // Complete 20ms period
}

void loop() {
  setServoAngle(0);      // 0 degrees
  delay(1000);
  setServoAngle(90);     // 90 degrees
  delay(1000);
  setServoAngle(180);    // 180 degrees
  delay(1000);
}

// Using Servo library (easier)
#include &lt;Servo.h&gt;

Servo myServo;

void setup() {
  myServo.attach(9);     // Attach servo to pin 9
}

void loop() {
  myServo.write(0);      // 0 degrees
  delay(1000);
  myServo.write(90);     // 90 degrees
  delay(1000);
  myServo.write(180);    // 180 degrees
  delay(1000);
}
</code></pre>
<h3 id="motor-control-h-bridge"><a class="header" href="#motor-control-h-bridge">Motor Control (H-Bridge)</a></h3>
<pre><code class="language-cpp">// Control DC motor speed and direction with L298N H-Bridge

const int motorPWM = 9;    // Speed control (PWM)
const int motorIN1 = 7;    // Direction control
const int motorIN2 = 8;    // Direction control

void setup() {
  pinMode(motorPWM, OUTPUT);
  pinMode(motorIN1, OUTPUT);
  pinMode(motorIN2, OUTPUT);
}

void setMotorSpeed(int speed) {
  // speed: -255 (full reverse) to +255 (full forward)

  if (speed &gt; 0) {
    // Forward
    digitalWrite(motorIN1, HIGH);
    digitalWrite(motorIN2, LOW);
    analogWrite(motorPWM, speed);
  } else if (speed &lt; 0) {
    // Reverse
    digitalWrite(motorIN1, LOW);
    digitalWrite(motorIN2, HIGH);
    analogWrite(motorPWM, -speed);
  } else {
    // Stop
    digitalWrite(motorIN1, LOW);
    digitalWrite(motorIN2, LOW);
    analogWrite(motorPWM, 0);
  }
}

void loop() {
  setMotorSpeed(128);    // 50% forward
  delay(2000);
  setMotorSpeed(255);    // 100% forward
  delay(2000);
  setMotorSpeed(0);      // Stop
  delay(1000);
  setMotorSpeed(-128);   // 50% reverse
  delay(2000);
}
</code></pre>
<h2 id="common-applications"><a class="header" href="#common-applications">Common Applications</a></h2>
<h3 id="1-led-dimming"><a class="header" href="#1-led-dimming">1. LED Dimming</a></h3>
<pre><code class="language-cpp">// Smooth breathing effect
void breathingLED(int pin) {
  const int maxBrightness = 255;
  const int minBrightness = 0;
  const int step = 5;
  const int delayTime = 30;

  // Breathe in
  for (int brightness = minBrightness; brightness &lt;= maxBrightness; brightness += step) {
    analogWrite(pin, brightness);
    delay(delayTime);
  }

  // Breathe out
  for (int brightness = maxBrightness; brightness &gt;= minBrightness; brightness -= step) {
    analogWrite(pin, brightness);
    delay(delayTime);
  }
}
</code></pre>
<h3 id="2-rgb-color-mixing"><a class="header" href="#2-rgb-color-mixing">2. RGB Color Mixing</a></h3>
<pre><code class="language-cpp">void setColorHSV(float h, float s, float v) {
  // Convert HSV to RGB
  float c = v * s;
  float x = c * (1 - abs(fmod(h / 60.0, 2) - 1));
  float m = v - c;

  float r, g, b;
  if (h &lt; 60) { r = c; g = x; b = 0; }
  else if (h &lt; 120) { r = x; g = c; b = 0; }
  else if (h &lt; 180) { r = 0; g = c; b = x; }
  else if (h &lt; 240) { r = 0; g = x; b = c; }
  else if (h &lt; 300) { r = x; g = 0; b = c; }
  else { r = c; g = 0; b = x; }

  analogWrite(redPin, (r + m) * 255);
  analogWrite(greenPin, (g + m) * 255);
  analogWrite(bluePin, (b + m) * 255);
}

// Rainbow effect
void rainbow() {
  for (int hue = 0; hue &lt; 360; hue++) {
    setColorHSV(hue, 1.0, 1.0);
    delay(10);
  }
}
</code></pre>
<h3 id="3-speakerbuzzer-tone-generation"><a class="header" href="#3-speakerbuzzer-tone-generation">3. Speaker/Buzzer Tone Generation</a></h3>
<pre><code class="language-cpp">void playTone(int pin, int frequency, int duration) {
  int period = 1000000 / frequency;  // Period in microseconds
  int halfPeriod = period / 2;

  long cycles = ((long)frequency * duration) / 1000;

  for (long i = 0; i &lt; cycles; i++) {
    digitalWrite(pin, HIGH);
    delayMicroseconds(halfPeriod);
    digitalWrite(pin, LOW);
    delayMicroseconds(halfPeriod);
  }
}

void playMelody() {
  playTone(buzzerPin, 262, 500);  // C4
  playTone(buzzerPin, 294, 500);  // D4
  playTone(buzzerPin, 330, 500);  // E4
  playTone(buzzerPin, 349, 500);  // F4
}

// Using tone() function (easier)
void playNote(int frequency) {
  tone(buzzerPin, frequency);
  delay(500);
  noTone(buzzerPin);
}
</code></pre>
<h3 id="4-fan-speed-control"><a class="header" href="#4-fan-speed-control">4. Fan Speed Control</a></h3>
<pre><code class="language-cpp">int targetTemp = 25;    // Target temperature
int currentTemp = 30;   // Read from sensor

void controlFan() {
  int tempDiff = currentTemp - targetTemp;

  int fanSpeed;
  if (tempDiff &lt;= 0) {
    fanSpeed = 0;  // Too cold, fan off
  } else if (tempDiff &gt;= 10) {
    fanSpeed = 255;  // Very hot, max speed
  } else {
    // Proportional control
    fanSpeed = map(tempDiff, 0, 10, 50, 255);
  }

  analogWrite(fanPin, fanSpeed);
}
</code></pre>
<h3 id="5-power-supply-buck-converter"><a class="header" href="#5-power-supply-buck-converter">5. Power Supply (Buck Converter)</a></h3>
<p>PWM is used in switching power supplies to efficiently convert voltage:</p>
<ul>
<li>High frequency (20-100 kHz) minimizes inductor size</li>
<li>Duty cycle controls output voltage</li>
<li>Feedback loop maintains regulation</li>
</ul>
<h2 id="best-practices-34"><a class="header" href="#best-practices-34">Best Practices</a></h2>
<h3 id="1-choose-appropriate-frequency"><a class="header" href="#1-choose-appropriate-frequency">1. Choose Appropriate Frequency</a></h3>
<pre><code class="language-cpp">// LED dimming: Use higher frequency to avoid flicker
// Human eye perceives flicker below ~60 Hz
setPWMFrequency(ledPin, 1);  // 31 kHz - no visible flicker

// Motor control: Balance between smoothness and efficiency
// Too high: Increased switching losses
// Too low: Audible noise, torque ripple
// Optimal: 10-25 kHz

// Audio: Must be above hearing range
// Humans hear up to ~20 kHz
// Use 40+ kHz for audio PWM
</code></pre>
<h3 id="2-filter-pwm-for-analog-output"><a class="header" href="#2-filter-pwm-for-analog-output">2. Filter PWM for Analog Output</a></h3>
<pre><code>PWM Pin ─── R ───┬─── Analog Output
                 │
                 C
                 │
                GND

Cutoff Frequency = 1 / (2π × R × C)

Example: R=1kΩ, C=10μF
fc = 1 / (2π × 1000 × 0.00001) ≈ 16 Hz
</code></pre>
<h3 id="3-protect-inductive-loads"><a class="header" href="#3-protect-inductive-loads">3. Protect Inductive Loads</a></h3>
<pre><code class="language-cpp">// Motors and solenoids are inductive
// Add flyback diode across load!

//        Motor
//    ┌────┴────┐
// PWM│         │GND
//    │   ▼─    │
//    └─────────┘
//    Flyback Diode
</code></pre>
<h3 id="4-avoid-pwm-on-critical-pins"><a class="header" href="#4-avoid-pwm-on-critical-pins">4. Avoid PWM on Critical Pins</a></h3>
<pre><code class="language-cpp">// Some Arduino pins share timers
// Changing frequency on one affects others!

// Pins 5 &amp; 6 share Timer 0 (also used by millis/delay!)
// Pins 9 &amp; 10 share Timer 1
// Pins 3 &amp; 11 share Timer 2

// Changing Timer 0 frequency breaks millis() and delay()!
</code></pre>
<h2 id="common-issues-and-debugging-2"><a class="header" href="#common-issues-and-debugging-2">Common Issues and Debugging</a></h2>
<h3 id="problem-led-flickering"><a class="header" href="#problem-led-flickering">Problem: LED Flickering</a></h3>
<p><strong>Causes</strong>: PWM frequency too low
<strong>Solution</strong>: Increase frequency above 60 Hz (ideally 500 Hz+)</p>
<h3 id="problem-motor-whiningbuzzing"><a class="header" href="#problem-motor-whiningbuzzing">Problem: Motor Whining/Buzzing</a></h3>
<p><strong>Causes</strong>: PWM frequency in audible range
<strong>Solution</strong>: Increase frequency to 20+ kHz</p>
<h3 id="problem-servo-jittering"><a class="header" href="#problem-servo-jittering">Problem: Servo Jittering</a></h3>
<p><strong>Causes</strong>: Incorrect pulse width or timing
<strong>Solution</strong>: Use dedicated Servo library, ensure 50 Hz signal</p>
<h3 id="problem-pwm-not-working-after-changing-frequency"><a class="header" href="#problem-pwm-not-working-after-changing-frequency">Problem: PWM Not Working After Changing Frequency</a></h3>
<p><strong>Causes</strong>: Modified Timer 0 which breaks delay() and millis()
<strong>Solution</strong>: Use different timer, or use external library</p>
<h2 id="eli10-explain-like-im-10-2"><a class="header" href="#eli10-explain-like-im-10-2">ELI10 (Explain Like I'm 10)</a></h2>
<p>Imagine you have a light switch that you can flick on and off really, really fast - so fast that your eyes can't see it blinking!</p>
<p><strong>PWM is like that super-fast blinking:</strong></p>
<ul>
<li>If the light is ON for half the time and OFF for half the time, it looks 50% bright</li>
<li>If it's ON for most of the time and OFF for a tiny bit, it looks almost fully bright</li>
<li>If it's ON for only a tiny bit and OFF most of the time, it looks dim</li>
</ul>
<p><strong>This works because</strong>:</p>
<ul>
<li>Your eyes can't see things blinking faster than about 60 times per second</li>
<li>So when we blink the light 500 or 1000 times per second, your brain sees a steady dimmed light!</li>
</ul>
<p><strong>The cool part?</strong></p>
<ul>
<li>We're not actually reducing the voltage (which wastes energy as heat)</li>
<li>We're just turning it on and off really fast (very efficient!)</li>
<li>It's like running at full speed for short bursts vs. walking slowly all the time</li>
</ul>
<p><strong>Duty cycle</strong> is the percentage of time it's ON:</p>
<ul>
<li>100% = always on (full brightness)</li>
<li>50% = on half the time (half brightness)</li>
<li>0% = always off (no light)</li>
</ul>
<p>We use this same trick for controlling motor speeds, speakers, and lots of other things!</p>
<h2 id="further-resources-18"><a class="header" href="#further-resources-18">Further Resources</a></h2>
<ul>
<li><a href="https://docs.arduino.cc/learn/microcontrollers/analog-output">Arduino PWM Guide</a></li>
<li><a href="https://www.arduino.cc/en/Tutorial/SecretsOfArduinoPWM">Secrets of Arduino PWM</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/ledc.html">ESP32 LEDC Documentation</a></li>
<li><a href="https://en.wikipedia.org/wiki/Pulse-width_modulation">PWM Wikipedia</a></li>
<li><a href="https://www.ti.com/lit/an/slva505/slva505.pdf">Motor Control with PWM</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="adc-analog-to-digital-converter-1"><a class="header" href="#adc-analog-to-digital-converter-1">ADC (Analog-to-Digital Converter)</a></h1>
<h2 id="overview-38"><a class="header" href="#overview-38">Overview</a></h2>
<p>An Analog-to-Digital Converter (ADC) is a hardware component that converts continuous analog signals (like voltage, temperature, light intensity) into discrete digital values that a microcontroller can process. ADCs are essential for interfacing with the real world, enabling microcontrollers to read sensors and analog inputs.</p>
<h2 id="key-concepts-20"><a class="header" href="#key-concepts-20">Key Concepts</a></h2>
<h3 id="what-is-an-analog-signal"><a class="header" href="#what-is-an-analog-signal">What is an Analog Signal?</a></h3>
<p>An analog signal is a continuous signal that can have any value within a range. Examples:</p>
<ul>
<li>Temperature: 0C to 100C</li>
<li>Light intensity: 0 to maximum brightness</li>
<li>Audio: continuous sound waves</li>
<li>Voltage: 0V to 5V</li>
</ul>
<h3 id="what-is-a-digital-value"><a class="header" href="#what-is-a-digital-value">What is a Digital Value?</a></h3>
<p>A digital value is a discrete number that represents the analog signal:</p>
<ul>
<li>8-bit ADC: 0 to 255 (256 possible values)</li>
<li>10-bit ADC: 0 to 1023 (1024 possible values)</li>
<li>12-bit ADC: 0 to 4095 (4096 possible values)</li>
</ul>
<h3 id="resolution-2"><a class="header" href="#resolution-2">Resolution</a></h3>
<p>Resolution determines how finely an ADC can distinguish between different analog values.</p>
<p><strong>Formula</strong>:</p>
<pre><code>Resolution = Reference Voltage / (2^n - 1)

Where n = number of bits
</code></pre>
<p><strong>Examples</strong>:</p>
<div class="table-wrapper"><table><thead><tr><th>Bits</th><th>Levels</th><th>Resolution (5V ref)</th><th>Resolution (3.3V ref)</th></tr></thead><tbody>
<tr><td>8-bit</td><td>256</td><td>19.6 mV</td><td>12.9 mV</td></tr>
<tr><td>10-bit</td><td>1024</td><td>4.88 mV</td><td>3.22 mV</td></tr>
<tr><td>12-bit</td><td>4096</td><td>1.22 mV</td><td>0.81 mV</td></tr>
<tr><td>16-bit</td><td>65536</td><td>76.3 uV</td><td>50.4 uV</td></tr>
</tbody></table>
</div>
<p><strong>What this means</strong>: A 10-bit ADC with 5V reference can distinguish voltage differences as small as ~4.88mV.</p>
<h3 id="reference-voltage-vref"><a class="header" href="#reference-voltage-vref">Reference Voltage (VREF)</a></h3>
<p>The reference voltage defines the maximum input voltage the ADC can measure.</p>
<ul>
<li><strong>Arduino Uno</strong>: 5V (can use external ref)</li>
<li><strong>ESP32</strong>: 3.3V (default), 1.1V (attenuated)</li>
<li><strong>STM32</strong>: 3.3V (typically)</li>
</ul>
<p><strong>Important</strong>: Never exceed VREF on analog input pins!</p>
<h3 id="sampling-rate"><a class="header" href="#sampling-rate">Sampling Rate</a></h3>
<p>How many times per second the ADC can take a measurement, measured in:</p>
<ul>
<li><strong>SPS</strong>: Samples Per Second</li>
<li><strong>kSPS</strong>: Thousand samples per second</li>
<li><strong>MSPS</strong>: Million samples per second</li>
</ul>
<p><strong>Examples</strong>:</p>
<ul>
<li>Arduino Uno: ~10 kSPS</li>
<li>ESP32: ~100 kSPS</li>
<li>STM32F4: Up to 2.4 MSPS</li>
<li>External ADC (ADS1115): 860 SPS max</li>
</ul>
<h2 id="how-it-works-4"><a class="header" href="#how-it-works-4">How It Works</a></h2>
<h3 id="conversion-process"><a class="header" href="#conversion-process">Conversion Process</a></h3>
<ol>
<li><strong>Sample</strong>: Capture the analog voltage at a specific moment</li>
<li><strong>Hold</strong>: Maintain that voltage level during conversion</li>
<li><strong>Quantize</strong>: Divide the voltage range into discrete levels</li>
<li><strong>Encode</strong>: Convert to a binary number</li>
</ol>
<pre><code>Analog Input (2.5V) -&gt; ADC -&gt; Digital Output (512 for 10-bit at 5V ref)

Calculation: 2.5V / 5V * 1023 = 511.5 ~ 512
</code></pre>
<h3 id="conversion-formula"><a class="header" href="#conversion-formula">Conversion Formula</a></h3>
<pre><code>Digital Value = (Analog Voltage / Reference Voltage) * (2^n - 1)

Analog Voltage = (Digital Value / (2^n - 1)) * Reference Voltage
</code></pre>
<h2 id="code-examples-5"><a class="header" href="#code-examples-5">Code Examples</a></h2>
<h3 id="arduino-avr-adc"><a class="header" href="#arduino-avr-adc">Arduino (AVR) ADC</a></h3>
<pre><code class="language-cpp">// Simple analog read
const int sensorPin = A0;

void setup() {
  Serial.begin(9600);

  // Optional: Set analog reference
  // analogReference(DEFAULT);  // 5V on Uno
  // analogReference(INTERNAL); // 1.1V internal reference
  // analogReference(EXTERNAL); // External AREF pin
}

void loop() {
  // Read analog value (0-1023)
  int rawValue = analogRead(sensorPin);

  // Convert to voltage
  float voltage = rawValue * (5.0 / 1023.0);

  Serial.print("Raw: ");
  Serial.print(rawValue);
  Serial.print(" | Voltage: ");
  Serial.print(voltage);
  Serial.println(" V");

  delay(500);
}

// Reading multiple analog pins
void readMultipleSensors() {
  int sensors[] = {A0, A1, A2, A3};

  for (int i = 0; i &lt; 4; i++) {
    int value = analogRead(sensors[i]);
    float voltage = value * (5.0 / 1023.0);
    Serial.print("Sensor ");
    Serial.print(i);
    Serial.print(": ");
    Serial.println(voltage);
  }
}
</code></pre>
<h3 id="esp32-adc"><a class="header" href="#esp32-adc">ESP32 ADC</a></h3>
<pre><code class="language-cpp">// ESP32 has two ADC units with multiple channels
const int analogPin = 34;  // ADC1_CH6 (GPIO 34)

void setup() {
  Serial.begin(115200);

  // Set ADC resolution (9-12 bits)
  analogReadResolution(12);  // Default is 12 bits (0-4095)

  // Set ADC attenuation (changes measurement range)
  // ADC_0db: 0-1.1V
  // ADC_2_5db: 0-1.5V
  // ADC_6db: 0-2.2V (default)
  // ADC_11db: 0-3.3V
  analogSetAttenuation(ADC_11db);

  // Or set per pin
  analogSetPinAttenuation(analogPin, ADC_11db);
}

void loop() {
  int rawValue = analogRead(analogPin);

  // Convert to voltage (with 11db attenuation, 0-3.3V range)
  // Note: ESP32 ADC is non-linear, consider calibration
  float voltage = rawValue * (3.3 / 4095.0);

  Serial.print("Raw: ");
  Serial.print(rawValue);
  Serial.print(" | Voltage: ");
  Serial.println(voltage);

  delay(100);
}

// Better: Use calibrated read
#include "esp_adc_cal.h"

esp_adc_cal_characteristics_t adc_chars;

void setupCalibrated() {
  esp_adc_cal_characterize(ADC_UNIT_1, ADC_ATTEN_DB_11,
                           ADC_WIDTH_BIT_12, 1100, &amp;adc_chars);
}

void loopCalibrated() {
  uint32_t voltage = analogRead(analogPin);
  voltage = esp_adc_cal_raw_to_voltage(voltage, &amp;adc_chars);

  Serial.print("Calibrated voltage: ");
  Serial.print(voltage);
  Serial.println(" mV");
}
</code></pre>
<h3 id="stm32-hal-adc"><a class="header" href="#stm32-hal-adc">STM32 HAL ADC</a></h3>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

ADC_HandleTypeDef hadc1;

void ADC_Init(void) {
    ADC_ChannelConfTypeDef sConfig = {0};

    // Configure ADC
    hadc1.Instance = ADC1;
    hadc1.Init.ClockPrescaler = ADC_CLOCK_SYNC_PCLK_DIV4;
    hadc1.Init.Resolution = ADC_RESOLUTION_12B;
    hadc1.Init.ScanConvMode = DISABLE;
    hadc1.Init.ContinuousConvMode = DISABLE;
    hadc1.Init.DiscontinuousConvMode = DISABLE;
    hadc1.Init.ExternalTrigConv = ADC_SOFTWARE_START;
    hadc1.Init.DataAlign = ADC_DATAALIGN_RIGHT;
    hadc1.Init.NbrOfConversion = 1;
    HAL_ADC_Init(&amp;hadc1);

    // Configure channel
    sConfig.Channel = ADC_CHANNEL_0;
    sConfig.Rank = 1;
    sConfig.SamplingTime = ADC_SAMPLETIME_84CYCLES;
    HAL_ADC_ConfigChannel(&amp;hadc1, &amp;sConfig);
}

uint16_t ADC_Read(uint32_t channel) {
    ADC_ChannelConfTypeDef sConfig = {0};

    sConfig.Channel = channel;
    sConfig.Rank = 1;
    HAL_ADC_ConfigChannel(&amp;hadc1, &amp;sConfig);

    // Start conversion
    HAL_ADC_Start(&amp;hadc1);

    // Wait for conversion to complete
    HAL_ADC_PollForConversion(&amp;hadc1, 100);

    // Read value
    uint16_t value = HAL_ADC_GetValue(&amp;hadc1);

    return value;
}

float ADC_ReadVoltage(uint32_t channel) {
    uint16_t raw = ADC_Read(channel);
    // Convert to voltage (assuming 3.3V reference)
    float voltage = (raw * 3.3f) / 4095.0f;
    return voltage;
}

// DMA-based continuous conversion
uint16_t adc_buffer[16];

void ADC_Start_DMA(void) {
    HAL_ADC_Start_DMA(&amp;hadc1, (uint32_t*)adc_buffer, 16);
}
</code></pre>
<h3 id="external-adc-ads1115-via-i2c"><a class="header" href="#external-adc-ads1115-via-i2c">External ADC (ADS1115) via I2C</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;Adafruit_ADS1X15.h&gt;

Adafruit_ADS1115 ads;  // 16-bit ADC

void setup() {
  Serial.begin(115200);

  // Initialize ADS1115
  if (!ads.begin()) {
    Serial.println("Failed to initialize ADS1115!");
    while (1);
  }

  // Set gain
  // ads.setGain(GAIN_TWOTHIRDS);  // +/-6.144V range
  // ads.setGain(GAIN_ONE);        // +/-4.096V range
  ads.setGain(GAIN_TWO);           // +/-2.048V range (default)
  // ads.setGain(GAIN_FOUR);       // +/-1.024V range
  // ads.setGain(GAIN_EIGHT);      // +/-0.512V range
  // ads.setGain(GAIN_SIXTEEN);    // +/-0.256V range
}

void loop() {
  // Read single-ended from channel 0
  int16_t adc0 = ads.readADC_SingleEnded(0);
  float voltage0 = ads.computeVolts(adc0);

  // Read differential (channel 0 - channel 1)
  int16_t diff01 = ads.readADC_Differential_0_1();

  Serial.print("ADC0: ");
  Serial.print(adc0);
  Serial.print(" | Voltage: ");
  Serial.println(voltage0);

  delay(100);
}
</code></pre>
<h2 id="common-applications-1"><a class="header" href="#common-applications-1">Common Applications</a></h2>
<h3 id="1-temperature-sensors-thermistor"><a class="header" href="#1-temperature-sensors-thermistor">1. Temperature Sensors (Thermistor)</a></h3>
<pre><code class="language-cpp">const int thermistorPin = A0;
const float BETA = 3950;  // Beta coefficient
const float R0 = 10000;   // Resistance at 25C
const float T0 = 298.15;  // 25C in Kelvin

float readTemperature() {
  int raw = analogRead(thermistorPin);

  // Convert to resistance
  float R = 10000.0 * (1023.0 / raw - 1.0);

  // Steinhart-Hart equation
  float T = 1.0 / (1.0/T0 + (1.0/BETA) * log(R/R0));

  return T - 273.15;  // Convert to Celsius
}
</code></pre>
<h3 id="2-light-sensor-ldrphotoresistor"><a class="header" href="#2-light-sensor-ldrphotoresistor">2. Light Sensor (LDR/Photoresistor)</a></h3>
<pre><code class="language-cpp">const int ldrPin = A1;

int readLightLevel() {
  int rawValue = analogRead(ldrPin);

  // Convert to percentage
  int lightPercent = map(rawValue, 0, 1023, 0, 100);

  return lightPercent;
}
</code></pre>
<h3 id="3-potentiometer-volume-control"><a class="header" href="#3-potentiometer-volume-control">3. Potentiometer (Volume Control)</a></h3>
<pre><code class="language-cpp">const int potPin = A2;
const int ledPin = 9;  // PWM pin

void setup() {
  pinMode(ledPin, OUTPUT);
}

void loop() {
  int potValue = analogRead(potPin);

  // Map to PWM range (0-255)
  int brightness = map(potValue, 0, 1023, 0, 255);

  analogWrite(ledPin, brightness);
}
</code></pre>
<h3 id="4-battery-voltage-monitoring"><a class="header" href="#4-battery-voltage-monitoring">4. Battery Voltage Monitoring</a></h3>
<pre><code class="language-cpp">const int batteryPin = A3;
const float voltageDividerRatio = 2.0;  // R1=R2=10k

float readBatteryVoltage() {
  int raw = analogRead(batteryPin);

  // Convert to actual voltage
  float adcVoltage = raw * (5.0 / 1023.0);

  // Account for voltage divider
  float batteryVoltage = adcVoltage * voltageDividerRatio;

  return batteryVoltage;
}

void checkBattery() {
  float voltage = readBatteryVoltage();

  if (voltage &lt; 3.3) {
    Serial.println("WARNING: Low battery!");
  }
}
</code></pre>
<h3 id="5-current-sensing-acs712"><a class="header" href="#5-current-sensing-acs712">5. Current Sensing (ACS712)</a></h3>
<pre><code class="language-cpp">const int currentSensorPin = A4;
const float sensitivity = 0.185;  // 185mV/A for ACS712-05B

float readCurrent() {
  int raw = analogRead(currentSensorPin);
  float voltage = raw * (5.0 / 1023.0);

  // Zero point is 2.5V (Vcc/2)
  float offsetVoltage = voltage - 2.5;

  // Calculate current
  float current = offsetVoltage / sensitivity;

  return current;
}
</code></pre>
<h2 id="best-practices-35"><a class="header" href="#best-practices-35">Best Practices</a></h2>
<h3 id="1-averaging-for-stability"><a class="header" href="#1-averaging-for-stability">1. Averaging for Stability</a></h3>
<pre><code class="language-cpp">float readAverageAnalog(int pin, int samples = 10) {
  long sum = 0;

  for (int i = 0; i &lt; samples; i++) {
    sum += analogRead(pin);
    delay(10);  // Small delay between reads
  }

  return (float)sum / samples;
}
</code></pre>
<h3 id="2-handling-noise"><a class="header" href="#2-handling-noise">2. Handling Noise</a></h3>
<pre><code class="language-cpp">// Software low-pass filter (running average)
const int numReadings = 10;
int readings[numReadings];
int readIndex = 0;
int total = 0;

int smoothedRead(int pin) {
  total -= readings[readIndex];
  readings[readIndex] = analogRead(pin);
  total += readings[readIndex];
  readIndex = (readIndex + 1) % numReadings;

  return total / numReadings;
}
</code></pre>
<h3 id="3-proper-voltage-divider"><a class="header" href="#3-proper-voltage-divider">3. Proper Voltage Divider</a></h3>
<pre><code class="language-cpp">// To measure higher voltages, use voltage divider
// Vin     R1  ,    R2     GND
//
//          ADC Pin

// Example: Measure 12V with 5V ADC
// R1 = 10k ohm, R2 = 7.5k ohm
// Vout = Vin * (R2 / (R1 + R2))
// Vout = 12V * (7.5 / 17.5) = 5.14V (slightly over, use 6.8k ohm for R2)
</code></pre>
<h3 id="4-calibration"><a class="header" href="#4-calibration">4. Calibration</a></h3>
<pre><code class="language-cpp">struct CalibrationData {
  float slope;
  float offset;
};

CalibrationData calibrate(int pin, float knownVoltage) {
  int rawValue = analogRead(pin);

  CalibrationData cal;
  cal.slope = knownVoltage / rawValue;
  cal.offset = 0;  // Adjust if needed

  return cal;
}

float calibratedRead(int pin, CalibrationData cal) {
  int raw = analogRead(pin);
  return (raw * cal.slope) + cal.offset;
}
</code></pre>
<h2 id="common-issues-and-debugging-3"><a class="header" href="#common-issues-and-debugging-3">Common Issues and Debugging</a></h2>
<h3 id="problem-noisy-readings"><a class="header" href="#problem-noisy-readings">Problem: Noisy Readings</a></h3>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Add 0.1uF capacitor between analog pin and ground</li>
<li>Use averaging/filtering in software</li>
<li>Keep analog wires short and away from digital signals</li>
<li>Use twisted pair cables for long runs</li>
<li>Add ferrite beads on long cables</li>
</ul>
<h3 id="problem-incorrect-voltage-readings"><a class="header" href="#problem-incorrect-voltage-readings">Problem: Incorrect Voltage Readings</a></h3>
<p><strong>Check</strong>:</p>
<ul>
<li>Verify reference voltage is correct</li>
<li>Check voltage divider calculations</li>
<li>Ensure input doesn't exceed VREF</li>
<li>Verify ground connection</li>
</ul>
<h3 id="problem-slow-response"><a class="header" href="#problem-slow-response">Problem: Slow Response</a></h3>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Reduce averaging samples</li>
<li>Check ADC clock/prescaler settings</li>
<li>Use faster ADC if needed (external)</li>
<li>Enable DMA for continuous sampling</li>
</ul>
<h2 id="eli10-explain-like-im-10-3"><a class="header" href="#eli10-explain-like-im-10-3">ELI10 (Explain Like I'm 10)</a></h2>
<p>Imagine you have a thermometer that shows any temperature between 0C and 100C, but you can only report whole numbers:</p>
<ul>
<li>If the real temperature is 23.7C, you might say "24C"</li>
<li>If it's 23.2C, you might say "23C"</li>
</ul>
<p>An ADC does the same thing! It takes a smooth, continuous voltage (like the temperature) and converts it to a number your microcontroller can understand.</p>
<p><strong>Resolution</strong> is like how many different numbers you can say:</p>
<ul>
<li>8-bit ADC: Can say 256 different numbers (0-255)</li>
<li>10-bit ADC: Can say 1024 different numbers (0-1023)</li>
<li>12-bit ADC: Can say 4096 different numbers (0-4095)</li>
</ul>
<p>More bits = more precise measurements = seeing smaller differences!</p>
<h2 id="further-resources-19"><a class="header" href="#further-resources-19">Further Resources</a></h2>
<ul>
<li><a href="https://learn.sparkfun.com/tutorials/analog-to-digital-conversion">ADC Tutorial - SparkFun</a></li>
<li><a href="https://www.arduino.cc/reference/en/language/functions/analog-io/analogread/">Arduino analogRead() Reference</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/adc.html">ESP32 ADC Documentation</a></li>
<li><a href="https://www.microchip.com/en-us/application-notes/an2538">ADC Noise Reduction Techniques - AVR</a></li>
<li><a href="https://www.ti.com/lit/an/slaa013/slaa013.pdf">Understanding ADC Parameters</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dac-digital-to-analog-converter"><a class="header" href="#dac-digital-to-analog-converter">DAC (Digital-to-Analog Converter)</a></h1>
<h2 id="overview-39"><a class="header" href="#overview-39">Overview</a></h2>
<p>A Digital-to-Analog Converter (DAC) does the opposite of an ADC - it converts discrete digital values from a microcontroller into continuous analog voltage signals. DACs are essential for generating analog outputs like audio signals, control voltages, and waveforms.</p>
<h2 id="key-concepts-21"><a class="header" href="#key-concepts-21">Key Concepts</a></h2>
<h3 id="what-does-a-dac-do"><a class="header" href="#what-does-a-dac-do">What Does a DAC Do?</a></h3>
<p>A DAC takes a digital number and outputs a corresponding analog voltage:</p>
<pre><code>Digital Input (512) -&gt; DAC -&gt; Analog Output (2.5V)

For 10-bit DAC with 5V reference:
Voltage = (512 / 1023) * 5V = 2.5V
</code></pre>
<h3 id="resolution-3"><a class="header" href="#resolution-3">Resolution</a></h3>
<p>Just like ADCs, DAC resolution determines output precision:</p>
<div class="table-wrapper"><table><thead><tr><th>Bits</th><th>Levels</th><th>Voltage Step (5V)</th><th>Voltage Step (3.3V)</th></tr></thead><tbody>
<tr><td>8-bit</td><td>256</td><td>19.6 mV</td><td>12.9 mV</td></tr>
<tr><td>10-bit</td><td>1024</td><td>4.88 mV</td><td>3.22 mV</td></tr>
<tr><td>12-bit</td><td>4096</td><td>1.22 mV</td><td>0.81 mV</td></tr>
<tr><td>16-bit</td><td>65536</td><td>76.3 uV</td><td>50.4 uV</td></tr>
</tbody></table>
</div>
<h3 id="dac-vs-pwm"><a class="header" href="#dac-vs-pwm">DAC vs PWM</a></h3>
<p>Many microcontrollers don't have true DAC outputs, but can simulate analog using PWM:</p>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>True DAC</th><th>PWM</th></tr></thead><tbody>
<tr><td><strong>Output</strong></td><td>True analog voltage</td><td>Digital pulses</td></tr>
<tr><td><strong>Smoothness</strong></td><td>Smooth DC voltage</td><td>Requires filtering</td></tr>
<tr><td><strong>Speed</strong></td><td>Fast settling</td><td>Limited by PWM frequency</td></tr>
<tr><td><strong>Filtering</strong></td><td>Not needed</td><td>Low-pass filter needed</td></tr>
<tr><td><strong>Complexity</strong></td><td>Hardware DAC required</td><td>Any digital pin</td></tr>
<tr><td><strong>Use Cases</strong></td><td>Audio, precise control</td><td>LED dimming, motor speed</td></tr>
</tbody></table>
</div>
<h2 id="how-it-works-5"><a class="header" href="#how-it-works-5">How It Works</a></h2>
<h3 id="conversion-formula-1"><a class="header" href="#conversion-formula-1">Conversion Formula</a></h3>
<pre><code>Output Voltage = (Digital Value / (2^n - 1)) * Reference Voltage

Where:
- n = number of bits
- Digital Value = input code (0 to 2^n - 1)
- Reference Voltage = max output voltage
</code></pre>
<h3 id="common-dac-architectures"><a class="header" href="#common-dac-architectures">Common DAC Architectures</a></h3>
<ol>
<li><strong>R-2R Ladder</strong>: Uses resistor network (simple, cheap)</li>
<li><strong>Binary Weighted</strong>: Uses weighted current sources</li>
<li><strong>Delta-Sigma</strong>: High resolution, used in audio</li>
<li><strong>String</strong>: Resistor divider network</li>
</ol>
<h2 id="code-examples-6"><a class="header" href="#code-examples-6">Code Examples</a></h2>
<h3 id="arduino-due-built-in-12-bit-dac"><a class="header" href="#arduino-due-built-in-12-bit-dac">Arduino Due (Built-in 12-bit DAC)</a></h3>
<pre><code class="language-cpp">// Arduino Due has two DAC pins: DAC0 and DAC1

void setup() {
  analogWriteResolution(12);  // Set DAC resolution to 12 bits (0-4095)
}

void loop() {
  // Output 1.65V on DAC0 (half of 3.3V reference)
  analogWrite(DAC0, 2048);  // 2048 / 4095 * 3.3V = 1.65V

  delay(1000);

  // Ramp voltage from 0V to 3.3V
  for (int value = 0; value &lt; 4096; value++) {
    analogWrite(DAC0, value);
    delayMicroseconds(100);
  }
}

// Generate sine wave
void generateSineWave() {
  const int samples = 100;
  float frequency = 1000;  // 1 kHz

  for (int i = 0; i &lt; samples; i++) {
    float angle = (2.0 * PI * i) / samples;
    int value = (sin(angle) + 1.0) * 2047.5;  // Scale to 0-4095
    analogWrite(DAC0, value);

    delayMicroseconds(1000000 / (frequency * samples));
  }
}
</code></pre>
<h3 id="esp32-built-in-8-bit-dac"><a class="header" href="#esp32-built-in-8-bit-dac">ESP32 (Built-in 8-bit DAC)</a></h3>
<pre><code class="language-cpp">// ESP32 has two DAC channels: GPIO25 (DAC1) and GPIO26 (DAC2)

void setup() {
  // No special initialization needed for DAC
}

void loop() {
  // Output voltage (0-255 for 8-bit)
  // 0 = 0V, 255 = 3.3V
  dacWrite(25, 128);  // Output ~1.65V on GPIO25

  delay(1000);
}

// Generate sawtooth wave
void generateSawtoothWave() {
  for (int value = 0; value &lt; 256; value++) {
    dacWrite(25, value);
    delayMicroseconds(10);
  }
}

// Generate triangle wave
void generateTriangleWave() {
  // Rising edge
  for (int value = 0; value &lt; 256; value++) {
    dacWrite(25, value);
    delayMicroseconds(10);
  }

  // Falling edge
  for (int value = 255; value &gt;= 0; value--) {
    dacWrite(25, value);
    delayMicroseconds(10);
  }
}

// Generate square wave
void generateSquareWave() {
  dacWrite(25, 255);  // HIGH
  delay(1);
  dacWrite(25, 0);    // LOW
  delay(1);
}

// Audio tone generation
void playTone(int frequency, int duration) {
  const int samples = 32;
  byte sineWave[samples];

  // Pre-calculate sine wave
  for (int i = 0; i &lt; samples; i++) {
    sineWave[i] = (sin(2.0 * PI * i / samples) + 1.0) * 127.5;
  }

  unsigned long startTime = millis();
  int sampleDelay = 1000000 / (frequency * samples);

  while (millis() - startTime &lt; duration) {
    for (int i = 0; i &lt; samples; i++) {
      dacWrite(25, sineWave[i]);
      delayMicroseconds(sampleDelay);
    }
  }
}
</code></pre>
<h3 id="stm32-hal-dac"><a class="header" href="#stm32-hal-dac">STM32 HAL DAC</a></h3>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

DAC_HandleTypeDef hdac;

void DAC_Init(void) {
    DAC_ChannelConfTypeDef sConfig = {0};

    // Initialize DAC
    hdac.Instance = DAC;
    HAL_DAC_Init(&amp;hdac);

    // Configure DAC channel 1
    sConfig.DAC_Trigger = DAC_TRIGGER_NONE;
    sConfig.DAC_OutputBuffer = DAC_OUTPUTBUFFER_ENABLE;
    HAL_DAC_ConfigChannel(&amp;hdac, &amp;sConfig, DAC_CHANNEL_1);

    // Start DAC
    HAL_DAC_Start(&amp;hdac, DAC_CHANNEL_1);
}

void DAC_SetVoltage(float voltage) {
    // Convert voltage to 12-bit value
    // Assuming 3.3V reference
    uint32_t value = (uint32_t)((voltage / 3.3f) * 4095.0f);

    if (value &gt; 4095) value = 4095;

    HAL_DAC_SetValue(&amp;hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R, value);
}

void DAC_SetValue(uint16_t value) {
    HAL_DAC_SetValue(&amp;hdac, DAC_CHANNEL_1, DAC_ALIGN_12B_R, value);
}

// DMA-based waveform generation
uint16_t sineWave[100];

void DAC_GenerateSineWave_DMA(void) {
    // Pre-calculate sine wave
    for (int i = 0; i &lt; 100; i++) {
        sineWave[i] = (uint16_t)((sin(2.0 * PI * i / 100.0) + 1.0) * 2047.5);
    }

    // Start DAC with DMA
    HAL_DAC_Start_DMA(&amp;hdac, DAC_CHANNEL_1, (uint32_t*)sineWave, 100,
                      DAC_ALIGN_12B_R);

    // Configure timer to trigger DAC at specific rate
    // This enables continuous waveform output
}
</code></pre>
<h3 id="external-dac-mcp4725-via-i2c"><a class="header" href="#external-dac-mcp4725-via-i2c">External DAC (MCP4725) via I2C</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;Adafruit_MCP4725.h&gt;

Adafruit_MCP4725 dac;  // 12-bit DAC

void setup() {
  Serial.begin(115200);

  // Initialize MCP4725 (default address 0x62)
  if (!dac.begin(0x62)) {
    Serial.println("Failed to initialize MCP4725!");
    while (1);
  }

  Serial.println("MCP4725 initialized!");
}

void loop() {
  // Set voltage (0-4095 for 12-bit)
  // Vout = (value / 4095) * Vdd
  dac.setVoltage(2048, false);  // Output ~1.65V (Vdd/2)

  delay(1000);
}

// Ramp voltage smoothly
void rampVoltage(uint16_t start, uint16_t end, uint16_t steps) {
  int16_t increment = (end - start) / steps;

  for (uint16_t i = 0; i &lt; steps; i++) {
    uint16_t value = start + (i * increment);
    dac.setVoltage(value, false);
    delay(10);
  }
}

// Generate precise voltage
void setVoltage(float voltage) {
  // Assuming 5V Vdd
  uint16_t value = (uint16_t)((voltage / 5.0) * 4095.0);
  dac.setVoltage(value, false);
}

// Store value in EEPROM (survives power cycle)
void saveVoltage(uint16_t value) {
  dac.setVoltage(value, true);  // true = write to EEPROM
}
</code></pre>
<h3 id="pwm-as-pseudo-dac-arduino-uno"><a class="header" href="#pwm-as-pseudo-dac-arduino-uno">PWM as Pseudo-DAC (Arduino Uno)</a></h3>
<pre><code class="language-cpp">// Arduino Uno doesn't have true DAC, use PWM with filtering

const int pwmPin = 9;  // Any PWM pin

void setup() {
  pinMode(pwmPin, OUTPUT);

  // Increase PWM frequency for smoother output
  // Default: 490 Hz for pins 5,6 and 980 Hz for others
  // Setting for pin 9 and 10:
  TCCR1B = TCCR1B &amp; 0b11111000 | 0x01;  // 31.25 kHz
}

void loop() {
  // Output 2.5V (50% duty cycle with 5V Vdd)
  analogWrite(pwmPin, 128);  // 0-255 range

  delay(1000);
}

// Hardware low-pass filter (required for PWM DAC):
// PWM Pin ----1kohm----, Output
//                      |
//                    10uF
//                      |
//                     GND
//
// Cutoff frequency = 1 / (2*pi * R * C) = ~16 Hz

// Convert voltage to PWM value
void setPWMVoltage(float voltage) {
  int pwmValue = (int)((voltage / 5.0) * 255.0);
  analogWrite(pwmPin, constrain(pwmValue, 0, 255));
}
</code></pre>
<h2 id="common-applications-2"><a class="header" href="#common-applications-2">Common Applications</a></h2>
<h3 id="1-audio-output"><a class="header" href="#1-audio-output">1. Audio Output</a></h3>
<pre><code class="language-cpp">// Simple audio playback
const byte audioSample[] = {128, 150, 172, 192, 209, ...};
const int sampleRate = 8000;  // 8 kHz

void playAudio() {
  for (int i = 0; i &lt; sizeof(audioSample); i++) {
    dacWrite(25, audioSample[i]);
    delayMicroseconds(1000000 / sampleRate);
  }
}
</code></pre>
<h3 id="2-voltage-reference-generation"><a class="header" href="#2-voltage-reference-generation">2. Voltage Reference Generation</a></h3>
<pre><code class="language-cpp">// Generate precise reference voltage
void setReferenceVoltage(float voltage) {
  // Using 12-bit DAC with 3.3V reference
  uint16_t value = (uint16_t)((voltage / 3.3) * 4095);
  analogWrite(DAC0, value);
}

// Example: Generate 1.024V reference
void setup() {
  analogWriteResolution(12);
  setReferenceVoltage(1.024);  // Output constant 1.024V
}
</code></pre>
<h3 id="3-motor-speed-control"><a class="header" href="#3-motor-speed-control">3. Motor Speed Control</a></h3>
<pre><code class="language-cpp">// Control motor speed with voltage
void setMotorSpeed(int speedPercent) {
  // 0% = 0V, 100% = 3.3V
  int dacValue = map(speedPercent, 0, 100, 0, 255);
  dacWrite(25, dacValue);
}
</code></pre>
<h3 id="4-led-brightness-true-analog"><a class="header" href="#4-led-brightness-true-analog">4. LED Brightness (True Analog)</a></h3>
<pre><code class="language-cpp">// Unlike PWM, DAC gives true DC voltage
void setLEDBrightness(int percent) {
  int dacValue = map(percent, 0, 100, 0, 255);
  dacWrite(25, dacValue);
  // No flickering or PWM noise!
}
</code></pre>
<h3 id="5-signal-generation-for-testing"><a class="header" href="#5-signal-generation-for-testing">5. Signal Generation for Testing</a></h3>
<pre><code class="language-cpp">// Generate test signals
void generateDCOffset(float voltage) {
  uint16_t value = (uint16_t)((voltage / 3.3) * 4095);
  analogWrite(DAC0, value);
}

// Programmable voltage divider
void setProgrammableVoltage(float targetVoltage) {
  if (targetVoltage &lt;= 3.3) {
    generateDCOffset(targetVoltage);
  }
}
</code></pre>
<h2 id="waveform-generation"><a class="header" href="#waveform-generation">Waveform Generation</a></h2>
<h3 id="pre-calculated-waveform-tables"><a class="header" href="#pre-calculated-waveform-tables">Pre-calculated Waveform Tables</a></h3>
<pre><code class="language-cpp">// Sine wave lookup table (256 samples)
const uint8_t sineTable[256] PROGMEM = {
  127, 130, 133, 136, 139, 143, 146, 149,
  152, 155, 158, 161, 164, 167, 170, 173,
  // ... full 256 values
};

void generateSineFromTable(int frequency) {
  int delayTime = 1000000 / (frequency * 256);

  for (int i = 0; i &lt; 256; i++) {
    uint8_t value = pgm_read_byte(&amp;sineTable[i]);
    dacWrite(25, value);
    delayMicroseconds(delayTime);
  }
}
</code></pre>
<h2 id="best-practices-36"><a class="header" href="#best-practices-36">Best Practices</a></h2>
<h3 id="1-output-filtering"><a class="header" href="#1-output-filtering">1. Output Filtering</a></h3>
<pre><code>For cleaner output, add RC low-pass filter:

DAC Out ----100ohm----, Output
                       |
                     100nF
                       |
                      GND
</code></pre>
<h3 id="2-buffering"><a class="header" href="#2-buffering">2. Buffering</a></h3>
<pre><code>For driving loads, add op-amp buffer:

DAC Out ----, Op-Amp ---- Output
            |        |
            +--------+
              Feedback
</code></pre>
<h3 id="3-settling-time"><a class="header" href="#3-settling-time">3. Settling Time</a></h3>
<pre><code class="language-cpp">// Allow settling time after DAC update
void setDACWithSettling(uint16_t value) {
  analogWrite(DAC0, value);
  delayMicroseconds(10);  // Wait for output to settle
}
</code></pre>
<h3 id="4-reference-voltage-stability"><a class="header" href="#4-reference-voltage-stability">4. Reference Voltage Stability</a></h3>
<pre><code class="language-cpp">// Use external voltage reference for precision
// Internal reference can drift with temperature
</code></pre>
<h2 id="common-issues-and-debugging-4"><a class="header" href="#common-issues-and-debugging-4">Common Issues and Debugging</a></h2>
<h3 id="problem-output-voltage-incorrect"><a class="header" href="#problem-output-voltage-incorrect">Problem: Output Voltage Incorrect</a></h3>
<p><strong>Check</strong>:</p>
<ul>
<li>Verify reference voltage</li>
<li>Check calculation: (value / max) * Vref</li>
<li>Ensure value doesn't exceed maximum</li>
<li>Measure with high-impedance multimeter</li>
</ul>
<h3 id="problem-noisy-output"><a class="header" href="#problem-noisy-output">Problem: Noisy Output</a></h3>
<p><strong>Solutions</strong>:</p>
<ul>
<li>Add output filter capacitor (100nF)</li>
<li>Use separate analog ground</li>
<li>Add decoupling caps near DAC (0.1uF)</li>
<li>Keep output wires short</li>
</ul>
<h3 id="problem-cant-drive-load"><a class="header" href="#problem-cant-drive-load">Problem: Can't Drive Load</a></h3>
<p><strong>Solutions</strong>:</p>
<ul>
<li>DAC outputs have limited current capability (~20mA typical)</li>
<li>Add op-amp buffer for higher current</li>
<li>Use darlington transistor for heavy loads</li>
</ul>
<h3 id="problem-distorted-waveforms"><a class="header" href="#problem-distorted-waveforms">Problem: Distorted Waveforms</a></h3>
<p><strong>Check</strong>:</p>
<ul>
<li>Update rate too slow for frequency</li>
<li>Insufficient sample resolution</li>
<li>Loading effect (add buffer)</li>
</ul>
<h2 id="dac-specifications-to-consider"><a class="header" href="#dac-specifications-to-consider">DAC Specifications to Consider</a></h2>
<h3 id="1-resolution"><a class="header" href="#1-resolution">1. Resolution</a></h3>
<ul>
<li>More bits = finer voltage control</li>
<li>8-bit usually sufficient for simple control</li>
<li>12-16 bit for audio and precision apps</li>
</ul>
<h3 id="2-settling-time"><a class="header" href="#2-settling-time">2. Settling Time</a></h3>
<ul>
<li>Time to reach final value</li>
<li>Important for high-speed applications</li>
<li>Typical: 1-10 us</li>
</ul>
<h3 id="3-output-range"><a class="header" href="#3-output-range">3. Output Range</a></h3>
<ul>
<li>Single-ended: 0V to Vref</li>
<li>Bipolar: -Vref to +Vref (requires special circuit)</li>
</ul>
<h3 id="4-update-rate"><a class="header" href="#4-update-rate">4. Update Rate</a></h3>
<ul>
<li>How fast can DAC change values</li>
<li>Audio: &gt;40 kSPS</li>
<li>Simple control: &lt;1 kSPS</li>
</ul>
<h2 id="eli10-explain-like-im-10-4"><a class="header" href="#eli10-explain-like-im-10-4">ELI10 (Explain Like I'm 10)</a></h2>
<p>Remember ADC is like a thermometer that converts smooth temperatures to numbers? DAC is the opposite!</p>
<p>Imagine you have a light dimmer switch:</p>
<ul>
<li>Instead of smoothly turning the knob, you can only pick from specific positions</li>
<li>8-bit DAC: You have 256 positions (0-255)</li>
<li>12-bit DAC: You have 4096 positions (way more precise!)</li>
</ul>
<p>The DAC takes your number choice and creates a voltage:</p>
<ul>
<li>Digital number <strong>0</strong> -&gt; 0 volts</li>
<li>Digital number <strong>128</strong> (half) -&gt; 1.65 volts</li>
<li>Digital number <strong>255</strong> (max) -&gt; 3.3 volts</li>
</ul>
<p>It's like having a volume knob that you control with numbers instead of turning it by hand!</p>
<p><strong>PWM vs DAC</strong>: PWM is like flashing a light super fast to make it look dimmer. DAC is like actually turning down the voltage - it's smoother and better for some jobs!</p>
<h2 id="further-resources-20"><a class="header" href="#further-resources-20">Further Resources</a></h2>
<ul>
<li><a href="https://learn.sparkfun.com/tutorials/digital-to-analog-conversion">DAC Tutorial - SparkFun</a></li>
<li><a href="https://www.arduino.cc/reference/en/language/functions/analog-io/analogwrite/">Arduino Due DAC Reference</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/dac.html">ESP32 DAC Documentation</a></li>
<li><a href="https://www.microchip.com/en-us/product/MCP4725">MCP4725 Datasheet</a></li>
<li><a href="https://www.instructables.com/Arduino-Audio-Output/">Audio with Arduino DAC</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="real-time-clock-rtc-modules"><a class="header" href="#real-time-clock-rtc-modules">Real-Time Clock (RTC) Modules</a></h1>
<p>Comprehensive guide to RTC modules including DS1307, DS3231, and implementation examples.</p>
<h2 id="table-of-contents-31"><a class="header" href="#table-of-contents-31">Table of Contents</a></h2>
<ol>
<li><a href="embedded/rtc.html#introduction">Introduction</a></li>
<li><a href="embedded/rtc.html#rtc-basics">RTC Basics</a></li>
<li><a href="embedded/rtc.html#ds1307">DS1307</a></li>
<li><a href="embedded/rtc.html#ds3231">DS3231</a></li>
<li><a href="embedded/rtc.html#pcf8523">PCF8523</a></li>
<li><a href="embedded/rtc.html#arduino-examples">Arduino Examples</a></li>
<li><a href="embedded/rtc.html#stm32-examples">STM32 Examples</a></li>
<li><a href="embedded/rtc.html#avr-bare-metal">AVR Bare Metal</a></li>
</ol>
<h2 id="introduction-18"><a class="header" href="#introduction-18">Introduction</a></h2>
<p>Real-Time Clock (RTC) modules are specialized integrated circuits that keep accurate time even when the main system is powered off. They are essential for data logging, scheduling, timestamps, and time-based applications.</p>
<h3 id="why-use-an-rtc-module"><a class="header" href="#why-use-an-rtc-module">Why Use an RTC Module?</a></h3>
<ul>
<li><strong>Accurate Timekeeping</strong>: Crystal oscillator provides precise time</li>
<li><strong>Low Power</strong>: Runs on backup battery for years</li>
<li><strong>Independent Operation</strong>: Maintains time when main power is off</li>
<li><strong>Calendar Functions</strong>: Handles dates, months, leap years automatically</li>
<li><strong>Alarms</strong>: Can trigger events at specific times</li>
</ul>
<h3 id="popular-rtc-modules"><a class="header" href="#popular-rtc-modules">Popular RTC Modules</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Module</th><th>Crystal</th><th>Accuracy</th><th>Battery</th><th>Temperature</th><th>I2C Addr</th><th>Price</th></tr></thead><tbody>
<tr><td><strong>DS1307</strong></td><td>32.768 kHz</td><td>±2 min/month</td><td>CR2032</td><td>No</td><td>0x68</td><td>$1</td></tr>
<tr><td><strong>DS3231</strong></td><td>32.768 kHz (TCXO)</td><td>±2 min/year</td><td>CR2032</td><td>Yes</td><td>0x68</td><td>$2-5</td></tr>
<tr><td><strong>PCF8523</strong></td><td>32.768 kHz</td><td>±3 min/year</td><td>CR2032</td><td>No</td><td>0x68</td><td>$2</td></tr>
<tr><td><strong>MCP7940N</strong></td><td>32.768 kHz</td><td>±2 min/month</td><td>CR2032</td><td>No</td><td>0x6F</td><td>$1</td></tr>
</tbody></table>
</div>
<h2 id="rtc-basics"><a class="header" href="#rtc-basics">RTC Basics</a></h2>
<h3 id="time-representation"><a class="header" href="#time-representation">Time Representation</a></h3>
<p>RTCs store time in BCD (Binary Coded Decimal) format:</p>
<pre><code>Decimal 59 = 0101 1001 BCD
             5     9

Decimal to BCD: 59 = (5 &lt;&lt; 4) | 9 = 0x59
BCD to Decimal: 0x59 = ((0x59 &gt;&gt; 4) * 10) + (0x59 &amp; 0x0F) = 59
</code></pre>
<h3 id="bcd-conversion-functions"><a class="header" href="#bcd-conversion-functions">BCD Conversion Functions</a></h3>
<pre><code class="language-c">// Decimal to BCD
uint8_t dec_to_bcd(uint8_t val) {
    return ((val / 10) &lt;&lt; 4) | (val % 10);
}

// BCD to Decimal
uint8_t bcd_to_dec(uint8_t val) {
    return ((val &gt;&gt; 4) * 10) + (val &amp; 0x0F);
}
</code></pre>
<h3 id="i2c-communication-1"><a class="header" href="#i2c-communication-1">I2C Communication</a></h3>
<p>All popular RTC modules use I2C interface:</p>
<pre><code>Connections:
  RTC VCC  -&gt; 3.3V or 5V
  RTC GND  -&gt; GND
  RTC SDA  -&gt; SDA (with pull-up resistor)
  RTC SCL  -&gt; SCL (with pull-up resistor)
  
Pull-up resistors: 4.7kΩ typical
</code></pre>
<p><strong>Wiring Diagram:</strong></p>
<pre><code>RTC Module          Microcontroller
    ┌────┐
VCC ┤    ├─ VCC (3.3V/5V)
GND ┤    ├─ GND
SDA ┤    ├─ SDA (with 4.7kΩ pull-up)
SCL ┤    ├─ SCL (with 4.7kΩ pull-up)
    └────┘
</code></pre>
<h2 id="ds1307"><a class="header" href="#ds1307">DS1307</a></h2>
<h3 id="features"><a class="header" href="#features">Features</a></h3>
<ul>
<li><strong>Accuracy</strong>: ±2 minutes per month</li>
<li><strong>Operating Voltage</strong>: 4.5-5.5V (5V recommended)</li>
<li><strong>Battery Backup</strong>: CR2032 (typical)</li>
<li><strong>Interface</strong>: I2C (100 kHz)</li>
<li><strong>Address</strong>: 0x68 (fixed)</li>
<li><strong>RAM</strong>: 56 bytes of non-volatile SRAM</li>
<li><strong>Output</strong>: 1 Hz square wave</li>
</ul>
<h3 id="register-map"><a class="header" href="#register-map">Register Map</a></h3>
<pre><code>Register  Function
0x00      Seconds (00-59)
0x01      Minutes (00-59)
0x02      Hours (00-23 or 01-12)
0x03      Day of week (1-7)
0x04      Date (01-31)
0x05      Month (01-12)
0x06      Year (00-99)
0x07      Control (SQW output)
0x08-0x3F RAM (56 bytes)

Bit Layout:
Seconds:  0  | 10-sec | sec
          CH | 4 2 1  | 8 4 2 1

CH = Clock Halt bit (0 = running, 1 = stopped)
</code></pre>
<h3 id="arduino-ds1307-library"><a class="header" href="#arduino-ds1307-library">Arduino DS1307 Library</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;

RTC_DS1307 rtc;

void setup() {
    Serial.begin(9600);
    Wire.begin();
    
    if (!rtc.begin()) {
        Serial.println("Couldn't find RTC");
        while (1);
    }
    
    if (!rtc.isrunning()) {
        Serial.println("RTC is NOT running, setting time...");
        // Set to compile time
        rtc.adjust(DateTime(F(__DATE__), F(__TIME__)));
        // Or set manually:
        // rtc.adjust(DateTime(2024, 1, 15, 12, 30, 0));
    }
}

void loop() {
    DateTime now = rtc.now();
    
    Serial.print(now.year(), DEC);
    Serial.print('/');
    Serial.print(now.month(), DEC);
    Serial.print('/');
    Serial.print(now.day(), DEC);
    Serial.print(" ");
    Serial.print(now.hour(), DEC);
    Serial.print(':');
    Serial.print(now.minute(), DEC);
    Serial.print(':');
    Serial.println(now.second(), DEC);
    
    delay(1000);
}
</code></pre>
<h3 id="ds1307-bare-metal-arduino"><a class="header" href="#ds1307-bare-metal-arduino">DS1307 Bare Metal (Arduino)</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;

#define DS1307_ADDR 0x68

uint8_t dec_to_bcd(uint8_t val) {
    return ((val / 10) &lt;&lt; 4) | (val % 10);
}

uint8_t bcd_to_dec(uint8_t val) {
    return ((val &gt;&gt; 4) * 10) + (val &amp; 0x0F);
}

void ds1307_set_time(uint8_t hour, uint8_t min, uint8_t sec) {
    Wire.beginTransmission(DS1307_ADDR);
    Wire.write(0x00);  // Start at seconds register
    Wire.write(dec_to_bcd(sec) &amp; 0x7F);  // Clear CH bit
    Wire.write(dec_to_bcd(min));
    Wire.write(dec_to_bcd(hour));
    Wire.endTransmission();
}

void ds1307_set_date(uint8_t day, uint8_t date, uint8_t month, uint8_t year) {
    Wire.beginTransmission(DS1307_ADDR);
    Wire.write(0x03);  // Start at day register
    Wire.write(dec_to_bcd(day));
    Wire.write(dec_to_bcd(date));
    Wire.write(dec_to_bcd(month));
    Wire.write(dec_to_bcd(year));
    Wire.endTransmission();
}

void ds1307_read_time(uint8_t *hour, uint8_t *min, uint8_t *sec) {
    Wire.beginTransmission(DS1307_ADDR);
    Wire.write(0x00);  // Start at seconds register
    Wire.endTransmission();
    
    Wire.requestFrom(DS1307_ADDR, 3);
    *sec = bcd_to_dec(Wire.read() &amp; 0x7F);
    *min = bcd_to_dec(Wire.read());
    *hour = bcd_to_dec(Wire.read());
}

void setup() {
    Serial.begin(9600);
    Wire.begin();
    
    // Set time: 12:30:00
    ds1307_set_time(12, 30, 0);
    
    // Set date: Monday, 15/01/24
    ds1307_set_date(1, 15, 1, 24);
}

void loop() {
    uint8_t hour, min, sec;
    
    ds1307_read_time(&amp;hour, &amp;min, &amp;sec);
    
    Serial.print(hour);
    Serial.print(":");
    Serial.print(min);
    Serial.print(":");
    Serial.println(sec);
    
    delay(1000);
}
</code></pre>
<h2 id="ds3231"><a class="header" href="#ds3231">DS3231</a></h2>
<h3 id="features-1"><a class="header" href="#features-1">Features</a></h3>
<ul>
<li><strong>Accuracy</strong>: ±2 minutes per year (much better than DS1307)</li>
<li><strong>Temperature Compensated</strong>: TCXO provides better accuracy</li>
<li><strong>Operating Voltage</strong>: 2.3-5.5V</li>
<li><strong>Battery Backup</strong>: CR2032</li>
<li><strong>Interface</strong>: I2C (100-400 kHz)</li>
<li><strong>Address</strong>: 0x68 (fixed)</li>
<li><strong>Temperature Sensor</strong>: Built-in (±3°C accuracy)</li>
<li><strong>Alarms</strong>: Two programmable alarms</li>
<li><strong>Square Wave Output</strong>: 1Hz, 1.024kHz, 4.096kHz, 8.192kHz</li>
</ul>
<h3 id="register-map-1"><a class="header" href="#register-map-1">Register Map</a></h3>
<pre><code>Register  Function
0x00      Seconds (00-59)
0x01      Minutes (00-59)
0x02      Hours (00-23 or 01-12)
0x03      Day of week (1-7)
0x04      Date (01-31)
0x05      Month/Century (01-12)
0x06      Year (00-99)
0x07-0x0A Alarm 1
0x0B-0x0D Alarm 2
0x0E      Control
0x0F      Control/Status
0x10      Aging offset
0x11-0x12 Temperature
</code></pre>
<h3 id="arduino-ds3231-library"><a class="header" href="#arduino-ds3231-library">Arduino DS3231 Library</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;

RTC_DS3231 rtc;

void setup() {
    Serial.begin(9600);
    Wire.begin();
    
    if (!rtc.begin()) {
        Serial.println("Couldn't find RTC");
        while (1);
    }
    
    if (rtc.lostPower()) {
        Serial.println("RTC lost power, setting time...");
        rtc.adjust(DateTime(F(__DATE__), F(__TIME__)));
    }
}

void loop() {
    DateTime now = rtc.now();
    
    // Print time
    Serial.print(now.year(), DEC);
    Serial.print('/');
    Serial.print(now.month(), DEC);
    Serial.print('/');
    Serial.print(now.day(), DEC);
    Serial.print(" ");
    Serial.print(now.hour(), DEC);
    Serial.print(':');
    Serial.print(now.minute(), DEC);
    Serial.print(':');
    Serial.print(now.second(), DEC);
    
    // Print temperature
    float temp = rtc.getTemperature();
    Serial.print(" Temp: ");
    Serial.print(temp);
    Serial.println("°C");
    
    delay(1000);
}
</code></pre>
<h3 id="ds3231-alarm-example"><a class="header" href="#ds3231-alarm-example">DS3231 Alarm Example</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;

RTC_DS3231 rtc;

void setup() {
    Serial.begin(9600);
    Wire.begin();
    rtc.begin();
    
    // Set alarm 1 for every day at 12:30:00
    rtc.setAlarm1(DateTime(0, 0, 0, 12, 30, 0), DS3231_A1_Hour);
    
    // Enable alarm interrupt
    rtc.disableAlarm(1);
    rtc.disableAlarm(2);
    rtc.clearAlarm(1);
    rtc.clearAlarm(2);
    rtc.writeSqwPinMode(DS3231_OFF);  // Disable square wave
}

void loop() {
    if (rtc.alarmFired(1)) {
        Serial.println("Alarm 1 triggered!");
        rtc.clearAlarm(1);
    }
    
    delay(1000);
}
</code></pre>
<h3 id="ds3231-temperature-reading"><a class="header" href="#ds3231-temperature-reading">DS3231 Temperature Reading</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;

#define DS3231_ADDR 0x68
#define TEMP_MSB    0x11
#define TEMP_LSB    0x12

float ds3231_get_temperature() {
    Wire.beginTransmission(DS3231_ADDR);
    Wire.write(TEMP_MSB);
    Wire.endTransmission();
    
    Wire.requestFrom(DS3231_ADDR, 2);
    uint8_t msb = Wire.read();
    uint8_t lsb = Wire.read();
    
    // Combine MSB and LSB
    int16_t temp = (msb &lt;&lt; 2) | (lsb &gt;&gt; 6);
    
    // Handle negative temperatures
    if (temp &amp; 0x200) {
        temp |= 0xFC00;
    }
    
    return temp * 0.25;
}

void setup() {
    Serial.begin(9600);
    Wire.begin();
}

void loop() {
    float temperature = ds3231_get_temperature();
    
    Serial.print("Temperature: ");
    Serial.print(temperature);
    Serial.println("°C");
    
    delay(1000);
}
</code></pre>
<h2 id="pcf8523"><a class="header" href="#pcf8523">PCF8523</a></h2>
<h3 id="features-2"><a class="header" href="#features-2">Features</a></h3>
<ul>
<li><strong>Accuracy</strong>: ±3 minutes per year</li>
<li><strong>Operating Voltage</strong>: 1.8-5.5V</li>
<li><strong>Battery Backup</strong>: CR2032</li>
<li><strong>Interface</strong>: I2C (100-400 kHz)</li>
<li><strong>Address</strong>: 0x68 (fixed)</li>
<li><strong>Alarm</strong>: Single programmable alarm</li>
<li><strong>Timer</strong>: Countdown timer</li>
<li><strong>Low Power</strong>: Multiple power-saving modes</li>
</ul>
<h3 id="arduino-pcf8523"><a class="header" href="#arduino-pcf8523">Arduino PCF8523</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;

RTC_PCF8523 rtc;

void setup() {
    Serial.begin(9600);
    Wire.begin();
    
    if (!rtc.begin()) {
        Serial.println("Couldn't find RTC");
        while (1);
    }
    
    if (!rtc.initialized() || rtc.lostPower()) {
        Serial.println("RTC is NOT initialized, setting time...");
        rtc.adjust(DateTime(F(__DATE__), F(__TIME__)));
    }
    
    // Start RTC
    rtc.start();
}

void loop() {
    DateTime now = rtc.now();
    
    Serial.print(now.year(), DEC);
    Serial.print('/');
    Serial.print(now.month(), DEC);
    Serial.print('/');
    Serial.print(now.day(), DEC);
    Serial.print(" ");
    Serial.print(now.hour(), DEC);
    Serial.print(':');
    Serial.print(now.minute(), DEC);
    Serial.print(':');
    Serial.println(now.second(), DEC);
    
    delay(1000);
}
</code></pre>
<h2 id="arduino-examples"><a class="header" href="#arduino-examples">Arduino Examples</a></h2>
<h3 id="data-logger-with-rtc"><a class="header" href="#data-logger-with-rtc">Data Logger with RTC</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;
#include &lt;SD.h&gt;

RTC_DS3231 rtc;
const int CS_PIN = 10;

void setup() {
    Serial.begin(9600);
    Wire.begin();
    
    if (!rtc.begin()) {
        Serial.println("RTC error");
        while (1);
    }
    
    if (!SD.begin(CS_PIN)) {
        Serial.println("SD card error");
        while (1);
    }
}

void loop() {
    DateTime now = rtc.now();
    float temp = rtc.getTemperature();
    
    // Create filename
    char filename[13];
    sprintf(filename, "%04d%02d%02d.txt", 
            now.year(), now.month(), now.day());
    
    // Open file
    File dataFile = SD.open(filename, FILE_WRITE);
    
    if (dataFile) {
        // Write timestamp and data
        dataFile.print(now.hour());
        dataFile.print(":");
        dataFile.print(now.minute());
        dataFile.print(":");
        dataFile.print(now.second());
        dataFile.print(",");
        dataFile.println(temp);
        
        dataFile.close();
        
        Serial.println("Data logged");
    } else {
        Serial.println("Error opening file");
    }
    
    delay(60000);  // Log every minute
}
</code></pre>
<h3 id="digital-clock-display"><a class="header" href="#digital-clock-display">Digital Clock Display</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;
#include &lt;LiquidCrystal.h&gt;

RTC_DS3231 rtc;
LiquidCrystal lcd(12, 11, 5, 4, 3, 2);

void setup() {
    Wire.begin();
    rtc.begin();
    lcd.begin(16, 2);
    
    if (rtc.lostPower()) {
        rtc.adjust(DateTime(F(__DATE__), F(__TIME__)));
    }
}

void loop() {
    DateTime now = rtc.now();
    
    // Display date on line 1
    lcd.setCursor(0, 0);
    lcd.print(now.day(), DEC);
    lcd.print('/');
    lcd.print(now.month(), DEC);
    lcd.print('/');
    lcd.print(now.year(), DEC);
    lcd.print("   ");
    
    // Display time on line 2
    lcd.setCursor(0, 1);
    if (now.hour() &lt; 10) lcd.print('0');
    lcd.print(now.hour(), DEC);
    lcd.print(':');
    if (now.minute() &lt; 10) lcd.print('0');
    lcd.print(now.minute(), DEC);
    lcd.print(':');
    if (now.second() &lt; 10) lcd.print('0');
    lcd.print(now.second(), DEC);
    
    delay(1000);
}
</code></pre>
<h3 id="alarm-clock"><a class="header" href="#alarm-clock">Alarm Clock</a></h3>
<pre><code class="language-cpp">#include &lt;Wire.h&gt;
#include &lt;RTClib.h&gt;

RTC_DS3231 rtc;

const int BUZZER_PIN = 9;
const int BUTTON_PIN = 2;

uint8_t alarm_hour = 7;
uint8_t alarm_minute = 30;
bool alarm_active = false;

void setup() {
    Serial.begin(9600);
    Wire.begin();
    rtc.begin();
    
    pinMode(BUZZER_PIN, OUTPUT);
    pinMode(BUTTON_PIN, INPUT_PULLUP);
    
    // Set alarm
    rtc.setAlarm1(DateTime(0, 0, 0, alarm_hour, alarm_minute, 0), 
                  DS3231_A1_Hour);
}

void loop() {
    DateTime now = rtc.now();
    
    // Check alarm
    if (rtc.alarmFired(1)) {
        alarm_active = true;
        rtc.clearAlarm(1);
    }
    
    // Sound buzzer if alarm active
    if (alarm_active) {
        tone(BUZZER_PIN, 1000, 500);
        delay(1000);
        
        // Check for button press to stop
        if (digitalRead(BUTTON_PIN) == LOW) {
            alarm_active = false;
            noTone(BUZZER_PIN);
        }
    }
    
    // Display time
    Serial.print(now.hour());
    Serial.print(":");
    Serial.print(now.minute());
    Serial.print(":");
    Serial.println(now.second());
    
    delay(1000);
}
</code></pre>
<h2 id="stm32-examples"><a class="header" href="#stm32-examples">STM32 Examples</a></h2>
<h3 id="ds3231-with-stm32-hal"><a class="header" href="#ds3231-with-stm32-hal">DS3231 with STM32 HAL</a></h3>
<pre><code class="language-c">#include "main.h"
#include &lt;stdio.h&gt;

I2C_HandleTypeDef hi2c1;

#define DS3231_ADDR (0x68 &lt;&lt; 1)

uint8_t dec_to_bcd(uint8_t val) {
    return ((val / 10) &lt;&lt; 4) | (val % 10);
}

uint8_t bcd_to_dec(uint8_t val) {
    return ((val &gt;&gt; 4) * 10) + (val &amp; 0x0F);
}

void ds3231_set_time(uint8_t hour, uint8_t min, uint8_t sec) {
    uint8_t data[4];
    data[0] = 0x00;  // Start register
    data[1] = dec_to_bcd(sec);
    data[2] = dec_to_bcd(min);
    data[3] = dec_to_bcd(hour);
    
    HAL_I2C_Master_Transmit(&amp;hi2c1, DS3231_ADDR, data, 4, HAL_MAX_DELAY);
}

void ds3231_read_time(uint8_t *hour, uint8_t *min, uint8_t *sec) {
    uint8_t reg = 0x00;
    uint8_t data[3];
    
    HAL_I2C_Master_Transmit(&amp;hi2c1, DS3231_ADDR, &amp;reg, 1, HAL_MAX_DELAY);
    HAL_I2C_Master_Receive(&amp;hi2c1, DS3231_ADDR, data, 3, HAL_MAX_DELAY);
    
    *sec = bcd_to_dec(data[0]);
    *min = bcd_to_dec(data[1]);
    *hour = bcd_to_dec(data[2]);
}

float ds3231_get_temperature(void) {
    uint8_t reg = 0x11;
    uint8_t data[2];
    
    HAL_I2C_Master_Transmit(&amp;hi2c1, DS3231_ADDR, &amp;reg, 1, HAL_MAX_DELAY);
    HAL_I2C_Master_Receive(&amp;hi2c1, DS3231_ADDR, data, 2, HAL_MAX_DELAY);
    
    int16_t temp = (data[0] &lt;&lt; 2) | (data[1] &gt;&gt; 6);
    
    if (temp &amp; 0x200) {
        temp |= 0xFC00;
    }
    
    return temp * 0.25;
}

int main(void) {
    HAL_Init();
    SystemClock_Config();
    MX_I2C1_Init();
    MX_USART1_UART_Init();
    
    // Set initial time
    ds3231_set_time(12, 30, 0);
    
    while (1) {
        uint8_t hour, min, sec;
        ds3231_read_time(&amp;hour, &amp;min, &amp;sec);
        
        float temp = ds3231_get_temperature();
        
        printf("%02d:%02d:%02d Temp: %.2f°C\r\n", hour, min, sec, temp);
        
        HAL_Delay(1000);
    }
}
</code></pre>
<h2 id="avr-bare-metal"><a class="header" href="#avr-bare-metal">AVR Bare Metal</a></h2>
<h3 id="ds1307-with-avr-atmega328p"><a class="header" href="#ds1307-with-avr-atmega328p">DS1307 with AVR (ATmega328P)</a></h3>
<pre><code class="language-c">#include &lt;avr/io.h&gt;
#include &lt;util/delay.h&gt;
#include &lt;stdio.h&gt;

#define DS1307_ADDR 0x68
#define F_SCL 100000UL
#define TWI_BITRATE ((F_CPU / F_SCL) - 16) / 2

uint8_t dec_to_bcd(uint8_t val) {
    return ((val / 10) &lt;&lt; 4) | (val % 10);
}

uint8_t bcd_to_dec(uint8_t val) {
    return ((val &gt;&gt; 4) * 10) + (val &amp; 0x0F);
}

void i2c_init(void) {
    TWBR = (uint8_t)TWI_BITRATE;
    TWCR = (1 &lt;&lt; TWEN);
}

void i2c_start(void) {
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWSTA) | (1 &lt;&lt; TWEN);
    while (!(TWCR &amp; (1 &lt;&lt; TWINT)));
}

void i2c_stop(void) {
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWSTO) | (1 &lt;&lt; TWEN);
}

void i2c_write(uint8_t data) {
    TWDR = data;
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWEN);
    while (!(TWCR &amp; (1 &lt;&lt; TWINT)));
}

uint8_t i2c_read_ack(void) {
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWEN) | (1 &lt;&lt; TWEA);
    while (!(TWCR &amp; (1 &lt;&lt; TWINT)));
    return TWDR;
}

uint8_t i2c_read_nack(void) {
    TWCR = (1 &lt;&lt; TWINT) | (1 &lt;&lt; TWEN);
    while (!(TWCR &amp; (1 &lt;&lt; TWINT)));
    return TWDR;
}

void ds1307_set_time(uint8_t hour, uint8_t min, uint8_t sec) {
    i2c_start();
    i2c_write((DS1307_ADDR &lt;&lt; 1) | 0);
    i2c_write(0x00);  // Start register
    i2c_write(dec_to_bcd(sec));
    i2c_write(dec_to_bcd(min));
    i2c_write(dec_to_bcd(hour));
    i2c_stop();
}

void ds1307_read_time(uint8_t *hour, uint8_t *min, uint8_t *sec) {
    i2c_start();
    i2c_write((DS1307_ADDR &lt;&lt; 1) | 0);
    i2c_write(0x00);  // Start register
    i2c_start();  // Repeated start
    i2c_write((DS1307_ADDR &lt;&lt; 1) | 1);
    
    *sec = bcd_to_dec(i2c_read_ack());
    *min = bcd_to_dec(i2c_read_ack());
    *hour = bcd_to_dec(i2c_read_nack());
    
    i2c_stop();
}

int main(void) {
    i2c_init();
    uart_init();  // Assume UART is initialized
    
    // Set time to 12:30:00
    ds1307_set_time(12, 30, 0);
    
    while (1) {
        uint8_t hour, min, sec;
        ds1307_read_time(&amp;hour, &amp;min, &amp;sec);
        
        printf("%02d:%02d:%02d\n", hour, min, sec);
        
        _delay_ms(1000);
    }
    
    return 0;
}
</code></pre>
<h2 id="best-practices-37"><a class="header" href="#best-practices-37">Best Practices</a></h2>
<ol>
<li><strong>Battery Backup</strong>: Always install backup battery for continuous operation</li>
<li><strong>Pull-up Resistors</strong>: Ensure 4.7kΩ pull-ups on SDA and SCL</li>
<li><strong>Power Supply</strong>: DS1307 requires 5V, DS3231 works with 3.3V-5V</li>
<li><strong>Initial Setup</strong>: Set time after first power-on or battery change</li>
<li><strong>Lost Power Check</strong>: Check and handle RTC power loss</li>
<li><strong>BCD Format</strong>: Remember to convert between decimal and BCD</li>
<li><strong>I2C Speed</strong>: Use 100 kHz for reliability, 400 kHz if needed</li>
</ol>
<h2 id="troubleshooting-7"><a class="header" href="#troubleshooting-7">Troubleshooting</a></h2>
<h3 id="common-issues-11"><a class="header" href="#common-issues-11">Common Issues</a></h3>
<p><strong>RTC Not Responding:</strong></p>
<ul>
<li>Check I2C address (usually 0x68)</li>
<li>Verify SDA/SCL connections</li>
<li>Ensure pull-up resistors present</li>
<li>Check power supply voltage</li>
</ul>
<p><strong>Time Not Keeping:</strong></p>
<ul>
<li>Install backup battery (CR2032)</li>
<li>Check battery voltage (should be ~3V)</li>
<li>For DS1307: Clear CH (Clock Halt) bit</li>
<li>Verify crystal oscillator is working</li>
</ul>
<p><strong>Inaccurate Time:</strong></p>
<ul>
<li>DS1307: Normal (±2 min/month), consider DS3231</li>
<li>DS3231: Check temperature effects</li>
<li>Calibrate using aging offset register (DS3231)</li>
</ul>
<p><strong>I2C Communication Errors:</strong></p>
<pre><code class="language-cpp">// Check I2C scanner result
Wire.beginTransmission(0x68);
if (Wire.endTransmission() == 0) {
    Serial.println("RTC found at 0x68");
} else {
    Serial.println("RTC not found");
}
</code></pre>
<h2 id="resources-29"><a class="header" href="#resources-29">Resources</a></h2>
<ul>
<li><strong>DS1307 Datasheet</strong>: Maxim Integrated</li>
<li><strong>DS3231 Datasheet</strong>: Maxim Integrated</li>
<li><strong>RTClib Library</strong>: https://github.com/adafruit/RTClib</li>
<li><strong>I2C Protocol</strong>: See <a href="embedded/i2c.html">I2C documentation</a></li>
</ul>
<h2 id="see-also-6"><a class="header" href="#see-also-6">See Also</a></h2>
<ul>
<li><a href="embedded/i2c.html">I2C Communication</a></li>
<li><a href="embedded/arduino.html">Arduino Programming</a></li>
<li><a href="embedded/stm32.html">STM32 HAL</a></li>
<li><a href="embedded/avr.html">AVR Programming</a></li>
<li><a href="embedded/data_logging.html">Data Logging</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gpio"><a class="header" href="#gpio">GPIO</a></h1>
<h2 id="general-purpose-inputoutput-gpio"><a class="header" href="#general-purpose-inputoutput-gpio">General Purpose Input/Output (GPIO)</a></h2>
<p>GPIO stands for General Purpose Input/Output. It is a generic pin on an integrated circuit or computer board whose behavior (including whether it is an input or output pin) can be controlled by the user at runtime. GPIO pins are a staple in embedded systems and microcontroller projects due to their versatility and ease of use.</p>
<h3 id="key-features-of-gpio"><a class="header" href="#key-features-of-gpio">Key Features of GPIO</a></h3>
<ol>
<li>
<p><strong>Configurable Direction</strong>: Each GPIO pin can be configured as either an input or an output. This allows the pin to either read signals from external devices (input) or send signals to external devices (output).</p>
</li>
<li>
<p><strong>Digital Signals</strong>: GPIO pins typically handle digital signals, meaning they can be in one of two states: high (1) or low (0). The voltage levels corresponding to these states depend on the specific hardware but are commonly 3.3V or 5V for high and 0V for low.</p>
</li>
<li>
<p><strong>Interrupts</strong>: Many GPIO pins support interrupts, which allow the pin to trigger an event in the software when a specific condition is met, such as a change in state. This is useful for responding to external events without constantly polling the pin.</p>
</li>
<li>
<p><strong>Pull-up/Pull-down Resistors</strong>: GPIO pins often have configurable pull-up or pull-down resistors. These resistors ensure that the pin is in a known state (high or low) when it is not actively being driven by an external source.</p>
</li>
<li>
<p><strong>Debouncing</strong>: When reading input from mechanical switches, GPIO pins can experience noise or "bouncing." Debouncing techniques, either in hardware or software, are used to ensure that the signal is stable and accurate.</p>
</li>
</ol>
<h3 id="common-uses-of-gpio"><a class="header" href="#common-uses-of-gpio">Common Uses of GPIO</a></h3>
<ul>
<li><strong>LED Control</strong>: Turning LEDs on and off or controlling their brightness using Pulse Width Modulation (PWM).</li>
<li><strong>Button Inputs</strong>: Reading the state of buttons or switches to trigger actions in the software.</li>
<li><strong>Sensor Interfacing</strong>: Reading data from various sensors like temperature, humidity, or motion sensors.</li>
<li><strong>Communication</strong>: Implementing simple communication protocols like I2C, SPI, or UART using GPIO pins.</li>
</ul>
<h3 id="example-code"><a class="header" href="#example-code">Example Code</a></h3>
<p>Here is an example of how to configure and use a GPIO pin in a typical microcontroller environment (e.g., using the Arduino platform):</p>
<pre><code class="language-cpp">// Define the pin number
const int ledPin = 13; // Pin number for the LED

void setup() {
  // Initialize the digital pin as an output.
  pinMode(ledPin, OUTPUT);
}

void loop() {
  // Turn the LED on (HIGH is the voltage level)
  digitalWrite(ledPin, HIGH);
  // Wait for a second
  delay(1000);
  // Turn the LED off by making the voltage LOW
  digitalWrite(ledPin, LOW);
  // Wait for a second
  delay(1000);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interrupts-2"><a class="header" href="#interrupts-2">Interrupts</a></h1>
<h2 id="overview-40"><a class="header" href="#overview-40">Overview</a></h2>
<p>Interrupts are signals that temporarily halt the normal execution of a program or process, allowing the system to respond to important events. They are a crucial mechanism in computer architecture, enabling efficient multitasking and real-time processing.</p>
<h2 id="types-of-interrupts"><a class="header" href="#types-of-interrupts">Types of Interrupts</a></h2>
<ol>
<li>
<p><strong>Hardware Interrupts</strong>: Generated by hardware devices (e.g., keyboard, mouse, network cards) to signal that they require attention from the CPU. These interrupts can occur at any time and are typically prioritized to ensure that critical tasks are handled promptly.</p>
</li>
<li>
<p><strong>Software Interrupts</strong>: Triggered by software instructions, such as system calls or exceptions. These interrupts allow programs to request services from the operating system or handle errors gracefully.</p>
</li>
<li>
<p><strong>Timer Interrupts</strong>: Generated by a timer within the system to allow the operating system to perform regular tasks, such as scheduling processes and managing system resources.</p>
</li>
</ol>
<h2 id="interrupt-handling"><a class="header" href="#interrupt-handling">Interrupt Handling</a></h2>
<p>When an interrupt occurs, the CPU stops executing the current program and saves its state. The system then executes an interrupt handler, a special routine designed to address the specific interrupt. After the handler completes its task, the CPU restores the saved state and resumes the interrupted program.</p>
<h2 id="applications-of-interrupts"><a class="header" href="#applications-of-interrupts">Applications of Interrupts</a></h2>
<ul>
<li>
<p><strong>Real-Time Systems</strong>: Interrupts are essential in real-time systems where timely responses to events are critical, such as in embedded systems, automotive applications, and industrial automation.</p>
</li>
<li>
<p><strong>Multitasking</strong>: Operating systems use interrupts to manage multiple processes efficiently, allowing them to share CPU time and resources without significant delays.</p>
</li>
<li>
<p><strong>Event-Driven Programming</strong>: In event-driven architectures, interrupts facilitate the handling of user inputs and other events, enabling responsive applications.</p>
</li>
</ul>
<h2 id="conclusion-20"><a class="header" href="#conclusion-20">Conclusion</a></h2>
<p>Understanding interrupts is vital for developers working with low-level programming, operating systems, and embedded systems. They play a key role in ensuring that systems can respond quickly and efficiently to a variety of events.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="timers-and-counters-1"><a class="header" href="#timers-and-counters-1">Timers and Counters</a></h1>
<h2 id="overview-41"><a class="header" href="#overview-41">Overview</a></h2>
<p>Timers and counters are essential hardware peripherals in microcontrollers that keep track of time, count events, generate precise delays, create PWM signals, and trigger interrupts at specific intervals. Unlike software delays (which block the CPU), hardware timers run independently, allowing your program to multitask efficiently.</p>
<h2 id="key-concepts-22"><a class="header" href="#key-concepts-22">Key Concepts</a></h2>
<h3 id="timer-vs-counter"><a class="header" href="#timer-vs-counter">Timer vs Counter</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Timer</th><th>Counter</th></tr></thead><tbody>
<tr><td><strong>Clock Source</strong></td><td>Internal (system clock)</td><td>External (GPIO pin)</td></tr>
<tr><td><strong>Purpose</strong></td><td>Measure time intervals</td><td>Count external events</td></tr>
<tr><td><strong>Speed</strong></td><td>Fixed by clock</td><td>Variable (event-driven)</td></tr>
<tr><td><strong>Example Use</strong></td><td>Generate 1ms interrupts</td><td>Count encoder pulses</td></tr>
</tbody></table>
</div>
<h3 id="timer-components"><a class="header" href="#timer-components">Timer Components</a></h3>
<ol>
<li><strong>Counter Register</strong>: Stores current count value</li>
<li><strong>Prescaler</strong>: Divides input clock to slow down counting</li>
<li><strong>Compare Register</strong>: Value to trigger events when matched</li>
<li><strong>Auto-reload Register</strong>: Value to reset counter to (for periodic timers)</li>
</ol>
<h3 id="timer-modes"><a class="header" href="#timer-modes">Timer Modes</a></h3>
<ol>
<li><strong>Basic Timer</strong>: Simple counting up or down</li>
<li><strong>PWM Mode</strong>: Generate pulse-width modulated signals</li>
<li><strong>Input Capture</strong>: Measure external signal timing</li>
<li><strong>Output Compare</strong>: Trigger events at specific times</li>
<li><strong>Encoder Mode</strong>: Read quadrature encoders</li>
</ol>
<h2 id="how-it-works-6"><a class="header" href="#how-it-works-6">How It Works</a></h2>
<h3 id="clock-and-prescaler"><a class="header" href="#clock-and-prescaler">Clock and Prescaler</a></h3>
<pre><code>System Clock (16 MHz)
    -&gt;
Prescaler (/256)
    -&gt;
Timer Clock (62.5 kHz)
    -&gt;
Counter increments at 62.5 kHz
</code></pre>
<p><strong>Formula</strong>:</p>
<pre><code>Timer Frequency = CPU Frequency / Prescaler

Timer Period = 1 / Timer Frequency

Overflow Time = (2^bits / Timer Frequency)
</code></pre>
<p><strong>Example</strong> (Arduino Uno - 16 MHz):</p>
<pre><code>Prescaler = 256
Timer Frequency = 16,000,000 / 256 = 62,500 Hz
Timer Period = 1 / 62,500 = 16 us per tick

For 8-bit timer (0-255):
Overflow Time = 256 * 16 us = 4.096 ms

For 16-bit timer (0-65535):
Overflow Time = 65,536 * 16 us = 1.048 seconds
</code></pre>
<h2 id="code-examples-7"><a class="header" href="#code-examples-7">Code Examples</a></h2>
<h3 id="arduino-timer-interrupt"><a class="header" href="#arduino-timer-interrupt">Arduino Timer Interrupt</a></h3>
<pre><code class="language-cpp">// Using Timer1 (16-bit) for 1ms interrupt

volatile unsigned long millisCounter = 0;

void setup() {
  Serial.begin(9600);

  // Stop interrupts during setup
  cli();

  // Reset Timer1
  TCCR1A = 0;
  TCCR1B = 0;
  TCNT1 = 0;

  // Set compare match register for 1ms
  // OCR1A = (16MHz / (prescaler * desired frequency)) - 1
  // OCR1A = (16,000,000 / (64 * 1000)) - 1 = 249
  OCR1A = 249;

  // Turn on CTC mode (Clear Timer on Compare Match)
  TCCR1B |= (1 &lt;&lt; WGM12);

  // Set CS11 and CS10 bits for 64 prescaler
  TCCR1B |= (1 &lt;&lt; CS11) | (1 &lt;&lt; CS10);

  // Enable timer compare interrupt
  TIMSK1 |= (1 &lt;&lt; OCIE1A);

  // Enable global interrupts
  sei();
}

// Timer1 interrupt service routine (ISR)
ISR(TIMER1_COMPA_vect) {
  millisCounter++;

  // Your code here - keep it SHORT!
  // DO NOT use Serial.print() in ISR
}

void loop() {
  // Use millisCounter instead of millis()
  static unsigned long lastPrint = 0;

  if (millisCounter - lastPrint &gt;= 1000) {
    lastPrint = millisCounter;
    Serial.println(millisCounter);
  }
}
</code></pre>
<h3 id="esp32-hardware-timer"><a class="header" href="#esp32-hardware-timer">ESP32 Hardware Timer</a></h3>
<pre><code class="language-cpp">// ESP32 has 4 hardware timers (0-3)

hw_timer_t *timer = NULL;
volatile uint32_t timerCounter = 0;

void IRAM_ATTR onTimer() {
  timerCounter++;
  // Keep ISR short and fast!
}

void setup() {
  Serial.begin(115200);

  // Initialize timer (timer number, prescaler, count up)
  // ESP32 clock is 80 MHz
  // Prescaler of 80 gives 1 MHz (1 tick = 1 us)
  timer = timerBegin(0, 80, true);

  // Attach interrupt function
  timerAttachInterrupt(timer, &amp;onTimer, true);

  // Set alarm to trigger every 1ms (1000 us)
  timerAlarmWrite(timer, 1000, true);  // true = auto-reload

  // Enable timer alarm
  timerAlarmEnable(timer);

  Serial.println("Timer initialized!");
}

void loop() {
  static uint32_t lastCount = 0;

  if (timerCounter - lastCount &gt;= 1000) {
    lastCount = timerCounter;
    Serial.print("Timer count: ");
    Serial.println(timerCounter);
  }
}

// Ticker library (easier alternative)
#include &lt;Ticker.h&gt;

Ticker ticker;
volatile int count = 0;

void timerCallback() {
  count++;
}

void setup() {
  // Call timerCallback every 0.001 seconds (1ms)
  ticker.attach(0.001, timerCallback);
}
</code></pre>
<h3 id="stm32-hal-timer"><a class="header" href="#stm32-hal-timer">STM32 HAL Timer</a></h3>
<pre><code class="language-c">#include "stm32f4xx_hal.h"

TIM_HandleTypeDef htim2;
volatile uint32_t timerTicks = 0;

void Timer_Init(void) {
    TIM_ClockConfigTypeDef sClockSourceConfig = {0};
    TIM_MasterConfigTypeDef sMasterConfig = {0};

    // TIM2 configuration
    // APB1 clock = 84 MHz (for STM32F4)
    // Prescaler = 8400 - 1 -&gt; 10 kHz timer clock
    // Period = 10 - 1 -&gt; 1 kHz interrupt (1ms)

    htim2.Instance = TIM2;
    htim2.Init.Prescaler = 8400 - 1;      // 84 MHz / 8400 = 10 kHz
    htim2.Init.CounterMode = TIM_COUNTERMODE_UP;
    htim2.Init.Period = 10 - 1;           // 10 kHz / 10 = 1 kHz (1ms)
    htim2.Init.ClockDivision = TIM_CLOCKDIVISION_DIV1;
    htim2.Init.AutoReloadPreload = TIM_AUTORELOAD_PRELOAD_DISABLE;
    HAL_TIM_Base_Init(&amp;htim2);

    sClockSourceConfig.ClockSource = TIM_CLOCKSOURCE_INTERNAL;
    HAL_TIM_ConfigClockSource(&amp;htim2, &amp;sClockSourceConfig);

    // Enable timer interrupt
    HAL_TIM_Base_Start_IT(&amp;htim2);
}

// Timer interrupt callback
void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {
    if (htim-&gt;Instance == TIM2) {
        timerTicks++;
        // Your periodic code here
    }
}

// In main.c, enable interrupt in NVIC
void MX_TIM2_Init(void) {
    Timer_Init();
    HAL_NVIC_SetPriority(TIM2_IRQn, 0, 0);
    HAL_NVIC_EnableIRQ(TIM2_IRQn);
}
</code></pre>
<h3 id="pwm-generation-with-timers"><a class="header" href="#pwm-generation-with-timers">PWM Generation with Timers</a></h3>
<pre><code class="language-cpp">// Arduino PWM using Timer1

void setup() {
  // Set pins as output
  pinMode(9, OUTPUT);   // OC1A
  pinMode(10, OUTPUT);  // OC1B

  // Stop timer during configuration
  TCCR1A = 0;
  TCCR1B = 0;

  // Fast PWM mode, ICR1 as TOP
  // WGM13:0 = 14 (Fast PWM, TOP = ICR1)
  TCCR1A = (1 &lt;&lt; WGM11);
  TCCR1B = (1 &lt;&lt; WGM13) | (1 &lt;&lt; WGM12);

  // Non-inverting mode for both channels
  TCCR1A |= (1 &lt;&lt; COM1A1) | (1 &lt;&lt; COM1B1);

  // Prescaler = 8
  TCCR1B |= (1 &lt;&lt; CS11);

  // Set TOP value for desired frequency
  // PWM Frequency = F_CPU / (Prescaler * (1 + TOP))
  // For 50 Hz: TOP = 16,000,000 / (8 * 50) - 1 = 39999
  ICR1 = 39999;  // 50 Hz

  // Set duty cycle
  OCR1A = 3000;  // ~7.5% duty cycle on pin 9
  OCR1B = 6000;  // ~15% duty cycle on pin 10
}

// Servo control example
void setServoAngle(uint8_t angle) {
  // Servo expects 1ms-2ms pulse every 20ms (50 Hz)
  // 1ms = 0 degrees = 2000 counts
  // 1.5ms = 90 degrees = 3000 counts
  // 2ms = 180 degrees = 4000 counts

  uint16_t pulse = map(angle, 0, 180, 2000, 4000);
  OCR1A = pulse;
}

void loop() {
  setServoAngle(0);
  delay(1000);
  setServoAngle(90);
  delay(1000);
  setServoAngle(180);
  delay(1000);
}
</code></pre>
<h3 id="input-capture-mode"><a class="header" href="#input-capture-mode">Input Capture Mode</a></h3>
<pre><code class="language-cpp">// Measure frequency of external signal on pin 8 (ICP1)

volatile unsigned long captureTime1 = 0;
volatile unsigned long captureTime2 = 0;
volatile boolean newCapture = false;

void setup() {
  Serial.begin(9600);

  // Configure Timer1 for input capture
  TCCR1A = 0;
  TCCR1B = 0;

  // Prescaler = 64 (250 kHz timer, 4us resolution)
  TCCR1B |= (1 &lt;&lt; CS11) | (1 &lt;&lt; CS10);

  // Input Capture on rising edge
  TCCR1B |= (1 &lt;&lt; ICES1);

  // Enable input capture interrupt
  TIMSK1 |= (1 &lt;&lt; ICIE1);

  // Enable global interrupts
  sei();
}

// Input capture interrupt
ISR(TIMER1_CAPT_vect) {
  static boolean firstCapture = true;

  if (firstCapture) {
    captureTime1 = ICR1;
    firstCapture = false;
  } else {
    captureTime2 = ICR1;
    newCapture = true;
    firstCapture = true;
  }
}

void loop() {
  if (newCapture) {
    newCapture = false;

    // Calculate period
    unsigned long period = captureTime2 - captureTime1;

    // Calculate frequency
    // Timer runs at 250 kHz (4us per tick)
    float frequency = 250000.0 / period;

    Serial.print("Frequency: ");
    Serial.print(frequency);
    Serial.println(" Hz");
  }
}
</code></pre>
<h2 id="common-applications-3"><a class="header" href="#common-applications-3">Common Applications</a></h2>
<h3 id="1-precise-timing-without-delay"><a class="header" href="#1-precise-timing-without-delay">1. Precise Timing Without Delay</a></h3>
<pre><code class="language-cpp">unsigned long previousMillis = 0;
const long interval = 1000;

void loop() {
  unsigned long currentMillis = millis();

  if (currentMillis - previousMillis &gt;= interval) {
    previousMillis = currentMillis;

    // Execute every 1 second without blocking
    toggleLED();
  }

  // Other code runs continuously
  checkSensors();
  processData();
}
</code></pre>
<h3 id="2-multiple-periodic-tasks"><a class="header" href="#2-multiple-periodic-tasks">2. Multiple Periodic Tasks</a></h3>
<pre><code class="language-cpp">volatile uint32_t timerTicks = 0;

ISR(TIMER1_COMPA_vect) {
  timerTicks++;
}

void loop() {
  static uint32_t lastTask1 = 0;
  static uint32_t lastTask2 = 0;
  static uint32_t lastTask3 = 0;

  // Task 1: Every 10ms
  if (timerTicks - lastTask1 &gt;= 10) {
    lastTask1 = timerTicks;
    readSensors();
  }

  // Task 2: Every 100ms
  if (timerTicks - lastTask2 &gt;= 100) {
    lastTask2 = timerTicks;
    updateDisplay();
  }

  // Task 3: Every 1000ms
  if (timerTicks - lastTask3 &gt;= 1000) {
    lastTask3 = timerTicks;
    sendData();
  }
}
</code></pre>
<h3 id="3-watchdog-timer"><a class="header" href="#3-watchdog-timer">3. Watchdog Timer</a></h3>
<pre><code class="language-cpp">#include &lt;avr/wdt.h&gt;

void setup() {
  // Enable watchdog timer (8 second timeout)
  wdt_enable(WDTO_8S);
}

void loop() {
  // Do work
  processData();

  // Reset watchdog (prevent system reset)
  wdt_reset();

  // If code hangs, watchdog resets system after 8 seconds
}
</code></pre>
<h3 id="4-real-time-clock-rtc"><a class="header" href="#4-real-time-clock-rtc">4. Real-Time Clock (RTC)</a></h3>
<pre><code class="language-cpp">// Using timer to maintain time

volatile uint32_t seconds = 0;
volatile uint16_t milliseconds = 0;

ISR(TIMER1_COMPA_vect) {
  milliseconds++;

  if (milliseconds &gt;= 1000) {
    milliseconds = 0;
    seconds++;
  }
}

void getTime(uint8_t *hours, uint8_t *minutes, uint8_t *secs) {
  noInterrupts();
  uint32_t totalSeconds = seconds;
  interrupts();

  *hours = (totalSeconds / 3600) % 24;
  *minutes = (totalSeconds / 60) % 60;
  *secs = totalSeconds % 60;
}
</code></pre>
<h3 id="5-debouncing-buttons"><a class="header" href="#5-debouncing-buttons">5. Debouncing Buttons</a></h3>
<pre><code class="language-cpp">volatile uint32_t timerMs = 0;

ISR(TIMER1_COMPA_vect) {
  timerMs++;
}

const int buttonPin = 2;
const int debounceTime = 50;  // 50ms

bool readButtonDebounced() {
  static uint32_t lastDebounceTime = 0;
  static bool lastButtonState = HIGH;
  static bool buttonState = HIGH;

  bool reading = digitalRead(buttonPin);

  if (reading != lastButtonState) {
    lastDebounceTime = timerMs;
  }

  if ((timerMs - lastDebounceTime) &gt; debounceTime) {
    if (reading != buttonState) {
      buttonState = reading;
      return (buttonState == LOW);  // Return true on button press
    }
  }

  lastButtonState = reading;
  return false;
}
</code></pre>
<h2 id="timer-prescaler-values"><a class="header" href="#timer-prescaler-values">Timer Prescaler Values</a></h2>
<h3 id="avr-arduino-unonanomega"><a class="header" href="#avr-arduino-unonanomega">AVR (Arduino Uno/Nano/Mega)</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Prescaler</th><th>CS12</th><th>CS11</th><th>CS10</th><th>Timer Frequency (16 MHz)</th></tr></thead><tbody>
<tr><td>None</td><td>0</td><td>0</td><td>0</td><td>Stopped</td></tr>
<tr><td>1</td><td>0</td><td>0</td><td>1</td><td>16 MHz</td></tr>
<tr><td>8</td><td>0</td><td>1</td><td>0</td><td>2 MHz</td></tr>
<tr><td>64</td><td>0</td><td>1</td><td>1</td><td>250 kHz</td></tr>
<tr><td>256</td><td>1</td><td>0</td><td>0</td><td>62.5 kHz</td></tr>
<tr><td>1024</td><td>1</td><td>0</td><td>1</td><td>15.625 kHz</td></tr>
</tbody></table>
</div>
<h2 id="best-practices-38"><a class="header" href="#best-practices-38">Best Practices</a></h2>
<h3 id="1-keep-isrs-short-and-fast"><a class="header" href="#1-keep-isrs-short-and-fast">1. Keep ISRs Short and Fast</a></h3>
<pre><code class="language-cpp">// BAD - Don't do this in ISR!
ISR(TIMER1_COMPA_vect) {
  Serial.println("Timer fired");  // Serial is slow!
  delay(100);                      // Blocks other interrupts!
  float result = complexCalculation();  // Takes too long!
}

// GOOD - Set flags, process in main loop
volatile bool timerFlag = false;

ISR(TIMER1_COMPA_vect) {
  timerFlag = true;  // Just set a flag
}

void loop() {
  if (timerFlag) {
    timerFlag = false;
    Serial.println("Timer fired");  // Do slow stuff here
    processData();
  }
}
</code></pre>
<h3 id="2-protect-shared-variables"><a class="header" href="#2-protect-shared-variables">2. Protect Shared Variables</a></h3>
<pre><code class="language-cpp">volatile uint32_t sharedCounter = 0;

ISR(TIMER1_COMPA_vect) {
  sharedCounter++;
}

void loop() {
  // BAD - Not atomic! Can be corrupted if interrupt occurs mid-read
  uint32_t localCopy = sharedCounter;

  // GOOD - Disable interrupts during multi-byte read
  noInterrupts();
  uint32_t localCopy = sharedCounter;
  interrupts();

  Serial.println(localCopy);
}
</code></pre>
<h3 id="3-calculate-timer-values-correctly"><a class="header" href="#3-calculate-timer-values-correctly">3. Calculate Timer Values Correctly</a></h3>
<pre><code class="language-cpp">// Formula for CTC mode:
// Compare Value = (F_CPU / (Prescaler * Desired_Frequency)) - 1

#define F_CPU 16000000UL
#define PRESCALER 64
#define DESIRED_HZ 1000  // 1 kHz

uint16_t compareValue = (F_CPU / (PRESCALER * DESIRED_HZ)) - 1;
// compareValue = (16000000 / (64 * 1000)) - 1 = 249

OCR1A = compareValue;
</code></pre>
<h2 id="common-issues-and-debugging-5"><a class="header" href="#common-issues-and-debugging-5">Common Issues and Debugging</a></h2>
<h3 id="problem-timer-interrupt-not-firing"><a class="header" href="#problem-timer-interrupt-not-firing">Problem: Timer Interrupt Not Firing</a></h3>
<p><strong>Check</strong>:</p>
<ul>
<li>Global interrupts enabled (<code>sei()</code>)</li>
<li>Specific timer interrupt enabled</li>
<li>Prescaler and compare values calculated correctly</li>
<li>Clock source selected</li>
<li>ISR function name matches vector name</li>
</ul>
<h3 id="problem-inaccurate-timing"><a class="header" href="#problem-inaccurate-timing">Problem: Inaccurate Timing</a></h3>
<p><strong>Causes</strong>:</p>
<ul>
<li>Wrong prescaler calculation</li>
<li>Integer overflow in calculations</li>
<li>CPU frequency mismatch</li>
<li>Crystal tolerance</li>
</ul>
<h3 id="problem-system-becomes-unresponsive"><a class="header" href="#problem-system-becomes-unresponsive">Problem: System Becomes Unresponsive</a></h3>
<p><strong>Causes</strong>:</p>
<ul>
<li>ISR takes too long (blocks other code)</li>
<li>Interrupt firing too frequently</li>
<li>Infinite loop in ISR</li>
<li>Nested interrupts causing stack overflow</li>
</ul>
<h2 id="eli10-explain-like-im-10-5"><a class="header" href="#eli10-explain-like-im-10-5">ELI10 (Explain Like I'm 10)</a></h2>
<p>Imagine you have a special alarm clock that can do cool tricks:</p>
<ol>
<li>
<p><strong>Basic Timer</strong>: Counts from 0 to 100, then starts over. Like counting seconds!</p>
</li>
<li>
<p><strong>Prescaler</strong>: Instead of counting every second, you count every 10 seconds. It's like skipping numbers to count slower.</p>
</li>
<li>
<p><strong>Compare Match</strong>: When the count reaches a special number (like 50), the alarm rings! Then it keeps counting.</p>
</li>
<li>
<p><strong>PWM</strong>: The alarm flashes a light on and off really fast. By changing how long it stays on vs off, you can make the light look dimmer or brighter!</p>
</li>
<li>
<p><strong>Input Capture</strong>: You press a button, and the timer remembers what number it was at. Press again, and you can figure out how long between presses!</p>
</li>
</ol>
<p>The coolest part? The timer runs by itself in the background - you don't have to watch it! It's like having a helper that tells you when it's time to do something, while you focus on other tasks.</p>
<h2 id="further-resources-21"><a class="header" href="#further-resources-21">Further Resources</a></h2>
<ul>
<li><a href="https://www.arduino.cc/reference/en/language/functions/interrupts/interrupts/">Arduino Timer Interrupts</a></li>
<li><a href="http://www.protostack.com/blog/2011/01/comprehensive-guide-to-timers-on-avr/">AVR Timers Tutorial</a></li>
<li><a href="https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/peripherals/timer.html">ESP32 Timer Documentation</a></li>
<li><a href="https://www.st.com/resource/en/application_note/cd00211314-stm32f101xx-and-stm32f103xx-rcc-configuration-examples-stmicroelectronics.pdf">STM32 Timer Cookbook</a></li>
<li><a href="https://docs.arduino.cc/learn/microcontrollers/analog-output">Secrets of Arduino PWM</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="watchdog-timers"><a class="header" href="#watchdog-timers">Watchdog Timers</a></h1>
<p>A Watchdog Timer (WDT) is a hardware or software timer that is used to detect and recover from computer malfunctions. During normal operation, the system regularly resets the watchdog timer to prevent it from elapsing, or "timing out." If the system fails to reset the watchdog timer, it is assumed to be malfunctioning, and corrective actions are taken, such as resetting the system.</p>
<h2 id="key-concepts-23"><a class="header" href="#key-concepts-23">Key Concepts</a></h2>
<ul>
<li><strong>Timeout Period</strong>: The duration for which the watchdog timer runs before it times out. If the timer is not reset within this period, it triggers a system reset or other corrective actions.</li>
<li><strong>Reset Mechanism</strong>: The action taken when the watchdog timer times out. This is typically a system reset, but it can also include other actions like logging an error or entering a safe state.</li>
<li><strong>Feeding the Watchdog</strong>: The process of regularly resetting the watchdog timer to prevent it from timing out. This is also known as "kicking" or "patting" the watchdog.</li>
</ul>
<h2 id="example-usage-2"><a class="header" href="#example-usage-2">Example Usage</a></h2>
<ol>
<li><strong>Embedded Systems</strong>: Watchdog timers are commonly used in embedded systems to ensure that the system can recover from unexpected failures. For example, if a microcontroller stops responding, the watchdog timer can reset it to restore normal operation.</li>
<li><strong>Safety-Critical Applications</strong>: In applications where safety is paramount, such as automotive or medical devices, watchdog timers help ensure that the system can recover from faults and continue to operate safely.</li>
</ol>
<h2 id="conclusion-21"><a class="header" href="#conclusion-21">Conclusion</a></h2>
<p>Watchdog timers are essential components in many systems, providing a mechanism to detect and recover from malfunctions. Understanding how to configure and use watchdog timers is crucial for developing reliable and resilient systems.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="power-management-2"><a class="header" href="#power-management-2">Power Management</a></h1>
<p>Power management refers to the process of managing the power consumption of a device or system to optimize energy efficiency and prolong battery life. It is crucial in various applications, especially in portable devices like smartphones, laptops, and IoT devices.</p>
<h2 id="key-concepts-24"><a class="header" href="#key-concepts-24">Key Concepts</a></h2>
<ul>
<li>
<p><strong>Sleep Modes</strong>: Many devices have different sleep modes that reduce power consumption when the device is not in active use. These modes can range from low-power states to complete shutdowns.</p>
</li>
<li>
<p><strong>Dynamic Voltage and Frequency Scaling (DVFS)</strong>: This technique adjusts the voltage and frequency of a processor based on the workload, allowing for reduced power consumption during low-demand periods.</p>
</li>
<li>
<p><strong>Power Gating</strong>: This method involves shutting off power to certain components of a device when they are not in use, further conserving energy.</p>
</li>
</ul>
<h2 id="applications-14"><a class="header" href="#applications-14">Applications</a></h2>
<p>Power management techniques are widely used in:</p>
<ul>
<li><strong>Mobile Devices</strong>: Extending battery life through efficient power usage.</li>
<li><strong>Data Centers</strong>: Reducing energy costs and improving cooling efficiency.</li>
<li><strong>Embedded Systems</strong>: Ensuring long operational life in battery-powered applications.</li>
</ul>
<h2 id="conclusion-22"><a class="header" href="#conclusion-22">Conclusion</a></h2>
<p>Effective power management is essential for enhancing the performance and longevity of electronic devices. By implementing various techniques, developers can create more energy-efficient systems that meet the demands of modern applications.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="debugging-1"><a class="header" href="#debugging-1">Debugging</a></h1>
<h2 id="logic-analyzer"><a class="header" href="#logic-analyzer">Logic Analyzer</a></h2>
<p>Saleae Logic 8</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="networking-3"><a class="header" href="#networking-3">Networking</a></h1>
<p>Comprehensive networking reference covering protocols, models, and networking fundamentals.</p>
<h2 id="networking-models"><a class="header" href="#networking-models">Networking Models</a></h2>
<h3 id="osi-model"><a class="header" href="#osi-model"><a href="networking/osi_model.html">OSI Model</a></a></h3>
<p>The 7-layer conceptual framework for network communication:</p>
<ul>
<li>Layer 7: Application</li>
<li>Layer 6: Presentation</li>
<li>Layer 5: Session</li>
<li>Layer 4: Transport</li>
<li>Layer 3: Network</li>
<li>Layer 2: Data Link</li>
<li>Layer 1: Physical</li>
</ul>
<h3 id="tcpip-model"><a class="header" href="#tcpip-model"><a href="networking/tcp_ip_model.html">TCP/IP Model</a></a></h3>
<p>The practical 4-layer model used in modern networks:</p>
<ul>
<li>Application Layer</li>
<li>Transport Layer</li>
<li>Internet Layer</li>
<li>Network Access Layer</li>
</ul>
<h2 id="core-protocols"><a class="header" href="#core-protocols">Core Protocols</a></h2>
<h3 id="ip-internet-protocol"><a class="header" href="#ip-internet-protocol"><a href="networking/ip.html">IP (Internet Protocol)</a></a></h3>
<ul>
<li>IPv4 and IPv6 addressing</li>
<li>Subnetting and CIDR notation</li>
<li>Routing and fragmentation</li>
<li>NAT (Network Address Translation)</li>
<li>ICMP diagnostics</li>
</ul>
<h3 id="tcp-transmission-control-protocol"><a class="header" href="#tcp-transmission-control-protocol"><a href="networking/tcp.html">TCP (Transmission Control Protocol)</a></a></h3>
<ul>
<li>Reliable, connection-oriented communication</li>
<li>3-way handshake</li>
<li>Flow control and congestion control</li>
<li>Sequence numbers and acknowledgments</li>
<li>Connection termination</li>
</ul>
<h3 id="udp-user-datagram-protocol"><a class="header" href="#udp-user-datagram-protocol"><a href="networking/udp.html">UDP (User Datagram Protocol)</a></a></h3>
<ul>
<li>Fast, connectionless communication</li>
<li>Low overhead (8-byte header)</li>
<li>No reliability guarantees</li>
<li>Use cases: DNS, streaming, gaming, VoIP</li>
<li>Socket programming examples</li>
</ul>
<h3 id="httphttps"><a class="header" href="#httphttps"><a href="networking/http.html">HTTP/HTTPS</a></a></h3>
<ul>
<li>Web communication protocol</li>
<li>Request methods (GET, POST, PUT, DELETE)</li>
<li>Status codes</li>
<li>Headers and caching</li>
<li>Authentication and CORS</li>
<li>REST API design</li>
</ul>
<h2 id="name-resolution"><a class="header" href="#name-resolution">Name Resolution</a></h2>
<h3 id="dns-domain-name-system"><a class="header" href="#dns-domain-name-system"><a href="networking/dns.html">DNS (Domain Name System)</a></a></h3>
<ul>
<li>Translates domain names to IP addresses</li>
<li>DNS hierarchy and record types</li>
<li>Query and response messages</li>
<li>DNS caching and TTL</li>
<li>DNSSEC security</li>
<li>DNS over HTTPS (DoH) and DNS over TLS (DoT)</li>
<li>Public DNS servers</li>
</ul>
<h3 id="mdns-multicast-dns"><a class="header" href="#mdns-multicast-dns"><a href="networking/mdns.html">mDNS (Multicast DNS)</a></a></h3>
<ul>
<li>Zero-configuration networking</li>
<li>Local network name resolution (.local domain)</li>
<li>Service discovery (DNS-SD)</li>
<li>Avahi and Bonjour implementations</li>
<li>Use cases: printers, file sharing, IoT devices</li>
</ul>
<h2 id="nat-traversal"><a class="header" href="#nat-traversal">NAT Traversal</a></h2>
<h3 id="stun-session-traversal-utilities-for-nat"><a class="header" href="#stun-session-traversal-utilities-for-nat"><a href="networking/stun.html">STUN (Session Traversal Utilities for NAT)</a></a></h3>
<ul>
<li>Discovers public IP address and port</li>
<li>Detects NAT type</li>
<li>Enables peer-to-peer connections</li>
<li>Used in WebRTC and VoIP</li>
<li>Message format and examples</li>
<li>Public STUN servers</li>
</ul>
<h3 id="turn-traversal-using-relays-around-nat"><a class="header" href="#turn-traversal-using-relays-around-nat"><a href="networking/turn.html">TURN (Traversal Using Relays around NAT)</a></a></h3>
<ul>
<li>Relays traffic when direct connection fails</li>
<li>Fallback for restrictive NATs and firewalls</li>
<li>Bandwidth-intensive</li>
<li>Used with ICE in WebRTC</li>
<li>Server setup with coturn</li>
<li>Cost considerations</li>
</ul>
<h2 id="network-discovery"><a class="header" href="#network-discovery">Network Discovery</a></h2>
<h3 id="upnp-universal-plug-and-play"><a class="header" href="#upnp-universal-plug-and-play"><a href="networking/upnp.html">UPnP (Universal Plug and Play)</a></a></h3>
<ul>
<li>Automatic device discovery</li>
<li>Zero-configuration setup</li>
<li>SSDP (Simple Service Discovery Protocol)</li>
<li>Port forwarding (IGD)</li>
<li>Security considerations</li>
<li>Common device types</li>
</ul>
<h2 id="security-2"><a class="header" href="#security-2">Security</a></h2>
<h3 id="firewalls"><a class="header" href="#firewalls"><a href="networking/firewalls.html">Firewalls</a></a></h3>
<ul>
<li>Packet filtering</li>
<li>Stateful inspection</li>
<li>Application layer firewalls</li>
<li>Next-generation firewalls (NGFW)</li>
<li>iptables, ufw, firewalld configurations</li>
<li>NAT and port forwarding</li>
<li>Firewall architectures (DMZ, screened subnet)</li>
<li>Security best practices</li>
</ul>
<h2 id="quick-reference-5"><a class="header" href="#quick-reference-5">Quick Reference</a></h2>
<h3 id="protocol-port-numbers"><a class="header" href="#protocol-port-numbers">Protocol Port Numbers</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Port</th><th>Transport</th><th>Purpose</th></tr></thead><tbody>
<tr><td><strong>HTTP</strong></td><td>80</td><td>TCP</td><td>Web pages</td></tr>
<tr><td><strong>HTTPS</strong></td><td>443</td><td>TCP</td><td>Secure web</td></tr>
<tr><td><strong>SSH</strong></td><td>22</td><td>TCP</td><td>Secure shell</td></tr>
<tr><td><strong>FTP</strong></td><td>20/21</td><td>TCP</td><td>File transfer</td></tr>
<tr><td><strong>DNS</strong></td><td>53</td><td>UDP/TCP</td><td>Name resolution</td></tr>
<tr><td><strong>DHCP</strong></td><td>67/68</td><td>UDP</td><td>IP configuration</td></tr>
<tr><td><strong>SMTP</strong></td><td>25</td><td>TCP</td><td>Email sending</td></tr>
<tr><td><strong>POP3</strong></td><td>110</td><td>TCP</td><td>Email retrieval</td></tr>
<tr><td><strong>IMAP</strong></td><td>143</td><td>TCP</td><td>Email access</td></tr>
<tr><td><strong>STUN</strong></td><td>3478</td><td>UDP</td><td>NAT discovery</td></tr>
<tr><td><strong>SSDP</strong></td><td>1900</td><td>UDP</td><td>UPnP discovery</td></tr>
<tr><td><strong>mDNS</strong></td><td>5353</td><td>UDP</td><td>Local DNS</td></tr>
</tbody></table>
</div>
<h3 id="common-network-tools"><a class="header" href="#common-network-tools">Common Network Tools</a></h3>
<pre><code class="language-bash"># Connectivity Testing
ping &lt;host&gt;                    # Test reachability
traceroute &lt;host&gt;              # Trace route to host

# DNS Lookup
dig &lt;domain&gt;                   # DNS query
nslookup &lt;domain&gt;              # DNS lookup
host &lt;domain&gt;                  # Simple DNS lookup

# Network Configuration
ifconfig                       # Network interface config (legacy)
ip addr show                   # Show IP addresses
ip route show                  # Show routing table

# Port Scanning
netstat -tuln                  # Show listening ports
ss -tuln                       # Socket statistics
nc -zv &lt;host&gt; &lt;port&gt;           # Check if port is open

# Packet Capture
tcpdump -i any                 # Capture all traffic
tcpdump port 80                # Capture HTTP traffic
wireshark                      # GUI packet analyzer

# Service Discovery
avahi-browse -a                # Browse mDNS services
upnpc -l                       # List UPnP devices
</code></pre>
<h3 id="private-ip-address-ranges"><a class="header" href="#private-ip-address-ranges">Private IP Address Ranges</a></h3>
<pre><code>10.0.0.0        - 10.255.255.255     (10/8 prefix)
172.16.0.0      - 172.31.255.255     (172.16/12 prefix)
192.168.0.0     - 192.168.255.255    (192.168/16 prefix)
</code></pre>
<h3 id="common-subnet-masks"><a class="header" href="#common-subnet-masks">Common Subnet Masks</a></h3>
<div class="table-wrapper"><table><thead><tr><th>CIDR</th><th>Netmask</th><th>Hosts</th><th>Typical Use</th></tr></thead><tbody>
<tr><td>/8</td><td>255.0.0.0</td><td>16,777,214</td><td>Very large networks</td></tr>
<tr><td>/16</td><td>255.255.0.0</td><td>65,534</td><td>Large networks</td></tr>
<tr><td>/24</td><td>255.255.255.0</td><td>254</td><td>Small networks</td></tr>
<tr><td>/30</td><td>255.255.255.252</td><td>2</td><td>Point-to-point links</td></tr>
</tbody></table>
</div>
<h2 id="protocol-relationships"><a class="header" href="#protocol-relationships">Protocol Relationships</a></h2>
<pre><code>Application Layer:
  HTTP, FTP, SMTP, DNS, DHCP, SSH
       |
       v
Transport Layer:
  TCP (reliable) or UDP (fast)
       |
       v
Network Layer:
  IP (routing and addressing)
       |
       v
Data Link Layer:
  Ethernet, WiFi (MAC addresses)
       |
       v
Physical Layer:
  Cables, signals, physical media
</code></pre>
<h2 id="troubleshooting-flow"><a class="header" href="#troubleshooting-flow">Troubleshooting Flow</a></h2>
<pre><code>1. Physical Layer
   - Cable connected?
   - Link lights on?
   -&gt; Use: Visual inspection, ethtool

2. Data Link Layer
   - MAC address correct?
   - Switch working?
   -&gt; Use: arp -a, show mac address-table

3. Network Layer
   - IP address assigned?
   - Can ping gateway?
   - Routing correct?
   -&gt; Use: ip addr, ping, traceroute

4. Transport Layer
   - Port open?
   - Firewall blocking?
   - Service running?
   -&gt; Use: netstat, telnet, nc

5. Application Layer
   - Service configured correctly?
   - Authentication working?
   - Application logs?
   -&gt; Use: curl, application-specific tools
</code></pre>
<h2 id="security-best-practices-4"><a class="header" href="#security-best-practices-4">Security Best Practices</a></h2>
<h3 id="network-segmentation"><a class="header" href="#network-segmentation">Network Segmentation</a></h3>
<ul>
<li>Separate networks by function (guest, IoT, corporate)</li>
<li>Use VLANs for logical separation</li>
<li>Firewall rules between segments</li>
</ul>
<h3 id="access-control"><a class="header" href="#access-control">Access Control</a></h3>
<ul>
<li>Implement firewall rules (default deny)</li>
<li>Use strong authentication</li>
<li>Enable logging and monitoring</li>
<li>Regular security audits</li>
</ul>
<h3 id="encryption-2"><a class="header" href="#encryption-2">Encryption</a></h3>
<ul>
<li>Use HTTPS instead of HTTP</li>
<li>Enable DNS over HTTPS/TLS</li>
<li>Use VPN for remote access</li>
<li>Encrypt sensitive traffic</li>
</ul>
<h3 id="updates-and-patches"><a class="header" href="#updates-and-patches">Updates and Patches</a></h3>
<ul>
<li>Keep firmware updated</li>
<li>Patch vulnerabilities promptly</li>
<li>Disable unused services</li>
<li>Remove default credentials</li>
</ul>
<h2 id="common-scenarios"><a class="header" href="#common-scenarios">Common Scenarios</a></h2>
<h3 id="home-network-setup"><a class="header" href="#home-network-setup">Home Network Setup</a></h3>
<ol>
<li>Router assigns private IPs (192.168.1.x)</li>
<li>DHCP provides automatic configuration</li>
<li>NAT translates private to public IP</li>
<li>DNS resolves domain names (8.8.8.8)</li>
<li>Devices use mDNS for local discovery</li>
</ol>
<h3 id="webrtc-video-call"><a class="header" href="#webrtc-video-call">WebRTC Video Call</a></h3>
<ol>
<li>STUN discovers public IP addresses</li>
<li>ICE gathers connection candidates</li>
<li>Signaling server exchanges candidates</li>
<li>Direct P2P connection attempted</li>
<li>TURN relay used if P2P fails</li>
</ol>
<h3 id="smart-home-devices"><a class="header" href="#smart-home-devices">Smart Home Devices</a></h3>
<ol>
<li>Devices announce via mDNS (device.local)</li>
<li>UPnP enables automatic port forwarding</li>
<li>Devices discover each other (SSDP)</li>
<li>Control via local network</li>
<li>Cloud connection for remote access</li>
</ol>
<h2 id="further-learning"><a class="header" href="#further-learning">Further Learning</a></h2>
<h3 id="online-resources-1"><a class="header" href="#online-resources-1">Online Resources</a></h3>
<ul>
<li><a href="https://www.wireshark.org/docs/">Wireshark Tutorial</a></li>
<li><a href="http://www.tcpipguide.com/">TCP/IP Guide</a></li>
<li><a href="https://www.comptia.org/certifications/network">Network+ Certification</a></li>
<li><a href="https://www.rfc-editor.org/">RFC Editor</a></li>
</ul>
<h3 id="books-3"><a class="header" href="#books-3">Books</a></h3>
<ul>
<li><em>TCP/IP Illustrated</em> by W. Richard Stevens</li>
<li><em>Computer Networks</em> by Andrew Tanenbaum</li>
<li><em>Network Warrior</em> by Gary Donahue</li>
</ul>
<h3 id="practice"><a class="header" href="#practice">Practice</a></h3>
<ul>
<li>Set up home lab with VirtualBox/VMware</li>
<li>Use Packet Tracer for simulations</li>
<li>Capture and analyze traffic with Wireshark</li>
<li>Configure firewall rules</li>
<li>Set up services (DNS, DHCP, web server)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="osi-model-open-systems-interconnection"><a class="header" href="#osi-model-open-systems-interconnection">OSI Model (Open Systems Interconnection)</a></h1>
<h2 id="overview-42"><a class="header" href="#overview-42">Overview</a></h2>
<p>The OSI Model is a conceptual framework that standardizes network communication into 7 layers. Each layer has specific responsibilities and communicates with the layers directly above and below it.</p>
<h2 id="the-7-layers"><a class="header" href="#the-7-layers">The 7 Layers</a></h2>
<pre><code>Layer 7: Application    → User applications (HTTP, FTP, SMTP)
Layer 6: Presentation   → Data format, encryption (SSL/TLS)
Layer 5: Session        → Session management
Layer 4: Transport      → End-to-end delivery (TCP, UDP)
Layer 3: Network        → Routing, IP addressing
Layer 2: Data Link      → MAC addressing, switches
Layer 1: Physical       → Physical media, cables, signals
</code></pre>
<h2 id="memory-aids"><a class="header" href="#memory-aids">Memory Aids</a></h2>
<p><strong>Top to Bottom:</strong> All People Seem To Need Data Processing</p>
<p><strong>Bottom to Top:</strong> Please Do Not Throw Sausage Pizza Away</p>
<h2 id="layer-1-physical-layer"><a class="header" href="#layer-1-physical-layer">Layer 1: Physical Layer</a></h2>
<h3 id="purpose"><a class="header" href="#purpose">Purpose</a></h3>
<p>Transmits raw bits (0s and 1s) over physical media.</p>
<h3 id="responsibilities"><a class="header" href="#responsibilities">Responsibilities</a></h3>
<ul>
<li>Physical connection between devices</li>
<li>Bit transmission and reception</li>
<li>Voltage levels, timing, data rates</li>
<li>Cable specifications</li>
<li>Signal encoding</li>
</ul>
<h3 id="components"><a class="header" href="#components">Components</a></h3>
<ul>
<li><strong>Cables</strong>: Ethernet (Cat5e, Cat6), Fiber optic, Coaxial</li>
<li><strong>Hubs</strong>: Repeat signals to all ports</li>
<li><strong>Repeaters</strong>: Amplify signals</li>
<li><strong>Network Interface Cards (NICs)</strong></li>
</ul>
<h3 id="encoding-examples"><a class="header" href="#encoding-examples">Encoding Examples</a></h3>
<pre><code>Manchester Encoding (Ethernet):
0: High-to-low transition
1: Low-to-high transition

   1     0     1     1     0
  _|‾|_ _‾|_  _|‾|_ _|‾|_ _‾|_
</code></pre>
<h3 id="physical-media-types"><a class="header" href="#physical-media-types">Physical Media Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Medium</th><th>Speed</th><th>Distance</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>Cat5e</strong></td><td>1 Gbps</td><td>100m</td><td>Ethernet LAN</td></tr>
<tr><td><strong>Cat6</strong></td><td>10 Gbps</td><td>55m</td><td>High-speed LAN</td></tr>
<tr><td><strong>Fiber (MM)</strong></td><td>10 Gbps</td><td>550m</td><td>Building backbone</td></tr>
<tr><td><strong>Fiber (SM)</strong></td><td>100 Gbps</td><td>40km+</td><td>Long distance</td></tr>
<tr><td><strong>WiFi</strong></td><td>1-10 Gbps</td><td>100m</td><td>Wireless LAN</td></tr>
</tbody></table>
</div>
<h3 id="example-bit-transmission"><a class="header" href="#example-bit-transmission">Example: Bit Transmission</a></h3>
<pre><code>Computer A wants to send "Hello" (binary: 01001000...)

Physical Layer:
1. Convert bits to electrical signals
2. Transmit over cable at defined voltage levels
   High voltage (2.5V) = 1
   Low voltage (0V) = 0
3. Receiver samples signals and reconstructs bits
</code></pre>
<h2 id="layer-2-data-link-layer"><a class="header" href="#layer-2-data-link-layer">Layer 2: Data Link Layer</a></h2>
<h3 id="purpose-1"><a class="header" href="#purpose-1">Purpose</a></h3>
<p>Provides node-to-node data transfer with error detection.</p>
<h3 id="responsibilities-1"><a class="header" href="#responsibilities-1">Responsibilities</a></h3>
<ul>
<li>MAC (Media Access Control) addressing</li>
<li>Frame formatting</li>
<li>Error detection (CRC)</li>
<li>Flow control</li>
<li>Media access control</li>
</ul>
<h3 id="sub-layers"><a class="header" href="#sub-layers">Sub-layers</a></h3>
<ul>
<li><strong>LLC</strong> (Logical Link Control): Interface to Network Layer</li>
<li><strong>MAC</strong> (Media Access Control): Access to physical medium</li>
</ul>
<h3 id="components-1"><a class="header" href="#components-1">Components</a></h3>
<ul>
<li><strong>Switches</strong>: Forward frames based on MAC addresses</li>
<li><strong>Bridges</strong>: Connect network segments</li>
<li><strong>Network Interface Cards</strong>: Hardware MAC addresses</li>
</ul>
<h3 id="ethernet-frame-format"><a class="header" href="#ethernet-frame-format">Ethernet Frame Format</a></h3>
<pre><code>Preamble | SFD | Dest MAC | Src MAC | Type | Data | FCS
  7B     | 1B  |   6B     |   6B    | 2B   | 46-1500B | 4B

Preamble: 10101010... (synchronization)
SFD: Start Frame Delimiter (10101011)
Dest MAC: Destination hardware address
Src MAC: Source hardware address
Type: Protocol type (0x0800 = IPv4, 0x86DD = IPv6)
Data: Payload (46-1500 bytes)
FCS: Frame Check Sequence (CRC-32)
</code></pre>
<h3 id="mac-address-format"><a class="header" href="#mac-address-format">MAC Address Format</a></h3>
<pre><code>AA:BB:CC:DD:EE:FF (48 bits / 6 bytes)

AA:BB:CC - OUI (Organizationally Unique Identifier)
           Vendor identification
DD:EE:FF - Device identifier

Example: 00:1A:2B:3C:4D:5E
</code></pre>
<h3 id="example-frame-forwarding"><a class="header" href="#example-frame-forwarding">Example: Frame Forwarding</a></h3>
<pre><code>Switch MAC Address Table:
Port 1: AA:AA:AA:AA:AA:AA
Port 2: BB:BB:BB:BB:BB:BB
Port 3: CC:CC:CC:CC:CC:CC

Frame arrives on Port 1:
  Dest MAC: BB:BB:BB:BB:BB:BB

Switch looks up BB:BB:BB:BB:BB:BB → Port 2
Forwards frame only to Port 2
</code></pre>
<h3 id="arp-address-resolution-protocol"><a class="header" href="#arp-address-resolution-protocol">ARP (Address Resolution Protocol)</a></h3>
<p>Maps IP addresses to MAC addresses:</p>
<pre><code>Host A wants to send to 192.168.1.5

1. Check ARP cache
2. If not found, broadcast ARP request:
   "Who has 192.168.1.5? Tell 192.168.1.10"

3. Host with 192.168.1.5 replies:
   "192.168.1.5 is at AA:BB:CC:DD:EE:FF"

4. Cache the mapping
5. Send frame to AA:BB:CC:DD:EE:FF
</code></pre>
<h2 id="layer-3-network-layer"><a class="header" href="#layer-3-network-layer">Layer 3: Network Layer</a></h2>
<h3 id="purpose-2"><a class="header" href="#purpose-2">Purpose</a></h3>
<p>Routes packets across networks from source to destination.</p>
<h3 id="responsibilities-2"><a class="header" href="#responsibilities-2">Responsibilities</a></h3>
<ul>
<li>Logical addressing (IP addresses)</li>
<li>Routing</li>
<li>Packet forwarding</li>
<li>Fragmentation and reassembly</li>
<li>Error handling (ICMP)</li>
</ul>
<h3 id="components-2"><a class="header" href="#components-2">Components</a></h3>
<ul>
<li><strong>Routers</strong>: Forward packets between networks</li>
<li><strong>Layer 3 Switches</strong>: Routing at hardware speed</li>
</ul>
<h3 id="protocols"><a class="header" href="#protocols">Protocols</a></h3>
<ul>
<li><strong>IP</strong> (IPv4, IPv6): Internet Protocol</li>
<li><strong>ICMP</strong>: Error reporting and diagnostics</li>
<li><strong>OSPF, BGP, RIP</strong>: Routing protocols</li>
</ul>
<h3 id="example-routing-decision"><a class="header" href="#example-routing-decision">Example: Routing Decision</a></h3>
<pre><code>Router receives packet for 10.1.2.5

Routing Table:
  10.1.0.0/16    via 192.168.1.1
  10.1.2.0/24    via 192.168.1.2
  0.0.0.0/0      via 192.168.1.254 (default)

Longest prefix match: 10.1.2.0/24
Forward to 192.168.1.2
</code></pre>
<h3 id="packet-journey-example"><a class="header" href="#packet-journey-example">Packet Journey Example</a></h3>
<pre><code>PC1 (192.168.1.10) → Server (10.0.0.5)

Layer 3 decisions at each hop:
1. PC1: Not local subnet → Send to gateway (192.168.1.1)
2. Router1: Check route → Forward to Router2 (10.0.0.1)
3. Router2: Destination is local → Send to 10.0.0.5
</code></pre>
<h2 id="layer-4-transport-layer"><a class="header" href="#layer-4-transport-layer">Layer 4: Transport Layer</a></h2>
<h3 id="purpose-3"><a class="header" href="#purpose-3">Purpose</a></h3>
<p>Provides end-to-end communication and reliability.</p>
<h3 id="responsibilities-3"><a class="header" href="#responsibilities-3">Responsibilities</a></h3>
<ul>
<li>Segmentation and reassembly</li>
<li>Port addressing</li>
<li>Connection management</li>
<li>Flow control</li>
<li>Error recovery</li>
<li>Multiplexing</li>
</ul>
<h3 id="protocols-1"><a class="header" href="#protocols-1">Protocols</a></h3>
<ul>
<li><strong>TCP</strong>: Reliable, connection-oriented</li>
<li><strong>UDP</strong>: Unreliable, connectionless</li>
</ul>
<h3 id="port-numbers"><a class="header" href="#port-numbers">Port Numbers</a></h3>
<pre><code>Source Port: Identifies sending application
Dest Port: Identifies receiving application

Well-known ports (0-1023):
  80  - HTTP
  443 - HTTPS
  22  - SSH
  53  - DNS

Registered ports (1024-49151):
  3306 - MySQL
  5432 - PostgreSQL

Dynamic ports (49152-65535):
  Ephemeral ports for client connections
</code></pre>
<h3 id="example-tcp-connection"><a class="header" href="#example-tcp-connection">Example: TCP Connection</a></h3>
<pre><code>Client (192.168.1.10:5000) → Server (10.0.0.5:80)

Layer 4 provides:
1. Connection establishment (3-way handshake)
2. Reliable delivery (ACKs, retransmission)
3. Ordering (sequence numbers)
4. Flow control (window size)
5. Connection termination (4-way close)
</code></pre>
<h3 id="multiplexing-example"><a class="header" href="#multiplexing-example">Multiplexing Example</a></h3>
<pre><code>Web browser opens multiple connections:

Tab 1: 192.168.1.10:5000 → google.com:443
Tab 2: 192.168.1.10:5001 → github.com:443
Tab 3: 192.168.1.10:5002 → stackoverflow.com:443

Transport layer demultiplexes based on port
</code></pre>
<h2 id="layer-5-session-layer"><a class="header" href="#layer-5-session-layer">Layer 5: Session Layer</a></h2>
<h3 id="purpose-4"><a class="header" href="#purpose-4">Purpose</a></h3>
<p>Manages sessions (connections) between applications.</p>
<h3 id="responsibilities-4"><a class="header" href="#responsibilities-4">Responsibilities</a></h3>
<ul>
<li>Session establishment, maintenance, termination</li>
<li>Dialog control (half-duplex, full-duplex)</li>
<li>Synchronization</li>
<li>Token management</li>
</ul>
<h3 id="functions-1"><a class="header" href="#functions-1">Functions</a></h3>
<ul>
<li><strong>Authentication</strong>: Verify user credentials</li>
<li><strong>Authorization</strong>: Check permissions</li>
<li><strong>Session restoration</strong>: Resume interrupted sessions</li>
</ul>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<p><strong>RPC (Remote Procedure Call):</strong></p>
<pre><code>Client                          Server
  |                                |
  | Session established            |
  |&lt;------------------------------&gt;|
  | Call remote procedure          |
  |-------------------------------&gt;|
  | Maintain session state         |
  |&lt;------------------------------&gt;|
  | Session terminated             |
</code></pre>
<p><strong>NetBIOS:</strong></p>
<ul>
<li>Session management for file/printer sharing</li>
<li>Name registration and resolution</li>
</ul>
<h3 id="synchronization-points"><a class="header" href="#synchronization-points">Synchronization Points</a></h3>
<pre><code>File Transfer with checkpoints:

  0KB -------- 100KB -------- 200KB -------- 300KB
  ^            ^              ^              ^
  Sync 1       Sync 2         Sync 3         Complete

If failure at 250KB:
  Resume from Sync 2 (200KB)
</code></pre>
<h2 id="layer-6-presentation-layer"><a class="header" href="#layer-6-presentation-layer">Layer 6: Presentation Layer</a></h2>
<h3 id="purpose-5"><a class="header" href="#purpose-5">Purpose</a></h3>
<p>Translates data between application and network formats.</p>
<h3 id="responsibilities-5"><a class="header" href="#responsibilities-5">Responsibilities</a></h3>
<ul>
<li>Data format translation</li>
<li>Encryption/decryption</li>
<li>Compression/decompression</li>
<li>Character encoding</li>
</ul>
<h3 id="functions-2"><a class="header" href="#functions-2">Functions</a></h3>
<p><strong>1. Data Translation:</strong></p>
<pre><code>ASCII ↔ EBCDIC
Big-endian ↔ Little-endian
JSON ↔ XML ↔ Binary
</code></pre>
<p><strong>2. Encryption:</strong></p>
<pre><code>Plaintext: "Hello World"
    ↓
SSL/TLS Encryption
    ↓
Ciphertext: "3k#9$mL..."
</code></pre>
<p><strong>3. Compression:</strong></p>
<pre><code>Original: 1000 bytes
    ↓
GZIP Compression
    ↓
Compressed: 300 bytes
</code></pre>
<h3 id="examples-1"><a class="header" href="#examples-1">Examples</a></h3>
<p><strong>SSL/TLS:</strong></p>
<pre><code>Application sends: "GET / HTTP/1.1"
    ↓
Presentation Layer: Encrypts with TLS
    ↓
Transport Layer: Sends encrypted data
</code></pre>
<p><strong>Image Formats:</strong></p>
<ul>
<li>JPEG, PNG, GIF (compressed formats)</li>
<li>Format conversion for display</li>
</ul>
<p><strong>Character Encoding:</strong></p>
<pre><code>String "Hello" in different encodings:
ASCII:  48 65 6C 6C 6F
UTF-8:  48 65 6C 6C 6F
UTF-16: 00 48 00 65 00 6C 00 6C 00 6F
</code></pre>
<h2 id="layer-7-application-layer"><a class="header" href="#layer-7-application-layer">Layer 7: Application Layer</a></h2>
<h3 id="purpose-6"><a class="header" href="#purpose-6">Purpose</a></h3>
<p>Provides network services directly to user applications.</p>
<h3 id="responsibilities-6"><a class="header" href="#responsibilities-6">Responsibilities</a></h3>
<ul>
<li>Application-level protocols</li>
<li>User authentication</li>
<li>Data representation</li>
<li>Resource sharing</li>
</ul>
<h3 id="common-protocols"><a class="header" href="#common-protocols">Common Protocols</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Port</th><th>Purpose</th></tr></thead><tbody>
<tr><td><strong>HTTP/HTTPS</strong></td><td>80/443</td><td>Web browsing</td></tr>
<tr><td><strong>FTP</strong></td><td>20/21</td><td>File transfer</td></tr>
<tr><td><strong>SMTP</strong></td><td>25</td><td>Email sending</td></tr>
<tr><td><strong>POP3</strong></td><td>110</td><td>Email retrieval</td></tr>
<tr><td><strong>IMAP</strong></td><td>143</td><td>Email access</td></tr>
<tr><td><strong>DNS</strong></td><td>53</td><td>Name resolution</td></tr>
<tr><td><strong>DHCP</strong></td><td>67/68</td><td>IP configuration</td></tr>
<tr><td><strong>SSH</strong></td><td>22</td><td>Secure shell</td></tr>
<tr><td><strong>Telnet</strong></td><td>23</td><td>Remote terminal</td></tr>
<tr><td><strong>SNMP</strong></td><td>161</td><td>Network management</td></tr>
</tbody></table>
</div>
<h3 id="example-http-request"><a class="header" href="#example-http-request">Example: HTTP Request</a></h3>
<pre><code>User clicks link in browser

Application Layer (HTTP):
  GET /index.html HTTP/1.1
  Host: example.com

Presentation Layer:
  Encrypt with TLS (HTTPS)

Session Layer:
  Maintain HTTPS session

Transport Layer:
  TCP connection to port 443

Network Layer:
  Route to example.com's IP

Data Link Layer:
  Frame with MAC address

Physical Layer:
  Transmit bits on wire
</code></pre>
<h2 id="data-encapsulation"><a class="header" href="#data-encapsulation">Data Encapsulation</a></h2>
<h3 id="encapsulation-process-sending"><a class="header" href="#encapsulation-process-sending">Encapsulation Process (Sending)</a></h3>
<pre><code>Layer 7: User Data
            ↓
Layer 4: [TCP Header][Data] → Segment
            ↓
Layer 3: [IP Header][TCP Header][Data] → Packet
            ↓
Layer 2: [Eth Header][IP Header][TCP][Data][Eth Trailer] → Frame
            ↓
Layer 1: 010101110101... → Bits
</code></pre>
<h3 id="decapsulation-process-receiving"><a class="header" href="#decapsulation-process-receiving">Decapsulation Process (Receiving)</a></h3>
<pre><code>Layer 1: Receive bits
            ↓
Layer 2: Remove Ethernet header/trailer → Frame
            ↓
Layer 3: Remove IP header → Packet
            ↓
Layer 4: Remove TCP header → Segment
            ↓
Layer 7: Deliver data to application
</code></pre>
<h3 id="pdu-protocol-data-unit-names"><a class="header" href="#pdu-protocol-data-unit-names">PDU (Protocol Data Unit) Names</a></h3>
<pre><code>Layer 7-5: Data
Layer 4:   Segment (TCP) / Datagram (UDP)
Layer 3:   Packet
Layer 2:   Frame
Layer 1:   Bits
</code></pre>
<h2 id="complete-communication-example"><a class="header" href="#complete-communication-example">Complete Communication Example</a></h2>
<h3 id="sending-email-via-smtp"><a class="header" href="#sending-email-via-smtp">Sending Email via SMTP</a></h3>
<pre><code>Layer 7 (Application):
  - SMTP client: "MAIL FROM: alice@example.com"
  - Creates email message

Layer 6 (Presentation):
  - Encode as ASCII
  - Compress if needed
  - Encrypt with TLS

Layer 5 (Session):
  - Establish SMTP session
  - Authenticate with mail server

Layer 4 (Transport):
  - TCP connection to port 25
  - Segment data
  - Add source/dest ports

Layer 3 (Network):
  - Add IP header
  - Source: 192.168.1.10
  - Dest: 10.0.0.5 (mail server)
  - Route to destination

Layer 2 (Data Link):
  - Add MAC addresses
  - Create Ethernet frame
  - Error checking (CRC)

Layer 1 (Physical):
  - Convert to electrical signals
  - Transmit on cable
</code></pre>
<h2 id="troubleshooting-by-layer"><a class="header" href="#troubleshooting-by-layer">Troubleshooting by Layer</a></h2>
<h3 id="layer-1-physical-issues"><a class="header" href="#layer-1-physical-issues">Layer 1 (Physical) Issues</a></h3>
<pre><code>Symptoms: No connectivity, link down
Check:
  - Cable plugged in?
  - Cable damaged?
  - Port lights on?
  - Power on device?

Tools: Visual inspection, cable tester
</code></pre>
<h3 id="layer-2-data-link-issues"><a class="header" href="#layer-2-data-link-issues">Layer 2 (Data Link) Issues</a></h3>
<pre><code>Symptoms: Can't reach other devices on LAN
Check:
  - MAC address conflicts?
  - Switch port errors?
  - VLAN configuration?
  - ARP table correct?

Tools: arp -a, show mac address-table
</code></pre>
<h3 id="layer-3-network-issues"><a class="header" href="#layer-3-network-issues">Layer 3 (Network) Issues</a></h3>
<pre><code>Symptoms: Can't reach remote networks
Check:
  - IP address correct?
  - Subnet mask correct?
  - Gateway configured?
  - Routing table?

Tools: ping, traceroute, ip route
</code></pre>
<h3 id="layer-4-transport-issues"><a class="header" href="#layer-4-transport-issues">Layer 4 (Transport) Issues</a></h3>
<pre><code>Symptoms: Can't connect to specific service
Check:
  - Port open?
  - Firewall blocking?
  - Service running?
  - TCP handshake succeeds?

Tools: telnet, nc (netcat), netstat
</code></pre>
<h3 id="layer-7-application-issues"><a class="header" href="#layer-7-application-issues">Layer 7 (Application) Issues</a></h3>
<pre><code>Symptoms: Service accessible but not working
Check:
  - Application configuration?
  - Authentication failing?
  - Correct protocol version?
  - Application logs?

Tools: curl, application-specific tools
</code></pre>
<h2 id="osi-vs-real-protocols"><a class="header" href="#osi-vs-real-protocols">OSI vs Real Protocols</a></h2>
<h3 id="where-real-protocols-fit"><a class="header" href="#where-real-protocols-fit">Where Real Protocols Fit</a></h3>
<pre><code>OSI Layer          Protocol Examples
---------------------------------------
7 - Application    HTTP, FTP, SMTP, DNS
6 - Presentation   SSL/TLS, JPEG, MPEG
5 - Session        NetBIOS, RPC
4 - Transport      TCP, UDP
3 - Network        IP, ICMP, OSPF, BGP
2 - Data Link      Ethernet, WiFi, PPP
1 - Physical       10BASE-T, 100BASE-TX
</code></pre>
<h3 id="tcpip-model-mapping"><a class="header" href="#tcpip-model-mapping">TCP/IP Model Mapping</a></h3>
<pre><code>OSI Model              TCP/IP Model
-----------------------------------------
7 - Application  
6 - Presentation   → Application
5 - Session      
4 - Transport       → Transport
3 - Network         → Internet
2 - Data Link    
1 - Physical       → Network Access
</code></pre>
<h2 id="benefits-of-layered-approach"><a class="header" href="#benefits-of-layered-approach">Benefits of Layered Approach</a></h2>
<h3 id="1-modularity"><a class="header" href="#1-modularity">1. Modularity</a></h3>
<pre><code>Change one layer without affecting others
Example: Switch from WiFi to Ethernet
         (Only Layer 1/2 change, others unaffected)
</code></pre>
<h3 id="2-standardization"><a class="header" href="#2-standardization">2. Standardization</a></h3>
<pre><code>Multiple vendors can interoperate
Example: Any HTTP client can talk to any HTTP server
</code></pre>
<h3 id="3-troubleshooting"><a class="header" href="#3-troubleshooting">3. Troubleshooting</a></h3>
<pre><code>Systematic approach from bottom up:
1. Physical: Cable OK?
2. Data Link: Connected to switch?
3. Network: Can ping gateway?
4. Transport: Port open?
5. Application: Service running?
</code></pre>
<h3 id="4-development"><a class="header" href="#4-development">4. Development</a></h3>
<pre><code>Developers focus on their layer
Example: Web developer uses HTTP (Layer 7)
         Doesn't need to know about TCP internals
</code></pre>
<h2 id="eli10-16"><a class="header" href="#eli10-16">ELI10</a></h2>
<p>The OSI Model is like sending a letter through the mail:</p>
<p><strong>Layer 7 (Application):</strong> You write a letter</p>
<ul>
<li>What you want to say</li>
</ul>
<p><strong>Layer 6 (Presentation):</strong> You format it nicely</p>
<ul>
<li>Maybe encrypt it (secret code)</li>
<li>Compress it (make it smaller)</li>
</ul>
<p><strong>Layer 5 (Session):</strong> You start a conversation</p>
<ul>
<li>"Dear John" and "Sincerely, Alice"</li>
</ul>
<p><strong>Layer 4 (Transport):</strong> You put it in envelopes</p>
<ul>
<li>Split into pages if too long</li>
<li>Number the pages so they can be reassembled</li>
</ul>
<p><strong>Layer 3 (Network):</strong> You write the address</p>
<ul>
<li>Where it's going</li>
<li>Where it's from</li>
</ul>
<p><strong>Layer 2 (Data Link):</strong> Post office processes it</p>
<ul>
<li>Local post office routing</li>
<li>Check if envelope is damaged</li>
</ul>
<p><strong>Layer 1 (Physical):</strong> The mail truck</p>
<ul>
<li>Physical delivery</li>
<li>Roads, trucks, planes</li>
</ul>
<p>Each layer does its job without worrying about the others!</p>
<h2 id="further-resources-22"><a class="header" href="#further-resources-22">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc1122">RFC 1122 - Internet Standards</a></li>
<li><a href="https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/">OSI Model in Detail</a></li>
<li><a href="https://www.comptia.org/certifications/network">Network+ Certification</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tcpip-model-1"><a class="header" href="#tcpip-model-1">TCP/IP Model</a></h1>
<h2 id="overview-43"><a class="header" href="#overview-43">Overview</a></h2>
<p>The TCP/IP Model (also called Internet Protocol Suite) is a practical, 4-layer networking model that describes how data is transmitted over the internet. Unlike the OSI Model, which is theoretical, TCP/IP is the actual model used in modern networks.</p>
<h2 id="tcpip-vs-osi-model"><a class="header" href="#tcpip-vs-osi-model">TCP/IP vs OSI Model</a></h2>
<pre><code>OSI Model (7 Layers)           TCP/IP Model (4 Layers)
---------------------------------------------------
7. Application           
6. Presentation              →  4. Application
5. Session               
4. Transport                  →  3. Transport
3. Network                    →  2. Internet
2. Data Link             
1. Physical                  →  1. Network Access
</code></pre>
<h2 id="the-4-layers"><a class="header" href="#the-4-layers">The 4 Layers</a></h2>
<h3 id="layer-1-network-access-link-layer"><a class="header" href="#layer-1-network-access-link-layer">Layer 1: Network Access (Link Layer)</a></h3>
<p><strong>Purpose:</strong> Physical transmission of data on a network</p>
<p><strong>Combines:</strong></p>
<ul>
<li>OSI Physical Layer (Layer 1)</li>
<li>OSI Data Link Layer (Layer 2)</li>
</ul>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Physical addressing (MAC)</li>
<li>Media access control</li>
<li>Frame formatting</li>
<li>Error detection</li>
<li>Physical transmission</li>
</ul>
<p><strong>Protocols/Technologies:</strong></p>
<ul>
<li>Ethernet (IEEE 802.3)</li>
<li>WiFi (IEEE 802.11)</li>
<li>PPP (Point-to-Point Protocol)</li>
<li>ARP (Address Resolution Protocol)</li>
<li>RARP (Reverse ARP)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code>Data from Internet Layer

      ↓

Add Ethernet Header:
  [Dest MAC: AA:BB:CC:DD:EE:FF]
  [Src MAC: 11:22:33:44:55:66]
  [Type: 0x0800 (IPv4)]
  [Data]
  [CRC Checksum]

      ↓

Convert to bits and transmit
</code></pre>
<h3 id="layer-2-internet-layer"><a class="header" href="#layer-2-internet-layer">Layer 2: Internet Layer</a></h3>
<p><strong>Purpose:</strong> Routes packets across networks</p>
<p><strong>Equivalent to:</strong> OSI Network Layer (Layer 3)</p>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Logical addressing (IP)</li>
<li>Routing between networks</li>
<li>Packet forwarding</li>
<li>Fragmentation and reassembly</li>
<li>Error reporting</li>
</ul>
<p><strong>Key Protocols:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Purpose</th><th>RFC</th></tr></thead><tbody>
<tr><td><strong>IP</strong></td><td>Internet Protocol (IPv4, IPv6)</td><td>RFC 791, 8200</td></tr>
<tr><td><strong>ICMP</strong></td><td>Error reporting, diagnostics</td><td>RFC 792</td></tr>
<tr><td><strong>IGMP</strong></td><td>Multicast group management</td><td>RFC 1112</td></tr>
<tr><td><strong>IPsec</strong></td><td>Security (encryption, authentication)</td><td>RFC 4301</td></tr>
</tbody></table>
</div>
<p><strong>Example: Packet Routing</strong></p>
<pre><code>Source: 192.168.1.10 → Destination: 10.0.0.5

IP Layer adds header:
  [Version: 4]
  [TTL: 64]
  [Protocol: 6 (TCP)]
  [Source IP: 192.168.1.10]
  [Dest IP: 10.0.0.5]
  [Data]

Router at each hop:
1. Decrements TTL
2. Checks routing table
3. Forwards to next hop
4. Recalculates checksum
</code></pre>
<h3 id="layer-3-transport-layer"><a class="header" href="#layer-3-transport-layer">Layer 3: Transport Layer</a></h3>
<p><strong>Purpose:</strong> End-to-end communication between applications</p>
<p><strong>Equivalent to:</strong> OSI Transport Layer (Layer 4)</p>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Port-based multiplexing</li>
<li>Connection management</li>
<li>Reliability (for TCP)</li>
<li>Flow control</li>
<li>Error recovery</li>
</ul>
<p><strong>Key Protocols:</strong></p>
<h4 id="tcp-transmission-control-protocol-1"><a class="header" href="#tcp-transmission-control-protocol-1">TCP (Transmission Control Protocol)</a></h4>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Connection-oriented</li>
<li>Reliable delivery</li>
<li>Ordered delivery</li>
<li>Flow control</li>
<li>Congestion control</li>
</ul>
<p><strong>TCP Segment:</strong></p>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |       Destination Port        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Sequence Number                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Acknowledgment Number                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Offset|  Res  |     Flags     |            Window             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Checksum            |         Urgent Pointer        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Data                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<p><strong>TCP Connection (3-Way Handshake):</strong></p>
<pre><code>Client                          Server
  |                                |
  | SYN (seq=100)                  |
  |-------------------------------&gt;|
  |                                |
  | SYN-ACK (seq=200, ack=101)     |
  |&lt;-------------------------------|
  |                                |
  | ACK (seq=101, ack=201)         |
  |-------------------------------&gt;|
  |                                |
  | Connection Established         |
</code></pre>
<h4 id="udp-user-datagram-protocol-1"><a class="header" href="#udp-user-datagram-protocol-1">UDP (User Datagram Protocol)</a></h4>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Connectionless</li>
<li>Unreliable</li>
<li>No ordering guarantee</li>
<li>Low overhead</li>
<li>Fast</li>
</ul>
<p><strong>UDP Datagram:</strong></p>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |       Destination Port        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|            Length             |           Checksum            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Data                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<p><strong>UDP Communication:</strong></p>
<pre><code>Client                          Server
  |                                |
  | UDP Datagram                   |
  |-------------------------------&gt;|
  |                                |
  | No acknowledgment              |

Fire and forget!
</code></pre>
<h3 id="layer-4-application-layer"><a class="header" href="#layer-4-application-layer">Layer 4: Application Layer</a></h3>
<p><strong>Purpose:</strong> Provides network services to applications</p>
<p><strong>Combines:</strong></p>
<ul>
<li>OSI Application Layer (Layer 7)</li>
<li>OSI Presentation Layer (Layer 6)</li>
<li>OSI Session Layer (Layer 5)</li>
</ul>
<p><strong>Responsibilities:</strong></p>
<ul>
<li>Application-specific protocols</li>
<li>Data formatting</li>
<li>Session management</li>
<li>User authentication</li>
</ul>
<p><strong>Common Protocols:</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Protocol</th><th>Port</th><th>Transport</th><th>Purpose</th></tr></thead><tbody>
<tr><td><strong>HTTP</strong></td><td>80</td><td>TCP</td><td>Web pages</td></tr>
<tr><td><strong>HTTPS</strong></td><td>443</td><td>TCP</td><td>Secure web</td></tr>
<tr><td><strong>FTP</strong></td><td>20/21</td><td>TCP</td><td>File transfer</td></tr>
<tr><td><strong>SFTP</strong></td><td>22</td><td>TCP</td><td>Secure file transfer</td></tr>
<tr><td><strong>SSH</strong></td><td>22</td><td>TCP</td><td>Secure shell</td></tr>
<tr><td><strong>Telnet</strong></td><td>23</td><td>TCP</td><td>Remote terminal</td></tr>
<tr><td><strong>SMTP</strong></td><td>25</td><td>TCP</td><td>Send email</td></tr>
<tr><td><strong>DNS</strong></td><td>53</td><td>UDP/TCP</td><td>Name resolution</td></tr>
<tr><td><strong>DHCP</strong></td><td>67/68</td><td>UDP</td><td>IP configuration</td></tr>
<tr><td><strong>TFTP</strong></td><td>69</td><td>UDP</td><td>Simple file transfer</td></tr>
<tr><td><strong>HTTP/3</strong></td><td>443</td><td>UDP (QUIC)</td><td>Modern web</td></tr>
<tr><td><strong>NTP</strong></td><td>123</td><td>UDP</td><td>Time sync</td></tr>
<tr><td><strong>SNMP</strong></td><td>161/162</td><td>UDP</td><td>Network management</td></tr>
<tr><td><strong>POP3</strong></td><td>110</td><td>TCP</td><td>Email retrieval</td></tr>
<tr><td><strong>IMAP</strong></td><td>143</td><td>TCP</td><td>Email access</td></tr>
<tr><td><strong>RDP</strong></td><td>3389</td><td>TCP</td><td>Remote desktop</td></tr>
</tbody></table>
</div>
<p><strong>Example: HTTP Request</strong></p>
<pre><code>Application Layer creates:

GET /index.html HTTP/1.1
Host: www.example.com
User-Agent: Mozilla/5.0
Accept: text/html

      ↓

Transport Layer (TCP):
  - Add TCP header
  - Source port: 54321
  - Dest port: 80
  - Establish connection

      ↓

Internet Layer (IP):
  - Add IP header
  - Resolve www.example.com to IP
  - Source: 192.168.1.10
  - Dest: 93.184.216.34

      ↓

Network Access Layer:
  - ARP for next hop MAC
  - Add Ethernet frame
  - Transmit bits
</code></pre>
<h2 id="data-encapsulation-in-tcpip"><a class="header" href="#data-encapsulation-in-tcpip">Data Encapsulation in TCP/IP</a></h2>
<h3 id="sending-data"><a class="header" href="#sending-data">Sending Data</a></h3>
<pre><code>Step 1: Application creates data
  "GET /index.html HTTP/1.1\r\n..."

Step 2: Transport Layer adds header
  [TCP Header][HTTP Request] → TCP Segment

Step 3: Internet Layer adds header
  [IP Header][TCP Header][HTTP Request] → IP Packet

Step 4: Network Access adds header/trailer
  [Eth Header][IP][TCP][HTTP][Eth Trailer] → Ethernet Frame

Step 5: Convert to bits
  01001000110101... → Bits on wire
</code></pre>
<h3 id="receiving-data"><a class="header" href="#receiving-data">Receiving Data</a></h3>
<pre><code>Step 1: Receive bits, extract frame
  [Eth Header][IP][TCP][HTTP][Eth Trailer]

Step 2: Check Ethernet checksum, remove header
  [IP Header][TCP Header][HTTP Request]

Step 3: Check IP checksum, route to TCP
  [TCP Header][HTTP Request]

Step 4: Process TCP segment, reassemble
  "GET /index.html HTTP/1.1\r\n..."

Step 5: Deliver to HTTP server application
</code></pre>
<h2 id="complete-communication-example-1"><a class="header" href="#complete-communication-example-1">Complete Communication Example</a></h2>
<h3 id="browsing-a-website"><a class="header" href="#browsing-a-website">Browsing a Website</a></h3>
<pre><code>User types: http://www.example.com

=== Application Layer ===
1. Browser resolves domain name
   DNS Query: "What's the IP of www.example.com?"
   DNS Response: "93.184.216.34"

2. Browser creates HTTP request
   GET / HTTP/1.1
   Host: www.example.com

=== Transport Layer ===
3. TCP connection to port 80
   - 3-way handshake
   - Establish connection
   - Segment data if needed

=== Internet Layer ===
4. Create IP packet
   - Source: 192.168.1.10
   - Dest: 93.184.216.34
   - Protocol: TCP (6)
   - Add to routing queue

5. Routing
   - Check routing table
   - Forward to default gateway
   - Each router forwards packet

=== Network Access Layer ===
6. Resolve next hop MAC (ARP)
   - "Who has 192.168.1.1?"
   - "192.168.1.1 is at AA:BB:CC:DD:EE:FF"

7. Create Ethernet frame
   - Dest MAC: Gateway's MAC
   - Src MAC: PC's MAC
   - Add checksum

8. Transmit on physical medium
   - Convert to electrical signals
   - Send on Ethernet cable

=== Server Processes Request ===
9. Server receives, decapsulates
10. HTTP server processes request
11. Sends response back

=== Browser Receives Response ===
12. Decapsulate all layers
13. Browser renders HTML
</code></pre>
<h2 id="protocol-interactions"><a class="header" href="#protocol-interactions">Protocol Interactions</a></h2>
<h3 id="dns-resolution"><a class="header" href="#dns-resolution">DNS Resolution</a></h3>
<pre><code>Application: DNS client
Transport: UDP port 53
Internet: IP packet to DNS server
Network Access: Ethernet to gateway

Query: www.example.com → 93.184.216.34
</code></pre>
<h3 id="email-sending-smtp"><a class="header" href="#email-sending-smtp">Email Sending (SMTP)</a></h3>
<pre><code>Application: SMTP client (port 25)
Transport: TCP connection
Internet: Route to mail server IP
Network Access: Frame to gateway

MAIL FROM: alice@example.com
RCPT TO: bob@example.com
DATA
Subject: Hello
...
</code></pre>
<h3 id="file-transfer-ftp"><a class="header" href="#file-transfer-ftp">File Transfer (FTP)</a></h3>
<pre><code>Application: FTP client
Transport:
  - Control: TCP port 21
  - Data: TCP port 20
Internet: IP to FTP server
Network Access: Ethernet frames

Commands on port 21:
  USER alice
  PASS secret123
  RETR file.txt

Data transfer on port 20
</code></pre>
<h2 id="port-numbers-1"><a class="header" href="#port-numbers-1">Port Numbers</a></h2>
<h3 id="well-known-ports-0-1023"><a class="header" href="#well-known-ports-0-1023">Well-Known Ports (0-1023)</a></h3>
<p>Require root/admin privileges:</p>
<pre><code>20/21   FTP
22      SSH
23      Telnet
25      SMTP
53      DNS
67/68   DHCP
80      HTTP
110     POP3
143     IMAP
443     HTTPS
</code></pre>
<h3 id="registered-ports-1024-49151"><a class="header" href="#registered-ports-1024-49151">Registered Ports (1024-49151)</a></h3>
<p>For specific services:</p>
<pre><code>3306    MySQL
5432    PostgreSQL
6379    Redis
8080    HTTP alternate
8443    HTTPS alternate
27017   MongoDB
</code></pre>
<h3 id="dynamicprivate-ports-49152-65535"><a class="header" href="#dynamicprivate-ports-49152-65535">Dynamic/Private Ports (49152-65535)</a></h3>
<p>Used by clients for outgoing connections:</p>
<pre><code>Client opens connection:
  Source: 192.168.1.10:54321 (dynamic)
  Dest: 93.184.216.34:80 (well-known)
</code></pre>
<h2 id="tcpip-configuration"><a class="header" href="#tcpip-configuration">TCP/IP Configuration</a></h2>
<h3 id="manual-configuration"><a class="header" href="#manual-configuration">Manual Configuration</a></h3>
<pre><code class="language-bash"># Set IP address
sudo ip addr add 192.168.1.100/24 dev eth0

# Set default gateway
sudo ip route add default via 192.168.1.1

# Set DNS server
echo "nameserver 8.8.8.8" &gt;&gt; /etc/resolv.conf
</code></pre>
<h3 id="dhcp-dynamic-host-configuration-protocol"><a class="header" href="#dhcp-dynamic-host-configuration-protocol">DHCP (Dynamic Host Configuration Protocol)</a></h3>
<pre><code>Client                          DHCP Server
  |                                |
  | DHCP Discover (broadcast)      |
  |-------------------------------&gt;|
  |                                |
  | DHCP Offer                     |
  |&lt;-------------------------------|
  |   IP: 192.168.1.100            |
  |   Netmask: 255.255.255.0       |
  |   Gateway: 192.168.1.1         |
  |   DNS: 8.8.8.8                 |
  |                                |
  | DHCP Request                   |
  |-------------------------------&gt;|
  |                                |
  | DHCP ACK                       |
  |&lt;-------------------------------|
  |                                |

Client now configured with:
  IP Address: 192.168.1.100
  Subnet Mask: 255.255.255.0
  Default Gateway: 192.168.1.1
  DNS Server: 8.8.8.8
  Lease Time: 24 hours
</code></pre>
<h2 id="tcpip-troubleshooting"><a class="header" href="#tcpip-troubleshooting">TCP/IP Troubleshooting</a></h2>
<h3 id="layer-1-network-access"><a class="header" href="#layer-1-network-access">Layer 1: Network Access</a></h3>
<pre><code class="language-bash"># Check physical connection
ip link show
ethtool eth0

# Check link status
cat /sys/class/net/eth0/carrier

Symptoms: No link light, cable unplugged
</code></pre>
<h3 id="layer-2-network-access-data-link"><a class="header" href="#layer-2-network-access-data-link">Layer 2: Network Access (Data Link)</a></h3>
<pre><code class="language-bash"># Check ARP table
arp -a
ip neigh show

# Check switch port
show mac address-table

Symptoms: Can't reach local devices
</code></pre>
<h3 id="layer-3-internet"><a class="header" href="#layer-3-internet">Layer 3: Internet</a></h3>
<pre><code class="language-bash"># Check IP configuration
ip addr show
ifconfig

# Test gateway reachability
ping 192.168.1.1

# Check routing
ip route show
traceroute 8.8.8.8

Symptoms: No internet, can't reach remote hosts
</code></pre>
<h3 id="layer-4-transport"><a class="header" href="#layer-4-transport">Layer 4: Transport</a></h3>
<pre><code class="language-bash"># Check listening ports
netstat -tuln
ss -tuln

# Test port connectivity
telnet example.com 80
nc -zv example.com 80

# Check firewall
iptables -L
ufw status

Symptoms: Connection refused, timeout
</code></pre>
<h3 id="layer-5-application"><a class="header" href="#layer-5-application">Layer 5: Application</a></h3>
<pre><code class="language-bash"># Test HTTP
curl -v http://example.com

# Test DNS
dig example.com
nslookup example.com

# Test SMTP
telnet mail.example.com 25

Symptoms: Service not responding correctly
</code></pre>
<h2 id="tcpip-security"><a class="header" href="#tcpip-security">TCP/IP Security</a></h2>
<h3 id="common-vulnerabilities"><a class="header" href="#common-vulnerabilities">Common Vulnerabilities</a></h3>
<p><strong>1. IP Spoofing</strong></p>
<pre><code>Attacker sends packets with fake source IP
Victim: 10.0.0.5
Attacker pretends to be: 10.0.0.5
</code></pre>
<p><strong>2. TCP SYN Flood</strong></p>
<pre><code>Attacker sends many SYN packets
Server waits for ACK (never comes)
Server resources exhausted
</code></pre>
<p><strong>3. Man-in-the-Middle</strong></p>
<pre><code>Attacker intercepts traffic between client and server
Can read or modify data
</code></pre>
<h3 id="security-protocols"><a class="header" href="#security-protocols">Security Protocols</a></h3>
<p><strong>IPsec (Internet Protocol Security)</strong></p>
<pre><code>Provides:
  - Authentication Header (AH)
  - Encapsulating Security Payload (ESP)
  - Encryption and authentication

Used for VPNs
</code></pre>
<p><strong>TLS/SSL (Transport Layer Security)</strong></p>
<pre><code>Encrypts application data
Provides:
  - Confidentiality (encryption)
  - Integrity (tampering detection)
  - Authentication (certificates)

Used for HTTPS, SMTPS, etc.
</code></pre>
<h2 id="tcpip-performance-tuning"><a class="header" href="#tcpip-performance-tuning">TCP/IP Performance Tuning</a></h2>
<h3 id="tcp-window-scaling"><a class="header" href="#tcp-window-scaling">TCP Window Scaling</a></h3>
<pre><code>Default window: 65,535 bytes
With scaling: Up to 1 GB

Improves throughput on high-latency links
</code></pre>
<h3 id="tcp-congestion-control-algorithms"><a class="header" href="#tcp-congestion-control-algorithms">TCP Congestion Control Algorithms</a></h3>
<pre><code>- Tahoe: Original algorithm
- Reno: Fast recovery
- CUBIC: Default in Linux (good for high-speed)
- BBR: Google's algorithm (optimal bandwidth)
</code></pre>
<h3 id="monitoring-tcp-performance"><a class="header" href="#monitoring-tcp-performance">Monitoring TCP Performance</a></h3>
<pre><code class="language-bash"># TCP statistics
netstat -s
ss -s

# Per-connection statistics
ss -ti

# Packet captures
tcpdump -i any -w capture.pcap
</code></pre>
<h2 id="eli10-17"><a class="header" href="#eli10-17">ELI10</a></h2>
<p>TCP/IP is how computers talk to each other on the internet:</p>
<p><strong>Layer 1: Network Access (The Road)</strong></p>
<ul>
<li>Physical cables and WiFi</li>
<li>Like the road system for mail delivery</li>
</ul>
<p><strong>Layer 2: Internet (The Address)</strong></p>
<ul>
<li>IP addresses (like street addresses)</li>
<li>Routers (like post offices) send packets the right way</li>
</ul>
<p><strong>Layer 3: Transport (The Envelope)</strong></p>
<ul>
<li>TCP: Certified mail (guaranteed delivery, in order)</li>
<li>UDP: Postcard (fast, but might get lost)</li>
</ul>
<p><strong>Layer 4: Application (The Message)</strong></p>
<ul>
<li>The actual letter you're sending</li>
<li>HTTP for websites, SMTP for email, etc.</li>
</ul>
<p><strong>Example: Loading a website</strong></p>
<ol>
<li>You type www.google.com</li>
<li>DNS finds Google's address (142.250.185.78)</li>
<li>TCP opens a connection (handshake)</li>
<li>HTTP sends "Give me the homepage"</li>
<li>Routers deliver packets to Google</li>
<li>Google sends back the HTML</li>
<li>Your browser shows the page</li>
</ol>
<p>Each layer does its job without worrying about the others!</p>
<h2 id="further-resources-23"><a class="header" href="#further-resources-23">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc1122">RFC 1122 - Requirements for Internet Hosts</a></li>
<li><a href="https://tools.ietf.org/html/rfc1123">RFC 1123 - Application and Support</a></li>
<li><a href="https://en.wikipedia.org/wiki/TCP/IP_Illustrated">TCP/IP Illustrated by W. Richard Stevens</a></li>
<li><a href="http://www.tcpipguide.com/">TCP/IP Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ip-internet-protocol-1"><a class="header" href="#ip-internet-protocol-1">IP (Internet Protocol)</a></h1>
<h2 id="overview-44"><a class="header" href="#overview-44">Overview</a></h2>
<p>IP (Internet Protocol) is the network layer protocol responsible for addressing and routing packets across networks. It provides the addressing scheme that allows devices to find each other on the internet.</p>
<h2 id="ip-versions"><a class="header" href="#ip-versions">IP Versions</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>IPv4</th><th>IPv6</th></tr></thead><tbody>
<tr><td><strong>Address Size</strong></td><td>32 bits</td><td>128 bits</td></tr>
<tr><td><strong>Address Format</strong></td><td>Decimal (192.168.1.1)</td><td>Hexadecimal (2001:db8::1)</td></tr>
<tr><td><strong>Total Addresses</strong></td><td>~4.3 billion</td><td>340 undecillion</td></tr>
<tr><td><strong>Header Size</strong></td><td>20-60 bytes</td><td>40 bytes (fixed)</td></tr>
<tr><td><strong>Checksum</strong></td><td>Yes</td><td>No (delegated to link layer)</td></tr>
<tr><td><strong>Fragmentation</strong></td><td>By routers</td><td>Source only</td></tr>
<tr><td><strong>Broadcast</strong></td><td>Yes</td><td>No (uses multicast)</td></tr>
<tr><td><strong>Configuration</strong></td><td>Manual or DHCP</td><td>SLAAC or DHCPv6</td></tr>
<tr><td><strong>IPSec</strong></td><td>Optional</td><td>Mandatory</td></tr>
</tbody></table>
</div>
<h2 id="ipv4-packet-format"><a class="header" href="#ipv4-packet-format">IPv4 Packet Format</a></h2>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version|  IHL  |Type of Service|          Total Length         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Identification        |Flags|      Fragment Offset    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Time to Live |    Protocol   |         Header Checksum       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Source Address                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Destination Address                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Options (if IHL &gt; 5)                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Data                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="ipv4-header-fields"><a class="header" href="#ipv4-header-fields">IPv4 Header Fields</a></h3>
<ol>
<li><strong>Version</strong> (4 bits): IP version (4 for IPv4)</li>
<li><strong>IHL</strong> (4 bits): Internet Header Length (5-15, in 32-bit words)</li>
<li><strong>Type of Service</strong> (8 bits): QoS, priority</li>
<li><strong>Total Length</strong> (16 bits): Entire packet size (max 65,535 bytes)</li>
<li><strong>Identification</strong> (16 bits): Fragment identification</li>
<li><strong>Flags</strong> (3 bits):
<ul>
<li>Bit 0: Reserved (must be 0)</li>
<li>Bit 1: Don't Fragment (DF)</li>
<li>Bit 2: More Fragments (MF)</li>
</ul>
</li>
<li><strong>Fragment Offset</strong> (13 bits): Position of fragment</li>
<li><strong>Time to Live (TTL)</strong> (8 bits): Max hops (decremented at each router)</li>
<li><strong>Protocol</strong> (8 bits): Upper layer protocol (6=TCP, 17=UDP, 1=ICMP)</li>
<li><strong>Header Checksum</strong> (16 bits): Error detection for header</li>
<li><strong>Source Address</strong> (32 bits): Sender IP address</li>
<li><strong>Destination Address</strong> (32 bits): Receiver IP address</li>
<li><strong>Options</strong> (variable): Rarely used (security, timestamp, etc.)</li>
</ol>
<h2 id="ipv4-address-classes"><a class="header" href="#ipv4-address-classes">IPv4 Address Classes</a></h2>
<h3 id="traditional-class-system-obsolete-replaced-by-cidr"><a class="header" href="#traditional-class-system-obsolete-replaced-by-cidr">Traditional Class System (Obsolete, replaced by CIDR)</a></h3>
<pre><code>Class A: 0.0.0.0     to 127.255.255.255   /8   (16 million hosts)
         Network: 8 bits, Host: 24 bits

Class B: 128.0.0.0   to 191.255.255.255   /16  (65,536 hosts)
         Network: 16 bits, Host: 16 bits

Class C: 192.0.0.0   to 223.255.255.255   /24  (254 hosts)
         Network: 24 bits, Host: 8 bits

Class D: 224.0.0.0   to 239.255.255.255   (Multicast)

Class E: 240.0.0.0   to 255.255.255.255   (Reserved)
</code></pre>
<h2 id="private-ip-address-ranges-1"><a class="header" href="#private-ip-address-ranges-1">Private IP Address Ranges</a></h2>
<pre><code>10.0.0.0        - 10.255.255.255     (10/8 prefix)
172.16.0.0      - 172.31.255.255     (172.16/12 prefix)
192.168.0.0     - 192.168.255.255    (192.168/16 prefix)

Used in LANs, not routed on internet (NAT required)
</code></pre>
<h2 id="special-ipv4-addresses"><a class="header" href="#special-ipv4-addresses">Special IPv4 Addresses</a></h2>
<pre><code>0.0.0.0/8         - Current network (only valid as source)
127.0.0.0/8       - Loopback (127.0.0.1 = localhost)
169.254.0.0/16    - Link-local (APIPA, auto-config failed)
192.0.2.0/24      - Documentation/examples (TEST-NET-1)
198.18.0.0/15     - Benchmark testing
224.0.0.0/4       - Multicast
255.255.255.255   - Limited broadcast
</code></pre>
<h2 id="cidr-classless-inter-domain-routing"><a class="header" href="#cidr-classless-inter-domain-routing">CIDR (Classless Inter-Domain Routing)</a></h2>
<h3 id="cidr-notation"><a class="header" href="#cidr-notation">CIDR Notation</a></h3>
<pre><code>192.168.1.0/24
            ^^
            Number of network bits

/24 = 255.255.255.0 netmask
24 bits for network, 8 bits for hosts
2^8 - 2 = 254 usable host addresses
</code></pre>
<h3 id="common-subnet-masks-1"><a class="header" href="#common-subnet-masks-1">Common Subnet Masks</a></h3>
<div class="table-wrapper"><table><thead><tr><th>CIDR</th><th>Netmask</th><th>Hosts</th><th>Use Case</th></tr></thead><tbody>
<tr><td><strong>/8</strong></td><td>255.0.0.0</td><td>16,777,214</td><td>Huge networks</td></tr>
<tr><td><strong>/16</strong></td><td>255.255.0.0</td><td>65,534</td><td>Large networks</td></tr>
<tr><td><strong>/24</strong></td><td>255.255.255.0</td><td>254</td><td>Small networks</td></tr>
<tr><td><strong>/25</strong></td><td>255.255.255.128</td><td>126</td><td>Subnet split</td></tr>
<tr><td><strong>/26</strong></td><td>255.255.255.192</td><td>62</td><td>Small subnet</td></tr>
<tr><td><strong>/27</strong></td><td>255.255.255.224</td><td>30</td><td>Very small</td></tr>
<tr><td><strong>/30</strong></td><td>255.255.255.252</td><td>2</td><td>Point-to-point</td></tr>
<tr><td><strong>/32</strong></td><td>255.255.255.255</td><td>1</td><td>Single host</td></tr>
</tbody></table>
</div>
<h3 id="subnet-calculation-example"><a class="header" href="#subnet-calculation-example">Subnet Calculation Example</a></h3>
<pre><code>Network: 192.168.1.0/24

Network Address:    192.168.1.0
First Usable:       192.168.1.1
Last Usable:        192.168.1.254
Broadcast Address:  192.168.1.255
Total Hosts:        256
Usable Hosts:       254
</code></pre>
<h3 id="subnetting-example"><a class="header" href="#subnetting-example">Subnetting Example</a></h3>
<pre><code>Original: 192.168.1.0/24 (254 hosts)

Split into 4 subnets (/26 each):
Subnet 1: 192.168.1.0/26    (192.168.1.1 - 192.168.1.62)
Subnet 2: 192.168.1.64/26   (192.168.1.65 - 192.168.1.126)
Subnet 3: 192.168.1.128/26  (192.168.1.129 - 192.168.1.190)
Subnet 4: 192.168.1.192/26  (192.168.1.193 - 192.168.1.254)

Each subnet: 62 usable hosts
</code></pre>
<h2 id="ipv6-packet-format"><a class="header" href="#ipv6-packet-format">IPv6 Packet Format</a></h2>
<pre><code>+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Version| Traffic Class |           Flow Label                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Payload Length        |  Next Header  |   Hop Limit   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                         Source Address                        +
|                          (128 bits)                           |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                      Destination Address                      +
|                          (128 bits)                           |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="ipv6-header-fields-40-bytes-fixed"><a class="header" href="#ipv6-header-fields-40-bytes-fixed">IPv6 Header Fields (40 bytes fixed)</a></h3>
<ol>
<li><strong>Version</strong> (4 bits): IP version (6)</li>
<li><strong>Traffic Class</strong> (8 bits): QoS, similar to ToS in IPv4</li>
<li><strong>Flow Label</strong> (20 bits): QoS flow identification</li>
<li><strong>Payload Length</strong> (16 bits): Data length (excluding header)</li>
<li><strong>Next Header</strong> (8 bits): Protocol type (like IPv4 Protocol field)</li>
<li><strong>Hop Limit</strong> (8 bits): Like IPv4 TTL</li>
<li><strong>Source Address</strong> (128 bits)</li>
<li><strong>Destination Address</strong> (128 bits)</li>
</ol>
<h2 id="ipv6-address-format"><a class="header" href="#ipv6-address-format">IPv6 Address Format</a></h2>
<h3 id="full-representation"><a class="header" href="#full-representation">Full Representation</a></h3>
<pre><code>2001:0db8:0000:0042:0000:8a2e:0370:7334
</code></pre>
<h3 id="compressed-representation"><a class="header" href="#compressed-representation">Compressed Representation</a></h3>
<pre><code># Remove leading zeros
2001:db8:0:42:0:8a2e:370:7334

# Replace consecutive zeros with ::
2001:db8:0:42::8a2e:370:7334

# Loopback
::1  (equivalent to 0:0:0:0:0:0:0:1)

# Unspecified
::  (equivalent to 0:0:0:0:0:0:0:0)
</code></pre>
<h3 id="ipv6-address-types"><a class="header" href="#ipv6-address-types">IPv6 Address Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Prefix</th><th>Example</th><th>Purpose</th></tr></thead><tbody>
<tr><td><strong>Global Unicast</strong></td><td>2000::/3</td><td>2001:db8::1</td><td>Internet routing</td></tr>
<tr><td><strong>Link-Local</strong></td><td>fe80::/10</td><td>fe80::1</td><td>Local network only</td></tr>
<tr><td><strong>Unique Local</strong></td><td>fc00::/7</td><td>fd00::1</td><td>Private (like RFC 1918)</td></tr>
<tr><td><strong>Multicast</strong></td><td>ff00::/8</td><td>ff02::1</td><td>One-to-many</td></tr>
<tr><td><strong>Loopback</strong></td><td>::1/128</td><td>::1</td><td>Localhost</td></tr>
<tr><td><strong>Unspecified</strong></td><td>::/128</td><td>::</td><td>No address</td></tr>
</tbody></table>
</div>
<h3 id="common-ipv6-multicast-addresses"><a class="header" href="#common-ipv6-multicast-addresses">Common IPv6 Multicast Addresses</a></h3>
<pre><code>ff02::1    All nodes on link
ff02::2    All routers on link
ff02::1:2  All DHCP servers
</code></pre>
<h2 id="ip-fragmentation"><a class="header" href="#ip-fragmentation">IP Fragmentation</a></h2>
<h3 id="why-fragmentation"><a class="header" href="#why-fragmentation">Why Fragmentation?</a></h3>
<pre><code>MTU (Maximum Transmission Unit) varies by network:
- Ethernet: 1500 bytes
- WiFi: 2304 bytes
- PPPoE: 1492 bytes

Larger packets must be fragmented to fit MTU
</code></pre>
<h3 id="ipv4-fragmentation-process"><a class="header" href="#ipv4-fragmentation-process">IPv4 Fragmentation Process</a></h3>
<pre><code>Original packet: 3000 bytes (1500 MTU)

Fragment 1:
  Identification: 12345
  Flags: More Fragments (MF) = 1
  Offset: 0
  Data: 1480 bytes

Fragment 2:
  Identification: 12345
  Flags: MF = 1
  Offset: 185 (1480/8)
  Data: 1480 bytes

Fragment 3:
  Identification: 12345
  Flags: MF = 0 (last fragment)
  Offset: 370 (2960/8)
  Data: 40 bytes

Receiver reassembles using Identification and Offset
</code></pre>
<h3 id="dont-fragment-df-flag"><a class="header" href="#dont-fragment-df-flag">Don't Fragment (DF) Flag</a></h3>
<pre><code>DF = 1: Don't fragment, drop if too large
       Send ICMP "Fragmentation Needed" back

Used for Path MTU Discovery
</code></pre>
<h2 id="ip-routing"><a class="header" href="#ip-routing">IP Routing</a></h2>
<h3 id="routing-decision-process"><a class="header" href="#routing-decision-process">Routing Decision Process</a></h3>
<pre><code>1. Check if destination is local (same subnet)
   → Send directly via ARP

2. If not local, find matching route:
   - Check routing table for most specific match
   - Use default gateway if no match

3. Send to next hop router

4. Repeat at each router until destination reached
</code></pre>
<h3 id="example-routing-table"><a class="header" href="#example-routing-table">Example Routing Table</a></h3>
<pre><code>Destination     Gateway         Netmask         Interface
0.0.0.0         192.168.1.1     0.0.0.0         eth0      (Default)
192.168.1.0     0.0.0.0         255.255.255.0   eth0      (Local)
10.0.0.0        192.168.1.254   255.0.0.0       eth0      (Route)
</code></pre>
<h3 id="longest-prefix-match"><a class="header" href="#longest-prefix-match">Longest Prefix Match</a></h3>
<pre><code>Routing table:
  10.0.0.0/8      → Gateway A
  10.1.0.0/16     → Gateway B
  10.1.2.0/24     → Gateway C

Packet to 10.1.2.5:
  Matches all three routes
  Most specific: /24
  → Use Gateway C
</code></pre>
<h2 id="ttl-time-to-live"><a class="header" href="#ttl-time-to-live">TTL (Time to Live)</a></h2>
<h3 id="purpose-7"><a class="header" href="#purpose-7">Purpose</a></h3>
<p>Prevents routing loops by limiting packet lifetime:</p>
<pre><code>Source sets TTL = 64

Router 1: TTL = 63
Router 2: TTL = 62
Router 3: TTL = 61
...
Router N: TTL = 0 → Drop packet, send ICMP "Time Exceeded"
</code></pre>
<h3 id="common-ttl-values"><a class="header" href="#common-ttl-values">Common TTL Values</a></h3>
<pre><code>Linux:    64
Windows:  128
Cisco:    255

Can identify OS based on initial TTL
</code></pre>
<h3 id="traceroute-uses-ttl"><a class="header" href="#traceroute-uses-ttl">Traceroute Uses TTL</a></h3>
<pre><code>Send packet with TTL=1  → Router 1 responds
Send packet with TTL=2  → Router 2 responds
Send packet with TTL=3  → Router 3 responds
...
Maps the path to destination
</code></pre>
<h2 id="ip-commands-and-tools"><a class="header" href="#ip-commands-and-tools">IP Commands and Tools</a></h2>
<h3 id="ifconfig--ip-linux"><a class="header" href="#ifconfig--ip-linux">ifconfig / ip (Linux)</a></h3>
<pre><code class="language-bash"># View IP configuration
ifconfig
ip addr show

# Assign IP address
sudo ifconfig eth0 192.168.1.100 netmask 255.255.255.0
sudo ip addr add 192.168.1.100/24 dev eth0

# Enable/disable interface
sudo ifconfig eth0 up
sudo ip link set eth0 up
</code></pre>
<h3 id="ipconfig-windows"><a class="header" href="#ipconfig-windows">ipconfig (Windows)</a></h3>
<pre><code class="language-cmd"># View IP configuration
ipconfig
ipconfig /all

# Renew DHCP lease
ipconfig /renew

# Release DHCP lease
ipconfig /release
</code></pre>
<h3 id="ping"><a class="header" href="#ping">ping</a></h3>
<pre><code class="language-bash"># Test connectivity (ICMP Echo Request/Reply)
ping 192.168.1.1
ping -c 4 192.168.1.1  # Send 4 packets

# Test with specific packet size
ping -s 1400 192.168.1.1

# Set TTL
ping -t 10 192.168.1.1
</code></pre>
<h3 id="traceroute--tracert"><a class="header" href="#traceroute--tracert">traceroute / tracert</a></h3>
<pre><code class="language-bash"># Linux
traceroute google.com

# Windows
tracert google.com

# UDP traceroute (Linux)
traceroute -U google.com

# ICMP traceroute
traceroute -I google.com
</code></pre>
<h3 id="netstat"><a class="header" href="#netstat">netstat</a></h3>
<pre><code class="language-bash"># Show routing table
netstat -r
route -n

# Show all connections
netstat -an

# Show listening ports
netstat -ln
</code></pre>
<h3 id="ip-route"><a class="header" href="#ip-route">ip route</a></h3>
<pre><code class="language-bash"># Show routing table
ip route show

# Add static route
sudo ip route add 10.0.0.0/8 via 192.168.1.254

# Delete route
sudo ip route del 10.0.0.0/8

# Add default gateway
sudo ip route add default via 192.168.1.1
</code></pre>
<h2 id="nat-network-address-translation"><a class="header" href="#nat-network-address-translation">NAT (Network Address Translation)</a></h2>
<h3 id="why-nat"><a class="header" href="#why-nat">Why NAT?</a></h3>
<pre><code>Problem: IPv4 address exhaustion
Solution: Multiple private IPs share one public IP

Private Network (192.168.1.0/24)
  PC1: 192.168.1.10
  PC2: 192.168.1.11      →  NAT Router  →  Public IP: 203.0.113.5
  PC3: 192.168.1.12              ↓
                          Tracks connections
</code></pre>
<h3 id="nat-types"><a class="header" href="#nat-types">NAT Types</a></h3>
<h4 id="1-source-nat-snat"><a class="header" href="#1-source-nat-snat">1. Source NAT (SNAT)</a></h4>
<pre><code>Outbound translation:
PC (192.168.1.10:5000) → NAT → Internet (203.0.113.5:6000)

Return traffic:
Internet (203.0.113.5:6000) → NAT → PC (192.168.1.10:5000)
</code></pre>
<h4 id="2-destination-nat-dnat--port-forwarding"><a class="header" href="#2-destination-nat-dnat--port-forwarding">2. Destination NAT (DNAT) / Port Forwarding</a></h4>
<pre><code>Internet → Public IP:80 → NAT → Web Server (192.168.1.20:80)

External: 203.0.113.5:80
Internal: 192.168.1.20:80
</code></pre>
<h4 id="3-pat-port-address-translation--nat-overload"><a class="header" href="#3-pat-port-address-translation--nat-overload">3. PAT (Port Address Translation) / NAT Overload</a></h4>
<pre><code>PC1: 192.168.1.10:5000  →  203.0.113.5:6000
PC2: 192.168.1.11:5001  →  203.0.113.5:6001
PC3: 192.168.1.12:5002  →  203.0.113.5:6002

NAT tracks: Internal IP:Port ↔ Public Port
</code></pre>
<h3 id="nat-table-example"><a class="header" href="#nat-table-example">NAT Table Example</a></h3>
<pre><code>Internal IP:Port     External IP:Port    Destination
192.168.1.10:5000    203.0.113.5:6000    8.8.8.8:53
192.168.1.11:5001    203.0.113.5:6001    1.1.1.1:443
192.168.1.10:5002    203.0.113.5:6002    93.184.216.34:80
</code></pre>
<h2 id="icmp-internet-control-message-protocol"><a class="header" href="#icmp-internet-control-message-protocol">ICMP (Internet Control Message Protocol)</a></h2>
<p>Part of IP suite, used for diagnostics and errors:</p>
<h3 id="common-icmp-message-types"><a class="header" href="#common-icmp-message-types">Common ICMP Message Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Code</th><th>Message</th><th>Use</th></tr></thead><tbody>
<tr><td><strong>0</strong></td><td>0</td><td>Echo Reply</td><td>ping response</td></tr>
<tr><td><strong>3</strong></td><td>0</td><td>Dest Network Unreachable</td><td>Routing error</td></tr>
<tr><td><strong>3</strong></td><td>1</td><td>Dest Host Unreachable</td><td>Host down</td></tr>
<tr><td><strong>3</strong></td><td>3</td><td>Dest Port Unreachable</td><td>Port closed</td></tr>
<tr><td><strong>3</strong></td><td>4</td><td>Fragmentation Needed</td><td>MTU discovery</td></tr>
<tr><td><strong>8</strong></td><td>0</td><td>Echo Request</td><td>ping</td></tr>
<tr><td><strong>11</strong></td><td>0</td><td>Time Exceeded</td><td>TTL = 0</td></tr>
<tr><td><strong>30</strong></td><td>0</td><td>Traceroute</td><td>Traceroute packet</td></tr>
</tbody></table>
</div>
<h3 id="ping-icmp-echo-requestreply"><a class="header" href="#ping-icmp-echo-requestreply">Ping (ICMP Echo Request/Reply)</a></h3>
<pre><code>Client                          Server
  |                                |
  | ICMP Echo Request (Type 8)     |
  |-------------------------------&gt;|
  |                                |
  | ICMP Echo Reply (Type 0)       |
  |&lt;-------------------------------|
  |                                |

Measures round-trip time (RTT)
</code></pre>
<h2 id="ip-best-practices"><a class="header" href="#ip-best-practices">IP Best Practices</a></h2>
<h3 id="1-subnet-properly"><a class="header" href="#1-subnet-properly">1. Subnet Properly</a></h3>
<pre><code>Don't use /24 for everything
- Small office: /26 (62 hosts)
- Department: /24 (254 hosts)
- Campus: /16 (65,534 hosts)
</code></pre>
<h3 id="2-reserve-ip-ranges"><a class="header" href="#2-reserve-ip-ranges">2. Reserve IP Ranges</a></h3>
<pre><code>192.168.1.1    - 192.168.1.10    Static (gateway, servers)
192.168.1.11   - 192.168.1.99    Static (printers, APs)
192.168.1.100  - 192.168.1.254   DHCP pool
</code></pre>
<h3 id="3-document-network"><a class="header" href="#3-document-network">3. Document Network</a></h3>
<pre><code>Maintain IP address management (IPAM)
- Which IPs are assigned
- What devices use them
- DHCP ranges
- Static assignments
</code></pre>
<h3 id="4-use-private-ips-internally"><a class="header" href="#4-use-private-ips-internally">4. Use Private IPs Internally</a></h3>
<pre><code>Never use public IPs internally
Use 10.x.x.x, 172.16-31.x.x, or 192.168.x.x
</code></pre>
<h2 id="eli10-18"><a class="header" href="#eli10-18">ELI10</a></h2>
<p>IP addresses are like street addresses for computers:</p>
<p><strong>IPv4 Address (192.168.1.100):</strong></p>
<ul>
<li>Like a home address with 4 numbers</li>
<li>Each number is 0-255</li>
<li>Almost ran out of addresses (like running out of street addresses in a city)</li>
</ul>
<p><strong>IPv6 Address (2001:db8::1):</strong></p>
<ul>
<li>New address system with way more numbers</li>
<li>Like adding ZIP+4 codes, apartment numbers, floor numbers</li>
<li>So many addresses we'll never run out</li>
</ul>
<p><strong>Routing:</strong></p>
<ul>
<li>Routers are like mail sorting facilities</li>
<li>They look at the address and send the packet closer to its destination</li>
<li>Each router knows which direction to send packets</li>
</ul>
<p><strong>Private IPs:</strong></p>
<ul>
<li>Like apartment numbers (Apt 101, 102, 103)</li>
<li>Work inside the building (local network)</li>
<li>NAT is like the building's street address (everyone shares it for mail)</li>
</ul>
<h2 id="further-resources-24"><a class="header" href="#further-resources-24">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc791">RFC 791 - IPv4 Specification</a></li>
<li><a href="https://tools.ietf.org/html/rfc8200">RFC 8200 - IPv6 Specification</a></li>
<li><a href="https://tools.ietf.org/html/rfc1918">RFC 1918 - Private Address Space</a></li>
<li><a href="https://www.subnet-calculator.com/">Subnet Calculator</a></li>
<li><a href="https://www.ipaddressguide.com/cidr">CIDR to IPv4 Conversion</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tcp"><a class="header" href="#tcp">TCP</a></h1>
<h2 id="tcp-packet-format"><a class="header" href="#tcp-packet-format">TCP Packet Format</a></h2>
<p>0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-------------------------------------------------------------------------------------+
|     Source Port (16 bits)    |  Destination Port (16 bits)                      |
+-------------------------------------------------------------------------------------+
|                Sequence Number (32 bits)                                          |
+-------------------------------------------------------------------------------------+
|            Acknowledgment Number (32 bits)                                        |
+-------------------------------------------------------------------------------------+
| Data  |Rese-|  Control Flags  |   Window Size (16 bits)   |   Checksum (16 bits)   |
|Offset |rved |  (6 bits)       |                           |                       |
+-------------------------------------------------------------------------------------+
|           Urgent Pointer (16 bits)                                                 |
+-------------------------------------------------------------------------------------+
|                Options (variable length)                                           |
+-------------------------------------------------------------------------------------+
|                               Data (variable length)                                |
+-------------------------------------------------------------------------------------+</p>
<p>Note: Each field is represented in bits, and the total length of a TCP packet can vary.
Start with a minimum of 20 bytes (without options).</p>
<p>The control flags include:</p>
<ul>
<li>URG: Urgent Pointer field significant</li>
<li>ACK: Acknowledgment field significant</li>
<li>PSH: Push Function</li>
<li>RST: Reset the connection</li>
<li>SYN: Synchronize sequence numbers</li>
<li>FIN: No more data from the sender</li>
</ul>
<p>The window size indicates the size of the sender's receive window (or buffer).</p>
<p>The checksum is used for error-checking the header and data.</p>
<p>The options field can include various TCP options, such as Maximum Segment Size (MSS).</p>
<p>The data field contains the actual data being transmitted.</p>
<p>This ASCII art representation provides a visual understanding of the TCP packet structure.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="udp-user-datagram-protocol-2"><a class="header" href="#udp-user-datagram-protocol-2">UDP (User Datagram Protocol)</a></h1>
<h2 id="overview-45"><a class="header" href="#overview-45">Overview</a></h2>
<p>UDP is a connectionless transport layer protocol that provides fast, unreliable data transmission. Unlike TCP, UDP doesn't guarantee delivery, ordering, or error checking, making it ideal for time-sensitive applications where speed matters more than reliability.</p>
<h2 id="udp-vs-tcp"><a class="header" href="#udp-vs-tcp">UDP vs TCP</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>UDP</th><th>TCP</th></tr></thead><tbody>
<tr><td><strong>Connection</strong></td><td>Connectionless</td><td>Connection-oriented</td></tr>
<tr><td><strong>Reliability</strong></td><td>Unreliable (no guarantee)</td><td>Reliable (guaranteed delivery)</td></tr>
<tr><td><strong>Ordering</strong></td><td>No ordering</td><td>Ordered delivery</td></tr>
<tr><td><strong>Speed</strong></td><td>Fast (low overhead)</td><td>Slower (more overhead)</td></tr>
<tr><td><strong>Header Size</strong></td><td>8 bytes</td><td>20-60 bytes</td></tr>
<tr><td><strong>Error Checking</strong></td><td>Optional checksum</td><td>Mandatory checksum + retransmission</td></tr>
<tr><td><strong>Flow Control</strong></td><td>None</td><td>Yes (window-based)</td></tr>
<tr><td><strong>Congestion Control</strong></td><td>None</td><td>Yes</td></tr>
<tr><td><strong>Use Cases</strong></td><td>Streaming, gaming, DNS, VoIP</td><td>File transfer, web, email</td></tr>
</tbody></table>
</div>
<h2 id="udp-packet-format"><a class="header" href="#udp-packet-format">UDP Packet Format</a></h2>
<pre><code> 0      7 8     15 16    23 24    31
+--------+--------+--------+--------+
|     Source      |   Destination   |
|      Port       |      Port       |
+--------+--------+--------+--------+
|                 |                 |
|     Length      |    Checksum     |
+--------+--------+--------+--------+
|                                   |
|          Data octets ...          |
+-----------------------------------+
</code></pre>
<h3 id="header-fields-8-bytes-total"><a class="header" href="#header-fields-8-bytes-total">Header Fields (8 bytes total)</a></h3>
<ol>
<li><strong>Source Port</strong> (16 bits): Port number of sender (optional, can be 0)</li>
<li><strong>Destination Port</strong> (16 bits): Port number of receiver</li>
<li><strong>Length</strong> (16 bits): Length of UDP header + data (minimum 8 bytes)</li>
<li><strong>Checksum</strong> (16 bits): Error checking (optional in IPv4, mandatory in IPv6)</li>
</ol>
<h3 id="example-udp-header"><a class="header" href="#example-udp-header">Example UDP Header</a></h3>
<pre><code>Source Port: 53210 (0xCFCA)
Destination Port: 53 (0x0035) - DNS
Length: 512 bytes
Checksum: 0x1A2B
</code></pre>
<p><strong>Hexadecimal representation:</strong></p>
<pre><code>CF CA 00 35 02 00 1A 2B
[... 504 bytes of data ...]
</code></pre>
<h2 id="how-udp-works"><a class="header" href="#how-udp-works">How UDP Works</a></h2>
<h3 id="sending-data-1"><a class="header" href="#sending-data-1">Sending Data</a></h3>
<pre><code>Application → Socket → UDP Layer → IP Layer → Network

1. Application writes data to UDP socket
2. UDP adds 8-byte header
3. UDP passes datagram to IP layer
4. IP sends packet to destination
5. No acknowledgment expected
</code></pre>
<h3 id="receiving-data-1"><a class="header" href="#receiving-data-1">Receiving Data</a></h3>
<pre><code>Network → IP Layer → UDP Layer → Socket → Application

1. IP receives packet
2. IP passes to UDP based on protocol number (17)
3. UDP validates checksum (if present)
4. UDP delivers to application based on port
5. If port not listening, send ICMP "Port Unreachable"
</code></pre>
<h2 id="udp-communication-flow"><a class="header" href="#udp-communication-flow">UDP Communication Flow</a></h2>
<h3 id="one-way-communication-fire-and-forget"><a class="header" href="#one-way-communication-fire-and-forget">One-Way Communication (Fire and Forget)</a></h3>
<pre><code>Client                          Server (port 9000)
  |                                |
  |  UDP Packet (Hello)            |
  |-------------------------------&gt;|
  |                                |
  |  UDP Packet (World)            |
  |-------------------------------&gt;|
  |                                |

No handshake, no acknowledgment
</code></pre>
<h3 id="two-way-communication-request-response"><a class="header" href="#two-way-communication-request-response">Two-Way Communication (Request-Response)</a></h3>
<pre><code>Client                          Server
  |                                |
  |  DNS Query (Port 53)           |
  |-------------------------------&gt;|
  |                                |
  |  DNS Response                  |
  |&lt;-------------------------------|
  |                                |

Application must handle timeouts and retries
</code></pre>
<h2 id="udp-checksum-calculation"><a class="header" href="#udp-checksum-calculation">UDP Checksum Calculation</a></h2>
<h3 id="pseudo-header-for-checksum-calculation"><a class="header" href="#pseudo-header-for-checksum-calculation">Pseudo Header (for checksum calculation)</a></h3>
<pre><code>+--------+--------+--------+--------+
|          Source IP Address        |
+--------+--------+--------+--------+
|       Destination IP Address      |
+--------+--------+--------+--------+
|  zero  |Protocol| UDP Length      |
+--------+--------+--------+--------+
</code></pre>
<h3 id="checksum-process"><a class="header" href="#checksum-process">Checksum Process</a></h3>
<ol>
<li>Create pseudo header from IP information</li>
<li>Concatenate: Pseudo header + UDP header + data</li>
<li>Divide into 16-bit words</li>
<li>Sum all 16-bit words</li>
<li>Add carry bits to result</li>
<li>Take one's complement</li>
</ol>
<p><strong>Example:</strong></p>
<pre><code class="language-python">def calculate_checksum(data):
    # Sum all 16-bit words
    total = sum(struct.unpack("!%dH" % (len(data)//2), data))

    # Add carry
    total = (total &gt;&gt; 16) + (total &amp; 0xffff)
    total += (total &gt;&gt; 16)

    # One's complement
    return ~total &amp; 0xffff
</code></pre>
<h2 id="common-udp-ports"><a class="header" href="#common-udp-ports">Common UDP Ports</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Port</th><th>Service</th><th>Purpose</th></tr></thead><tbody>
<tr><td><strong>53</strong></td><td>DNS</td><td>Domain name resolution</td></tr>
<tr><td><strong>67/68</strong></td><td>DHCP</td><td>Dynamic IP configuration</td></tr>
<tr><td><strong>69</strong></td><td>TFTP</td><td>Trivial File Transfer</td></tr>
<tr><td><strong>123</strong></td><td>NTP</td><td>Network Time Protocol</td></tr>
<tr><td><strong>161/162</strong></td><td>SNMP</td><td>Network management</td></tr>
<tr><td><strong>514</strong></td><td>Syslog</td><td>System logging</td></tr>
<tr><td><strong>520</strong></td><td>RIP</td><td>Routing protocol</td></tr>
<tr><td><strong>1900</strong></td><td>SSDP</td><td>Service discovery (UPnP)</td></tr>
<tr><td><strong>3478</strong></td><td>STUN</td><td>NAT traversal</td></tr>
<tr><td><strong>5353</strong></td><td>mDNS</td><td>Multicast DNS</td></tr>
</tbody></table>
</div>
<h2 id="udp-use-cases"><a class="header" href="#udp-use-cases">UDP Use Cases</a></h2>
<h3 id="1-dns-domain-name-system"><a class="header" href="#1-dns-domain-name-system">1. DNS (Domain Name System)</a></h3>
<pre><code>Client sends UDP query to port 53:
+----------------+
| DNS Query      |
| example.com?   |
+----------------+

Server responds:
+----------------+
| DNS Response   |
| 93.184.216.34  |
+----------------+

Fast lookup, retry if no response
</code></pre>
<h3 id="2-video-streaming"><a class="header" href="#2-video-streaming">2. Video Streaming</a></h3>
<pre><code>Server sends video frames continuously:
Frame 1 → Frame 2 → Frame 3 → Frame 4 → Frame 5

If Frame 3 is lost, continue with Frame 4
(Old frame is useless for live streaming)
</code></pre>
<h3 id="3-online-gaming"><a class="header" href="#3-online-gaming">3. Online Gaming</a></h3>
<pre><code>Game Client → Server: Player position updates (60 FPS)
Update 1: Player at (100, 200)
Update 2: Player at (101, 201)
Update 3: [LOST]
Update 4: Player at (103, 203)

Lost packet is okay - next update corrects position
</code></pre>
<h3 id="4-voip-voice-over-ip"><a class="header" href="#4-voip-voice-over-ip">4. VoIP (Voice over IP)</a></h3>
<pre><code>Continuous audio stream:
Packet 1: Audio 0-20ms
Packet 2: Audio 20-40ms
Packet 3: Audio 40-60ms [LOST]
Packet 4: Audio 60-80ms

Lost packet = brief audio glitch
Retransmission would cause worse delay
</code></pre>
<h3 id="5-dhcp-ip-address-assignment"><a class="header" href="#5-dhcp-ip-address-assignment">5. DHCP (IP Address Assignment)</a></h3>
<pre><code>Client                          Server
  |                                |
  | DHCP Discover (broadcast)      |
  |-------------------------------&gt;|
  |                                |
  | DHCP Offer                     |
  |&lt;-------------------------------|
  |                                |
  | DHCP Request                   |
  |-------------------------------&gt;|
  |                                |
  | DHCP ACK                       |
  |&lt;-------------------------------|
</code></pre>
<h2 id="udp-socket-programming"><a class="header" href="#udp-socket-programming">UDP Socket Programming</a></h2>
<h3 id="python-udp-server"><a class="header" href="#python-udp-server">Python UDP Server</a></h3>
<pre><code class="language-python">import socket

# Create UDP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

# Bind to address and port
server_address = ('localhost', 9000)
sock.bind(server_address)

print(f"UDP server listening on {server_address}")

while True:
    # Receive data (up to 1024 bytes)
    data, client_address = sock.recvfrom(1024)
    print(f"Received {len(data)} bytes from {client_address}")
    print(f"Data: {data.decode()}")

    # Send response
    sock.sendto(b"Message received", client_address)
</code></pre>
<h3 id="python-udp-client"><a class="header" href="#python-udp-client">Python UDP Client</a></h3>
<pre><code class="language-python">import socket

# Create UDP socket
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

server_address = ('localhost', 9000)

try:
    # Send data
    message = b"Hello, UDP Server!"
    sock.sendto(message, server_address)

    # Receive response (with timeout)
    sock.settimeout(5.0)
    data, server = sock.recvfrom(1024)
    print(f"Received: {data.decode()}")

except socket.timeout:
    print("No response from server")
finally:
    sock.close()
</code></pre>
<h3 id="c-udp-server"><a class="header" href="#c-udp-server">C UDP Server</a></h3>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;sys/socket.h&gt;
#include &lt;netinet/in.h&gt;
#include &lt;arpa/inet.h&gt;

#define PORT 9000
#define BUFFER_SIZE 1024

int main() {
    int sockfd;
    char buffer[BUFFER_SIZE];
    struct sockaddr_in server_addr, client_addr;
    socklen_t addr_len = sizeof(client_addr);

    // Create UDP socket
    sockfd = socket(AF_INET, SOCK_DGRAM, 0);

    // Setup server address
    memset(&amp;server_addr, 0, sizeof(server_addr));
    server_addr.sin_family = AF_INET;
    server_addr.sin_addr.s_addr = INADDR_ANY;
    server_addr.sin_port = htons(PORT);

    // Bind socket
    bind(sockfd, (struct sockaddr*)&amp;server_addr, sizeof(server_addr));

    printf("UDP server listening on port %d\n", PORT);

    while(1) {
        // Receive data
        int n = recvfrom(sockfd, buffer, BUFFER_SIZE, 0,
                        (struct sockaddr*)&amp;client_addr, &amp;addr_len);
        buffer[n] = '\0';

        printf("Received: %s\n", buffer);

        // Send response
        sendto(sockfd, "ACK", 3, 0,
               (struct sockaddr*)&amp;client_addr, addr_len);
    }

    return 0;
}
</code></pre>
<h2 id="udp-broadcast-and-multicast"><a class="header" href="#udp-broadcast-and-multicast">UDP Broadcast and Multicast</a></h2>
<h3 id="broadcast-one-to-all-in-subnet"><a class="header" href="#broadcast-one-to-all-in-subnet">Broadcast (One-to-All in subnet)</a></h3>
<pre><code class="language-python">import socket

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.setsockopt(socket.SOL_SOCKET, socket.SO_BROADCAST, 1)

# Send to broadcast address
broadcast_address = ('255.255.255.255', 9000)
sock.sendto(b"Broadcast message", broadcast_address)
</code></pre>
<h3 id="multicast-one-to-many-selected"><a class="header" href="#multicast-one-to-many-selected">Multicast (One-to-Many selected)</a></h3>
<pre><code class="language-python">import socket
import struct

MCAST_GRP = '224.1.1.1'
MCAST_PORT = 5007

# Sender
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.sendto(b"Multicast message", (MCAST_GRP, MCAST_PORT))

# Receiver
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.bind(('', MCAST_PORT))

# Join multicast group
mreq = struct.pack("4sl", socket.inet_aton(MCAST_GRP),
                   socket.INADDR_ANY)
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)

data, address = sock.recvfrom(1024)
</code></pre>
<h2 id="udp-maximum-packet-size"><a class="header" href="#udp-maximum-packet-size">UDP Maximum Packet Size</a></h2>
<h3 id="theoretical-limits"><a class="header" href="#theoretical-limits">Theoretical Limits</a></h3>
<pre><code>IPv4:
- Max IP packet: 65,535 bytes
- IP header: 20 bytes (minimum)
- UDP header: 8 bytes
- Max UDP data: 65,507 bytes

IPv6:
- Max payload (jumbogram): 4,294,967,295 bytes
</code></pre>
<h3 id="practical-limits-mtu"><a class="header" href="#practical-limits-mtu">Practical Limits (MTU)</a></h3>
<pre><code>Ethernet MTU: 1500 bytes
- IP header: 20 bytes
- UDP header: 8 bytes
- Safe UDP data: 1472 bytes

To avoid fragmentation:
- Stay under 1472 bytes for IPv4
- Stay under 1452 bytes for IPv6
</code></pre>
<h2 id="udp-reliability-techniques"><a class="header" href="#udp-reliability-techniques">UDP Reliability Techniques</a></h2>
<p>Since UDP doesn't provide reliability, applications must implement it:</p>
<h3 id="1-acknowledgments"><a class="header" href="#1-acknowledgments">1. Acknowledgments</a></h3>
<pre><code>Sender                          Receiver
  |                                |
  | Packet 1                       |
  |-------------------------------&gt;|
  |                                |
  | ACK 1                          |
  |&lt;-------------------------------|
  |                                |
  | Packet 2                       |
  |-------------------------------&gt;|
  |                                |
  [timeout - no ACK received]
  |                                |
  | Packet 2 (resend)              |
  |-------------------------------&gt;|
  |                                |
  | ACK 2                          |
  |&lt;-------------------------------|
</code></pre>
<h3 id="2-sequence-numbers"><a class="header" href="#2-sequence-numbers">2. Sequence Numbers</a></h3>
<pre><code>Application adds sequence numbers:
Packet 1: [Seq=1][Data]
Packet 2: [Seq=2][Data]
Packet 3: [Seq=3][Data]

Receiver detects missing packets
Requests retransmission if needed
</code></pre>
<h3 id="3-timeouts-and-retries"><a class="header" href="#3-timeouts-and-retries">3. Timeouts and Retries</a></h3>
<pre><code class="language-python">import socket
import time

def send_with_retry(sock, data, address, max_retries=3):
    for attempt in range(max_retries):
        sock.sendto(data, address)
        sock.settimeout(1.0)

        try:
            response, _ = sock.recvfrom(1024)
            return response
        except socket.timeout:
            print(f"Retry {attempt + 1}/{max_retries}")
            continue

    raise Exception("Max retries exceeded")
</code></pre>
<h2 id="udp-advantages"><a class="header" href="#udp-advantages">UDP Advantages</a></h2>
<ol>
<li><strong>Low Latency</strong>: No connection setup, immediate transmission</li>
<li><strong>Low Overhead</strong>: 8-byte header vs TCP's 20+ bytes</li>
<li><strong>No Connection State</strong>: Simpler, uses less memory</li>
<li><strong>Broadcast/Multicast</strong>: Can send to multiple receivers</li>
<li><strong>Fast</strong>: No waiting for acknowledgments</li>
<li><strong>Transaction-Oriented</strong>: Good for request-response</li>
</ol>
<h2 id="udp-disadvantages"><a class="header" href="#udp-disadvantages">UDP Disadvantages</a></h2>
<ol>
<li><strong>Unreliable</strong>: Packets may be lost, duplicated, or reordered</li>
<li><strong>No Flow Control</strong>: Can overwhelm receiver</li>
<li><strong>No Congestion Control</strong>: Can worsen network congestion</li>
<li><strong>No Security</strong>: No encryption (use DTLS for secure UDP)</li>
<li><strong>Application Complexity</strong>: Must implement reliability if needed</li>
</ol>
<h2 id="udp-security-considerations"><a class="header" href="#udp-security-considerations">UDP Security Considerations</a></h2>
<h3 id="vulnerabilities"><a class="header" href="#vulnerabilities">Vulnerabilities</a></h3>
<ol>
<li><strong>UDP Flood Attack</strong>: Overwhelm server with UDP packets</li>
<li><strong>UDP Amplification</strong>: Small request → large response (DNS, NTP)</li>
<li><strong>Spoofing</strong>: Easy to fake source IP (no handshake)</li>
</ol>
<h3 id="mitigation"><a class="header" href="#mitigation">Mitigation</a></h3>
<pre><code>1. Rate limiting: Limit packets per second per source
2. Firewall rules: Block unnecessary UDP ports
3. Authentication: Verify sender identity
4. DTLS: Encrypted UDP (Datagram TLS)
</code></pre>
<h3 id="dtls-datagram-tls"><a class="header" href="#dtls-datagram-tls">DTLS (Datagram TLS)</a></h3>
<p>Secure UDP communication:</p>
<pre><code>UDP + TLS-style encryption = DTLS

Used in:
- WebRTC
- VPN protocols
- IoT devices
</code></pre>
<h2 id="monitoring-udp-traffic"><a class="header" href="#monitoring-udp-traffic">Monitoring UDP Traffic</a></h2>
<h3 id="using-tcpdump"><a class="header" href="#using-tcpdump">Using tcpdump</a></h3>
<pre><code class="language-bash"># Capture UDP traffic on port 53 (DNS)
tcpdump -i any udp port 53

# Capture all UDP traffic
tcpdump -i any udp

# Save to file
tcpdump -i any udp -w udp_capture.pcap

# View UDP packet details
tcpdump -i any udp -vv -X
</code></pre>
<h3 id="using-netstat"><a class="header" href="#using-netstat">Using netstat</a></h3>
<pre><code class="language-bash"># Show UDP listening ports
netstat -un

# Show UDP statistics
netstat -su

# Show processes using UDP
netstat -unp
</code></pre>
<h2 id="eli10-19"><a class="header" href="#eli10-19">ELI10</a></h2>
<p>UDP is like sending postcards:</p>
<p><strong>TCP is like certified mail:</strong></p>
<ul>
<li>You get confirmation it arrived</li>
<li>Items arrive in order</li>
<li>Lost mail is resent</li>
<li>But takes longer</li>
</ul>
<p><strong>UDP is like postcards:</strong></p>
<ul>
<li>Just drop it in the mailbox and go</li>
<li>Super fast - no waiting</li>
<li>But might get lost</li>
<li>Might arrive out of order</li>
<li>No way to know if it arrived</li>
</ul>
<p><strong>When to use UDP (postcards):</strong></p>
<ul>
<li>Quick questions (DNS: "What's this address?")</li>
<li>Live streaming (watching a game - who cares about 1 missed frame?)</li>
<li>Online games (your position updates 60 times per second)</li>
<li>Video calls (slight glitch is better than delay)</li>
</ul>
<p><strong>When to use TCP (certified mail):</strong></p>
<ul>
<li>Important files</li>
<li>Web pages</li>
<li>Emails</li>
<li>Banking transactions</li>
</ul>
<h2 id="further-resources-25"><a class="header" href="#further-resources-25">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc768">RFC 768 - UDP Specification</a></li>
<li><a href="https://www.cloudflare.com/learning/ddos/glossary/user-datagram-protocol-udp/">UDP vs TCP Explained</a></li>
<li><a href="https://beej.us/guide/bgnet/html/">UDP Programming Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="httphttps-1"><a class="header" href="#httphttps-1">HTTP/HTTPS</a></h1>
<h2 id="overview-46"><a class="header" href="#overview-46">Overview</a></h2>
<p>HTTP (HyperText Transfer Protocol) is the foundation of data communication on the web. HTTPS adds encryption for secure communication.</p>
<h2 id="http-basics"><a class="header" href="#http-basics">HTTP Basics</a></h2>
<h3 id="request-response-model"><a class="header" href="#request-response-model">Request-Response Model</a></h3>
<pre><code>Client                          Server

    HTTP Request               -&gt;

  &lt;-          HTTP Response

</code></pre>
<h3 id="http-methods"><a class="header" href="#http-methods">HTTP Methods</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Purpose</th><th>Idempotent</th><th>Safe</th></tr></thead><tbody>
<tr><td><strong>GET</strong></td><td>Retrieve resource</td><td>Yes</td><td>Yes</td></tr>
<tr><td><strong>POST</strong></td><td>Create resource</td><td>No</td><td>No</td></tr>
<tr><td><strong>PUT</strong></td><td>Replace resource</td><td>Yes</td><td>No</td></tr>
<tr><td><strong>PATCH</strong></td><td>Partial update</td><td>No</td><td>No</td></tr>
<tr><td><strong>DELETE</strong></td><td>Remove resource</td><td>Yes</td><td>No</td></tr>
<tr><td><strong>HEAD</strong></td><td>Like GET, no body</td><td>Yes</td><td>Yes</td></tr>
<tr><td><strong>OPTIONS</strong></td><td>Describe options</td><td>Yes</td><td>Yes</td></tr>
</tbody></table>
</div>
<h3 id="status-codes"><a class="header" href="#status-codes">Status Codes</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Meaning</th><th>Examples</th></tr></thead><tbody>
<tr><td><strong>1xx</strong></td><td>Informational</td><td>100 Continue</td></tr>
<tr><td><strong>2xx</strong></td><td>Success</td><td>200 OK, 201 Created</td></tr>
<tr><td><strong>3xx</strong></td><td>Redirection</td><td>301 Moved, 304 Not Modified</td></tr>
<tr><td><strong>4xx</strong></td><td>Client Error</td><td>400 Bad Request, 404 Not Found</td></tr>
<tr><td><strong>5xx</strong></td><td>Server Error</td><td>500 Server Error, 503 Unavailable</td></tr>
</tbody></table>
</div>
<h3 id="headers"><a class="header" href="#headers">Headers</a></h3>
<p><strong>Request Headers</strong>:</p>
<pre><code>Host: example.com
User-Agent: Mozilla/5.0
Accept: application/json
Authorization: Bearer token123
Cookie: session=abc123
Content-Type: application/json
</code></pre>
<p><strong>Response Headers</strong>:</p>
<pre><code>Content-Type: application/json
Content-Length: 256
Set-Cookie: session=def456
Cache-Control: max-age=3600
ETag: "12345abc"
</code></pre>
<h2 id="http-versions"><a class="header" href="#http-versions">HTTP Versions</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Version</th><th>Released</th><th>Features</th></tr></thead><tbody>
<tr><td><strong>HTTP/1.1</strong></td><td>1997</td><td>Keep-alive, chunked transfer</td></tr>
<tr><td><strong>HTTP/2</strong></td><td>2015</td><td>Multiplexing, server push, binary</td></tr>
<tr><td><strong>HTTP/3</strong></td><td>2022</td><td>QUIC protocol, faster</td></tr>
</tbody></table>
</div>
<h2 id="rest-api-design"><a class="header" href="#rest-api-design">REST API Design</a></h2>
<h3 id="resource-oriented"><a class="header" href="#resource-oriented">Resource-Oriented</a></h3>
<pre><code> GET /users           - List users
 POST /users          - Create user
 GET /users/123       - Get user 123
 PUT /users/123       - Update user 123
 DELETE /users/123    - Delete user 123

 GET /getUser?id=123  - Procedural (bad)
 POST /createUser     - Procedural (bad)
</code></pre>
<h3 id="requestresponse-example"><a class="header" href="#requestresponse-example">Request/Response Example</a></h3>
<pre><code class="language-python"># Request
GET /users/123 HTTP/1.1
Host: api.example.com
Authorization: Bearer token

# Response
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 156

{
  "id": 123,
  "name": "John",
  "email": "john@example.com"
}
</code></pre>
<h2 id="https-secure-http"><a class="header" href="#https-secure-http">HTTPS (Secure HTTP)</a></h2>
<p>Adds TLS encryption on top of HTTP:</p>
<pre><code>HTTP over TLS = HTTPS
</code></pre>
<h3 id="benefits"><a class="header" href="#benefits">Benefits</a></h3>
<ul>
<li><strong>Encryption</strong>: Data unreadable to eavesdroppers</li>
<li><strong>Authentication</strong>: Verify server identity</li>
<li><strong>Integrity</strong>: Detect tampering</li>
</ul>
<h3 id="certificate-process"><a class="header" href="#certificate-process">Certificate Process</a></h3>
<pre><code>1. Generate private/public key pair
2. Request certificate from CA
3. CA verifies and signs certificate
4. Browser verifies signature with CA's public key
</code></pre>
<h2 id="caching"><a class="header" href="#caching">Caching</a></h2>
<h3 id="cache-headers"><a class="header" href="#cache-headers">Cache Headers</a></h3>
<pre><code>Cache-Control: max-age=3600     # Cache for 1 hour
Cache-Control: no-cache         # Validate before use
Cache-Control: no-store         # Don't cache
Cache-Control: private          # Only browser cache
Cache-Control: public           # Any cache can store
ETag: "12345"                   # Resource version
</code></pre>
<h3 id="conditional-requests"><a class="header" href="#conditional-requests">Conditional Requests</a></h3>
<pre><code>If-None-Match: "12345"
-&gt; Returns 304 Not Modified if unchanged
</code></pre>
<h2 id="authentication"><a class="header" href="#authentication">Authentication</a></h2>
<h3 id="basic-auth"><a class="header" href="#basic-auth">Basic Auth</a></h3>
<pre><code>Authorization: Basic base64(username:password)
</code></pre>
<h3 id="bearer-token"><a class="header" href="#bearer-token">Bearer Token</a></h3>
<pre><code>Authorization: Bearer eyJhbGc...
</code></pre>
<h3 id="oauth-20"><a class="header" href="#oauth-20">OAuth 2.0</a></h3>
<p>Multi-step authorization flow for 3rd party apps</p>
<h2 id="cors-cross-origin-resource-sharing"><a class="header" href="#cors-cross-origin-resource-sharing">CORS (Cross-Origin Resource Sharing)</a></h2>
<p>Enable browser to access cross-origin APIs:</p>
<pre><code>Server Response:
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST
Access-Control-Allow-Headers: Content-Type
</code></pre>
<h2 id="common-issues-12"><a class="header" href="#common-issues-12">Common Issues</a></h2>
<h3 id="404-not-found"><a class="header" href="#404-not-found">404 Not Found</a></h3>
<p>Resource doesn't exist</p>
<h3 id="401-unauthorized"><a class="header" href="#401-unauthorized">401 Unauthorized</a></h3>
<p>Missing/invalid authentication</p>
<h3 id="403-forbidden"><a class="header" href="#403-forbidden">403 Forbidden</a></h3>
<p>Authenticated but not allowed</p>
<h3 id="429-too-many-requests"><a class="header" href="#429-too-many-requests">429 Too Many Requests</a></h3>
<p>Rate limit exceeded</p>
<h3 id="503-service-unavailable"><a class="header" href="#503-service-unavailable">503 Service Unavailable</a></h3>
<p>Server temporarily down</p>
<h2 id="best-practices-39"><a class="header" href="#best-practices-39">Best Practices</a></h2>
<h3 id="1-use-appropriate-methods"><a class="header" href="#1-use-appropriate-methods">1. Use Appropriate Methods</a></h3>
<pre><code> GET for reading (no side effects)
 POST for creating
 PUT for full replacement
 PATCH for partial update
</code></pre>
<h3 id="2-meaningful-status-codes"><a class="header" href="#2-meaningful-status-codes">2. Meaningful Status Codes</a></h3>
<pre><code> 200 OK for success
 201 Created for new resource
 204 No Content for delete
 200 for everything (bad)
</code></pre>
<h3 id="3-versioning"><a class="header" href="#3-versioning">3. Versioning</a></h3>
<pre><code>/api/v1/users
/api/v2/users
</code></pre>
<h3 id="4-error-responses"><a class="header" href="#4-error-responses">4. Error Responses</a></h3>
<pre><code class="language-json">{
  "error": "Invalid input",
  "details": {
    "email": "Email format invalid"
  }
}
</code></pre>
<h2 id="eli10-20"><a class="header" href="#eli10-20">ELI10</a></h2>
<p>HTTP is like sending letters:</p>
<ul>
<li><strong>GET</strong>: "What's the address of 123 Main St?"</li>
<li><strong>POST</strong>: "Please add my address to your system"</li>
<li><strong>PUT</strong>: "Update my address to..."</li>
<li><strong>DELETE</strong>: "Remove my address"</li>
</ul>
<p>The server sends back a number (status code):</p>
<ul>
<li><strong>200</strong>: "Got it, here's what you asked for!"</li>
<li><strong>404</strong>: "Can't find that address"</li>
<li><strong>500</strong>: "I have a problem..."</li>
</ul>
<p>HTTPS adds a sealed envelope so only the right person can read it!</p>
<h2 id="further-resources-26"><a class="header" href="#further-resources-26">Further Resources</a></h2>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">MDN HTTP Guide</a></li>
<li><a href="https://httpstat.us/">HTTP Status Codes</a></li>
<li><a href="https://restfulapi.net/">REST API Best Practices</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dns-domain-name-system-1"><a class="header" href="#dns-domain-name-system-1">DNS (Domain Name System)</a></h1>
<h2 id="overview-47"><a class="header" href="#overview-47">Overview</a></h2>
<p>DNS is the internet's phonebook that translates human-readable domain names (like <code>example.com</code>) into IP addresses (like <code>93.184.216.34</code>) that computers use to identify each other on the network.</p>
<h2 id="dns-hierarchy"><a class="header" href="#dns-hierarchy">DNS Hierarchy</a></h2>
<pre><code>                    Root (.)
                       |
         +-------------+-------------+
         |             |             |
       .com          .org          .net
         |             |             |
    example.com   wikipedia.org  archive.net
         |
    www.example.com
</code></pre>
<h2 id="dns-record-types"><a class="header" href="#dns-record-types">DNS Record Types</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Record Type</th><th>Purpose</th><th>Example</th></tr></thead><tbody>
<tr><td><strong>A</strong></td><td>IPv4 address</td><td><code>example.com -&gt; 93.184.216.34</code></td></tr>
<tr><td><strong>AAAA</strong></td><td>IPv6 address</td><td><code>example.com -&gt; 2606:2800:220:1:...</code></td></tr>
<tr><td><strong>CNAME</strong></td><td>Canonical name (alias)</td><td><code>www.example.com -&gt; example.com</code></td></tr>
<tr><td><strong>MX</strong></td><td>Mail exchange server</td><td><code>example.com -&gt; mail.example.com</code></td></tr>
<tr><td><strong>NS</strong></td><td>Name server</td><td><code>example.com -&gt; ns1.example.com</code></td></tr>
<tr><td><strong>TXT</strong></td><td>Text information</td><td>SPF, DKIM records</td></tr>
<tr><td><strong>PTR</strong></td><td>Reverse DNS lookup</td><td><code>34.216.184.93 -&gt; example.com</code></td></tr>
<tr><td><strong>SOA</strong></td><td>Start of authority</td><td>Zone information</td></tr>
<tr><td><strong>SRV</strong></td><td>Service location</td><td><code>_service._proto.name</code></td></tr>
</tbody></table>
</div>
<h2 id="dns-query-process"><a class="header" href="#dns-query-process">DNS Query Process</a></h2>
<pre><code>1. User types "example.com" in browser

2. Browser checks local cache

3. If not cached, query DNS resolver (ISP or 8.8.8.8)

4. Resolver checks its cache

5. If not cached, recursive query:

   Resolver → Root DNS Server
   Root → "Ask .com server"

   Resolver → .com TLD Server
   TLD → "Ask example.com's nameserver"

   Resolver → example.com's Nameserver
   Nameserver → "IP is 93.184.216.34"

6. Resolver caches result and returns to browser

7. Browser connects to IP address
</code></pre>
<h2 id="dns-message-format"><a class="header" href="#dns-message-format">DNS Message Format</a></h2>
<pre><code>+---------------------------+
|        Header             |  12 bytes
+---------------------------+
|        Question           |  Variable
+---------------------------+
|        Answer             |  Variable
+---------------------------+
|        Authority          |  Variable
+---------------------------+
|        Additional         |  Variable
+---------------------------+
</code></pre>
<h3 id="header-format-12-bytes"><a class="header" href="#header-format-12-bytes">Header Format (12 bytes)</a></h3>
<pre><code> 0  1  2  3  4  5  6  7  8  9  0  1  2  3  4  5
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                      ID                       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|QR|   Opcode  |AA|TC|RD|RA|   Z    |   RCODE   |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    QDCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    ANCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    NSCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                    ARCOUNT                    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
</code></pre>
<p><strong>Fields:</strong></p>
<ul>
<li><strong>ID</strong>: 16-bit identifier for matching requests/responses</li>
<li><strong>QR</strong>: Query (0) or Response (1)</li>
<li><strong>Opcode</strong>: Query type (0=standard, 1=inverse, 2=status)</li>
<li><strong>AA</strong>: Authoritative Answer</li>
<li><strong>TC</strong>: Truncated (message too long for UDP)</li>
<li><strong>RD</strong>: Recursion Desired</li>
<li><strong>RA</strong>: Recursion Available</li>
<li><strong>RCODE</strong>: Response code (0=no error, 3=name error)</li>
<li><strong>QDCOUNT</strong>: Number of questions</li>
<li><strong>ANCOUNT</strong>: Number of answers</li>
<li><strong>NSCOUNT</strong>: Number of authority records</li>
<li><strong>ARCOUNT</strong>: Number of additional records</li>
</ul>
<h2 id="dns-query-example"><a class="header" href="#dns-query-example">DNS Query Example</a></h2>
<h3 id="query-request"><a class="header" href="#query-request">Query (Request)</a></h3>
<pre><code>; DNS Query for example.com A record
; Header
ID: 0x1234
Flags: 0x0100 (standard query, recursion desired)
Questions: 1
Answer RRs: 0
Authority RRs: 0
Additional RRs: 0

; Question Section
example.com.    IN    A
</code></pre>
<p><strong>Hexadecimal representation:</strong></p>
<pre><code>12 34  01 00  00 01  00 00  00 00  00 00
07 65 78 61 6d 70 6c 65 03 63 6f 6d 00
00 01  00 01
</code></pre>
<h3 id="response"><a class="header" href="#response">Response</a></h3>
<pre><code>; DNS Response for example.com A record
; Header
ID: 0x1234
Flags: 0x8180 (response, recursion available)
Questions: 1
Answer RRs: 1
Authority RRs: 0
Additional RRs: 0

; Question Section
example.com.    IN    A

; Answer Section
example.com.    86400    IN    A    93.184.216.34
</code></pre>
<h2 id="dns-query-types"><a class="header" href="#dns-query-types">DNS Query Types</a></h2>
<h3 id="recursive-query"><a class="header" href="#recursive-query">Recursive Query</a></h3>
<p>Client asks DNS server to provide the final answer:</p>
<pre><code>Client → Resolver: "What's example.com?"
Resolver → Root/TLD/Auth servers (multiple queries)
Resolver → Client: "It's 93.184.216.34"
</code></pre>
<h3 id="iterative-query"><a class="header" href="#iterative-query">Iterative Query</a></h3>
<p>DNS server returns best answer it knows:</p>
<pre><code>Client → Root: "What's example.com?"
Root → Client: "Ask .com server at 192.5.6.30"

Client → TLD: "What's example.com?"
TLD → Client: "Ask ns1.example.com at 192.0.2.1"

Client → Auth: "What's example.com?"
Auth → Client: "It's 93.184.216.34"
</code></pre>
<h2 id="dns-resource-record-format"><a class="header" href="#dns-resource-record-format">DNS Resource Record Format</a></h2>
<pre><code>Name: example.com
Type: A (1)
Class: IN (1) - Internet
TTL: 86400 (24 hours)
Data Length: 4
Data: 93.184.216.34
</code></pre>
<h2 id="common-dns-operations"><a class="header" href="#common-dns-operations">Common DNS Operations</a></h2>
<h3 id="using-dig-dns-lookup-tool"><a class="header" href="#using-dig-dns-lookup-tool">Using dig (DNS lookup tool)</a></h3>
<pre><code class="language-bash"># Basic A record lookup
dig example.com

# Query specific record type
dig example.com MX
dig example.com AAAA

# Query specific DNS server
dig @8.8.8.8 example.com

# Reverse DNS lookup
dig -x 93.184.216.34

# Trace DNS resolution path
dig +trace example.com

# Short answer only
dig +short example.com
</code></pre>
<h3 id="using-nslookup"><a class="header" href="#using-nslookup">Using nslookup</a></h3>
<pre><code class="language-bash"># Basic lookup
nslookup example.com

# Query specific server
nslookup example.com 8.8.8.8

# Query specific record type
nslookup -type=MX example.com
</code></pre>
<h3 id="using-host"><a class="header" href="#using-host">Using host</a></h3>
<pre><code class="language-bash"># Simple lookup
host example.com

# Verbose output
host -v example.com

# Query MX records
host -t MX example.com
</code></pre>
<h2 id="dns-caching"><a class="header" href="#dns-caching">DNS Caching</a></h2>
<h3 id="cache-levels"><a class="header" href="#cache-levels">Cache Levels</a></h3>
<ol>
<li><strong>Browser Cache</strong>: Short-lived (seconds to minutes)</li>
<li><strong>OS Cache</strong>: System-level DNS cache</li>
<li><strong>Router Cache</strong>: Local network cache</li>
<li><strong>ISP Resolver Cache</strong>: Hours to days</li>
<li><strong>Authoritative Server</strong>: The source of truth</li>
</ol>
<h3 id="ttl-time-to-live-1"><a class="header" href="#ttl-time-to-live-1">TTL (Time To Live)</a></h3>
<p>Controls how long records are cached:</p>
<pre><code>example.com.  3600  IN  A  93.184.216.34
              ^^^^
              1 hour TTL
</code></pre>
<h3 id="flushing-dns-cache"><a class="header" href="#flushing-dns-cache">Flushing DNS Cache</a></h3>
<pre><code class="language-bash"># Windows
ipconfig /flushdns

# macOS
sudo dscacheutil -flushcache

# Linux (systemd-resolved)
sudo systemd-resolve --flush-caches

# Linux (nscd)
sudo /etc/init.d/nscd restart
</code></pre>
<h2 id="dns-security"><a class="header" href="#dns-security">DNS Security</a></h2>
<h3 id="dns-spoofingcache-poisoning"><a class="header" href="#dns-spoofingcache-poisoning">DNS Spoofing/Cache Poisoning</a></h3>
<p>Attack where fake DNS responses are injected:</p>
<pre><code>Attacker intercepts DNS query
Attacker sends fake response: "bank.com -&gt; evil.com"
Victim connects to attacker's server
</code></pre>
<p><strong>Prevention</strong>: DNSSEC</p>
<h3 id="dnssec-dns-security-extensions"><a class="header" href="#dnssec-dns-security-extensions">DNSSEC (DNS Security Extensions)</a></h3>
<p>Adds cryptographic signatures to DNS records:</p>
<pre><code>1. Zone owner signs DNS records with private key
2. Public key published in DNS
3. Resolver verifies signature
4. Chain of trust from root to domain
</code></pre>
<p><strong>Record Types:</strong></p>
<ul>
<li><strong>RRSIG</strong>: Contains signature</li>
<li><strong>DNSKEY</strong>: Public key</li>
<li><strong>DS</strong>: Delegation Signer (links parent to child)</li>
</ul>
<h3 id="dns-over-https-doh"><a class="header" href="#dns-over-https-doh">DNS over HTTPS (DoH)</a></h3>
<p>Encrypts DNS queries using HTTPS:</p>
<pre><code>Client → DoH Server (port 443)
Encrypted: "What's example.com?"
Encrypted: "It's 93.184.216.34"
</code></pre>
<p><strong>Providers:</strong></p>
<ul>
<li>Cloudflare: <code>https://1.1.1.1/dns-query</code></li>
<li>Google: <code>https://dns.google/dns-query</code></li>
</ul>
<h3 id="dns-over-tls-dot"><a class="header" href="#dns-over-tls-dot">DNS over TLS (DoT)</a></h3>
<p>Encrypts DNS queries using TLS:</p>
<pre><code>Client → DoT Server (port 853)
TLS encrypted DNS query/response
</code></pre>
<h2 id="public-dns-servers"><a class="header" href="#public-dns-servers">Public DNS Servers</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Provider</th><th>IPv4</th><th>IPv6</th><th>Features</th></tr></thead><tbody>
<tr><td><strong>Google</strong></td><td>8.8.8.8, 8.8.4.4</td><td>2001:4860:4860::8888</td><td>Fast, reliable</td></tr>
<tr><td><strong>Cloudflare</strong></td><td>1.1.1.1, 1.0.0.1</td><td>2606:4700:4700::1111</td><td>Privacy-focused</td></tr>
<tr><td><strong>Quad9</strong></td><td>9.9.9.9</td><td>2620:fe::fe</td><td>Malware blocking</td></tr>
<tr><td><strong>OpenDNS</strong></td><td>208.67.222.222</td><td>2620:119:35::35</td><td>Content filtering</td></tr>
</tbody></table>
</div>
<h2 id="dns-load-balancing"><a class="header" href="#dns-load-balancing">DNS Load Balancing</a></h2>
<p>Multiple A records for load distribution:</p>
<pre><code>example.com.  300  IN  A  192.0.2.1
example.com.  300  IN  A  192.0.2.2
example.com.  300  IN  A  192.0.2.3
</code></pre>
<p>Round-robin or geographic distribution of requests.</p>
<h2 id="common-dns-response-codes"><a class="header" href="#common-dns-response-codes">Common DNS Response Codes</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Code</th><th>Name</th><th>Meaning</th></tr></thead><tbody>
<tr><td><strong>0</strong></td><td>NOERROR</td><td>Query successful</td></tr>
<tr><td><strong>1</strong></td><td>FORMERR</td><td>Format error</td></tr>
<tr><td><strong>2</strong></td><td>SERVFAIL</td><td>Server failure</td></tr>
<tr><td><strong>3</strong></td><td>NXDOMAIN</td><td>Domain doesn't exist</td></tr>
<tr><td><strong>4</strong></td><td>NOTIMP</td><td>Not implemented</td></tr>
<tr><td><strong>5</strong></td><td>REFUSED</td><td>Query refused</td></tr>
</tbody></table>
</div>
<h2 id="dns-best-practices"><a class="header" href="#dns-best-practices">DNS Best Practices</a></h2>
<h3 id="1-use-multiple-nameservers"><a class="header" href="#1-use-multiple-nameservers">1. Use Multiple Nameservers</a></h3>
<pre><code>NS  ns1.example.com  (Primary)
NS  ns2.example.com  (Secondary)
</code></pre>
<h3 id="2-appropriate-ttl-values"><a class="header" href="#2-appropriate-ttl-values">2. Appropriate TTL Values</a></h3>
<pre><code># Stable records (rarely change)
example.com.  86400  IN  A  93.184.216.34

# Dynamic records (may change soon)
staging.example.com.  300  IN  A  192.0.2.1
</code></pre>
<h3 id="3-spf-records-for-email"><a class="header" href="#3-spf-records-for-email">3. SPF Records for Email</a></h3>
<pre><code>example.com.  IN  TXT  "v=spf1 mx include:_spf.google.com ~all"
</code></pre>
<h3 id="4-dkim-for-email-authentication"><a class="header" href="#4-dkim-for-email-authentication">4. DKIM for Email Authentication</a></h3>
<pre><code>default._domainkey.example.com.  IN  TXT  "v=DKIM1; k=rsa; p=MIGfMA0..."
</code></pre>
<h2 id="dns-troubleshooting"><a class="header" href="#dns-troubleshooting">DNS Troubleshooting</a></h2>
<h3 id="issue-domain-not-resolving"><a class="header" href="#issue-domain-not-resolving">Issue: Domain not resolving</a></h3>
<pre><code class="language-bash"># Check if domain exists
dig example.com

# Check all nameservers
dig example.com NS
dig @ns1.example.com example.com

# Check propagation
dig @8.8.8.8 example.com
dig @1.1.1.1 example.com
</code></pre>
<h3 id="issue-slow-dns-resolution"><a class="header" href="#issue-slow-dns-resolution">Issue: Slow DNS resolution</a></h3>
<pre><code class="language-bash"># Test query time
dig example.com | grep "Query time"

# Compare different DNS servers
dig @8.8.8.8 example.com | grep "Query time"
dig @1.1.1.1 example.com | grep "Query time"
</code></pre>
<h3 id="issue-nxdomain-domain-not-found"><a class="header" href="#issue-nxdomain-domain-not-found">Issue: NXDOMAIN (domain not found)</a></h3>
<ol>
<li>Check domain registration</li>
<li>Verify nameserver configuration</li>
<li>Check DNS propagation time (up to 48 hours)</li>
</ol>
<h2 id="zone-file-example"><a class="header" href="#zone-file-example">Zone File Example</a></h2>
<pre><code>$TTL 86400
@   IN  SOA  ns1.example.com. admin.example.com. (
            2024011301  ; Serial
            3600        ; Refresh
            1800        ; Retry
            604800      ; Expire
            86400 )     ; Minimum TTL

; Name servers
    IN  NS   ns1.example.com.
    IN  NS   ns2.example.com.

; Mail servers
    IN  MX   10 mail1.example.com.
    IN  MX   20 mail2.example.com.

; A records
@           IN  A    93.184.216.34
www         IN  A    93.184.216.34
mail1       IN  A    192.0.2.1
mail2       IN  A    192.0.2.2
ns1         IN  A    192.0.2.10
ns2         IN  A    192.0.2.11

; AAAA records (IPv6)
@           IN  AAAA 2606:2800:220:1:248:1893:25c8:1946

; CNAME records
ftp         IN  CNAME www.example.com.
webmail     IN  CNAME mail1.example.com.
</code></pre>
<h2 id="eli10-21"><a class="header" href="#eli10-21">ELI10</a></h2>
<p>DNS is like a phone book for the internet:</p>
<ul>
<li><strong>Without DNS</strong>: "Visit 93.184.216.34" (hard to remember!)</li>
<li><strong>With DNS</strong>: "Visit example.com" (easy!)</li>
</ul>
<p>When you type a website name:</p>
<ol>
<li>Your computer asks "Where is example.com?"</li>
<li>DNS looks it up in its huge phone book</li>
<li>DNS says "It's at 93.184.216.34"</li>
<li>Your computer connects to that address</li>
</ol>
<p>DNS servers are like helpers who:</p>
<ul>
<li>Remember answers (caching) so they can answer faster next time</li>
<li>Ask other DNS servers if they don't know the answer</li>
<li>Make sure everyone gets the same answer for the same website</li>
</ul>
<h2 id="further-resources-27"><a class="header" href="#further-resources-27">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc1035">RFC 1035 - DNS Specification</a></li>
<li><a href="https://howdns.works/">How DNS Works (Comic)</a></li>
<li><a href="https://mxtoolbox.com/DNSLookup.aspx">DNS Lookup Tool</a></li>
<li><a href="https://dnssec-analyzer.verisignlabs.com/">DNSSEC Explained</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="mdns-multicast-dns-1"><a class="header" href="#mdns-multicast-dns-1">mDNS (Multicast DNS)</a></h1>
<h2 id="overview-48"><a class="header" href="#overview-48">Overview</a></h2>
<p>mDNS (Multicast DNS) is a protocol that resolves hostnames to IP addresses within small networks without requiring a conventional DNS server. It's part of Zero Configuration Networking (Zeroconf) and enables devices to discover each other on local networks using the <code>.local</code> domain.</p>
<h2 id="why-mdns"><a class="header" href="#why-mdns">Why mDNS?</a></h2>
<h3 id="traditional-dns-limitations"><a class="header" href="#traditional-dns-limitations">Traditional DNS Limitations</a></h3>
<pre><code>Problem: Home networks lack DNS servers

Traditional setup requires:
1. DNS server
2. Manual configuration
3. Static IP or DHCP integration
4. Administrative overhead

mDNS solution:
- No DNS server needed
- Automatic hostname resolution
- Zero configuration
- Works out of the box
</code></pre>
<h3 id="use-cases-1"><a class="header" href="#use-cases-1">Use Cases</a></h3>
<pre><code>1. Printer discovery
   - printer.local → 192.168.1.100

2. File sharing
   - macbook.local → 192.168.1.50

3. IoT devices
   - raspberry-pi.local → 192.168.1.75

4. Local development
   - webserver.local → 127.0.0.1

5. Service discovery
   - Find all printers on network
   - Find all file servers
</code></pre>
<h2 id="how-mdns-works"><a class="header" href="#how-mdns-works">How mDNS Works</a></h2>
<h3 id="query-process"><a class="header" href="#query-process">Query Process</a></h3>
<pre><code>Device wants to find "printer.local"

1. Send multicast query to 224.0.0.251:5353
   "Who has printer.local?"

2. All devices receive query

3. Device with hostname "printer" responds
   "I'm printer.local at 192.168.1.100"

4. Querying device caches response

5. Direct communication established
</code></pre>
<h3 id="multicast-address"><a class="header" href="#multicast-address">Multicast Address</a></h3>
<pre><code>IPv4: 224.0.0.251
IPv6: ff02::fb
Port: 5353 (UDP)

All devices on local network listen to this address
</code></pre>
<h2 id="mdns-message-format"><a class="header" href="#mdns-message-format">mDNS Message Format</a></h2>
<h3 id="dns-compatible-format"><a class="header" href="#dns-compatible-format">DNS-Compatible Format</a></h3>
<p>mDNS uses standard DNS message format:</p>
<pre><code>+---------------------------+
|        Header             |
+---------------------------+
|        Question           |
+---------------------------+
|        Answer             |
+---------------------------+
|        Authority          |
+---------------------------+
|        Additional         |
+---------------------------+
</code></pre>
<h3 id="header-fields"><a class="header" href="#header-fields">Header Fields</a></h3>
<pre><code>ID: Usually 0 (multicast)
QR: Query (0) or Response (1)
OPCODE: 0 (standard query)
AA: Authoritative Answer (1 for responses)
TC: Truncated
RD: Recursion Desired (0 for mDNS)
RA: Recursion Available (0 for mDNS)
RCODE: Response code

Questions: Number of questions
Answers: Number of answer RRs
Authority: Number of authority RRs
Additional: Number of additional RRs
</code></pre>
<h2 id="mdns-query-example"><a class="header" href="#mdns-query-example">mDNS Query Example</a></h2>
<h3 id="query-message"><a class="header" href="#query-message">Query Message</a></h3>
<pre><code>Multicast to 224.0.0.251:5353

Question:
  Name: printer.local
  Type: A (IPv4 address)
  Class: IN (Internet)
  QU bit: 0 (multicast query)

Header:
  ID: 0
  Flags: 0x0000 (standard query)
  Questions: 1
  Answers: 0
</code></pre>
<h3 id="response-message"><a class="header" href="#response-message">Response Message</a></h3>
<pre><code>Multicast from 192.168.1.100:5353

Answer:
  Name: printer.local
  Type: A
  Class: IN | Cache-Flush bit
  TTL: 120 seconds
  Data: 192.168.1.100

Header:
  ID: 0
  Flags: 0x8400 (authoritative answer)
  Questions: 0
  Answers: 1
</code></pre>
<h2 id="mdns-record-types"><a class="header" href="#mdns-record-types">mDNS Record Types</a></h2>
<h3 id="common-record-types"><a class="header" href="#common-record-types">Common Record Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Purpose</th><th>Example</th></tr></thead><tbody>
<tr><td><strong>A</strong></td><td>IPv4 address</td><td><code>device.local → 192.168.1.10</code></td></tr>
<tr><td><strong>AAAA</strong></td><td>IPv6 address</td><td><code>device.local → fe80::1</code></td></tr>
<tr><td><strong>PTR</strong></td><td>Pointer (service discovery)</td><td><code>_http._tcp.local → webserver</code></td></tr>
<tr><td><strong>SRV</strong></td><td>Service location</td><td><code>webserver._http._tcp.local → device.local:80</code></td></tr>
<tr><td><strong>TXT</strong></td><td>Text information</td><td>Service metadata</td></tr>
</tbody></table>
</div>
<h3 id="service-discovery-dns-sd"><a class="header" href="#service-discovery-dns-sd">Service Discovery (DNS-SD)</a></h3>
<pre><code>PTR Record: Browse services
  _http._tcp.local → webserver._http._tcp.local

SRV Record: Service location
  webserver._http._tcp.local
    Target: myserver.local
    Port: 8080
    Priority: 0
    Weight: 0

TXT Record: Service metadata
  webserver._http._tcp.local
    "path=/admin"
    "version=1.0"

A Record: IP address
  myserver.local → 192.168.1.50
</code></pre>
<h2 id="mdns-features"><a class="header" href="#mdns-features">mDNS Features</a></h2>
<h3 id="1-multicast-queries"><a class="header" href="#1-multicast-queries">1. Multicast Queries</a></h3>
<pre><code>Traditional DNS (unicast):
  Client → DNS Server: "What's example.com?"
  DNS Server → Client: "93.184.216.34"

mDNS (multicast):
  Client → All devices: "Who has printer.local?"
  Printer → All devices: "I'm 192.168.1.100"

Benefits:
  - No dedicated server
  - All devices hear query
  - Multiple responses possible
</code></pre>
<h3 id="2-known-answer-suppression"><a class="header" href="#2-known-answer-suppression">2. Known-Answer Suppression</a></h3>
<pre><code>Query includes known answers to avoid redundant responses

Client has cached: printer.local → 192.168.1.100

Query:
  Question: printer.local?
  Known Answer: 192.168.1.100 (TTL &gt; 50% remaining)

Printer sees cached answer is still valid
  → Doesn't respond (saves bandwidth)
</code></pre>
<h3 id="3-cache-flush-bit"><a class="header" href="#3-cache-flush-bit">3. Cache-Flush Bit</a></h3>
<pre><code>Purpose: Invalidate old cache entries

Response with cache-flush:
  printer.local → 192.168.1.100
  Class: IN | 0x8000 (cache-flush bit set)

Receivers:
  - Flush old records for printer.local
  - Cache new record
  - Prevents stale data
</code></pre>
<h3 id="4-continuous-verification"><a class="header" href="#4-continuous-verification">4. Continuous Verification</a></h3>
<pre><code>Querier sends query even if cached
  - Verify host still exists
  - Detect IP changes
  - Maintain fresh cache

If no response → remove from cache
</code></pre>
<h3 id="5-graceful-shutdown"><a class="header" href="#5-graceful-shutdown">5. Graceful Shutdown</a></h3>
<pre><code>Device going offline:

Send goodbye message:
  printer.local → 192.168.1.100
  TTL: 0 (indicates removal)

Other devices:
  - Remove from cache immediately
  - Don't wait for timeout
</code></pre>
<h2 id="service-discovery-with-dns-sd"><a class="header" href="#service-discovery-with-dns-sd">Service Discovery with DNS-SD</a></h2>
<h3 id="browsing-services"><a class="header" href="#browsing-services">Browsing Services</a></h3>
<pre><code>Query:
  _services._dns-sd._udp.local PTR?

Response (all available service types):
  _http._tcp.local
  _printer._tcp.local
  _ssh._tcp.local
  _sftp-ssh._tcp.local
</code></pre>
<h3 id="finding-specific-service"><a class="header" href="#finding-specific-service">Finding Specific Service</a></h3>
<pre><code>Query:
  _http._tcp.local PTR?

Response (all HTTP services):
  webserver._http._tcp.local
  api._http._tcp.local
  admin._http._tcp.local
</code></pre>
<h3 id="getting-service-details"><a class="header" href="#getting-service-details">Getting Service Details</a></h3>
<pre><code>Query:
  webserver._http._tcp.local SRV?
  webserver._http._tcp.local TXT?

Response (SRV):
  Target: myserver.local
  Port: 8080
  Priority: 0
  Weight: 0

Response (TXT):
  path=/
  version=2.0
  https=true

Then resolve:
  myserver.local A? → 192.168.1.50
</code></pre>
<h2 id="mdns-implementation"><a class="header" href="#mdns-implementation">mDNS Implementation</a></h2>
<h3 id="python-example-query"><a class="header" href="#python-example-query">Python Example (Query)</a></h3>
<pre><code class="language-python">import socket
import struct

MDNS_ADDR = '224.0.0.251'
MDNS_PORT = 5353

def query_mdns(hostname):
    # Create UDP socket
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.setsockopt(socket.IPPROTO_IP, socket.IP_MULTICAST_TTL, 255)
    sock.settimeout(2)

    # Build DNS query
    # Header: ID=0, Flags=0, Questions=1
    query = struct.pack('!HHHHHH', 0, 0, 1, 0, 0, 0)

    # Question: hostname, type A, class IN
    for part in hostname.split('.'):
        query += bytes([len(part)]) + part.encode()
    query += b'\x00'  # End of name
    query += struct.pack('!HH', 1, 1)  # Type A, Class IN

    # Send query
    sock.sendto(query, (MDNS_ADDR, MDNS_PORT))

    # Receive responses
    responses = []
    try:
        while True:
            data, addr = sock.recvfrom(1024)
            responses.append((data, addr))
    except socket.timeout:
        pass

    sock.close()
    return responses

# Usage
responses = query_mdns('printer.local')
for data, addr in responses:
    print(f"Response from {addr}")
</code></pre>
<h3 id="python-example-responder-using-zeroconf"><a class="header" href="#python-example-responder-using-zeroconf">Python Example (Responder using zeroconf)</a></h3>
<pre><code class="language-python">from zeroconf import ServiceInfo, Zeroconf
import socket

# Get local IP
hostname = socket.gethostname()
local_ip = socket.gethostbyname(hostname)

# Create service info
info = ServiceInfo(
    "_http._tcp.local.",
    "My Web Server._http._tcp.local.",
    addresses=[socket.inet_aton(local_ip)],
    port=8080,
    properties={
        'path': '/',
        'version': '1.0'
    },
    server=f"{hostname}.local."
)

# Register service
zeroconf = Zeroconf()
zeroconf.register_service(info)

print(f"Service registered: {hostname}.local:8080")

try:
    input("Press Enter to unregister...\n")
finally:
    zeroconf.unregister_service(info)
    zeroconf.close()
</code></pre>
<h3 id="avahi-linux"><a class="header" href="#avahi-linux">Avahi (Linux)</a></h3>
<pre><code class="language-bash"># Install Avahi
sudo apt-get install avahi-daemon avahi-utils

# Check hostname
avahi-resolve -n hostname.local

# Browse services
avahi-browse -a

# Browse specific service
avahi-browse _http._tcp

# Publish service
avahi-publish -s "My Service" _http._tcp 8080 path=/
</code></pre>
<h3 id="bonjour-macos"><a class="header" href="#bonjour-macos">Bonjour (macOS)</a></h3>
<pre><code class="language-bash"># Resolve hostname
dns-sd -G v4 hostname.local

# Browse services
dns-sd -B _http._tcp

# Resolve service
dns-sd -L "My Service" _http._tcp

# Register service
dns-sd -R "My Service" _http._tcp . 8080 path=/
</code></pre>
<h3 id="windows-2"><a class="header" href="#windows-2">Windows</a></h3>
<pre><code class="language-powershell"># Windows 10+ includes mDNS support

# Resolve via PowerShell
Resolve-DnsName hostname.local

# Or use Bonjour SDK
# Download from Apple Developer
</code></pre>
<h2 id="mdns-service-naming"><a class="header" href="#mdns-service-naming">mDNS Service Naming</a></h2>
<h3 id="format"><a class="header" href="#format">Format</a></h3>
<pre><code>&lt;Instance&gt;._&lt;Service&gt;._&lt;Transport&gt;.local

Examples:
  My Printer._printer._tcp.local
  Living Room._airplay._tcp.local
  Office Server._smb._tcp.local
  Kitchen Speaker._raop._tcp.local
</code></pre>
<h3 id="common-service-types"><a class="header" href="#common-service-types">Common Service Types</a></h3>
<pre><code>_http._tcp        Web server
_https._tcp       Secure web server
_ssh._tcp         SSH server
_sftp-ssh._tcp    SFTP over SSH
_ftp._tcp         FTP server
_smb._tcp         Samba/Windows file sharing
_afpovertcp._tcp  Apple File Protocol
_printer._tcp     Printer
_ipp._tcp         Internet Printing Protocol
_airplay._tcp     AirPlay
_raop._tcp        Remote Audio Output Protocol
_spotify-connect._tcp  Spotify Connect
</code></pre>
<h2 id="mdns-traffic-analysis"><a class="header" href="#mdns-traffic-analysis">mDNS Traffic Analysis</a></h2>
<h3 id="capturing-mdns"><a class="header" href="#capturing-mdns">Capturing mDNS</a></h3>
<pre><code class="language-bash"># tcpdump
sudo tcpdump -i any -n port 5353

# Wireshark
# Filter: udp.port == 5353
# Follow: Right-click → Follow → UDP Stream
</code></pre>
<h3 id="example-capture"><a class="header" href="#example-capture">Example Capture</a></h3>
<pre><code>Query:
  192.168.1.10 → 224.0.0.251
  DNS Query: printer.local A?

Response:
  192.168.1.100 → 224.0.0.251
  DNS Answer: printer.local → 192.168.1.100 (TTL 120)
</code></pre>
<h2 id="mdns-security-considerations"><a class="header" href="#mdns-security-considerations">mDNS Security Considerations</a></h2>
<h3 id="vulnerabilities-1"><a class="header" href="#vulnerabilities-1">Vulnerabilities</a></h3>
<ol>
<li><strong>No Authentication</strong></li>
</ol>
<pre><code>Anyone can claim to be "printer.local"
No verification of identity
Potential for spoofing
</code></pre>
<ol start="2">
<li><strong>Local Network Only</strong></li>
</ol>
<pre><code>mDNS doesn't cross routers
Limited to link-local multicast
Good for security (confined to LAN)
</code></pre>
<ol start="3">
<li><strong>Information Disclosure</strong></li>
</ol>
<pre><code>Services broadcast their presence
Attackers can enumerate:
  - Device names
  - Service types
  - IP addresses
  - Software versions
</code></pre>
<ol start="4">
<li><strong>Name Conflicts</strong></li>
</ol>
<pre><code>Two devices with same hostname
Both respond to queries
Can cause confusion
</code></pre>
<h3 id="mitigation-1"><a class="header" href="#mitigation-1">Mitigation</a></h3>
<pre><code>1. Firewall rules
   - Block port 5353 on external interfaces
   - Allow only on trusted LANs

2. VLANs
   - Separate guest network
   - Prevent mDNS between VLANs

3. Unique hostnames
   - Avoid generic names
   - Include random identifier

4. Service filtering
   - Only advertise necessary services
   - Remove unused service announcements
</code></pre>
<h2 id="mdns-performance"><a class="header" href="#mdns-performance">mDNS Performance</a></h2>
<h3 id="bandwidth-usage"><a class="header" href="#bandwidth-usage">Bandwidth Usage</a></h3>
<pre><code>Typical traffic:
  - Query: ~50 bytes
  - Response: ~100 bytes
  - Continuous verification: ~1-2 queries/minute

Low bandwidth impact
Efficient for local networks
</code></pre>
<h3 id="cache-timing"><a class="header" href="#cache-timing">Cache Timing</a></h3>
<pre><code>TTL values:
  - Typical: 120 seconds (2 minutes)
  - High priority: 10 seconds
  - Low priority: 4500 seconds (75 minutes)

Refresh at 80% of TTL
Query again at 90% of TTL
Remove at 100% of TTL
</code></pre>
<h2 id="troubleshooting-mdns"><a class="header" href="#troubleshooting-mdns">Troubleshooting mDNS</a></h2>
<h3 id="device-not-responding"><a class="header" href="#device-not-responding">Device not responding</a></h3>
<pre><code class="language-bash"># 1. Check mDNS daemon
sudo systemctl status avahi-daemon  # Linux
sudo launchctl list | grep mDNS     # macOS

# 2. Test multicast
ping -c 3 224.0.0.251

# 3. Check firewall
sudo iptables -L | grep 5353
sudo ufw status

# 4. Capture traffic
sudo tcpdump -i any port 5353

# 5. Resolve manually
avahi-resolve -n device.local
dns-sd -G v4 device.local
</code></pre>
<h3 id="name-conflicts"><a class="header" href="#name-conflicts">Name conflicts</a></h3>
<pre><code>Error: "hostname.local already in use"

Solutions:
1. Rename device
   - hostname.local → hostname-2.local
   - Automatic on many systems

2. Check for duplicates
   - Ensure unique hostnames
   - Search network for conflicts
</code></pre>
<h3 id="slow-resolution"><a class="header" href="#slow-resolution">Slow resolution</a></h3>
<pre><code>Causes:
  - Network congestion
  - Many mDNS devices
  - Packet loss

Solutions:
  - Reduce query frequency
  - Use unicast if possible
  - Cache aggressively
</code></pre>
<h2 id="mdns-vs-dns"><a class="header" href="#mdns-vs-dns">mDNS vs DNS</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>Traditional DNS</th><th>mDNS</th></tr></thead><tbody>
<tr><td><strong>Server</strong></td><td>Centralized server</td><td>Distributed (all devices)</td></tr>
<tr><td><strong>Configuration</strong></td><td>Manual setup</td><td>Zero configuration</td></tr>
<tr><td><strong>Scope</strong></td><td>Internet-wide</td><td>Local network only</td></tr>
<tr><td><strong>Domain</strong></td><td>Any TLD</td><td><code>.local</code> only</td></tr>
<tr><td><strong>Protocol</strong></td><td>Unicast</td><td>Multicast</td></tr>
<tr><td><strong>Port</strong></td><td>53</td><td>5353</td></tr>
<tr><td><strong>Security</strong></td><td>DNSSEC available</td><td>No authentication</td></tr>
</tbody></table>
</div>
<h2 id="eli10-22"><a class="header" href="#eli10-22">ELI10</a></h2>
<p>mDNS is like asking a question to everyone in a classroom:</p>
<p><strong>Traditional DNS:</strong></p>
<ul>
<li>Raise your hand and ask the teacher</li>
<li>Teacher has a list of everyone's desks</li>
<li>Teacher tells you where Alice sits</li>
</ul>
<p><strong>mDNS (Multicast DNS):</strong></p>
<ul>
<li>Stand up and ask: "Where's Alice?"</li>
<li>Alice hears you and responds: "I'm here at desk 5!"</li>
<li>Everyone hears both question and answer</li>
<li>Next time someone asks, they already know</li>
</ul>
<p><strong>Benefits:</strong></p>
<ul>
<li>No need for a teacher (DNS server)</li>
<li>Works immediately</li>
<li>Everyone learns everyone else's location</li>
</ul>
<p><strong>Limitations:</strong></p>
<ul>
<li>Only works in one classroom (local network)</li>
<li>Can't ask about people in other classrooms</li>
<li>Everyone hears everything (less private)</li>
</ul>
<p><strong>Real Examples:</strong></p>
<ul>
<li>"Where's the printer?" → "printer.local is at 192.168.1.100"</li>
<li>"Where's my MacBook?" → "macbook.local is at 192.168.1.50"</li>
<li>"Any web servers?" → "myserver.local has HTTP on port 8080"</li>
</ul>
<p>It's perfect for homes and small offices where you just want things to work!</p>
<h2 id="further-resources-28"><a class="header" href="#further-resources-28">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc6762">RFC 6762 - mDNS Specification</a></li>
<li><a href="https://tools.ietf.org/html/rfc6763">RFC 6763 - DNS-SD</a></li>
<li><a href="https://www.avahi.org/">Avahi</a></li>
<li><a href="https://developer.apple.com/bonjour/">Apple Bonjour</a></li>
<li><a href="https://github.com/jstasiak/python-zeroconf">zeroconf Python Library</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="firewalls-1"><a class="header" href="#firewalls-1">Firewalls</a></h1>
<h2 id="overview-49"><a class="header" href="#overview-49">Overview</a></h2>
<p>A firewall is a network security system that monitors and controls incoming and outgoing network traffic based on predetermined security rules. It acts as a barrier between trusted internal networks and untrusted external networks (like the internet).</p>
<h2 id="firewall-types"><a class="header" href="#firewall-types">Firewall Types</a></h2>
<h3 id="1-packet-filtering-firewall"><a class="header" href="#1-packet-filtering-firewall">1. Packet Filtering Firewall</a></h3>
<p><strong>How it works:</strong></p>
<ul>
<li>Inspects individual packets</li>
<li>Makes decisions based on header information</li>
<li>Stateless (doesn't track connections)</li>
</ul>
<p><strong>Checks:</strong></p>
<ul>
<li>Source IP address</li>
<li>Destination IP address</li>
<li>Source port</li>
<li>Destination port</li>
<li>Protocol (TCP, UDP, ICMP)</li>
</ul>
<p><strong>Example Rule:</strong></p>
<pre><code>ALLOW TCP from 192.168.1.0/24 to any port 80
DENY TCP from any to any port 23
</code></pre>
<p><strong>Decision Process:</strong></p>
<pre><code>Incoming packet:
  Src: 192.168.1.10:54321
  Dst: 10.0.0.5:80
  Protocol: TCP

Check rules top-to-bottom:
  Rule 1: Allow 192.168.1.0/24 to port 80 → MATCH
  Action: ALLOW

Packet forwarded
</code></pre>
<p><strong>Pros:</strong></p>
<ul>
<li>Fast (minimal inspection)</li>
<li>Low resource usage</li>
<li>Simple configuration</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>No state tracking</li>
<li>Can't detect complex attacks</li>
<li>Vulnerable to IP spoofing</li>
</ul>
<h3 id="2-stateful-inspection-firewall"><a class="header" href="#2-stateful-inspection-firewall">2. Stateful Inspection Firewall</a></h3>
<p><strong>How it works:</strong></p>
<ul>
<li>Tracks connection state</li>
<li>Maintains state table</li>
<li>Understands context of traffic</li>
</ul>
<p><strong>State Table Example:</strong></p>
<pre><code>Src IP        Src Port  Dst IP        Dst Port  State      Protocol
192.168.1.10  54321     93.184.216.34 80        ESTABLISHED TCP
192.168.1.11  54322     8.8.8.8       53        NEW         UDP
192.168.1.10  54323     10.0.0.5      22        SYN_SENT    TCP
</code></pre>
<p><strong>TCP Connection Tracking:</strong></p>
<pre><code>Client → Server: SYN
  State: NEW

Server → Client: SYN-ACK
  State: ESTABLISHED

Client → Server: ACK
  State: ESTABLISHED

... data transfer ...

Client → Server: FIN
  State: CLOSING

Server → Client: FIN-ACK
  State: CLOSED
</code></pre>
<p><strong>Example Rule:</strong></p>
<pre><code># Outbound rule
ALLOW TCP from 192.168.1.0/24 to any port 80 STATE NEW,ESTABLISHED

# Return traffic automatically allowed
# (tracked in state table)
</code></pre>
<p><strong>Pros:</strong></p>
<ul>
<li>Understands connection context</li>
<li>Better security than packet filtering</li>
<li>Prevents spoofing attacks</li>
<li>Allows related traffic</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>More resource intensive</li>
<li>State table can be exhausted</li>
<li>Performance impact at scale</li>
</ul>
<h3 id="3-application-layer-firewall-proxy-firewall"><a class="header" href="#3-application-layer-firewall-proxy-firewall">3. Application Layer Firewall (Proxy Firewall)</a></h3>
<p><strong>How it works:</strong></p>
<ul>
<li>Operates at Layer 7 (Application)</li>
<li>Acts as intermediary (proxy)</li>
<li>Deep packet inspection</li>
<li>Understands application protocols</li>
</ul>
<p><strong>Proxy Flow:</strong></p>
<pre><code>Client → Proxy → Server

Client connects to proxy
Proxy inspects full request
Proxy makes decision
Proxy connects to server (if allowed)
Proxy relays response to client
</code></pre>
<p><strong>Inspection Capabilities:</strong></p>
<pre><code>HTTP/HTTPS:
  - URL filtering
  - Content scanning
  - Malware detection
  - Data loss prevention

FTP:
  - Command filtering
  - File type restrictions

SMTP:
  - Spam filtering
  - Attachment scanning
</code></pre>
<p><strong>Example:</strong></p>
<pre><code>HTTP Request:
  GET /admin.php HTTP/1.1
  Host: example.com

Proxy checks:
  1. Is /admin.php allowed? → NO
  2. Block request
  3. Return 403 Forbidden
</code></pre>
<p><strong>Pros:</strong></p>
<ul>
<li>Deep inspection</li>
<li>Understands application protocols</li>
<li>Can filter content</li>
<li>Hides internal network</li>
<li>Logging and auditing</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Significant performance impact</li>
<li>Complex configuration</li>
<li>May break some applications</li>
<li>Single point of failure</li>
</ul>
<h3 id="4-next-generation-firewall-ngfw"><a class="header" href="#4-next-generation-firewall-ngfw">4. Next-Generation Firewall (NGFW)</a></h3>
<p><strong>Combines:</strong></p>
<ul>
<li>Traditional firewall functions</li>
<li>Intrusion Prevention System (IPS)</li>
<li>Application awareness</li>
<li>SSL/TLS inspection</li>
<li>Advanced threat protection</li>
</ul>
<p><strong>Features:</strong></p>
<pre><code>1. Deep Packet Inspection (DPI)
   - Full packet content analysis

2. Application Control
   - Block Facebook but allow LinkedIn
   - Control by application, not just port

3. User Identity
   - Rules based on user/group
   - Active Directory integration

4. Threat Intelligence
   - Malware detection
   - Botnet protection
   - Zero-day protection

5. SSL Inspection
   - Decrypt HTTPS traffic
   - Inspect encrypted content
   - Re-encrypt and forward
</code></pre>
<p><strong>Example NGFW Rule:</strong></p>
<pre><code>DENY application "BitTorrent" for group "Employees"
ALLOW application "Salesforce" for group "Sales"
BLOCK malware signature "Trojan.Generic.123"
</code></pre>
<h2 id="firewall-architectures"><a class="header" href="#firewall-architectures">Firewall Architectures</a></h2>
<h3 id="1-packet-filtering-router"><a class="header" href="#1-packet-filtering-router">1. Packet Filtering Router</a></h3>
<pre><code>Internet → → [Router with ACL] → → Internal Network

Simple, single layer of protection
</code></pre>
<h3 id="2-dual-homed-host"><a class="header" href="#2-dual-homed-host">2. Dual-Homed Host</a></h3>
<pre><code>Internet → → [Firewall with 2 NICs] → → Internal Network
             (All traffic through firewall)

Complete traffic control
</code></pre>
<h3 id="3-screened-host"><a class="header" href="#3-screened-host">3. Screened Host</a></h3>
<pre><code>Internet → → [Router] → → [Firewall Host] → → Internal Network

Router filters basic traffic
Firewall provides additional protection
</code></pre>
<h3 id="4-screened-subnet-dmz"><a class="header" href="#4-screened-subnet-dmz">4. Screened Subnet (DMZ)</a></h3>
<pre><code>Internet → → [External FW] → → [DMZ] → → [Internal FW] → → Internal Network
                               (Web, Mail)

Public services in DMZ
Internal network isolated
</code></pre>
<p><strong>DMZ Example:</strong></p>
<pre><code>External Firewall Rules:
  - Allow HTTP/HTTPS to web server (DMZ)
  - Allow SMTP to mail server (DMZ)
  - Deny all to internal network

Internal Firewall Rules:
  - Allow web server to database (specific port)
  - Allow mail server to internal mail (specific port)
  - Deny all other DMZ traffic to internal
</code></pre>
<h2 id="firewall-rules"><a class="header" href="#firewall-rules">Firewall Rules</a></h2>
<h3 id="rule-components"><a class="header" href="#rule-components">Rule Components</a></h3>
<pre><code>1. Source: Where traffic originates
2. Destination: Where traffic is going
3. Service/Port: What service (HTTP, SSH, etc.)
4. Action: Allow, Deny, Reject
5. Direction: Inbound, Outbound
6. State: NEW, ESTABLISHED, RELATED
</code></pre>
<h3 id="rule-example-iptables"><a class="header" href="#rule-example-iptables">Rule Example (iptables)</a></h3>
<pre><code class="language-bash"># Allow SSH from specific network
iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 22 -j ACCEPT

# Allow established connections
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allow HTTP and HTTPS
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# Drop everything else
iptables -A INPUT -j DROP
</code></pre>
<h3 id="rule-ordering"><a class="header" href="#rule-ordering">Rule Ordering</a></h3>
<p><strong>Important:</strong> Rules processed top-to-bottom, first match wins</p>
<pre><code class="language-bash"># WRONG ORDER:
1. DENY all
2. ALLOW HTTP port 80  → Never reached!

# CORRECT ORDER:
1. ALLOW HTTP port 80
2. DENY all
</code></pre>
<h3 id="default-policy"><a class="header" href="#default-policy">Default Policy</a></h3>
<pre><code class="language-bash"># Default DENY (whitelist approach - more secure)
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

# Then explicitly allow needed services

# Default ALLOW (blacklist approach - less secure)
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -P OUTPUT ACCEPT

# Then explicitly block dangerous services
</code></pre>
<h2 id="common-firewall-configurations"><a class="header" href="#common-firewall-configurations">Common Firewall Configurations</a></h2>
<h3 id="1-linux-iptables"><a class="header" href="#1-linux-iptables">1. Linux iptables</a></h3>
<p><strong>View rules:</strong></p>
<pre><code class="language-bash">iptables -L -v -n
</code></pre>
<p><strong>Basic web server protection:</strong></p>
<pre><code class="language-bash"># Flush existing rules
iptables -F

# Default policies
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT ACCEPT

# Allow loopback
iptables -A INPUT -i lo -j ACCEPT

# Allow established connections
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allow SSH (from specific network)
iptables -A INPUT -s 192.168.1.0/24 -p tcp --dport 22 -j ACCEPT

# Allow HTTP/HTTPS
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
iptables -A INPUT -p tcp --dport 443 -j ACCEPT

# Allow ping
iptables -A INPUT -p icmp --icmp-type echo-request -j ACCEPT

# Log dropped packets
iptables -A INPUT -j LOG --log-prefix "DROPPED: "
iptables -A INPUT -j DROP

# Save rules
iptables-save &gt; /etc/iptables/rules.v4
</code></pre>
<h3 id="2-linux-ufw-uncomplicated-firewall"><a class="header" href="#2-linux-ufw-uncomplicated-firewall">2. Linux ufw (Uncomplicated Firewall)</a></h3>
<pre><code class="language-bash"># Enable firewall
ufw enable

# Default policies
ufw default deny incoming
ufw default allow outgoing

# Allow SSH
ufw allow 22/tcp

# Allow HTTP/HTTPS
ufw allow 80/tcp
ufw allow 443/tcp

# Allow from specific IP
ufw allow from 192.168.1.100

# Allow specific port from specific IP
ufw allow from 192.168.1.100 to any port 3306

# View rules
ufw status numbered

# Delete rule
ufw delete 5
</code></pre>
<h3 id="3-linux-firewalld"><a class="header" href="#3-linux-firewalld">3. Linux firewalld</a></h3>
<pre><code class="language-bash"># View zones
firewall-cmd --get-active-zones

# Add service to zone
firewall-cmd --zone=public --add-service=http
firewall-cmd --zone=public --add-service=https

# Add port
firewall-cmd --zone=public --add-port=8080/tcp

# Add rich rule
firewall-cmd --zone=public --add-rich-rule='rule family="ipv4" source address="192.168.1.0/24" service name="ssh" accept'

# Make permanent
firewall-cmd --runtime-to-permanent

# Reload
firewall-cmd --reload
</code></pre>
<h3 id="4-windows-firewall"><a class="header" href="#4-windows-firewall">4. Windows Firewall</a></h3>
<pre><code class="language-powershell"># View rules
Get-NetFirewallRule

# Enable firewall
Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled True

# Allow inbound port
New-NetFirewallRule -DisplayName "Allow HTTP" -Direction Inbound -LocalPort 80 -Protocol TCP -Action Allow

# Allow program
New-NetFirewallRule -DisplayName "My App" -Direction Inbound -Program "C:\App\myapp.exe" -Action Allow

# Block IP address
New-NetFirewallRule -DisplayName "Block IP" -Direction Inbound -RemoteAddress 10.0.0.5 -Action Block
</code></pre>
<h2 id="port-knocking"><a class="header" href="#port-knocking">Port Knocking</a></h2>
<p><strong>Concept:</strong> Hidden service that opens after specific sequence</p>
<p><strong>Example:</strong></p>
<pre><code class="language-bash"># Ports closed by default

# Client knocks sequence: 1234, 5678, 9012
nc -z server.com 1234
nc -z server.com 5678
nc -z server.com 9012

# Server detects sequence, opens SSH port 22 for client IP
# Client can now SSH

# After timeout, port closes again
</code></pre>
<p><strong>Configuration (knockd):</strong></p>
<pre><code>[openSSH]
sequence = 1234,5678,9012
seq_timeout = 10
command = /sbin/iptables -I INPUT -s %IP% -p tcp --dport 22 -j ACCEPT
tcpflags = syn

[closeSSH]
sequence = 9012,5678,1234
seq_timeout = 10
command = /sbin/iptables -D INPUT -s %IP% -p tcp --dport 22 -j ACCEPT
tcpflags = syn
</code></pre>
<h2 id="nat-network-address-translation-1"><a class="header" href="#nat-network-address-translation-1">NAT (Network Address Translation)</a></h2>
<h3 id="source-nat-snat--masquerading"><a class="header" href="#source-nat-snat--masquerading">Source NAT (SNAT) / Masquerading</a></h3>
<p><strong>Purpose:</strong> Hide internal IPs behind single public IP</p>
<pre><code class="language-bash"># iptables NAT
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

# Or specific IP
iptables -t nat -A POSTROUTING -o eth0 -j SNAT --to-source 203.0.113.5
</code></pre>
<p><strong>Traffic Flow:</strong></p>
<pre><code>Internal: 192.168.1.10:5000 → Internet
External: 203.0.113.5:6000 → Internet

Firewall tracks connection:
  192.168.1.10:5000 ↔ 203.0.113.5:6000

Return traffic:
  Internet → 203.0.113.5:6000
  Firewall translates back to: 192.168.1.10:5000
</code></pre>
<h3 id="destination-nat-dnat--port-forwarding"><a class="header" href="#destination-nat-dnat--port-forwarding">Destination NAT (DNAT) / Port Forwarding</a></h3>
<p><strong>Purpose:</strong> Expose internal service on public IP</p>
<pre><code class="language-bash"># Forward public port 80 to internal web server
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to-destination 192.168.1.20:80

# Forward public port 2222 to internal SSH
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 2222 -j DNAT --to-destination 192.168.1.10:22
</code></pre>
<p><strong>Traffic Flow:</strong></p>
<pre><code>Internet → 203.0.113.5:80
Firewall translates to: 192.168.1.20:80
Web server processes request
Response: 192.168.1.20:80 → Internet
Firewall translates from: 203.0.113.5:80 → Internet
</code></pre>
<h2 id="firewall-evasion-techniques-for-awareness"><a class="header" href="#firewall-evasion-techniques-for-awareness">Firewall Evasion Techniques (for awareness)</a></h2>
<h3 id="1-fragmentation"><a class="header" href="#1-fragmentation">1. Fragmentation</a></h3>
<pre><code>Split malicious payload across fragments
Some firewalls don't reassemble
</code></pre>
<h3 id="2-ip-spoofing"><a class="header" href="#2-ip-spoofing">2. IP Spoofing</a></h3>
<pre><code>Fake source IP address
Bypass source-based rules
</code></pre>
<h3 id="3-tunneling"><a class="header" href="#3-tunneling">3. Tunneling</a></h3>
<pre><code>Encapsulate forbidden traffic in allowed protocol
Example: SSH tunnel, DNS tunnel, ICMP tunnel
</code></pre>
<h3 id="4-encryption"><a class="header" href="#4-encryption">4. Encryption</a></h3>
<pre><code>Encrypt malicious traffic
Firewall can't inspect without SSL inspection
</code></pre>
<p><strong>Defense:</strong></p>
<ul>
<li>Fragment reassembly</li>
<li>Anti-spoofing rules</li>
<li>Protocol validation</li>
<li>SSL/TLS inspection</li>
<li>Deep packet inspection</li>
</ul>
<h2 id="firewall-logging"><a class="header" href="#firewall-logging">Firewall Logging</a></h2>
<h3 id="what-to-log"><a class="header" href="#what-to-log">What to Log</a></h3>
<pre><code>1. Blocked connections
2. Allowed critical connections
3. Rule changes
4. Authentication events
5. Anomalies (port scans, floods)
</code></pre>
<h3 id="iptables-logging"><a class="header" href="#iptables-logging">iptables Logging</a></h3>
<pre><code class="language-bash"># Log dropped packets
iptables -A INPUT -j LOG --log-prefix "DROPPED INPUT: " --log-level 4
iptables -A INPUT -j DROP

# Log accepted SSH
iptables -A INPUT -p tcp --dport 22 -j LOG --log-prefix "SSH ACCEPT: "
iptables -A INPUT -p tcp --dport 22 -j ACCEPT
</code></pre>
<h3 id="log-analysis"><a class="header" href="#log-analysis">Log Analysis</a></h3>
<pre><code class="language-bash"># View firewall logs (typical locations)
tail -f /var/log/syslog
tail -f /var/log/messages
tail -f /var/log/kern.log

# Search for dropped packets
grep "DROPPED" /var/log/syslog

# Count connections by source IP
grep "DROPPED" /var/log/syslog | awk '{print $NF}' | sort | uniq -c | sort -n
</code></pre>
<h2 id="firewall-best-practices"><a class="header" href="#firewall-best-practices">Firewall Best Practices</a></h2>
<h3 id="1-default-deny"><a class="header" href="#1-default-deny">1. Default Deny</a></h3>
<pre><code>Block everything by default
Explicitly allow only needed services
</code></pre>
<h3 id="2-principle-of-least-privilege"><a class="header" href="#2-principle-of-least-privilege">2. Principle of Least Privilege</a></h3>
<pre><code>Open only necessary ports
Restrict to specific sources when possible
Time-based rules when appropriate
</code></pre>
<h3 id="3-defense-in-depth"><a class="header" href="#3-defense-in-depth">3. Defense in Depth</a></h3>
<pre><code>Multiple layers:
  - Perimeter firewall
  - Host-based firewalls
  - Network segmentation
  - Application firewalls
</code></pre>
<h3 id="4-regular-updates"><a class="header" href="#4-regular-updates">4. Regular Updates</a></h3>
<pre><code>- Keep firewall software updated
- Review rules periodically
- Remove unused rules
- Update threat signatures (NGFW)
</code></pre>
<h3 id="5-monitoring-and-alerts"><a class="header" href="#5-monitoring-and-alerts">5. Monitoring and Alerts</a></h3>
<pre><code>- Enable logging
- Set up alerts for anomalies
- Regular log reviews
- Incident response plan
</code></pre>
<h3 id="6-testing"><a class="header" href="#6-testing">6. Testing</a></h3>
<pre><code>- Test rules before production
- Verify deny rules work
- Check for unintended access
- Regular security audits
</code></pre>
<h2 id="troubleshooting-firewall-issues"><a class="header" href="#troubleshooting-firewall-issues">Troubleshooting Firewall Issues</a></h2>
<h3 id="cant-connect-to-service"><a class="header" href="#cant-connect-to-service">Can't connect to service</a></h3>
<pre><code class="language-bash"># 1. Check if service is running
systemctl status nginx

# 2. Check if service is listening
netstat -tuln | grep :80
ss -tuln | grep :80

# 3. Check firewall rules
iptables -L -n -v
ufw status
firewall-cmd --list-all

# 4. Check logs
tail -f /var/log/syslog | grep UFW
journalctl -f -u firewalld

# 5. Test from different source
curl http://server-ip
telnet server-ip 80
</code></pre>
<h3 id="connection-works-locally-but-not-remotely"><a class="header" href="#connection-works-locally-but-not-remotely">Connection works locally but not remotely</a></h3>
<pre><code class="language-bash"># Likely firewall blocking external access

# Check INPUT chain
iptables -L INPUT -n -v

# Temporarily allow (testing only!)
iptables -I INPUT -p tcp --dport 80 -j ACCEPT

# If works, add permanent rule
</code></pre>
<h3 id="rule-not-working"><a class="header" href="#rule-not-working">Rule not working</a></h3>
<pre><code class="language-bash"># Check rule order
iptables -L -n -v --line-numbers

# Rules processed top-to-bottom
# Earlier DENY rule might catch traffic before ALLOW

# Reorder rules
iptables -I INPUT 1 -p tcp --dport 80 -j ACCEPT
</code></pre>
<h2 id="eli10-23"><a class="header" href="#eli10-23">ELI10</a></h2>
<p>A firewall is like a security guard at a building entrance:</p>
<p><strong>Security Guard (Firewall):</strong></p>
<ul>
<li>Checks everyone coming in and out</li>
<li>Has a list of rules (who's allowed, who's not)</li>
<li>Blocks suspicious people</li>
<li>Keeps a log of who enters</li>
</ul>
<p><strong>Types of Security:</strong></p>
<ol>
<li>
<p><strong>Basic Guard (Packet Filter):</strong></p>
<ul>
<li>Checks ID cards only</li>
<li>Fast but simple</li>
</ul>
</li>
<li>
<p><strong>Smart Guard (Stateful):</strong></p>
<ul>
<li>Remembers who entered</li>
<li>Allows them to leave</li>
<li>Tracks conversations</li>
</ul>
</li>
<li>
<p><strong>Super Guard (Application Layer):</strong></p>
<ul>
<li>Opens bags</li>
<li>Checks what you're carrying</li>
<li>Very thorough but slower</li>
</ul>
</li>
<li>
<p><strong>AI Guard (NGFW):</strong></p>
<ul>
<li>Facial recognition</li>
<li>Detects threats automatically</li>
<li>Learns from experience</li>
</ul>
</li>
</ol>
<p><strong>Rules Example:</strong></p>
<ul>
<li>"Allow employees" (like allowing HTTP port 80)</li>
<li>"Block suspicious visitors" (like blocking unknown IPs)</li>
<li>"Only executives can enter executive floor" (like restricting SSH to specific IPs)</li>
</ul>
<p><strong>DMZ is like a reception area:</strong></p>
<ul>
<li>Visitors wait here</li>
<li>Can't go into main office</li>
<li>Receptionists (DMZ servers) handle requests</li>
</ul>
<h2 id="further-resources-29"><a class="header" href="#further-resources-29">Further Resources</a></h2>
<ul>
<li><a href="https://www.frozentux.net/iptables-tutorial/iptables-tutorial.html">iptables Tutorial</a></li>
<li><a href="https://csrc.nist.gov/publications/detail/sp/800-41/rev-1/final">NIST Firewall Guide</a></li>
<li><a href="https://www.cisecurity.org/controls/">Firewall Best Practices</a></li>
<li><a href="https://www.openbsd.org/faq/pf/">pf (OpenBSD Firewall)</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stun-session-traversal-utilities-for-nat-1"><a class="header" href="#stun-session-traversal-utilities-for-nat-1">STUN (Session Traversal Utilities for NAT)</a></h1>
<h2 id="overview-50"><a class="header" href="#overview-50">Overview</a></h2>
<p>STUN is a standardized network protocol that allows clients behind NAT (Network Address Translation) to discover their public IP address and the type of NAT they are behind. This information is crucial for establishing peer-to-peer connections in applications like VoIP, video conferencing, and WebRTC.</p>
<h2 id="the-nat-problem"><a class="header" href="#the-nat-problem">The NAT Problem</a></h2>
<h3 id="why-stun-is-needed"><a class="header" href="#why-stun-is-needed">Why STUN is Needed</a></h3>
<pre><code>Private Network              NAT Router            Internet
                             (Public IP)
+------------------+         +---------+         +----------------+
| PC1: 192.168.1.10|  ---&gt;  | Router  |  ---&gt;  | Other peer     |
| PC2: 192.168.1.11|         | External IP:     | wants to       |
| PC3: 192.168.1.12|         | 203.0.113.5      | connect to you |
+------------------+         +---------+         +----------------+

Problem: How does external peer know your public IP and port?
Solution: STUN server tells you!
</code></pre>
<h3 id="without-stun"><a class="header" href="#without-stun">Without STUN</a></h3>
<pre><code>Peer A (behind NAT) wants to connect to Peer B

Peer A knows only: 192.168.1.10 (private IP)
Peer B needs: 203.0.113.5:54321 (public IP:port)

Peer A can't tell Peer B how to reach it L
</code></pre>
<h3 id="with-stun"><a class="header" href="#with-stun">With STUN</a></h3>
<pre><code>Peer A queries STUN server
STUN server responds: "I see you as 203.0.113.5:54321"
Peer A tells Peer B: "Connect to 203.0.113.5:54321"
Peer B connects successfully 
</code></pre>
<h2 id="stun-architecture"><a class="header" href="#stun-architecture">STUN Architecture</a></h2>
<pre><code>Client                    STUN Server               Peer
(Behind NAT)              (Public IP)
  |                            |                      |
  | STUN Binding Request       |                      |
  |---------------------------&gt;|                      |
  |                            |                      |
  | STUN Binding Response      |                      |
  |&lt;---------------------------|                      |
  | (Your public IP:Port)      |                      |
  |                            |                      |
  | Send public IP:Port        |                      |
  |--------------------------------------------------&gt;|
  |                            |                      |
  |        Direct connection established              |
  |&lt;-------------------------------------------------&gt;|
</code></pre>
<h2 id="stun-message-format"><a class="header" href="#stun-message-format">STUN Message Format</a></h2>
<h3 id="message-structure"><a class="header" href="#message-structure">Message Structure</a></h3>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0|     STUN Message Type     |         Message Length        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Magic Cookie                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
|                     Transaction ID (96 bits)                  |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Attributes                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="header-fields-1"><a class="header" href="#header-fields-1">Header Fields</a></h3>
<ol>
<li>
<p><strong>Message Type</strong> (16 bits):</p>
<ul>
<li>Class: Request (0x00), Success Response (0x01), Error Response (0x11)</li>
<li>Method: Binding (0x001)</li>
</ul>
</li>
<li>
<p><strong>Message Length</strong> (16 bits):</p>
<ul>
<li>Length of attributes (excluding 20-byte header)</li>
</ul>
</li>
<li>
<p><strong>Magic Cookie</strong> (32 bits):</p>
<ul>
<li>Fixed value: 0x2112A442</li>
<li>Helps distinguish STUN from other protocols</li>
</ul>
</li>
<li>
<p><strong>Transaction ID</strong> (96 bits):</p>
<ul>
<li>Unique identifier for matching requests/responses</li>
</ul>
</li>
</ol>
<h3 id="message-types"><a class="header" href="#message-types">Message Types</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Type</th><th>Value</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>Binding Request</strong></td><td>0x0001</td><td>Request public IP/port</td></tr>
<tr><td><strong>Binding Response</strong></td><td>0x0101</td><td>Success response with address</td></tr>
<tr><td><strong>Binding Error</strong></td><td>0x0111</td><td>Error response</td></tr>
</tbody></table>
</div>
<h2 id="stun-attributes"><a class="header" href="#stun-attributes">STUN Attributes</a></h2>
<h3 id="common-attributes"><a class="header" href="#common-attributes">Common Attributes</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>MAPPED-ADDRESS</strong></td><td>0x0001</td><td>Reflexive transport address (legacy)</td></tr>
<tr><td><strong>XOR-MAPPED-ADDRESS</strong></td><td>0x0020</td><td>XORed reflexive address (preferred)</td></tr>
<tr><td><strong>USERNAME</strong></td><td>0x0006</td><td>Username for authentication</td></tr>
<tr><td><strong>MESSAGE-INTEGRITY</strong></td><td>0x0008</td><td>HMAC-SHA1 hash</td></tr>
<tr><td><strong>ERROR-CODE</strong></td><td>0x0009</td><td>Error code and reason</td></tr>
<tr><td><strong>UNKNOWN-ATTRIBUTES</strong></td><td>0x000A</td><td>Unknown required attributes</td></tr>
<tr><td><strong>REALM</strong></td><td>0x0014</td><td>Realm for authentication</td></tr>
<tr><td><strong>NONCE</strong></td><td>0x0015</td><td>Nonce for digest authentication</td></tr>
<tr><td><strong>SOFTWARE</strong></td><td>0x8022</td><td>Software version</td></tr>
<tr><td><strong>FINGERPRINT</strong></td><td>0x8028</td><td>CRC-32 of message</td></tr>
</tbody></table>
</div>
<h3 id="xor-mapped-address-format"><a class="header" href="#xor-mapped-address-format">XOR-MAPPED-ADDRESS Format</a></h3>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 0|    Family     |         X-Port                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                X-Address (Variable)                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Family: 0x01 (IPv4), 0x02 (IPv6)
X-Port: Port XORed with most significant 16 bits of magic cookie
X-Address: IP address XORed with magic cookie (and transaction ID for IPv6)
</code></pre>
<p><strong>Why XOR?</strong></p>
<ul>
<li>Prevents middle boxes from modifying the address</li>
<li>Some NAT devices inspect and modify IP addresses in packets</li>
</ul>
<h2 id="stun-transaction-example"><a class="header" href="#stun-transaction-example">STUN Transaction Example</a></h2>
<h3 id="binding-request"><a class="header" href="#binding-request">Binding Request</a></h3>
<pre><code>Client → STUN Server (UDP port 3478)

Message Type: Binding Request (0x0001)
Message Length: 0
Magic Cookie: 0x2112A442
Transaction ID: 0xB7E7A701BC34D686FA87DFAE

No attributes in basic request
</code></pre>
<p><strong>Hexadecimal:</strong></p>
<pre><code>00 01 00 00 21 12 A4 42
B7 E7 A7 01 BC 34 D6 86
FA 87 DF AE
</code></pre>
<h3 id="binding-response"><a class="header" href="#binding-response">Binding Response</a></h3>
<pre><code>STUN Server → Client

Message Type: Binding Response (0x0101)
Message Length: 12 (length of attributes)
Magic Cookie: 0x2112A442
Transaction ID: 0xB7E7A701BC34D686FA87DFAE (same as request)

Attributes:
  XOR-MAPPED-ADDRESS:
    Family: IPv4 (0x01)
    Port: 54321 (XORed)
    IP: 203.0.113.5 (XORed)
</code></pre>
<p><strong>Information extracted:</strong></p>
<pre><code>Your public IP address: 203.0.113.5
Your public port: 54321
NAT binding created: 192.168.1.10:5000 ↔ 203.0.113.5:54321
</code></pre>
<h2 id="nat-types-discovered-by-stun"><a class="header" href="#nat-types-discovered-by-stun">NAT Types Discovered by STUN</a></h2>
<h3 id="1-full-cone-nat"><a class="header" href="#1-full-cone-nat">1. Full Cone NAT</a></h3>
<pre><code>Internal: 192.168.1.10:5000

NAT creates mapping:
  192.168.1.10:5000 ↔ 203.0.113.5:6000

Any external host can send to 203.0.113.5:6000
  → Forwarded to 192.168.1.10:5000

Best for P2P (easy to traverse)
</code></pre>
<h3 id="2-restricted-cone-nat"><a class="header" href="#2-restricted-cone-nat">2. Restricted Cone NAT</a></h3>
<pre><code>Internal: 192.168.1.10:5000

NAT creates mapping:
  192.168.1.10:5000 ↔ 203.0.113.5:6000

External host 1.2.3.4 can send to 203.0.113.5:6000
  ONLY IF 192.168.1.10:5000 previously sent to 1.2.3.4

Moderate difficulty to traverse
</code></pre>
<h3 id="3-port-restricted-cone-nat"><a class="header" href="#3-port-restricted-cone-nat">3. Port Restricted Cone NAT</a></h3>
<pre><code>Internal: 192.168.1.10:5000

NAT creates mapping:
  192.168.1.10:5000 ↔ 203.0.113.5:6000

External host 1.2.3.4:7000 can send to 203.0.113.5:6000
  ONLY IF 192.168.1.10:5000 previously sent to 1.2.3.4:7000

More difficult to traverse
</code></pre>
<h3 id="4-symmetric-nat"><a class="header" href="#4-symmetric-nat">4. Symmetric NAT</a></h3>
<pre><code>Internal: 192.168.1.10:5000

NAT creates different mappings per destination:
  To host A: 192.168.1.10:5000 ↔ 203.0.113.5:6000
  To host B: 192.168.1.10:5000 ↔ 203.0.113.5:6001
  To host C: 192.168.1.10:5000 ↔ 203.0.113.5:6002

Difficult to traverse (may need TURN relay)
</code></pre>
<h2 id="stun-usage-in-ice"><a class="header" href="#stun-usage-in-ice">STUN Usage in ICE</a></h2>
<p><strong>ICE (Interactive Connectivity Establishment)</strong> uses STUN:</p>
<h3 id="ice-candidate-gathering"><a class="header" href="#ice-candidate-gathering">ICE Candidate Gathering</a></h3>
<pre><code>1. Host Candidate:
   Local IP: 192.168.1.10:5000

2. Server Reflexive Candidate (from STUN):
   Public IP: 203.0.113.5:6000

3. Relayed Candidate (from TURN):
   Relay IP: 198.51.100.1:7000

Try connections in order:
  1. Direct (host to host)
  2. Through NAT (server reflexive)
  3. Through relay (last resort)
</code></pre>
<h3 id="webrtc-connection-flow"><a class="header" href="#webrtc-connection-flow">WebRTC Connection Flow</a></h3>
<pre><code>Peer A                    STUN Server              Peer B
  |                            |                      |
  | Get my public IP           |                      |
  |---------------------------&gt;|                      |
  |                            |                      |
  | 203.0.113.5:6000           |                      |
  |&lt;---------------------------|                      |
  |                            |                      |
  | Exchange candidates via signaling server          |
  |&lt;-------------------------------------------------&gt;|
  |                            |                      |
  | Try connection             |                      |
  |&lt;-------------------------------------------------&gt;|
  | Connectivity check (STUN)  |                      |
  |&lt;-------------------------------------------------&gt;|
  |                            |                      |
  | Connection established     |                      |
  |&lt;=================================================&gt;|
</code></pre>
<h2 id="stun-authentication"><a class="header" href="#stun-authentication">STUN Authentication</a></h2>
<h3 id="short-term-credentials"><a class="header" href="#short-term-credentials">Short-Term Credentials</a></h3>
<pre><code>Request:
  USERNAME: "alice:bob"
  MESSAGE-INTEGRITY: HMAC-SHA1(message, password)

Server validates:
  1. Check username exists
  2. Compute HMAC with stored password
  3. Compare with MESSAGE-INTEGRITY
  4. Accept or reject
</code></pre>
<h3 id="long-term-credentials"><a class="header" href="#long-term-credentials">Long-Term Credentials</a></h3>
<pre><code>Request 1 (no credentials):
  Binding Request

Response 1:
  Error 401 Unauthorized
  REALM: "example.com"
  NONCE: "random-nonce-12345"

Request 2 (with credentials):
  USERNAME: "alice"
  REALM: "example.com"
  NONCE: "random-nonce-12345"
  MESSAGE-INTEGRITY: HMAC-SHA1(message, MD5(username:realm:password))

Response 2:
  Binding Success Response
  XOR-MAPPED-ADDRESS: ...
</code></pre>
<h2 id="stun-client-implementation"><a class="header" href="#stun-client-implementation">STUN Client Implementation</a></h2>
<h3 id="python-example-5"><a class="header" href="#python-example-5">Python Example</a></h3>
<pre><code class="language-python">import socket
import struct
import hashlib
import hmac

STUN_SERVER = "stun.l.google.com"
STUN_PORT = 19302
MAGIC_COOKIE = 0x2112A442

def create_stun_binding_request():
    # Message type: Binding Request (0x0001)
    msg_type = 0x0001

    # Message length: 0 (no attributes)
    msg_length = 0

    # Transaction ID: 96 random bits
    transaction_id = os.urandom(12)

    # Pack header
    header = struct.pack(
        '!HHI',
        msg_type,
        msg_length,
        MAGIC_COOKIE
    ) + transaction_id

    return header, transaction_id

def parse_stun_response(data, transaction_id):
    # Parse header
    msg_type, msg_length, magic_cookie = struct.unpack('!HHI', data[:8])
    recv_transaction_id = data[8:20]

    # Verify transaction ID
    if recv_transaction_id != transaction_id:
        raise Exception("Transaction ID mismatch")

    # Parse attributes
    offset = 20
    while offset &lt; len(data):
        attr_type, attr_length = struct.unpack('!HH', data[offset:offset+4])
        offset += 4

        if attr_type == 0x0020:  # XOR-MAPPED-ADDRESS
            # Parse XOR-MAPPED-ADDRESS
            family = data[offset + 1]
            x_port = struct.unpack('!H', data[offset+2:offset+4])[0]
            x_ip = struct.unpack('!I', data[offset+4:offset+8])[0]

            # Un-XOR
            port = x_port ^ (MAGIC_COOKIE &gt;&gt; 16)
            ip = x_ip ^ MAGIC_COOKIE
            ip_addr = socket.inet_ntoa(struct.pack('!I', ip))

            return ip_addr, port

        offset += attr_length

    return None, None

def get_public_ip_port():
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.settimeout(3)

    try:
        # Create and send binding request
        request, transaction_id = create_stun_binding_request()
        sock.sendto(request, (STUN_SERVER, STUN_PORT))

        # Receive response
        data, addr = sock.recvfrom(1024)

        # Parse response
        public_ip, public_port = parse_stun_response(data, transaction_id)

        return public_ip, public_port
    finally:
        sock.close()

# Usage
public_ip, public_port = get_public_ip_port()
print(f"Public IP: {public_ip}:{public_port}")
</code></pre>
<h3 id="javascript-webrtc-example"><a class="header" href="#javascript-webrtc-example">JavaScript (WebRTC) Example</a></h3>
<pre><code class="language-javascript">// Create RTCPeerConnection with STUN server
const configuration = {
  iceServers: [
    { urls: 'stun:stun.l.google.com:19302' },
    { urls: 'stun:stun1.l.google.com:19302' }
  ]
};

const pc = new RTCPeerConnection(configuration);

// Listen for ICE candidates
pc.onicecandidate = (event) =&gt; {
  if (event.candidate) {
    console.log('ICE Candidate:', event.candidate);
    // Send candidate to remote peer via signaling
  }
};

// Create offer to trigger ICE gathering
pc.createOffer()
  .then(offer =&gt; pc.setLocalDescription(offer))
  .then(() =&gt; {
    // ICE candidates will be gathered
    // and onicecandidate will be called
  });
</code></pre>
<h2 id="public-stun-servers"><a class="header" href="#public-stun-servers">Public STUN Servers</a></h2>
<h3 id="free-stun-servers"><a class="header" href="#free-stun-servers">Free STUN Servers</a></h3>
<pre><code>Google:
  stun.l.google.com:19302
  stun1.l.google.com:19302
  stun2.l.google.com:19302
  stun3.l.google.com:19302
  stun4.l.google.com:19302

Twilio:
  global.stun.twilio.com:3478

OpenRelay:
  stun.relay.metered.ca:80
</code></pre>
<h3 id="testing-stun-server"><a class="header" href="#testing-stun-server">Testing STUN Server</a></h3>
<pre><code class="language-bash"># Using stunclient (stuntman tools)
stunclient stun.l.google.com

# Output example:
# Binding test: success
# Local address: 192.168.1.10:45678
# Mapped address: 203.0.113.5:45678
</code></pre>
<h2 id="stun-limitations"><a class="header" href="#stun-limitations">STUN Limitations</a></h2>
<h3 id="1-doesnt-work-with-symmetric-nat"><a class="header" href="#1-doesnt-work-with-symmetric-nat">1. Doesn't Work with Symmetric NAT</a></h3>
<pre><code>STUN tells you: 203.0.113.5:6000
But when connecting to peer, NAT assigns: 203.0.113.5:6001

Peer can't connect to you
→ Need TURN relay
</code></pre>
<h3 id="2-requires-udp"><a class="header" href="#2-requires-udp">2. Requires UDP</a></h3>
<pre><code>Some networks block UDP
STUN won't work
→ Need TCP fallback or TURN over TCP
</code></pre>
<h3 id="3-firewall-issues"><a class="header" href="#3-firewall-issues">3. Firewall Issues</a></h3>
<pre><code>Restrictive firewalls may block P2P connections
Even with correct IP:port from STUN
→ Need TURN relay
</code></pre>
<h3 id="4-no-data-relay"><a class="header" href="#4-no-data-relay">4. No Data Relay</a></h3>
<pre><code>STUN only discovers address
Doesn't relay data
If direct connection fails, need TURN
</code></pre>
<h2 id="stun-vs-turn-vs-ice"><a class="header" href="#stun-vs-turn-vs-ice">STUN vs TURN vs ICE</a></h2>
<pre><code>STUN:
  - Discovers public IP:port
  - Lightweight
  - No bandwidth cost
  - Doesn't always work

TURN:
  - Relays traffic
  - Always works
  - Bandwidth intensive
  - Costs money

ICE:
  - Uses both STUN and TURN
  - Tries STUN first
  - Falls back to TURN
  - Best of both worlds
</code></pre>
<h2 id="stun-server-setup"><a class="header" href="#stun-server-setup">STUN Server Setup</a></h2>
<h3 id="using-coturn"><a class="header" href="#using-coturn">Using coturn</a></h3>
<pre><code class="language-bash"># Install
sudo apt-get install coturn

# Configure /etc/turnserver.conf
listening-port=3478
fingerprint
lt-cred-mech
use-auth-secret
static-auth-secret=YOUR_SECRET
realm=example.com
total-quota=100
stale-nonce=600
</code></pre>
<h3 id="run-stun-server"><a class="header" href="#run-stun-server">Run STUN Server</a></h3>
<pre><code class="language-bash"># Start server
sudo turnserver -v

# Test locally
stunclient localhost
</code></pre>
<h2 id="eli10-24"><a class="header" href="#eli10-24">ELI10</a></h2>
<p>STUN is like asking a friend "What's my address?" when you can't see it yourself:</p>
<p><strong>The Problem:</strong>
You live in an apartment building (NAT)
Someone outside wants to send you mail
They need your full address, not just "Apartment 5"</p>
<p><strong>STUN Solution:</strong></p>
<ol>
<li>You call a friend outside (STUN server)</li>
<li>Friend says: "I see your address as 123 Main St, Apartment 5"</li>
<li>You tell pen pal: "Send letters to 123 Main St, Apt 5"</li>
<li>Pen pal can now reach you!</li>
</ol>
<p><strong>NAT Types:</strong></p>
<ul>
<li><strong>Full Cone:</strong> Anyone can mail you once you have the address</li>
<li><strong>Restricted:</strong> Only people you mailed first can mail back</li>
<li><strong>Symmetric:</strong> Building assigns different box for each sender (hard!)</li>
</ul>
<p><strong>When STUN Doesn't Work:</strong></p>
<ul>
<li>Symmetric NAT: Address changes for each recipient</li>
<li>Firewall: Building doesn't accept outside mail</li>
<li>→ Need TURN (a forwarding service)</li>
</ul>
<p><strong>WebRTC Uses STUN:</strong></p>
<ul>
<li>Video calls discover how to reach each other</li>
<li>Try direct connection first (with STUN)</li>
<li>Use relay (TURN) if direct doesn't work</li>
</ul>
<h2 id="further-resources-30"><a class="header" href="#further-resources-30">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc5389">RFC 5389 - STUN Specification</a></li>
<li><a href="https://tools.ietf.org/html/rfc8489">RFC 8489 - STUN Update</a></li>
<li><a href="https://webrtc.org/">WebRTC and STUN</a></li>
<li><a href="https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/">Interactive STUN Test</a></li>
<li><a href="https://github.com/coturn/coturn">coturn Server</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="turn-traversal-using-relays-around-nat-1"><a class="header" href="#turn-traversal-using-relays-around-nat-1">TURN (Traversal Using Relays around NAT)</a></h1>
<h2 id="overview-51"><a class="header" href="#overview-51">Overview</a></h2>
<p>TURN is a protocol that helps establish connections between peers when direct peer-to-peer communication fails. Unlike STUN which only discovers addresses, TURN acts as a relay server that forwards traffic between peers when NAT or firewall restrictions prevent direct connections.</p>
<h2 id="why-turn-is-needed"><a class="header" href="#why-turn-is-needed">Why TURN is Needed</a></h2>
<h3 id="when-stun-fails"><a class="header" href="#when-stun-fails">When STUN Fails</a></h3>
<pre><code>Scenario 1: Symmetric NAT
  Peer A behind Symmetric NAT
  Different public port for each destination
  STUN can't provide usable address
  → Need TURN relay

Scenario 2: Restrictive Firewall
  Corporate firewall blocks incoming P2P
  Even with correct address from STUN
  → Need TURN relay

Scenario 3: UDP Blocked
  Network blocks UDP traffic
  Can't use STUN or direct P2P
  → Need TURN over TCP
</code></pre>
<h2 id="turn-vs-stun"><a class="header" href="#turn-vs-stun">TURN vs STUN</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Feature</th><th>STUN</th><th>TURN</th></tr></thead><tbody>
<tr><td><strong>Purpose</strong></td><td>Discover public address</td><td>Relay traffic</td></tr>
<tr><td><strong>Bandwidth</strong></td><td>Minimal (discovery only)</td><td>High (relays all data)</td></tr>
<tr><td><strong>Success Rate</strong></td><td>~80%</td><td>~100%</td></tr>
<tr><td><strong>Cost</strong></td><td>Free (public servers)</td><td>Expensive (bandwidth)</td></tr>
<tr><td><strong>Latency</strong></td><td>Low (direct connection)</td><td>Higher (via relay)</td></tr>
<tr><td><strong>When to Use</strong></td><td>First attempt</td><td>Fallback</td></tr>
</tbody></table>
</div>
<h2 id="turn-architecture"><a class="header" href="#turn-architecture">TURN Architecture</a></h2>
<h3 id="basic-relay"><a class="header" href="#basic-relay">Basic Relay</a></h3>
<pre><code>Peer A                    TURN Server                Peer B
(Behind NAT)              (Public IP)                (Behind NAT)
192.168.1.10              198.51.100.1               10.0.0.5
  |                            |                         |
  | Allocate Request           |                         |
  |---------------------------&gt;|                         |
  | Allocate Success           |                         |
  |&lt;---------------------------|                         |
  | (Relayed address assigned) |                         |
  |                            |                         |
  | Send relayed address       |                         |
  | to Peer B via signaling    |                         |
  |                            |                         |
  |         Data               |          Data           |
  |---------------------------&gt;|------------------------&gt;|
  |                            | (TURN relays)           |
  |         Data               |          Data           |
  |&lt;---------------------------|&lt;------------------------|
</code></pre>
<h3 id="allocation"><a class="header" href="#allocation">Allocation</a></h3>
<pre><code>Client requests allocation from TURN server:

1. Client: "I need a relay address"
2. TURN: "Here's 198.51.100.1:50000 for you"
3. Client: "Route traffic between me and Peer X"
4. TURN: "OK, I'll relay your traffic"

Allocation lifetime: 10 minutes (default, can be refreshed)
</code></pre>
<h2 id="turn-message-types"><a class="header" href="#turn-message-types">TURN Message Types</a></h2>
<h3 id="key-operations-1"><a class="header" href="#key-operations-1">Key Operations</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Operation</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>Allocate</strong></td><td>Request relay address</td></tr>
<tr><td><strong>Refresh</strong></td><td>Extend allocation lifetime</td></tr>
<tr><td><strong>Send</strong></td><td>Send data through relay</td></tr>
<tr><td><strong>Data</strong></td><td>Receive data from relay</td></tr>
<tr><td><strong>CreatePermission</strong></td><td>Allow peer to send data</td></tr>
<tr><td><strong>ChannelBind</strong></td><td>Optimize data transfer</td></tr>
</tbody></table>
</div>
<h3 id="allocate-requestresponse"><a class="header" href="#allocate-requestresponse">Allocate Request/Response</a></h3>
<p><strong>Request:</strong></p>
<pre><code>Client → TURN Server

Method: Allocate
Attributes:
  REQUESTED-TRANSPORT: UDP (17)
  LIFETIME: 600 seconds
  USERNAME: "alice"
  MESSAGE-INTEGRITY: HMAC
</code></pre>
<p><strong>Response:</strong></p>
<pre><code>TURN Server → Client

Method: Allocate Success
Attributes:
  XOR-RELAYED-ADDRESS: 198.51.100.1:50000
  LIFETIME: 600 seconds
  XOR-MAPPED-ADDRESS: 203.0.113.5:54321 (client's public IP)
  MESSAGE-INTEGRITY: HMAC
</code></pre>
<h2 id="turn-workflow"><a class="header" href="#turn-workflow">TURN Workflow</a></h2>
<h3 id="1-allocation"><a class="header" href="#1-allocation">1. Allocation</a></h3>
<pre><code>Client                          TURN Server
  |                                |
  | Allocate Request               |
  | (credentials, transport)       |
  |-------------------------------&gt;|
  |                                |
  | Allocate Success               |
  | (relayed address)              |
  |&lt;-------------------------------|
  |                                |

Allocation created:
  Client: 203.0.113.5:54321
  Relay: 198.51.100.1:50000
  Lifetime: 600 seconds
</code></pre>
<h3 id="2-permission"><a class="header" href="#2-permission">2. Permission</a></h3>
<pre><code>Client                          TURN Server
  |                                |
  | CreatePermission Request       |
  | (peer IP: 10.0.0.5)            |
  |-------------------------------&gt;|
  |                                |
  | CreatePermission Success       |
  |&lt;-------------------------------|
  |                                |

TURN server now accepts traffic from 10.0.0.5
Permission lifetime: 300 seconds
</code></pre>
<h3 id="3-sending-data"><a class="header" href="#3-sending-data">3. Sending Data</a></h3>
<h4 id="method-a-send-indication"><a class="header" href="#method-a-send-indication">Method A: Send Indication</a></h4>
<pre><code>Client                    TURN Server               Peer
  |                            |                      |
  | Send Indication            |                      |
  | To: 10.0.0.5:6000          |                      |
  | Data: "Hello"              |                      |
  |---------------------------&gt;|                      |
  |                            | UDP: "Hello"         |
  |                            |---------------------&gt;|
  |                            |                      |
</code></pre>
<h4 id="method-b-channel-binding-optimized"><a class="header" href="#method-b-channel-binding-optimized">Method B: Channel Binding (Optimized)</a></h4>
<pre><code>Client                    TURN Server               Peer
  |                            |                      |
  | ChannelBind Request        |                      |
  | Channel: 0x4000            |                      |
  | Peer: 10.0.0.5:6000        |                      |
  |---------------------------&gt;|                      |
  |                            |                      |
  | ChannelBind Success        |                      |
  |&lt;---------------------------|                      |
  |                            |                      |
  | ChannelData (0x4000)       |                      |
  | Data: "Hello"              |                      |
  |---------------------------&gt;|                      |
  |                            | UDP: "Hello"         |
  |                            |---------------------&gt;|

ChannelData has only 4-byte overhead (vs 36 bytes for Send)
More efficient for continuous data flow
</code></pre>
<h3 id="4-receiving-data"><a class="header" href="#4-receiving-data">4. Receiving Data</a></h3>
<pre><code>Peer                      TURN Server              Client
  |                            |                      |
  | UDP: "Reply"               |                      |
  |---------------------------&gt;|                      |
  |                            | Data Indication      |
  |                            | From: 10.0.0.5:6000  |
  |                            | Data: "Reply"        |
  |                            |---------------------&gt;|
  |                            |                      |
</code></pre>
<h2 id="turn-message-format"><a class="header" href="#turn-message-format">TURN Message Format</a></h2>
<h3 id="send-indication"><a class="header" href="#send-indication">Send Indication</a></h3>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0|     STUN Message Type     |         Message Length        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Magic Cookie                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                     Transaction ID (96 bits)                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                   XOR-PEER-ADDRESS                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        DATA                                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</code></pre>
<h3 id="channeldata-message"><a class="header" href="#channeldata-message">ChannelData Message</a></h3>
<pre><code> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         Channel Number        |            Length             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
|                       Application Data                        |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Channel Number: 0x4000 - 0x7FFF
Length: Length of application data
</code></pre>
<h2 id="turn-attributes"><a class="header" href="#turn-attributes">TURN Attributes</a></h2>
<h3 id="common-attributes-1"><a class="header" href="#common-attributes-1">Common Attributes</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Attribute</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><strong>XOR-RELAYED-ADDRESS</strong></td><td>0x0016</td><td>Relay transport address</td></tr>
<tr><td><strong>XOR-PEER-ADDRESS</strong></td><td>0x0012</td><td>Peer transport address</td></tr>
<tr><td><strong>DATA</strong></td><td>0x0013</td><td>Data to relay</td></tr>
<tr><td><strong>LIFETIME</strong></td><td>0x000D</td><td>Allocation lifetime (seconds)</td></tr>
<tr><td><strong>REQUESTED-TRANSPORT</strong></td><td>0x0019</td><td>Desired transport (UDP=17)</td></tr>
<tr><td><strong>CHANNEL-NUMBER</strong></td><td>0x000C</td><td>Channel number (0x4000-0x7FFF)</td></tr>
<tr><td><strong>EVEN-PORT</strong></td><td>0x0018</td><td>Request even port (RTP/RTCP)</td></tr>
<tr><td><strong>DONT-FRAGMENT</strong></td><td>0x001A</td><td>Don't fragment</td></tr>
<tr><td><strong>RESERVATION-TOKEN</strong></td><td>0x0022</td><td>Token for port reservation</td></tr>
</tbody></table>
</div>
<h2 id="turn-authentication"><a class="header" href="#turn-authentication">TURN Authentication</a></h2>
<h3 id="long-term-credentials-1"><a class="header" href="#long-term-credentials-1">Long-Term Credentials</a></h3>
<pre><code>Request 1 (no credentials):
  Allocate Request

Response 1:
  Error 401 Unauthorized
  REALM: "example.com"
  NONCE: "abcd1234"

Request 2 (with credentials):
  USERNAME: "alice"
  REALM: "example.com"
  NONCE: "abcd1234"
  MESSAGE-INTEGRITY: HMAC-SHA1(message, key)

Key = MD5(username:realm:password)

Response 2:
  Allocate Success Response
  XOR-RELAYED-ADDRESS: ...
  LIFETIME: 600
</code></pre>
<h3 id="short-term-credentials-1"><a class="header" href="#short-term-credentials-1">Short-Term Credentials</a></h3>
<pre><code>Used within ICE (WebRTC):
  USERNAME: &lt;random&gt;:&lt;random&gt;
  PASSWORD: &lt;shared secret&gt;

Simpler, time-limited authentication
</code></pre>
<h2 id="turn-allocation-lifecycle"><a class="header" href="#turn-allocation-lifecycle">TURN Allocation Lifecycle</a></h2>
<pre><code>1. Allocate (request relay)
   ↓
2. Success (relay assigned)
   ↓
3. CreatePermission (allow peers)
   ↓
4. ChannelBind (optimize transfer)
   ↓
5. Send/Receive Data
   ↓
6. Refresh (extend lifetime)
   ↓
7. Delete or Expire

Timeline:
  0s: Allocate
  300s: Refresh (extend to 900s)
  600s: Refresh (extend to 1200s)
  900s: Refresh (extend to 1500s)
  ...
  Stop refreshing: Allocation expires
</code></pre>
<h2 id="turn-over-different-transports"><a class="header" href="#turn-over-different-transports">TURN Over Different Transports</a></h2>
<h3 id="turn-over-udp"><a class="header" href="#turn-over-udp">TURN over UDP</a></h3>
<pre><code>Default mode
Client → TURN Server: UDP
TURN Server → Peer: UDP

Fast, but UDP might be blocked
</code></pre>
<h3 id="turn-over-tcp"><a class="header" href="#turn-over-tcp">TURN over TCP</a></h3>
<pre><code>Client → TURN Server: TCP
TURN Server → Peer: UDP

Works when UDP blocked
More overhead (TCP vs UDP)
</code></pre>
<h3 id="turn-over-tls"><a class="header" href="#turn-over-tls">TURN over TLS</a></h3>
<pre><code>Client → TURN Server: TLS over TCP
TURN Server → Peer: UDP

Encrypted control channel
Works in restrictive environments
Port 443 (looks like HTTPS)
</code></pre>
<h2 id="ice-with-turn"><a class="header" href="#ice-with-turn">ICE with TURN</a></h2>
<h3 id="candidate-priority"><a class="header" href="#candidate-priority">Candidate Priority</a></h3>
<pre><code>ICE tries candidates in order:

1. Host Candidate (local IP)
   Type: host
   Priority: Highest
   Example: 192.168.1.10:5000

2. Server Reflexive (STUN)
   Type: srflx
   Priority: High
   Example: 203.0.113.5:6000

3. Relayed (TURN)
   Type: relay
   Priority: Lowest (fallback)
   Example: 198.51.100.1:50000

Connection attempt:
  Try host → Try srflx → Try relay
  Use first successful connection
</code></pre>
<h3 id="webrtc-with-turn"><a class="header" href="#webrtc-with-turn">WebRTC with TURN</a></h3>
<pre><code class="language-javascript">const configuration = {
  iceServers: [
    // STUN server (free)
    { urls: 'stun:stun.l.google.com:19302' },

    // TURN server (requires auth)
    {
      urls: 'turn:turn.example.com:3478',
      username: 'alice',
      credential: 'password123'
    },

    // TURN over TLS
    {
      urls: 'turns:turn.example.com:5349',
      username: 'alice',
      credential: 'password123'
    }
  ]
};

const pc = new RTCPeerConnection(configuration);
</code></pre>
<h2 id="turn-server-setup"><a class="header" href="#turn-server-setup">TURN Server Setup</a></h2>
<h3 id="using-coturn-1"><a class="header" href="#using-coturn-1">Using coturn</a></h3>
<p><strong>Install:</strong></p>
<pre><code class="language-bash">sudo apt-get install coturn
</code></pre>
<p><strong>Configure <code>/etc/turnserver.conf</code>:</strong></p>
<pre><code class="language-bash"># Listening ports
listening-port=3478
tls-listening-port=5349

# Relay ports
min-port=49152
max-port=65535

# Authentication
lt-cred-mech
user=alice:password123
realm=example.com

# Or use shared secret
use-auth-secret
static-auth-secret=my-secret-key

# Certificates (for TLS)
cert=/etc/ssl/turn.crt
pkey=/etc/ssl/turn.key

# Logging
log-file=/var/log/turnserver.log
verbose

# External IP (if behind NAT)
external-ip=203.0.113.5/192.168.1.10

# Limit resources
max-bps=1000000
total-quota=100
</code></pre>
<p><strong>Run:</strong></p>
<pre><code class="language-bash">sudo turnserver -v
</code></pre>
<p><strong>Test:</strong></p>
<pre><code class="language-bash"># Using turnutils
turnutils_uclient -v -u alice -w password123 turn.example.com
</code></pre>
<h2 id="turn-bandwidth-considerations"><a class="header" href="#turn-bandwidth-considerations">TURN Bandwidth Considerations</a></h2>
<h3 id="bandwidth-usage-1"><a class="header" href="#bandwidth-usage-1">Bandwidth Usage</a></h3>
<pre><code>Video call: 2 Mbps per direction

Direct P2P (no TURN):
  Client A →→ Client B
  Total bandwidth: 4 Mbps (2 up + 2 down each)

Through TURN relay:
  Client A → TURN → Client B
  TURN bandwidth: 4 Mbps (2 in + 2 out)
  Each client: 4 Mbps (2 up + 2 down)

TURN server needs 2x the bandwidth!
</code></pre>
<h3 id="cost-implications"><a class="header" href="#cost-implications">Cost Implications</a></h3>
<pre><code>Example: 1000 concurrent video calls through TURN
  Each call: 2 Mbps × 2 directions = 4 Mbps
  Total: 1000 × 4 Mbps = 4 Gbps

At $0.10/GB:
  4 Gbps = 0.5 GB/second
  Per hour: 1,800 GB = $180/hour
  Per day: 43,200 GB = $4,320/day

Why ICE tries direct connection first!
</code></pre>
<h3 id="optimization-strategies"><a class="header" href="#optimization-strategies">Optimization Strategies</a></h3>
<pre><code>1. Prefer direct connections (STUN)
   - ~80% of connections succeed
   - Zero relay bandwidth

2. Short allocation lifetimes
   - Free up resources quickly
   - Prevent unused allocations

3. Connection quality monitoring
   - Switch from relay to direct if possible
   - ICE restart

4. Rate limiting
   - Prevent abuse
   - Fair resource sharing

5. Geographic distribution
   - Regional TURN servers
   - Reduce latency
</code></pre>
<h2 id="turn-security"><a class="header" href="#turn-security">TURN Security</a></h2>
<h3 id="authentication-required"><a class="header" href="#authentication-required">Authentication Required</a></h3>
<pre><code>Public TURN servers = expensive bandwidth
Must authenticate:
  - Username/password
  - Time-limited credentials
  - Shared secrets
</code></pre>
<h3 id="quota-management"><a class="header" href="#quota-management">Quota Management</a></h3>
<pre><code>Limit per user:
  - Bandwidth (bytes/sec)
  - Total data (GB)
  - Concurrent allocations
  - Allocation lifetime
</code></pre>
<h3 id="access-control-1"><a class="header" href="#access-control-1">Access Control</a></h3>
<pre><code>Restrict by:
  - IP ranges (corporate network)
  - Time windows
  - User groups
</code></pre>
<h2 id="monitoring-turn-server"><a class="header" href="#monitoring-turn-server">Monitoring TURN Server</a></h2>
<h3 id="key-metrics"><a class="header" href="#key-metrics">Key Metrics</a></h3>
<pre><code>1. Active allocations
   - Current number
   - Peak usage

2. Bandwidth
   - Total throughput
   - Per-client usage
   - Inbound/outbound ratio

3. Connections
   - Success rate
   - Allocation duration
   - Peak concurrent

4. Authentication
   - Failed attempts
   - Expired credentials

5. Resources
   - CPU usage
   - Memory
   - Network interfaces
   - Port exhaustion
</code></pre>
<h3 id="coturn-statistics"><a class="header" href="#coturn-statistics">coturn Statistics</a></h3>
<pre><code class="language-bash"># Real-time stats
telnet localhost 5766

# Commands:
ps    # Print sessions
pid   # Show process info
pc    # Print configuration
</code></pre>
<h2 id="turn-alternatives"><a class="header" href="#turn-alternatives">TURN Alternatives</a></h2>
<h3 id="1-direct-p2p-preferred"><a class="header" href="#1-direct-p2p-preferred">1. Direct P2P (preferred)</a></h3>
<pre><code>Pros: Free, low latency
Cons: Doesn't always work
Success rate: ~80%
</code></pre>
<h3 id="2-sipvoip-gateways"><a class="header" href="#2-sipvoip-gateways">2. SIP/VoIP Gateways</a></h3>
<pre><code>Traditional VoIP infrastructure
Built-in media relays
More expensive
</code></pre>
<h3 id="3-media-servers"><a class="header" href="#3-media-servers">3. Media Servers</a></h3>
<pre><code>Janus, Jitsi, Kurento
Selective Forwarding Unit (SFU)
Different model than TURN
</code></pre>
<h2 id="troubleshooting-turn"><a class="header" href="#troubleshooting-turn">Troubleshooting TURN</a></h2>
<h3 id="cant-allocate"><a class="header" href="#cant-allocate">Can't allocate</a></h3>
<pre><code class="language-bash"># Check TURN server is running
sudo systemctl status coturn

# Check listening ports
netstat -tuln | grep 3478

# Test with turnutils
turnutils_uclient -v turn.example.com
</code></pre>
<h3 id="authentication-fails"><a class="header" href="#authentication-fails">Authentication fails</a></h3>
<pre><code class="language-bash"># Verify credentials
turnutils_uclient -u alice -w password123 turn.example.com

# Check realm configuration
grep realm /etc/turnserver.conf

# Check logs
tail -f /var/log/turnserver.log
</code></pre>
<h3 id="high-latency"><a class="header" href="#high-latency">High latency</a></h3>
<pre><code>- Use geographically closer TURN server
- Check server load (CPU, bandwidth)
- Try TURN over TCP (sometimes faster)
- Monitor network path (traceroute)
</code></pre>
<h2 id="eli10-25"><a class="header" href="#eli10-25">ELI10</a></h2>
<p>TURN is like using a friend to pass notes in class:</p>
<p><strong>Without TURN (Direct):</strong></p>
<ul>
<li>You throw note directly to friend</li>
<li>Fast and easy</li>
<li>But teacher might catch it!</li>
</ul>
<p><strong>With TURN (Through Relay):</strong></p>
<ul>
<li>You give note to trusted student</li>
<li>They walk it over to your friend</li>
<li>Slower, but always works</li>
<li>Even if teacher is watching</li>
</ul>
<p><strong>Why TURN?</strong></p>
<p>Imagine you're in Building A, friend in Building B:</p>
<ul>
<li>Can't throw note that far (NAT/firewall blocking)</li>
<li>Need someone in the middle to help</li>
<li>TURN server is that helpful person</li>
</ul>
<p><strong>Costs:</strong></p>
<ul>
<li>Direct (free): Just toss the note</li>
<li>TURN (expensive): Someone must carry every note back and forth
<ul>
<li>Video call = thousands of notes per second!</li>
<li>TURN server gets tired (bandwidth costs)</li>
</ul>
</li>
</ul>
<p><strong>Smart Strategy (ICE):</strong></p>
<ol>
<li>Try throwing directly (host candidate)</li>
<li>Try from outside (STUN)</li>
<li>Last resort: Use TURN relay</li>
</ol>
<p>Use TURN only when absolutely needed!</p>
<h2 id="further-resources-31"><a class="header" href="#further-resources-31">Further Resources</a></h2>
<ul>
<li><a href="https://tools.ietf.org/html/rfc5766">RFC 5766 - TURN Specification</a></li>
<li><a href="https://tools.ietf.org/html/rfc8656">RFC 8656 - TURN Update</a></li>
<li><a href="https://github.com/coturn/coturn">coturn Server</a></li>
<li><a href="https://webrtc.org/">WebRTC ICE</a></li>
<li><a href="https://www.twilio.com/stun-turn">TURN Server Providers</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="upnp-universal-plug-and-play-1"><a class="header" href="#upnp-universal-plug-and-play-1">UPnP (Universal Plug and Play)</a></h1>
<h2 id="overview-52"><a class="header" href="#overview-52">Overview</a></h2>
<p>UPnP is a set of networking protocols that enables devices on a network to seamlessly discover each other and establish functional network services for data sharing, communications, and entertainment. It allows devices to automatically configure themselves and announce their presence to other devices.</p>
<h2 id="upnp-components"><a class="header" href="#upnp-components">UPnP Components</a></h2>
<pre><code>1. Discovery (SSDP)
   - Find devices on network
   - Announce presence

2. Description
   - Device capabilities
   - Services offered

3. Control
   - Invoke actions
   - Query state

4. Eventing
   - Subscribe to state changes
   - Receive notifications

5. Presentation
   - Web-based UI
   - Human interaction
</code></pre>
<h2 id="upnp-architecture"><a class="header" href="#upnp-architecture">UPnP Architecture</a></h2>
<pre><code>Control Point (Client)         Device (Server)
       |                            |
       | 1. Discovery (SSDP)        |
       |&lt;--------------------------&gt;|
       |                            |
       | 2. Description (XML)       |
       |---------------------------&gt;|
       |&lt;---------------------------|
       |                            |
       | 3. Control (SOAP)          |
       |---------------------------&gt;|
       |&lt;---------------------------|
       |                            |
       | 4. Eventing (GENA)         |
       |---------------------------&gt;|
       | (Subscribe)                |
       |&lt;---------------------------|
       | (Events)                   |
</code></pre>
<h2 id="ssdp-simple-service-discovery-protocol"><a class="header" href="#ssdp-simple-service-discovery-protocol">SSDP (Simple Service Discovery Protocol)</a></h2>
<h3 id="discovery-process"><a class="header" href="#discovery-process">Discovery Process</a></h3>
<p><strong>Device Announcement:</strong></p>
<pre><code>Device joins network:

NOTIFY * HTTP/1.1
Host: 239.255.255.250:1900
Cache-Control: max-age=1800
Location: http://192.168.1.100:8080/description.xml
NT: upnp:rootdevice
NTS: ssdp:alive
Server: Linux/5.4 UPnP/1.0 MyDevice/1.0
USN: uuid:12345678-1234-1234-1234-123456789abc::upnp:rootdevice

Sent to multicast address 239.255.255.250:1900
Announces device presence
</code></pre>
<p><strong>Device Search (M-SEARCH):</strong></p>
<pre><code>Control point searches for devices:

M-SEARCH * HTTP/1.1
Host: 239.255.255.250:1900
Man: "ssdp:discover"
ST: ssdp:all
MX: 3
(Search for all devices, wait up to 3 seconds)

Multicast to 239.255.255.250:1900
</code></pre>
<p><strong>Device Response:</strong></p>
<pre><code>HTTP/1.1 200 OK
Cache-Control: max-age=1800
Location: http://192.168.1.100:8080/description.xml
Server: Linux/5.4 UPnP/1.0 MyDevice/1.0
ST: upnp:rootdevice
USN: uuid:12345678-1234-1234-1234-123456789abc::upnp:rootdevice

Unicast response back to control point
</code></pre>
<h3 id="ssdp-multicast"><a class="header" href="#ssdp-multicast">SSDP Multicast</a></h3>
<pre><code>IPv4 Address: 239.255.255.250
Port: 1900 (UDP)

All UPnP devices listen on this address
Used for discovery announcements
</code></pre>
<h3 id="search-targets-st"><a class="header" href="#search-targets-st">Search Targets (ST)</a></h3>
<pre><code>ssdp:all                    - All devices and services
upnp:rootdevice             - Root devices only
uuid:&lt;device-uuid&gt;          - Specific device
urn:schemas-upnp-org:device:&lt;deviceType&gt;:&lt;version&gt;
urn:schemas-upnp-org:service:&lt;serviceType&gt;:&lt;version&gt;

Examples:
  ST: urn:schemas-upnp-org:device:MediaRenderer:1
  ST: urn:schemas-upnp-org:service:ContentDirectory:1
</code></pre>
<h2 id="device-description"><a class="header" href="#device-description">Device Description</a></h2>
<h3 id="description-xml"><a class="header" href="#description-xml">Description XML</a></h3>
<pre><code class="language-xml">&lt;?xml version="1.0"?&gt;
&lt;root xmlns="urn:schemas-upnp-org:device-1-0"&gt;
  &lt;specVersion&gt;
    &lt;major&gt;1&lt;/major&gt;
    &lt;minor&gt;0&lt;/minor&gt;
  &lt;/specVersion&gt;
  &lt;device&gt;
    &lt;deviceType&gt;urn:schemas-upnp-org:device:MediaRenderer:1&lt;/deviceType&gt;
    &lt;friendlyName&gt;Living Room TV&lt;/friendlyName&gt;
    &lt;manufacturer&gt;Samsung&lt;/manufacturer&gt;
    &lt;manufacturerURL&gt;http://www.samsung.com&lt;/manufacturerURL&gt;
    &lt;modelDescription&gt;Smart TV&lt;/modelDescription&gt;
    &lt;modelName&gt;UN55TU8000&lt;/modelName&gt;
    &lt;modelNumber&gt;8000&lt;/modelNumber&gt;
    &lt;serialNumber&gt;123456789&lt;/serialNumber&gt;
    &lt;UDN&gt;uuid:12345678-1234-1234-1234-123456789abc&lt;/UDN&gt;
    &lt;presentationURL&gt;http://192.168.1.100:8080/&lt;/presentationURL&gt;

    &lt;serviceList&gt;
      &lt;service&gt;
        &lt;serviceType&gt;urn:schemas-upnp-org:service:AVTransport:1&lt;/serviceType&gt;
        &lt;serviceId&gt;urn:upnp-org:serviceId:AVTransport&lt;/serviceId&gt;
        &lt;SCPDURL&gt;/service/AVTransport/scpd.xml&lt;/SCPDURL&gt;
        &lt;controlURL&gt;/service/AVTransport/control&lt;/controlURL&gt;
        &lt;eventSubURL&gt;/service/AVTransport/event&lt;/eventSubURL&gt;
      &lt;/service&gt;
    &lt;/serviceList&gt;
  &lt;/device&gt;
&lt;/root&gt;
</code></pre>
<h3 id="service-description-scpd"><a class="header" href="#service-description-scpd">Service Description (SCPD)</a></h3>
<pre><code class="language-xml">&lt;?xml version="1.0"?&gt;
&lt;scpd xmlns="urn:schemas-upnp-org:service-1-0"&gt;
  &lt;specVersion&gt;
    &lt;major&gt;1&lt;/major&gt;
    &lt;minor&gt;0&lt;/minor&gt;
  &lt;/specVersion&gt;

  &lt;actionList&gt;
    &lt;action&gt;
      &lt;name&gt;Play&lt;/name&gt;
      &lt;argumentList&gt;
        &lt;argument&gt;
          &lt;name&gt;Speed&lt;/name&gt;
          &lt;direction&gt;in&lt;/direction&gt;
          &lt;relatedStateVariable&gt;TransportPlaySpeed&lt;/relatedStateVariable&gt;
        &lt;/argument&gt;
      &lt;/argumentList&gt;
    &lt;/action&gt;

    &lt;action&gt;
      &lt;name&gt;Stop&lt;/name&gt;
    &lt;/action&gt;
  &lt;/actionList&gt;

  &lt;serviceStateTable&gt;
    &lt;stateVariable sendEvents="yes"&gt;
      &lt;name&gt;TransportState&lt;/name&gt;
      &lt;dataType&gt;string&lt;/dataType&gt;
      &lt;allowedValueList&gt;
        &lt;allowedValue&gt;PLAYING&lt;/allowedValue&gt;
        &lt;allowedValue&gt;STOPPED&lt;/allowedValue&gt;
        &lt;allowedValue&gt;PAUSED_PLAYBACK&lt;/allowedValue&gt;
      &lt;/allowedValueList&gt;
    &lt;/stateVariable&gt;

    &lt;stateVariable sendEvents="no"&gt;
      &lt;name&gt;TransportPlaySpeed&lt;/name&gt;
      &lt;dataType&gt;string&lt;/dataType&gt;
      &lt;defaultValue&gt;1&lt;/defaultValue&gt;
    &lt;/stateVariable&gt;
  &lt;/serviceStateTable&gt;
&lt;/scpd&gt;
</code></pre>
<h2 id="upnp-control-soap"><a class="header" href="#upnp-control-soap">UPnP Control (SOAP)</a></h2>
<h3 id="action-invocation"><a class="header" href="#action-invocation">Action Invocation</a></h3>
<p><strong>Request:</strong></p>
<pre><code class="language-xml">POST /service/AVTransport/control HTTP/1.1
Host: 192.168.1.100:8080
Content-Type: text/xml; charset="utf-8"
SOAPAction: "urn:schemas-upnp-org:service:AVTransport:1#Play"
Content-Length: 299

&lt;?xml version="1.0"?&gt;
&lt;s:Envelope
  xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
  s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"&gt;
  &lt;s:Body&gt;
    &lt;u:Play xmlns:u="urn:schemas-upnp-org:service:AVTransport:1"&gt;
      &lt;InstanceID&gt;0&lt;/InstanceID&gt;
      &lt;Speed&gt;1&lt;/Speed&gt;
    &lt;/u:Play&gt;
  &lt;/s:Body&gt;
&lt;/s:Envelope&gt;
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-xml">HTTP/1.1 200 OK
Content-Type: text/xml; charset="utf-8"
Content-Length: 250

&lt;?xml version="1.0"?&gt;
&lt;s:Envelope
  xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
  s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"&gt;
  &lt;s:Body&gt;
    &lt;u:PlayResponse xmlns:u="urn:schemas-upnp-org:service:AVTransport:1"&gt;
    &lt;/u:PlayResponse&gt;
  &lt;/s:Body&gt;
&lt;/s:Envelope&gt;
</code></pre>
<h3 id="error-response"><a class="header" href="#error-response">Error Response</a></h3>
<pre><code class="language-xml">HTTP/1.1 500 Internal Server Error
Content-Type: text/xml; charset="utf-8"

&lt;?xml version="1.0"?&gt;
&lt;s:Envelope
  xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
  s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"&gt;
  &lt;s:Body&gt;
    &lt;s:Fault&gt;
      &lt;faultcode&gt;s:Client&lt;/faultcode&gt;
      &lt;faultstring&gt;UPnPError&lt;/faultstring&gt;
      &lt;detail&gt;
        &lt;UPnPError xmlns="urn:schemas-upnp-org:control-1-0"&gt;
          &lt;errorCode&gt;701&lt;/errorCode&gt;
          &lt;errorDescription&gt;Transition not available&lt;/errorDescription&gt;
        &lt;/UPnPError&gt;
      &lt;/detail&gt;
    &lt;/s:Fault&gt;
  &lt;/s:Body&gt;
&lt;/s:Envelope&gt;
</code></pre>
<h2 id="upnp-eventing-gena"><a class="header" href="#upnp-eventing-gena">UPnP Eventing (GENA)</a></h2>
<h3 id="subscribe-to-events"><a class="header" href="#subscribe-to-events">Subscribe to Events</a></h3>
<p><strong>Request:</strong></p>
<pre><code>SUBSCRIBE /service/AVTransport/event HTTP/1.1
Host: 192.168.1.100:8080
Callback: &lt;http://192.168.1.50:8888/notify&gt;
NT: upnp:event
Timeout: Second-1800
</code></pre>
<p><strong>Response:</strong></p>
<pre><code>HTTP/1.1 200 OK
SID: uuid:subscription-12345
Timeout: Second-1800
</code></pre>
<h3 id="initial-event-state-snapshot"><a class="header" href="#initial-event-state-snapshot">Initial Event (State Snapshot)</a></h3>
<pre><code class="language-xml">NOTIFY /notify HTTP/1.1
Host: 192.168.1.50:8888
Content-Type: text/xml
NT: upnp:event
NTS: upnp:propchange
SID: uuid:subscription-12345
SEQ: 0

&lt;?xml version="1.0"?&gt;
&lt;e:propertyset xmlns:e="urn:schemas-upnp-org:event-1-0"&gt;
  &lt;e:property&gt;
    &lt;TransportState&gt;STOPPED&lt;/TransportState&gt;
  &lt;/e:property&gt;
  &lt;e:property&gt;
    &lt;CurrentTrack&gt;1&lt;/CurrentTrack&gt;
  &lt;/e:property&gt;
&lt;/e:propertyset&gt;
</code></pre>
<h3 id="subsequent-events"><a class="header" href="#subsequent-events">Subsequent Events</a></h3>
<pre><code class="language-xml">NOTIFY /notify HTTP/1.1
Host: 192.168.1.50:8888
Content-Type: text/xml
NT: upnp:event
NTS: upnp:propchange
SID: uuid:subscription-12345
SEQ: 1

&lt;?xml version="1.0"?&gt;
&lt;e:propertyset xmlns:e="urn:schemas-upnp-org:event-1-0"&gt;
  &lt;e:property&gt;
    &lt;TransportState&gt;PLAYING&lt;/TransportState&gt;
  &lt;/e:property&gt;
&lt;/e:propertyset&gt;
</code></pre>
<h3 id="unsubscribe"><a class="header" href="#unsubscribe">Unsubscribe</a></h3>
<pre><code>UNSUBSCRIBE /service/AVTransport/event HTTP/1.1
Host: 192.168.1.100:8080
SID: uuid:subscription-12345
</code></pre>
<h2 id="upnp-igd-internet-gateway-device"><a class="header" href="#upnp-igd-internet-gateway-device">UPnP IGD (Internet Gateway Device)</a></h2>
<h3 id="port-mapping"><a class="header" href="#port-mapping">Port Mapping</a></h3>
<p>One of the most common UPnP uses:</p>
<p><strong>Add Port Mapping Request:</strong></p>
<pre><code class="language-xml">POST /control/WANIPConnection HTTP/1.1
Host: 192.168.1.1:5000
Content-Type: text/xml; charset="utf-8"
SOAPAction: "urn:schemas-upnp-org:service:WANIPConnection:1#AddPortMapping"

&lt;?xml version="1.0"?&gt;
&lt;s:Envelope ...&gt;
  &lt;s:Body&gt;
    &lt;u:AddPortMapping xmlns:u="urn:schemas-upnp-org:service:WANIPConnection:1"&gt;
      &lt;NewRemoteHost&gt;&lt;/NewRemoteHost&gt;
      &lt;NewExternalPort&gt;8080&lt;/NewExternalPort&gt;
      &lt;NewProtocol&gt;TCP&lt;/NewProtocol&gt;
      &lt;NewInternalPort&gt;8080&lt;/NewInternalPort&gt;
      &lt;NewInternalClient&gt;192.168.1.50&lt;/NewInternalClient&gt;
      &lt;NewEnabled&gt;1&lt;/NewEnabled&gt;
      &lt;NewPortMappingDescription&gt;My Web Server&lt;/NewPortMappingDescription&gt;
      &lt;NewLeaseDuration&gt;0&lt;/NewLeaseDuration&gt;
    &lt;/u:AddPortMapping&gt;
  &lt;/s:Body&gt;
&lt;/s:Envelope&gt;
</code></pre>
<p><strong>Result:</strong></p>
<pre><code>External: &lt;public-ip&gt;:8080
    ↓
Internal: 192.168.1.50:8080

Automatic NAT traversal!
</code></pre>
<h3 id="get-external-ip"><a class="header" href="#get-external-ip">Get External IP</a></h3>
<pre><code class="language-xml">POST /control/WANIPConnection HTTP/1.1
SOAPAction: "urn:schemas-upnp-org:service:WANIPConnection:1#GetExternalIPAddress"

&lt;u:GetExternalIPAddress xmlns:u="urn:schemas-upnp-org:service:WANIPConnection:1"&gt;
&lt;/u:GetExternalIPAddress&gt;
</code></pre>
<p><strong>Response:</strong></p>
<pre><code class="language-xml">&lt;u:GetExternalIPAddressResponse&gt;
  &lt;NewExternalIPAddress&gt;203.0.113.5&lt;/NewExternalIPAddress&gt;
&lt;/u:GetExternalIPAddressResponse&gt;
</code></pre>
<h2 id="common-upnp-device-types"><a class="header" href="#common-upnp-device-types">Common UPnP Device Types</a></h2>
<pre><code>MediaServer              - Content provider (NAS, PC)
MediaRenderer            - Content consumer (TV, speaker)
InternetGatewayDevice    - Router/NAT
WANConnectionDevice      - WAN connection management
PrinterBasic             - Network printer
Scanner                  - Network scanner
HVAC                     - Heating/cooling control
Lighting                 - Smart lights
SecurityDevice           - Cameras, sensors
</code></pre>
<h2 id="upnp-client-implementation"><a class="header" href="#upnp-client-implementation">UPnP Client Implementation</a></h2>
<h3 id="python-example-discovery"><a class="header" href="#python-example-discovery">Python Example (Discovery)</a></h3>
<pre><code class="language-python">import socket

SSDP_ADDR = '239.255.255.250'
SSDP_PORT = 1900

def discover_devices():
    # M-SEARCH message
    message = '\r\n'.join([
        'M-SEARCH * HTTP/1.1',
        f'Host: {SSDP_ADDR}:{SSDP_PORT}',
        'Man: "ssdp:discover"',
        'ST: ssdp:all',
        'MX: 3',
        '',
        ''
    ])

    # Create socket
    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
    sock.settimeout(5)

    # Send M-SEARCH
    sock.sendto(message.encode(), (SSDP_ADDR, SSDP_PORT))

    # Receive responses
    devices = []
    try:
        while True:
            data, addr = sock.recvfrom(1024)
            response = data.decode()

            # Parse location
            for line in response.split('\r\n'):
                if line.startswith('Location:'):
                    location = line.split(':', 1)[1].strip()
                    devices.append(location)
                    break
    except socket.timeout:
        pass

    sock.close()
    return devices

# Usage
devices = discover_devices()
for device in devices:
    print(f"Found device: {device}")
</code></pre>
<h3 id="python-example-control"><a class="header" href="#python-example-control">Python Example (Control)</a></h3>
<pre><code class="language-python">import requests
import xml.etree.ElementTree as ET

def control_device(control_url, service_type, action, args):
    # Build SOAP envelope
    soap_body = f'''&lt;?xml version="1.0"?&gt;
    &lt;s:Envelope
      xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"
      s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"&gt;
      &lt;s:Body&gt;
        &lt;u:{action} xmlns:u="{service_type}"&gt;
          {''.join(f'&lt;{k}&gt;{v}&lt;/{k}&gt;' for k, v in args.items())}
        &lt;/u:{action}&gt;
      &lt;/s:Body&gt;
    &lt;/s:Envelope&gt;'''

    headers = {
        'Content-Type': 'text/xml; charset="utf-8"',
        'SOAPAction': f'"{service_type}#{action}"'
    }

    response = requests.post(control_url, data=soap_body, headers=headers)
    return response.text

# Usage
control_url = 'http://192.168.1.100:8080/service/AVTransport/control'
service_type = 'urn:schemas-upnp-org:service:AVTransport:1'
action = 'Play'
args = {'InstanceID': '0', 'Speed': '1'}

result = control_device(control_url, service_type, action, args)
print(result)
</code></pre>
<h2 id="upnp-tools"><a class="header" href="#upnp-tools">UPnP Tools</a></h2>
<h3 id="command-line-tools"><a class="header" href="#command-line-tools">Command Line Tools</a></h3>
<pre><code class="language-bash"># upnpc (miniupnpc)
# Install: apt-get install miniupnpc

# Discover IGD devices
upnpc -l

# Get external IP
upnpc -s

# Add port mapping
upnpc -a 192.168.1.50 8080 8080 TCP

# List port mappings
upnpc -L

# Delete port mapping
upnpc -d 8080 TCP
</code></pre>
<h3 id="gui-tools"><a class="header" href="#gui-tools">GUI Tools</a></h3>
<pre><code>- UPnP Inspector (Linux)
- UPnP Test Tool (Windows)
- Device Spy (UPnP Forum)
</code></pre>
<h2 id="upnp-security-issues"><a class="header" href="#upnp-security-issues">UPnP Security Issues</a></h2>
<h3 id="major-vulnerabilities"><a class="header" href="#major-vulnerabilities">Major Vulnerabilities</a></h3>
<h4 id="1-no-authentication"><a class="header" href="#1-no-authentication">1. No Authentication</a></h4>
<pre><code>Any device can control any other device
No password required
No encryption

Attack: Malicious app opens ports in router
</code></pre>
<h4 id="2-port-forwarding-abuse"><a class="header" href="#2-port-forwarding-abuse">2. Port Forwarding Abuse</a></h4>
<pre><code>Malware can:
  - Open ports in router
  - Expose internal services
  - Create backdoors

Example:
  Malware opens port 3389 (RDP)
  Attacker can remotely access PC
</code></pre>
<h4 id="3-ssdp-amplification-ddos"><a class="header" href="#3-ssdp-amplification-ddos">3. SSDP Amplification DDoS</a></h4>
<pre><code>Attacker spoofs source IP as victim
Sends M-SEARCH to many UPnP devices
Devices respond to victim
Victim overwhelmed with traffic

Amplification factor: 30x-50x
</code></pre>
<h4 id="4-xml-external-entity-xxe"><a class="header" href="#4-xml-external-entity-xxe">4. XML External Entity (XXE)</a></h4>
<pre><code>Malicious device description:
&lt;!DOCTYPE foo [
  &lt;!ENTITY xxe SYSTEM "file:///etc/passwd"&gt;
]&gt;
&lt;root&gt;&amp;xxe;&lt;/root&gt;

Can read local files
Server-side request forgery
</code></pre>
<h3 id="security-best-practices-5"><a class="header" href="#security-best-practices-5">Security Best Practices</a></h3>
<pre><code>1. Disable UPnP on router
   - If not needed, turn it off
   - Most secure option

2. Use UPnP-UP (UPnP with User Profile)
   - Authentication layer
   - Access control

3. Firewall rules
   - Block SSDP multicast from WAN
   - Limit UPnP to trusted VLANs

4. Whitelist devices
   - Only allow known devices
   - MAC address filtering

5. Monitor port mappings
   - Regular audits
   - Alert on unexpected changes

6. Update firmware
   - Patch vulnerabilities
   - Keep devices current
</code></pre>
<h2 id="upnp-vs-alternatives"><a class="header" href="#upnp-vs-alternatives">UPnP vs Alternatives</a></h2>
<h3 id="vs-manual-port-forwarding"><a class="header" href="#vs-manual-port-forwarding">vs Manual Port Forwarding</a></h3>
<pre><code>UPnP:
  Pros: Automatic, easy
  Cons: Security risk, no control

Manual:
  Pros: Secure, controlled
  Cons: Technical knowledge required
</code></pre>
<h3 id="vs-nat-pmp--pcp"><a class="header" href="#vs-nat-pmp--pcp">vs NAT-PMP / PCP</a></h3>
<pre><code>NAT-PMP (Apple):
  - Similar to UPnP
  - Simpler protocol
  - Better security

PCP (Port Control Protocol):
  - Successor to NAT-PMP
  - IETF standard
  - IPv6 support
</code></pre>
<h3 id="vs-stunturn"><a class="header" href="#vs-stunturn">vs STUN/TURN</a></h3>
<pre><code>UPnP: Local network discovery and control
STUN/TURN: NAT traversal for P2P connections

Different use cases, can complement each other
</code></pre>
<h2 id="eli10-26"><a class="header" href="#eli10-26">ELI10</a></h2>
<p>UPnP is like devices introducing themselves and asking for help:</p>
<p><strong>Discovery (Meeting New Friends):</strong></p>
<pre><code>New TV joins network:
  TV: "Hi everyone! I'm a TV and can play videos!"
  All devices hear the announcement
  Your phone: "Cool, I found a TV!"
</code></pre>
<p><strong>Control (Asking for Favors):</strong></p>
<pre><code>Phone to TV: "Can you play this video?"
TV: "Sure! Playing now."

Gaming console to router: "Can you open port 3478?"
Router: "Done! Port is open."
</code></pre>
<p><strong>Problems (Security Issues):</strong></p>
<pre><code>Bad actor: "Hey router, open all ports!"
Router: "OK!" (No questions asked)
  → This is dangerous!

Better approach:
  Router: "Who are you? Do you have permission?"
  Bad actor: "Uh... never mind."
</code></pre>
<p><strong>When to Use:</strong></p>
<ul>
<li>Home media streaming</li>
<li>Gaming (automatic port opening)</li>
<li>Smart home devices</li>
<li>Printing</li>
</ul>
<p><strong>When to Disable:</strong></p>
<ul>
<li>Public networks</li>
<li>When security is critical</li>
<li>Enterprise environments</li>
<li>If you don't need it</li>
</ul>
<p><strong>Rule of Thumb:</strong></p>
<ul>
<li>Home network: Convenient (but understand risks)</li>
<li>Business network: Usually disable</li>
<li>Gaming: Helpful for matchmaking</li>
<li>Important: Monitor what ports get opened!</li>
</ul>
<h2 id="further-resources-32"><a class="header" href="#further-resources-32">Further Resources</a></h2>
<ul>
<li><a href="https://openconnectivity.org/developer/specifications/upnp-resources">UPnP Forum</a></li>
<li><a href="https://tools.ietf.org/html/rfc6970">RFC 6970 - UPnP IGD-PCP Interworking</a></li>
<li><a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v2.0.pdf">UPnP Device Architecture</a></li>
<li><a href="https://miniupnp.tuxfamily.org/">miniupnpc Library</a></li>
<li><a href="https://www.upnp-hacks.org/">Security Concerns</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="finance"><a class="header" href="#finance">Finance</a></h1>
<h2 id="overview-53"><a class="header" href="#overview-53">Overview</a></h2>
<p>Finance is the management of money, investments, and other financial instruments. This guide covers various aspects of financial markets, investment strategies, and trading concepts essential for understanding modern finance and making informed investment decisions.</p>
<h2 id="what-is-finance"><a class="header" href="#what-is-finance">What is Finance?</a></h2>
<p>Finance encompasses the creation, management, and study of money, banking, credit, investments, assets, and liabilities. It involves:</p>
<ul>
<li><strong>Personal Finance</strong>: Managing individual/household money</li>
<li><strong>Corporate Finance</strong>: Managing business finances</li>
<li><strong>Public Finance</strong>: Government revenue and expenditure</li>
<li><strong>Investment Finance</strong>: Growing wealth through financial instruments</li>
</ul>
<h2 id="financial-markets"><a class="header" href="#financial-markets">Financial Markets</a></h2>
<h3 id="market-types"><a class="header" href="#market-types">Market Types</a></h3>
<ol>
<li><strong>Stock Market</strong>: Equity securities (shares of companies)</li>
<li><strong>Bond Market</strong>: Debt securities (loans to companies/governments)</li>
<li><strong>Commodity Market</strong>: Physical goods (gold, oil, agricultural products)</li>
<li><strong>Forex Market</strong>: Currency exchange</li>
<li><strong>Derivatives Market</strong>: Contracts based on underlying assets</li>
</ol>
<h3 id="market-participants"><a class="header" href="#market-participants">Market Participants</a></h3>
<ul>
<li><strong>Retail Investors</strong>: Individual investors</li>
<li><strong>Institutional Investors</strong>: Banks, hedge funds, pension funds</li>
<li><strong>Market Makers</strong>: Provide liquidity</li>
<li><strong>Brokers</strong>: Execute trades on behalf of clients</li>
<li><strong>Regulators</strong>: Ensure fair and orderly markets</li>
</ul>
<h2 id="investment-instruments"><a class="header" href="#investment-instruments">Investment Instruments</a></h2>
<h3 id="1-stocks-equities"><a class="header" href="#1-stocks-equities">1. Stocks (Equities)</a></h3>
<p>Ownership shares in a company.</p>
<p><strong>Types:</strong></p>
<ul>
<li><strong>Common Stock</strong>: Voting rights, dividends</li>
<li><strong>Preferred Stock</strong>: Fixed dividends, priority over common</li>
</ul>
<p><strong>Metrics:</strong></p>
<ul>
<li><strong>Price-to-Earnings (P/E) Ratio</strong>: Stock price / Earnings per share</li>
<li><strong>Dividend Yield</strong>: Annual dividend / Stock price</li>
<li><strong>Market Capitalization</strong>: Share price × Shares outstanding</li>
</ul>
<pre><code class="language-python"># Calculate basic stock metrics
def calculate_pe_ratio(price, earnings_per_share):
    """Price-to-Earnings Ratio"""
    return price / earnings_per_share

def calculate_dividend_yield(annual_dividend, stock_price):
    """Dividend Yield as percentage"""
    return (annual_dividend / stock_price) * 100

def calculate_market_cap(price, shares_outstanding):
    """Market Capitalization"""
    return price * shares_outstanding

# Example
stock_price = 150.00
eps = 10.00
annual_dividend = 3.00
shares = 1_000_000_000

pe_ratio = calculate_pe_ratio(stock_price, eps)
dividend_yield = calculate_dividend_yield(annual_dividend, stock_price)
market_cap = calculate_market_cap(stock_price, shares)

print(f"P/E Ratio: {pe_ratio:.2f}")
print(f"Dividend Yield: {dividend_yield:.2f}%")
print(f"Market Cap: ${market_cap:,.0f}")
</code></pre>
<p>See: <a href="finance/stocks.html">Stocks Guide</a></p>
<h3 id="2-options"><a class="header" href="#2-options">2. Options</a></h3>
<p>Contracts giving the right (not obligation) to buy/sell at a specific price.</p>
<p><strong>Types:</strong></p>
<ul>
<li><strong>Call Option</strong>: Right to buy</li>
<li><strong>Put Option</strong>: Right to sell</li>
</ul>
<p><strong>Key Terms:</strong></p>
<ul>
<li><strong>Strike Price</strong>: Exercise price</li>
<li><strong>Premium</strong>: Option cost</li>
<li><strong>Expiration Date</strong>: Contract end date</li>
<li><strong>In-the-Money (ITM)</strong>: Profitable to exercise</li>
<li><strong>Out-of-the-Money (OTM)</strong>: Not profitable to exercise</li>
<li><strong>At-the-Money (ATM)</strong>: Strike ≈ Current price</li>
</ul>
<p><strong>Greeks:</strong></p>
<ul>
<li><strong>Delta</strong>: Price sensitivity to underlying</li>
<li><strong>Gamma</strong>: Rate of delta change</li>
<li><strong>Theta</strong>: Time decay</li>
<li><strong>Vega</strong>: Volatility sensitivity</li>
<li><strong>Rho</strong>: Interest rate sensitivity</li>
</ul>
<p>See: <a href="finance/options.html">Options Trading</a></p>
<h3 id="3-futures"><a class="header" href="#3-futures">3. Futures</a></h3>
<p>Obligatory contracts to buy/sell at a future date and price.</p>
<p><strong>Characteristics:</strong></p>
<ul>
<li>Standardized contracts</li>
<li>Exchange-traded</li>
<li>Margin requirements</li>
<li>Daily settlement</li>
</ul>
<p><strong>Uses:</strong></p>
<ul>
<li>Hedging risk</li>
<li>Speculation</li>
<li>Price discovery</li>
</ul>
<p><strong>Common Futures:</strong></p>
<ul>
<li>Equity index futures (S&amp;P 500, NASDAQ)</li>
<li>Commodity futures (oil, gold, corn)</li>
<li>Currency futures</li>
<li>Interest rate futures</li>
</ul>
<p>See: <a href="finance/futures.html">Futures Trading</a></p>
<h3 id="4-cryptocurrencies"><a class="header" href="#4-cryptocurrencies">4. Cryptocurrencies</a></h3>
<p>Digital or virtual currencies using cryptography.</p>
<p><strong>Popular Cryptocurrencies:</strong></p>
<ul>
<li><strong>Bitcoin (BTC)</strong>: First cryptocurrency</li>
<li><strong>Ethereum (ETH)</strong>: Smart contract platform</li>
<li><strong>Altcoins</strong>: Alternative cryptocurrencies</li>
</ul>
<p><strong>Key Concepts:</strong></p>
<ul>
<li><strong>Blockchain</strong>: Distributed ledger technology</li>
<li><strong>Mining</strong>: Transaction verification process</li>
<li><strong>Wallet</strong>: Storage for private keys</li>
<li><strong>Exchange</strong>: Platform for trading crypto</li>
</ul>
<p>See: <a href="finance/crypto.html">Cryptocurrency Guide</a></p>
<h2 id="investment-strategies"><a class="header" href="#investment-strategies">Investment Strategies</a></h2>
<h3 id="value-investing"><a class="header" href="#value-investing">Value Investing</a></h3>
<p>Buy undervalued securities based on fundamental analysis.</p>
<p><strong>Key Principles:</strong></p>
<ul>
<li>Focus on intrinsic value</li>
<li>Margin of safety</li>
<li>Long-term perspective</li>
<li>Fundamental analysis</li>
</ul>
<p><strong>Metrics:</strong></p>
<ul>
<li>P/E ratio</li>
<li>Price-to-Book (P/B) ratio</li>
<li>Debt-to-Equity ratio</li>
<li>Free cash flow</li>
</ul>
<h3 id="growth-investing"><a class="header" href="#growth-investing">Growth Investing</a></h3>
<p>Invest in companies with high growth potential.</p>
<p><strong>Characteristics:</strong></p>
<ul>
<li>High P/E ratios</li>
<li>Revenue growth</li>
<li>Market expansion</li>
<li>Innovation focus</li>
</ul>
<h3 id="dividend-investing"><a class="header" href="#dividend-investing">Dividend Investing</a></h3>
<p>Focus on stocks paying regular dividends.</p>
<p><strong>Benefits:</strong></p>
<ul>
<li>Steady income stream</li>
<li>Lower volatility</li>
<li>Compound growth</li>
</ul>
<p><strong>Metrics:</strong></p>
<ul>
<li>Dividend yield</li>
<li>Payout ratio</li>
<li>Dividend growth rate</li>
</ul>
<h3 id="index-investing"><a class="header" href="#index-investing">Index Investing</a></h3>
<p>Track market indices through index funds/ETFs.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li>Diversification</li>
<li>Low fees</li>
<li>Passive management</li>
<li>Market returns</li>
</ul>
<p><strong>Popular Indices:</strong></p>
<ul>
<li>S&amp;P 500</li>
<li>NASDAQ-100</li>
<li>Dow Jones Industrial Average</li>
<li>Russell 2000</li>
</ul>
<h2 id="analysis-methods"><a class="header" href="#analysis-methods">Analysis Methods</a></h2>
<h3 id="fundamental-analysis"><a class="header" href="#fundamental-analysis">Fundamental Analysis</a></h3>
<p>Evaluate intrinsic value through financial statements.</p>
<p><strong>Financial Statements:</strong></p>
<ol>
<li><strong>Income Statement</strong>: Revenue, expenses, profit</li>
<li><strong>Balance Sheet</strong>: Assets, liabilities, equity</li>
<li><strong>Cash Flow Statement</strong>: Operating, investing, financing cash flows</li>
</ol>
<p><strong>Key Ratios:</strong></p>
<pre><code class="language-python"># Profitability Ratios
def gross_margin(revenue, cogs):
    return ((revenue - cogs) / revenue) * 100

def net_profit_margin(net_income, revenue):
    return (net_income / revenue) * 100

def return_on_equity(net_income, shareholders_equity):
    return (net_income / shareholders_equity) * 100

# Liquidity Ratios
def current_ratio(current_assets, current_liabilities):
    return current_assets / current_liabilities

def quick_ratio(current_assets, inventory, current_liabilities):
    return (current_assets - inventory) / current_liabilities

# Leverage Ratios
def debt_to_equity(total_debt, total_equity):
    return total_debt / total_equity

def interest_coverage(ebit, interest_expense):
    return ebit / interest_expense

# Efficiency Ratios
def asset_turnover(revenue, total_assets):
    return revenue / total_assets

def inventory_turnover(cogs, average_inventory):
    return cogs / average_inventory
</code></pre>
<p>See: <a href="finance/fundamental_analysis.html">Fundamental Analysis</a></p>
<h3 id="technical-analysis"><a class="header" href="#technical-analysis">Technical Analysis</a></h3>
<p>Analyze price patterns and trends using charts.</p>
<p><strong>Common Indicators:</strong></p>
<ul>
<li><strong>Moving Averages</strong>: Simple (SMA), Exponential (EMA)</li>
<li><strong>RSI</strong>: Relative Strength Index (overbought/oversold)</li>
<li><strong>MACD</strong>: Moving Average Convergence Divergence</li>
<li><strong>Bollinger Bands</strong>: Volatility indicator</li>
<li><strong>Volume</strong>: Trading activity</li>
</ul>
<pre><code class="language-python">import pandas as pd
import numpy as np

def simple_moving_average(prices, period):
    """Calculate SMA"""
    return prices.rolling(window=period).mean()

def exponential_moving_average(prices, period):
    """Calculate EMA"""
    return prices.ewm(span=period, adjust=False).mean()

def relative_strength_index(prices, period=14):
    """Calculate RSI"""
    delta = prices.diff()
    gain = (delta.where(delta &gt; 0, 0)).rolling(window=period).mean()
    loss = (-delta.where(delta &lt; 0, 0)).rolling(window=period).mean()
    rs = gain / loss
    rsi = 100 - (100 / (1 + rs))
    return rsi

def bollinger_bands(prices, period=20, std_dev=2):
    """Calculate Bollinger Bands"""
    sma = simple_moving_average(prices, period)
    std = prices.rolling(window=period).std()
    upper_band = sma + (std * std_dev)
    lower_band = sma - (std * std_dev)
    return upper_band, sma, lower_band

def macd(prices, fast=12, slow=26, signal=9):
    """Calculate MACD"""
    ema_fast = exponential_moving_average(prices, fast)
    ema_slow = exponential_moving_average(prices, slow)
    macd_line = ema_fast - ema_slow
    signal_line = macd_line.ewm(span=signal, adjust=False).mean()
    histogram = macd_line - signal_line
    return macd_line, signal_line, histogram
</code></pre>
<p>See: <a href="finance/technical_analysis.html">Technical Analysis</a></p>
<h2 id="risk-management"><a class="header" href="#risk-management">Risk Management</a></h2>
<h3 id="portfolio-diversification"><a class="header" href="#portfolio-diversification">Portfolio Diversification</a></h3>
<p>Don't put all eggs in one basket.</p>
<p><strong>Diversification Strategies:</strong></p>
<ul>
<li>Across asset classes (stocks, bonds, real estate)</li>
<li>Across sectors (tech, healthcare, finance)</li>
<li>Across geographies (domestic, international)</li>
<li>Across market caps (large, mid, small)</li>
</ul>
<h3 id="position-sizing"><a class="header" href="#position-sizing">Position Sizing</a></h3>
<p>Determine how much to invest in each position.</p>
<pre><code class="language-python">def position_size_fixed_dollar(account_balance, risk_per_trade):
    """Fixed dollar amount per trade"""
    return risk_per_trade

def position_size_percentage(account_balance, risk_percentage):
    """Percentage of account balance"""
    return account_balance * (risk_percentage / 100)

def position_size_volatility(account_balance, risk_percentage, entry_price, stop_loss):
    """Based on volatility and stop loss"""
    risk_per_share = abs(entry_price - stop_loss)
    total_risk = account_balance * (risk_percentage / 100)
    shares = total_risk / risk_per_share
    return int(shares)

# Example
account = 100000
risk_pct = 2  # 2% risk per trade
entry = 150
stop = 145

shares = position_size_volatility(account, risk_pct, entry, stop)
print(f"Buy {shares} shares at ${entry} with stop at ${stop}")
</code></pre>
<h3 id="stop-loss-orders"><a class="header" href="#stop-loss-orders">Stop Loss Orders</a></h3>
<p>Automatic sell orders to limit losses.</p>
<p><strong>Types:</strong></p>
<ul>
<li><strong>Fixed Stop</strong>: Specific price level</li>
<li><strong>Trailing Stop</strong>: Adjusts with price movement</li>
<li><strong>Percentage Stop</strong>: Based on percentage decline</li>
</ul>
<pre><code class="language-python">def calculate_stop_loss(entry_price, stop_percentage, position_type='long'):
    """Calculate stop loss price"""
    if position_type == 'long':
        return entry_price * (1 - stop_percentage / 100)
    else:  # short
        return entry_price * (1 + stop_percentage / 100)

def calculate_take_profit(entry_price, risk_reward_ratio, stop_loss, position_type='long'):
    """Calculate take profit based on risk/reward ratio"""
    risk = abs(entry_price - stop_loss)
    reward = risk * risk_reward_ratio
    
    if position_type == 'long':
        return entry_price + reward
    else:  # short
        return entry_price - reward

# Example: 2:1 risk/reward ratio
entry = 100
stop_pct = 5
rr_ratio = 2

stop = calculate_stop_loss(entry, stop_pct, 'long')
target = calculate_take_profit(entry, rr_ratio, stop, 'long')

print(f"Entry: ${entry}")
print(f"Stop Loss: ${stop:.2f}")
print(f"Take Profit: ${target:.2f}")
print(f"Risk: ${entry - stop:.2f}")
print(f"Reward: ${target - entry:.2f}")
</code></pre>
<h2 id="performance-metrics"><a class="header" href="#performance-metrics">Performance Metrics</a></h2>
<h3 id="returns"><a class="header" href="#returns">Returns</a></h3>
<pre><code class="language-python">def simple_return(start_value, end_value):
    """Simple return percentage"""
    return ((end_value - start_value) / start_value) * 100

def compound_annual_growth_rate(start_value, end_value, years):
    """CAGR"""
    return (((end_value / start_value) ** (1 / years)) - 1) * 100

def total_return(initial_investment, final_value, dividends):
    """Total return including dividends"""
    return ((final_value + dividends - initial_investment) / initial_investment) * 100
</code></pre>
<h3 id="risk-metrics"><a class="header" href="#risk-metrics">Risk Metrics</a></h3>
<pre><code class="language-python">import numpy as np

def volatility(returns):
    """Standard deviation of returns (annualized)"""
    return np.std(returns) * np.sqrt(252)  # 252 trading days

def sharpe_ratio(returns, risk_free_rate=0.02):
    """Risk-adjusted return"""
    excess_returns = returns - risk_free_rate / 252
    return np.mean(excess_returns) / np.std(excess_returns) * np.sqrt(252)

def maximum_drawdown(prices):
    """Maximum peak-to-trough decline"""
    cummax = np.maximum.accumulate(prices)
    drawdown = (prices - cummax) / cummax
    return np.min(drawdown) * 100

def beta(asset_returns, market_returns):
    """Measure of volatility relative to market"""
    covariance = np.cov(asset_returns, market_returns)[0][1]
    market_variance = np.var(market_returns)
    return covariance / market_variance
</code></pre>
<h2 id="trading-psychology"><a class="header" href="#trading-psychology">Trading Psychology</a></h2>
<h3 id="emotional-discipline"><a class="header" href="#emotional-discipline">Emotional Discipline</a></h3>
<p><strong>Common Pitfalls:</strong></p>
<ul>
<li><strong>Fear of Missing Out (FOMO)</strong>: Chasing rallies</li>
<li><strong>Loss Aversion</strong>: Holding losers too long</li>
<li><strong>Overconfidence</strong>: Taking excessive risk</li>
<li><strong>Confirmation Bias</strong>: Seeking supporting evidence only</li>
<li><strong>Anchoring</strong>: Fixating on specific price points</li>
</ul>
<p><strong>Best Practices:</strong></p>
<ul>
<li>Follow your trading plan</li>
<li>Keep emotions in check</li>
<li>Accept losses gracefully</li>
<li>Don't overtrade</li>
<li>Take breaks when needed</li>
</ul>
<h3 id="trading-plan"><a class="header" href="#trading-plan">Trading Plan</a></h3>
<p>Essential components:</p>
<ol>
<li><strong>Entry Criteria</strong>: When to buy</li>
<li><strong>Exit Criteria</strong>: When to sell (profit and loss)</li>
<li><strong>Position Sizing</strong>: How much to invest</li>
<li><strong>Risk Management</strong>: Stop loss levels</li>
<li><strong>Record Keeping</strong>: Track all trades</li>
</ol>
<h2 id="financial-calculations"><a class="header" href="#financial-calculations">Financial Calculations</a></h2>
<h3 id="time-value-of-money"><a class="header" href="#time-value-of-money">Time Value of Money</a></h3>
<pre><code class="language-python">def future_value(present_value, rate, periods):
    """FV = PV × (1 + r)^n"""
    return present_value * (1 + rate) ** periods

def present_value(future_value, rate, periods):
    """PV = FV / (1 + r)^n"""
    return future_value / (1 + rate) ** periods

def compound_interest(principal, rate, periods, compounds_per_period=1):
    """Compound interest formula"""
    return principal * (1 + rate / compounds_per_period) ** (periods * compounds_per_period)

# Example: $10,000 invested for 10 years at 7% annual return
principal = 10000
rate = 0.07
years = 10

fv = future_value(principal, rate, years)
print(f"${principal:,.2f} grows to ${fv:,.2f} in {years} years")
</code></pre>
<h3 id="annuities"><a class="header" href="#annuities">Annuities</a></h3>
<pre><code class="language-python">def future_value_annuity(payment, rate, periods):
    """FV of regular payments"""
    return payment * (((1 + rate) ** periods - 1) / rate)

def present_value_annuity(payment, rate, periods):
    """PV of regular payments"""
    return payment * ((1 - (1 + rate) ** -periods) / rate)

def loan_payment(principal, rate, periods):
    """Calculate loan payment"""
    return principal * (rate * (1 + rate) ** periods) / ((1 + rate) ** periods - 1)

# Example: Mortgage calculation
loan_amount = 300000
annual_rate = 0.04
years = 30
monthly_rate = annual_rate / 12
months = years * 12

monthly_payment = loan_payment(loan_amount, monthly_rate, months)
total_paid = monthly_payment * months
total_interest = total_paid - loan_amount

print(f"Monthly Payment: ${monthly_payment:,.2f}")
print(f"Total Interest: ${total_interest:,.2f}")
</code></pre>
<h2 id="investment-accounts"><a class="header" href="#investment-accounts">Investment Accounts</a></h2>
<h3 id="account-types"><a class="header" href="#account-types">Account Types</a></h3>
<p><strong>Taxable Accounts:</strong></p>
<ul>
<li>Individual brokerage accounts</li>
<li>Joint accounts</li>
<li>Margin accounts</li>
</ul>
<p><strong>Tax-Advantaged (US):</strong></p>
<ul>
<li><strong>401(k)</strong>: Employer-sponsored retirement</li>
<li><strong>IRA</strong>: Individual Retirement Account</li>
<li><strong>Roth IRA</strong>: Tax-free growth and withdrawals</li>
<li><strong>HSA</strong>: Health Savings Account</li>
</ul>
<h3 id="fees-and-costs"><a class="header" href="#fees-and-costs">Fees and Costs</a></h3>
<ul>
<li><strong>Expense Ratios</strong>: Mutual fund/ETF annual fees</li>
<li><strong>Trading Commissions</strong>: Per-trade fees</li>
<li><strong>Management Fees</strong>: Advisory fees</li>
<li><strong>Tax Implications</strong>: Capital gains, dividends</li>
</ul>
<h2 id="market-orders"><a class="header" href="#market-orders">Market Orders</a></h2>
<h3 id="order-types"><a class="header" href="#order-types">Order Types</a></h3>
<pre><code class="language-python"># Common order types

class Order:
    """Order examples"""
    
    @staticmethod
    def market_order():
        """Execute at current market price"""
        return {
            "type": "market",
            "execution": "immediate",
            "price": "current market price"
        }
    
    @staticmethod
    def limit_order(limit_price):
        """Execute at specific price or better"""
        return {
            "type": "limit",
            "limit_price": limit_price,
            "execution": "when price reaches limit"
        }
    
    @staticmethod
    def stop_loss_order(stop_price):
        """Sell when price falls to stop level"""
        return {
            "type": "stop_loss",
            "stop_price": stop_price,
            "execution": "when price hits stop"
        }
    
    @staticmethod
    def stop_limit_order(stop_price, limit_price):
        """Combines stop and limit orders"""
        return {
            "type": "stop_limit",
            "stop_price": stop_price,
            "limit_price": limit_price,
            "execution": "limit order triggered at stop"
        }
</code></pre>
<h3 id="order-duration"><a class="header" href="#order-duration">Order Duration</a></h3>
<ul>
<li><strong>Day Order</strong>: Expires at end of trading day</li>
<li><strong>Good Till Canceled (GTC)</strong>: Active until executed or canceled</li>
<li><strong>Fill or Kill (FOK)</strong>: Execute immediately in full or cancel</li>
<li><strong>Immediate or Cancel (IOC)</strong>: Execute immediately, cancel remainder</li>
</ul>
<h2 id="resources-and-tools"><a class="header" href="#resources-and-tools">Resources and Tools</a></h2>
<h3 id="financial-data-sources"><a class="header" href="#financial-data-sources">Financial Data Sources</a></h3>
<ul>
<li>Yahoo Finance</li>
<li>Bloomberg Terminal</li>
<li>TradingView</li>
<li>Alpha Vantage API</li>
<li>IEX Cloud</li>
</ul>
<h3 id="analysis-tools"><a class="header" href="#analysis-tools">Analysis Tools</a></h3>
<ul>
<li>Excel/Google Sheets</li>
<li>Python (pandas, numpy, matplotlib)</li>
<li>TradingView</li>
<li>ThinkOrSwim</li>
<li>MetaTrader</li>
</ul>
<h3 id="educational-resources"><a class="header" href="#educational-resources">Educational Resources</a></h3>
<ul>
<li>Investopedia</li>
<li>Khan Academy (Finance)</li>
<li>CFA Institute</li>
<li>Financial news (WSJ, FT, Bloomberg)</li>
</ul>
<h2 id="available-guides"><a class="header" href="#available-guides">Available Guides</a></h2>
<p>Explore detailed guides for specific topics:</p>
<ol>
<li><a href="finance/general.html">General Finance</a> - Fundamental concepts and principles</li>
<li><a href="finance/stocks.html">Stocks</a> - Equity investing and analysis</li>
<li><a href="finance/options.html">Options</a> - Options trading strategies</li>
<li><a href="finance/futures.html">Futures</a> - Futures contracts and trading</li>
<li><a href="finance/crypto.html">Cryptocurrency</a> - Digital assets and blockchain</li>
<li><a href="finance/fundamental_analysis.html">Fundamental Analysis</a> - Company valuation</li>
<li><a href="finance/technical_analysis.html">Technical Analysis</a> - Chart patterns and indicators</li>
</ol>
<h2 id="important-disclaimers"><a class="header" href="#important-disclaimers">Important Disclaimers</a></h2>
<ol>
<li><strong>Not Financial Advice</strong>: This is educational content only</li>
<li><strong>Do Your Own Research</strong>: Always verify information</li>
<li><strong>Risk Warning</strong>: Investing involves risk of loss</li>
<li><strong>Past Performance</strong>: Does not guarantee future results</li>
<li><strong>Diversification</strong>: Does not ensure profit or protect against loss</li>
<li><strong>Consult Professionals</strong>: Consider seeking professional advice</li>
</ol>
<h2 id="key-principles"><a class="header" href="#key-principles">Key Principles</a></h2>
<h3 id="investment-principles"><a class="header" href="#investment-principles">Investment Principles</a></h3>
<ol>
<li><strong>Start Early</strong>: Compound interest is powerful</li>
<li><strong>Diversify</strong>: Spread risk across assets</li>
<li><strong>Invest Regularly</strong>: Dollar-cost averaging</li>
<li><strong>Control Costs</strong>: Minimize fees and taxes</li>
<li><strong>Stay Disciplined</strong>: Stick to your plan</li>
<li><strong>Educate Yourself</strong>: Continuous learning</li>
<li><strong>Manage Risk</strong>: Protect your capital</li>
<li><strong>Think Long-Term</strong>: Avoid emotional decisions</li>
</ol>
<h3 id="risk-management-rules"><a class="header" href="#risk-management-rules">Risk Management Rules</a></h3>
<ol>
<li>Never risk more than you can afford to lose</li>
<li>Use stop losses to limit downside</li>
<li>Diversify across multiple positions</li>
<li>Size positions appropriately</li>
<li>Have a clear exit strategy</li>
<li>Don't let winners become losers</li>
<li>Cut losses quickly</li>
<li>Let profits run (within reason)</li>
</ol>
<h2 id="next-steps-4"><a class="header" href="#next-steps-4">Next Steps</a></h2>
<ol>
<li>Learn the basics of <a href="finance/general.html">General Finance</a></li>
<li>Study <a href="finance/fundamental_analysis.html">Fundamental Analysis</a></li>
<li>Explore <a href="finance/technical_analysis.html">Technical Analysis</a></li>
<li>Understand <a href="finance/stocks.html">Stocks</a> and equity markets</li>
<li>Learn about <a href="finance/options.html">Options</a> for hedging and income</li>
<li>Research <a href="finance/crypto.html">Cryptocurrency</a> opportunities</li>
<li>Practice with paper trading before using real money</li>
<li>Build a diversified portfolio aligned with your goals</li>
<li>Continuously educate yourself</li>
<li>Start investing with money you can afford to lose</li>
</ol>
<p>Remember: Successful investing requires knowledge, discipline, and patience. Take time to learn, practice with small amounts, and gradually build your skills and portfolio.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="general"><a class="header" href="#general">General</a></h1>
<h2 id="sharpe-ratio"><a class="header" href="#sharpe-ratio">Sharpe Ratio</a></h2>
<p>The Sharpe Ratio is a widely used metric in finance to evaluate the performance of an investment by measuring the excess return per unit of risk. It is calculated by dividing the difference between the return of the investment and the risk-free rate by the standard deviation of the investment's returns.</p>
<p>$$
SR = \frac{R_p - R_f}{\sigma_p}
$$</p>
<p>Where:</p>
<ul>
<li>( R_p ) is the return of the portfolio</li>
<li>( R_f ) is the risk-free rate (usually the return of a benchmark like the S&amp;P 500)</li>
<li>( \sigma_p ) is the standard deviation of the portfolio's returns</li>
</ul>
<h2 id="calculating-standard-deviation-of-returns"><a class="header" href="#calculating-standard-deviation-of-returns">Calculating Standard Deviation of Returns</a></h2>
<p>The standard deviation of returns is a measure of the dispersion or variability of investment returns over a period of time. It helps in understanding the risk associated with the investment. Here is a step-by-step process to calculate the standard deviation of returns:</p>
<ol>
<li>
<p><strong>Collect the Returns Data</strong>: Gather the periodic returns of the investment. These returns can be daily, monthly, or yearly.</p>
</li>
<li>
<p><strong>Calculate the Mean Return</strong>: Compute the average return over the period.</p>
</li>
</ol>
<p>$$
\bar{R} = \frac{\sum_{i=1}^{n} R_i}{n}
$$</p>
<p>Where:</p>
<ul>
<li>( \bar{R} ) is the mean return</li>
<li>( R_i ) is the return for period ( i )</li>
<li>( n ) is the number of periods</li>
</ul>
<ol start="3">
<li><strong>Compute the Variance</strong>: Calculate the variance by finding the average of the squared differences between each return and the mean return.</li>
</ol>
<p>$$
\sigma^2 = \frac{\sum_{i=1}^{n} (R_i - \bar{R})^2}{n}
$$</p>
<p>Where:</p>
<ul>
<li>( \sigma^2 ) is the variance</li>
</ul>
<ol start="4">
<li><strong>Calculate the Standard Deviation</strong>: Take the square root of the variance to get the standard deviation.</li>
</ol>
<p>$$
\sigma = \sqrt{\sigma^2}
$$</p>
<p>Where:</p>
<ul>
<li>( \sigma ) is the standard deviation</li>
</ul>
<h3 id="sample-calculation"><a class="header" href="#sample-calculation">Sample Calculation</a></h3>
<p>Assume the following monthly returns for an investment over 5 months: 2%, 3%, -1%, 4%, and 5%.</p>
<ol>
<li><strong>Mean Return</strong>:</li>
</ol>
<p>$$
\bar{R} = \frac{2 + 3 - 1 + 4 + 5}{5} = \frac{13}{5} = 2.6%
$$</p>
<ol start="2">
<li><strong>Variance</strong>:</li>
</ol>
<p>$$
\sigma^2 = \frac{(2 - 2.6)^2 + (3 - 2.6)^2 + (-1 - 2.6)^2 + (4 - 2.6)^2 + (5 - 2.6)^2}{5}
$$</p>
<p>$$
\sigma^2 = \frac{(-0.6)^2 + (0.4)^2 + (-3.6)^2 + (1.4)^2 + (2.4)^2}{5}
$$</p>
<p>$$
\sigma^2 = \frac{0.36 + 0.16 + 12.96 + 1.96 + 5.76}{5} = \frac{21.2}{5} = 4.24
$$</p>
<ol start="3">
<li><strong>Standard Deviation</strong>:</li>
</ol>
<p>$$
\sigma = \sqrt{4.24} \approx 2.06%
$$</p>
<p>In this example, the standard deviation of the returns is approximately 2.06%, indicating the variability of the investment returns over the period.</p>
<h3 id="sample-scenario"><a class="header" href="#sample-scenario">Sample Scenario</a></h3>
<p>To better understand the Sharpe Ratio, let's consider a practical example.</p>
<p>Assume the following data for a portfolio:</p>
<ul>
<li>Portfolio return (( R_p )): 12% or 0.12</li>
<li>Risk-free rate (( R_f )): 2% or 0.02</li>
<li>Portfolio standard deviation (( \sigma_p )): 8% or 0.08</li>
</ul>
<p>Using the Sharpe Ratio formula:</p>
<p>$$
SR = \frac{R_p - R_f}{\sigma_p}
$$</p>
<p>Substituting the values:</p>
<p>$$
SR = \frac{0.12 - 0.02}{0.08} = \frac{0.10}{0.08} = 1.25
$$</p>
<p>In this scenario, the Sharpe Ratio is 1.25, indicating that the portfolio generates 1.25 units of excess return for each unit of risk taken.</p>
<h2 id="kelly-criterion"><a class="header" href="#kelly-criterion">Kelly Criterion</a></h2>
<p>The Kelly Criterion is a formula used to determine the optimal size of a series of bets. It calculates the ratio of edge over odds, helping to maximize the growth of capital over time. The formula is expressed as (k), where (p) and (q) are the probabilities of winning and losing, respectively.</p>
<p>$$
k = \frac{p - q}{o}
$$</p>
<p>Where:</p>
<ul>
<li>(p) is the probability of winning</li>
<li>(q) is the probability of losing</li>
<li>(o) is the odds of the bet</li>
</ul>
<h3 id="sample-scenario-1"><a class="header" href="#sample-scenario-1">Sample Scenario</a></h3>
<p>Consider a scenario to illustrate the Kelly Criterion.</p>
<p>Assume the following data for a bet:</p>
<ul>
<li>Probability of winning (( p )): 60% or 0.60</li>
<li>Probability of losing (( q )): 40% or 0.40</li>
<li>Odds of the bet (( o )): 2:1</li>
</ul>
<h3 id="understanding-odds-of-a-bet"><a class="header" href="#understanding-odds-of-a-bet">Understanding Odds of a Bet</a></h3>
<p>The odds of a bet represent the ratio of the probability of winning to the probability of losing. They are a crucial component in betting strategies, including the Kelly Criterion. Odds can be expressed in different formats, such as fractional, decimal, and moneyline.</p>
<h4 id="fractional-odds"><a class="header" href="#fractional-odds">Fractional Odds</a></h4>
<p>Fractional odds are commonly used in the UK and are represented as a fraction (e.g., 2/1). The numerator (first number) represents the potential profit, while the denominator (second number) represents the stake. For example, 2/1 odds mean you win $2 for every $1 bet.</p>
<h4 id="decimal-odds"><a class="header" href="#decimal-odds">Decimal Odds</a></h4>
<p>Decimal odds are popular in Europe and Australia. They are represented as a decimal number (e.g., 3.00). The decimal number includes the original stake, so the total payout is calculated by multiplying the stake by the decimal odds. For example, 3.00 odds mean a $1 bet returns $3 (including the $1 stake).</p>
<h4 id="moneyline-odds"><a class="header" href="#moneyline-odds">Moneyline Odds</a></h4>
<p>Moneyline odds are commonly used in the United States and can be positive or negative. Positive moneyline odds (e.g., +200) indicate how much profit you make on a $100 bet. Negative moneyline odds (e.g., -150) indicate how much you need to bet to win $100.</p>
<h3 id="calculating-odds"><a class="header" href="#calculating-odds">Calculating Odds</a></h3>
<p>To calculate the odds of a bet, you need to know the probabilities of winning and losing. The formula for calculating fractional odds is:</p>
<p>$$
\text{Odds} = \frac{p}{q}
$$</p>
<p>Where:</p>
<ul>
<li>( p ) is the probability of winning</li>
<li>( q ) is the probability of losing</li>
</ul>
<p>For example, if the probability of winning is 60% (0.60) and the probability of losing is 40% (0.40), the fractional odds are:</p>
<p>$$
\text{Odds} = \frac{0.60}{0.40} = \frac{3}{2} = 1.5
$$</p>
<p>To convert fractional odds to decimal odds, add 1 to the fractional odds:</p>
<p>$$
\text{Decimal Odds} = \text{Fractional Odds} + 1
$$</p>
<p>Using the previous example:</p>
<p>$$
\text{Decimal Odds} = 1.5 + 1 = 2.5
$$</p>
<p>To convert fractional odds to moneyline odds:</p>
<ul>
<li>If the fractional odds are greater than 1 (e.g., 2/1), the moneyline odds are positive: ( \text{Moneyline Odds} = \text{Fractional Odds} \times 100 )</li>
<li>If the fractional odds are less than 1 (e.g., 1/2), the moneyline odds are negative: ( \text{Moneyline Odds} = -\left(\frac{100}{\text{Fractional Odds}}\right) )</li>
</ul>
<p>Using the previous example (1.5 fractional odds):</p>
<p>$$
\text{Moneyline Odds} = 1.5 \times 100 = +150
$$</p>
<p>Understanding and calculating the odds of a bet is essential for making informed betting decisions and optimizing strategies like the Kelly Criterion.</p>
<p>Using the Kelly Criterion formula:</p>
<p>$$
k = \frac{p - q}{o}
$$</p>
<p>Substituting the values:</p>
<p>$$
k = \frac{0.60 - 0.40}{2} = \frac{0.20}{2} = 0.10
$$</p>
<p>In this scenario, the Kelly Criterion suggests betting 10% of your bankroll. For example, with a $1000 bankroll, you should bet $100.</p>
<h2 id="intuition-of-the-kelly-criterion"><a class="header" href="#intuition-of-the-kelly-criterion">Intuition of the Kelly Criterion</a></h2>
<p>The Kelly Criterion is a mathematical formula used to determine the optimal size of a series of bets to maximize the logarithm of wealth over time. It is particularly useful in scenarios where the goal is to grow wealth exponentially while managing risk. The intuition behind the Kelly Criterion can be broken down into several key concepts:</p>
<h3 id="key-concepts-25"><a class="header" href="#key-concepts-25">Key Concepts</a></h3>
<ol>
<li>
<p><strong>Maximizing Growth</strong>: The Kelly Criterion aims to maximize the long-term growth rate of your bankroll. By betting a fraction of your bankroll that is proportional to the edge you have over the odds, you can achieve exponential growth over time.</p>
</li>
<li>
<p><strong>Balancing Risk and Reward</strong>: The formula balances the potential reward of a bet with the risk of losing. By betting too much, you risk significant losses that can deplete your bankroll. By betting too little, you miss out on potential gains. The Kelly Criterion finds the optimal balance.</p>
</li>
<li>
<p><strong>Proportional Betting</strong>: The Kelly Criterion suggests betting a fraction of your bankroll that is proportional to your edge. This means that as your edge increases, the fraction of your bankroll you should bet also increases. Conversely, if your edge decreases, you should bet a smaller fraction.</p>
</li>
<li>
<p><strong>Logarithmic Utility</strong>: The Kelly Criterion is based on the concept of logarithmic utility, which means that the utility (or satisfaction) derived from wealth increases logarithmically. This approach ensures that the strategy is focused on long-term growth rather than short-term gains.</p>
</li>
</ol>
<h3 id="example-scenario"><a class="header" href="#example-scenario">Example Scenario</a></h3>
<p>Consider a scenario where you have a 60% chance of winning a bet (probability ( p = 0.60 )) and a 40% chance of losing (probability ( q = 0.40 )). The odds offered are 2:1 (decimal odds of 2.0).</p>
<p>Using the Kelly Criterion formula:</p>
<p>$$
k = \frac{p - q}{o}
$$</p>
<p>Substituting the values:</p>
<p>$$
k = \frac{0.60 - 0.40}{2} = \frac{0.20}{2} = 0.10
$$</p>
<p>In this scenario, the Kelly Criterion suggests betting 10% of your bankroll. For example, with a $1000 bankroll, you should bet $100.</p>
<h3 id="advantages-of-the-kelly-criterion"><a class="header" href="#advantages-of-the-kelly-criterion">Advantages of the Kelly Criterion</a></h3>
<ol>
<li><strong>Optimal Growth</strong>: The Kelly Criterion maximizes the long-term growth rate of your bankroll, ensuring that you achieve exponential growth over time.</li>
<li><strong>Risk Management</strong>: By betting a fraction of your bankroll, the Kelly Criterion helps manage risk and prevent significant losses.</li>
<li><strong>Adaptability</strong>: The formula adjusts the bet size based on the edge, allowing for flexible and adaptive betting strategies.</li>
</ol>
<h3 id="conclusion-23"><a class="header" href="#conclusion-23">Conclusion</a></h3>
<p>The Kelly Criterion is a powerful tool for optimizing bet sizes and maximizing long-term growth. By balancing risk and reward and focusing on proportional betting, the Kelly Criterion provides a strategic approach to betting that can lead to exponential wealth growth over time. Understanding the intuition behind the Kelly Criterion can help you make more informed and strategic betting decisions.</p>
<h2 id="pot-geometry"><a class="header" href="#pot-geometry">Pot Geometry</a></h2>
<p>Pot Geometry is a strategic betting approach where a consistent fraction of the pot is wagered on each round. Also known as geometric bet sizing, this strategy aims to maximize the amount of money an opponent contributes to the pot.</p>
<h3 id="detailed-explanation-of-pot-geometry"><a class="header" href="#detailed-explanation-of-pot-geometry">Detailed Explanation of Pot Geometry</a></h3>
<p>Pot Geometry is particularly useful in games like poker, where managing the pot size and betting strategically can significantly impact outcomes. By betting a fixed fraction of the pot on each round, the pot size grows exponentially, maximizing potential winnings while managing risk.</p>
<h3 id="key-concepts-26"><a class="header" href="#key-concepts-26">Key Concepts</a></h3>
<ol>
<li>
<p><strong>Fractional Betting</strong>: A fixed fraction of the current pot size is bet on each round. For instance, if the fraction is 50%, then 50% of the current pot size is added to the pot each round.</p>
</li>
<li>
<p><strong>Exponential Growth</strong>: Consistent fractional betting leads to exponential growth of the pot size, potentially increasing winnings over multiple rounds.</p>
</li>
<li>
<p><strong>Risk Management</strong>: Pot Geometry ensures bets are proportional to the current pot size, preventing over-betting and large losses.</p>
</li>
</ol>
<h3 id="example-scenario-1"><a class="header" href="#example-scenario-1">Example Scenario</a></h3>
<p>Consider an example to demonstrate Pot Geometry:</p>
<ul>
<li>Initial pot size: $100</li>
<li>Fraction of pot to bet: 50% (0.50)</li>
</ul>
<h4 id="round-1"><a class="header" href="#round-1">Round 1:</a></h4>
<ul>
<li>Current pot size: $100</li>
<li>Bet size: 50% of $100 = $50</li>
<li>New pot size: $100 + $50 = $150</li>
</ul>
<h4 id="round-2"><a class="header" href="#round-2">Round 2:</a></h4>
<ul>
<li>Current pot size: $150</li>
<li>Bet size: 50% of $150 = $75</li>
<li>New pot size: $150 + $75 = $225</li>
</ul>
<h4 id="round-3"><a class="header" href="#round-3">Round 3:</a></h4>
<ul>
<li>Current pot size: $225</li>
<li>Bet size: 50% of $225 = $112.50</li>
<li>New pot size: $225 + $112.50 = $337.50</li>
</ul>
<p>As shown, the pot size grows exponentially with each betting round.</p>
<h3 id="advantages-of-pot-geometry"><a class="header" href="#advantages-of-pot-geometry">Advantages of Pot Geometry</a></h3>
<ol>
<li><strong>Consistent Growth</strong>: The pot grows steadily, allowing for potentially higher winnings over multiple rounds.</li>
<li><strong>Controlled Risk</strong>: Betting a fraction of the pot controls risk, keeping it proportional to the current pot size.</li>
<li><strong>Strategic Flexibility</strong>: Players can adjust the betting fraction based on confidence and game dynamics.</li>
</ol>
<h3 id="conclusion-24"><a class="header" href="#conclusion-24">Conclusion</a></h3>
<p>Pot Geometry is a powerful betting strategy that leverages exponential growth and risk management principles. By consistently betting a fraction of the pot, players can maximize potential winnings while maintaining controlled risk. This strategy is particularly effective in poker, where strategic pot management can significantly influence long-term success.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="technical-analysis-1"><a class="header" href="#technical-analysis-1">Technical Analysis</a></h1>
<h2 id="stock-technical-analysis"><a class="header" href="#stock-technical-analysis">Stock Technical Analysis</a></h2>
<p>Stock technical analysis is a method used to evaluate and predict the future price movements of stocks by analyzing historical price data, trading volume, and other market indicators. Unlike fundamental analysis, which focuses on a company's financial health and intrinsic value, technical analysis relies on chart patterns, technical indicators, and statistical measures to make trading decisions.</p>
<h3 id="key-concepts-27"><a class="header" href="#key-concepts-27">Key Concepts</a></h3>
<ol>
<li>
<p><strong>Price Trends</strong>: Technical analysts study price trends to identify the direction in which a stock's price is moving. Trends can be upward (bullish), downward (bearish), or sideways (neutral). Recognizing trends helps traders make informed decisions about when to buy or sell stocks.</p>
</li>
<li>
<p><strong>Support and Resistance Levels</strong>: Support levels are price points where a stock tends to find buying interest, preventing it from falling further. Resistance levels are price points where selling interest is strong enough to prevent the stock from rising further. Identifying these levels helps traders set entry and exit points.</p>
</li>
<li>
<p><strong>Chart Patterns</strong>: Chart patterns are visual formations created by the price movements of a stock. Common patterns include head and shoulders, double tops and bottoms, triangles, and flags. These patterns can signal potential reversals or continuations in price trends.</p>
</li>
<li>
<p><strong>Technical Indicators</strong>: Technical indicators are mathematical calculations based on price, volume, or open interest data. Popular indicators include moving averages, relative strength index (RSI), moving average convergence divergence (MACD), and Bollinger Bands. These indicators help traders identify overbought or oversold conditions, trend strength, and potential reversal points.</p>
</li>
<li>
<p><strong>Volume Analysis</strong>: Trading volume is the number of shares traded during a specific period. Analyzing volume helps confirm the strength of price movements. For example, a price increase accompanied by high volume suggests strong buying interest, while a price increase with low volume may indicate weak buying interest.</p>
</li>
</ol>
<h3 id="example-scenario-2"><a class="header" href="#example-scenario-2">Example Scenario</a></h3>
<p>Consider a stock that has been in an upward trend for several months. A technical analyst might use the following steps to evaluate the stock:</p>
<ol>
<li>
<p><strong>Identify the Trend</strong>: The analyst observes that the stock is in a bullish trend, with higher highs and higher lows on the price chart.</p>
</li>
<li>
<p><strong>Determine Support and Resistance Levels</strong>: The analyst identifies key support levels at $50 and $55, and resistance levels at $65 and $70.</p>
</li>
<li>
<p><strong>Analyze Chart Patterns</strong>: The analyst notices a bullish flag pattern forming, indicating a potential continuation of the upward trend.</p>
</li>
<li>
<p><strong>Use Technical Indicators</strong>: The analyst checks the RSI, which shows the stock is not yet overbought, and the MACD, which indicates strong bullish momentum.</p>
</li>
<li>
<p><strong>Examine Volume</strong>: The analyst observes that recent price increases are accompanied by high trading volume, confirming strong buying interest.</p>
</li>
</ol>
<p>Based on this analysis, the technical analyst might decide to buy the stock, anticipating further price increases.</p>
<h3 id="advantages-of-technical-analysis"><a class="header" href="#advantages-of-technical-analysis">Advantages of Technical Analysis</a></h3>
<ol>
<li><strong>Timely Decision-Making</strong>: Technical analysis provides real-time data and signals, allowing traders to make quick and informed decisions.</li>
<li><strong>Market Sentiment Insight</strong>: By analyzing price and volume data, technical analysis helps traders gauge market sentiment and investor behavior.</li>
<li><strong>Versatility</strong>: Technical analysis can be applied to various financial instruments, including stocks, options, futures, and cryptocurrencies.</li>
</ol>
<h3 id="conclusion-25"><a class="header" href="#conclusion-25">Conclusion</a></h3>
<p>Stock technical analysis is a valuable tool for traders and investors seeking to predict future price movements and make informed trading decisions. By understanding key concepts such as price trends, support and resistance levels, chart patterns, technical indicators, and volume analysis, traders can develop effective strategies to navigate the stock market. While technical analysis has its limitations, it remains a popular and widely used method for analyzing and trading stocks.</p>
<h2 id="moving-averages"><a class="header" href="#moving-averages">Moving Averages</a></h2>
<p>Moving averages are one of the most commonly used technical indicators in stock analysis. They smooth out price data to identify the direction of the trend over a specific period. There are two main types of moving averages:</p>
<ol>
<li>
<p><strong>Simple Moving Average (SMA)</strong>: The SMA is calculated by taking the average of a stock's price over a specific number of periods. For example, a 10-day SMA is the average of the closing prices of the last 10 days.</p>
</li>
<li>
<p><strong>Exponential Moving Average (EMA)</strong>: The EMA gives more weight to recent prices, making it more responsive to new information. It is calculated using a formula that applies a weighting factor to the most recent price data.</p>
</li>
</ol>
<h3 id="example-scenario-3"><a class="header" href="#example-scenario-3">Example Scenario</a></h3>
<p>Consider a stock with the following closing prices over 5 days: $10, $12, $14, $16, and $18.</p>
<ul>
<li>The 5-day SMA would be: (10 + 12 + 14 + 16 + 18) / 5 = $14.</li>
<li>The 5-day EMA would place more weight on the recent prices, resulting in a value closer to the latest price of $18.</li>
</ul>
<h3 id="advantages-of-moving-averages"><a class="header" href="#advantages-of-moving-averages">Advantages of Moving Averages</a></h3>
<ol>
<li><strong>Trend Identification</strong>: Moving averages help identify the direction of the trend, making it easier for traders to follow the market's momentum.</li>
<li><strong>Support and Resistance Levels</strong>: Moving averages can act as dynamic support and resistance levels, providing entry and exit points for trades.</li>
</ol>
<h2 id="relative-strength-index-rsi"><a class="header" href="#relative-strength-index-rsi">Relative Strength Index (RSI)</a></h2>
<p>The Relative Strength Index (RSI) is a momentum oscillator that measures the speed and change of price movements. It ranges from 0 to 100 and is used to identify overbought or oversold conditions in a stock.</p>
<ul>
<li><strong>Overbought</strong>: An RSI above 70 suggests that a stock may be overbought and due for a correction.</li>
<li><strong>Oversold</strong>: An RSI below 30 indicates that a stock may be oversold and could be due for a rebound.</li>
</ul>
<h3 id="example-scenario-4"><a class="header" href="#example-scenario-4">Example Scenario</a></h3>
<p>Consider a stock with an RSI of 75. This high RSI value suggests that the stock is overbought, and a trader might consider selling or shorting the stock in anticipation of a price correction.</p>
<h3 id="advantages-of-rsi"><a class="header" href="#advantages-of-rsi">Advantages of RSI</a></h3>
<ol>
<li><strong>Momentum Measurement</strong>: RSI helps measure the strength of a stock's price movement, providing insights into potential reversals.</li>
<li><strong>Overbought/Oversold Signals</strong>: RSI provides clear signals for overbought and oversold conditions, aiding in decision-making.</li>
</ol>
<h2 id="moving-average-convergence-divergence-macd"><a class="header" href="#moving-average-convergence-divergence-macd">Moving Average Convergence Divergence (MACD)</a></h2>
<p>The Moving Average Convergence Divergence (MACD) is a trend-following momentum indicator that shows the relationship between two moving averages of a stock's price. It consists of three components:</p>
<ol>
<li><strong>MACD Line</strong>: The difference between the 12-day EMA and the 26-day EMA.</li>
<li><strong>Signal Line</strong>: A 9-day EMA of the MACD line.</li>
<li><strong>Histogram</strong>: The difference between the MACD line and the signal line.</li>
</ol>
<h3 id="example-scenario-5"><a class="header" href="#example-scenario-5">Example Scenario</a></h3>
<p>Consider a stock where the MACD line crosses above the signal line. This bullish crossover indicates a potential buy signal, suggesting that the stock's price may rise.</p>
<h3 id="advantages-of-macd"><a class="header" href="#advantages-of-macd">Advantages of MACD</a></h3>
<ol>
<li><strong>Trend and Momentum</strong>: MACD combines trend and momentum analysis, providing a comprehensive view of the stock's price action.</li>
<li><strong>Crossover Signals</strong>: MACD crossovers generate buy and sell signals, aiding in timing trades.</li>
</ol>
<h2 id="bollinger-bands"><a class="header" href="#bollinger-bands">Bollinger Bands</a></h2>
<p>Bollinger Bands are a volatility indicator that consists of three lines: the middle band (SMA), the upper band, and the lower band. The upper and lower bands are typically set two standard deviations away from the middle band.</p>
<ul>
<li><strong>Upper Band</strong>: Indicates overbought conditions when the price touches or exceeds it.</li>
<li><strong>Lower Band</strong>: Indicates oversold conditions when the price touches or falls below it.</li>
</ul>
<h3 id="example-scenario-6"><a class="header" href="#example-scenario-6">Example Scenario</a></h3>
<p>Consider a stock trading near the upper Bollinger Band. This suggests that the stock may be overbought, and a trader might consider selling or shorting the stock.</p>
<h3 id="advantages-of-bollinger-bands"><a class="header" href="#advantages-of-bollinger-bands">Advantages of Bollinger Bands</a></h3>
<ol>
<li><strong>Volatility Measurement</strong>: Bollinger Bands adjust to market volatility, providing dynamic support and resistance levels.</li>
<li><strong>Overbought/Oversold Conditions</strong>: Bollinger Bands help identify overbought and oversold conditions, aiding in decision-making.</li>
</ol>
<p>By understanding and utilizing these technical indicators—moving averages, RSI, MACD, and Bollinger Bands—traders can develop more informed and effective trading strategies to navigate the stock market.</p>
<h2 id="chart-patterns"><a class="header" href="#chart-patterns">Chart Patterns</a></h2>
<p>Chart patterns are formations created by the price movements of a stock or other financial instrument on a chart. These patterns are used by technical analysts to predict future price movements based on historical data. Chart patterns can be classified into two main categories: continuation patterns and reversal patterns.</p>
<h3 id="continuation-patterns"><a class="header" href="#continuation-patterns">Continuation Patterns</a></h3>
<p>Continuation patterns indicate that the current trend is likely to continue after the pattern is completed. Some common continuation patterns include:</p>
<ol>
<li>
<p><strong>Triangles</strong>: Triangles are formed by converging trendlines that represent a period of consolidation before the price breaks out in the direction of the existing trend. There are three types of triangles:</p>
<ul>
<li><strong>Ascending Triangle</strong>: Characterized by a flat upper trendline and a rising lower trendline, indicating a potential bullish breakout.</li>
<li><strong>Descending Triangle</strong>: Characterized by a flat lower trendline and a descending upper trendline, indicating a potential bearish breakout.</li>
<li><strong>Symmetrical Triangle</strong>: Formed by converging upper and lower trendlines, indicating a potential breakout in either direction.</li>
</ul>
</li>
<li>
<p><strong>Flags and Pennants</strong>: Flags and pennants are short-term continuation patterns that represent brief periods of consolidation before the price resumes its previous trend.</p>
<ul>
<li><strong>Flag</strong>: A rectangular pattern that slopes against the prevailing trend, indicating a brief consolidation before the trend continues.</li>
<li><strong>Pennant</strong>: A small symmetrical triangle that forms after a strong price movement, indicating a brief consolidation before the trend continues.</li>
</ul>
</li>
<li>
<p><strong>Rectangles</strong>: Rectangles are formed by horizontal support and resistance levels, indicating a period of consolidation before the price breaks out in the direction of the existing trend.</p>
</li>
</ol>
<h3 id="reversal-patterns"><a class="header" href="#reversal-patterns">Reversal Patterns</a></h3>
<p>Reversal patterns indicate that the current trend is likely to reverse after the pattern is completed. Some common reversal patterns include:</p>
<ol>
<li>
<p><strong>Head and Shoulders</strong>: The head and shoulders pattern is a bearish reversal pattern that consists of three peaks: a higher peak (head) between two lower peaks (shoulders). The pattern is confirmed when the price breaks below the neckline, indicating a potential trend reversal.</p>
</li>
<li>
<p><strong>Inverse Head and Shoulders</strong>: The inverse head and shoulders pattern is a bullish reversal pattern that consists of three troughs: a lower trough (head) between two higher troughs (shoulders). The pattern is confirmed when the price breaks above the neckline, indicating a potential trend reversal.</p>
</li>
<li>
<p><strong>Double Top and Double Bottom</strong>: The double top is a bearish reversal pattern that consists of two peaks at approximately the same price level, indicating a potential trend reversal when the price breaks below the support level. The double bottom is a bullish reversal pattern that consists of two troughs at approximately the same price level, indicating a potential trend reversal when the price breaks above the resistance level.</p>
</li>
<li>
<p><strong>Triple Top and Triple Bottom</strong>: The triple top is a bearish reversal pattern that consists of three peaks at approximately the same price level, indicating a potential trend reversal when the price breaks below the support level. The triple bottom is a bullish reversal pattern that consists of three troughs at approximately the same price level, indicating a potential trend reversal when the price breaks above the resistance level.</p>
</li>
</ol>
<h3 id="example-scenario-7"><a class="header" href="#example-scenario-7">Example Scenario</a></h3>
<p>Consider a stock that forms an ascending triangle pattern. The stock's price has been rising, and the pattern is characterized by a flat upper trendline and a rising lower trendline. This suggests that the stock is likely to break out to the upside, continuing its upward trend.</p>
<h3 id="advantages-of-chart-patterns"><a class="header" href="#advantages-of-chart-patterns">Advantages of Chart Patterns</a></h3>
<ol>
<li><strong>Predictive Power</strong>: Chart patterns provide insights into potential future price movements based on historical data.</li>
<li><strong>Visual Representation</strong>: Chart patterns offer a visual representation of market psychology and investor behavior.</li>
<li><strong>Versatility</strong>: Chart patterns can be applied to various financial instruments and timeframes, making them a versatile tool for technical analysis.</li>
</ol>
<p>By understanding and utilizing chart patterns, traders can enhance their ability to predict future price movements and make more informed trading decisions. Combining chart patterns with other technical indicators can further improve the accuracy of trading strategies.</p>
<h2 id="how-to-find-support-levels"><a class="header" href="#how-to-find-support-levels">How to Find Support Levels</a></h2>
<p>Support levels are price levels at which a stock or other financial instrument tends to find buying interest, preventing the price from falling further. Identifying support levels is crucial for traders as it helps them make informed decisions about entry and exit points. Here are some methods to find support levels:</p>
<h3 id="methods-to-identify-support-levels"><a class="header" href="#methods-to-identify-support-levels">Methods to Identify Support Levels</a></h3>
<ol>
<li>
<p><strong>Historical Price Levels</strong>: Look for price levels where the stock has previously found support. These levels can be identified by examining past price charts and noting where the price has repeatedly bounced back up.</p>
</li>
<li>
<p><strong>Moving Averages</strong>: Moving averages, such as the 50-day or 200-day moving average, can act as dynamic support levels. When the price approaches these moving averages, it often finds support and reverses direction.</p>
</li>
<li>
<p><strong>Trendlines</strong>: Draw trendlines by connecting the lows of an uptrend. These trendlines can act as support levels, indicating where the price is likely to find buying interest.</p>
</li>
<li>
<p><strong>Fibonacci Retracement Levels</strong>: Use Fibonacci retracement levels to identify potential support levels. Common retracement levels include 38.2%, 50%, and 61.8%. These levels are based on the Fibonacci sequence and can indicate where the price may find support during a pullback.</p>
</li>
<li>
<p><strong>Volume Profile</strong>: Analyze the volume profile to identify price levels with high trading activity. These levels often act as support, as they represent areas where a significant number of buyers have previously entered the market.</p>
</li>
<li>
<p><strong>Psychological Levels</strong>: Round numbers, such as $50, $100, or $1000, often act as psychological support levels. Traders tend to place buy orders at these levels, creating support.</p>
</li>
</ol>
<h3 id="example-scenario-8"><a class="header" href="#example-scenario-8">Example Scenario</a></h3>
<p>Consider a stock that has been in an uptrend and is currently trading at $150. By examining the historical price chart, you notice that the stock has previously found support at $140. Additionally, the 50-day moving average is currently at $140, reinforcing this level as a potential support. You also draw a trendline connecting the recent lows, which intersects at $140. Based on this analysis, you identify $140 as a strong support level for the stock.</p>
<h3 id="advantages-of-identifying-support-levels"><a class="header" href="#advantages-of-identifying-support-levels">Advantages of Identifying Support Levels</a></h3>
<ol>
<li><strong>Informed Decision-Making</strong>: Knowing support levels helps traders make informed decisions about when to enter or exit a trade.</li>
<li><strong>Risk Management</strong>: Identifying support levels allows traders to set stop-loss orders below these levels, managing risk and minimizing potential losses.</li>
<li><strong>Improved Timing</strong>: By recognizing support levels, traders can improve their timing for entering trades, increasing the likelihood of profitable outcomes.</li>
</ol>
<p>By understanding and utilizing support levels, traders can enhance their ability to predict price movements and make more strategic trading decisions. Combining support levels with other technical indicators and chart patterns can further improve the accuracy of trading strategies.</p>
<h2 id="best-brokers-for-futures-trading"><a class="header" href="#best-brokers-for-futures-trading">Best Brokers for Futures Trading</a></h2>
<p>Choosing the right broker is crucial for successful futures trading. Here are some of the best brokers for futures trading, known for their robust platforms, competitive fees, and excellent customer support:</p>
<ol>
<li>
<p><strong>TD Ameritrade</strong>: TD Ameritrade offers a powerful trading platform called thinkorswim, which is highly regarded for its advanced charting tools, technical analysis features, and real-time data. They provide competitive commission rates and a wide range of futures products.</p>
</li>
<li>
<p><strong>Interactive Brokers</strong>: Interactive Brokers is known for its low-cost trading and extensive range of futures contracts. Their Trader Workstation (TWS) platform is highly customizable and offers advanced trading tools, including algorithmic trading and risk management features.</p>
</li>
<li>
<p><strong>E*TRADE</strong>: E<em>TRADE provides a user-friendly platform with comprehensive research tools and educational resources. Their Power E</em>TRADE platform is designed for active traders and offers advanced charting, technical analysis, and real-time data.</p>
</li>
<li>
<p><strong>Charles Schwab</strong>: Charles Schwab offers a robust trading platform with a wide range of futures products. Their StreetSmart Edge platform provides advanced charting tools, technical analysis, and real-time data. Schwab is also known for its excellent customer service and educational resources.</p>
</li>
<li>
<p><strong>NinjaTrader</strong>: NinjaTrader is a popular choice among futures traders for its advanced charting and analysis tools. The platform offers a wide range of technical indicators, automated trading capabilities, and competitive commission rates. NinjaTrader also provides access to a large community of traders and educational resources.</p>
</li>
<li>
<p><strong>TradeStation</strong>: TradeStation is known for its powerful trading platform and advanced analytical tools. They offer a wide range of futures products and competitive commission rates. TradeStation's platform is highly customizable and provides access to real-time data, advanced charting, and technical analysis.</p>
</li>
</ol>
<h3 id="example-scenario-9"><a class="header" href="#example-scenario-9">Example Scenario</a></h3>
<p>Consider a trader who wants to trade crude oil futures. They choose Interactive Brokers for its low-cost trading and extensive range of futures contracts. The trader uses the Trader Workstation (TWS) platform to analyze crude oil price charts and identify trading opportunities. They place a market order to buy one crude oil futures contract and set stop-loss and take-profit levels based on their analysis. The trader continuously monitors the market and adjusts their orders as needed, ultimately achieving a profitable trade.</p>
<h3 id="advantages-of-choosing-the-right-broker"><a class="header" href="#advantages-of-choosing-the-right-broker">Advantages of Choosing the Right Broker</a></h3>
<ol>
<li><strong>Advanced Trading Tools</strong>: The best brokers offer advanced trading platforms with powerful charting, technical analysis, and real-time data.</li>
<li><strong>Competitive Fees</strong>: Low commission rates and competitive fees can significantly impact overall trading profitability.</li>
<li><strong>Customer Support</strong>: Excellent customer support ensures that traders can get help when needed, improving their trading experience.</li>
<li><strong>Educational Resources</strong>: Access to educational resources and research tools can help traders improve their skills and make more informed decisions.</li>
</ol>
<p>By choosing the right broker, traders can enhance their futures trading experience and increase their chances of success. It's important to consider factors such as trading platform features, commission rates, customer support, and educational resources when selecting a broker for futures trading.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fundamental-analysis-1"><a class="header" href="#fundamental-analysis-1">Fundamental Analysis</a></h1>
<h2 id="what-is-fundamental-analysis"><a class="header" href="#what-is-fundamental-analysis">What is Fundamental Analysis?</a></h2>
<p>Fundamental analysis is a method of evaluating the intrinsic value of an asset, such as a stock, by examining related economic, financial, and other qualitative and quantitative factors. The goal of fundamental analysis is to determine whether an asset is overvalued or undervalued by the market, and to make investment decisions based on this assessment.</p>
<h2 id="key-components-of-fundamental-analysis"><a class="header" href="#key-components-of-fundamental-analysis">Key Components of Fundamental Analysis</a></h2>
<ol>
<li>
<p><strong>Economic Analysis</strong>: This involves analyzing the overall economic environment, including factors such as GDP growth, inflation rates, interest rates, and employment levels. Economic conditions can have a significant impact on the performance of individual companies and industries.</p>
</li>
<li>
<p><strong>Industry Analysis</strong>: This involves examining the specific industry in which a company operates. Factors to consider include industry growth rates, competitive dynamics, regulatory environment, and technological advancements. Understanding the industry context helps in assessing a company's potential for growth and profitability.</p>
</li>
<li>
<p><strong>Company Analysis</strong>: This involves a detailed examination of a company's financial statements, management team, business model, and competitive position. Key financial metrics to analyze include revenue, earnings, profit margins, return on equity, and debt levels. Qualitative factors such as management quality, corporate governance, and brand strength are also important.</p>
</li>
</ol>
<h2 id="financial-statements"><a class="header" href="#financial-statements">Financial Statements</a></h2>
<p>Fundamental analysis relies heavily on the analysis of financial statements, which provide a comprehensive view of a company's financial health. The three main financial statements are:</p>
<ol>
<li>
<p><strong>Income Statement</strong>: This statement provides information about a company's revenues, expenses, and profits over a specific period. Key metrics to analyze include gross profit, operating income, and net income.</p>
</li>
<li>
<p><strong>Balance Sheet</strong>: This statement provides a snapshot of a company's assets, liabilities, and shareholders' equity at a specific point in time. Key metrics to analyze include current assets, current liabilities, long-term debt, and equity.</p>
</li>
<li>
<p><strong>Cash Flow Statement</strong>: This statement provides information about a company's cash inflows and outflows over a specific period. Key metrics to analyze include operating cash flow, investing cash flow, and financing cash flow.</p>
</li>
</ol>
<h2 id="valuation-methods"><a class="header" href="#valuation-methods">Valuation Methods</a></h2>
<p>Fundamental analysis involves various valuation methods to estimate the intrinsic value of an asset. Some common valuation methods include:</p>
<ol>
<li>
<p><strong>Discounted Cash Flow (DCF) Analysis</strong>: This method involves estimating the present value of a company's future cash flows. The DCF analysis requires making assumptions about future revenue growth, profit margins, and discount rates.</p>
</li>
<li>
<p><strong>Price-to-Earnings (P/E) Ratio</strong>: This ratio compares a company's current stock price to its earnings per share (EPS). A high P/E ratio may indicate that a stock is overvalued, while a low P/E ratio may indicate that it is undervalued.</p>
</li>
<li>
<p><strong>Price-to-Book (P/B) Ratio</strong>: This ratio compares a company's current stock price to its book value per share. The book value is the value of a company's assets minus its liabilities. A low P/B ratio may indicate that a stock is undervalued.</p>
</li>
<li>
<p><strong>Dividend Discount Model (DDM)</strong>: This method involves estimating the present value of a company's future dividend payments. The DDM is particularly useful for valuing companies with a stable dividend payout history.</p>
</li>
</ol>
<h2 id="conclusion-26"><a class="header" href="#conclusion-26">Conclusion</a></h2>
<p>Fundamental analysis is a comprehensive approach to evaluating the intrinsic value of an asset by examining economic, industry, and company-specific factors. By analyzing financial statements and using various valuation methods, investors can make informed decisions about whether to buy, hold, or sell an asset. While fundamental analysis requires a thorough understanding of financial concepts and data, it provides valuable insights into the true worth of an investment.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stocks"><a class="header" href="#stocks">Stocks</a></h1>
<h2 id="key-financial-ratios"><a class="header" href="#key-financial-ratios">Key Financial Ratios</a></h2>
<h3 id="price-to-earnings-ratio-pe"><a class="header" href="#price-to-earnings-ratio-pe">Price to Earnings Ratio (P/E)</a></h3>
<p>The Price to Earnings Ratio (P/E) is a fundamental valuation tool that compares a company's current share price to its earnings per share (EPS). It is expressed as:</p>
<p>$$
P/E = \frac{Price\ per\ Share}{Earnings\ per\ Share}
$$</p>
<p>A high P/E ratio might suggest that a stock is overvalued or that investors anticipate significant growth. Conversely, a low P/E ratio could indicate undervaluation or potential challenges faced by the company.</p>
<h3 id="price-to-book-ratio-pb"><a class="header" href="#price-to-book-ratio-pb">Price to Book Ratio (P/B)</a></h3>
<p>The Price to Book Ratio (P/B) evaluates a company's market value against its book value. It is determined by:</p>
<p>$$
P/B = \frac{Market\ Price\ per\ Share}{Book\ Value\ per\ Share}
$$</p>
<p>The book value represents the net asset value, calculated as total assets minus intangible assets and liabilities. A lower P/B ratio may signal undervaluation, while a higher ratio could imply overvaluation.</p>
<h3 id="debt-to-equity-ratio-de"><a class="header" href="#debt-to-equity-ratio-de">Debt to Equity Ratio (D/E)</a></h3>
<p>The Debt to Equity Ratio (D/E) assesses a company's financial leverage by comparing its total liabilities to shareholder equity. It is calculated as:</p>
<p>$$
D/E = \frac{Total\ Liabilities}{Shareholder\ Equity}
$$</p>
<p>A higher D/E ratio indicates greater reliance on debt for financing, which can be risky if not managed well. A lower ratio suggests a more conservative financial strategy.</p>
<h3 id="return-on-equity-roe"><a class="header" href="#return-on-equity-roe">Return on Equity (ROE)</a></h3>
<p>Return on Equity (ROE) measures a company's profitability by comparing net income to shareholder equity. It is expressed as:</p>
<p>$$
ROE = \frac{Net\ Income}{Shareholder\ Equity}
$$</p>
<p>A higher ROE signifies effective profit generation from equity investments, serving as a crucial indicator of financial performance and efficiency.</p>
<h3 id="current-ratio"><a class="header" href="#current-ratio">Current Ratio</a></h3>
<p>The Current Ratio is a liquidity metric that evaluates a company's ability to meet short-term obligations with its current assets. It is calculated as:</p>
<p>$$
Current\ Ratio = \frac{Current\ Assets}{Current\ Liabilities}
$$</p>
<p>A higher current ratio suggests strong short-term financial health, while a lower ratio may indicate potential liquidity challenges.</p>
<h3 id="quick-ratio"><a class="header" href="#quick-ratio">Quick Ratio</a></h3>
<p>The Quick Ratio, or acid-test ratio, is a stringent liquidity measure that excludes inventory from current assets. It is calculated as:</p>
<p>$$
Quick\ Ratio = \frac{Current\ Assets - Inventory}{Current\ Liabilities}
$$</p>
<p>A higher quick ratio indicates the ability to meet short-term obligations without relying on inventory sales.</p>
<h3 id="dividend-yield"><a class="header" href="#dividend-yield">Dividend Yield</a></h3>
<p>The Dividend Yield reflects the annual dividend income relative to the market price per share. It is calculated as:</p>
<p>$$
Dividend\ Yield = \frac{Annual\ Dividends\ per\ Share}{Price\ per\ Share}
$$</p>
<p>A higher dividend yield suggests a company is returning more income to shareholders, appealing to income-focused investors.</p>
<h3 id="earnings-per-share-eps"><a class="header" href="#earnings-per-share-eps">Earnings Per Share (EPS)</a></h3>
<p>Earnings Per Share (EPS) is a critical profitability metric indicating the profit generated per share of stock. It is calculated as:</p>
<p>$$
EPS = \frac{Net\ Income - Dividends\ on\ Preferred\ Stock}{Average\ Outstanding\ Shares}
$$</p>
<p>A higher EPS reflects better profitability and is a key factor for investors assessing financial health.</p>
<h3 id="price-to-sales-ratio-ps"><a class="header" href="#price-to-sales-ratio-ps">Price to Sales Ratio (P/S)</a></h3>
<p>The Price to Sales Ratio (P/S) compares a company's market capitalization to its total sales or revenue. It is expressed as:</p>
<p>$$
P/S = \frac{Market\ Capitalization}{Total\ Sales}
$$</p>
<p>A lower P/S ratio may indicate undervaluation, while a higher ratio could suggest overvaluation, especially useful for companies with minimal earnings.</p>
<h3 id="conclusion-27"><a class="header" href="#conclusion-27">Conclusion</a></h3>
<p>Analyzing these financial ratios offers valuable insights into a company's valuation, financial health, and performance. Investors leverage these metrics to make informed decisions and compare companies within the same industry.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="options"><a class="header" href="#options">Options</a></h1>
<h2 id="black-scholes-model"><a class="header" href="#black-scholes-model">Black-Scholes Model</a></h2>
<p>The Black-Scholes model is a renowned mathematical model used to price options and other financial derivatives. Developed by Fischer Black and Myron Scholes, the model was first published in 1973. It assumes that the underlying asset's price follows a geometric Brownian motion and uses a no-arbitrage approach to derive the option's price.</p>
<h2 id="greeks"><a class="header" href="#greeks">Greeks</a></h2>
<p>The Greeks are a set of mathematical tools used in the Black-Scholes model to measure the sensitivity of an option's price to changes in various parameters. The most common Greeks include delta, gamma, theta, vega, and rho.</p>
<h3 id="detailed-explanation-of-greeks"><a class="header" href="#detailed-explanation-of-greeks">Detailed Explanation of Greeks</a></h3>
<p>The Greeks are essential tools for options traders, providing insights into how different factors impact the price of an option. Here are the most common Greeks and their significance:</p>
<ol>
<li>
<p><strong>Delta (Δ)</strong>: Delta measures the sensitivity of an option's price to changes in the price of the underlying asset. It represents the rate of change of the option's price with respect to a $1 change in the underlying asset's price. For call options, delta ranges from 0 to 1, while for put options, delta ranges from -1 to 0. A higher delta indicates greater sensitivity to price changes in the underlying asset.</p>
</li>
<li>
<p><strong>Gamma (Γ)</strong>: Gamma measures the rate of change of delta with respect to changes in the underlying asset's price. It indicates how much the delta of an option will change for a $1 change in the underlying asset's price. Gamma is highest for at-the-money options and decreases as the option moves further in-the-money or out-of-the-money. High gamma values indicate that delta is more sensitive to price changes in the underlying asset.</p>
</li>
<li>
<p><strong>Theta (Θ)</strong>: Theta measures the sensitivity of an option's price to the passage of time, also known as time decay. It represents the rate at which the option's price decreases as time to expiration approaches. Theta is typically negative for both call and put options, as the value of options erodes over time. Options with shorter time to expiration have higher theta values, indicating faster time decay.</p>
</li>
<li>
<p><strong>Vega (ν)</strong>: Vega measures the sensitivity of an option's price to changes in the volatility of the underlying asset. It represents the amount by which the option's price will change for a 1% change in the underlying asset's volatility. Higher vega values indicate that the option's price is more sensitive to changes in volatility. Vega is highest for at-the-money options and decreases as the option moves further in-the-money or out-of-the-money.</p>
</li>
<li>
<p><strong>Rho (ρ)</strong>: Rho measures the sensitivity of an option's price to changes in interest rates. It represents the amount by which the option's price will change for a 1% change in the risk-free interest rate. For call options, rho is positive, indicating that an increase in interest rates will increase the option's price. For put options, rho is negative, indicating that an increase in interest rates will decrease the option's price.</p>
</li>
</ol>
<h3 id="practical-applications-of-greeks"><a class="header" href="#practical-applications-of-greeks">Practical Applications of Greeks</a></h3>
<p>Understanding the Greeks is crucial for options traders, as they help in managing risk and making informed trading decisions. Here are some practical applications:</p>
<ul>
<li><strong>Hedging</strong>: Traders use delta to hedge their positions by ensuring that the overall delta of their portfolio is neutral, reducing exposure to price movements in the underlying asset.</li>
<li><strong>Adjusting Positions</strong>: Gamma helps traders understand how their delta will change with price movements, allowing them to adjust their positions accordingly.</li>
<li><strong>Time Decay Management</strong>: Theta is important for traders who sell options, as it helps them understand how the value of their options will erode over time.</li>
<li><strong>Volatility Trading</strong>: Vega is crucial for traders who speculate on changes in volatility, as it helps them gauge the impact of volatility changes on their options' prices.</li>
<li><strong>Interest Rate Impact</strong>: Rho is useful for understanding how changes in interest rates will affect the value of options, particularly for long-term options.</li>
</ul>
<p>By mastering the Greeks, options traders can better navigate the complexities of the options market and enhance their trading strategies.</p>
<h2 id="option-strategies"><a class="header" href="#option-strategies">Option Strategies</a></h2>
<p>Option strategies are various combinations of buying and selling options to achieve specific financial goals, such as hedging risk, generating income, or speculating on price movements. Here are some common option strategies:</p>
<h3 id="1-covered-call"><a class="header" href="#1-covered-call">1. Covered Call</a></h3>
<p>A covered call involves holding a long position in an underlying asset and selling a call option on that same asset. This strategy generates income from the option premium but limits the upside potential if the asset's price rises significantly.</p>
<h3 id="2-protective-put"><a class="header" href="#2-protective-put">2. Protective Put</a></h3>
<p>A protective put involves holding a long position in an underlying asset and buying a put option on that same asset. This strategy provides downside protection, as the put option gains value if the asset's price falls.</p>
<h3 id="3-straddle"><a class="header" href="#3-straddle">3. Straddle</a></h3>
<p>A straddle involves buying both a call option and a put option with the same strike price and expiration date. This strategy profits from significant price movements in either direction, making it suitable for volatile markets.</p>
<h3 id="4-strangle"><a class="header" href="#4-strangle">4. Strangle</a></h3>
<p>A strangle involves buying a call option and a put option with different strike prices but the same expiration date. This strategy is similar to a straddle but requires a larger price movement to be profitable.</p>
<h3 id="5-bull-call-spread"><a class="header" href="#5-bull-call-spread">5. Bull Call Spread</a></h3>
<p>A bull call spread involves buying a call option with a lower strike price and selling a call option with a higher strike price. This strategy profits from a moderate rise in the underlying asset's price while limiting potential losses.</p>
<h3 id="6-bear-put-spread"><a class="header" href="#6-bear-put-spread">6. Bear Put Spread</a></h3>
<p>A bear put spread involves buying a put option with a higher strike price and selling a put option with a lower strike price. This strategy profits from a moderate decline in the underlying asset's price while limiting potential losses.</p>
<h3 id="7-iron-condor"><a class="header" href="#7-iron-condor">7. Iron Condor</a></h3>
<p>An iron condor involves selling an out-of-the-money call option and an out-of-the-money put option while simultaneously buying a further out-of-the-money call option and put option. This strategy profits from low volatility and a narrow price range for the underlying asset.</p>
<h3 id="8-butterfly-spread"><a class="header" href="#8-butterfly-spread">8. Butterfly Spread</a></h3>
<p>A butterfly spread involves buying a call option (or put option) with a lower strike price, selling two call options (or put options) with a middle strike price, and buying a call option (or put option) with a higher strike price. This strategy profits from low volatility and a stable price for the underlying asset.</p>
<h3 id="9-calendar-spread"><a class="header" href="#9-calendar-spread">9. Calendar Spread</a></h3>
<p>A calendar spread involves buying and selling options with the same strike price but different expiration dates. This strategy profits from changes in volatility and the passage of time.</p>
<h3 id="10-collar"><a class="header" href="#10-collar">10. Collar</a></h3>
<p>A collar involves holding a long position in an underlying asset, buying a protective put option, and selling a covered call option. This strategy provides downside protection while limiting upside potential.</p>
<p>Each of these strategies has its own risk and reward profile, making them suitable for different market conditions and investment goals. Understanding and selecting the appropriate option strategy can help investors manage risk and enhance returns.</p>
<h3 id="11-long-call"><a class="header" href="#11-long-call">11. Long Call</a></h3>
<p>A long call involves buying a call option with the expectation that the underlying asset's price will rise above the strike price before the option expires. This strategy offers unlimited profit potential with limited risk, as the maximum loss is the premium paid for the option.</p>
<h3 id="12-long-put"><a class="header" href="#12-long-put">12. Long Put</a></h3>
<p>A long put involves buying a put option with the expectation that the underlying asset's price will fall below the strike price before the option expires. This strategy offers significant profit potential with limited risk, as the maximum loss is the premium paid for the option.</p>
<h3 id="13-short-call"><a class="header" href="#13-short-call">13. Short Call</a></h3>
<p>A short call involves selling a call option without owning the underlying asset. This strategy generates income from the option premium but carries unlimited risk if the asset's price rises significantly.</p>
<h3 id="14-short-put"><a class="header" href="#14-short-put">14. Short Put</a></h3>
<p>A short put involves selling a put option with the expectation that the underlying asset's price will remain above the strike price. This strategy generates income from the option premium but carries significant risk if the asset's price falls below the strike price.</p>
<h3 id="15-diagonal-spread"><a class="header" href="#15-diagonal-spread">15. Diagonal Spread</a></h3>
<p>A diagonal spread involves buying and selling options with different strike prices and expiration dates. This strategy combines elements of both calendar and vertical spreads, allowing traders to profit from changes in volatility and price movements.</p>
<h3 id="16-ratio-spread"><a class="header" href="#16-ratio-spread">16. Ratio Spread</a></h3>
<p>A ratio spread involves buying a certain number of options and selling a different number of options with the same expiration date but different strike prices. This strategy can be used to profit from moderate price movements while managing risk.</p>
<h3 id="17-box-spread"><a class="header" href="#17-box-spread">17. Box Spread</a></h3>
<p>A box spread involves combining a bull call spread and a bear put spread with the same strike prices and expiration dates. This strategy is used to lock in a risk-free profit when there is a discrepancy in option pricing.</p>
<h3 id="18-synthetic-long-stock"><a class="header" href="#18-synthetic-long-stock">18. Synthetic Long Stock</a></h3>
<p>A synthetic long stock involves buying a call option and selling a put option with the same strike price and expiration date. This strategy mimics the payoff of holding the underlying asset without actually owning it.</p>
<h3 id="19-synthetic-short-stock"><a class="header" href="#19-synthetic-short-stock">19. Synthetic Short Stock</a></h3>
<p>A synthetic short stock involves selling a call option and buying a put option with the same strike price and expiration date. This strategy mimics the payoff of shorting the underlying asset without actually shorting it.</p>
<h3 id="20-iron-butterfly"><a class="header" href="#20-iron-butterfly">20. Iron Butterfly</a></h3>
<p>An iron butterfly involves selling an at-the-money call option and an at-the-money put option while simultaneously buying an out-of-the-money call option and an out-of-the-money put option. This strategy profits from low volatility and a stable price for the underlying asset.</p>
<p>By understanding and utilizing these additional option strategies, traders can further diversify their approaches to managing risk and capitalizing on market opportunities. Each strategy has its own unique characteristics and potential benefits, making it essential for traders to carefully consider their objectives and market conditions when selecting an appropriate strategy.</p>
<h2 id="how-to-trade-options"><a class="header" href="#how-to-trade-options">How to Trade Options</a></h2>
<p>Trading options involves several steps, from understanding the market to executing trades. Here is a step-by-step guide on how to trade options:</p>
<h3 id="step-1-understand-the-basics"><a class="header" href="#step-1-understand-the-basics">Step 1: Understand the Basics</a></h3>
<p>Before trading options, it's essential to understand the basics of how options contracts work. This includes knowing the key terms, such as strike price, expiration date, premium, and the difference between call and put options. Familiarize yourself with the different types of options strategies available, such as covered calls, protective puts, and spreads.</p>
<h3 id="step-2-choose-an-options-broker"><a class="header" href="#step-2-choose-an-options-broker">Step 2: Choose an Options Broker</a></h3>
<p>To trade options, you need to open an account with an options broker. Look for a broker that offers a user-friendly trading platform, competitive fees, and reliable customer support. Ensure the broker is regulated and has a good reputation in the industry.</p>
<h3 id="step-3-develop-a-trading-plan"><a class="header" href="#step-3-develop-a-trading-plan">Step 3: Develop a Trading Plan</a></h3>
<p>A trading plan is crucial for success in options trading. Your plan should outline your trading goals, risk tolerance, and strategies. Decide on the types of options contracts you want to trade and the timeframes you will focus on. Set clear entry and exit points, as well as stop-loss and take-profit levels.</p>
<h3 id="step-4-analyze-the-market"><a class="header" href="#step-4-analyze-the-market">Step 4: Analyze the Market</a></h3>
<p>Conduct thorough market analysis to identify trading opportunities. Use technical analysis tools, such as charts, indicators, and patterns, to analyze price movements. Additionally, consider fundamental analysis by keeping track of economic news, reports, and events that may impact the options markets.</p>
<h3 id="step-5-place-your-trade"><a class="header" href="#step-5-place-your-trade">Step 5: Place Your Trade</a></h3>
<p>Once you have identified a trading opportunity, place your trade through your broker's trading platform. Specify the contract you want to trade, the number of contracts, and the order type (e.g., market order, limit order). Ensure you have sufficient margin in your account to cover the trade.</p>
<h3 id="step-6-monitor-and-manage-your-trade"><a class="header" href="#step-6-monitor-and-manage-your-trade">Step 6: Monitor and Manage Your Trade</a></h3>
<p>After placing your trade, continuously monitor the market and manage your position. Adjust your stop-loss and take-profit levels as needed to protect your profits and limit losses. Be prepared to exit the trade if the market moves against you or if your target is reached.</p>
<h3 id="step-7-review-and-learn"><a class="header" href="#step-7-review-and-learn">Step 7: Review and Learn</a></h3>
<p>After closing your trade, review the outcome and analyze your performance. Identify what worked well and what could be improved. Use this information to refine your trading plan and strategies for future trades.</p>
<h3 id="example-scenario-10"><a class="header" href="#example-scenario-10">Example Scenario</a></h3>
<p>Consider a trader who wants to trade call options on a tech stock. Here is how they might approach the trade:</p>
<ol>
<li><strong>Understand the Basics</strong>: The trader learns that a call option gives them the right to buy the stock at a specific price before the expiration date.</li>
<li><strong>Choose an Options Broker</strong>: The trader opens an account with a reputable broker that offers competitive fees and a robust trading platform.</li>
<li><strong>Develop a Trading Plan</strong>: The trader sets a goal to profit from short-term price movements in the tech stock and decides to use technical analysis for entry and exit points.</li>
<li><strong>Analyze the Market</strong>: The trader analyzes the stock's price charts and identifies a bullish trend supported by positive earnings reports.</li>
<li><strong>Place the Trade</strong>: The trader places a market order to buy call options with a strike price close to the current stock price.</li>
<li><strong>Monitor and Manage</strong>: The trader sets a stop-loss order below a recent support level and a take-profit order at a higher resistance level. They monitor the trade and adjust the orders as needed.</li>
<li><strong>Review and Learn</strong>: After closing the trade, the trader reviews the outcome and notes that the bullish trend continued, resulting in a profitable trade. They use this experience to refine their future trading strategies.</li>
</ol>
<h3 id="conclusion-28"><a class="header" href="#conclusion-28">Conclusion</a></h3>
<p>Trading options can be a rewarding endeavor, but it requires a solid understanding of the market, a well-developed trading plan, and disciplined execution. By following these steps and continuously learning from your experiences, you can improve your chances of success in the options markets.</p>
<h2 id="where-to-get-good-options-data"><a class="header" href="#where-to-get-good-options-data">Where to Get Good Options Data</a></h2>
<p>Access to reliable and accurate options data is crucial for making informed trading decisions. Here are some sources where you can get good options data:</p>
<ol>
<li>
<p><strong>Brokerage Platforms</strong>: Many brokerage platforms provide comprehensive options data, including real-time quotes, historical data, and analytical tools. Examples include TD Ameritrade, E*TRADE, and Interactive Brokers.</p>
</li>
<li>
<p><strong>Financial News Websites</strong>: Websites like Yahoo Finance, Google Finance, and Bloomberg offer options data along with news, analysis, and market insights.</p>
</li>
<li>
<p><strong>Market Data Providers</strong>: Companies like Cboe Global Markets, Nasdaq, and NYSE provide extensive options data, including real-time and historical data, market statistics, and analytics.</p>
</li>
<li>
<p><strong>Data Aggregators</strong>: Services like Options Data Warehouse and Quandl aggregate options data from multiple sources, providing a centralized platform for accessing comprehensive data sets.</p>
</li>
<li>
<p><strong>Specialized Tools</strong>: Tools like OptionVue, LiveVol, and ThinkOrSwim offer advanced options analysis and data visualization features, catering to both retail and professional traders.</p>
</li>
</ol>
<h2 id="brokers-with-automated-trading"><a class="header" href="#brokers-with-automated-trading">Brokers with Automated Trading</a></h2>
<p>Automated trading can help you execute trades more efficiently and take advantage of market opportunities in real-time. Here are some brokers that offer automated trading capabilities:</p>
<ol>
<li>
<p><strong>Interactive Brokers</strong>: Interactive Brokers provides a robust API that allows traders to automate their trading strategies using various programming languages, including Python, Java, and C++.</p>
</li>
<li>
<p><strong>TD Ameritrade</strong>: TD Ameritrade's thinkorswim platform offers automated trading through its thinkScript language, enabling traders to create custom scripts and strategies.</p>
</li>
<li>
<p><strong>E*TRADE</strong>: E*TRADE offers automated trading through its API, allowing traders to develop and implement automated trading strategies using their preferred programming languages.</p>
</li>
<li>
<p><strong>TradeStation</strong>: TradeStation provides a powerful platform for automated trading, with EasyLanguage for strategy development and integration with various third-party tools and APIs.</p>
</li>
<li>
<p><strong>Alpaca</strong>: Alpaca is a commission-free broker that offers a user-friendly API for automated trading, making it accessible for both beginner and experienced traders.</p>
</li>
<li>
<p><strong>QuantConnect</strong>: QuantConnect is a cloud-based algorithmic trading platform that integrates with multiple brokers, including Interactive Brokers and Tradier, allowing traders to develop and deploy automated trading strategies.</p>
</li>
</ol>
<p>By leveraging these sources for options data and brokers with automated trading capabilities, you can enhance your trading strategies and improve your overall trading performance.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="futures"><a class="header" href="#futures">Futures</a></h1>
<h2 id="what-are-futures"><a class="header" href="#what-are-futures">What are Futures?</a></h2>
<p>Futures are financial contracts obligating the buyer to purchase an asset or the seller to sell an asset at a predetermined future date and price. These contracts are standardized and traded on futures exchanges. Futures can be used for hedging or speculative purposes.</p>
<h3 id="key-features-of-futures"><a class="header" href="#key-features-of-futures">Key Features of Futures</a></h3>
<ol>
<li><strong>Standardization</strong>: Futures contracts are standardized in terms of quantity, quality, and delivery time, making them easily tradable on exchanges.</li>
<li><strong>Leverage</strong>: Futures allow traders to control large positions with a relatively small amount of capital, providing the potential for significant gains or losses.</li>
<li><strong>Margin Requirements</strong>: Traders are required to deposit a margin, which is a fraction of the contract's value, to enter into a futures position. This margin acts as a security deposit to cover potential losses.</li>
<li><strong>Settlement</strong>: Futures contracts can be settled either by physical delivery of the underlying asset or by cash settlement, depending on the terms of the contract.</li>
</ol>
<h3 id="types-of-futures-contracts"><a class="header" href="#types-of-futures-contracts">Types of Futures Contracts</a></h3>
<ol>
<li><strong>Commodity Futures</strong>: These contracts involve physical commodities such as oil, gold, wheat, and corn. They are commonly used by producers and consumers to hedge against price fluctuations.</li>
<li><strong>Financial Futures</strong>: These contracts involve financial instruments such as currencies, interest rates, and stock indices. They are often used by investors and institutions to manage financial risk.</li>
<li><strong>Index Futures</strong>: These contracts are based on stock market indices like the S&amp;P 500 or the Dow Jones Industrial Average. They allow traders to speculate on the overall direction of the market.</li>
<li><strong>Currency Futures</strong>: These contracts involve the exchange of one currency for another at a future date. They are used by businesses and investors to hedge against currency risk.</li>
</ol>
<h3 id="example-scenario-11"><a class="header" href="#example-scenario-11">Example Scenario</a></h3>
<p>Consider a wheat farmer who wants to lock in a price for their crop to protect against the risk of falling prices. The farmer can sell wheat futures contracts, agreeing to deliver a specified quantity of wheat at a predetermined price on a future date. If the market price of wheat falls, the farmer is protected because they have locked in a higher price through the futures contract.</p>
<h3 id="advantages-of-futures"><a class="header" href="#advantages-of-futures">Advantages of Futures</a></h3>
<ol>
<li><strong>Risk Management</strong>: Futures allow businesses and investors to hedge against price fluctuations, reducing uncertainty and managing risk.</li>
<li><strong>Liquidity</strong>: Futures markets are highly liquid, allowing traders to enter and exit positions easily.</li>
<li><strong>Price Discovery</strong>: Futures markets provide valuable information about future price expectations, helping businesses and investors make informed decisions.</li>
<li><strong>Diversification</strong>: Futures offer opportunities to diversify investment portfolios by gaining exposure to different asset classes.</li>
</ol>
<h3 id="conclusion-29"><a class="header" href="#conclusion-29">Conclusion</a></h3>
<p>Futures are powerful financial instruments that provide opportunities for hedging and speculation. By understanding the key features, types, and advantages of futures, traders and investors can effectively manage risk and capitalize on market opportunities. Whether used for hedging against price fluctuations or speculating on market movements, futures play a crucial role in the global financial markets.</p>
<h2 id="difference-between-futures-and-options"><a class="header" href="#difference-between-futures-and-options">Difference Between Futures and Options</a></h2>
<p>Futures and options are both financial derivatives that allow traders to speculate on the price movements of underlying assets. However, there are key differences between the two:</p>
<h3 id="futures-1"><a class="header" href="#futures-1">Futures</a></h3>
<ol>
<li><strong>Obligation</strong>: Futures contracts obligate the buyer to purchase and the seller to sell the underlying asset at a predetermined price and date.</li>
<li><strong>Standardization</strong>: Futures contracts are standardized in terms of quantity, quality, and delivery time, making them easily tradable on exchanges.</li>
<li><strong>Leverage</strong>: Futures allow traders to control large positions with a relatively small amount of capital, providing the potential for significant gains or losses.</li>
<li><strong>Margin Requirements</strong>: Traders are required to deposit a margin, which is a fraction of the contract's value, to enter into a futures position. This margin acts as a security deposit to cover potential losses.</li>
<li><strong>Settlement</strong>: Futures contracts can be settled either by physical delivery of the underlying asset or by cash settlement, depending on the terms of the contract.</li>
</ol>
<h3 id="options-1"><a class="header" href="#options-1">Options</a></h3>
<ol>
<li><strong>Right, Not Obligation</strong>: Options contracts give the buyer the right, but not the obligation, to buy (call option) or sell (put option) the underlying asset at a predetermined price and date.</li>
<li><strong>Premium</strong>: The buyer of an options contract pays a premium to the seller for the right to exercise the option. This premium is the maximum loss the buyer can incur.</li>
<li><strong>Leverage</strong>: Options also provide leverage, allowing traders to control large positions with a relatively small amount of capital. However, the potential loss for the buyer is limited to the premium paid.</li>
<li><strong>Types of Options</strong>: There are two main types of options: call options and put options. Call options give the buyer the right to buy the underlying asset, while put options give the buyer the right to sell the underlying asset.</li>
<li><strong>Expiration</strong>: Options contracts have an expiration date, after which the option becomes worthless if not exercised.</li>
</ol>
<h3 id="key-differences-1"><a class="header" href="#key-differences-1">Key Differences</a></h3>
<ol>
<li><strong>Obligation vs. Right</strong>: Futures contracts create an obligation for both parties, while options contracts provide the buyer with a right without obligation.</li>
<li><strong>Risk and Reward</strong>: In futures, both parties face unlimited risk and reward potential. In options, the buyer's risk is limited to the premium paid, while the seller faces unlimited risk.</li>
<li><strong>Cost</strong>: Futures require margin deposits, while options require the payment of a premium.</li>
<li><strong>Flexibility</strong>: Options offer more flexibility due to the right to exercise, while futures are more rigid with mandatory settlement.</li>
</ol>
<h3 id="example-scenario-12"><a class="header" href="#example-scenario-12">Example Scenario</a></h3>
<p>Consider an investor who wants to speculate on the price of gold. They can choose between futures and options:</p>
<ul>
<li><strong>Futures</strong>: The investor buys a gold futures contract, obligating them to purchase gold at a specified price on a future date. If the price of gold rises, the investor profits. If the price falls, the investor incurs a loss.</li>
<li><strong>Options</strong>: The investor buys a call option on gold, giving them the right to buy gold at a specified price on or before the expiration date. If the price of gold rises, the investor can exercise the option and profit. If the price falls, the investor's loss is limited to the premium paid for the option.</li>
</ul>
<h3 id="conclusion-30"><a class="header" href="#conclusion-30">Conclusion</a></h3>
<p>Both futures and options are valuable tools for traders and investors to manage risk and speculate on price movements. Understanding the differences between these derivatives is crucial for making informed trading decisions. Futures provide an obligation to buy or sell, while options offer the right without obligation, each with its own risk and reward profile.</p>
<h2 id="how-to-trade-futures"><a class="header" href="#how-to-trade-futures">How to Trade Futures</a></h2>
<p>Trading futures involves several steps, from understanding the market to executing trades. Here is a step-by-step guide on how to trade futures:</p>
<h3 id="step-1-understand-the-basics-1"><a class="header" href="#step-1-understand-the-basics-1">Step 1: Understand the Basics</a></h3>
<p>Before trading futures, it's essential to understand the basics of how futures contracts work. This includes knowing the key terms, such as contract size, expiration date, and margin requirements. Familiarize yourself with the different types of futures contracts available, such as commodities, financials, and indices.</p>
<h3 id="step-2-choose-a-futures-broker"><a class="header" href="#step-2-choose-a-futures-broker">Step 2: Choose a Futures Broker</a></h3>
<p>To trade futures, you need to open an account with a futures broker. Look for a broker that offers a user-friendly trading platform, competitive fees, and reliable customer support. Ensure the broker is regulated and has a good reputation in the industry.</p>
<h3 id="step-3-develop-a-trading-plan-1"><a class="header" href="#step-3-develop-a-trading-plan-1">Step 3: Develop a Trading Plan</a></h3>
<p>A trading plan is crucial for success in futures trading. Your plan should outline your trading goals, risk tolerance, and strategies. Decide on the types of futures contracts you want to trade and the timeframes you will focus on. Set clear entry and exit points, as well as stop-loss and take-profit levels.</p>
<h3 id="step-4-analyze-the-market-1"><a class="header" href="#step-4-analyze-the-market-1">Step 4: Analyze the Market</a></h3>
<p>Conduct thorough market analysis to identify trading opportunities. Use technical analysis tools, such as charts, indicators, and patterns, to analyze price movements. Additionally, consider fundamental analysis by keeping track of economic news, reports, and events that may impact the futures markets.</p>
<h3 id="step-5-place-your-trade-1"><a class="header" href="#step-5-place-your-trade-1">Step 5: Place Your Trade</a></h3>
<p>Once you have identified a trading opportunity, place your trade through your broker's trading platform. Specify the contract you want to trade, the number of contracts, and the order type (e.g., market order, limit order). Ensure you have sufficient margin in your account to cover the trade.</p>
<h3 id="step-6-monitor-and-manage-your-trade-1"><a class="header" href="#step-6-monitor-and-manage-your-trade-1">Step 6: Monitor and Manage Your Trade</a></h3>
<p>After placing your trade, continuously monitor the market and manage your position. Adjust your stop-loss and take-profit levels as needed to protect your profits and limit losses. Be prepared to exit the trade if the market moves against you or if your target is reached.</p>
<h3 id="step-7-review-and-learn-1"><a class="header" href="#step-7-review-and-learn-1">Step 7: Review and Learn</a></h3>
<p>After closing your trade, review the outcome and analyze your performance. Identify what worked well and what could be improved. Use this information to refine your trading plan and strategies for future trades.</p>
<h3 id="example-scenario-13"><a class="header" href="#example-scenario-13">Example Scenario</a></h3>
<p>Consider a trader who wants to trade crude oil futures. Here is how they might approach the trade:</p>
<ol>
<li><strong>Understand the Basics</strong>: The trader learns that a crude oil futures contract represents 1,000 barrels of oil and has specific expiration dates.</li>
<li><strong>Choose a Futures Broker</strong>: The trader opens an account with a reputable broker that offers competitive fees and a robust trading platform.</li>
<li><strong>Develop a Trading Plan</strong>: The trader sets a goal to profit from short-term price movements in crude oil and decides to use technical analysis for entry and exit points.</li>
<li><strong>Analyze the Market</strong>: The trader analyzes crude oil price charts and identifies a bullish trend supported by positive economic news.</li>
<li><strong>Place the Trade</strong>: The trader places a market order to buy one crude oil futures contract at the current price.</li>
<li><strong>Monitor and Manage</strong>: The trader sets a stop-loss order below a recent support level and a take-profit order at a higher resistance level. They monitor the trade and adjust the orders as needed.</li>
<li><strong>Review and Learn</strong>: After closing the trade, the trader reviews the outcome and notes that the bullish trend continued, resulting in a profitable trade. They use this experience to refine their future trading strategies.</li>
</ol>
<h3 id="conclusion-31"><a class="header" href="#conclusion-31">Conclusion</a></h3>
<p>Trading futures can be a rewarding endeavor, but it requires a solid understanding of the market, a well-developed trading plan, and disciplined execution. By following these steps and continuously learning from your experiences, you can improve your chances of success in the futures markets.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="crypto"><a class="header" href="#crypto">Crypto</a></h1>
<h2 id="proof-of-work"><a class="header" href="#proof-of-work">Proof of Work</a></h2>
<p>Proof of Work (PoW) is a consensus mechanism used in blockchain networks to validate transactions and secure the network. It requires participants, known as miners, to solve complex mathematical puzzles to add new blocks to the blockchain. The first miner to solve the puzzle gets the right to add the block and is rewarded with cryptocurrency.</p>
<h3 id="how-proof-of-work-works"><a class="header" href="#how-proof-of-work-works">How Proof of Work Works</a></h3>
<ol>
<li><strong>Transaction Collection</strong>: Miners collect and verify transactions from the network, grouping them into a block.</li>
<li><strong>Puzzle Solving</strong>: Miners compete to solve a cryptographic puzzle, which involves finding a nonce (a random number) that, when hashed with the block's data, produces a hash that meets the network's difficulty target.</li>
<li><strong>Block Validation</strong>: The first miner to solve the puzzle broadcasts the solution to the network. Other miners validate the solution and the block.</li>
<li><strong>Block Addition</strong>: Once validated, the block is added to the blockchain, and the miner receives a reward, typically in the form of newly minted cryptocurrency and transaction fees.</li>
<li><strong>Difficulty Adjustment</strong>: The network periodically adjusts the difficulty of the puzzle to ensure a consistent block generation time, usually around 10 minutes for Bitcoin.</li>
</ol>
<h3 id="key-concepts-28"><a class="header" href="#key-concepts-28">Key Concepts</a></h3>
<ol>
<li><strong>Hash Function</strong>: A cryptographic function that converts input data into a fixed-size string of characters, which appears random. Bitcoin uses the SHA-256 hash function.</li>
<li><strong>Nonce</strong>: A random number that miners change to find a hash that meets the difficulty target.</li>
<li><strong>Difficulty Target</strong>: A value that determines how hard it is to find a valid hash. The lower the target, the more difficult the puzzle.</li>
<li><strong>Block Reward</strong>: The incentive miners receive for adding a new block to the blockchain. This reward decreases over time in events known as "halvings."</li>
</ol>
<h3 id="advantages-of-proof-of-work"><a class="header" href="#advantages-of-proof-of-work">Advantages of Proof of Work</a></h3>
<ol>
<li><strong>Security</strong>: PoW provides strong security by making it computationally expensive to alter the blockchain. An attacker would need more computational power than the rest of the network combined to succeed.</li>
<li><strong>Decentralization</strong>: PoW promotes decentralization by allowing anyone with the necessary hardware to participate in mining, reducing the risk of central control.</li>
<li><strong>Proven Track Record</strong>: PoW has been successfully used by Bitcoin and other cryptocurrencies for over a decade, demonstrating its effectiveness in securing blockchain networks.</li>
</ol>
<h3 id="disadvantages-of-proof-of-work"><a class="header" href="#disadvantages-of-proof-of-work">Disadvantages of Proof of Work</a></h3>
<ol>
<li><strong>Energy Consumption</strong>: PoW requires significant computational power, leading to high energy consumption and environmental concerns.</li>
<li><strong>Centralization Risk</strong>: Over time, mining can become concentrated in regions with cheap electricity or among entities with access to specialized hardware, potentially reducing decentralization.</li>
<li><strong>Scalability</strong>: PoW can limit the scalability of blockchain networks due to the time and resources required to solve puzzles and add new blocks.</li>
</ol>
<h3 id="conclusion-32"><a class="header" href="#conclusion-32">Conclusion</a></h3>
<p>Proof of Work is a foundational consensus mechanism in blockchain technology, providing security and decentralization through computational effort. While it has proven effective, its energy consumption and scalability challenges have led to the exploration of alternative mechanisms like Proof of Stake (PoS). Nonetheless, PoW remains a critical component of many blockchain networks, ensuring the integrity and trustworthiness of decentralized systems.</p>
<h2 id="proof-of-stake"><a class="header" href="#proof-of-stake">Proof of Stake</a></h2>
<p>Proof of Stake (PoS) is an alternative consensus mechanism to Proof of Work (PoW) used in blockchain networks to validate transactions and secure the network. Instead of relying on computational power to solve complex puzzles, PoS selects validators based on the number of coins they hold and are willing to "stake" as collateral.</p>
<h3 id="how-proof-of-stake-works"><a class="header" href="#how-proof-of-stake-works">How Proof of Stake Works</a></h3>
<ol>
<li><strong>Validator Selection</strong>: Validators are chosen to create new blocks and validate transactions based on the number of coins they hold and lock up as collateral. The more coins a validator stakes, the higher their chances of being selected.</li>
<li><strong>Block Creation</strong>: The selected validator creates a new block and adds it to the blockchain. This process is known as "forging" or "minting" rather than "mining."</li>
<li><strong>Transaction Validation</strong>: Other validators in the network verify the new block. If the block is valid, it is added to the blockchain, and the validator receives a reward.</li>
<li><strong>Slashing</strong>: If a validator is found to act maliciously or validate fraudulent transactions, a portion of their staked coins can be forfeited as a penalty. This mechanism is known as "slashing" and helps maintain network security and integrity.</li>
</ol>
<h3 id="key-concepts-29"><a class="header" href="#key-concepts-29">Key Concepts</a></h3>
<ol>
<li><strong>Staking</strong>: The process of locking up a certain amount of cryptocurrency to participate in the validation process. Validators are incentivized to act honestly to avoid losing their staked coins.</li>
<li><strong>Validator</strong>: A participant in the network who is responsible for creating new blocks and validating transactions. Validators are chosen based on the amount of cryptocurrency they stake.</li>
<li><strong>Slashing</strong>: A penalty mechanism that confiscates a portion of a validator's staked coins if they are found to act maliciously or validate fraudulent transactions.</li>
<li><strong>Delegated Proof of Stake (DPoS)</strong>: A variation of PoS where stakeholders vote for a small number of delegates to validate transactions and create new blocks on their behalf. This system aims to improve efficiency and scalability.</li>
</ol>
<h3 id="advantages-of-proof-of-stake"><a class="header" href="#advantages-of-proof-of-stake">Advantages of Proof of Stake</a></h3>
<ol>
<li><strong>Energy Efficiency</strong>: PoS is significantly more energy-efficient than PoW, as it does not require extensive computational power to validate transactions and create new blocks.</li>
<li><strong>Security</strong>: PoS provides strong security by aligning the interests of validators with the network. Validators are incentivized to act honestly to avoid losing their staked coins.</li>
<li><strong>Decentralization</strong>: PoS promotes decentralization by allowing a broader range of participants to become validators, as it does not require specialized hardware or significant energy consumption.</li>
<li><strong>Scalability</strong>: PoS can improve the scalability of blockchain networks by reducing the time and resources required to validate transactions and create new blocks.</li>
</ol>
<h3 id="disadvantages-of-proof-of-stake"><a class="header" href="#disadvantages-of-proof-of-stake">Disadvantages of Proof of Stake</a></h3>
<ol>
<li><strong>Wealth Concentration</strong>: PoS can lead to wealth concentration, as validators with more coins have a higher chance of being selected to create new blocks and earn rewards.</li>
<li><strong>Initial Distribution</strong>: The initial distribution of coins can impact the fairness and decentralization of the network, as early adopters or large holders may have more influence.</li>
<li><strong>Complexity</strong>: PoS mechanisms can be more complex to implement and understand compared to PoW, requiring careful design to ensure security and fairness.</li>
</ol>
<h3 id="conclusion-33"><a class="header" href="#conclusion-33">Conclusion</a></h3>
<p>Proof of Stake is a promising alternative to Proof of Work, offering significant improvements in energy efficiency, security, and scalability. By selecting validators based on the number of coins they stake, PoS aligns the interests of participants with the network's integrity. While it has its challenges, such as potential wealth concentration and complexity, PoS continues to gain traction as a viable consensus mechanism for blockchain networks, driving innovation and sustainability in the cryptocurrency space.</p>
<h2 id="solana"><a class="header" href="#solana">Solana</a></h2>
<h3 id="important-concepts-and-token-economics-of-solana"><a class="header" href="#important-concepts-and-token-economics-of-solana">Important Concepts and Token Economics of Solana</a></h3>
<p>Solana is a high-performance blockchain platform designed for decentralized applications and crypto-currencies. It aims to provide scalability without compromising decentralization and security. Here are some important concepts and token economics of Solana:</p>
<h3 id="important-concepts"><a class="header" href="#important-concepts">Important Concepts</a></h3>
<ol>
<li>
<p><strong>Proof of History (PoH)</strong>: Proof of History is a unique consensus mechanism used by Solana to timestamp transactions before they are included in the blockchain. PoH creates a historical record that proves that an event has occurred at a specific moment in time. This allows the network to order transactions and improve efficiency.</p>
</li>
<li>
<p><strong>Tower BFT</strong>: Tower Byzantine Fault Tolerance (BFT) is Solana's consensus algorithm that leverages PoH as a cryptographic clock to achieve consensus. Tower BFT reduces the communication overhead and latency, enabling faster transaction finality.</p>
</li>
<li>
<p><strong>Turbine</strong>: Turbine is Solana's block propagation protocol. It breaks data into smaller packets and transmits them across the network in a way that reduces bandwidth requirements and increases the speed of data transmission.</p>
</li>
<li>
<p><strong>Gulf Stream</strong>: Gulf Stream is Solana's mempool-less transaction forwarding protocol. It pushes transaction caching and forwarding to the edge of the network, allowing validators to execute transactions ahead of time, reducing confirmation times and improving network efficiency.</p>
</li>
<li>
<p><strong>Sealevel</strong>: Sealevel is Solana's parallel smart contract runtime. It allows multiple smart contracts to run in parallel, leveraging the multi-core processors in modern hardware to achieve high throughput.</p>
</li>
<li>
<p><strong>Pipelining</strong>: Pipelining is a process used by Solana to optimize the validation process. It involves a series of stages where different parts of transaction validation are handled by different hardware units, improving overall throughput.</p>
</li>
<li>
<p><strong>Cloudbreak</strong>: Cloudbreak is Solana's horizontally-scalable accounts database. It allows the network to handle a large number of accounts and transactions efficiently by distributing the data across multiple storage devices.</p>
</li>
<li>
<p><strong>Archivers</strong>: Archivers are nodes in the Solana network responsible for storing data. They offload the storage burden from validators, ensuring that the blockchain remains lightweight and efficient.</p>
</li>
</ol>
<h3 id="token-economics"><a class="header" href="#token-economics">Token Economics</a></h3>
<ol>
<li>
<p><strong>SOL Token</strong>: SOL is the native cryptocurrency of the Solana network. It is used to pay for transaction fees, participate in the network's consensus mechanism, and interact with smart contracts.</p>
</li>
<li>
<p><strong>Staking</strong>: SOL token holders can stake their tokens to become validators or delegate their tokens to other validators. Staking helps secure the network and participants earn rewards in the form of additional SOL tokens.</p>
</li>
<li>
<p><strong>Inflation</strong>: Solana has an inflationary supply model, where new SOL tokens are minted and distributed as staking rewards. The initial inflation rate is set at 8% per year and is designed to decrease over time, eventually stabilizing at around 1.5% per year.</p>
</li>
<li>
<p><strong>Transaction Fees</strong>: Transaction fees on the Solana network are paid in SOL tokens. These fees are relatively low compared to other blockchain networks, making Solana an attractive platform for high-frequency and micro-transactions.</p>
</li>
<li>
<p><strong>Burn Mechanism</strong>: A portion of the transaction fees collected on the Solana network is burned, reducing the total supply of SOL tokens over time. This deflationary mechanism helps counteract the inflationary supply model and can potentially increase the value of SOL tokens.</p>
</li>
<li>
<p><strong>Ecosystem Incentives</strong>: Solana has various incentive programs to encourage the development and growth of its ecosystem. These include grants, hackathons, and partnerships aimed at attracting developers, projects, and users to the platform.</p>
</li>
</ol>
<p>Solana's innovative technology and well-designed token economics make it a promising platform for scalable and efficient decentralized applications. Its focus on high throughput, low latency, and low transaction costs positions it as a strong contender in the blockchain space.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="databases--data-engineering"><a class="header" href="#databases--data-engineering">Databases &amp; Data Engineering</a></h1>
<p>Database systems and data engineering concepts for storing, querying, and managing data at scale.</p>
<h2 id="topics-covered"><a class="header" href="#topics-covered">Topics Covered</a></h2>
<ul>
<li><strong>SQL Fundamentals</strong>: Queries, joins, indexes, transactions</li>
<li><strong>NoSQL Databases</strong>: MongoDB, Redis, document stores</li>
<li><strong>Data Modeling</strong>: Schema design, normalization, relationships</li>
<li><strong>PostgreSQL</strong>: Advanced features, JSON support</li>
<li><strong>Caching</strong>: In-memory stores, cache invalidation strategies</li>
<li><strong>Data Pipelines</strong>: ETL, streaming, batch processing</li>
<li><strong>Database Optimization</strong>: Query optimization, indexing strategies</li>
</ul>
<h2 id="navigation"><a class="header" href="#navigation">Navigation</a></h2>
<p>Use the menu to explore each topic in depth.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sql-structured-query-language"><a class="header" href="#sql-structured-query-language">SQL (Structured Query Language)</a></h1>
<h2 id="overview-54"><a class="header" href="#overview-54">Overview</a></h2>
<p>SQL is the standard language for querying and managing relational databases. Used by PostgreSQL, MySQL, SQL Server, Oracle, and others.</p>
<h2 id="basic-queries"><a class="header" href="#basic-queries">Basic Queries</a></h2>
<h3 id="select"><a class="header" href="#select">SELECT</a></h3>
<pre><code class="language-sql">SELECT column1, column2 FROM table WHERE condition;
SELECT * FROM users WHERE age &gt; 18;
SELECT DISTINCT city FROM customers;
</code></pre>
<h3 id="insert"><a class="header" href="#insert">INSERT</a></h3>
<pre><code class="language-sql">INSERT INTO users (name, email) VALUES ('John', 'john@example.com');
INSERT INTO users VALUES (1, 'John', 'john@example.com');
</code></pre>
<h3 id="update"><a class="header" href="#update">UPDATE</a></h3>
<pre><code class="language-sql">UPDATE users SET age = 30 WHERE id = 1;
UPDATE products SET price = price * 1.1;
</code></pre>
<h3 id="delete"><a class="header" href="#delete">DELETE</a></h3>
<pre><code class="language-sql">DELETE FROM users WHERE id = 1;
DELETE FROM logs WHERE created_at &lt; '2023-01-01';
</code></pre>
<h2 id="joins"><a class="header" href="#joins">Joins</a></h2>
<pre><code class="language-sql">-- INNER JOIN: Only matching rows
SELECT u.name, o.order_id
FROM users u INNER JOIN orders o ON u.id = o.user_id;

-- LEFT JOIN: All from left table
SELECT u.name, o.order_id
FROM users u LEFT JOIN orders o ON u.id = o.user_id;

-- RIGHT JOIN: All from right table
SELECT u.name, o.order_id
FROM users u RIGHT JOIN orders o ON u.id = o.user_id;

-- FULL OUTER JOIN: All rows
SELECT u.name, o.order_id
FROM users u FULL OUTER JOIN orders o ON u.id = o.user_id;
</code></pre>
<h2 id="aggregation-1"><a class="header" href="#aggregation-1">Aggregation</a></h2>
<pre><code class="language-sql">SELECT COUNT(*) FROM users;
SELECT AVG(price) FROM products;
SELECT SUM(amount) FROM transactions WHERE status = 'completed';
SELECT MAX(salary) FROM employees;

-- GROUP BY
SELECT department, COUNT(*) FROM employees GROUP BY department;
SELECT category, AVG(price) FROM products GROUP BY category;

-- HAVING (filter groups)
SELECT department, AVG(salary)
FROM employees
GROUP BY department
HAVING AVG(salary) &gt; 50000;
</code></pre>
<h2 id="indexes"><a class="header" href="#indexes">Indexes</a></h2>
<pre><code class="language-sql">-- Create index for faster queries
CREATE INDEX idx_email ON users(email);
CREATE INDEX idx_user_date ON orders(user_id, created_at);

-- Drop index
DROP INDEX idx_email;
</code></pre>
<h2 id="transactions"><a class="header" href="#transactions">Transactions</a></h2>
<pre><code class="language-sql">BEGIN TRANSACTION;

UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;

COMMIT;  -- Save changes
-- ROLLBACK;  -- Undo changes
</code></pre>
<h2 id="window-functions"><a class="header" href="#window-functions">Window Functions</a></h2>
<pre><code class="language-sql">-- Rank rows
SELECT name, salary,
  RANK() OVER (ORDER BY salary DESC) as rank
FROM employees;

-- Running total
SELECT date, amount,
  SUM(amount) OVER (ORDER BY date) as running_total
FROM transactions;
</code></pre>
<h2 id="common-patterns-1"><a class="header" href="#common-patterns-1">Common Patterns</a></h2>
<h3 id="duplicate-finding"><a class="header" href="#duplicate-finding">Duplicate Finding</a></h3>
<pre><code class="language-sql">SELECT email, COUNT(*) FROM users GROUP BY email HAVING COUNT(*) &gt; 1;
</code></pre>
<h3 id="top-n-per-group"><a class="header" href="#top-n-per-group">Top N per Group</a></h3>
<pre><code class="language-sql">SELECT DISTINCT ON (department) name, salary, department
FROM employees ORDER BY department, salary DESC;
</code></pre>
<h3 id="data-validation"><a class="header" href="#data-validation">Data Validation</a></h3>
<pre><code class="language-sql">SELECT * FROM users WHERE email NOT LIKE '%@%.%';
</code></pre>
<h2 id="performance-tips"><a class="header" href="#performance-tips">Performance Tips</a></h2>
<ol>
<li><strong>Use indexes</strong> on frequently queried columns</li>
<li><strong>EXPLAIN</strong> query plans: <code>EXPLAIN SELECT ...</code></li>
<li>**Avoid SELECT *** - specify columns needed</li>
<li><strong>Use LIMIT</strong> for large result sets</li>
<li><strong>Batch operations</strong> instead of individual queries</li>
</ol>
<h2 id="acid-properties"><a class="header" href="#acid-properties">ACID Properties</a></h2>
<ul>
<li><strong>Atomicity</strong>: All or nothing</li>
<li><strong>Consistency</strong>: Valid state to valid state</li>
<li><strong>Isolation</strong>: Concurrent transactions independent</li>
<li><strong>Durability</strong>: Committed data survives failures</li>
</ul>
<h2 id="eli10-27"><a class="header" href="#eli10-27">ELI10</a></h2>
<p>SQL is like a filing system for data:</p>
<ul>
<li><strong>SELECT</strong>: "Show me these files"</li>
<li><strong>INSERT</strong>: "Add new file"</li>
<li><strong>UPDATE</strong>: "Modify existing file"</li>
<li><strong>DELETE</strong>: "Remove file"</li>
</ul>
<p>Joins = combining data from multiple filing cabinets!</p>
<h2 id="further-resources-33"><a class="header" href="#further-resources-33">Further Resources</a></h2>
<ul>
<li><a href="https://www.w3schools.com/sql/">SQL Tutorial</a></li>
<li><a href="https://www.postgresql.org/docs/">PostgreSQL Docs</a></li>
<li><a href="https://www.postgresql.org/docs/current/sql-explain.html">Explain Plans</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nosql-databases"><a class="header" href="#nosql-databases">NoSQL Databases</a></h1>
<h2 id="overview-55"><a class="header" href="#overview-55">Overview</a></h2>
<p>NoSQL databases store data in non-relational formats (documents, key-value, graph, etc.). Designed for scalability, flexibility, and high-performance.</p>
<h2 id="types-1"><a class="header" href="#types-1">Types</a></h2>
<h3 id="document-databases-mongodb"><a class="header" href="#document-databases-mongodb">Document Databases (MongoDB)</a></h3>
<pre><code class="language-javascript">// Insert
db.users.insertOne({ name: "John", age: 30, email: "john@example.com" });

// Find
db.users.findOne({ name: "John" });
db.users.find({ age: { $gt: 25 } });

// Update
db.users.updateOne({ _id: ObjectId("...") }, { $set: { age: 31 } });

// Delete
db.users.deleteOne({ name: "John" });

// Aggregation
db.users.aggregate([
  { $match: { age: { $gt: 25 } } },
  { $group: { _id: "$city", count: { $sum: 1 } } },
  { $sort: { count: -1 } }
]);
</code></pre>
<h3 id="key-value-stores-redis"><a class="header" href="#key-value-stores-redis">Key-Value Stores (Redis)</a></h3>
<pre><code class="language-bash"># Strings
SET key value
GET key
INCR counter

# Lists
LPUSH mylist "a" "b" "c"
LPOP mylist
LRANGE mylist 0 -1

# Sets
SADD myset "a" "b" "c"
SMEMBERS myset

# Hashes
HSET user:1 name "John" age 30
HGET user:1 name
HGETALL user:1

# Expiration
EXPIRE key 3600  # 1 hour TTL
</code></pre>
<h3 id="column-family-cassandra"><a class="header" href="#column-family-cassandra">Column-Family (Cassandra)</a></h3>
<pre><code class="language-sql">-- Wide, denormalized columns
CREATE TABLE users (
  user_id UUID PRIMARY KEY,
  name TEXT,
  email TEXT,
  created_at TIMESTAMP,
  metadata MAP&lt;TEXT, TEXT&gt;
);
</code></pre>
<h3 id="graph-databases-neo4j"><a class="header" href="#graph-databases-neo4j">Graph Databases (Neo4j)</a></h3>
<pre><code class="language-cypher">// Create
CREATE (n:Person {name: "John", age: 30})
CREATE (m:Company {name: "Acme"})
CREATE (n)-[:WORKS_AT]-&gt;(m)

// Query
MATCH (p:Person)-[:WORKS_AT]-&gt;(c:Company)
WHERE p.age &gt; 25
RETURN p.name, c.name

// Find friends
MATCH (p:Person {name: "John"})-[:FRIEND*1..2]-(friend)
RETURN friend.name
</code></pre>
<h2 id="cap-theorem"><a class="header" href="#cap-theorem">CAP Theorem</a></h2>
<p>Every distributed database trades off:</p>
<ul>
<li><strong>Consistency</strong>: All nodes see same data</li>
<li><strong>Availability</strong>: System always responsive</li>
<li><strong>Partition Tolerance</strong>: Survive network splits</li>
</ul>
<p><strong>You can have 2 of 3:</strong></p>
<ul>
<li><strong>CP</strong>: Strong consistency, unavailable during partitions (Spanner)</li>
<li><strong>AP</strong>: Always available, eventual consistency (Dynamo, Cassandra)</li>
<li><strong>CA</strong>: Consistent and available, can't handle partitions (traditional DB)</li>
</ul>
<h2 id="use-cases-2"><a class="header" href="#use-cases-2">Use Cases</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Database</th><th>Best For</th></tr></thead><tbody>
<tr><td><strong>MongoDB</strong></td><td>Flexible schema, documents</td></tr>
<tr><td><strong>Redis</strong></td><td>Caching, sessions, real-time</td></tr>
<tr><td><strong>Cassandra</strong></td><td>Time-series, massive scale</td></tr>
<tr><td><strong>Neo4j</strong></td><td>Graph queries, relationships</td></tr>
<tr><td><strong>Elasticsearch</strong></td><td>Full-text search, logs</td></tr>
</tbody></table>
</div>
<h2 id="data-modeling"><a class="header" href="#data-modeling">Data Modeling</a></h2>
<pre><code class="language-python"># Denormalization (NoSQL style)
# One document with all info
{
  "_id": "user_1",
  "name": "John",
  "orders": [
    { "id": "order_1", "amount": 100 },
    { "id": "order_2", "amount": 200 }
  ]
}

# vs SQL (normalization)
# users table + orders table + JOIN
</code></pre>
<h2 id="eli10-28"><a class="header" href="#eli10-28">ELI10</a></h2>
<p>NoSQL is like a flexible filing system:</p>
<ul>
<li><strong>Document DB</strong>: Store complete documents (like PDF files)</li>
<li><strong>Key-Value</strong>: Simple lookup (like phone book)</li>
<li><strong>Graph</strong>: Show relationships (like social network)</li>
<li><strong>Column</strong>: Organize by columns not rows (like spreadsheet)</li>
</ul>
<p>Trade flexibility and speed for less strict structure!</p>
<h2 id="further-resources-34"><a class="header" href="#further-resources-34">Further Resources</a></h2>
<ul>
<li><a href="https://docs.mongodb.com/">MongoDB Docs</a></li>
<li><a href="https://redis.io/commands/">Redis Commands</a></li>
<li><a href="https://neo4j.com/docs/">Neo4j Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="web-development"><a class="header" href="#web-development">Web Development</a></h1>
<p>Modern web development covering frontend, backend, APIs, and full-stack technologies.</p>
<h2 id="topics-covered-1"><a class="header" href="#topics-covered-1">Topics Covered</a></h2>
<ul>
<li><strong>Frontend</strong>: HTML, CSS, JavaScript fundamentals</li>
<li><strong>React</strong>: Components, hooks, state management</li>
<li><strong>Backend</strong>: REST APIs, Express.js, Node.js</li>
<li><strong>GraphQL</strong>: Query language, schema design</li>
<li><strong>Frontend Frameworks</strong>: Vue.js, Angular basics</li>
<li><strong>Authentication</strong>: JWT, OAuth, sessions</li>
<li><strong>Databases</strong>: Integration with web apps</li>
<li><strong>Deployment</strong>: Hosting, CI/CD for web</li>
</ul>
<h2 id="frontend-stack"><a class="header" href="#frontend-stack">Frontend Stack</a></h2>
<ul>
<li>HTML/CSS/JavaScript</li>
<li>React, Vue, or Angular</li>
<li>State management (Redux, Vuex)</li>
<li>Build tools (Webpack, Vite)</li>
</ul>
<h2 id="backend-stack"><a class="header" href="#backend-stack">Backend Stack</a></h2>
<ul>
<li>Node.js/Express or Python/Django</li>
<li>REST or GraphQL APIs</li>
<li>Database integration</li>
<li>Authentication &amp; authorization</li>
</ul>
<h2 id="full-stack"><a class="header" href="#full-stack">Full Stack</a></h2>
<p>Combining frontend and backend to build complete applications.</p>
<h2 id="navigation-1"><a class="header" href="#navigation-1">Navigation</a></h2>
<p>Explore each topic to build modern web applications.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rest-apis"><a class="header" href="#rest-apis">REST APIs</a></h1>
<h2 id="overview-56"><a class="header" href="#overview-56">Overview</a></h2>
<p>REST (Representational State Transfer) is an architectural style for building web services using HTTP.</p>
<h2 id="core-principles-1"><a class="header" href="#core-principles-1">Core Principles</a></h2>
<ol>
<li><strong>Client-Server</strong>: Separation of concerns</li>
<li><strong>Stateless</strong>: Each request contains all info</li>
<li><strong>Uniform Interface</strong>: Consistent API design</li>
<li><strong>Cacheable</strong>: Responses can be cached</li>
<li><strong>Layered</strong>: Client unaware of layers</li>
</ol>
<h2 id="http-methods-1"><a class="header" href="#http-methods-1">HTTP Methods</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Method</th><th>Purpose</th><th>Idempotent</th></tr></thead><tbody>
<tr><td><strong>GET</strong></td><td>Retrieve resource</td><td>✓</td></tr>
<tr><td><strong>POST</strong></td><td>Create resource</td><td>✗</td></tr>
<tr><td><strong>PUT</strong></td><td>Replace resource</td><td>✓</td></tr>
<tr><td><strong>PATCH</strong></td><td>Partial update</td><td>✗</td></tr>
<tr><td><strong>DELETE</strong></td><td>Remove resource</td><td>✓</td></tr>
</tbody></table>
</div>
<h2 id="status-codes-1"><a class="header" href="#status-codes-1">Status Codes</a></h2>
<ul>
<li><strong>2xx</strong>: Success (200 OK, 201 Created)</li>
<li><strong>3xx</strong>: Redirection (301, 304)</li>
<li><strong>4xx</strong>: Client error (400, 404, 401)</li>
<li><strong>5xx</strong>: Server error (500, 503)</li>
</ul>
<h2 id="resource-oriented-design"><a class="header" href="#resource-oriented-design">Resource-Oriented Design</a></h2>
<pre><code>✓ GET /users          - List users
✓ POST /users         - Create user
✓ GET /users/123      - Get user 123
✓ PUT /users/123      - Replace user 123
✓ PATCH /users/123    - Partial update
✓ DELETE /users/123   - Delete user 123

✗ GET /getUser?id=123 - Procedural (bad)
</code></pre>
<h2 id="requestresponse"><a class="header" href="#requestresponse">Request/Response</a></h2>
<pre><code class="language-python"># Request
GET /api/v1/users/123 HTTP/1.1
Host: api.example.com
Authorization: Bearer token
Content-Type: application/json

# Response
HTTP/1.1 200 OK
Content-Type: application/json

{
  "id": 123,
  "name": "John",
  "email": "john@example.com"
}
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<pre><code class="language-json">{
  "error": "Validation failed",
  "details": {
    "email": "Invalid email format"
  },
  "status": 400
}
</code></pre>
<h2 id="pagination"><a class="header" href="#pagination">Pagination</a></h2>
<pre><code>GET /users?page=2&amp;limit=20
GET /users?offset=40&amp;limit=20
GET /users?cursor=abc123
</code></pre>
<h2 id="versioning"><a class="header" href="#versioning">Versioning</a></h2>
<pre><code>/api/v1/users    (stable)
/api/v2/users    (new version)
/api/beta/users  (experimental)
</code></pre>
<h2 id="best-practices-40"><a class="header" href="#best-practices-40">Best Practices</a></h2>
<ol>
<li><strong>Use appropriate methods</strong> for operations</li>
<li><strong>Meaningful status codes</strong> for responses</li>
<li><strong>Consistent naming</strong> conventions</li>
<li><strong>Pagination</strong> for large datasets</li>
<li><strong>Rate limiting</strong> to protect API</li>
<li><strong>Authentication/Authorization</strong></li>
<li><strong>Documentation</strong> (Swagger/OpenAPI)</li>
</ol>
<h2 id="expressjs-example"><a class="header" href="#expressjs-example">Express.js Example</a></h2>
<pre><code class="language-javascript">const express = require('express');
const app = express();

// Get all users
app.get('/users', (req, res) =&gt; {
  res.json(users);
});

// Get user by ID
app.get('/users/:id', (req, res) =&gt; {
  const user = users.find(u =&gt; u.id == req.params.id);
  res.json(user);
});

// Create user
app.post('/users', (req, res) =&gt; {
  const user = req.body;
  users.push(user);
  res.status(201).json(user);
});

// Update user
app.patch('/users/:id', (req, res) =&gt; {
  const user = users.find(u =&gt; u.id == req.params.id);
  Object.assign(user, req.body);
  res.json(user);
});

// Delete user
app.delete('/users/:id', (req, res) =&gt; {
  users = users.filter(u =&gt; u.id != req.params.id);
  res.status(204).send();
});

app.listen(3000);
</code></pre>
<h2 id="testing-1"><a class="header" href="#testing-1">Testing</a></h2>
<pre><code class="language-bash"># Using curl
curl -X GET http://localhost:3000/users
curl -X POST http://localhost:3000/users -H "Content-Type: application/json" -d '{"name":"John"}'
</code></pre>
<h2 id="eli10-29"><a class="header" href="#eli10-29">ELI10</a></h2>
<p>REST API is like a restaurant menu:</p>
<ul>
<li><strong>GET</strong>: View menu/food</li>
<li><strong>POST</strong>: Place new order</li>
<li><strong>PUT</strong>: Replace entire order</li>
<li><strong>PATCH</strong>: Modify order slightly</li>
<li><strong>DELETE</strong>: Cancel order</li>
</ul>
<p>Standard ways to order without confusion!</p>
<h2 id="further-resources-35"><a class="header" href="#further-resources-35">Further Resources</a></h2>
<ul>
<li><a href="https://restfulapi.net/">REST API Best Practices</a></li>
<li><a href="https://httpstat.us/">HTTP Status Codes</a></li>
<li><a href="https://swagger.io/">OpenAPI/Swagger</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="react"><a class="header" href="#react">React</a></h1>
<h2 id="overview-57"><a class="header" href="#overview-57">Overview</a></h2>
<p>React is a JavaScript library for building user interfaces with reusable components and efficient rendering.</p>
<h2 id="components-3"><a class="header" href="#components-3">Components</a></h2>
<h3 id="functional-components-modern"><a class="header" href="#functional-components-modern">Functional Components (Modern)</a></h3>
<pre><code class="language-javascript">function Welcome({ name }) {
  return &lt;h1&gt;Hello, {name}!&lt;/h1&gt;;
}

// Arrow function
const Greeting = ({ message }) =&gt; &lt;p&gt;{message}&lt;/p&gt;;
</code></pre>
<h3 id="class-components-legacy"><a class="header" href="#class-components-legacy">Class Components (Legacy)</a></h3>
<pre><code class="language-javascript">class Welcome extends React.Component {
  render() {
    return &lt;h1&gt;Hello, {this.props.name}!&lt;/h1&gt;;
  }
}
</code></pre>
<h2 id="hooks"><a class="header" href="#hooks">Hooks</a></h2>
<p>Modern way to manage state and effects:</p>
<pre><code class="language-javascript">import { useState, useEffect } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  useEffect(() =&gt; {
    console.log('Count changed:', count);
    // Cleanup
    return () =&gt; console.log('Cleanup');
  }, [count]); // Dependencies

  return (
    &lt;div&gt;
      &lt;p&gt;Count: {count}&lt;/p&gt;
      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;Increment&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="common-hooks"><a class="header" href="#common-hooks">Common Hooks</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Hook</th><th>Purpose</th></tr></thead><tbody>
<tr><td><strong>useState</strong></td><td>Manage state</td></tr>
<tr><td><strong>useEffect</strong></td><td>Side effects</td></tr>
<tr><td><strong>useContext</strong></td><td>Access context</td></tr>
<tr><td><strong>useReducer</strong></td><td>Complex state logic</td></tr>
<tr><td><strong>useCallback</strong></td><td>Memoize function</td></tr>
<tr><td><strong>useMemo</strong></td><td>Memoize value</td></tr>
</tbody></table>
</div>
<h2 id="props"><a class="header" href="#props">Props</a></h2>
<pre><code class="language-javascript">// Parent
&lt;Child name="John" age={30} onClick={handleClick} /&gt;

// Child
function Child({ name, age, onClick }) {
  return (
    &lt;div onClick={onClick}&gt;
      {name} is {age}
    &lt;/div&gt;
  );
}
</code></pre>
<h2 id="conditional-rendering"><a class="header" href="#conditional-rendering">Conditional Rendering</a></h2>
<pre><code class="language-javascript">{isLoggedIn &amp;&amp; &lt;Dashboard /&gt;}
{user ? &lt;UserProfile /&gt; : &lt;LoginForm /&gt;}

{status === 'loading' &amp;&amp; &lt;Spinner /&gt;}
{status === 'error' &amp;&amp; &lt;Error /&gt;}
{status === 'success' &amp;&amp; &lt;Data /&gt;}
</code></pre>
<h2 id="lists-1"><a class="header" href="#lists-1">Lists</a></h2>
<pre><code class="language-javascript">const users = [
  { id: 1, name: 'John' },
  { id: 2, name: 'Jane' }
];

&lt;ul&gt;
  {users.map(user =&gt; (
    &lt;li key={user.id}&gt;{user.name}&lt;/li&gt;
  ))}
&lt;/ul&gt;
</code></pre>
<h2 id="event-handling"><a class="header" href="#event-handling">Event Handling</a></h2>
<pre><code class="language-javascript">function Button() {
  const handleClick = (e) =&gt; {
    console.log('Clicked');
  };

  const handleChange = (e) =&gt; {
    const value = e.target.value;
  };

  return (
    &lt;&gt;
      &lt;button onClick={handleClick}&gt;Click&lt;/button&gt;
      &lt;input onChange={handleChange} /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<h2 id="forms"><a class="header" href="#forms">Forms</a></h2>
<pre><code class="language-javascript">function LoginForm() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');

  const handleSubmit = (e) =&gt; {
    e.preventDefault();
    console.log(email, password);
  };

  return (
    &lt;form onSubmit={handleSubmit}&gt;
      &lt;input
        type="email"
        value={email}
        onChange={(e) =&gt; setEmail(e.target.value)}
      /&gt;
      &lt;input
        type="password"
        value={password}
        onChange={(e) =&gt; setPassword(e.target.value)}
      /&gt;
      &lt;button type="submit"&gt;Login&lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></pre>
<h2 id="state-management"><a class="header" href="#state-management">State Management</a></h2>
<h3 id="local-state-usestate"><a class="header" href="#local-state-usestate">Local State (useState)</a></h3>
<pre><code class="language-javascript">const [state, setState] = useState(initialValue);
</code></pre>
<h3 id="context-api-global"><a class="header" href="#context-api-global">Context API (Global)</a></h3>
<pre><code class="language-javascript">const UserContext = createContext();

function App() {
  return (
    &lt;UserContext.Provider value={{ user: 'John' }}&gt;
      &lt;Child /&gt;
    &lt;/UserContext.Provider&gt;
  );
}

function Child() {
  const { user } = useContext(UserContext);
}
</code></pre>
<h3 id="redux-complex"><a class="header" href="#redux-complex">Redux (Complex)</a></h3>
<ul>
<li>Centralized store</li>
<li>Actions → Reducers → State</li>
</ul>
<h2 id="lifecycle-class-components"><a class="header" href="#lifecycle-class-components">Lifecycle (Class Components)</a></h2>
<pre><code class="language-javascript">componentDidMount() { } // After render
componentDidUpdate() { } // After update
componentWillUnmount() { } // Before remove
</code></pre>
<h2 id="best-practices-41"><a class="header" href="#best-practices-41">Best Practices</a></h2>
<ol>
<li><strong>Functional components</strong> (with hooks)</li>
<li><strong>Keep components small</strong></li>
<li><strong>Lift state up</strong> when needed</li>
<li><strong>Use keys</strong> in lists</li>
<li><strong>Memoize</strong> expensive computations</li>
<li><strong>Lazy load</strong> components</li>
</ol>
<h2 id="eli10-30"><a class="header" href="#eli10-30">ELI10</a></h2>
<p>React is like LEGO blocks:</p>
<ul>
<li>Build reusable pieces (components)</li>
<li>Combine to make complex UIs</li>
<li>Reuse same piece many times</li>
<li>Efficient updates when data changes!</li>
</ul>
<h2 id="further-resources-36"><a class="header" href="#further-resources-36">Further Resources</a></h2>
<ul>
<li><a href="https://react.dev/">React Documentation</a></li>
<li><a href="https://react.dev/reference/react">React Hooks</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="graphql"><a class="header" href="#graphql">GraphQL</a></h1>
<h2 id="overview-58"><a class="header" href="#overview-58">Overview</a></h2>
<p>GraphQL is a query language for APIs. Request exactly what data you need, no more, no less.</p>
<h2 id="key-differences-from-rest"><a class="header" href="#key-differences-from-rest">Key Differences from REST</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Aspect</th><th>REST</th><th>GraphQL</th></tr></thead><tbody>
<tr><td><strong>Endpoints</strong></td><td>Multiple (/users, /posts, /comments)</td><td>Single (/graphql)</td></tr>
<tr><td><strong>Data</strong></td><td>Fixed shape</td><td>Client specifies shape</td></tr>
<tr><td><strong>Over-fetching</strong></td><td>Get extra fields</td><td>Only requested fields</td></tr>
<tr><td><strong>Under-fetching</strong></td><td>Need multiple requests</td><td>Single request</td></tr>
</tbody></table>
</div>
<h2 id="schema"><a class="header" href="#schema">Schema</a></h2>
<p>Define types and their relationships:</p>
<pre><code class="language-graphql">type User {
  id: ID!
  name: String!
  email: String!
  posts: [Post!]!
  age: Int
}

type Post {
  id: ID!
  title: String!
  content: String!
  author: User!
  createdAt: String!
}

type Query {
  user(id: ID!): User
  users: [User!]!
  post(id: ID!): Post
}

type Mutation {
  createUser(name: String!, email: String!): User!
  updateUser(id: ID!, name: String): User
  deleteUser(id: ID!): Boolean!
}
</code></pre>
<h2 id="queries"><a class="header" href="#queries">Queries</a></h2>
<p>Request exactly what you need:</p>
<pre><code class="language-graphql"># Simple query
query {
  user(id: "1") {
    name
    email
  }
}

# Nested query
query {
  user(id: "1") {
    name
    posts {
      title
      createdAt
    }
  }
}

# Multiple queries
query {
  user1: user(id: "1") {
    name
  }
  user2: user(id: "2") {
    name
  }
}

# With variables
query GetUser($userId: ID!) {
  user(id: $userId) {
    name
    email
    posts {
      title
    }
  }
}
</code></pre>
<h2 id="mutations"><a class="header" href="#mutations">Mutations</a></h2>
<p>Modify data:</p>
<pre><code class="language-graphql">mutation CreateUser($name: String!, $email: String!) {
  createUser(name: $name, email: $email) {
    id
    name
    email
  }
}

mutation UpdateUser($id: ID!, $name: String) {
  updateUser(id: $id, name: $name) {
    id
    name
  }
}
</code></pre>
<h2 id="resolvers"><a class="header" href="#resolvers">Resolvers</a></h2>
<p>Implement schema with resolvers:</p>
<pre><code class="language-javascript">const resolvers = {
  Query: {
    user: (parent, args) =&gt; {
      return db.users.find(u =&gt; u.id === args.id);
    },
    users: () =&gt; {
      return db.users;
    }
  },

  Mutation: {
    createUser: (parent, args) =&gt; {
      const user = { id: uuidv4(), ...args };
      db.users.push(user);
      return user;
    }
  },

  User: {
    posts: (parent) =&gt; {
      return db.posts.filter(p =&gt; p.authorId === parent.id);
    }
  }
};
</code></pre>
<h2 id="apollo-server-nodejs"><a class="header" href="#apollo-server-nodejs">Apollo Server (Node.js)</a></h2>
<pre><code class="language-javascript">const { ApolloServer, gql } = require('apollo-server');

const typeDefs = gql`
  type Query {
    hello: String
    user(id: ID!): User
  }

  type User {
    id: ID!
    name: String!
  }
`;

const resolvers = {
  Query: {
    hello: () =&gt; 'Hello world!',
    user: (_, args) =&gt; ({ id: args.id, name: 'John' })
  }
};

const server = new ApolloServer({
  typeDefs,
  resolvers
});

server.listen();
</code></pre>
<h2 id="advantages-1"><a class="header" href="#advantages-1">Advantages</a></h2>
<p>✅ Request only needed data (no over-fetching)
✅ Single request for related data (no under-fetching)
✅ Strong typing with schema
✅ Introspection (explore API automatically)
✅ Development tools (GraphQL Explorer)</p>
<h2 id="disadvantages"><a class="header" href="#disadvantages">Disadvantages</a></h2>
<p>❌ More complex than REST
❌ Query complexity attacks
❌ Caching is harder
❌ Monitoring harder
❌ Learning curve</p>
<h2 id="best-practices-42"><a class="header" href="#best-practices-42">Best Practices</a></h2>
<ol>
<li><strong>Limit query depth</strong> (prevent abuse)</li>
<li><strong>Implement timeout</strong> on queries</li>
<li><strong>Use pagination</strong> for large result sets</li>
<li><strong>Combine with REST</strong> if needed</li>
<li><strong>Monitor query performance</strong></li>
</ol>
<h2 id="pagination-1"><a class="header" href="#pagination-1">Pagination</a></h2>
<pre><code class="language-graphql">query {
  users(first: 10, after: "cursor123") {
    edges {
      node {
        id
        name
      }
      cursor
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}
</code></pre>
<h2 id="eli10-31"><a class="header" href="#eli10-31">ELI10</a></h2>
<p>GraphQL is like ordering food:</p>
<ul>
<li><strong>REST</strong>: Get whole menu as-is</li>
<li><strong>GraphQL</strong>: Ask for exactly what you want</li>
</ul>
<p>"I'll take pasta with sauce on the side, hold the onions"</p>
<h2 id="further-resources-37"><a class="header" href="#further-resources-37">Further Resources</a></h2>
<ul>
<li><a href="https://graphql.org/">GraphQL Official</a></li>
<li><a href="https://www.howtographql.com/">How to GraphQL</a></li>
<li><a href="https://www.apollographql.com/docs/">Apollo Documentation</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="devops--cicd"><a class="header" href="#devops--cicd">DevOps &amp; CI/CD</a></h1>
<p>DevOps practices, tools, and methodologies for continuous integration, delivery, and deployment.</p>
<h2 id="topics-covered-2"><a class="header" href="#topics-covered-2">Topics Covered</a></h2>
<ul>
<li><strong>CI/CD Fundamentals</strong>: Pipelines, automation, workflows</li>
<li><strong>Docker</strong>: Containerization, images, containers</li>
<li><strong>Kubernetes</strong>: Orchestration, deployments, services</li>
<li><strong>Terraform</strong>: Infrastructure as code, cloud provisioning</li>
<li><strong>GitHub Actions</strong>: CI/CD workflows, automation</li>
<li><strong>Monitoring</strong>: Logging, metrics, observability</li>
<li><strong>Cloud Deployment</strong>: AWS, GCP, Azure</li>
<li><strong>Infrastructure</strong>: Networking, security, scaling</li>
</ul>
<h2 id="key-concepts-30"><a class="header" href="#key-concepts-30">Key Concepts</a></h2>
<ul>
<li><strong>Continuous Integration</strong>: Automated testing on every commit</li>
<li><strong>Continuous Delivery</strong>: Automated deployment ready</li>
<li><strong>Continuous Deployment</strong>: Automated production releases</li>
<li><strong>Infrastructure as Code</strong>: Define infra with code</li>
</ul>
<h2 id="tools-10"><a class="header" href="#tools-10">Tools</a></h2>
<ul>
<li><strong>CI/CD</strong>: Jenkins, GitHub Actions, GitLab CI, CircleCI</li>
<li><strong>Container</strong>: Docker, Podman</li>
<li><strong>Orchestration</strong>: Kubernetes, Docker Swarm</li>
<li><strong>IaC</strong>: Terraform, CloudFormation, Pulumi</li>
<li><strong>Monitoring</strong>: Prometheus, ELK Stack, Datadog</li>
</ul>
<h2 id="navigation-2"><a class="header" href="#navigation-2">Navigation</a></h2>
<p>Explore each tool and practice to master DevOps.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="docker"><a class="header" href="#docker">Docker</a></h1>
<h2 id="overview-59"><a class="header" href="#overview-59">Overview</a></h2>
<p>Docker packages applications into containers - lightweight, isolated environments with all dependencies. Build once, run anywhere.</p>
<h2 id="core-concepts-4"><a class="header" href="#core-concepts-4">Core Concepts</a></h2>
<h3 id="images-vs-containers"><a class="header" href="#images-vs-containers">Images vs Containers</a></h3>
<ul>
<li><strong>Image</strong>: Blueprint (read-only template)</li>
<li><strong>Container</strong>: Running instance of image</li>
</ul>
<pre><code class="language-bash"># Build image
docker build -t myapp:1.0 .

# Run container from image
docker run myapp:1.0
</code></pre>
<h3 id="dockerfile"><a class="header" href="#dockerfile">Dockerfile</a></h3>
<pre><code class="language-dockerfile"># Base image
FROM python:3.9-slim

# Set working directory
WORKDIR /app

# Copy files
COPY requirements.txt .

# Install dependencies
RUN pip install -r requirements.txt

# Copy application
COPY . .

# Expose port
EXPOSE 5000

# Run command
CMD ["python", "app.py"]
</code></pre>
<h2 id="docker-commands"><a class="header" href="#docker-commands">Docker Commands</a></h2>
<pre><code class="language-bash"># Build
docker build -t myapp:1.0 .

# Run
docker run -p 8000:5000 myapp:1.0
docker run -d -p 8000:5000 myapp:1.0  # Detached

# View containers
docker ps          # Running
docker ps -a       # All

# View images
docker images

# Logs
docker logs container_id

# Stop container
docker stop container_id

# Remove
docker rm container_id
docker rmi image_name
</code></pre>
<h2 id="docker-compose"><a class="header" href="#docker-compose">Docker Compose</a></h2>
<p>Multiple containers together:</p>
<pre><code class="language-yaml">version: '3.8'

services:
  web:
    build: .
    ports:
      - "8000:5000"
    environment:
      DATABASE_URL: postgres://db:5432/mydb
    depends_on:
      - db

  db:
    image: postgres:13
    environment:
      POSTGRES_PASSWORD: secret
    volumes:
      - postgres_data:/var/lib/postgresql/data

volumes:
  postgres_data:
</code></pre>
<pre><code class="language-bash">docker-compose up         # Start all services
docker-compose down       # Stop all services
docker-compose logs -f    # Follow logs
</code></pre>
<h2 id="best-practices-43"><a class="header" href="#best-practices-43">Best Practices</a></h2>
<ol>
<li><strong>Small images</strong>: Use minimal base images (alpine)</li>
<li><strong>Layer caching</strong>: Order commands by change frequency</li>
<li><strong>Security</strong>: Don't run as root, use secrets</li>
<li><strong>Health checks</strong>: Monitor container health</li>
</ol>
<pre><code class="language-dockerfile"># Good: Minimal image
FROM python:3.9-slim
RUN pip install --no-cache-dir -r requirements.txt

# Health check
HEALTHCHECK --interval=30s CMD curl -f http://localhost/health
</code></pre>
<h2 id="volumes"><a class="header" href="#volumes">Volumes</a></h2>
<pre><code class="language-bash"># Mount host directory
docker run -v /host/path:/container/path myapp

# Named volume
docker run -v myvolume:/data myapp

# View volumes
docker volume ls
</code></pre>
<h2 id="eli10-32"><a class="header" href="#eli10-32">ELI10</a></h2>
<p>Docker is like shipping containers for code:</p>
<ul>
<li>Package everything needed (dependencies, code, config)</li>
<li>Send it anywhere (laptop, server, cloud)</li>
<li>Runs the same everywhere!</li>
</ul>
<p>No more "it works on my machine" problems!</p>
<h2 id="further-resources-38"><a class="header" href="#further-resources-38">Further Resources</a></h2>
<ul>
<li><a href="https://docs.docker.com/">Docker Documentation</a></li>
<li><a href="https://hub.docker.com/">Docker Hub Images</a></li>
<li><a href="https://docs.docker.com/develop/dev-best-practices/">Docker Best Practices</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kubernetes"><a class="header" href="#kubernetes">Kubernetes</a></h1>
<h2 id="overview-60"><a class="header" href="#overview-60">Overview</a></h2>
<p>Kubernetes (K8s) orchestrates containerized applications at scale, handling deployment, scaling, and networking.</p>
<h2 id="core-concepts-5"><a class="header" href="#core-concepts-5">Core Concepts</a></h2>
<h3 id="pods"><a class="header" href="#pods">Pods</a></h3>
<p>Smallest deployable unit (usually one container):</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Pod
metadata:
  name: my-pod
spec:
  containers:
  - name: app
    image: myapp:1.0
    ports:
    - containerPort: 8000
</code></pre>
<h3 id="deployments"><a class="header" href="#deployments">Deployments</a></h3>
<p>Manages replicas of pods:</p>
<pre><code class="language-yaml">apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp
spec:
  replicas: 3
  selector:
    matchLabels:
      app: myapp
  template:
    metadata:
      labels:
        app: myapp
    spec:
      containers:
      - name: myapp
        image: myapp:1.0
        ports:
        - containerPort: 8000
</code></pre>
<h3 id="services"><a class="header" href="#services">Services</a></h3>
<p>Expose pods to network:</p>
<pre><code class="language-yaml">apiVersion: v1
kind: Service
metadata:
  name: myapp-service
spec:
  selector:
    app: myapp
  ports:
  - protocol: TCP
    port: 80
    targetPort: 8000
  type: LoadBalancer
</code></pre>
<h2 id="kubectl-commands"><a class="header" href="#kubectl-commands">kubectl Commands</a></h2>
<pre><code class="language-bash"># Create/update
kubectl apply -f deployment.yaml

# View resources
kubectl get pods
kubectl get deployments
kubectl get services

# Describe
kubectl describe pod my-pod

# Logs
kubectl logs my-pod

# Execute
kubectl exec -it my-pod -- bash

# Delete
kubectl delete pod my-pod
kubectl delete deployment myapp

# Scale
kubectl scale deployment myapp --replicas=5

# Port forwarding
kubectl port-forward myapp-pod 8000:8000
</code></pre>
<h2 id="architecture-2"><a class="header" href="#architecture-2">Architecture</a></h2>
<pre><code>┌─────────────────────────┐
│   Control Plane         │
│  - API Server           │
│  - etcd (store)         │
│  - Scheduler            │
│  - Controller Manager   │
└─────────────────────────┘
          ↓
┌─────────────────────────────────────┐
│  Worker Nodes                       │
│  ┌──────┐  ┌──────┐  ┌──────┐     │
│  │ Pod  │  │ Pod  │  │ Pod  │     │
│  └──────┘  └──────┘  └──────┘     │
└─────────────────────────────────────┘
</code></pre>
<h2 id="configmap--secrets"><a class="header" href="#configmap--secrets">ConfigMap &amp; Secrets</a></h2>
<pre><code class="language-yaml"># ConfigMap (non-sensitive)
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  LOG_LEVEL: "info"
  DATABASE_HOST: "db.example.com"

---
# Secret (sensitive)
apiVersion: v1
kind: Secret
metadata:
  name: db-secret
type: Opaque
data:
  password: cGFzc3dvcmQxMjM=  # Base64 encoded
</code></pre>
<h2 id="namespaces"><a class="header" href="#namespaces">Namespaces</a></h2>
<p>Logical cluster partitions:</p>
<pre><code class="language-bash">kubectl create namespace development
kubectl apply -f deployment.yaml -n development
kubectl get pods -n development
</code></pre>
<h2 id="scaling--updates"><a class="header" href="#scaling--updates">Scaling &amp; Updates</a></h2>
<pre><code class="language-bash"># Manual scaling
kubectl scale deployment myapp --replicas=10

# Rolling update
kubectl set image deployment/myapp myapp=myapp:2.0
kubectl rollout status deployment/myapp
kubectl rollout undo deployment/myapp  # Revert
</code></pre>
<h2 id="resource-limits"><a class="header" href="#resource-limits">Resource Limits</a></h2>
<pre><code class="language-yaml">spec:
  containers:
  - name: myapp
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"
        cpu: "500m"
</code></pre>
<h2 id="eli10-33"><a class="header" href="#eli10-33">ELI10</a></h2>
<p>Kubernetes is like a smart warehouse manager:</p>
<ul>
<li>Receives orders (deployments)</li>
<li>Assigns workers (pods)</li>
<li>Keeps right number working</li>
<li>Fixes broken ones automatically</li>
<li>Spreads load across workers</li>
</ul>
<p>Imagine managing 1000 containers automatically!</p>
<h2 id="further-resources-39"><a class="header" href="#further-resources-39">Further Resources</a></h2>
<ul>
<li><a href="https://kubernetes.io/docs/">Kubernetes Docs</a></li>
<li><a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/">Interactive Tutorial</a></li>
<li><a href="https://kubernetes.io/docs/reference/kubectl/cheatsheet/">kubectl Cheatsheet</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cicd-fundamentals"><a class="header" href="#cicd-fundamentals">CI/CD Fundamentals</a></h1>
<h2 id="overview-61"><a class="header" href="#overview-61">Overview</a></h2>
<p><strong>CI (Continuous Integration)</strong>: Automatically test code on every commit
<strong>CD (Continuous Deployment)</strong>: Automatically deploy to production</p>
<h2 id="pipeline-stages"><a class="header" href="#pipeline-stages">Pipeline Stages</a></h2>
<pre><code>Code Commit
    ↓
Build (compile, package)
    ↓
Test (unit, integration, e2e)
    ↓
Deploy to Staging
    ↓
Manual/Automated Approval
    ↓
Deploy to Production
</code></pre>
<h2 id="tools-11"><a class="header" href="#tools-11">Tools</a></h2>
<h3 id="github-actions"><a class="header" href="#github-actions">GitHub Actions</a></h3>
<pre><code class="language-yaml">name: CI/CD

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: Set up Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '16'

    - name: Install dependencies
      run: npm install

    - name: Run tests
      run: npm test

    - name: Run linter
      run: npm run lint

    - name: Deploy to production
      if: github.ref == 'refs/heads/main'
      run: npm run deploy
</code></pre>
<h3 id="gitlab-ci"><a class="header" href="#gitlab-ci">GitLab CI</a></h3>
<pre><code class="language-yaml">stages:
  - build
  - test
  - deploy

build:
  stage: build
  script:
    - npm install
    - npm run build
  artifacts:
    paths:
      - dist/

test:
  stage: test
  script:
    - npm install
    - npm test

deploy:
  stage: deploy
  script:
    - npm run deploy
  only:
    - main
</code></pre>
<h2 id="best-practices-44"><a class="header" href="#best-practices-44">Best Practices</a></h2>
<ol>
<li><strong>Automated Testing</strong>: Every commit</li>
<li><strong>Fast Feedback</strong>: Minutes, not hours</li>
<li><strong>Deploy Often</strong>: Small, frequent changes</li>
<li><strong>Monitoring</strong>: Alert on failures</li>
<li><strong>Rollback Ready</strong>: Revert quickly if needed</li>
</ol>
<h2 id="pipeline-as-code"><a class="header" href="#pipeline-as-code">Pipeline as Code</a></h2>
<p>Define pipeline in version control:</p>
<pre><code class="language-yaml"># .github/workflows/deploy.yml
name: Deploy
on: [push]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: docker build -t myapp .
      - run: docker push myapp:latest
      - run: kubectl apply -f deployment.yaml
</code></pre>
<h2 id="deployment-strategies"><a class="header" href="#deployment-strategies">Deployment Strategies</a></h2>
<h3 id="blue-green"><a class="header" href="#blue-green">Blue-Green</a></h3>
<pre><code>Blue (current):  Production v1
Green (new):     Production v2

Switch traffic instantly to v2
If issue: Switch back to v1
</code></pre>
<h3 id="canary"><a class="header" href="#canary">Canary</a></h3>
<pre><code>Release to 5% of users first
Monitor metrics
If healthy: 10% → 25% → 50% → 100%
If issues: Rollback at any stage
</code></pre>
<h3 id="rolling"><a class="header" href="#rolling">Rolling</a></h3>
<pre><code>Stop pod, deploy new version
Repeat for each pod
Zero downtime
</code></pre>
<h2 id="monitoring-in-cicd"><a class="header" href="#monitoring-in-cicd">Monitoring in CI/CD</a></h2>
<pre><code class="language-yaml"># Check metrics after deploy
- name: Health check
  run: |
    curl -f https://api.example.com/health || exit 1

- name: Performance check
  run: |
    response_time=$(curl -w '%{time_total}' https://api.example.com)
    if (( $(echo "$response_time &gt; 2.0" | bc -l) )); then
      echo "Slow response: $response_time seconds"
      exit 1
    fi
</code></pre>
<h2 id="common-issues-13"><a class="header" href="#common-issues-13">Common Issues</a></h2>
<h3 id="flaky-tests"><a class="header" href="#flaky-tests">Flaky Tests</a></h3>
<p>Tests that pass/fail randomly
<strong>Solution</strong>: Fix test, increase timeout, isolate dependencies</p>
<h3 id="deployment-failures"><a class="header" href="#deployment-failures">Deployment Failures</a></h3>
<p><strong>Solution</strong>: Pre-deployment checks, canary deployments, rollback procedures</p>
<h3 id="security-vulnerabilities"><a class="header" href="#security-vulnerabilities">Security Vulnerabilities</a></h3>
<p><strong>Solution</strong>: Dependency scanning, static code analysis, container scanning</p>
<h2 id="eli10-34"><a class="header" href="#eli10-34">ELI10</a></h2>
<p>CI/CD is like an assembly line:</p>
<ol>
<li><strong>CI</strong>: Test each part as made</li>
<li><strong>CD</strong>: Automatically package and ship</li>
<li><strong>Monitoring</strong>: Check if delivery was successful</li>
</ol>
<p>Catch problems BEFORE customers see them!</p>
<h2 id="further-resources-40"><a class="header" href="#further-resources-40">Further Resources</a></h2>
<ul>
<li><a href="https://docs.github.com/en/actions">GitHub Actions Documentation</a></li>
<li><a href="https://docs.gitlab.com/ee/ci/">GitLab CI/CD</a></li>
<li><a href="https://www.jenkins.io/doc/">Jenkins Guide</a></li>
<li><a href="https://12factor.net/">The Twelve-Factor App</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="system-design"><a class="header" href="#system-design">System Design</a></h1>
<p>Designing large-scale distributed systems for performance, scalability, and reliability.</p>
<h2 id="topics-covered-3"><a class="header" href="#topics-covered-3">Topics Covered</a></h2>
<ul>
<li><strong>Scalability</strong>: Horizontal vs vertical scaling</li>
<li><strong>Load Balancing</strong>: Distributing traffic</li>
<li><strong>Caching</strong>: Improving performance</li>
<li><strong>Databases</strong>: SQL vs NoSQL, sharding</li>
<li><strong>Message Queues</strong>: Asynchronous processing</li>
<li><strong>Microservices</strong>: Service architecture</li>
<li><strong>Distributed Consensus</strong>: Consistency models</li>
<li><strong>Design Patterns</strong>: Common solutions</li>
</ul>
<h2 id="key-concepts-31"><a class="header" href="#key-concepts-31">Key Concepts</a></h2>
<ul>
<li><strong>Throughput</strong>: Requests per second</li>
<li><strong>Latency</strong>: Response time</li>
<li><strong>Availability</strong>: Uptime percentage</li>
<li><strong>Consistency</strong>: Data correctness</li>
<li><strong>Partition Tolerance</strong>: Handling failures</li>
</ul>
<h2 id="design-goals"><a class="header" href="#design-goals">Design Goals</a></h2>
<ol>
<li><strong>Reliability</strong>: Surviving failures</li>
<li><strong>Scalability</strong>: Growing with demand</li>
<li><strong>Performance</strong>: Fast responses</li>
<li><strong>Maintainability</strong>: Easy to update</li>
</ol>
<h2 id="steps-to-design-system"><a class="header" href="#steps-to-design-system">Steps to Design System</a></h2>
<ol>
<li>Understand requirements and constraints</li>
<li>High-level architecture</li>
<li>Detailed design of components</li>
<li>Identify bottlenecks</li>
<li>Trade-offs and optimization</li>
</ol>
<h2 id="navigation-3"><a class="header" href="#navigation-3">Navigation</a></h2>
<p>Learn principles for designing systems at scale.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="scalability"><a class="header" href="#scalability">Scalability</a></h1>
<h2 id="overview-62"><a class="header" href="#overview-62">Overview</a></h2>
<p>Scalability is the ability to handle increased load by adding more resources.</p>
<h2 id="vertical-scaling"><a class="header" href="#vertical-scaling">Vertical Scaling</a></h2>
<p>Add more power to existing machines:</p>
<pre><code>1 machine: 8 cores, 32GB RAM
→ Upgrade to: 16 cores, 128GB RAM
</code></pre>
<p><strong>Pros</strong>: Simple, less complexity
<strong>Cons</strong>: Hardware limits, single point of failure</p>
<h2 id="horizontal-scaling"><a class="header" href="#horizontal-scaling">Horizontal Scaling</a></h2>
<p>Add more machines:</p>
<pre><code>Machine 1: Handle requests
Machine 2: Handle requests
Machine 3: Handle requests
↓ Load Balancer ↓
     Clients
</code></pre>
<p><strong>Pros</strong>: Unlimited growth, fault tolerance
<strong>Cons</strong>: More complexity, state management</p>
<h2 id="load-balancing"><a class="header" href="#load-balancing">Load Balancing</a></h2>
<pre><code>    Client Request
         ↓
   ┌─ Load Balancer ─┐
   ↓        ↓        ↓
Server1  Server2  Server3
</code></pre>
<p><strong>Algorithms</strong>:</p>
<ul>
<li><strong>Round Robin</strong>: Rotate servers</li>
<li><strong>Least Connections</strong>: Route to least busy</li>
<li><strong>IP Hash</strong>: Same client to same server</li>
<li><strong>Weighted</strong>: Distribute by capacity</li>
</ul>
<h2 id="database-scaling"><a class="header" href="#database-scaling">Database Scaling</a></h2>
<h3 id="replication"><a class="header" href="#replication">Replication</a></h3>
<p>Master-slave setup:</p>
<ul>
<li>Master: Writes</li>
<li>Slaves: Read copies</li>
</ul>
<pre><code>      Master (R/W)
      ↙    ↓    ↘
   Slave1 Slave2 Slave3 (R only)
</code></pre>
<h3 id="sharding"><a class="header" href="#sharding">Sharding</a></h3>
<p>Partition data across databases:</p>
<pre><code>Shard 1: Users 1-1M
Shard 2: Users 1M-2M
Shard 3: Users 2M-3M

By User ID % 3 → Route to correct shard
</code></pre>
<h2 id="caching-1"><a class="header" href="#caching-1">Caching</a></h2>
<p>Store frequently accessed data:</p>
<pre><code>Client Request
     ↓
Check Cache (fast)
  ↓ miss ↓ hit
Database → Client
(slow)
</code></pre>
<p><strong>Cache Invalidation</strong>:</p>
<ul>
<li><strong>TTL</strong>: Expire after time</li>
<li><strong>Event-based</strong>: Invalidate on update</li>
<li><strong>LRU</strong>: Remove least used items</li>
</ul>
<h2 id="common-patterns-2"><a class="header" href="#common-patterns-2">Common Patterns</a></h2>
<h3 id="cdn-content-delivery-network"><a class="header" href="#cdn-content-delivery-network">CDN (Content Delivery Network)</a></h3>
<p>Distributed servers for static content:</p>
<pre><code>User in Asia → Asia CDN Server (fast)
User in US → US CDN Server (fast)
</code></pre>
<h3 id="queue-systems"><a class="header" href="#queue-systems">Queue Systems</a></h3>
<p>Handle spikes asynchronously:</p>
<pre><code>Request → Queue → Worker Pool → Database
(fast)              (slow processing)
</code></pre>
<h3 id="read-replicas"><a class="header" href="#read-replicas">Read Replicas</a></h3>
<p>Separate read and write:</p>
<pre><code>Write (slow): Direct to master
Read (fast): From replicas
</code></pre>
<h2 id="metrics"><a class="header" href="#metrics">Metrics</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Metric</th><th>Target</th></tr></thead><tbody>
<tr><td><strong>Response Time</strong></td><td>&lt;100ms</td></tr>
<tr><td><strong>Throughput</strong></td><td>&gt;1000 req/s</td></tr>
<tr><td><strong>Uptime</strong></td><td>&gt;99.9%</td></tr>
<tr><td><strong>Availability</strong></td><td>5-9s</td></tr>
</tbody></table>
</div>
<h2 id="eli10-35"><a class="header" href="#eli10-35">ELI10</a></h2>
<p>Scalability is like growing a restaurant:</p>
<ul>
<li><strong>Vertical</strong>: Make kitchen bigger (limited)</li>
<li><strong>Horizontal</strong>: Open more locations (unlimited)</li>
<li><strong>Load balancer</strong>: Customers split between locations</li>
<li><strong>Caching</strong>: Keep popular dishes ready</li>
<li><strong>Queues</strong>: Don't overwhelm kitchen</li>
</ul>
<p>Design for growth from day one!</p>
<h2 id="further-resources-41"><a class="header" href="#further-resources-41">Further Resources</a></h2>
<ul>
<li><a href="https://dataintensive.app/">Designing Data-Intensive Applications</a></li>
<li><a href="https://www.systemdesigninterview.com/">System Design Interview</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="caching-strategies"><a class="header" href="#caching-strategies">Caching Strategies</a></h1>
<h2 id="overview-63"><a class="header" href="#overview-63">Overview</a></h2>
<p>Caching stores frequently accessed data in fast memory to reduce latency and database load.</p>
<h2 id="cache-levels-1"><a class="header" href="#cache-levels-1">Cache Levels</a></h2>
<pre><code>L1: Browser cache (browser memory)
  ↓
L2: CDN cache (edge servers)
  ↓
L3: Application cache (Redis)
  ↓
L4: Database cache (MySQL buffer pool)
  ↓
Database (disk, slowest)
</code></pre>
<h2 id="caching-policies"><a class="header" href="#caching-policies">Caching Policies</a></h2>
<h3 id="cache-aside-lazy-loading"><a class="header" href="#cache-aside-lazy-loading">Cache-Aside (Lazy Loading)</a></h3>
<pre><code>1. Check cache
2. If miss: Load from database
3. Store in cache
4. Return to client
</code></pre>
<pre><code class="language-python">def get_user(user_id):
    # Check cache
    cached = redis.get(f"user:{user_id}")
    if cached:
        return cached

    # Load from DB
    user = db.get_user(user_id)

    # Store in cache
    redis.set(f"user:{user_id}", user, ex=3600)

    return user
</code></pre>
<h3 id="write-through"><a class="header" href="#write-through">Write-Through</a></h3>
<p>Write to cache AND database simultaneously:</p>
<pre><code>Update Request
  ↓
Cache ← updated
  ↓
Database ← updated
</code></pre>
<p>Ensures consistency but slower writes.</p>
<h3 id="write-behind-write-back"><a class="header" href="#write-behind-write-back">Write-Behind (Write-Back)</a></h3>
<p>Write to cache, asynchronously to database:</p>
<pre><code>Update Request
  ↓
Cache ← updated (fast)
  ↓
Queue for DB
  ↓
Database ← updated (later)
</code></pre>
<p>Fast but risk of data loss.</p>
<h2 id="invalidation-strategies"><a class="header" href="#invalidation-strategies">Invalidation Strategies</a></h2>
<h3 id="ttl-time-to-live-2"><a class="header" href="#ttl-time-to-live-2">TTL (Time-To-Live)</a></h3>
<pre><code class="language-python">redis.set("key", value, ex=3600)  # Expires in 1 hour
</code></pre>
<p><strong>Pros</strong>: Simple
<strong>Cons</strong>: Stale data until expiry</p>
<h3 id="event-based"><a class="header" href="#event-based">Event-Based</a></h3>
<p>Invalidate when data changes:</p>
<pre><code class="language-python">def update_user(user_id, data):
    db.update_user(user_id, data)
    redis.delete(f"user:{user_id}")  # Invalidate
</code></pre>
<p><strong>Pros</strong>: Fresh data
<strong>Cons</strong>: Complex logic</p>
<h3 id="lru-least-recently-used"><a class="header" href="#lru-least-recently-used">LRU (Least Recently Used)</a></h3>
<p>Remove least used items when full:</p>
<pre><code>[recent] A B C D E [old]
Remove E if memory full
</code></pre>
<h2 id="cache-eviction-policies"><a class="header" href="#cache-eviction-policies">Cache Eviction Policies</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Policy</th><th>Behavior</th></tr></thead><tbody>
<tr><td><strong>LRU</strong></td><td>Remove least recently used</td></tr>
<tr><td><strong>LFU</strong></td><td>Remove least frequently used</td></tr>
<tr><td><strong>FIFO</strong></td><td>Remove oldest</td></tr>
<tr><td><strong>Random</strong></td><td>Remove random</td></tr>
</tbody></table>
</div>
<h2 id="distributed-caching"><a class="header" href="#distributed-caching">Distributed Caching</a></h2>
<p>Using Redis for distributed cache:</p>
<pre><code class="language-python">import redis

cache = redis.Redis(host='localhost', port=6379)

# Set
cache.set('key', 'value')
cache.setex('key', 3600, 'value')  # With TTL

# Get
value = cache.get('key')

# Delete
cache.delete('key')

# Multi-key
cache.mget(['key1', 'key2', 'key3'])
</code></pre>
<h2 id="cache-stampede"><a class="header" href="#cache-stampede">Cache Stampede</a></h2>
<p>Problem: Multiple requests load same expired key</p>
<pre><code>3 requests arrive
Cache expired for key X
All 3 hit database (thundering herd)
</code></pre>
<p><strong>Solution</strong>: Lock pattern</p>
<pre><code class="language-python">def get_cached(key):
    value = cache.get(key)
    if value:
        return value

    if cache.get(f"{key}:lock"):
        # Wait, someone loading
        return wait_for_cache(key)

    # Set lock, load data
    cache.set(f"{key}:lock", "1", ex=5)
    value = load_from_db(key)
    cache.set(key, value)
    cache.delete(f"{key}:lock")
    return value
</code></pre>
<h2 id="common-caching-patterns"><a class="header" href="#common-caching-patterns">Common Caching Patterns</a></h2>
<h3 id="cache-coherence"><a class="header" href="#cache-coherence">Cache Coherence</a></h3>
<p>Multiple caches have same data</p>
<h3 id="cache-penetration"><a class="header" href="#cache-penetration">Cache Penetration</a></h3>
<p>Request for non-existent key hits DB repeatedly</p>
<p><strong>Solution</strong>: Cache negative results</p>
<pre><code class="language-python">cache.set(f"user:{id}", None, ex=60)
</code></pre>
<h3 id="cache-avalanche"><a class="header" href="#cache-avalanche">Cache Avalanche</a></h3>
<p>Many keys expire simultaneously</p>
<p><strong>Solution</strong>: Randomize TTLs</p>
<pre><code class="language-python">ttl = 3600 + random(0, 600)
cache.set(key, value, ex=ttl)
</code></pre>
<h2 id="when-not-to-cache"><a class="header" href="#when-not-to-cache">When NOT to Cache</a></h2>
<ul>
<li>Constantly changing data</li>
<li>Very frequently read, rarely write</li>
<li>Small datasets</li>
<li>Rare access patterns</li>
</ul>
<h2 id="eli10-36"><a class="header" href="#eli10-36">ELI10</a></h2>
<p>Cache is like keeping your favorite book on your desk:</p>
<ul>
<li>Fast access (don't go to library)</li>
<li>Runs out of space (limited shelf)</li>
<li>Need to replace old books (eviction)</li>
<li>Book gets outdated (invalidation)</li>
</ul>
<p>Trade memory for speed!</p>
<h2 id="further-resources-42"><a class="header" href="#further-resources-42">Further Resources</a></h2>
<ul>
<li><a href="https://redis.io/docs/">Redis Documentation</a></li>
<li><a href="https://codeahoy.com/2017/08/11/caching-strategies-and-patterns/">Caching Patterns</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing--quality"><a class="header" href="#testing--quality">Testing &amp; Quality</a></h1>
<p>Testing strategies, frameworks, and best practices for ensuring code quality and reliability.</p>
<h2 id="topics-covered-4"><a class="header" href="#topics-covered-4">Topics Covered</a></h2>
<ul>
<li><strong>Testing Fundamentals</strong>: Unit, integration, end-to-end</li>
<li><strong>Test Frameworks</strong>: pytest, Jest, unittest</li>
<li><strong>TDD/BDD</strong>: Test-driven development approaches</li>
<li><strong>Mocking</strong>: Isolating code under test</li>
<li><strong>Coverage</strong>: Measuring test completeness</li>
<li><strong>Debugging</strong>: Finding and fixing issues</li>
<li><strong>Code Quality</strong>: Linting, formatting, static analysis</li>
<li><strong>Performance Testing</strong>: Load and stress testing</li>
</ul>
<h2 id="testing-pyramid"><a class="header" href="#testing-pyramid">Testing Pyramid</a></h2>
<pre><code>       E2E Tests (few)
      Integration Tests (more)
    Unit Tests (many)
</code></pre>
<p>Ratio: 70% unit, 20% integration, 10% e2e</p>
<h2 id="test-types"><a class="header" href="#test-types">Test Types</a></h2>
<ul>
<li><strong>Unit</strong>: Individual functions/classes</li>
<li><strong>Integration</strong>: Multiple components together</li>
<li><strong>End-to-End</strong>: Full user workflows</li>
<li><strong>Performance</strong>: Load and speed</li>
<li><strong>Security</strong>: Vulnerability detection</li>
</ul>
<h2 id="best-practices-45"><a class="header" href="#best-practices-45">Best Practices</a></h2>
<ol>
<li><strong>Fast</strong>: Tests run quickly</li>
<li><strong>Independent</strong>: No dependencies between tests</li>
<li><strong>Repeatable</strong>: Consistent results</li>
<li><strong>Self-checking</strong>: Pass/fail obvious</li>
<li><strong>Timely</strong>: Written with code</li>
</ol>
<h2 id="navigation-4"><a class="header" href="#navigation-4">Navigation</a></h2>
<p>Learn strategies to build reliable, quality software.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unit-testing"><a class="header" href="#unit-testing">Unit Testing</a></h1>
<h2 id="overview-64"><a class="header" href="#overview-64">Overview</a></h2>
<p>Unit testing verifies individual functions or classes work correctly in isolation.</p>
<h2 id="python---pytest"><a class="header" href="#python---pytest">Python - pytest</a></h2>
<pre><code class="language-python"># test_calculator.py
import pytest
from calculator import add, divide

def test_add():
    assert add(2, 3) == 5
    assert add(-1, 1) == 0

def test_add_floats():
    assert add(0.1, 0.2) == pytest.approx(0.3)

def test_divide_by_zero():
    with pytest.raises(ValueError):
        divide(10, 0)

@pytest.fixture
def calculator():
    """Setup fixture"""
    return Calculator()

def test_with_fixture(calculator):
    assert calculator.add(2, 3) == 5

@pytest.mark.parametrize("x,y,expected", [
    (2, 3, 5),
    (0, 0, 0),
    (-1, 1, 0),
])
def test_add_multiple(x, y, expected):
    assert add(x, y) == expected
</code></pre>
<h2 id="javascript---jest"><a class="header" href="#javascript---jest">JavaScript - Jest</a></h2>
<pre><code class="language-javascript">// calculator.test.js
describe('Calculator', () =&gt; {
  test('add function', () =&gt; {
    expect(add(2, 3)).toBe(5);
  });

  test('divide by zero throws error', () =&gt; {
    expect(() =&gt; divide(10, 0)).toThrow();
  });

  test('floating point', () =&gt; {
    expect(add(0.1, 0.2)).toBeCloseTo(0.3);
  });
});
</code></pre>
<h2 id="java---junit"><a class="header" href="#java---junit">Java - JUnit</a></h2>
<pre><code class="language-java">import org.junit.jupiter.api.Test;
import static org.junit.jupiter.api.Assertions.*;

class CalculatorTest {
    private Calculator calc = new Calculator();

    @Test
    void testAdd() {
        assertEquals(5, calc.add(2, 3));
    }

    @Test
    void testDivideByZero() {
        assertThrows(ArithmeticException.class,
            () -&gt; calc.divide(10, 0));
    }

    @BeforeEach
    void setup() {
        calc = new Calculator();
    }
}
</code></pre>
<h2 id="mocking"><a class="header" href="#mocking">Mocking</a></h2>
<p>Isolate code under test:</p>
<pre><code class="language-python">from unittest.mock import Mock, patch

@patch('module.external_api')
def test_with_mock(mock_api):
    mock_api.return_value = {"status": "ok"}
    result = my_function()
    assert result == "success"
    mock_api.assert_called_once()
</code></pre>
<h2 id="best-practices-46"><a class="header" href="#best-practices-46">Best Practices</a></h2>
<ol>
<li><strong>One assertion per test</strong> (or related)</li>
<li><strong>Arrange-Act-Assert pattern</strong></li>
<li><strong>Descriptive names</strong>: <code>test_add_positive_numbers</code></li>
<li><strong>Test behavior, not implementation</strong></li>
<li><strong>Test edge cases and errors</strong></li>
</ol>
<h2 id="coverage"><a class="header" href="#coverage">Coverage</a></h2>
<pre><code class="language-bash"># Python coverage
pytest --cov=myapp tests/

# JavaScript coverage
npm test -- --coverage
</code></pre>
<p><strong>Target</strong>: 80%+ coverage</p>
<h2 id="common-assertions"><a class="header" href="#common-assertions">Common Assertions</a></h2>
<pre><code class="language-python">assert x == y           # Equality
assert x &gt; y            # Comparison
assert x is None        # Identity
assert x in list        # Membership
with raises(Exception): # Exception
    function()
</code></pre>
<h2 id="eli10-37"><a class="header" href="#eli10-37">ELI10</a></h2>
<p>Unit tests are like checking individual pieces:</p>
<ul>
<li>Test each part separately</li>
<li>Make sure it works alone</li>
<li>Catch problems early!</li>
</ul>
<p>Like quality control in a factory!</p>
<h2 id="further-resources-43"><a class="header" href="#further-resources-43">Further Resources</a></h2>
<ul>
<li><a href="https://docs.pytest.org/">pytest Documentation</a></li>
<li><a href="https://jestjs.io/">Jest Documentation</a></li>
<li><a href="https://junit.org/junit5/docs/current/user-guide/">JUnit 5 Guide</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="test-driven-development-tdd"><a class="header" href="#test-driven-development-tdd">Test-Driven Development (TDD)</a></h1>
<h2 id="overview-65"><a class="header" href="#overview-65">Overview</a></h2>
<p>TDD: Write tests BEFORE writing code. Red → Green → Refactor cycle.</p>
<h2 id="red-green-refactor-cycle"><a class="header" href="#red-green-refactor-cycle">Red-Green-Refactor Cycle</a></h2>
<h3 id="1-red-write-failing-test"><a class="header" href="#1-red-write-failing-test">1. Red: Write Failing Test</a></h3>
<pre><code class="language-python">def test_add_positive_numbers():
    assert add(2, 3) == 5
</code></pre>
<h3 id="2-green-write-minimal-code"><a class="header" href="#2-green-write-minimal-code">2. Green: Write Minimal Code</a></h3>
<pre><code class="language-python">def add(a, b):
    return 5  # Hardcoded to pass test
</code></pre>
<h3 id="3-refactor-improve-code"><a class="header" href="#3-refactor-improve-code">3. Refactor: Improve Code</a></h3>
<pre><code class="language-python">def add(a, b):
    return a + b  # Proper implementation
</code></pre>
<h2 id="benefits-1"><a class="header" href="#benefits-1">Benefits</a></h2>
<p>✅ Better design (code written to be testable)
✅ Fewer bugs (test before shipping)
✅ Confidence (safe to refactor)
✅ Documentation (tests show usage)
✅ Less debugging (catch issues early)</p>
<h2 id="example-calculator"><a class="header" href="#example-calculator">Example: Calculator</a></h2>
<h3 id="step-1-red"><a class="header" href="#step-1-red">Step 1: Red</a></h3>
<pre><code class="language-python">class TestCalculator:
    def test_add(self):
        calc = Calculator()
        assert calc.add(2, 3) == 5
</code></pre>
<h3 id="step-2-green"><a class="header" href="#step-2-green">Step 2: Green</a></h3>
<pre><code class="language-python">class Calculator:
    def add(self, a, b):
        return a + b
</code></pre>
<h3 id="step-3-refactor"><a class="header" href="#step-3-refactor">Step 3: Refactor</a></h3>
<pre><code class="language-python">class Calculator:
    def add(self, a, b):
        """Add two numbers"""
        if not isinstance(a, (int, float)):
            raise TypeError("a must be number")
        return a + b
</code></pre>
<h2 id="tdd-best-practices"><a class="header" href="#tdd-best-practices">TDD Best Practices</a></h2>
<ol>
<li><strong>Start simple</strong>: Test one behavior</li>
<li><strong>One assertion</strong> per test (usually)</li>
<li><strong>Clear names</strong>: <code>test_add_positive_numbers</code></li>
<li><strong>Arrange-Act-Assert</strong></li>
</ol>
<pre><code class="language-python">def test_withdraw():
    # Arrange
    account = Account(1000)
    # Act
    account.withdraw(200)
    # Assert
    assert account.balance == 800
</code></pre>
<ol start="5">
<li><strong>Don't skip red phase</strong>: Ensures test can fail</li>
</ol>
<h2 id="working-test-example"><a class="header" href="#working-test-example">Working Test Example</a></h2>
<pre><code class="language-python"># calculator.py - EMPTY (start)

# test_calculator.py
def test_multiply():
    # Test fails: function doesn't exist (RED)
    assert multiply(3, 4) == 12
</code></pre>
<pre><code class="language-python"># calculator.py - implement
def multiply(a, b):
    return a * b
</code></pre>
<pre><code class="language-python"># test passes (GREEN)

# Refactor if needed
</code></pre>
<h2 id="anti-patterns"><a class="header" href="#anti-patterns">Anti-patterns</a></h2>
<p>❌ Writing all tests at once
❌ Over-engineering the implementation
❌ Ignoring red phase
❌ Poorly named tests
❌ Testing implementation, not behavior</p>
<h2 id="coverage-with-tdd"><a class="header" href="#coverage-with-tdd">Coverage with TDD</a></h2>
<p>TDD naturally leads to high coverage:</p>
<pre><code class="language-python"># Typical TDD: 90%+ coverage
# Non-TDD: 20-40% coverage
</code></pre>
<h2 id="tdd-vs-bdd"><a class="header" href="#tdd-vs-bdd">TDD vs BDD</a></h2>
<p><strong>TDD</strong>: Tests focus on unit behavior</p>
<pre><code class="language-python">test_add_positive_numbers()
test_add_negative_numbers()
</code></pre>
<p><strong>BDD</strong>: Tests focus on business behavior</p>
<pre><code class="language-python">test_user_can_withdraw_money()
test_system_prevents_overdraft()
</code></pre>
<h2 id="tools-12"><a class="header" href="#tools-12">Tools</a></h2>
<ul>
<li><strong>pytest</strong>: Python testing</li>
<li><strong>Jest</strong>: JavaScript testing</li>
<li><strong>JUnit</strong>: Java testing</li>
<li><strong>RSpec</strong>: Ruby testing</li>
</ul>
<h2 id="eli10-38"><a class="header" href="#eli10-38">ELI10</a></h2>
<p>TDD is like building with blueprints:</p>
<ol>
<li>Draw blueprint (write test)</li>
<li>Build to match (write code)</li>
<li>Improve design (refactor)</li>
</ol>
<p>Never start building without a plan!</p>
<h2 id="further-resources-44"><a class="header" href="#further-resources-44">Further Resources</a></h2>
<ul>
<li><a href="https://www.amazon.com/Test-Driven-Development-Kent-Beck/dp/0321146530">TDD by Example - Kent Beck</a></li>
<li><a href="https://testdriven.io/blog/what-is-tdd/">What is TDD</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>


    </div>
    </body>
</html>
