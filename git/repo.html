<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Repo - My Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">My Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="git-repository-management"><a class="header" href="#git-repository-management">Git Repository Management</a></h1>
<p>A comprehensive guide to Git repository operations, patterns, and best practices for effective repository management.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>A Git repository is a data structure that stores metadata and object database for a project's version history. Understanding repository management is crucial for efficient collaboration, maintenance, and scaling of software projects.</p>
<p><strong>Key Concepts:</strong></p>
<ul>
<li><strong>Repository</strong>: Complete project history and metadata</li>
<li><strong>Working Tree</strong>: Current checkout of project files</li>
<li><strong>Index (Staging Area)</strong>: Preparation area for commits</li>
<li><strong>Bare Repository</strong>: Repository without working tree</li>
<li><strong>Clone</strong>: Local copy of a repository</li>
<li><strong>Remote</strong>: Reference to another repository</li>
</ul>
<h2 id="repository-anatomy"><a class="header" href="#repository-anatomy">Repository Anatomy</a></h2>
<h3 id="repository-structure"><a class="header" href="#repository-structure">Repository Structure</a></h3>
<pre><code>.git/
├── HEAD               # Points to current branch
├── config             # Repository-specific configuration
├── description        # Repository description (for GitWeb)
├── hooks/             # Client and server-side hook scripts
├── info/              # Global exclude patterns
│   └── exclude
├── objects/           # All Git objects (commits, trees, blobs)
│   ├── info/
│   └── pack/          # Packed objects for efficiency
├── refs/              # References to commits
│   ├── heads/         # Local branches
│   ├── remotes/       # Remote branches
│   └── tags/          # Tags
├── logs/              # Reference logs
├── index              # Staging area (binary)
└── packed-refs        # Packed references for efficiency
</code></pre>
<h3 id="understanding-key-components"><a class="header" href="#understanding-key-components">Understanding Key Components</a></h3>
<pre><code class="language-bash"># View current HEAD
cat .git/HEAD

# List all references
git show-ref

# View repository config
cat .git/config

# Inspect staging area
git ls-files --stage

# View object database
find .git/objects -type f
</code></pre>
<h2 id="repository-initialization"><a class="header" href="#repository-initialization">Repository Initialization</a></h2>
<h3 id="creating-a-new-repository"><a class="header" href="#creating-a-new-repository">Creating a New Repository</a></h3>
<pre><code class="language-bash"># Initialize new repository
git init
git init project-name
git init --bare repo.git  # Bare repository (no working tree)

# Initialize with specific branch name
git init --initial-branch=main
git init -b main

# Initialize with template
git init --template=/path/to/template

# Reinitialize existing repository (safe operation)
git init
</code></pre>
<h3 id="repository-configuration"><a class="header" href="#repository-configuration">Repository Configuration</a></h3>
<pre><code class="language-bash"># Local (repository-specific)
git config user.name "John Doe"
git config user.email "john@example.com"

# Global (user-level)
git config --global core.editor "vim"
git config --global init.defaultBranch main

# System (all users)
git config --system core.compression 9

# View configuration hierarchy
git config --list --show-origin

# Edit config file directly
git config --edit
git config --global --edit
git config --system --edit
</code></pre>
<h3 id="essential-repository-settings"><a class="header" href="#essential-repository-settings">Essential Repository Settings</a></h3>
<pre><code class="language-bash"># Set file permissions
git config core.fileMode true

# Handle line endings
git config core.autocrlf input     # Linux/macOS
git config core.autocrlf true      # Windows

# Ignore file permissions
git config core.fileMode false

# Set default push behavior
git config push.default simple

# Enable rerere (reuse recorded resolution)
git config rerere.enabled true

# Set default pull strategy
git config pull.rebase false   # Merge (default)
git config pull.rebase true    # Rebase
git config pull.ff only        # Fast-forward only
</code></pre>
<h2 id="cloning-repositories"><a class="header" href="#cloning-repositories">Cloning Repositories</a></h2>
<h3 id="basic-cloning"><a class="header" href="#basic-cloning">Basic Cloning</a></h3>
<pre><code class="language-bash"># Clone via HTTPS
git clone https://github.com/user/repo.git
git clone https://github.com/user/repo.git myproject

# Clone via SSH
git clone git@github.com:user/repo.git

# Clone specific branch
git clone -b develop https://github.com/user/repo.git

# Shallow clone (limited history)
git clone --depth 1 https://github.com/user/repo.git
git clone --shallow-since=2023-01-01 https://github.com/user/repo.git

# Clone single branch
git clone --single-branch --branch main https://github.com/user/repo.git
</code></pre>
<h3 id="advanced-cloning-options"><a class="header" href="#advanced-cloning-options">Advanced Cloning Options</a></h3>
<pre><code class="language-bash"># Clone bare repository
git clone --bare https://github.com/user/repo.git repo.git

# Clone mirror (complete copy including all refs)
git clone --mirror https://github.com/user/repo.git

# Clone with submodules
git clone --recursive https://github.com/user/repo.git
git clone --recurse-submodules https://github.com/user/repo.git

# Partial clone (lazy fetch)
git clone --filter=blob:none https://github.com/user/repo.git
git clone --filter=tree:0 https://github.com/user/repo.git

# Clone with sparse checkout
git clone --sparse https://github.com/user/repo.git
cd repo
git sparse-checkout init --cone
git sparse-checkout set src/ docs/
</code></pre>
<h3 id="shallow-clone-operations"><a class="header" href="#shallow-clone-operations">Shallow Clone Operations</a></h3>
<pre><code class="language-bash"># Deepen shallow clone
git fetch --deepen=100
git fetch --unshallow  # Fetch complete history

# Fetch specific branch in shallow repo
git remote set-branches origin 'feature/*'
git fetch --depth 1 origin feature/new

# Prune old history
git fetch --depth=1
</code></pre>
<h2 id="remote-repository-management"><a class="header" href="#remote-repository-management">Remote Repository Management</a></h2>
<h3 id="working-with-remotes"><a class="header" href="#working-with-remotes">Working with Remotes</a></h3>
<pre><code class="language-bash"># Add remote
git remote add origin https://github.com/user/repo.git
git remote add upstream https://github.com/original/repo.git

# List remotes
git remote -v
git remote show origin

# Rename remote
git remote rename origin upstream

# Change remote URL
git remote set-url origin git@github.com:user/repo.git
git remote set-url --add origin https://gitlab.com/user/repo.git

# Remove remote
git remote remove origin
git remote rm origin
</code></pre>
<h3 id="remote-tracking"><a class="header" href="#remote-tracking">Remote Tracking</a></h3>
<pre><code class="language-bash"># View remote branches
git branch -r
git branch -a  # All branches (local + remote)

# Track remote branch
git checkout -b feature origin/feature
git checkout --track origin/feature
git branch -u origin/feature  # Set upstream for current branch

# View tracking relationships
git branch -vv

# Fetch from remote
git fetch origin
git fetch --all  # Fetch from all remotes
git fetch --prune  # Remove deleted remote branches

# Pull changes
git pull origin main
git pull --rebase origin main

# Push to remote
git push origin main
git push -u origin feature  # Set upstream and push
git push --all origin  # Push all branches
git push --tags  # Push tags
git push --force-with-lease  # Safer force push
</code></pre>
<h3 id="multiple-remotes"><a class="header" href="#multiple-remotes">Multiple Remotes</a></h3>
<pre><code class="language-bash"># Setup multiple remotes for push
git remote set-url --add --push origin git@github.com:user/repo.git
git remote set-url --add --push origin git@gitlab.com:user/repo.git

# Verify configuration
git remote -v

# Push to specific remote
git push github main
git push gitlab main

# Pull from specific remote
git pull upstream main
</code></pre>
<h3 id="remote-branches-management"><a class="header" href="#remote-branches-management">Remote Branches Management</a></h3>
<pre><code class="language-bash"># Delete remote branch
git push origin --delete feature-branch
git push origin :feature-branch  # Older syntax

# Clean up stale remote references
git remote prune origin
git fetch --prune

# Update remote branch
git push origin main:main
git push origin local-branch:remote-branch

# Push all tags
git push origin --tags

# Delete remote tag
git push origin --delete tag-name
git push origin :refs/tags/tag-name
</code></pre>
<h2 id="repository-patterns"><a class="header" href="#repository-patterns">Repository Patterns</a></h2>
<h3 id="monorepo-pattern"><a class="header" href="#monorepo-pattern">Monorepo Pattern</a></h3>
<p>A single repository containing multiple projects or services.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li>Unified versioning</li>
<li>Atomic commits across projects</li>
<li>Simplified dependency management</li>
<li>Easier code sharing and refactoring</li>
</ul>
<p><strong>Structure:</strong></p>
<pre><code>monorepo/
├── services/
│   ├── api/
│   ├── web/
│   └── mobile/
├── packages/
│   ├── shared-ui/
│   └── utils/
├── tools/
└── docs/
</code></pre>
<p><strong>Best Practices:</strong></p>
<pre><code class="language-bash"># Use sparse checkout for large monorepos
git sparse-checkout init --cone
git sparse-checkout set services/api packages/shared-ui

# Use shallow clone for CI/CD
git clone --depth 1 --filter=blob:none https://repo.git

# Tag strategy for monorepos
git tag api-v1.2.0
git tag web-v2.0.0
git tag shared-ui-v0.5.0
</code></pre>
<h3 id="multi-repo-pattern"><a class="header" href="#multi-repo-pattern">Multi-Repo Pattern</a></h3>
<p>Separate repositories for each project or service.</p>
<p><strong>Advantages:</strong></p>
<ul>
<li>Independent versioning</li>
<li>Smaller repositories</li>
<li>Clearer access control</li>
<li>Service isolation</li>
</ul>
<p><strong>Management:</strong></p>
<pre><code class="language-bash"># Use git submodules
git submodule add https://github.com/user/lib.git libs/lib

# Use meta-repositories
git clone https://github.com/org/meta-repo.git
cd meta-repo
./scripts/clone-all.sh

# Use repo tool (Android-style)
repo init -u https://github.com/org/manifest.git
repo sync
</code></pre>
<h3 id="fork-workflow-pattern"><a class="header" href="#fork-workflow-pattern">Fork Workflow Pattern</a></h3>
<p>Standard open-source contribution model.</p>
<pre><code class="language-bash"># 1. Fork repository on GitHub

# 2. Clone your fork
git clone git@github.com:yourname/repo.git
cd repo

# 3. Add upstream remote
git remote add upstream https://github.com/original/repo.git

# 4. Create feature branch
git checkout -b feature/new-feature

# 5. Keep fork updated
git fetch upstream
git checkout main
git merge upstream/main
git push origin main

# 6. Work on feature
git add .
git commit -m "Add new feature"
git push origin feature/new-feature

# 7. Create pull request on GitHub

# 8. Update PR with upstream changes
git fetch upstream
git rebase upstream/main
git push --force-with-lease origin feature/new-feature
</code></pre>
<h3 id="gitflow-pattern"><a class="header" href="#gitflow-pattern">Gitflow Pattern</a></h3>
<p>Structured branching model for releases.</p>
<pre><code class="language-bash"># Branch structure
main          # Production code
develop       # Integration branch
feature/*     # Feature branches
release/*     # Release preparation
hotfix/*      # Production fixes

# Start feature
git checkout -b feature/user-auth develop

# Finish feature
git checkout develop
git merge --no-ff feature/user-auth
git branch -d feature/user-auth
git push origin develop

# Start release
git checkout -b release/1.0.0 develop
# Bump version, update changelog
git commit -m "Prepare release 1.0.0"

# Finish release
git checkout main
git merge --no-ff release/1.0.0
git tag -a v1.0.0 -m "Release 1.0.0"
git checkout develop
git merge --no-ff release/1.0.0
git branch -d release/1.0.0

# Hotfix
git checkout -b hotfix/1.0.1 main
# Fix critical bug
git commit -m "Fix critical bug"
git checkout main
git merge --no-ff hotfix/1.0.1
git tag -a v1.0.1
git checkout develop
git merge --no-ff hotfix/1.0.1
git branch -d hotfix/1.0.1
</code></pre>
<h3 id="trunk-based-development"><a class="header" href="#trunk-based-development">Trunk-Based Development</a></h3>
<p>Single main branch with short-lived feature branches.</p>
<pre><code class="language-bash"># Main workflow
git checkout main
git pull origin main
git checkout -b feature/quick-fix
# Make changes
git commit -m "Quick fix"
git push origin feature/quick-fix
# Create PR, review, merge quickly

# Feature flags for incomplete features
if (featureFlags.newUI) {
  // New UI code
} else {
  // Old UI code
}

# Continuous integration
# All commits must pass tests before merge
</code></pre>
<h2 id="submodules"><a class="header" href="#submodules">Submodules</a></h2>
<h3 id="working-with-submodules"><a class="header" href="#working-with-submodules">Working with Submodules</a></h3>
<pre><code class="language-bash"># Add submodule
git submodule add https://github.com/user/lib.git libs/lib
git submodule add -b main https://github.com/user/lib.git libs/lib

# Clone repository with submodules
git clone --recursive https://github.com/user/repo.git

# Initialize submodules after clone
git submodule init
git submodule update

# Update submodules
git submodule update --remote
git submodule update --remote --merge

# Update specific submodule
git submodule update --remote libs/lib

# Execute command in all submodules
git submodule foreach git pull origin main
git submodule foreach 'git checkout main &amp;&amp; git pull'
</code></pre>
<h3 id="advanced-submodule-operations"><a class="header" href="#advanced-submodule-operations">Advanced Submodule Operations</a></h3>
<pre><code class="language-bash"># Remove submodule
git submodule deinit libs/lib
git rm libs/lib
rm -rf .git/modules/libs/lib

# Change submodule URL
git config submodule.libs/lib.url https://new-url.git
git submodule sync libs/lib
git submodule update --remote libs/lib

# Pin submodule to specific commit
cd libs/lib
git checkout abc1234
cd ../..
git add libs/lib
git commit -m "Pin lib to specific version"

# View submodule status
git submodule status
git submodule summary

# Recursive submodule operations
git clone --recursive --shallow-submodules https://github.com/user/repo.git
git submodule update --init --recursive
</code></pre>
<h3 id="submodule-configuration"><a class="header" href="#submodule-configuration">Submodule Configuration</a></h3>
<pre><code class="language-bash"># .gitmodules file
[submodule "libs/lib"]
    path = libs/lib
    url = https://github.com/user/lib.git
    branch = main
    update = merge

# Ignore changes in submodule
git config submodule.libs/lib.ignore dirty
git config submodule.libs/lib.ignore untracked
git config submodule.libs/lib.ignore all

# Set default update strategy
git config submodule.recurse true
git config submodule.libs/lib.update merge
</code></pre>
<h2 id="subtrees"><a class="header" href="#subtrees">Subtrees</a></h2>
<h3 id="using-subtrees"><a class="header" href="#using-subtrees">Using Subtrees</a></h3>
<pre><code class="language-bash"># Add subtree
git subtree add --prefix=lib https://github.com/user/lib.git main --squash

# Pull updates from subtree
git subtree pull --prefix=lib https://github.com/user/lib.git main --squash

# Push changes to subtree
git subtree push --prefix=lib https://github.com/user/lib.git main

# Split subtree into separate branch
git subtree split --prefix=lib -b lib-only

# Add subtree from existing code
git remote add lib-origin https://github.com/user/lib.git
git subtree add --prefix=lib lib-origin main
</code></pre>
<h3 id="subtree-vs-submodule"><a class="header" href="#subtree-vs-submodule">Subtree vs Submodule</a></h3>
<p><strong>Submodules:</strong></p>
<ul>
<li>Separate repositories</li>
<li>Track specific commits</li>
<li>Require initialization</li>
<li>Better for independent projects</li>
<li>Smaller parent repo size</li>
</ul>
<p><strong>Subtrees:</strong></p>
<ul>
<li>Merged into parent repository</li>
<li>No special commands needed for cloning</li>
<li>Simplified workflow</li>
<li>Better for vendoring</li>
<li>Larger parent repo size</li>
</ul>
<pre><code class="language-bash"># Migrate from submodule to subtree
git submodule deinit libs/lib
git rm libs/lib
rm -rf .git/modules/libs/lib
git subtree add --prefix=libs/lib https://github.com/user/lib.git main --squash
</code></pre>
<h2 id="repository-maintenance"><a class="header" href="#repository-maintenance">Repository Maintenance</a></h2>
<h3 id="optimization"><a class="header" href="#optimization">Optimization</a></h3>
<pre><code class="language-bash"># Garbage collection
git gc
git gc --aggressive  # More thorough, slower

# Prune unreachable objects
git prune
git prune --dry-run  # See what would be deleted

# Clean up repository
git clean -n   # Dry run
git clean -fd  # Remove untracked files and directories
git clean -fdx # Include ignored files

# Repack objects
git repack
git repack -a -d -f --depth=250 --window=250

# Optimize repository
git gc --aggressive --prune=now

# Reduce repository size
git reflog expire --expire=now --all
git gc --prune=now --aggressive
</code></pre>
<h3 id="repository-verification"><a class="header" href="#repository-verification">Repository Verification</a></h3>
<pre><code class="language-bash"># Verify repository integrity
git fsck
git fsck --full
git fsck --unreachable

# Check object database
git count-objects -v
git count-objects -vH  # Human-readable

# Verify connectivity
git fsck --connectivity-only

# Find corrupted objects
git fsck --lost-found
</code></pre>
<h3 id="repository-statistics"><a class="header" href="#repository-statistics">Repository Statistics</a></h3>
<pre><code class="language-bash"># Repository size
du -sh .git/

# Object count and size
git count-objects -v

# Largest objects
git rev-list --objects --all |
  git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' |
  sed -n 's/^blob //p' |
  sort -rnk2 |
  head -20

# Commit count by author
git shortlog -sn

# Repository activity
git log --all --oneline --graph --decorate

# File change frequency
git log --all --format=format: --name-only | sort | uniq -c | sort -rn | head -20
</code></pre>
<h3 id="backup-and-recovery"><a class="header" href="#backup-and-recovery">Backup and Recovery</a></h3>
<pre><code class="language-bash"># Create backup
git bundle create repo-backup.bundle --all
git clone repo-backup.bundle repo-restored

# Incremental backup
git bundle create repo-incremental.bundle main ^backup-branch
git bundle verify repo-backup.bundle

# Mirror repository
git clone --mirror https://github.com/user/repo.git backup-repo.git
cd backup-repo.git
git remote update

# Export repository
git fast-export --all &gt; repo-export.txt
git fast-import &lt; repo-export.txt

# Recover deleted branch
git reflog
git checkout -b recovered-branch abc1234

# Recover deleted commits
git fsck --lost-found
git show &lt;dangling-commit-hash&gt;
git cherry-pick &lt;hash&gt;
</code></pre>
<h2 id="repository-templates"><a class="header" href="#repository-templates">Repository Templates</a></h2>
<h3 id="creating-templates"><a class="header" href="#creating-templates">Creating Templates</a></h3>
<pre><code class="language-bash"># Create template directory
mkdir -p ~/.git-templates/hooks

# Add template files
cat &gt; ~/.git-templates/hooks/pre-commit &lt;&lt; 'EOF'
#!/bin/bash
# Run linter before commit
npm run lint
EOF
chmod +x ~/.git-templates/hooks/pre-commit

# Configure Git to use template
git config --global init.templateDir ~/.git-templates

# Initialize with template
git init  # Uses global template
git init --template=/path/to/template
</code></pre>
<h3 id="template-structure"><a class="header" href="#template-structure">Template Structure</a></h3>
<pre><code>.git-templates/
├── hooks/
│   ├── pre-commit
│   ├── commit-msg
│   ├── pre-push
│   └── post-merge
├── info/
│   └── exclude
└── description
</code></pre>
<h3 id="common-template-files"><a class="header" href="#common-template-files">Common Template Files</a></h3>
<p><strong><code>.git-templates/info/exclude</code>:</strong></p>
<pre><code>*.swp
*.swo
*~
.DS_Store
.idea/
.vscode/
</code></pre>
<p><strong><code>.git-templates/hooks/commit-msg</code>:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# Enforce commit message format
commit_msg=$(cat "$1")
pattern="^(feat|fix|docs|style|refactor|test|chore):"

if ! echo "$commit_msg" | grep -qE "$pattern"; then
    echo "Error: Commit message must start with type (feat|fix|docs|...)"
    exit 1
fi
</code></pre>
<h2 id="migration-and-conversion"><a class="header" href="#migration-and-conversion">Migration and Conversion</a></h2>
<h3 id="migrating-from-other-vcs"><a class="header" href="#migrating-from-other-vcs">Migrating from Other VCS</a></h3>
<p><strong>From SVN:</strong></p>
<pre><code class="language-bash"># Clone SVN repository
git svn clone https://svn.example.com/repo --stdlayout

# Or with custom layout
git svn clone https://svn.example.com/repo \
  --trunk=main \
  --branches=branches \
  --tags=tags

# Convert authors
cat &gt; authors.txt &lt;&lt; EOF
svnuser = Git User &lt;user@example.com&gt;
EOF
git svn clone --authors-file=authors.txt https://svn.example.com/repo

# Clean up
git remote add origin https://github.com/user/repo.git
git push -u origin main
</code></pre>
<p><strong>From Mercurial:</strong></p>
<pre><code class="language-bash"># Use hg-git plugin
hg bookmark -r default main
git clone hg::https://hg.example.com/repo

# Or use fast-export
git init repo
cd repo
hg-fast-export.sh -r /path/to/hg/repo
git remote add origin https://github.com/user/repo.git
git push -u origin main
</code></pre>
<h3 id="repository-splitting"><a class="header" href="#repository-splitting">Repository Splitting</a></h3>
<pre><code class="language-bash"># Split subdirectory into new repo
git filter-branch --subdirectory-filter subdir -- --all

# Or use filter-repo (faster, recommended)
git filter-repo --path subdir/

# Create new repository
git remote add origin https://github.com/user/new-repo.git
git push -u origin main

# Split by path patterns
git filter-repo --path src/module1/ --path docs/module1/
</code></pre>
<h3 id="repository-merging"><a class="header" href="#repository-merging">Repository Merging</a></h3>
<pre><code class="language-bash"># Merge multiple repos into one
git remote add repo1 https://github.com/user/repo1.git
git fetch repo1
git merge repo1/main --allow-unrelated-histories

# Move to subdirectory
git filter-repo --to-subdirectory-filter repo1/

# Repeat for other repositories
git remote add repo2 https://github.com/user/repo2.git
git fetch repo2
git filter-repo --to-subdirectory-filter repo2/
git merge repo2/main --allow-unrelated-histories
</code></pre>
<h3 id="history-rewriting"><a class="header" href="#history-rewriting">History Rewriting</a></h3>
<pre><code class="language-bash"># Remove sensitive data
git filter-branch --tree-filter 'rm -f passwords.txt' HEAD
# Better: use filter-repo
git filter-repo --invert-paths --path passwords.txt

# Change author information
git filter-branch --env-filter '
if [ "$GIT_COMMITTER_EMAIL" = "old@example.com" ]; then
    export GIT_COMMITTER_NAME="New Name"
    export GIT_COMMITTER_EMAIL="new@example.com"
fi
if [ "$GIT_AUTHOR_EMAIL" = "old@example.com" ]; then
    export GIT_AUTHOR_NAME="New Name"
    export GIT_AUTHOR_EMAIL="new@example.com"
fi
' --tag-name-filter cat -- --branches --tags

# Remove large files
git filter-repo --strip-blobs-bigger-than 10M

# Simplify history
git filter-branch --commit-filter '
    if [ "$GIT_AUTHOR_NAME" = "Temporary User" ]; then
        skip_commit "$@"
    else
        git commit-tree "$@"
    fi
' HEAD
</code></pre>
<h2 id="advanced-repository-operations"><a class="header" href="#advanced-repository-operations">Advanced Repository Operations</a></h2>
<h3 id="worktrees"><a class="header" href="#worktrees">Worktrees</a></h3>
<p>Work on multiple branches simultaneously.</p>
<pre><code class="language-bash"># Add worktree
git worktree add ../project-feature1 feature1
git worktree add -b feature2 ../project-feature2

# List worktrees
git worktree list

# Remove worktree
git worktree remove ../project-feature1
git worktree prune

# Lock/unlock worktree
git worktree lock ../project-feature1
git worktree unlock ../project-feature1

# Move worktree
git worktree move ../project-feature1 ../new-location
</code></pre>
<h3 id="sparse-checkout"><a class="header" href="#sparse-checkout">Sparse Checkout</a></h3>
<p>Checkout only specific directories.</p>
<pre><code class="language-bash"># Enable sparse checkout
git sparse-checkout init
git sparse-checkout init --cone  # Cone mode (recommended)

# Set patterns
git sparse-checkout set src/ docs/
git sparse-checkout add tests/

# View patterns
git sparse-checkout list

# Disable sparse checkout
git sparse-checkout disable
</code></pre>
<h3 id="partial-clone"><a class="header" href="#partial-clone">Partial Clone</a></h3>
<p>Clone without all objects (lazy loading).</p>
<pre><code class="language-bash"># Blob-less clone
git clone --filter=blob:none https://github.com/user/huge-repo.git

# Tree-less clone
git clone --filter=tree:0 https://github.com/user/huge-repo.git

# Combine with shallow clone
git clone --depth=1 --filter=blob:none https://github.com/user/repo.git

# Fetch missing objects
git fetch origin
</code></pre>
<h3 id="reference-repository"><a class="header" href="#reference-repository">Reference Repository</a></h3>
<p>Share objects between repositories.</p>
<pre><code class="language-bash"># Clone with reference
git clone --reference /path/to/original /path/to/clone

# Add reference to existing repo
git repack -a -d
git clone --reference /path/to/reference https://github.com/user/repo.git

# Dissociate from reference
git repack -a -d
rm -rf .git/objects/info/alternates
</code></pre>
<h2 id="repository-configuration-1"><a class="header" href="#repository-configuration-1">Repository Configuration</a></h2>
<h3 id="config-scopes"><a class="header" href="#config-scopes">Config Scopes</a></h3>
<pre><code class="language-bash"># System-wide (/etc/gitconfig)
git config --system core.editor vim

# User-level (~/.gitconfig)
git config --global user.name "John Doe"

# Repository-level (.git/config)
git config user.email john@project.com

# Worktree-level (.git/config.worktree)
git config --worktree core.sparseCheckout true

# View all configs with origin
git config --list --show-origin
git config --list --show-scope
</code></pre>
<h3 id="conditional-configuration"><a class="header" href="#conditional-configuration">Conditional Configuration</a></h3>
<p><strong>~/.gitconfig:</strong></p>
<pre><code class="language-ini">[user]
    name = John Doe
    email = personal@example.com

[includeIf "gitdir:~/work/"]
    path = ~/.gitconfig-work

[includeIf "gitdir:~/projects/opensource/"]
    path = ~/.gitconfig-opensource
</code></pre>
<p><strong>~/.gitconfig-work:</strong></p>
<pre><code class="language-ini">[user]
    email = john.doe@company.com
</code></pre>
<h3 id="advanced-settings"><a class="header" href="#advanced-settings">Advanced Settings</a></h3>
<pre><code class="language-bash"># Reuse recorded resolutions
git config rerere.enabled true
git config rerere.autoUpdate true

# Default merge strategy
git config merge.strategy recursive
git config merge.conflictStyle diff3

# Commit signing
git config commit.gpgSign true
git config user.signingKey ABC123

# Push configuration
git config push.default simple
git config push.followTags true
git config push.autoSetupRemote true

# Diff and merge tools
git config diff.tool vimdiff
git config merge.tool meld
git config mergetool.keepBackup false

# Performance settings
git config core.preloadIndex true
git config core.fscache true
git config gc.auto 256

# Security
git config transfer.fsckObjects true
git config receive.fsckObjects true
git config fetch.fsckObjects true
</code></pre>
<h3 id="repository-attributes"><a class="header" href="#repository-attributes">Repository Attributes</a></h3>
<p><strong>.gitattributes:</strong></p>
<pre><code># Line endings
* text=auto
*.sh text eol=lf
*.bat text eol=crlf

# Binary files
*.png binary
*.jpg binary
*.pdf binary

# Diff drivers
*.ipynb diff=jupyternotebook
*.json diff=json

# Merge strategies
Makefile merge=union
CHANGELOG.md merge=union

# Export settings
.gitattributes export-ignore
.gitignore export-ignore
tests/ export-ignore

# Language statistics
docs/* linguist-documentation
vendor/* linguist-vendored
*.js linguist-language=JavaScript
</code></pre>
<h2 id="repository-hooks"><a class="header" href="#repository-hooks">Repository Hooks</a></h2>
<h3 id="client-side-hooks"><a class="header" href="#client-side-hooks">Client-Side Hooks</a></h3>
<pre><code class="language-bash"># Pre-commit: Run before commit
.git/hooks/pre-commit

# Prepare-commit-msg: Modify commit message
.git/hooks/prepare-commit-msg

# Commit-msg: Validate commit message
.git/hooks/commit-msg

# Post-commit: Run after commit
.git/hooks/post-commit

# Pre-push: Run before push
.git/hooks/pre-push

# Post-checkout: Run after checkout
.git/hooks/post-checkout

# Post-merge: Run after merge
.git/hooks/post-merge

# Pre-rebase: Run before rebase
.git/hooks/pre-rebase
</code></pre>
<h3 id="server-side-hooks"><a class="header" href="#server-side-hooks">Server-Side Hooks</a></h3>
<pre><code class="language-bash"># Pre-receive: Run before accepting push
.git/hooks/pre-receive

# Update: Run for each branch being updated
.git/hooks/update

# Post-receive: Run after accepting push
.git/hooks/post-receive

# Post-update: Run after all refs updated
.git/hooks/post-update
</code></pre>
<h3 id="hook-examples"><a class="header" href="#hook-examples">Hook Examples</a></h3>
<p><strong>Pre-commit: Run tests</strong></p>
<pre><code class="language-bash">#!/bin/bash
npm test
if [ $? -ne 0 ]; then
    echo "Tests failed. Commit aborted."
    exit 1
fi
</code></pre>
<p><strong>Commit-msg: Enforce format</strong></p>
<pre><code class="language-bash">#!/bin/bash
commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")
pattern="^(feat|fix|docs|style|refactor|test|chore)(\(.+\))?: .+"

if ! echo "$commit_msg" | grep -qE "$pattern"; then
    echo "Invalid commit message format"
    echo "Format: &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;"
    exit 1
fi
</code></pre>
<p><strong>Pre-push: Prevent force push to main</strong></p>
<pre><code class="language-bash">#!/bin/bash
while read local_ref local_sha remote_ref remote_sha; do
    if [[ "$remote_ref" == "refs/heads/main" ]] &amp;&amp; [[ "$local_sha" != "$remote_sha" ]]; then
        echo "Error: Cannot force push to main branch"
        exit 1
    fi
done
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="repository-organization"><a class="header" href="#repository-organization">Repository Organization</a></h3>
<ol>
<li><strong>Consistent structure</strong>: Use standard directory layout</li>
<li><strong>Clear documentation</strong>: Maintain README, CONTRIBUTING, and docs</li>
<li><strong>Ignore correctly</strong>: Use .gitignore for build artifacts</li>
<li><strong>Small commits</strong>: Atomic, focused changes</li>
<li><strong>Meaningful messages</strong>: Descriptive commit messages</li>
<li><strong>Branch protection</strong>: Protect main branches</li>
<li><strong>Code reviews</strong>: Require reviews before merge</li>
<li><strong>CI/CD integration</strong>: Automated testing and deployment</li>
</ol>
<h3 id="performance-optimization"><a class="header" href="#performance-optimization">Performance Optimization</a></h3>
<pre><code class="language-bash"># Enable filesystem cache
git config core.fscache true

# Enable preload index
git config core.preloadIndex true

# Use protocol v2
git config protocol.version 2

# Optimize garbage collection
git config gc.auto 256
git config gc.autoPackLimit 50

# Use commit graph
git config core.commitGraph true
git config gc.writeCommitGraph true
git commit-graph write --reachable

# Enable parallel processing
git config pack.threads 0  # Auto-detect CPU count
</code></pre>
<h3 id="security-best-practices"><a class="header" href="#security-best-practices">Security Best Practices</a></h3>
<pre><code class="language-bash"># Enable fsck on fetch
git config fetch.fsckObjects true
git config receive.fsckObjects true
git config transfer.fsckObjects true

# Sign commits
git config commit.gpgSign true

# Protect against tag replacement
git config receive.denyNonFastForwards true
git config receive.denyDeletes true

# Verify commit signatures
git log --show-signature
git verify-commit HEAD

# Scan for secrets before commit
# Use tools like git-secrets or gitleaks
git secrets --scan
</code></pre>
<h3 id="collaboration-best-practices"><a class="header" href="#collaboration-best-practices">Collaboration Best Practices</a></h3>
<ol>
<li><strong>Clear branch naming</strong>: Use consistent naming conventions</li>
<li><strong>Protected branches</strong>: Require reviews and tests</li>
<li><strong>Rebase vs merge</strong>: Choose strategy consistently</li>
<li><strong>Force push carefully</strong>: Use --force-with-lease</li>
<li><strong>Clean history</strong>: Squash/rebase before merging</li>
<li><strong>Tag releases</strong>: Use semantic versioning</li>
<li><strong>Document changes</strong>: Maintain CHANGELOG</li>
<li><strong>Code owners</strong>: Use CODEOWNERS file</li>
</ol>
<h3 id="repository-hygiene"><a class="header" href="#repository-hygiene">Repository Hygiene</a></h3>
<pre><code class="language-bash"># Regular maintenance
git fetch --prune
git remote prune origin
git gc --auto

# Clean up branches
git branch --merged | grep -v "\*" | xargs -n 1 git branch -d

# Update submodules
git submodule update --remote --merge

# Verify repository health
git fsck --full

# Optimize periodically
git repack -a -d -f --depth=250 --window=250
git gc --aggressive
</code></pre>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="common-issues"><a class="header" href="#common-issues">Common Issues</a></h3>
<p><strong>Repository corruption:</strong></p>
<pre><code class="language-bash"># Verify integrity
git fsck --full

# Recover from corruption
git reflog expire --expire=now --all
git gc --prune=now

# Clone fresh copy if needed
git clone --mirror corrupt-repo fresh-repo
</code></pre>
<p><strong>Large repository size:</strong></p>
<pre><code class="language-bash"># Find large files
git rev-list --objects --all |
  git cat-file --batch-check='%(objecttype) %(objectname) %(objectsize) %(rest)' |
  awk '/^blob/ {print substr($0,6)}' |
  sort -nk2 |
  tail -20

# Remove large files
git filter-repo --strip-blobs-bigger-than 10M

# Reduce pack size
git repack -a -d -f --depth=250 --window=250
</code></pre>
<p><strong>Submodule issues:</strong></p>
<pre><code class="language-bash"># Reset submodules
git submodule deinit --all -f
git submodule update --init --recursive

# Fix detached HEAD in submodule
cd submodule
git checkout main
cd ..
git add submodule
</code></pre>
<p><strong>Merge conflicts in binary files:</strong></p>
<pre><code class="language-bash"># Use ours or theirs
git checkout --ours file.bin
git checkout --theirs file.bin

# Configure merge driver
git config merge.ours.driver true
# In .gitattributes:
# *.bin merge=ours
</code></pre>
<p><strong>Detached HEAD state:</strong></p>
<pre><code class="language-bash"># Create branch from detached HEAD
git checkout -b recovery-branch

# Return to previous branch
git checkout -

# Recover lost commits
git reflog
git checkout -b recovery &lt;commit-hash&gt;
</code></pre>
<h3 id="recovery-operations"><a class="header" href="#recovery-operations">Recovery Operations</a></h3>
<p><strong>Recover deleted branch:</strong></p>
<pre><code class="language-bash">git reflog
git checkout -b recovered-branch &lt;commit-hash&gt;
</code></pre>
<p><strong>Recover from hard reset:</strong></p>
<pre><code class="language-bash">git reflog
git reset --hard &lt;commit-before-reset&gt;
</code></pre>
<p><strong>Undo published commits:</strong></p>
<pre><code class="language-bash"># Create revert commit
git revert &lt;commit-hash&gt;

# Or revert multiple commits
git revert &lt;oldest-hash&gt;..&lt;newest-hash&gt;
</code></pre>
<p><strong>Fix wrong commit message:</strong></p>
<pre><code class="language-bash"># Last commit (not pushed)
git commit --amend -m "Corrected message"

# Older commit
git rebase -i &lt;commit-before&gt;^
# Change "pick" to "reword" for commit
</code></pre>
<h2 id="quick-reference"><a class="header" href="#quick-reference">Quick Reference</a></h2>
<h3 id="repository-commands"><a class="header" href="#repository-commands">Repository Commands</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody>
<tr><td><code>git init</code></td><td>Initialize repository</td></tr>
<tr><td><code>git clone</code></td><td>Clone repository</td></tr>
<tr><td><code>git remote</code></td><td>Manage remotes</td></tr>
<tr><td><code>git fetch</code></td><td>Fetch from remote</td></tr>
<tr><td><code>git pull</code></td><td>Fetch and merge</td></tr>
<tr><td><code>git push</code></td><td>Push to remote</td></tr>
<tr><td><code>git submodule</code></td><td>Manage submodules</td></tr>
<tr><td><code>git subtree</code></td><td>Manage subtrees</td></tr>
<tr><td><code>git worktree</code></td><td>Manage worktrees</td></tr>
<tr><td><code>git gc</code></td><td>Garbage collection</td></tr>
<tr><td><code>git fsck</code></td><td>Verify repository</td></tr>
<tr><td><code>git bundle</code></td><td>Create repository bundle</td></tr>
<tr><td><code>git filter-repo</code></td><td>Rewrite history</td></tr>
</tbody></table>
</div>
<h3 id="configuration-levels"><a class="header" href="#configuration-levels">Configuration Levels</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Scope</th><th>Flag</th><th>File</th><th>Priority</th></tr></thead><tbody>
<tr><td>System</td><td><code>--system</code></td><td><code>/etc/gitconfig</code></td><td>Lowest</td></tr>
<tr><td>Global</td><td><code>--global</code></td><td><code>~/.gitconfig</code></td><td>Medium</td></tr>
<tr><td>Local</td><td><code>--local</code></td><td><code>.git/config</code></td><td>High</td></tr>
<tr><td>Worktree</td><td><code>--worktree</code></td><td><code>.git/config.worktree</code></td><td>Highest</td></tr>
</tbody></table>
</div>
<h3 id="repository-health-checklist"><a class="header" href="#repository-health-checklist">Repository Health Checklist</a></h3>
<ul>
<li><input disabled="" type="checkbox"/>
Repository size is reasonable</li>
<li><input disabled="" type="checkbox"/>
No large binary files in history</li>
<li><input disabled="" type="checkbox"/>
.gitignore is comprehensive</li>
<li><input disabled="" type="checkbox"/>
Branches are up to date</li>
<li><input disabled="" type="checkbox"/>
Remote references are clean</li>
<li><input disabled="" type="checkbox"/>
Hooks are configured correctly</li>
<li><input disabled="" type="checkbox"/>
Tests pass on all branches</li>
<li><input disabled="" type="checkbox"/>
Documentation is current</li>
<li><input disabled="" type="checkbox"/>
Security scanning enabled</li>
<li><input disabled="" type="checkbox"/>
Backup strategy in place</li>
</ul>
<p>Effective repository management ensures smooth collaboration, optimal performance, and long-term maintainability of your projects.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../git/github.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../programming/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../git/github.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../programming/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
