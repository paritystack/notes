<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Matplotlib - My Notes</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon-de23e50b.svg">
        <link rel="shortcut icon" href="../favicon-8114d1fc.png">
        <link rel="stylesheet" href="../css/variables-8adf115d.css">
        <link rel="stylesheet" href="../css/general-2459343d.css">
        <link rel="stylesheet" href="../css/chrome-9dfbd86b.css">
        <link rel="stylesheet" href="../css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="../highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="../tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="../ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex-e553fe6e.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc-da6337af.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">My Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="matplotlib-complete-guide-for-data-visualization"><a class="header" href="#matplotlib-complete-guide-for-data-visualization">Matplotlib: Complete Guide for Data Visualization</a></h1>
<p>Matplotlib is the foundational plotting library for Python, providing publication-quality visualizations and serving as the basis for many other plotting libraries (Seaborn, Pandas plotting, etc.).</p>
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="#architecture--core-concepts">Architecture &amp; Core Concepts</a></li>
<li><a href="#basic-plotting">Basic Plotting</a></li>
<li><a href="#figure-and-axes-management">Figure and Axes Management</a></li>
<li><a href="#customization-deep-dive">Customization Deep Dive</a></li>
<li><a href="#advanced-plot-types">Advanced Plot Types</a></li>
<li><a href="#styling-and-themes">Styling and Themes</a></li>
<li><a href="#mldata-science-visualizations">ML/Data Science Visualizations</a></li>
<li><a href="#working-with-images">Working with Images</a></li>
<li><a href="#animations">Animations</a></li>
<li><a href="#integration-patterns">Integration Patterns</a></li>
<li><a href="#performance--best-practices">Performance &amp; Best Practices</a></li>
<li><a href="#common-patterns--recipes">Common Patterns &amp; Recipes</a></li>
</ul>
<hr>
<h2 id="architecture--core-concepts"><a class="header" href="#architecture--core-concepts">Architecture &amp; Core Concepts</a></h2>
<h3 id="the-matplotlib-hierarchy"><a class="header" href="#the-matplotlib-hierarchy">The Matplotlib Hierarchy</a></h3>
<p>Matplotlib has a hierarchical structure that’s essential to understand:</p>
<pre><code>Figure (entire window)
  └── Axes (plot area, NOT axis!)
        ├── Axis (x-axis, y-axis)
        ├── Spines (plot boundaries)
        ├── Artists (everything you see)
        └── Legend, Title, Labels
</code></pre>
<pre><code class="language-python">import matplotlib.pyplot as plt
import numpy as np

# Understanding the hierarchy
fig = plt.figure(figsize=(10, 6))  # Figure: the whole window
ax = fig.add_subplot(111)           # Axes: a plot area

# Everything drawn is an "Artist"
line, = ax.plot([1, 2, 3], [1, 4, 2])  # Line2D artist
text = ax.text(2, 3, 'Point')          # Text artist
</code></pre>
<h3 id="two-interfaces-pyplot-vs-object-oriented"><a class="header" href="#two-interfaces-pyplot-vs-object-oriented">Two Interfaces: pyplot vs Object-Oriented</a></h3>
<pre><code class="language-python"># PYPLOT INTERFACE (MATLAB-style, stateful)
plt.plot([1, 2, 3], [1, 4, 2])
plt.xlabel('X Label')
plt.ylabel('Y Label')
plt.title('Title')
plt.show()

# OBJECT-ORIENTED INTERFACE (Recommended for complex plots)
fig, ax = plt.subplots()
ax.plot([1, 2, 3], [1, 4, 2])
ax.set_xlabel('X Label')
ax.set_ylabel('Y Label')
ax.set_title('Title')
plt.show()
</code></pre>
<p><strong>When to use which:</strong></p>
<ul>
<li><strong>pyplot</strong>: Quick exploratory plots, simple scripts</li>
<li><strong>OO interface</strong>: Complex figures, multiple subplots, functions that create plots, production code</li>
</ul>
<h3 id="key-design-principle"><a class="header" href="#key-design-principle">Key Design Principle</a></h3>
<pre><code class="language-python"># Everything in matplotlib is customizable
# General pattern:
fig, ax = plt.subplots()

# Plot data
artist = ax.plot(x, y)

# Customize
ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_title('Title')

# Display or save
plt.savefig('plot.png', dpi=300, bbox_inches='tight')
plt.show()
</code></pre>
<hr>
<h2 id="basic-plotting"><a class="header" href="#basic-plotting">Basic Plotting</a></h2>
<h3 id="line-plots"><a class="header" href="#line-plots">Line Plots</a></h3>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt

# Single line
x = np.linspace(0, 10, 100)
y = np.sin(x)

fig, ax = plt.subplots()
ax.plot(x, y)
ax.set_xlabel('X')
ax.set_ylabel('sin(X)')
ax.set_title('Sine Wave')
plt.show()

# Multiple lines
y1 = np.sin(x)
y2 = np.cos(x)

fig, ax = plt.subplots()
ax.plot(x, y1, label='sin(x)')
ax.plot(x, y2, label='cos(x)')
ax.legend()
ax.grid(True, alpha=0.3)
plt.show()

# Customized line styles
fig, ax = plt.subplots()
ax.plot(x, y1, 'r-', linewidth=2, label='solid')
ax.plot(x, y2, 'b--', linewidth=2, label='dashed')
ax.plot(x, y1 + 0.5, 'g-.', linewidth=2, label='dash-dot')
ax.plot(x, y2 + 0.5, 'k:', linewidth=2, label='dotted')
ax.legend()
plt.show()
</code></pre>
<h3 id="scatter-plots"><a class="header" href="#scatter-plots">Scatter Plots</a></h3>
<pre><code class="language-python"># Basic scatter
x = np.random.randn(100)
y = np.random.randn(100)

fig, ax = plt.subplots()
ax.scatter(x, y)
ax.set_xlabel('X')
ax.set_ylabel('Y')
plt.show()

# Customized scatter with size and color
sizes = np.random.rand(100) * 100
colors = np.random.rand(100)

fig, ax = plt.subplots()
scatter = ax.scatter(x, y, s=sizes, c=colors,
                     cmap='viridis', alpha=0.6,
                     edgecolors='black', linewidth=0.5)
plt.colorbar(scatter, ax=ax, label='Color Value')
ax.set_xlabel('X')
ax.set_ylabel('Y')
plt.show()

# Multiple scatter series
x1 = np.random.normal(0, 1, 100)
y1 = np.random.normal(0, 1, 100)
x2 = np.random.normal(3, 1, 100)
y2 = np.random.normal(3, 1, 100)

fig, ax = plt.subplots()
ax.scatter(x1, y1, label='Class 1', alpha=0.6)
ax.scatter(x2, y2, label='Class 2', alpha=0.6)
ax.legend()
ax.set_xlabel('Feature 1')
ax.set_ylabel('Feature 2')
plt.show()
</code></pre>
<h3 id="bar-charts"><a class="header" href="#bar-charts">Bar Charts</a></h3>
<pre><code class="language-python"># Vertical bar chart
categories = ['A', 'B', 'C', 'D', 'E']
values = [25, 40, 30, 55, 45]

fig, ax = plt.subplots()
bars = ax.bar(categories, values, color='steelblue',
              edgecolor='black', linewidth=1.2)
ax.set_ylabel('Values')
ax.set_title('Bar Chart')

# Add value labels on bars
for bar in bars:
    height = bar.get_height()
    ax.text(bar.get_x() + bar.get_width()/2., height,
            f'{height}', ha='center', va='bottom')
plt.show()

# Horizontal bar chart
fig, ax = plt.subplots()
ax.barh(categories, values, color='coral')
ax.set_xlabel('Values')
plt.show()

# Grouped bar chart
x = np.arange(len(categories))
values1 = [25, 40, 30, 55, 45]
values2 = [30, 35, 45, 40, 50]
width = 0.35

fig, ax = plt.subplots()
bars1 = ax.bar(x - width/2, values1, width, label='Group 1')
bars2 = ax.bar(x + width/2, values2, width, label='Group 2')
ax.set_xticks(x)
ax.set_xticklabels(categories)
ax.legend()
plt.show()

# Stacked bar chart
fig, ax = plt.subplots()
ax.bar(categories, values1, label='Part 1')
ax.bar(categories, values2, bottom=values1, label='Part 2')
ax.legend()
plt.show()
</code></pre>
<h3 id="histograms"><a class="header" href="#histograms">Histograms</a></h3>
<pre><code class="language-python"># Basic histogram
data = np.random.randn(1000)

fig, ax = plt.subplots()
ax.hist(data, bins=30, edgecolor='black', alpha=0.7)
ax.set_xlabel('Value')
ax.set_ylabel('Frequency')
ax.set_title('Histogram')
plt.show()

# Multiple histograms
data1 = np.random.normal(0, 1, 1000)
data2 = np.random.normal(2, 1.5, 1000)

fig, ax = plt.subplots()
ax.hist(data1, bins=30, alpha=0.5, label='Distribution 1')
ax.hist(data2, bins=30, alpha=0.5, label='Distribution 2')
ax.legend()
plt.show()

# Normalized histogram (density)
fig, ax = plt.subplots()
ax.hist(data, bins=30, density=True, alpha=0.7,
        edgecolor='black', label='Data')

# Overlay theoretical distribution
mu, sigma = 0, 1
x = np.linspace(data.min(), data.max(), 100)
ax.plot(x, 1/(sigma * np.sqrt(2 * np.pi)) *
        np.exp(-0.5 * ((x - mu)/sigma)**2),
        'r-', linewidth=2, label='Theoretical')
ax.legend()
plt.show()

# 2D histogram (hexbin)
x = np.random.randn(10000)
y = np.random.randn(10000)

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
ax1.hist2d(x, y, bins=50, cmap='Blues')
ax1.set_title('2D Histogram')

hexbin = ax2.hexbin(x, y, gridsize=30, cmap='Reds')
ax2.set_title('Hexbin')
plt.colorbar(hexbin, ax=ax2)
plt.show()
</code></pre>
<h3 id="pie-charts"><a class="header" href="#pie-charts">Pie Charts</a></h3>
<pre><code class="language-python"># Basic pie chart
sizes = [25, 35, 20, 20]
labels = ['A', 'B', 'C', 'D']

fig, ax = plt.subplots()
ax.pie(sizes, labels=labels, autopct='%1.1f%%',
       startangle=90)
ax.axis('equal')  # Equal aspect ratio
plt.show()

# Exploded pie chart with custom colors
explode = (0.1, 0, 0, 0)
colors = ['#ff9999', '#66b3ff', '#99ff99', '#ffcc99']

fig, ax = plt.subplots()
wedges, texts, autotexts = ax.pie(sizes, labels=labels,
                                    autopct='%1.1f%%',
                                    startangle=90,
                                    explode=explode,
                                    colors=colors,
                                    shadow=True)
# Customize text
for autotext in autotexts:
    autotext.set_color('white')
    autotext.set_weight('bold')
plt.show()

# Donut chart
fig, ax = plt.subplots()
ax.pie(sizes, labels=labels, autopct='%1.1f%%',
       wedgeprops=dict(width=0.5))  # Creates donut
ax.axis('equal')
plt.show()
</code></pre>
<hr>
<h2 id="figure-and-axes-management"><a class="header" href="#figure-and-axes-management">Figure and Axes Management</a></h2>
<h3 id="creating-figures-and-subplots"><a class="header" href="#creating-figures-and-subplots">Creating Figures and Subplots</a></h3>
<pre><code class="language-python"># Method 1: plt.subplots() (Recommended)
fig, ax = plt.subplots(figsize=(10, 6))
ax.plot([1, 2, 3], [1, 4, 2])

# Method 2: Multiple subplots
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
ax1.plot([1, 2, 3])
ax2.plot([3, 2, 1])

# Method 3: Grid of subplots
fig, axes = plt.subplots(2, 3, figsize=(15, 10))
for i, ax in enumerate(axes.flat):
    ax.plot(np.random.randn(10))
    ax.set_title(f'Subplot {i+1}')

# Method 4: Figure first, then add axes
fig = plt.figure(figsize=(10, 6))
ax = fig.add_subplot(111)  # 1 row, 1 col, index 1
</code></pre>
<h3 id="complex-layouts-with-gridspec"><a class="header" href="#complex-layouts-with-gridspec">Complex Layouts with GridSpec</a></h3>
<pre><code class="language-python">import matplotlib.gridspec as gridspec

# GridSpec for flexible layouts
fig = plt.figure(figsize=(12, 8))
gs = gridspec.GridSpec(3, 3, figure=fig)

# Span multiple cells
ax1 = fig.add_subplot(gs[0, :])   # First row, all columns
ax2 = fig.add_subplot(gs[1, :-1]) # Second row, first 2 columns
ax3 = fig.add_subplot(gs[1:, -1]) # Last 2 rows, last column
ax4 = fig.add_subplot(gs[-1, 0])  # Last row, first column
ax5 = fig.add_subplot(gs[-1, 1])  # Last row, second column

ax1.plot(np.random.randn(100))
ax1.set_title('Wide Top Panel')

ax2.plot(np.random.randn(100))
ax2.set_title('Middle Left')

ax3.plot(np.random.randn(100))
ax3.set_title('Right Panel')

ax4.plot(np.random.randn(100))
ax5.plot(np.random.randn(100))

plt.tight_layout()
plt.show()

# Unequal spacing
fig = plt.figure(figsize=(12, 8))
gs = gridspec.GridSpec(2, 2,
                       width_ratios=[2, 1],
                       height_ratios=[1, 2],
                       hspace=0.3, wspace=0.3)

for i in range(4):
    ax = fig.add_subplot(gs[i])
    ax.plot(np.random.randn(100))
    ax.set_title(f'Subplot {i+1}')
plt.show()
</code></pre>
<h3 id="subplot-sharing-and-linking"><a class="header" href="#subplot-sharing-and-linking">Subplot Sharing and Linking</a></h3>
<pre><code class="language-python"># Shared axes
fig, (ax1, ax2) = plt.subplots(2, 1, sharex=True, figsize=(10, 8))
x = np.linspace(0, 10, 100)
ax1.plot(x, np.sin(x))
ax1.set_ylabel('sin(x)')
ax2.plot(x, np.cos(x))
ax2.set_ylabel('cos(x)')
ax2.set_xlabel('x')
plt.show()

# Grid with shared axes
fig, axes = plt.subplots(2, 2, sharex='col', sharey='row',
                         figsize=(10, 8))
for i in range(2):
    for j in range(2):
        axes[i, j].plot(np.random.randn(100).cumsum())
plt.show()
</code></pre>
<h3 id="inset-axes-and-zooming"><a class="header" href="#inset-axes-and-zooming">Inset Axes and Zooming</a></h3>
<pre><code class="language-python">from mpl_toolkits.axes_grid1.inset_locator import inset_axes, mark_inset

fig, ax = plt.subplots(figsize=(10, 6))

# Main plot
x = np.linspace(0, 10, 1000)
y = np.sin(x) * np.exp(-x/10)
ax.plot(x, y)

# Inset axes
axins = inset_axes(ax, width="40%", height="30%", loc='upper right')
axins.plot(x, y)
axins.set_xlim(2, 3)
axins.set_ylim(0.3, 0.5)
axins.set_xticks([])
axins.set_yticks([])

# Mark the inset region
mark_inset(ax, axins, loc1=2, loc2=4, fc="none", ec="0.5")
plt.show()
</code></pre>
<h3 id="twin-axes-two-y-axes"><a class="header" href="#twin-axes-two-y-axes">Twin Axes (Two Y-axes)</a></h3>
<pre><code class="language-python">fig, ax1 = plt.subplots(figsize=(10, 6))

x = np.linspace(0, 10, 100)
y1 = np.sin(x)
y2 = np.exp(x/5)

# First y-axis
color = 'tab:blue'
ax1.set_xlabel('X')
ax1.set_ylabel('sin(x)', color=color)
ax1.plot(x, y1, color=color)
ax1.tick_params(axis='y', labelcolor=color)

# Second y-axis
ax2 = ax1.twinx()
color = 'tab:red'
ax2.set_ylabel('exp(x/5)', color=color)
ax2.plot(x, y2, color=color)
ax2.tick_params(axis='y', labelcolor=color)

fig.tight_layout()
plt.show()
</code></pre>
<hr>
<h2 id="customization-deep-dive"><a class="header" href="#customization-deep-dive">Customization Deep Dive</a></h2>
<h3 id="colors"><a class="header" href="#colors">Colors</a></h3>
<pre><code class="language-python"># Named colors
colors = ['red', 'green', 'blue', 'cyan', 'magenta', 'yellow', 'black']

# Hex colors
colors = ['#FF5733', '#33FF57', '#3357FF']

# RGB tuples (0-1)
colors = [(0.8, 0.2, 0.1), (0.1, 0.8, 0.2)]

# RGBA with transparency
colors = [(0.8, 0.2, 0.1, 0.5)]

# Colormaps
x = np.linspace(0, 10, 100)
fig, ax = plt.subplots()
for i in range(10):
    color = plt.cm.viridis(i / 10)  # Get color from colormap
    ax.plot(x, np.sin(x + i/5), color=color)
plt.show()

# Popular colormaps
cmaps = ['viridis', 'plasma', 'inferno', 'magma', 'cividis',  # Perceptually uniform
         'coolwarm', 'RdYlBu', 'RdYlGn',  # Diverging
         'Greys', 'Blues', 'Reds',  # Sequential
         'tab10', 'tab20', 'Set1']  # Qualitative

# Custom colormap
from matplotlib.colors import LinearSegmentedColormap
colors_list = ['blue', 'white', 'red']
n_bins = 100
cmap = LinearSegmentedColormap.from_list('custom', colors_list, N=n_bins)

# Using colormap
data = np.random.rand(10, 10)
fig, ax = plt.subplots()
im = ax.imshow(data, cmap=cmap)
plt.colorbar(im, ax=ax)
plt.show()
</code></pre>
<h3 id="markers-and-line-styles"><a class="header" href="#markers-and-line-styles">Markers and Line Styles</a></h3>
<pre><code class="language-python"># Markers
markers = ['.', 'o', 'v', '^', '&lt;', '&gt;', 's', 'p', '*', 'h', 'H',
           '+', 'x', 'D', 'd', '|', '_']

fig, ax = plt.subplots(figsize=(12, 6))
x = np.arange(len(markers))
for i, marker in enumerate(markers):
    ax.plot(i, i, marker=marker, markersize=10, label=marker)
ax.legend(ncol=6)
plt.show()

# Line styles
linestyles = ['-', '--', '-.', ':']
fig, ax = plt.subplots()
x = np.linspace(0, 10, 100)
for i, ls in enumerate(linestyles):
    ax.plot(x, np.sin(x) + i, linestyle=ls, linewidth=2,
            label=f"'{ls}'")
ax.legend()
plt.show()

# Combined format string
# Format: '[marker][line][color]'
fig, ax = plt.subplots()
ax.plot([1, 2, 3], [1, 4, 2], 'ro-')   # Red circles with solid line
ax.plot([1, 2, 3], [2, 3, 1], 'bs--')  # Blue squares with dashed line
ax.plot([1, 2, 3], [0.5, 2.5, 1.5], 'g^:')  # Green triangles with dotted line
plt.show()

# Detailed customization
fig, ax = plt.subplots()
ax.plot([1, 2, 3], [1, 4, 2],
        marker='o',
        markersize=10,
        markerfacecolor='red',
        markeredgecolor='black',
        markeredgewidth=2,
        linestyle='--',
        linewidth=2,
        color='blue',
        alpha=0.7)
plt.show()
</code></pre>
<h3 id="labels-titles-and-legends"><a class="header" href="#labels-titles-and-legends">Labels, Titles, and Legends</a></h3>
<pre><code class="language-python">fig, ax = plt.subplots(figsize=(10, 6))

x = np.linspace(0, 10, 100)
ax.plot(x, np.sin(x), label='sin(x)')
ax.plot(x, np.cos(x), label='cos(x)')

# Title with customization
ax.set_title('Trigonometric Functions',
             fontsize=16, fontweight='bold',
             pad=20)

# Axis labels
ax.set_xlabel('X Axis', fontsize=12, fontweight='bold')
ax.set_ylabel('Y Axis', fontsize=12, fontweight='bold')

# Legend customization
ax.legend(loc='upper right',           # Location
          frameon=True,                # Frame
          fancybox=True,              # Rounded corners
          shadow=True,                # Shadow
          ncol=2,                     # Number of columns
          fontsize=10,
          title='Functions',
          title_fontsize=12)

# Alternative legend locations
# 'best', 'upper right', 'upper left', 'lower left', 'lower right',
# 'right', 'center left', 'center right', 'lower center', 'upper center', 'center'

# Legend outside plot
ax.legend(bbox_to_anchor=(1.05, 1), loc='upper left')

plt.tight_layout()
plt.show()

# Multiple legends
fig, ax = plt.subplots()
line1, = ax.plot([1, 2, 3], [1, 2, 3], 'r-', label='Red')
line2, = ax.plot([1, 2, 3], [3, 2, 1], 'b-', label='Blue')

# First legend
legend1 = ax.legend(handles=[line1], loc='upper left')
ax.add_artist(legend1)  # Add first legend back

# Second legend
ax.legend(handles=[line2], loc='upper right')
plt.show()
</code></pre>
<h3 id="tick-customization"><a class="header" href="#tick-customization">Tick Customization</a></h3>
<pre><code class="language-python">fig, ax = plt.subplots(figsize=(10, 6))
x = np.linspace(0, 10, 100)
ax.plot(x, np.sin(x))

# Tick positions
ax.set_xticks([0, 2, 4, 6, 8, 10])
ax.set_yticks([-1, -0.5, 0, 0.5, 1])

# Tick labels
ax.set_xticklabels(['Zero', 'Two', 'Four', 'Six', 'Eight', 'Ten'])

# Tick parameters
ax.tick_params(axis='x',
               labelsize=10,
               labelrotation=45,
               labelcolor='blue',
               length=6,
               width=2,
               direction='in')

# Minor ticks
ax.minorticks_on()
ax.tick_params(axis='both', which='minor', length=3)

# Custom tick formatter
from matplotlib.ticker import FuncFormatter

def currency(x, pos):
    return f'${x:.2f}'

ax.yaxis.set_major_formatter(FuncFormatter(currency))
plt.show()

# Log scale
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
x = np.logspace(0, 3, 100)
y = x ** 2

ax1.plot(x, y)
ax1.set_title('Linear Scale')

ax2.plot(x, y)
ax2.set_xscale('log')
ax2.set_yscale('log')
ax2.set_title('Log Scale')
ax2.grid(True, which='both', alpha=0.3)
plt.show()
</code></pre>
<h3 id="spines-and-frames"><a class="header" href="#spines-and-frames">Spines and Frames</a></h3>
<pre><code class="language-python">fig, axes = plt.subplots(2, 2, figsize=(12, 10))

x = np.linspace(-5, 5, 100)
y = x ** 2

# Default
axes[0, 0].plot(x, y)
axes[0, 0].set_title('Default')

# Remove top and right spines
axes[0, 1].plot(x, y)
axes[0, 1].spines['top'].set_visible(False)
axes[0, 1].spines['right'].set_visible(False)
axes[0, 1].set_title('Clean')

# Move spines to zero
axes[1, 0].plot(x, y)
axes[1, 0].spines['left'].set_position('zero')
axes[1, 0].spines['bottom'].set_position('zero')
axes[1, 0].spines['top'].set_visible(False)
axes[1, 0].spines['right'].set_visible(False)
axes[1, 0].set_title('Centered')

# No spines (floating)
axes[1, 1].plot(x, y)
for spine in axes[1, 1].spines.values():
    spine.set_visible(False)
axes[1, 1].set_title('No Spines')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="annotations-and-text"><a class="header" href="#annotations-and-text">Annotations and Text</a></h3>
<pre><code class="language-python">fig, ax = plt.subplots(figsize=(10, 6))

x = np.linspace(0, 10, 100)
y = np.sin(x)
ax.plot(x, y)

# Simple text
ax.text(5, 0.5, 'Peak Region', fontsize=12)

# Text with box
bbox_props = dict(boxstyle='round', facecolor='wheat', alpha=0.5)
ax.text(8, -0.5, 'Trough', fontsize=12, bbox=bbox_props)

# Annotation with arrow
ax.annotate('Maximum',
            xy=(np.pi/2, 1),      # Point to annotate
            xytext=(2, 0.5),      # Text position
            fontsize=12,
            arrowprops=dict(facecolor='red',
                          shrink=0.05,
                          width=2,
                          headwidth=8))

# Multiple annotation styles
ax.annotate('Fancy Arrow',
            xy=(3*np.pi/2, -1),
            xytext=(7, -0.3),
            arrowprops=dict(arrowstyle='-&gt;',
                          connectionstyle='arc3,rad=0.3',
                          color='blue',
                          lw=2))

# Mathematical text (LaTeX)
ax.text(1, -0.8, r'$y = \sin(x)$', fontsize=16)
ax.text(5, -0.8, r'$\int_0^{\pi} \sin(x)dx = 2$', fontsize=14)

plt.show()

# Arrow styles
arrow_styles = ['-', '-&gt;', '-[', '|-|', '-|&gt;', '&lt;-', '&lt;-&gt;',
                'fancy', 'simple', 'wedge']
</code></pre>
<h3 id="adding-shapes"><a class="header" href="#adding-shapes">Adding Shapes</a></h3>
<pre><code class="language-python">from matplotlib.patches import Circle, Rectangle, Polygon, Ellipse, FancyBboxPatch
from matplotlib.collections import PatchCollection

fig, ax = plt.subplots(figsize=(10, 8))

# Circle
circle = Circle((2, 2), 0.5, color='red', alpha=0.5)
ax.add_patch(circle)

# Rectangle
rect = Rectangle((4, 1), 1, 2, color='blue', alpha=0.5)
ax.add_patch(rect)

# Ellipse
ellipse = Ellipse((7, 2), 1, 2, angle=30, color='green', alpha=0.5)
ax.add_patch(ellipse)

# Polygon
triangle = Polygon([[1, 4], [2, 6], [3, 4]], color='purple', alpha=0.5)
ax.add_patch(triangle)

# Fancy box
fancy = FancyBboxPatch((5, 4), 2, 1.5,
                       boxstyle="round,pad=0.1",
                       edgecolor='orange',
                       facecolor='yellow',
                       linewidth=2,
                       alpha=0.5)
ax.add_patch(fancy)

ax.set_xlim(0, 10)
ax.set_ylim(0, 8)
ax.set_aspect('equal')
plt.show()
</code></pre>
<hr>
<h2 id="advanced-plot-types"><a class="header" href="#advanced-plot-types">Advanced Plot Types</a></h2>
<h3 id="3d-plots"><a class="header" href="#3d-plots">3D Plots</a></h3>
<pre><code class="language-python">from mpl_toolkits.mplot3d import Axes3D

# 3D line plot
fig = plt.figure(figsize=(12, 5))
ax = fig.add_subplot(121, projection='3d')

t = np.linspace(0, 10, 1000)
x = np.sin(t)
y = np.cos(t)
z = t

ax.plot(x, y, z, linewidth=2)
ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.set_zlabel('Z')
ax.set_title('3D Line Plot')

# 3D scatter
ax = fig.add_subplot(122, projection='3d')
x = np.random.randn(100)
y = np.random.randn(100)
z = np.random.randn(100)
colors = np.random.rand(100)

scatter = ax.scatter(x, y, z, c=colors, cmap='viridis', s=50)
ax.set_title('3D Scatter')
plt.colorbar(scatter, ax=ax)
plt.show()

# 3D surface
fig = plt.figure(figsize=(12, 5))

# Surface plot
ax = fig.add_subplot(121, projection='3d')
x = np.linspace(-5, 5, 50)
y = np.linspace(-5, 5, 50)
X, Y = np.meshgrid(x, y)
Z = np.sin(np.sqrt(X**2 + Y**2))

surf = ax.plot_surface(X, Y, Z, cmap='coolwarm', alpha=0.8)
ax.set_title('Surface Plot')
plt.colorbar(surf, ax=ax, shrink=0.5)

# Wireframe
ax = fig.add_subplot(122, projection='3d')
ax.plot_wireframe(X, Y, Z, color='blue', linewidth=0.5)
ax.set_title('Wireframe Plot')
plt.show()

# Contour3D
fig = plt.figure(figsize=(10, 8))
ax = fig.add_subplot(111, projection='3d')
ax.contour3D(X, Y, Z, 50, cmap='viridis')
ax.set_title('3D Contour')
plt.show()
</code></pre>
<h3 id="contour-plots"><a class="header" href="#contour-plots">Contour Plots</a></h3>
<pre><code class="language-python"># 2D contour
x = np.linspace(-3, 3, 100)
y = np.linspace(-3, 3, 100)
X, Y = np.meshgrid(x, y)
Z = np.sin(X) * np.cos(Y)

fig, (ax1, ax2, ax3) = plt.subplots(1, 3, figsize=(15, 4))

# Filled contour
contourf = ax1.contourf(X, Y, Z, levels=20, cmap='RdYlBu')
ax1.set_title('Filled Contour')
plt.colorbar(contourf, ax=ax1)

# Line contour
contour = ax2.contour(X, Y, Z, levels=10, colors='black')
ax2.clabel(contour, inline=True, fontsize=8)  # Label contours
ax2.set_title('Line Contour')

# Combined
ax3.contourf(X, Y, Z, levels=20, cmap='RdYlBu', alpha=0.7)
contour = ax3.contour(X, Y, Z, levels=10, colors='black', linewidths=0.5)
ax3.clabel(contour, inline=True, fontsize=8)
ax3.set_title('Combined')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="heatmaps-and-imshow"><a class="header" href="#heatmaps-and-imshow">Heatmaps and imshow</a></h3>
<pre><code class="language-python"># Heatmap
data = np.random.rand(10, 12)

fig, ax = plt.subplots(figsize=(10, 8))
im = ax.imshow(data, cmap='YlOrRd', aspect='auto')

# Colorbar
cbar = plt.colorbar(im, ax=ax)
cbar.set_label('Value', rotation=270, labelpad=20)

# Ticks and labels
ax.set_xticks(np.arange(12))
ax.set_yticks(np.arange(10))
ax.set_xticklabels([f'Col {i}' for i in range(12)])
ax.set_yticklabels([f'Row {i}' for i in range(10)])

# Rotate x labels
plt.setp(ax.get_xticklabels(), rotation=45, ha='right')

# Add values in cells
for i in range(10):
    for j in range(12):
        text = ax.text(j, i, f'{data[i, j]:.2f}',
                      ha='center', va='center', color='black')

ax.set_title('Heatmap with Values')
plt.tight_layout()
plt.show()
</code></pre>
<h3 id="error-bars"><a class="header" href="#error-bars">Error Bars</a></h3>
<pre><code class="language-python">x = np.linspace(0, 10, 20)
y = np.sin(x)
yerr = 0.1 + 0.05 * np.random.rand(len(x))
xerr = 0.1 + 0.05 * np.random.rand(len(x))

fig, (ax1, ax2, ax3) = plt.subplots(1, 3, figsize=(15, 4))

# Y error bars only
ax1.errorbar(x, y, yerr=yerr, fmt='o-', capsize=5,
             capthick=2, label='Data')
ax1.set_title('Y Error Bars')
ax1.legend()

# X and Y error bars
ax2.errorbar(x, y, xerr=xerr, yerr=yerr, fmt='s-',
             capsize=5, alpha=0.7)
ax2.set_title('X and Y Error Bars')

# Shaded error region
ax3.plot(x, y, 'o-', label='Mean')
ax3.fill_between(x, y - yerr, y + yerr, alpha=0.3, label='±1 std')
ax3.set_title('Shaded Error Region')
ax3.legend()

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="box-plots-and-violin-plots"><a class="header" href="#box-plots-and-violin-plots">Box Plots and Violin Plots</a></h3>
<pre><code class="language-python"># Generate sample data
data = [np.random.normal(0, std, 100) for std in range(1, 5)]

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# Box plot
bp = ax1.boxplot(data,
                 labels=['Group 1', 'Group 2', 'Group 3', 'Group 4'],
                 notch=True,  # Notched box
                 patch_artist=True)  # Fill with color

# Customize colors
colors = ['lightblue', 'lightgreen', 'pink', 'lightyellow']
for patch, color in zip(bp['boxes'], colors):
    patch.set_facecolor(color)

ax1.set_title('Box Plot')
ax1.set_ylabel('Values')

# Violin plot
parts = ax2.violinplot(data, showmeans=True, showmedians=True)
ax2.set_title('Violin Plot')
ax2.set_xticks([1, 2, 3, 4])
ax2.set_xticklabels(['Group 1', 'Group 2', 'Group 3', 'Group 4'])

plt.tight_layout()
plt.show()

# Horizontal box plot
fig, ax = plt.subplots(figsize=(8, 6))
ax.boxplot(data, vert=False, labels=['A', 'B', 'C', 'D'])
ax.set_xlabel('Values')
plt.show()
</code></pre>
<h3 id="stream-plots-and-quiver-plots"><a class="header" href="#stream-plots-and-quiver-plots">Stream Plots and Quiver Plots</a></h3>
<pre><code class="language-python"># Vector field (quiver plot)
x = np.linspace(-3, 3, 20)
y = np.linspace(-3, 3, 20)
X, Y = np.meshgrid(x, y)
U = -Y  # x-component
V = X   # y-component

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# Quiver plot
ax1.quiver(X, Y, U, V, alpha=0.8)
ax1.set_title('Quiver Plot (Vector Field)')
ax1.set_aspect('equal')

# Stream plot
ax2.streamplot(X, Y, U, V, density=1.5, color=np.sqrt(U**2 + V**2),
               cmap='viridis', linewidth=1)
ax2.set_title('Stream Plot')
ax2.set_aspect('equal')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="polar-plots"><a class="header" href="#polar-plots">Polar Plots</a></h3>
<pre><code class="language-python"># Polar line plot
theta = np.linspace(0, 2*np.pi, 100)
r = 1 + np.sin(4*theta)

fig, (ax1, ax2) = plt.subplots(1, 2, subplot_kw=dict(projection='polar'),
                                figsize=(12, 5))

ax1.plot(theta, r)
ax1.set_title('Polar Line Plot')

# Polar scatter with colors
theta2 = np.random.uniform(0, 2*np.pi, 100)
r2 = np.random.uniform(0, 2, 100)
colors = theta2

ax2.scatter(theta2, r2, c=colors, cmap='hsv', alpha=0.75)
ax2.set_title('Polar Scatter')

plt.show()

# Polar bar (rose diagram)
fig, ax = plt.subplots(subplot_kw=dict(projection='polar'))
theta = np.linspace(0, 2*np.pi, 8, endpoint=False)
radii = np.random.rand(8) * 10
width = 2*np.pi / 8

bars = ax.bar(theta, radii, width=width, bottom=0.0, alpha=0.7)

# Color bars by height
for r, bar in zip(radii, bars):
    bar.set_facecolor(plt.cm.viridis(r / 10))

plt.show()
</code></pre>
<hr>
<h2 id="styling-and-themes"><a class="header" href="#styling-and-themes">Styling and Themes</a></h2>
<h3 id="built-in-styles"><a class="header" href="#built-in-styles">Built-in Styles</a></h3>
<pre><code class="language-python"># See available styles
print(plt.style.available)

# Use a style
plt.style.use('seaborn-v0_8-darkgrid')
# Or: 'ggplot', 'fivethirtyeight', 'bmh', 'dark_background', etc.

# Example with different styles
styles = ['default', 'seaborn-v0_8-darkgrid', 'ggplot', 'fivethirtyeight']

fig, axes = plt.subplots(2, 2, figsize=(12, 10))
x = np.linspace(0, 10, 100)

for ax, style in zip(axes.flat, styles):
    with plt.style.context(style):
        ax.plot(x, np.sin(x), label='sin(x)')
        ax.plot(x, np.cos(x), label='cos(x)')
        ax.set_title(style)
        ax.legend()

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="rcparams-configuration"><a class="header" href="#rcparams-configuration">rcParams Configuration</a></h3>
<pre><code class="language-python">import matplotlib as mpl

# View current settings
print(mpl.rcParams['font.size'])

# Temporary changes
with mpl.rc_context({'font.size': 14, 'lines.linewidth': 2}):
    plt.plot([1, 2, 3], [1, 4, 2])
    plt.show()

# Global changes (persists for session)
mpl.rcParams['font.size'] = 12
mpl.rcParams['font.family'] = 'serif'
mpl.rcParams['figure.figsize'] = (10, 6)
mpl.rcParams['axes.grid'] = True
mpl.rcParams['grid.alpha'] = 0.3
mpl.rcParams['lines.linewidth'] = 2
mpl.rcParams['axes.spines.top'] = False
mpl.rcParams['axes.spines.right'] = False

# Reset to defaults
mpl.rcParams.update(mpl.rcParamsDefault)

# Common rcParams for publications
pub_params = {
    'font.size': 10,
    'font.family': 'serif',
    'font.serif': ['Times New Roman'],
    'axes.labelsize': 12,
    'axes.titlesize': 14,
    'xtick.labelsize': 10,
    'ytick.labelsize': 10,
    'legend.fontsize': 10,
    'figure.figsize': (6, 4),
    'figure.dpi': 300,
    'savefig.dpi': 300,
    'savefig.bbox': 'tight',
    'axes.linewidth': 1,
    'lines.linewidth': 1.5,
}
mpl.rcParams.update(pub_params)
</code></pre>
<h3 id="custom-style-sheets"><a class="header" href="#custom-style-sheets">Custom Style Sheets</a></h3>
<pre><code class="language-python"># Create custom style file: ~/.matplotlib/stylelib/mystyle.mplstyle
"""
# mystyle.mplstyle
figure.figsize: 10, 6
figure.dpi: 100

axes.grid: True
axes.grid.axis: both
grid.alpha: 0.3
grid.linestyle: --

axes.spines.top: False
axes.spines.right: False

font.size: 12
axes.labelsize: 14
axes.titlesize: 16

lines.linewidth: 2
lines.markersize: 8

legend.frameon: False
legend.loc: best
"""

# Use custom style
# plt.style.use('mystyle')

# Or use directly with context
custom_style = {
    'axes.grid': True,
    'grid.alpha': 0.3,
    'axes.spines.top': False,
    'axes.spines.right': False,
}

with plt.style.context(custom_style):
    plt.plot([1, 2, 3], [1, 4, 2])
    plt.show()
</code></pre>
<hr>
<h2 id="mldata-science-visualizations"><a class="header" href="#mldata-science-visualizations">ML/Data Science Visualizations</a></h2>
<h3 id="confusion-matrix"><a class="header" href="#confusion-matrix">Confusion Matrix</a></h3>
<pre><code class="language-python">from sklearn.metrics import confusion_matrix
import itertools

def plot_confusion_matrix(cm, classes, normalize=False,
                         cmap=plt.cm.Blues):
    """
    Plot confusion matrix
    """
    if normalize:
        cm = cm.astype('float') / cm.sum(axis=1)[:, np.newaxis]

    fig, ax = plt.subplots(figsize=(8, 8))
    im = ax.imshow(cm, interpolation='nearest', cmap=cmap)
    ax.figure.colorbar(im, ax=ax)

    ax.set(xticks=np.arange(cm.shape[1]),
           yticks=np.arange(cm.shape[0]),
           xticklabels=classes,
           yticklabels=classes,
           ylabel='True label',
           xlabel='Predicted label')

    plt.setp(ax.get_xticklabels(), rotation=45, ha='right')

    # Add text annotations
    fmt = '.2f' if normalize else 'd'
    thresh = cm.max() / 2.
    for i, j in itertools.product(range(cm.shape[0]), range(cm.shape[1])):
        ax.text(j, i, format(cm[i, j], fmt),
                ha='center', va='center',
                color='white' if cm[i, j] &gt; thresh else 'black')

    fig.tight_layout()
    return ax

# Example usage
y_true = np.random.randint(0, 3, 100)
y_pred = np.random.randint(0, 3, 100)
cm = confusion_matrix(y_true, y_pred)
plot_confusion_matrix(cm, classes=['Class A', 'Class B', 'Class C'])
plt.show()
</code></pre>
<h3 id="roc-curve-and-auc"><a class="header" href="#roc-curve-and-auc">ROC Curve and AUC</a></h3>
<pre><code class="language-python">from sklearn.metrics import roc_curve, auc

def plot_roc_curve(y_true, y_scores, n_classes):
    """
    Plot ROC curves for multi-class classification
    """
    fig, ax = plt.subplots(figsize=(10, 8))

    colors = plt.cm.Set1(np.linspace(0, 1, n_classes))

    for i, color in enumerate(colors):
        # Binary indicators for class i
        y_true_binary = (y_true == i).astype(int)
        y_score_class = y_scores[:, i]

        fpr, tpr, _ = roc_curve(y_true_binary, y_score_class)
        roc_auc = auc(fpr, tpr)

        ax.plot(fpr, tpr, color=color, lw=2,
                label=f'Class {i} (AUC = {roc_auc:.2f})')

    # Diagonal line
    ax.plot([0, 1], [0, 1], 'k--', lw=2, label='Random Classifier')

    ax.set_xlim([0.0, 1.0])
    ax.set_ylim([0.0, 1.05])
    ax.set_xlabel('False Positive Rate', fontsize=12)
    ax.set_ylabel('True Positive Rate', fontsize=12)
    ax.set_title('ROC Curves', fontsize=14)
    ax.legend(loc='lower right')
    ax.grid(alpha=0.3)

    return ax

# Example
n_samples, n_classes = 1000, 3
y_true = np.random.randint(0, n_classes, n_samples)
y_scores = np.random.rand(n_samples, n_classes)
y_scores = y_scores / y_scores.sum(axis=1, keepdims=True)  # Normalize

plot_roc_curve(y_true, y_scores, n_classes)
plt.show()
</code></pre>
<h3 id="learning-curves"><a class="header" href="#learning-curves">Learning Curves</a></h3>
<pre><code class="language-python">def plot_learning_curves(train_losses, val_losses, train_accs=None, val_accs=None):
    """
    Plot training and validation loss/accuracy curves
    """
    fig, axes = plt.subplots(1, 2, figsize=(14, 5))

    epochs = range(1, len(train_losses) + 1)

    # Loss curves
    axes[0].plot(epochs, train_losses, 'b-o', label='Training Loss',
                 markersize=4)
    axes[0].plot(epochs, val_losses, 'r-s', label='Validation Loss',
                 markersize=4)
    axes[0].set_xlabel('Epoch')
    axes[0].set_ylabel('Loss')
    axes[0].set_title('Training and Validation Loss')
    axes[0].legend()
    axes[0].grid(alpha=0.3)

    # Accuracy curves (if provided)
    if train_accs is not None and val_accs is not None:
        axes[1].plot(epochs, train_accs, 'b-o', label='Training Accuracy',
                     markersize=4)
        axes[1].plot(epochs, val_accs, 'r-s', label='Validation Accuracy',
                     markersize=4)
        axes[1].set_xlabel('Epoch')
        axes[1].set_ylabel('Accuracy')
        axes[1].set_title('Training and Validation Accuracy')
        axes[1].legend()
        axes[1].grid(alpha=0.3)
    else:
        axes[1].axis('off')

    plt.tight_layout()
    return fig

# Example
epochs = 50
train_losses = 2.0 * np.exp(-np.arange(epochs) / 10) + 0.1 * np.random.rand(epochs)
val_losses = 2.0 * np.exp(-np.arange(epochs) / 10) + 0.2 * np.random.rand(epochs) + 0.1
train_accs = 1 - np.exp(-np.arange(epochs) / 10) * 0.9
val_accs = 1 - np.exp(-np.arange(epochs) / 10) * 0.9 - 0.05

plot_learning_curves(train_losses, val_losses, train_accs, val_accs)
plt.show()
</code></pre>
<h3 id="feature-importance"><a class="header" href="#feature-importance">Feature Importance</a></h3>
<pre><code class="language-python">def plot_feature_importance(feature_names, importances, top_n=20):
    """
    Plot feature importance bar chart
    """
    # Sort by importance
    indices = np.argsort(importances)[::-1][:top_n]
    sorted_importances = importances[indices]
    sorted_names = [feature_names[i] for i in indices]

    fig, ax = plt.subplots(figsize=(10, 8))

    # Horizontal bar chart
    y_pos = np.arange(len(sorted_names))
    colors = plt.cm.viridis(sorted_importances / sorted_importances.max())

    bars = ax.barh(y_pos, sorted_importances, color=colors)
    ax.set_yticks(y_pos)
    ax.set_yticklabels(sorted_names)
    ax.invert_yaxis()  # Top feature at the top
    ax.set_xlabel('Importance', fontsize=12)
    ax.set_title(f'Top {top_n} Feature Importances', fontsize=14)

    # Add value labels
    for i, (bar, val) in enumerate(zip(bars, sorted_importances)):
        ax.text(val, i, f' {val:.3f}', va='center')

    plt.tight_layout()
    return fig

# Example
n_features = 50
feature_names = [f'Feature_{i}' for i in range(n_features)]
importances = np.random.exponential(0.1, n_features)

plot_feature_importance(feature_names, importances, top_n=15)
plt.show()
</code></pre>
<h3 id="decision-boundaries"><a class="header" href="#decision-boundaries">Decision Boundaries</a></h3>
<pre><code class="language-python">def plot_decision_boundary(X, y, model, resolution=0.02):
    """
    Plot decision boundary for 2D classification
    """
    # Setup marker generator and color map
    markers = ('o', 's', '^', 'v', '&lt;')
    colors = ('red', 'blue', 'green', 'gray', 'cyan')
    cmap = plt.cm.RdYlBu

    # Plot decision surface
    x1_min, x1_max = X[:, 0].min() - 1, X[:, 0].max() + 1
    x2_min, x2_max = X[:, 1].min() - 1, X[:, 1].max() + 1

    xx1, xx2 = np.meshgrid(np.arange(x1_min, x1_max, resolution),
                           np.arange(x2_min, x2_max, resolution))

    # Predict on grid
    Z = model.predict(np.array([xx1.ravel(), xx2.ravel()]).T)
    Z = Z.reshape(xx1.shape)

    fig, ax = plt.subplots(figsize=(10, 8))

    # Plot filled contour
    ax.contourf(xx1, xx2, Z, alpha=0.3, cmap=cmap)
    ax.contour(xx1, xx2, Z, colors='black', linewidths=0.5, alpha=0.5)

    # Plot data points
    for idx, cl in enumerate(np.unique(y)):
        ax.scatter(x=X[y == cl, 0], y=X[y == cl, 1],
                  alpha=0.8, c=[colors[idx]], marker=markers[idx],
                  s=100, edgecolor='black', label=f'Class {cl}')

    ax.set_xlabel('Feature 1', fontsize=12)
    ax.set_ylabel('Feature 2', fontsize=12)
    ax.set_title('Decision Boundary', fontsize=14)
    ax.legend()

    return fig

# Example (requires a model with predict method)
# from sklearn.svm import SVC
# X = np.random.randn(200, 2)
# y = (X[:, 0] + X[:, 1] &gt; 0).astype(int)
# model = SVC(kernel='rbf').fit(X, y)
# plot_decision_boundary(X, y, model)
</code></pre>
<h3 id="attention-heatmap"><a class="header" href="#attention-heatmap">Attention Heatmap</a></h3>
<pre><code class="language-python">def plot_attention_heatmap(attention_matrix, x_labels=None, y_labels=None):
    """
    Plot attention weights as heatmap
    Useful for visualizing transformer attention
    """
    fig, ax = plt.subplots(figsize=(12, 10))

    im = ax.imshow(attention_matrix, cmap='YlOrRd', aspect='auto')

    # Colorbar
    cbar = plt.colorbar(im, ax=ax)
    cbar.set_label('Attention Weight', rotation=270, labelpad=20)

    # Labels
    if x_labels is not None:
        ax.set_xticks(np.arange(len(x_labels)))
        ax.set_xticklabels(x_labels, rotation=45, ha='right')

    if y_labels is not None:
        ax.set_yticks(np.arange(len(y_labels)))
        ax.set_yticklabels(y_labels)

    ax.set_xlabel('Keys', fontsize=12)
    ax.set_ylabel('Queries', fontsize=12)
    ax.set_title('Attention Heatmap', fontsize=14)

    # Grid
    ax.set_xticks(np.arange(attention_matrix.shape[1]) - 0.5, minor=True)
    ax.set_yticks(np.arange(attention_matrix.shape[0]) - 0.5, minor=True)
    ax.grid(which='minor', color='gray', linestyle='-', linewidth=0.5)

    plt.tight_layout()
    return fig

# Example
seq_len = 10
attention = np.random.rand(seq_len, seq_len)
attention = attention / attention.sum(axis=1, keepdims=True)  # Normalize

tokens = [f'Token_{i}' for i in range(seq_len)]
plot_attention_heatmap(attention, x_labels=tokens, y_labels=tokens)
plt.show()
</code></pre>
<h3 id="image-grid"><a class="header" href="#image-grid">Image Grid</a></h3>
<pre><code class="language-python">def plot_image_grid(images, labels=None, nrows=4, ncols=4, figsize=(12, 12)):
    """
    Display a grid of images
    """
    fig, axes = plt.subplots(nrows, ncols, figsize=figsize)

    for idx, ax in enumerate(axes.flat):
        if idx &lt; len(images):
            # Handle grayscale and RGB
            if images[idx].ndim == 2:
                ax.imshow(images[idx], cmap='gray')
            else:
                ax.imshow(images[idx])

            if labels is not None:
                ax.set_title(f'Label: {labels[idx]}')

            ax.axis('off')
        else:
            ax.axis('off')

    plt.tight_layout()
    return fig

# Example
n_images = 16
images = [np.random.rand(28, 28) for _ in range(n_images)]
labels = np.random.randint(0, 10, n_images)

plot_image_grid(images, labels, nrows=4, ncols=4)
plt.show()
</code></pre>
<h3 id="correlation-matrix"><a class="header" href="#correlation-matrix">Correlation Matrix</a></h3>
<pre><code class="language-python">def plot_correlation_matrix(data, feature_names=None, method='pearson'):
    """
    Plot correlation matrix heatmap
    """
    # Compute correlation
    if method == 'pearson':
        corr = np.corrcoef(data.T)
    elif method == 'spearman':
        from scipy.stats import spearmanr
        corr, _ = spearmanr(data)

    fig, ax = plt.subplots(figsize=(12, 10))

    # Plot heatmap
    im = ax.imshow(corr, cmap='coolwarm', vmin=-1, vmax=1, aspect='auto')

    # Colorbar
    cbar = plt.colorbar(im, ax=ax)
    cbar.set_label('Correlation', rotation=270, labelpad=20)

    # Labels
    if feature_names is not None:
        ax.set_xticks(np.arange(len(feature_names)))
        ax.set_yticks(np.arange(len(feature_names)))
        ax.set_xticklabels(feature_names, rotation=45, ha='right')
        ax.set_yticklabels(feature_names)

    # Add correlation values
    for i in range(corr.shape[0]):
        for j in range(corr.shape[1]):
            text = ax.text(j, i, f'{corr[i, j]:.2f}',
                          ha='center', va='center',
                          color='white' if abs(corr[i, j]) &gt; 0.5 else 'black',
                          fontsize=8)

    ax.set_title(f'{method.capitalize()} Correlation Matrix', fontsize=14)
    plt.tight_layout()
    return fig

# Example
n_samples, n_features = 100, 10
data = np.random.randn(n_samples, n_features)
feature_names = [f'Feature {i}' for i in range(n_features)]

plot_correlation_matrix(data, feature_names)
plt.show()
</code></pre>
<hr>
<h2 id="working-with-images"><a class="header" href="#working-with-images">Working with Images</a></h2>
<h3 id="displaying-images"><a class="header" href="#displaying-images">Displaying Images</a></h3>
<pre><code class="language-python"># Single image
img = np.random.rand(100, 100, 3)  # RGB

fig, ax = plt.subplots(figsize=(6, 6))
ax.imshow(img)
ax.axis('off')
plt.show()

# Grayscale
img_gray = np.random.rand(100, 100)

fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
ax1.imshow(img_gray, cmap='gray')
ax1.set_title('Grayscale (gray cmap)')
ax1.axis('off')

ax2.imshow(img_gray, cmap='viridis')
ax2.set_title('Grayscale (viridis cmap)')
ax2.axis('off')

plt.show()

# Control interpolation
fig, axes = plt.subplots(2, 2, figsize=(10, 10))
small_img = np.random.rand(10, 10)

interpolations = ['nearest', 'bilinear', 'bicubic', 'lanczos']
for ax, interp in zip(axes.flat, interpolations):
    ax.imshow(small_img, cmap='gray', interpolation=interp)
    ax.set_title(f'Interpolation: {interp}')
    ax.axis('off')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="image-operations"><a class="header" href="#image-operations">Image Operations</a></h3>
<pre><code class="language-python"># Load image (with PIL or similar)
# from PIL import Image
# img = np.array(Image.open('image.jpg'))

# Simulated image
img = np.random.randint(0, 255, (100, 100, 3), dtype=np.uint8)

fig, axes = plt.subplots(2, 3, figsize=(15, 10))

# Original
axes[0, 0].imshow(img)
axes[0, 0].set_title('Original')
axes[0, 0].axis('off')

# Channels
axes[0, 1].imshow(img[:, :, 0], cmap='Reds')
axes[0, 1].set_title('Red Channel')
axes[0, 1].axis('off')

axes[0, 2].imshow(img[:, :, 1], cmap='Greens')
axes[0, 2].set_title('Green Channel')
axes[0, 2].axis('off')

axes[1, 0].imshow(img[:, :, 2], cmap='Blues')
axes[1, 0].set_title('Blue Channel')
axes[1, 0].axis('off')

# Histogram
axes[1, 1].hist(img[:, :, 0].ravel(), bins=50, alpha=0.5, color='red', label='R')
axes[1, 1].hist(img[:, :, 1].ravel(), bins=50, alpha=0.5, color='green', label='G')
axes[1, 1].hist(img[:, :, 2].ravel(), bins=50, alpha=0.5, color='blue', label='B')
axes[1, 1].set_title('Histogram')
axes[1, 1].legend()

# Grayscale
gray = np.mean(img, axis=2)
axes[1, 2].imshow(gray, cmap='gray')
axes[1, 2].set_title('Grayscale')
axes[1, 2].axis('off')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="image-overlays-and-masks"><a class="header" href="#image-overlays-and-masks">Image Overlays and Masks</a></h3>
<pre><code class="language-python"># Base image
img = np.random.rand(100, 100, 3)

# Create mask
mask = np.zeros((100, 100))
mask[30:70, 30:70] = 1

fig, (ax1, ax2, ax3) = plt.subplots(1, 3, figsize=(15, 5))

# Original
ax1.imshow(img)
ax1.set_title('Original Image')
ax1.axis('off')

# Mask overlay
ax2.imshow(img)
ax2.imshow(mask, alpha=0.5, cmap='Reds')
ax2.set_title('With Mask Overlay')
ax2.axis('off')

# Masked image
masked_img = img.copy()
masked_img[mask == 0] = 0
ax3.imshow(masked_img)
ax3.set_title('Masked Image')
ax3.axis('off')

plt.tight_layout()
plt.show()
</code></pre>
<hr>
<h2 id="animations"><a class="header" href="#animations">Animations</a></h2>
<h3 id="basic-animation"><a class="header" href="#basic-animation">Basic Animation</a></h3>
<pre><code class="language-python">from matplotlib.animation import FuncAnimation

# Create figure
fig, ax = plt.subplots(figsize=(8, 6))
xdata, ydata = [], []
ln, = ax.plot([], [], 'r-', animated=True)

def init():
    ax.set_xlim(0, 2*np.pi)
    ax.set_ylim(-1, 1)
    return ln,

def update(frame):
    xdata.append(frame)
    ydata.append(np.sin(frame))
    ln.set_data(xdata, ydata)
    return ln,

ani = FuncAnimation(fig, update, frames=np.linspace(0, 2*np.pi, 128),
                    init_func=init, blit=True, interval=20)

# Save animation
# ani.save('sine_wave.gif', writer='pillow', fps=30)
# ani.save('sine_wave.mp4', writer='ffmpeg', fps=30)

plt.show()
</code></pre>
<h3 id="animated-scatter"><a class="header" href="#animated-scatter">Animated Scatter</a></h3>
<pre><code class="language-python"># Animated scatter plot
fig, ax = plt.subplots(figsize=(8, 6))
scat = ax.scatter([], [], s=100, alpha=0.6)
ax.set_xlim(-5, 5)
ax.set_ylim(-5, 5)

def init():
    scat.set_offsets(np.empty((0, 2)))
    return scat,

def update(frame):
    # Generate random walk
    n_points = 50
    x = np.random.randn(n_points).cumsum() * 0.1
    y = np.random.randn(n_points).cumsum() * 0.1
    data = np.c_[x, y]
    scat.set_offsets(data)
    scat.set_array(np.arange(n_points))
    return scat,

ani = FuncAnimation(fig, update, frames=100, init_func=init,
                    blit=True, interval=50)
plt.show()
</code></pre>
<h3 id="animated-heatmap"><a class="header" href="#animated-heatmap">Animated Heatmap</a></h3>
<pre><code class="language-python"># Animated heatmap (useful for gradient visualization)
fig, ax = plt.subplots(figsize=(8, 6))

def animate(frame):
    ax.clear()
    data = np.random.rand(10, 10) * frame / 100
    im = ax.imshow(data, cmap='hot', vmin=0, vmax=1)
    ax.set_title(f'Frame {frame}')
    return [im]

ani = FuncAnimation(fig, animate, frames=100, interval=50)
plt.show()
</code></pre>
<hr>
<h2 id="integration-patterns"><a class="header" href="#integration-patterns">Integration Patterns</a></h2>
<h3 id="with-numpy"><a class="header" href="#with-numpy">With NumPy</a></h3>
<pre><code class="language-python"># NumPy arrays are matplotlib's native format
x = np.linspace(0, 10, 1000)
y = np.sin(x)

fig, ax = plt.subplots()
ax.plot(x, y)
plt.show()

# Multi-dimensional data
data = np.random.randn(100, 100)
fig, ax = plt.subplots()
im = ax.imshow(data, cmap='viridis')
plt.colorbar(im, ax=ax)
plt.show()
</code></pre>
<h3 id="with-pandas"><a class="header" href="#with-pandas">With Pandas</a></h3>
<pre><code class="language-python">import pandas as pd

# Create sample DataFrame
df = pd.DataFrame({
    'x': np.random.randn(100),
    'y': np.random.randn(100),
    'category': np.random.choice(['A', 'B', 'C'], 100)
})

# Pandas plotting (uses matplotlib)
fig, axes = plt.subplots(2, 2, figsize=(12, 10))

# Histogram
df['x'].hist(ax=axes[0, 0], bins=20)
axes[0, 0].set_title('Histogram')

# Scatter with categories
for cat in df['category'].unique():
    subset = df[df['category'] == cat]
    axes[0, 1].scatter(subset['x'], subset['y'], label=cat, alpha=0.6)
axes[0, 1].legend()
axes[0, 1].set_title('Scatter by Category')

# Box plot
df.boxplot(column=['x', 'y'], ax=axes[1, 0])
axes[1, 0].set_title('Box Plot')

# Time series
ts_df = pd.DataFrame({
    'date': pd.date_range('2023-01-01', periods=100),
    'value': np.random.randn(100).cumsum()
})
ts_df.plot(x='date', y='value', ax=axes[1, 1])
axes[1, 1].set_title('Time Series')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="jupyter-notebook-integration"><a class="header" href="#jupyter-notebook-integration">Jupyter Notebook Integration</a></h3>
<pre><code class="language-python"># Enable inline plotting
%matplotlib inline

# For interactive plots
%matplotlib notebook  # Old interactive backend
%matplotlib widget    # New interactive backend (requires ipympl)

# High-resolution figures
%config InlineBackend.figure_format = 'retina'

# Or in code
from IPython.display import set_matplotlib_formats
set_matplotlib_formats('svg')  # or 'pdf', 'retina'
</code></pre>
<hr>
<h2 id="performance--best-practices"><a class="header" href="#performance--best-practices">Performance &amp; Best Practices</a></h2>
<h3 id="backends"><a class="header" href="#backends">Backends</a></h3>
<pre><code class="language-python">import matplotlib

# Check current backend
print(matplotlib.get_backend())

# Set backend (do this before importing pyplot)
# matplotlib.use('Agg')  # Non-interactive (for servers)
# matplotlib.use('TkAgg')  # Interactive
# matplotlib.use('Qt5Agg')  # Interactive with Qt

# Common backends:
# - 'Agg': PNG output, no display
# - 'PDF', 'PS', 'SVG': Vector outputs
# - 'TkAgg', 'Qt5Agg', 'GTK3Agg': Interactive
</code></pre>
<h3 id="memory-management"><a class="header" href="#memory-management">Memory Management</a></h3>
<pre><code class="language-python"># Close figures to free memory
fig, ax = plt.subplots()
ax.plot([1, 2, 3])
plt.savefig('plot.png')
plt.close(fig)  # Explicitly close

# Or close all figures
plt.close('all')

# For large datasets, downsample
large_x = np.linspace(0, 100, 1000000)
large_y = np.sin(large_x)

# Don't plot all points
step = len(large_x) // 1000
fig, ax = plt.subplots()
ax.plot(large_x[::step], large_y[::step])
plt.show()
</code></pre>
<h3 id="saving-figures"><a class="header" href="#saving-figures">Saving Figures</a></h3>
<pre><code class="language-python">fig, ax = plt.subplots()
ax.plot([1, 2, 3], [1, 4, 2])

# Vector formats (scalable, publication-quality)
plt.savefig('plot.pdf', format='pdf', bbox_inches='tight', dpi=300)
plt.savefig('plot.svg', format='svg', bbox_inches='tight')
plt.savefig('plot.eps', format='eps', bbox_inches='tight')

# Raster formats
plt.savefig('plot.png', format='png', bbox_inches='tight', dpi=300)
plt.savefig('plot.jpg', format='jpg', bbox_inches='tight', dpi=300, quality=95)

# Transparent background
plt.savefig('plot.png', transparent=True, bbox_inches='tight', dpi=300)

# Specific size
fig.set_size_inches(8, 6)
plt.savefig('plot.png', dpi=300)  # Will be 2400x1800 pixels
</code></pre>
<h3 id="publication-quality-figures"><a class="header" href="#publication-quality-figures">Publication-Quality Figures</a></h3>
<pre><code class="language-python"># Configure for publication
plt.rcParams.update({
    'font.size': 10,
    'font.family': 'serif',
    'axes.labelsize': 12,
    'axes.titlesize': 14,
    'xtick.labelsize': 10,
    'ytick.labelsize': 10,
    'legend.fontsize': 10,
    'figure.figsize': (6, 4),
    'figure.dpi': 300,
    'savefig.dpi': 300,
    'savefig.bbox': 'tight',
    'savefig.pad_inches': 0.1,
    'axes.linewidth': 1,
    'grid.linewidth': 0.5,
    'lines.linewidth': 1.5,
    'lines.markersize': 6,
    'patch.linewidth': 1,
    'xtick.major.width': 1,
    'ytick.major.width': 1,
    'xtick.minor.width': 0.5,
    'ytick.minor.width': 0.5,
})

# Create plot
fig, ax = plt.subplots()
x = np.linspace(0, 10, 100)
ax.plot(x, np.sin(x), label='sin(x)')
ax.plot(x, np.cos(x), label='cos(x)')
ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.legend()
ax.grid(alpha=0.3)

# Save for publication
plt.savefig('publication_figure.pdf', format='pdf')
plt.savefig('publication_figure.png', dpi=600)  # High DPI for raster
plt.show()
</code></pre>
<hr>
<h2 id="common-patterns--recipes"><a class="header" href="#common-patterns--recipes">Common Patterns &amp; Recipes</a></h2>
<h3 id="multi-panel-figure"><a class="header" href="#multi-panel-figure">Multi-Panel Figure</a></h3>
<pre><code class="language-python"># Complex multi-panel figure
fig = plt.figure(figsize=(14, 10))
gs = fig.add_gridspec(3, 3, hspace=0.3, wspace=0.3)

# Main plot (spans 2x2)
ax_main = fig.add_subplot(gs[:2, :2])
x = np.linspace(0, 10, 100)
ax_main.plot(x, np.sin(x))
ax_main.set_title('Main Plot', fontsize=14, fontweight='bold')

# Top right
ax_top = fig.add_subplot(gs[0, 2])
ax_top.hist(np.random.randn(1000), bins=30)
ax_top.set_title('Distribution')

# Middle right
ax_mid = fig.add_subplot(gs[1, 2])
ax_mid.scatter(np.random.rand(50), np.random.rand(50))
ax_mid.set_title('Scatter')

# Bottom (spans all columns)
ax_bottom = fig.add_subplot(gs[2, :])
ax_bottom.plot(x, np.cos(x))
ax_bottom.set_title('Bottom Plot')
ax_bottom.set_xlabel('X')

plt.show()
</code></pre>
<h3 id="shared-color-scale"><a class="header" href="#shared-color-scale">Shared Color Scale</a></h3>
<pre><code class="language-python"># Multiple subplots with shared colorbar
fig, axes = plt.subplots(1, 3, figsize=(15, 4))

vmin, vmax = -1, 1  # Shared scale

for i, ax in enumerate(axes):
    data = np.random.randn(10, 10)
    im = ax.imshow(data, cmap='RdBu', vmin=vmin, vmax=vmax)
    ax.set_title(f'Subplot {i+1}')

# Single colorbar for all subplots
fig.colorbar(im, ax=axes, orientation='horizontal',
             fraction=0.05, pad=0.1, label='Value')

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="date-plotting"><a class="header" href="#date-plotting">Date Plotting</a></h3>
<pre><code class="language-python">import matplotlib.dates as mdates
from datetime import datetime, timedelta

# Generate time series data
start_date = datetime(2023, 1, 1)
dates = [start_date + timedelta(days=i) for i in range(365)]
values = np.random.randn(365).cumsum()

fig, ax = plt.subplots(figsize=(12, 6))
ax.plot(dates, values)

# Format x-axis
ax.xaxis.set_major_locator(mdates.MonthLocator())
ax.xaxis.set_major_formatter(mdates.DateFormatter('%b %Y'))
ax.xaxis.set_minor_locator(mdates.WeekdayLocator())

# Rotate dates
plt.setp(ax.get_xticklabels(), rotation=45, ha='right')

ax.set_xlabel('Date')
ax.set_ylabel('Value')
ax.set_title('Time Series with Date Formatting')
ax.grid(alpha=0.3)

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="logarithmic-scales"><a class="header" href="#logarithmic-scales">Logarithmic Scales</a></h3>
<pre><code class="language-python">x = np.logspace(0, 5, 100)
y = x ** 2

fig, axes = plt.subplots(2, 2, figsize=(12, 10))

# Linear-linear
axes[0, 0].plot(x, y)
axes[0, 0].set_title('Linear-Linear')

# Log-linear (semi-log y)
axes[0, 1].semilogy(x, y)
axes[0, 1].set_title('Log-Linear')

# Linear-log (semi-log x)
axes[1, 0].semilogx(x, y)
axes[1, 0].set_title('Linear-Log')

# Log-log
axes[1, 1].loglog(x, y)
axes[1, 1].set_title('Log-Log')

for ax in axes.flat:
    ax.grid(True, which='both', alpha=0.3)

plt.tight_layout()
plt.show()
</code></pre>
<h3 id="filled-areas"><a class="header" href="#filled-areas">Filled Areas</a></h3>
<pre><code class="language-python">fig, ax = plt.subplots(figsize=(10, 6))

x = np.linspace(0, 10, 100)
y1 = np.sin(x)
y2 = np.sin(x) + 1

# Fill between two curves
ax.fill_between(x, y1, y2, alpha=0.3, label='Between curves')

# Fill to axis
ax.fill_between(x, 0, y1, where=(y1 &gt; 0), alpha=0.3,
                color='green', label='Positive')
ax.fill_between(x, 0, y1, where=(y1 &lt; 0), alpha=0.3,
                color='red', label='Negative')

ax.plot(x, y1, 'k-', linewidth=2)
ax.plot(x, y2, 'k-', linewidth=2)
ax.axhline(0, color='black', linewidth=0.5)

ax.legend()
ax.set_title('Filled Areas')
plt.show()
</code></pre>
<hr>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Matplotlib is incredibly powerful and flexible. Key takeaways:</p>
<ol>
<li><strong>Use the OO interface</strong> for complex plots and production code</li>
<li><strong>Customize everything</strong> - matplotlib gives you full control</li>
<li><strong>Plan your layout</strong> with GridSpec for complex figures</li>
<li><strong>Think about your audience</strong> - adjust style for presentations vs publications</li>
<li><strong>Use the right format</strong> - vector (PDF/SVG) for publications, raster (PNG) for web</li>
<li><strong>Manage memory</strong> - close figures, downsample large datasets</li>
<li><strong>Leverage colormaps</strong> thoughtfully - use perceptually uniform for data</li>
<li><strong>Practice common patterns</strong> - ML visualizations, multi-panel figures</li>
</ol>
<p><strong>Next Steps:</strong></p>
<ul>
<li>Explore <a href="https://seaborn.pydata.org/">Seaborn</a> for statistical visualizations</li>
<li>Try <a href="https://plotly.com/">Plotly</a> for interactive plots</li>
<li>Check out <a href="https://matplotlib.org/stable/gallery/index.html">matplotlib gallery</a> for inspiration</li>
<li>Read <a href="https://matplotlib.org/cheatsheets/">matplotlib cheatsheets</a></li>
</ul>
<p><strong>Resources:</strong></p>
<ul>
<li><a href="https://matplotlib.org/stable/contents.html">Matplotlib Documentation</a></li>
<li><a href="https://matplotlib.org/stable/gallery/index.html">Matplotlib Gallery</a></li>
<li><a href="https://github.com/rougier/matplotlib-tutorial">Nicolas Rougier’s Tutorial</a></li>
<li><a href="https://www.python-graph-gallery.com/">Python Graph Gallery</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../misc/statistics.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="../misc/pandas.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../misc/statistics.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="../misc/pandas.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr-ef4e11c1.min.js"></script>
        <script src="../mark-09e88c2c.min.js"></script>
        <script src="../searcher-c2a407aa.js"></script>

        <script src="../clipboard-1626706a.min.js"></script>
        <script src="../highlight-abc7f01d.js"></script>
        <script src="../book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
